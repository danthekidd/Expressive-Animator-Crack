var t,e=(t=import.meta.url,function(e={}){var i,n,s=e;s.ready=new Promise(((t,e)=>{i=t,n=e}));var r=Object.assign({},s),o="";"undefined"!=typeof document&&document.currentScript&&(o=document.currentScript.src),t&&(o=t),o=o.startsWith("blob:")?"":o.substr(0,o.replace(/[?#].*/,"").lastIndexOf("/")+1);var a=console.log.bind(console),l=console.error.bind(console);Object.assign(s,r),r=null,"object"!=typeof WebAssembly&&_("no native wasm support detected");var c,u,h,d,f,p,g,m,v,y=!1;function x(){var t=c.buffer;u=new Int8Array(t),d=new Int16Array(t),s.HEAPU8=h=new Uint8Array(t),s.HEAPU16=f=new Uint16Array(t),s.HEAP32=p=new Int32Array(t),s.HEAPU32=g=new Uint32Array(t),s.HEAPF32=m=new Float32Array(t),v=new Float64Array(t)}var b=[],w=[],M=[],S=0,k=null;function _(t){throw l(t="Aborted("+t+")"),y=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),n(t),t}var I,C=t=>t.startsWith("data:application/octet-stream;base64,");function L(){throw"both async and sync fetching of the wasm failed"}function N(t,e,i){return function(t){return"function"==typeof fetch?fetch(t,{credentials:"same-origin"}).then((e=>{if(!e.ok)throw`failed to load wasm binary file at '${t}'`;return e.arrayBuffer()})).catch((()=>L())):Promise.resolve().then((()=>L()))}(t).then((t=>WebAssembly.instantiate(t,e))).then(i,(t=>{l(`failed to asynchronously prepare wasm: ${t}`),_(t)}))}s.locateFile?C(I="skia.wasm")||(I=o+I):I=new URL("skia.wasm",import.meta.url).href;var j="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,z=(t,e,i)=>{var n=e+i;for(i=e;t[i]&&!(i>=n);)++i;if(16<i-e&&t.buffer&&j)return j.decode(t.subarray(e,i));for(n="";e<i;){var s=t[e++];if(128&s){var r=63&t[e++];if(192==(224&s))n+=String.fromCharCode((31&s)<<6|r);else{var o=63&t[e++];65536>(s=224==(240&s)?(15&s)<<12|r<<6|o:(7&s)<<18|r<<12|o<<6|63&t[e++])?n+=String.fromCharCode(s):(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|1023&s))}}else n+=String.fromCharCode(s)}return n},P={},T=t=>{for(;t.length;){var e=t.pop();t.pop()(e)}};function A(t){return this.fromWireType(g[t>>2])}var D,E,O,W={},R={},B={},U=(t,e,i)=>{function n(e){if((e=i(e)).length!==t.length)throw new D("Mismatched type converter count");for(var n=0;n<t.length;++n)F(t[n],e[n])}t.forEach((function(t){B[t]=e}));var s=Array(e.length),r=[],o=0;e.forEach(((t,e)=>{R.hasOwnProperty(t)?s[e]=R[t]:(r.push(t),W.hasOwnProperty(t)||(W[t]=[]),W[t].push((()=>{s[e]=R[t],++o===r.length&&n(s)})))})),0===r.length&&n(s)},$=t=>{for(var e="";h[t];)e+=E[h[t++]];return e};function F(t,e,i={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(t,e,i={}){var n=e.name;if(!t)throw new O(`type "${n}" must have a positive integer typeid pointer`);if(R.hasOwnProperty(t)){if(i.Ke)return;throw new O(`Cannot register type '${n}' twice`)}R[t]=e,delete B[t],W.hasOwnProperty(t)&&(e=W[t],delete W[t],e.forEach((t=>t())))}(t,e,i)}var V,H=t=>{throw new O(t.$$.ptrType.registeredClass.name+" instance already deleted")},G=!1,Z=()=>{},Y=(t,e,i)=>e===i?t:void 0===i.baseClass||null===(t=Y(t,e,i.baseClass))?null:i.downcast(t),Q={},J=[],q=()=>{for(;J.length;){var t=J.pop();t.$$.Xd=!1,t.delete()}},K={},X=(t,e)=>{if(!e.ptrType||!e.ptr)throw new D("makeClassHandle requires ptr and ptrType");if(!!e.smartPtrType!=!!e.smartPtr)throw new D("Both smartPtrType and smartPtr must be specified");return e.count={value:1},tt(Object.create(t,{$$:{value:e,writable:!0}}))},tt=t=>"undefined"==typeof FinalizationRegistry?(tt=t=>t,t):(G=new FinalizationRegistry((t=>{--(t=t.$$).count.value,0===t.count.value&&(t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr))})),tt=t=>{var e=t.$$;return e.smartPtr&&G.register(t,{$$:e},t),t},Z=t=>{G.unregister(t)},tt(t));function et(){}var it=(t,e)=>Object.defineProperty(e,"name",{value:t}),nt=(t,e,i)=>{if(void 0===t[e].Jd){var n=t[e];t[e]=function(...n){if(!t[e].Jd.hasOwnProperty(n.length))throw new O(`Function '${i}' called with an invalid number of arguments (${n.length}) - expects one of (${t[e].Jd})!`);return t[e].Jd[n.length].apply(this,n)},t[e].Jd=[],t[e].Jd[n.Vd]=n}},st=(t,e,i)=>{if(s.hasOwnProperty(t)){if(void 0===i||void 0!==s[t].Jd&&void 0!==s[t].Jd[i])throw new O(`Cannot register public name '${t}' twice`);if(nt(s,t,t),s.hasOwnProperty(i))throw new O(`Cannot register multiple overloads of a function with the same number of arguments (${i})!`);s[t].Jd[i]=e}else s[t]=e,void 0!==i&&(s[t].bf=i)};function rt(t,e,i,n,s,r,o,a){this.name=t,this.constructor=e,this.instancePrototype=i,this.rawDestructor=n,this.baseClass=s,this.getActualType=r,this.upcast=o,this.downcast=a,this.pureVirtualFunctions=[]}var ot=(t,e,i)=>{for(;e!==i;){if(!e.upcast)throw new O(`Expected null or instance of ${i.name}, got an instance of ${e.name}`);t=e.upcast(t),e=e.baseClass}return t};function at(t,e){if(null===e){if(this.isReference)throw new O(`null is not a valid ${this.name}`);return 0}if(!e.$$)throw new O(`Cannot pass "${Pt(e)}" as a ${this.name}`);if(!e.$$.ptr)throw new O(`Cannot pass deleted object as a pointer of type ${this.name}`);return ot(e.$$.ptr,e.$$.ptrType.registeredClass,this.registeredClass)}function lt(t,e){if(null===e){if(this.isReference)throw new O(`null is not a valid ${this.name}`);if(this.isSmartPointer){var i=this.rawConstructor();return null!==t&&t.push(this.rawDestructor,i),i}return 0}if(!e||!e.$$)throw new O(`Cannot pass "${Pt(e)}" as a ${this.name}`);if(!e.$$.ptr)throw new O(`Cannot pass deleted object as a pointer of type ${this.name}`);if(!this.isConst&&e.$$.ptrType.isConst)throw new O(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);if(i=ot(e.$$.ptr,e.$$.ptrType.registeredClass,this.registeredClass),this.isSmartPointer){if(void 0===e.$$.smartPtr)throw new O("Passing raw pointer to smart pointer is illegal");switch(this.sharingPolicy){case 0:if(e.$$.smartPtrType!==this)throw new O(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);i=e.$$.smartPtr;break;case 1:i=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)i=e.$$.smartPtr;else{var n=e.clone();i=this.rawShare(i,Lt((()=>n.delete()))),null!==t&&t.push(this.rawDestructor,i)}break;default:throw new O("Unsupporting sharing policy")}}return i}function ct(t,e){if(null===e){if(this.isReference)throw new O(`null is not a valid ${this.name}`);return 0}if(!e.$$)throw new O(`Cannot pass "${Pt(e)}" as a ${this.name}`);if(!e.$$.ptr)throw new O(`Cannot pass deleted object as a pointer of type ${this.name}`);if(e.$$.ptrType.isConst)throw new O(`Cannot convert argument of type ${e.$$.ptrType.name} to parameter type ${this.name}`);return ot(e.$$.ptr,e.$$.ptrType.registeredClass,this.registeredClass)}function ut(t,e,i,n,s,r,o,a,l,c,u){this.name=t,this.registeredClass=e,this.isReference=i,this.isConst=n,this.isSmartPointer=s,this.pointeeType=r,this.sharingPolicy=o,this.rawGetPointee=a,this.rawConstructor=l,this.rawShare=c,this.rawDestructor=u,s||void 0!==e.baseClass?this.toWireType=lt:(this.toWireType=n?at:ct,this.destructorFunction=null)}var ht,dt,ft=(t,e,i)=>{if(!s.hasOwnProperty(t))throw new D("Replacing nonexistent public symbol");void 0!==s[t].Jd&&void 0!==i?s[t].Jd[i]=e:(s[t]=e,s[t].Vd=i)},pt=[],gt=t=>{var e=pt[t];return e||(t>=pt.length&&(pt.length=t+1),pt[t]=e=ht.get(t)),e},mt=(t,e)=>{var i=(t=$(t)).includes("j")?((t,e)=>(...i)=>((t,e,i=[])=>t.includes("j")?(0,s["dynCall_"+t])(e,...i):gt(e)(...i))(t,e,i))(t,e):gt(e);if("function"!=typeof i)throw new O(`unknown function pointer with signature ${t}: ${e}`);return i},vt=t=>{t=Se(t);var e=$(t);return we(t),e},yt=(t,e)=>{var i=[],n={};throw e.forEach((function t(e){n[e]||R[e]||(B[e]?B[e].forEach(t):(i.push(e),n[e]=!0))})),new dt(`${t}: `+i.map(vt).join([", "]))};function xt(t,e,i,n,s){var r=e.length;if(2>r)throw new O("argTypes array size mismatch! Must at least get return value and 'this' types!");var o=null!==e[1]&&null!==i,a=function(t){for(var e=1;e<t.length;++e)if(null!==t[e]&&void 0===t[e].destructorFunction)return!0;return!1}(e),l="void"!==e[0].name,c=r-2,u=Array(c),h=[],d=[];return it(t,(function(...i){if(i.length!==c)throw new O(`function ${t} called with ${i.length} arguments, expected ${c}`);if(d.length=0,h.length=o?2:1,h[0]=s,o){var r=e[1].toWireType(d,this);h[1]=r}for(var f=0;f<c;++f)u[f]=e[f+2].toWireType(d,i[f]),h.push(u[f]);if(i=n(...h),a)T(d);else for(f=o?1:2;f<e.length;f++){var p=1===f?r:u[f-2];null!==e[f].destructorFunction&&e[f].destructorFunction(p)}return l?e[0].fromWireType(i):void 0}))}var bt,wt=(t,e)=>{for(var i=[],n=0;n<t;n++)i.push(g[e+4*n>>2]);return i},Mt=t=>{const e=(t=t.trim()).indexOf("(");return-1!==e?t.substr(0,e):t},St=(t,e,i)=>{if(!(t instanceof Object))throw new O(`${i} with invalid "this": ${t}`);if(!(t instanceof e.registeredClass.constructor))throw new O(`${i} incompatible with "this" of type ${t.constructor.name}`);if(!t.$$.ptr)throw new O(`cannot call emscripten binding method ${i} on deleted object`);return ot(t.$$.ptr,t.$$.ptrType.registeredClass,e.registeredClass)},kt=[],_t=[],It=t=>{9<t&&0==--_t[t+1]&&(_t[t]=void 0,kt.push(t))},Ct=t=>{if(!t)throw new O("Cannot use deleted val. handle = "+t);return _t[t]},Lt=t=>{switch(t){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:const e=kt.pop()||_t.length;return _t[e]=t,_t[e+1]=1,e}},Nt={name:"emscripten::val",fromWireType:t=>{var e=Ct(t);return It(t),e},toWireType:(t,e)=>Lt(e),argPackAdvance:8,readValueFromPointer:A,destructorFunction:null},jt=(t,e,i)=>{switch(e){case 1:return i?function(t){return this.fromWireType(u[t])}:function(t){return this.fromWireType(h[t])};case 2:return i?function(t){return this.fromWireType(d[t>>1])}:function(t){return this.fromWireType(f[t>>1])};case 4:return i?function(t){return this.fromWireType(p[t>>2])}:function(t){return this.fromWireType(g[t>>2])};default:throw new TypeError(`invalid integer width (${e}): ${t}`)}},zt=(t,e)=>{var i=R[t];if(void 0===i)throw t=`${e} has unknown type ${vt(t)}`,new O(t);return i},Pt=t=>{if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t},Tt=(t,e)=>{switch(e){case 4:return function(t){return this.fromWireType(m[t>>2])};case 8:return function(t){return this.fromWireType(v[t>>3])};default:throw new TypeError(`invalid float width (${e}): ${t}`)}},At=(t,e,i)=>{switch(e){case 1:return i?t=>u[t]:t=>h[t];case 2:return i?t=>d[t>>1]:t=>f[t>>1];case 4:return i?t=>p[t>>2]:t=>g[t>>2];default:throw new TypeError(`invalid integer width (${e}): ${t}`)}},Dt=(t,e,i,n)=>{if(!(0<n))return 0;var s=i;n=i+n-1;for(var r=0;r<t.length;++r){var o=t.charCodeAt(r);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++r)),127>=o){if(i>=n)break;e[i++]=o}else{if(2047>=o){if(i+1>=n)break;e[i++]=192|o>>6}else{if(65535>=o){if(i+2>=n)break;e[i++]=224|o>>12}else{if(i+3>=n)break;e[i++]=240|o>>18,e[i++]=128|o>>12&63}e[i++]=128|o>>6&63}e[i++]=128|63&o}}return e[i]=0,i-s},Et=(t,e,i)=>Dt(t,h,e,i),Ot=t=>{for(var e=0,i=0;i<t.length;++i){var n=t.charCodeAt(i);127>=n?e++:2047>=n?e+=2:55296<=n&&57343>=n?(e+=4,++i):e+=3}return e},Wt="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,Rt=(t,e)=>{for(var i=t>>1,n=i+e/2;!(i>=n)&&f[i];)++i;if(32<(i<<=1)-t&&Wt)return Wt.decode(h.subarray(t,i));for(i="",n=0;!(n>=e/2);++n){var s=d[t+2*n>>1];if(0==s)break;i+=String.fromCharCode(s)}return i},Bt=(t,e,i)=>{if(i??=2147483647,2>i)return 0;var n=e;i=(i-=2)<2*t.length?i/2:t.length;for(var s=0;s<i;++s)d[e>>1]=t.charCodeAt(s),e+=2;return d[e>>1]=0,e-n},Ut=t=>2*t.length,$t=(t,e)=>{for(var i=0,n="";!(i>=e/4);){var s=p[t+4*i>>2];if(0==s)break;++i,65536<=s?(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|1023&s)):n+=String.fromCharCode(s)}return n},Ft=(t,e,i)=>{if(i??=2147483647,4>i)return 0;var n=e;i=n+i-4;for(var s=0;s<t.length;++s){var r=t.charCodeAt(s);if(55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&t.charCodeAt(++s)),p[e>>2]=r,(e+=4)+4>i)break}return p[e>>2]=0,e-n},Vt=t=>{for(var e=0,i=0;i<t.length;++i){var n=t.charCodeAt(i);55296<=n&&57343>=n&&++i,e+=4}return e},Ht=(t,e,i)=>{var n=[];return t=t.toWireType(n,i),n.length&&(g[e>>2]=Lt(n)),t},Gt=[],Zt={},Yt=t=>{var e=Zt[t];return void 0===e?$(t):e},Qt=()=>{function t(t){t.$$$embind_global$$$=t;var e="object"==typeof $$$embind_global$$$&&t.$$$embind_global$$$==t;return e||delete t.$$$embind_global$$$,e}if("object"==typeof globalThis)return globalThis;if("object"==typeof $$$embind_global$$$)return $$$embind_global$$$;if("object"==typeof global&&t(global)?$$$embind_global$$$=global:"object"==typeof self&&t(self)&&($$$embind_global$$$=self),"object"==typeof $$$embind_global$$$)return $$$embind_global$$$;throw Error("unable to get global object.")},Jt=Reflect.construct,qt=t=>{var e="EXT_color_buffer_float EXT_conservative_depth EXT_disjoint_timer_query_webgl2 EXT_texture_norm16 NV_shader_noperspective_interpolation WEBGL_clip_cull_distance EXT_color_buffer_half_float EXT_depth_clamp EXT_float_blend EXT_texture_compression_bptc EXT_texture_compression_rgtc EXT_texture_filter_anisotropic KHR_parallel_shader_compile OES_texture_float_linear WEBGL_blend_func_extended WEBGL_compressed_texture_astc WEBGL_compressed_texture_etc WEBGL_compressed_texture_etc1 WEBGL_compressed_texture_s3tc WEBGL_compressed_texture_s3tc_srgb WEBGL_debug_renderer_info WEBGL_debug_shaders WEBGL_lose_context WEBGL_multi_draw".split(" ");return(t.getSupportedExtensions()||[]).filter((t=>e.includes(t)))},Kt={counter:1,ee:[],Ld:[],fe:[],be:[],Zd:[],Md:[],le:[],Nd:[],cf:{},df:[],Qd:[],gf:[],Rd:[],ve:{},we:{},ze:4,Kd:t=>{Kt.ne||(Kt.ne=t)},$d:t=>{for(var e=Kt.counter++,i=t.length;i<e;i++)t[i]=null;return e},Yd:(t,e,i,n)=>{for(var s=0;s<t;s++){var r=ve[i](),o=r&&Kt.$d(n);r?(r.name=o,n[o]=r):Kt.Kd(1282),p[e+4*s>>2]=o}},Ge:(t,e,i,n)=>{var s="";for(t=0;t<e;++t){var r=(r=g[i+4*t>>2])?z(h,r,n?g[n+4*t>>2]:void 0):"";s+=r}return s},createContext:(t,e)=>(t=t.getContext("webgl2",e))?Kt.Oe(t,e):0,Oe:(t,e)=>{var i=Kt.$d(Kt.Nd),n={handle:i,attributes:e,version:e.$e,Ud:t};return t.canvas&&(t.canvas.Ae=n),Kt.Nd[i]=n,(void 0===e.De||e.De)&&Kt.Le(n),i},makeContextCurrent:t=>(Kt.Pd=Kt.Nd[t],s.Xe=ve=Kt.Pd?.Ud,!(t&&!ve)),getContext:t=>Kt.Nd[t],deleteContext:t=>{Kt.Pd===Kt.Nd[t]&&(Kt.Pd=null),"object"==typeof JSEvents&&JSEvents.ef(Kt.Nd[t].Ud.canvas),Kt.Nd[t]&&Kt.Nd[t].Ud.canvas&&(Kt.Nd[t].Ud.canvas.Ae=void 0),Kt.Nd[t]=null},Le:t=>{if(t||=Kt.Pd,!t.Me){t.Me=!0;var e=t.Ud;e.re=e.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"),e.ue=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"),2<=t.version&&(e.se=e.getExtension("EXT_disjoint_timer_query_webgl2")),(2>t.version||!e.se)&&(e.se=e.getExtension("EXT_disjoint_timer_query")),e.af=e.getExtension("WEBGL_multi_draw"),qt(e).forEach((t=>{t.includes("lose_context")||t.includes("debug")||e.getExtension(t)}))}}},Xt={},te=()=>{if(!bt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(t in Xt)void 0===Xt[t]?delete e[t]:e[t]=Xt[t];var i=[];for(t in e)i.push(`${t}=${e[t]}`);bt=i}return bt},ee=[null,[],[]],ie=t=>{ve.bindVertexArray(Kt.le[t])},ne=(t,e)=>{for(var i=0;i<t;i++){var n=p[e+4*i>>2];ve.deleteVertexArray(Kt.le[n]),Kt.le[n]=null}},se=[],re=(t,e)=>{Kt.Yd(t,e,"createVertexArray",Kt.le)};function oe(){var t=qt(ve);return t.concat(t.map((t=>"GL_"+t)))}var ae=(t,e,i)=>{if(e){var n=void 0;switch(t){case 36346:n=1;break;case 36344:return void(0!=i&&1!=i&&Kt.Kd(1280));case 34814:case 36345:n=0;break;case 34466:var s=ve.getParameter(34467);n=s?s.length:0;break;case 33309:if(2>Kt.Pd.version)return void Kt.Kd(1282);n=oe().length;break;case 33307:case 33308:if(2>Kt.Pd.version)return void Kt.Kd(1280);n=33307==t?3:0}if(void 0===n)switch(s=ve.getParameter(t),typeof s){case"number":n=s;break;case"boolean":n=s?1:0;break;case"string":return void Kt.Kd(1280);case"object":if(null===s)switch(t){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:n=0;break;default:return void Kt.Kd(1280)}else{if(s instanceof Float32Array||s instanceof Uint32Array||s instanceof Int32Array||s instanceof Array){for(t=0;t<s.length;++t)switch(i){case 0:p[e+4*t>>2]=s[t];break;case 2:m[e+4*t>>2]=s[t];break;case 4:u[e+t]=s[t]?1:0}return}try{n=0|s.name}catch(e){return Kt.Kd(1280),void l(`GL_INVALID_ENUM in glGet${i}v: Unknown object returned from WebGL getParameter(${t})! (error: ${e})`)}}break;default:return Kt.Kd(1280),void l(`GL_INVALID_ENUM in glGet${i}v: Native code calling glGet${i}v(${t}) and it returns ${s} of type ${typeof s}!`)}switch(i){case 1:i=n,g[e>>2]=i,g[e+4>>2]=(i-g[e>>2])/4294967296;break;case 0:p[e>>2]=n;break;case 2:m[e>>2]=n;break;case 4:u[e]=n?1:0}}else Kt.Kd(1281)},le=t=>{var e=Ot(t)+1,i=Me(e);return i&&Dt(t,h,i,e),i},ce=t=>"]"==t.slice(-1)&&t.lastIndexOf("["),ue=t=>0==(t-=5120)?u:1==t?h:2==t?d:4==t?p:6==t?m:5==t||28922==t||28520==t||30779==t||30782==t?g:f,he=t=>{var e=ve.Ce;if(e){var i=e.ce[t];return"number"==typeof i&&(e.ce[t]=i=ve.getUniformLocation(e,e.xe[t]+(0<i?`[${i}]`:""))),i}Kt.Kd(1282)},de=t=>0==t%4&&(0!=t%100||0==t%400),fe=[31,29,31,30,31,30,31,31,30,31,30,31],pe=[31,28,31,30,31,30,31,31,30,31,30,31];D=s.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}};for(var ge=Array(256),me=0;256>me;++me)ge[me]=String.fromCharCode(me);E=ge,O=s.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},Object.assign(et.prototype,{isAliasOf:function(t){if(!(this instanceof et&&t instanceof et))return!1;var e=this.$$.ptrType.registeredClass,i=this.$$.ptr;t.$$=t.$$;var n=t.$$.ptrType.registeredClass;for(t=t.$$.ptr;e.baseClass;)i=e.upcast(i),e=e.baseClass;for(;n.baseClass;)t=n.upcast(t),n=n.baseClass;return e===n&&i===t},clone:function(){if(this.$$.ptr||H(this),this.$$.ae)return this.$$.count.value+=1,this;var t=tt,e=Object,i=e.create,n=Object.getPrototypeOf(this),s=this.$$;return(t=t(i.call(e,n,{$$:{value:{count:s.count,Xd:s.Xd,ae:s.ae,ptr:s.ptr,ptrType:s.ptrType,smartPtr:s.smartPtr,smartPtrType:s.smartPtrType}}}))).$$.count.value+=1,t.$$.Xd=!1,t},delete(){if(this.$$.ptr||H(this),this.$$.Xd&&!this.$$.ae)throw new O("Object already scheduled for deletion");Z(this);var t=this.$$;--t.count.value,0===t.count.value&&(t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)),this.$$.ae||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted:function(){return!this.$$.ptr},deleteLater:function(){if(this.$$.ptr||H(this),this.$$.Xd&&!this.$$.ae)throw new O("Object already scheduled for deletion");return J.push(this),1===J.length&&V&&V(q),this.$$.Xd=!0,this}}),s.getInheritedInstanceCount=()=>Object.keys(K).length,s.getLiveInheritedInstances=()=>{var t,e=[];for(t in K)K.hasOwnProperty(t)&&e.push(K[t]);return e},s.flushPendingDeletes=q,s.setDelayFunction=t=>{V=t,J.length&&V&&V(q)},Object.assign(ut.prototype,{Fe(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},qe(t){this.rawDestructor?.(t)},argPackAdvance:8,readValueFromPointer:A,fromWireType:function(t){function e(){return this.isSmartPointer?X(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:i,smartPtrType:this,smartPtr:t}):X(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var i=this.Fe(t);if(!i)return this.qe(t),null;var n=((t,e)=>{if(void 0===e)throw new O("ptr should not be undefined");for(;t.baseClass;)e=t.upcast(e),t=t.baseClass;return K[e]})(this.registeredClass,i);if(void 0!==n)return 0===n.$$.count.value?(n.$$.ptr=i,n.$$.smartPtr=t,n.clone()):(n=n.clone(),this.qe(t),n);if(n=this.registeredClass.getActualType(i),!(n=Q[n]))return e.call(this);n=this.isConst?n.Be:n.pointerType;var s=Y(i,this.registeredClass,n.registeredClass);return null===s?e.call(this):this.isSmartPointer?X(n.registeredClass.instancePrototype,{ptrType:n,ptr:s,smartPtrType:this,smartPtr:t}):X(n.registeredClass.instancePrototype,{ptrType:n,ptr:s})}}),dt=s.UnboundTypeError=((t,e)=>{var i=it(e,(function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},i})(Error,"UnboundTypeError"),_t.push(0,1,void 0,1,null,1,!0,1,!1,1),s.count_emval_handles=()=>_t.length/2-5-kt.length;for(var ve,ye=0;32>ye;++ye)se.push(Array(ye));var xe={ac:function(){return 0},X:function(){},Zb:()=>{},G:t=>{var e=P[t];delete P[t];var i=e.rawConstructor,n=e.rawDestructor,s=e.te,r=s.map((t=>t.Je)).concat(s.map((t=>t.Re)));U([t],r,(t=>{var r={};return s.forEach(((e,i)=>{var n=t[i],o=e.He,a=e.Ie,l=t[i+s.length],c=e.Qe,u=e.Se;r[e.Ee]={read:t=>n.fromWireType(o(a,t)),write:(t,e)=>{var i=[];c(u,t,l.toWireType(i,e)),T(i)}}})),[{name:e.name,fromWireType:t=>{var e,i={};for(e in r)i[e]=r[e].read(t);return n(t),i},toWireType:(t,e)=>{for(var s in r)if(!(s in e))throw new TypeError(`Missing field: "${s}"`);var o=i();for(s in r)r[s].write(o,e[s]);return null!==t&&t.push(n,o),o},argPackAdvance:8,readValueFromPointer:A,destructorFunction:n}]}))},Kb:()=>{},fc:(t,e,i,n)=>{F(t,{name:e=$(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?i:n},argPackAdvance:8,readValueFromPointer:function(t){return this.fromWireType(h[t])},destructorFunction:null})},s:(t,e,i,n,s,r,o,a,l,c,u,h,d)=>{u=$(u),r=mt(s,r),a&&=mt(o,a),c&&=mt(l,c),d=mt(h,d);var f=(t=>{if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=e&&57>=e?`_${t}`:t})(u);st(f,(function(){yt(`Cannot construct ${u} due to unbound types`,[n])})),U([t,e,i],n?[n]:[],(e=>{if(e=e[0],n)var i=e.registeredClass,s=i.instancePrototype;else s=et.prototype;e=it(u,(function(...t){if(Object.getPrototypeOf(this)!==o)throw new O("Use 'new' to construct "+u);if(void 0===h.constructor_body)throw new O(u+" has no accessible constructor");var e=h.constructor_body[t.length];if(void 0===e)throw new O(`Tried to invoke ctor of ${u} with invalid number of parameters (${t.length}) - expected (${Object.keys(h.constructor_body).toString()}) parameters instead!`);return e.apply(this,t)}));var o=Object.create(s,{constructor:{value:e}});e.prototype=o;var l,h=new rt(u,e,o,d,i,r,a,c);return h.baseClass&&((l=h.baseClass).de??(l.de=[]),h.baseClass.de.push(h)),i=new ut(u,h,!0,!1,!1),l=new ut(u+"*",h,!1,!1,!1),s=new ut(u+" const*",h,!1,!0,!1),Q[t]={pointerType:l,Be:s},ft(f,e),[i,l,s]}))},f:(t,e,i,n,s,r,o)=>{var a=wt(i,n);e=$(e),e=Mt(e),r=mt(s,r),U([],[t],(t=>{function n(){yt(`Cannot call ${s} due to unbound types`,a)}var s=`${(t=t[0]).name}.${e}`;e.startsWith("@@")&&(e=Symbol[e.substring(2)]);var l=t.registeredClass.constructor;return void 0===l[e]?(n.Vd=i-1,l[e]=n):(nt(l,e,s),l[e].Jd[i-1]=n),U([],a,(n=>{if(n=[n[0],null].concat(n.slice(1)),n=xt(s,n,null,r,o),void 0===l[e].Jd?(n.Vd=i-1,l[e]=n):l[e].Jd[i-1]=n,t.registeredClass.de)for(const i of t.registeredClass.de)i.constructor.hasOwnProperty(e)||(i.constructor[e]=n);return[]})),[]}))},C:(t,e,i,n,s,r)=>{var o=wt(e,i);s=mt(n,s),U([],[t],(t=>{var i=`constructor ${(t=t[0]).name}`;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new O(`Cannot register multiple constructors with identical number of parameters (${e-1}) for class '${t.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return t.registeredClass.constructor_body[e-1]=()=>{yt(`Cannot construct ${t.name} due to unbound types`,o)},U([],o,(n=>(n.splice(1,0,null),t.registeredClass.constructor_body[e-1]=xt(i,n,null,s,r),[]))),[]}))},c:(t,e,i,n,s,r,o,a)=>{var l=wt(i,n);e=$(e),e=Mt(e),r=mt(s,r),U([],[t],(t=>{function n(){yt(`Cannot call ${s} due to unbound types`,l)}var s=`${(t=t[0]).name}.${e}`;e.startsWith("@@")&&(e=Symbol[e.substring(2)]),a&&t.registeredClass.pureVirtualFunctions.push(e);var c=t.registeredClass.instancePrototype,u=c[e];return void 0===u||void 0===u.Jd&&u.className!==t.name&&u.Vd===i-2?(n.Vd=i-2,n.className=t.name,c[e]=n):(nt(c,e,s),c[e].Jd[i-2]=n),U([],l,(n=>(n=xt(s,n,t,r,o),void 0===c[e].Jd?(n.Vd=i-2,c[e]=n):c[e].Jd[i-2]=n,[]))),[]}))},h:(t,e,i,n,s,r,o,a,l,c)=>{e=$(e),s=mt(n,s),U([],[t],(t=>{var n=`${(t=t[0]).name}.${e}`,u={get(){yt(`Cannot access ${n} due to unbound types`,[i,o])},enumerable:!0,configurable:!0};return u.set=l?()=>yt(`Cannot access ${n} due to unbound types`,[i,o]):()=>{throw new O(n+" is a read-only property")},Object.defineProperty(t.registeredClass.instancePrototype,e,u),U([],l?[i,o]:[i],(i=>{var o=i[0],u={get(){var e=St(this,t,n+" getter");return o.fromWireType(s(r,e))},enumerable:!0};if(l){l=mt(a,l);var h=i[1];u.set=function(e){var i=St(this,t,n+" setter"),s=[];l(c,i,h.toWireType(s,e)),T(s)}}return Object.defineProperty(t.registeredClass.instancePrototype,e,u),[]})),[]}))},ec:t=>F(t,Nt),v:(t,e,i,n)=>{function s(){}e=$(e),s.values={},F(t,{name:e,constructor:s,fromWireType:function(t){return this.constructor.values[t]},toWireType:(t,e)=>e.value,argPackAdvance:8,readValueFromPointer:jt(e,i,n),destructorFunction:null}),st(e,s)},g:(t,e,i)=>{var n=zt(t,"enum");e=$(e),t=n.constructor,n=Object.create(n.constructor.prototype,{value:{value:i},constructor:{value:it(`${n.name}_${e}`,(function(){}))}}),t.values[i]=n,t[e]=n},Z:(t,e,i)=>{F(t,{name:e=$(e),fromWireType:t=>t,toWireType:(t,e)=>e,argPackAdvance:8,readValueFromPointer:Tt(e,i),destructorFunction:null})},ic:(t,e,i,n,s,r)=>{var o=wt(e,i);t=$(t),t=Mt(t),s=mt(n,s),st(t,(function(){yt(`Cannot call ${t} due to unbound types`,o)}),e-1),U([],o,(i=>(i=[i[0],null].concat(i.slice(1)),ft(t,xt(t,i,null,s,r),e-1),[])))},J:(t,e,i,n,s)=>{if(e=$(e),-1===s&&(s=4294967295),s=t=>t,0===n){var r=32-8*i;s=t=>t<<r>>>r}var o=e.includes("unsigned")?function(t,e){return e>>>0}:function(t,e){return e};F(t,{name:e,fromWireType:s,toWireType:o,argPackAdvance:8,readValueFromPointer:At(e,i,0!==n),destructorFunction:null})},x:(t,e,i)=>{function n(t){return new s(u.buffer,g[t+4>>2],g[t>>2])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];F(t,{name:i=$(i),fromWireType:n,argPackAdvance:8,readValueFromPointer:n},{Ke:!0})},z:(t,e,i,n,s,r,o,a,l,c,u,h)=>{i=$(i),r=mt(s,r),a=mt(o,a),c=mt(l,c),h=mt(u,h),U([t],[e],(t=>(t=t[0],[new ut(i,t.registeredClass,!1,!1,!0,t,n,r,a,c,h)])))},_:(t,e)=>{var i="std::string"===(e=$(e));F(t,{name:e,fromWireType:function(t){var e=g[t>>2],n=t+4;if(i)for(var s=n,r=0;r<=e;++r){var o=n+r;if(r==e||0==h[o]){if(s=s?z(h,s,o-s):"",void 0===a)var a=s;else a+=String.fromCharCode(0),a+=s;s=o+1}}else{for(a=Array(e),r=0;r<e;++r)a[r]=String.fromCharCode(h[n+r]);a=a.join("")}return we(t),a},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var n="string"==typeof e;if(!(n||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array))throw new O("Cannot pass non-string to std::string");var s=i&&n?Ot(e):e.length,r=Me(4+s+1),o=r+4;if(g[r>>2]=s,i&&n)Dt(e,h,o,s+1);else if(n)for(n=0;n<s;++n){var a=e.charCodeAt(n);if(255<a)throw we(o),new O("String has UTF-16 code units that do not fit in 8 bits");h[o+n]=a}else for(n=0;n<s;++n)h[o+n]=e[n];return null!==t&&t.push(we,r),r},argPackAdvance:8,readValueFromPointer:A,destructorFunction(t){we(t)}})},S:(t,e,i)=>{if(i=$(i),2===e)var n=Rt,s=Bt,r=Ut,o=t=>f[t>>1];else 4===e&&(n=$t,s=Ft,r=Vt,o=t=>g[t>>2]);F(t,{name:i,fromWireType:t=>{for(var i,s=g[t>>2],r=t+4,a=0;a<=s;++a){var l=t+4+a*e;a!=s&&0!=o(l)||(r=n(r,l-r),void 0===i?i=r:(i+=String.fromCharCode(0),i+=r),r=l+e)}return we(t),i},toWireType:(t,n)=>{if("string"!=typeof n)throw new O(`Cannot pass non-string to C++ string type ${i}`);var o=r(n),a=Me(4+o+e);return g[a>>2]=o/e,s(n,a+4,o+e),null!==t&&t.push(we,a),a},argPackAdvance:8,readValueFromPointer:A,destructorFunction(t){we(t)}})},H:(t,e,i,n,s,r)=>{P[t]={name:$(e),rawConstructor:mt(i,n),rawDestructor:mt(s,r),te:[]}},o:(t,e,i,n,s,r,o,a,l,c)=>{P[t].te.push({Ee:$(e),Je:i,He:mt(n,s),Ie:r,Re:o,Qe:mt(a,l),Se:c})},gc:(t,e)=>{F(t,{Ze:!0,name:e=$(e),argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},cc:()=>1,Sb:()=>{throw 1/0},p:(t,e,i)=>(t=Ct(t),e=zt(e,"emval::as"),Ht(e,i,t)),F:(t,e,i,n)=>(t=Gt[t])(null,e=Ct(e),i,n),u:(t,e,i,n,s)=>(t=Gt[t])(e=Ct(e),e[i=Yt(i)],n,s),b:It,E:t=>0===t?Lt(Qt()):(t=Yt(t),Lt(Qt()[t])),r:(t,e,i)=>{var n=((t,e)=>{for(var i=Array(t),n=0;n<t;++n)i[n]=zt(g[e+4*n>>2],"parameter "+n);return i})(t,e),s=n.shift();t--;var r=Array(t);return e=`methodCaller<(${n.map((t=>t.name)).join(", ")}) => ${s.name}>`,(t=>{var e=Gt.length;return Gt.push(t),e})(it(e,((e,o,a,l)=>{for(var c=0,u=0;u<t;++u)r[u]=n[u].readValueFromPointer(l+c),c+=n[u].argPackAdvance;return e=1===i?Jt(o,r):o.apply(e,r),Ht(s,a,e)})))},k:(t,e)=>(t=Ct(t),e=Ct(e),Lt(t[e])),y:t=>{9<t&&(_t[t+1]+=1)},M:(t,e)=>(t=Ct(t))instanceof Ct(e),B:t=>"number"==typeof(t=Ct(t)),N:t=>"string"==typeof(t=Ct(t)),D:()=>Lt([]),e:t=>Lt(Yt(t)),K:()=>Lt({}),hc:t=>!(t=Ct(t)),j:t=>{var e=Ct(t);T(e),It(t)},l:(t,e,i)=>{t=Ct(t),e=Ct(e),i=Ct(i),t[e]=i},i:(t,e)=>(t=(t=zt(t,"_emval_take_value")).readValueFromPointer(e),Lt(t)),O:t=>(t=Ct(t),Lt(typeof t)),Ib:function(t,e,i){t=new Date(1e3*(e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN)),p[i>>2]=t.getUTCSeconds(),p[i+4>>2]=t.getUTCMinutes(),p[i+8>>2]=t.getUTCHours(),p[i+12>>2]=t.getUTCDate(),p[i+16>>2]=t.getUTCMonth(),p[i+20>>2]=t.getUTCFullYear()-1900,p[i+24>>2]=t.getUTCDay(),p[i+28>>2]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Gb:function(){return-52},Hb:function(){},Vb:(t,e,i,n)=>{function s(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var r=(new Date).getFullYear(),o=new Date(r,0,1),a=new Date(r,6,1);r=o.getTimezoneOffset();var l=a.getTimezoneOffset();g[t>>2]=60*Math.max(r,l),p[e>>2]=Number(r!=l),t=s(o),e=s(a),l<r?(Dt(t,h,i,7),Dt(e,h,n,7)):(Dt(t,h,n,7),Dt(e,h,i,7))},a:()=>{_("")},dc:()=>Date.now(),bc:()=>performance.now(),Ub:t=>{var e=h.length;if(2147483648<(t>>>=0))return!1;for(var i=1;4>=i;i*=2){var n=e*(1+.2/i);n=Math.min(n,t+100663296);var s=Math;n=Math.max(t,n);t:{s=(s.min.call(s,2147483648,n+(65536-n%65536)%65536)-c.buffer.byteLength+65535)/65536;try{c.grow(s),x();var r=1;break t}catch(t){}r=void 0}if(r)return!0}return!1},cd:(t,e,i)=>setInterval((()=>{(t=>{if(!y)try{t()}catch(t){if("unwind"!=t)throw t}})((()=>gt(t)(i)))}),e),Rb:t=>Kt.makeContextCurrent(t)?0:-5,Wb:(t,e)=>{var i=0;return te().forEach(((n,s)=>{var r=e+i;for(s=g[t+4*s>>2]=r,r=0;r<n.length;++r)u[s++]=n.charCodeAt(r);u[s]=0,i+=n.length+1})),0},Xb:(t,e)=>{var i=te();g[t>>2]=i.length;var n=0;return i.forEach((t=>n+=t.length+1)),g[e>>2]=n,0},R:()=>52,$b:()=>52,Jb:function(){return 70},_b:(t,e,i,n)=>{for(var s=0,r=0;r<i;r++){var o=g[e>>2],c=g[e+4>>2];e+=8;for(var u=0;u<c;u++){var d=h[o+u],f=ee[t];0===d||10===d?((1===t?a:l)(z(f,0)),f.length=0):f.push(d)}s+=c}return g[n>>2]=s,0},Ta:t=>ve.activeTexture(t),Ia:(t,e)=>{ve.attachShader(Kt.Ld[t],Kt.Md[e])},xa:(t,e,i)=>{ve.bindAttribLocation(Kt.Ld[t],e,i?z(h,i):"")},ma:(t,e)=>{35051==t?ve.me=e:35052==t&&(ve.Wd=e),ve.bindBuffer(t,Kt.ee[e])},ba:(t,e)=>{ve.bindFramebuffer(t,Kt.fe[e])},Nc:(t,e)=>{ve.bindRenderbuffer(t,Kt.be[e])},tc:(t,e)=>{ve.bindSampler(t,Kt.Qd[e])},bd:(t,e)=>{ve.bindTexture(t,Kt.Zd[e])},fa:ie,ca:ie,Sc:(t,e,i,n)=>ve.blendColor(t,e,i,n),Ic:t=>ve.blendEquation(t),xc:(t,e)=>ve.blendFunc(t,e),Ac:(t,e,i,n,s,r,o,a,l,c)=>ve.blitFramebuffer(t,e,i,n,s,r,o,a,l,c),mc:(t,e,i,n)=>{i&&e?ve.bufferData(t,h,n,i,e):ve.bufferData(t,e,n)},jc:(t,e,i,n)=>{i&&ve.bufferSubData(t,e,h,n,i)},Mc:t=>ve.checkFramebufferStatus(t),aa:t=>ve.clear(t),$:(t,e,i,n)=>ve.clearColor(t,e,i,n),Y:t=>ve.clearStencil(t),Mb:(t,e,i,n)=>ve.clientWaitSync(Kt.Rd[t],e,(i>>>0)+4294967296*n),Yb:(t,e,i,n)=>{ve.colorMask(!!t,!!e,!!i,!!n)},Qb:t=>{ve.compileShader(Kt.Md[t])},Nb:(t,e,i,n,s,r,o,a)=>{ve.Wd||!o?ve.compressedTexImage2D(t,e,i,n,s,r,o,a):ve.compressedTexImage2D(t,e,i,n,s,r,h,a,o)},Eb:(t,e,i,n,s,r,o,a,l)=>{ve.Wd||!a?ve.compressedTexSubImage2D(t,e,i,n,s,r,o,a,l):ve.compressedTexSubImage2D(t,e,i,n,s,r,o,h,l,a)},yc:(t,e,i,n,s)=>ve.copyBufferSubData(t,e,i,n,s),Db:(t,e,i,n,s,r,o,a)=>ve.copyTexSubImage2D(t,e,i,n,s,r,o,a),Cb:()=>{var t=Kt.$d(Kt.Ld),e=ve.createProgram();return e.name=t,e.ie=e.ge=e.he=0,e.pe=1,Kt.Ld[t]=e,t},Bb:t=>{var e=Kt.$d(Kt.Md);return Kt.Md[e]=ve.createShader(t),e},Ab:t=>ve.cullFace(t),zb:(t,e)=>{for(var i=0;i<t;i++){var n=p[e+4*i>>2],s=Kt.ee[n];s&&(ve.deleteBuffer(s),s.name=0,Kt.ee[n]=null,n==ve.me&&(ve.me=0),n==ve.Wd&&(ve.Wd=0))}},Lc:(t,e)=>{for(var i=0;i<t;++i){var n=p[e+4*i>>2],s=Kt.fe[n];s&&(ve.deleteFramebuffer(s),s.name=0,Kt.fe[n]=null)}},yb:t=>{if(t){var e=Kt.Ld[t];e?(ve.deleteProgram(e),e.name=0,Kt.Ld[t]=null):Kt.Kd(1281)}},Kc:(t,e)=>{for(var i=0;i<t;i++){var n=p[e+4*i>>2],s=Kt.be[n];s&&(ve.deleteRenderbuffer(s),s.name=0,Kt.be[n]=null)}},sc:(t,e)=>{for(var i=0;i<t;i++){var n=p[e+4*i>>2],s=Kt.Qd[n];s&&(ve.deleteSampler(s),s.name=0,Kt.Qd[n]=null)}},xb:t=>{if(t){var e=Kt.Md[t];e?(ve.deleteShader(e),Kt.Md[t]=null):Kt.Kd(1281)}},wc:t=>{if(t){var e=Kt.Rd[t];e?(ve.deleteSync(e),e.name=0,Kt.Rd[t]=null):Kt.Kd(1281)}},wb:(t,e)=>{for(var i=0;i<t;i++){var n=p[e+4*i>>2],s=Kt.Zd[n];s&&(ve.deleteTexture(s),s.name=0,Kt.Zd[n]=null)}},ea:ne,ad:ne,vb:t=>{ve.depthMask(!!t)},ub:t=>ve.disable(t),tb:t=>{ve.disableVertexAttribArray(t)},sb:(t,e,i)=>{ve.drawArrays(t,e,i)},_c:(t,e,i,n)=>{ve.drawArraysInstanced(t,e,i,n)},Yc:(t,e,i,n,s)=>{ve.re.drawArraysInstancedBaseInstanceWEBGL(t,e,i,n,s)},Wc:(t,e)=>{for(var i=se[t],n=0;n<t;n++)i[n]=p[e+4*n>>2];ve.drawBuffers(i)},rb:(t,e,i,n)=>{ve.drawElements(t,e,i,n)},Zc:(t,e,i,n,s)=>{ve.drawElementsInstanced(t,e,i,n,s)},Xc:(t,e,i,n,s,r,o)=>{ve.re.drawElementsInstancedBaseVertexBaseInstanceWEBGL(t,e,i,n,s,r,o)},Rc:(t,e,i,n,s,r)=>{ve.drawElements(t,n,s,r)},qb:t=>ve.enable(t),pb:t=>{ve.enableVertexAttribArray(t)},vc:(t,e)=>(t=ve.fenceSync(t,e))?(e=Kt.$d(Kt.Rd),t.name=e,Kt.Rd[e]=t,e):0,ob:()=>ve.finish(),nb:()=>ve.flush(),Jc:(t,e,i,n)=>{ve.framebufferRenderbuffer(t,e,i,Kt.be[n])},Hc:(t,e,i,n,s)=>{ve.framebufferTexture2D(t,e,i,Kt.Zd[n],s)},lb:t=>ve.frontFace(t),kb:(t,e)=>{Kt.Yd(t,e,"createBuffer",Kt.ee)},Gc:(t,e)=>{Kt.Yd(t,e,"createFramebuffer",Kt.fe)},Fc:(t,e)=>{Kt.Yd(t,e,"createRenderbuffer",Kt.be)},rc:(t,e)=>{Kt.Yd(t,e,"createSampler",Kt.Qd)},jb:(t,e)=>{Kt.Yd(t,e,"createTexture",Kt.Zd)},da:re,$c:re,Ec:t=>ve.generateMipmap(t),ib:(t,e,i)=>{i?p[i>>2]=ve.getBufferParameter(t,e):Kt.Kd(1281)},hb:()=>{var t=ve.getError()||Kt.ne;return Kt.ne=0,t},gb:(t,e)=>ae(t,e,2),Dc:(t,e,i,n)=>{((t=ve.getFramebufferAttachmentParameter(t,e,i))instanceof WebGLRenderbuffer||t instanceof WebGLTexture)&&(t=0|t.name),p[n>>2]=t},P:(t,e)=>ae(t,e,0),fb:(t,e,i,n)=>{null===(t=ve.getProgramInfoLog(Kt.Ld[t]))&&(t="(unknown error)"),e=0<e&&n?Dt(t,h,n,e):0,i&&(p[i>>2]=e)},eb:(t,e,i)=>{if(i)if(t>=Kt.counter)Kt.Kd(1281);else if(t=Kt.Ld[t],35716==e)null===(t=ve.getProgramInfoLog(t))&&(t="(unknown error)"),p[i>>2]=t.length+1;else if(35719==e){if(!t.ie)for(e=0;e<ve.getProgramParameter(t,35718);++e)t.ie=Math.max(t.ie,ve.getActiveUniform(t,e).name.length+1);p[i>>2]=t.ie}else if(35722==e){if(!t.ge)for(e=0;e<ve.getProgramParameter(t,35721);++e)t.ge=Math.max(t.ge,ve.getActiveAttrib(t,e).name.length+1);p[i>>2]=t.ge}else if(35381==e){if(!t.he)for(e=0;e<ve.getProgramParameter(t,35382);++e)t.he=Math.max(t.he,ve.getActiveUniformBlockName(t,e).length+1);p[i>>2]=t.he}else p[i>>2]=ve.getProgramParameter(t,e);else Kt.Kd(1281)},Cc:(t,e,i)=>{i?p[i>>2]=ve.getRenderbufferParameter(t,e):Kt.Kd(1281)},db:(t,e,i,n)=>{null===(t=ve.getShaderInfoLog(Kt.Md[t]))&&(t="(unknown error)"),e=0<e&&n?Dt(t,h,n,e):0,i&&(p[i>>2]=e)},kc:(t,e,i,n)=>{t=ve.getShaderPrecisionFormat(t,e),p[i>>2]=t.rangeMin,p[i+4>>2]=t.rangeMax,p[n>>2]=t.precision},cb:(t,e,i)=>{i?35716==e?(null===(t=ve.getShaderInfoLog(Kt.Md[t]))&&(t="(unknown error)"),p[i>>2]=t?t.length+1:0):35720==e?(t=ve.getShaderSource(Kt.Md[t]),p[i>>2]=t?t.length+1:0):p[i>>2]=ve.getShaderParameter(Kt.Md[t],e):Kt.Kd(1281)},Q:t=>{var e=Kt.ve[t];if(!e){switch(t){case 7939:e=le(oe().join(" "));break;case 7936:case 7937:case 37445:case 37446:(e=ve.getParameter(t))||Kt.Kd(1280),e=e?le(e):0;break;case 7938:e=le(`OpenGL ES 3.0 (${ve.getParameter(7938)})`);break;case 35724:var i=(e=ve.getParameter(35724)).match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==i&&(3==i[1].length&&(i[1]+="0"),e=`OpenGL ES GLSL ES ${i[1]} (${e})`),e=le(e);break;default:Kt.Kd(1280)}Kt.ve[t]=e}return e},mb:(t,e)=>{if(2>Kt.Pd.version)return Kt.Kd(1282),0;var i=Kt.we[t];return i?0>e||e>=i.length?(Kt.Kd(1281),0):i[e]:7939===t?(i=oe().map(le),i=Kt.we[t]=i,0>e||e>=i.length?(Kt.Kd(1281),0):i[e]):(Kt.Kd(1280),0)},bb:(t,e)=>{if(e=e?z(h,e):"",t=Kt.Ld[t]){var i,n=t,s=n.ce,r=n.ye;if(!s)for(n.ce=s={},n.xe={},i=0;i<ve.getProgramParameter(n,35718);++i){var o=ve.getActiveUniform(n,i),a=o.name;o=o.size;var l=ce(a);l=0<l?a.slice(0,l):a;var c=n.pe;for(n.pe+=o,r[l]=[o,c],a=0;a<o;++a)s[c]=a,n.xe[c++]=l}if(n=t.ce,s=0,r=e,0<(i=ce(e))&&(s=parseInt(e.slice(i+1))>>>0,r=e.slice(0,i)),(r=t.ye[r])&&s<r[0]&&(n[s+=r[1]]=n[s]||ve.getUniformLocation(t,e)))return s}else Kt.Kd(1281);return-1},nc:(t,e,i)=>{for(var n=se[e],s=0;s<e;s++)n[s]=p[i+4*s>>2];ve.invalidateFramebuffer(t,n)},lc:(t,e,i,n,s,r,o)=>{for(var a=se[e],l=0;l<e;l++)a[l]=p[i+4*l>>2];ve.invalidateSubFramebuffer(t,a,n,s,r,o)},uc:t=>ve.isSync(Kt.Rd[t]),ab:t=>(t=Kt.Zd[t])?ve.isTexture(t):0,$a:t=>ve.lineWidth(t),_a:t=>{t=Kt.Ld[t],ve.linkProgram(t),t.ce=0,t.ye={}},Uc:(t,e,i,n,s,r)=>{ve.ue.multiDrawArraysInstancedBaseInstanceWEBGL(t,p,e>>2,p,i>>2,p,n>>2,g,s>>2,r)},Tc:(t,e,i,n,s,r,o,a)=>{ve.ue.multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL(t,p,e>>2,i,p,n>>2,p,s>>2,p,r>>2,g,o>>2,a)},Za:(t,e)=>{3317==t&&(Kt.ze=e),ve.pixelStorei(t,e)},Vc:t=>ve.readBuffer(t),Ya:(t,e,i,n,s,r,o)=>{if(ve.me)ve.readPixels(t,e,i,n,s,r,o);else{var a=ue(r);o>>>=31-Math.clz32(a.BYTES_PER_ELEMENT),ve.readPixels(t,e,i,n,s,r,a,o)}},Bc:(t,e,i,n)=>ve.renderbufferStorage(t,e,i,n),zc:(t,e,i,n,s)=>ve.renderbufferStorageMultisample(t,e,i,n,s),qc:(t,e,i)=>{ve.samplerParameterf(Kt.Qd[t],e,i)},pc:(t,e,i)=>{ve.samplerParameteri(Kt.Qd[t],e,i)},oc:(t,e,i)=>{ve.samplerParameteri(Kt.Qd[t],e,p[i>>2])},Xa:(t,e,i,n)=>ve.scissor(t,e,i,n),Wa:(t,e,i,n)=>{e=Kt.Ge(t,e,i,n),ve.shaderSource(Kt.Md[t],e)},Va:(t,e,i)=>ve.stencilFunc(t,e,i),Ua:(t,e,i,n)=>ve.stencilFuncSeparate(t,e,i,n),Sa:t=>ve.stencilMask(t),Ra:(t,e)=>ve.stencilMaskSeparate(t,e),Qa:(t,e,i)=>ve.stencilOp(t,e,i),Pa:(t,e,i,n)=>ve.stencilOpSeparate(t,e,i,n),Oa:(t,e,i,n,s,r,o,a,l)=>{if(ve.Wd)ve.texImage2D(t,e,i,n,s,r,o,a,l);else if(l){var c=ue(a);ve.texImage2D(t,e,i,n,s,r,o,a,c,l>>>31-Math.clz32(c.BYTES_PER_ELEMENT))}else ve.texImage2D(t,e,i,n,s,r,o,a,null)},Na:(t,e,i)=>ve.texParameterf(t,e,i),Ma:(t,e,i)=>{ve.texParameterf(t,e,m[i>>2])},La:(t,e,i)=>ve.texParameteri(t,e,i),Ka:(t,e,i)=>{ve.texParameteri(t,e,p[i>>2])},Qc:(t,e,i,n,s)=>ve.texStorage2D(t,e,i,n,s),Ja:(t,e,i,n,s,r,o,a,l)=>{if(ve.Wd)ve.texSubImage2D(t,e,i,n,s,r,o,a,l);else if(l){var c=ue(a);return void ve.texSubImage2D(t,e,i,n,s,r,o,a,c,l>>>31-Math.clz32(c.BYTES_PER_ELEMENT))}if(l){c=ue(a);var u=Kt.ze;u=r*(s*({5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[o-6402]||1)*c.BYTES_PER_ELEMENT+u-1&-u),l=c.subarray(l>>>31-Math.clz32(c.BYTES_PER_ELEMENT),l+u>>>31-Math.clz32(c.BYTES_PER_ELEMENT))}else l=null;ve.texSubImage2D(t,e,i,n,s,r,o,a,l)},Ha:(t,e)=>{ve.uniform1f(he(t),e)},Ga:(t,e,i)=>{e&&ve.uniform1fv(he(t),m,i>>2,e)},Fa:(t,e)=>{ve.uniform1i(he(t),e)},Ea:(t,e,i)=>{e&&ve.uniform1iv(he(t),p,i>>2,e)},Da:(t,e,i)=>{ve.uniform2f(he(t),e,i)},Ca:(t,e,i)=>{e&&ve.uniform2fv(he(t),m,i>>2,2*e)},Ba:(t,e,i)=>{ve.uniform2i(he(t),e,i)},Aa:(t,e,i)=>{e&&ve.uniform2iv(he(t),p,i>>2,2*e)},za:(t,e,i,n)=>{ve.uniform3f(he(t),e,i,n)},ya:(t,e,i)=>{e&&ve.uniform3fv(he(t),m,i>>2,3*e)},wa:(t,e,i,n)=>{ve.uniform3i(he(t),e,i,n)},va:(t,e,i)=>{e&&ve.uniform3iv(he(t),p,i>>2,3*e)},ua:(t,e,i,n,s)=>{ve.uniform4f(he(t),e,i,n,s)},ta:(t,e,i)=>{e&&ve.uniform4fv(he(t),m,i>>2,4*e)},sa:(t,e,i,n,s)=>{ve.uniform4i(he(t),e,i,n,s)},ra:(t,e,i)=>{e&&ve.uniform4iv(he(t),p,i>>2,4*e)},qa:(t,e,i,n)=>{e&&ve.uniformMatrix2fv(he(t),!!i,m,n>>2,4*e)},pa:(t,e,i,n)=>{e&&ve.uniformMatrix3fv(he(t),!!i,m,n>>2,9*e)},oa:(t,e,i,n)=>{e&&ve.uniformMatrix4fv(he(t),!!i,m,n>>2,16*e)},na:t=>{t=Kt.Ld[t],ve.useProgram(t),ve.Ce=t},la:(t,e)=>ve.vertexAttrib1f(t,e),ka:(t,e)=>{ve.vertexAttrib2f(t,m[e>>2],m[e+4>>2])},ja:(t,e)=>{ve.vertexAttrib3f(t,m[e>>2],m[e+4>>2],m[e+8>>2])},ia:(t,e)=>{ve.vertexAttrib4f(t,m[e>>2],m[e+4>>2],m[e+8>>2],m[e+12>>2])},Pc:(t,e)=>{ve.vertexAttribDivisor(t,e)},Oc:(t,e,i,n,s)=>{ve.vertexAttribIPointer(t,e,i,n,s)},ha:(t,e,i,n,s,r)=>{ve.vertexAttribPointer(t,e,i,!!n,s,r)},ga:(t,e,i,n)=>ve.viewport(t,e,i,n),Lb:(t,e,i,n)=>{ve.waitSync(Kt.Rd[t],e,(i>>>0)+4294967296*n)},t:function(t,e){var i=_e();try{return gt(t)(e)}catch(t){if(Ie(i),t!==t+0)throw t;ke(1,0)}},w:function(t,e,i){var n=_e();try{return gt(t)(e,i)}catch(t){if(Ie(n),t!==t+0)throw t;ke(1,0)}},A:function(t,e,i,n){var s=_e();try{return gt(t)(e,i,n)}catch(t){if(Ie(s),t!==t+0)throw t;ke(1,0)}},L:function(t,e,i,n,s){var r=_e();try{return gt(t)(e,i,n,s)}catch(t){if(Ie(r),t!==t+0)throw t;ke(1,0)}},Ob:function(t,e,i,n,s,r){var o=_e();try{return gt(t)(e,i,n,s,r)}catch(t){if(Ie(o),t!==t+0)throw t;ke(1,0)}},V:function(t,e,i,n,s,r,o){var a=_e();try{return gt(t)(e,i,n,s,r,o)}catch(t){if(Ie(a),t!==t+0)throw t;ke(1,0)}},Fb:function(t,e,i,n,s){var r=_e();try{return Le(t,e,i,n,s)}catch(t){if(Ie(r),t!==t+0)throw t;ke(1,0)}},I:function(t){var e=_e();try{gt(t)()}catch(t){if(Ie(e),t!==t+0)throw t;ke(1,0)}},n:function(t,e){var i=_e();try{gt(t)(e)}catch(t){if(Ie(i),t!==t+0)throw t;ke(1,0)}},d:function(t,e,i){var n=_e();try{gt(t)(e,i)}catch(t){if(Ie(n),t!==t+0)throw t;ke(1,0)}},m:function(t,e,i,n){var s=_e();try{gt(t)(e,i,n)}catch(t){if(Ie(s),t!==t+0)throw t;ke(1,0)}},q:function(t,e,i,n,s){var r=_e();try{gt(t)(e,i,n,s)}catch(t){if(Ie(r),t!==t+0)throw t;ke(1,0)}},Pb:function(t,e,i,n,s,r){var o=_e();try{gt(t)(e,i,n,s,r)}catch(t){if(Ie(o),t!==t+0)throw t;ke(1,0)}},U:function(t,e,i,n,s,r,o){var a=_e();try{gt(t)(e,i,n,s,r,o)}catch(t){if(Ie(a),t!==t+0)throw t;ke(1,0)}},T:function(t,e,i,n,s,r,o,a){var l=_e();try{gt(t)(e,i,n,s,r,o,a)}catch(t){if(Ie(l),t!==t+0)throw t;ke(1,0)}},W:function(t,e,i,n,s,r,o,a,l){var c=_e();try{gt(t)(e,i,n,s,r,o,a,l)}catch(t){if(Ie(c),t!==t+0)throw t;ke(1,0)}},Tb:(t,e,i,n)=>((t,e,i,n)=>{function s(t,e,i){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=i[0]+t;return t}function r(t,e){return s(t,e,"0")}function o(t,e){function i(t){return 0>t?-1:0<t?1:0}var n;return 0===(n=i(t.getFullYear()-e.getFullYear()))&&0===(n=i(t.getMonth()-e.getMonth()))&&(n=i(t.getDate()-e.getDate())),n}function a(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Sd;for(t=new Date(new Date(t.Td+1900,0,1).getTime());0<e;){var i=t.getMonth(),n=(de(t.getFullYear())?fe:pe)[i];if(!(e>n-t.getDate())){t.setDate(t.getDate()+e);break}e-=n-t.getDate()+1,t.setDate(1),11>i?t.setMonth(i+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return i=new Date(t.getFullYear()+1,0,4),e=a(new Date(t.getFullYear(),0,4)),i=a(i),0>=o(e,t)?0>=o(i,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var c=g[n+40>>2];for(var d in n={Ve:p[n>>2],Ue:p[n+4>>2],je:p[n+8>>2],oe:p[n+12>>2],ke:p[n+16>>2],Td:p[n+20>>2],Od:p[n+24>>2],Sd:p[n+28>>2],ff:p[n+32>>2],Te:p[n+36>>2],We:c&&c?z(h,c):""},i=i?z(h,i):"",c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})i=i.replace(new RegExp(d,"g"),c[d]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),m="January February March April May June July August September October November December".split(" ");for(d in c={"%a":t=>f[t.Od].substring(0,3),"%A":t=>f[t.Od],"%b":t=>m[t.ke].substring(0,3),"%B":t=>m[t.ke],"%C":t=>r((t.Td+1900)/100|0,2),"%d":t=>r(t.oe,2),"%e":t=>s(t.oe,2," "),"%g":t=>l(t).toString().substring(2),"%G":l,"%H":t=>r(t.je,2),"%I":t=>(0==(t=t.je)?t=12:12<t&&(t-=12),r(t,2)),"%j":t=>{for(var e=0,i=0;i<=t.ke-1;e+=(de(t.Td+1900)?fe:pe)[i++]);return r(t.oe+e,3)},"%m":t=>r(t.ke+1,2),"%M":t=>r(t.Ue,2),"%n":()=>"\n","%p":t=>0<=t.je&&12>t.je?"AM":"PM","%S":t=>r(t.Ve,2),"%t":()=>"\t","%u":t=>t.Od||7,"%U":t=>r(Math.floor((t.Sd+7-t.Od)/7),2),"%V":t=>{var e=Math.floor((t.Sd+7-(t.Od+6)%7)/7);if(2>=(t.Od+371-t.Sd-2)%7&&e++,e)53==e&&(4==(i=(t.Od+371-t.Sd)%7)||3==i&&de(t.Td)||(e=1));else{e=52;var i=(t.Od+7-t.Sd-1)%7;(4==i||5==i&&de(t.Td%400-1))&&e++}return r(e,2)},"%w":t=>t.Od,"%W":t=>r(Math.floor((t.Sd+7-(t.Od+6)%7)/7),2),"%y":t=>(t.Td+1900).toString().substring(2),"%Y":t=>t.Td+1900,"%z":t=>{var e=0<=(t=t.Te);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":t=>t.We,"%%":()=>"%"},i=i.replace(/%%/g,"\0\0"),c)i.includes(d)&&(i=i.replace(new RegExp(d,"g"),c[d](n)));return d=function(t){var e=Array(Ot(t)+1);return Dt(t,e,0,e.length),e}(i=i.replace(/\0\0/g,"%")),d.length>e?0:(u.set(d,t),d.length-1)})(t,e,i,n)},be=(S++,function(t,e){var i=I;return"function"!=typeof WebAssembly.instantiateStreaming||C(i)||"function"!=typeof fetch?N(i,t,e):fetch(i,{credentials:"same-origin"}).then((n=>WebAssembly.instantiateStreaming(n,t).then(e,(function(n){return l(`wasm streaming compile failed: ${n}`),l("falling back to ArrayBuffer instantiation"),N(i,t,e)}))))}({a:xe},(function(t){be=t.instance.exports,c=be.dd,x(),ht=be.id,w.unshift(be.ed),0==--S&&k&&(t=k,k=null,t())})).catch(n),{}),we=s._free=t=>(we=s._free=be.fd)(t),Me=s._malloc=t=>(Me=s._malloc=be.gd)(t),Se=t=>(Se=be.hd)(t),ke=(t,e)=>(ke=be.jd)(t,e),_e=()=>(_e=be.kd)(),Ie=t=>(Ie=be.ld)(t);s.dynCall_iiiji=(t,e,i,n,r,o)=>(s.dynCall_iiiji=be.md)(t,e,i,n,r,o),s.dynCall_iiij=(t,e,i,n,r)=>(s.dynCall_iiij=be.nd)(t,e,i,n,r),s.dynCall_iiiij=(t,e,i,n,r,o)=>(s.dynCall_iiiij=be.od)(t,e,i,n,r,o),s.dynCall_viij=(t,e,i,n,r)=>(s.dynCall_viij=be.pd)(t,e,i,n,r),s.dynCall_viiij=(t,e,i,n,r,o)=>(s.dynCall_viiij=be.qd)(t,e,i,n,r,o);var Ce,Le=s.dynCall_jiij=(t,e,i,n,r)=>(Le=s.dynCall_jiij=be.rd)(t,e,i,n,r);function Ne(){if(!(0<S)){for(;0<b.length;)b.shift()(s);if(!(0<S||Ce||(Ce=!0,s.calledRun=!0,y))){for(;0<w.length;)w.shift()(s);for(i(s);0<M.length;)M.shift()(s)}}}return s.dynCall_jiiiiji=(t,e,i,n,r,o,a,l)=>(s.dynCall_jiiiiji=be.sd)(t,e,i,n,r,o,a,l),s.dynCall_jiiiiii=(t,e,i,n,r,o,a)=>(s.dynCall_jiiiiii=be.td)(t,e,i,n,r,o,a),s.dynCall_jiji=(t,e,i,n,r)=>(s.dynCall_jiji=be.ud)(t,e,i,n,r),s.dynCall_viji=(t,e,i,n,r)=>(s.dynCall_viji=be.vd)(t,e,i,n,r),s.dynCall_viiiiij=(t,e,i,n,r,o,a,l)=>(s.dynCall_viiiiij=be.wd)(t,e,i,n,r,o,a,l),s.dynCall_ji=(t,e)=>(s.dynCall_ji=be.xd)(t,e),s.dynCall_iijj=(t,e,i,n,r,o)=>(s.dynCall_iijj=be.yd)(t,e,i,n,r,o),s.dynCall_jii=(t,e,i)=>(s.dynCall_jii=be.zd)(t,e,i),s.dynCall_vij=(t,e,i,n)=>(s.dynCall_vij=be.Ad)(t,e,i,n),s.dynCall_iiji=(t,e,i,n,r)=>(s.dynCall_iiji=be.Bd)(t,e,i,n,r),s.dynCall_iijjiii=(t,e,i,n,r,o,a,l,c)=>(s.dynCall_iijjiii=be.Cd)(t,e,i,n,r,o,a,l,c),s.dynCall_iij=(t,e,i,n)=>(s.dynCall_iij=be.Dd)(t,e,i,n),s.dynCall_vijjjii=(t,e,i,n,r,o,a,l,c,u)=>(s.dynCall_vijjjii=be.Ed)(t,e,i,n,r,o,a,l,c,u),s.dynCall_viijii=(t,e,i,n,r,o,a)=>(s.dynCall_viijii=be.Fd)(t,e,i,n,r,o,a),s.dynCall_iiiiij=(t,e,i,n,r,o,a)=>(s.dynCall_iiiiij=be.Gd)(t,e,i,n,r,o,a),s.dynCall_iiiiijj=(t,e,i,n,r,o,a,l,c)=>(s.dynCall_iiiiijj=be.Hd)(t,e,i,n,r,o,a,l,c),s.dynCall_iiiiiijj=(t,e,i,n,r,o,a,l,c,u)=>(s.dynCall_iiiiiijj=be.Id)(t,e,i,n,r,o,a,l,c,u),k=function t(){Ce||Ne(),Ce||(k=t)},Ne(),function(t){function e(t,e,i){Object.defineProperty(t,e,{configurable:!1,enumerable:!1,writable:!1,value:i})}function i(e,i,n){return e&&e.length?t.MALLOCSYMBOL in e?e.byteOffset:(n||=t._malloc(e.length*i.BYTES_PER_ELEMENT),i.set(e,n/i.BYTES_PER_ELEMENT),n):0}function n(t,e,i){var n=t[e];t[e]=i(n),n.Jd&&(t[e].Jd=n.Jd,delete n.Jd)}function s(t,e,i){var n=t.prototype[e];t.prototype[e]=i(n),n.Jd&&(t.prototype[e].Jd=n.Jd,delete n.Jd)}function r(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(!e||!i.length)return e||null;var s=e.delete;return e.delete=function(){s.call(e);for(var n=0;n<i.length;n++)t._free(i[n])},e}function o(e,i){t[e]=Object.freeze(i)}function a(t,e){if(!t||!t.length)return null;if(0!==e&&1!==e){t=t.slice();for(var i=0;i<t.length;i++)t[i]/=e;return 1==t.length%2&&t.push.apply(t,t),t}return 1==t.length%2?t.concat(t):t}function l(e,i){var n=t._malloc(i*e.BYTES_PER_ELEMENT);return(e=new e(t.HEAPU8.buffer,n,i))[t.MALLOCSYMBOL]=!0,e}function c(e,i,n,s){void 0===s&&(s=null);t:{switch(i=i||t.SkTextEncoding.UTF8){case t.SkTextEncoding.UTF8:var r=Ot,o=Et,a=Uint8Array.BYTES_PER_ELEMENT;break;case t.SkTextEncoding.UTF16:r=Ut,o=Bt,a=Uint16Array.BYTES_PER_ELEMENT;break;case t.SkTextEncoding.UTF32:r=Vt,o=Ft,a=Uint32Array.BYTES_PER_ELEMENT;break;default:e=null;break t}r=r(e);var l=t._malloc(r+a);o(e,l,r+a),e={Ne:r,ptr:l,Pe:e.length}}return null==e?s:(i=n(e.ptr,e.Ne,i,e.Pe),t._free(e.ptr),i)}function u(e,n,s){if(void 0===s&&(s=!1),!e||!e.length)return s?n(null,0):null;if(s=e.length,"object"==typeof e[0]){for(var r=[],o=0;o<s;o++)r.push(e[o].x,e[o].y);e=r,s*=2}return n=n(e=i(e,t.HEAPF32),s),t._free(e),n}function h(e,n,s){if(!e||!e.length)return null;"object"==typeof e[0]&&(e=e.map(d));var r=i(e,t.HEAPU32);return e=s(r,n=n&&0<n.length?i(n,t.HEAPF32):0,e.length),t._free(r),t._free(n),e}function d(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];switch(t.length){case 1:case 2:return"object"==typeof t[0]?(t=t[0],t=Array.isArray(t)?p.apply(null,t):p(t.r,t.g,t.b,t.a)):t=parseInt(t[0])>>>0,t;case 3:case 4:return p.apply(null,t)}return 0}function f(t){return 0>=t?0:255<=t?255:t}function p(t,e,i,n){return void 0===n&&(n=1),null==n&&(n=1),(f(255*n)<<24|f(t)<<16|f(e)<<8|f(i))>>>0}function g(e,i,n,s){var r,o;if(n=n?Object.assign({},x,n):Object.assign({},x),(n=Kt.createContext(e,n))&&y?(Kt.makeContextCurrent(n),Kt.Pd.Ud.getExtension("WEBGL_debug_renderer_info")):n=0,!n||0>n||!y)return null;var a=t.GrContext.Make(n);if(a&&a.setResourceCacheLimitBytes(268435456),s){if(s instanceof WebGL2RenderingContext)var l=s.getParameter(s.SAMPLES),c=s.getParameter(s.STENCIL_BITS);else l=s.samples,c=s.stencil_bits;s=t.SkSurface.MakeGLSurface(a,null!==(r=null==i?void 0:i.width)&&void 0!==r?r:e.width,null!==(o=null==i?void 0:i.height)&&void 0!==o?o:e.height,l,c)}else s=t.SkSurface.MakeGLSurface(a,null!==(l=null==i?void 0:i.width)&&void 0!==l?l:e.width,null!==(c=null==i?void 0:i.height)&&void 0!==c?c:e.height);return s.canvasElement=e,s.glCtx=n,s.grCtx=a,function(t){var e=t.delete;return t.delete=function(){e.call(t),t.canvasElement=null,t.glCtx&&(Kt.deleteContext(t.glCtx),t.glCtx=0),t.grCtx&&(t.grCtx.releaseResourcesAndAbandonContext(),t.grCtx.delete(),t.grCtx=null)},t}(s)}function m(t){return t&&"object"==typeof t?(v[0]=t.a,v[1]=t.b,v[2]=t.c,v[3]=t.d,v[4]=t.e,v[5]=t.f,v.byteOffset):0}var v,y=0,x={alpha:1,depth:1,stencil:8,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default",failIfMajorPerformanceCaveat:!1,majorVersion:2,minorVersion:0,enableExtensionsByDefault:!0,explicitSwapControl:!1,renderViaOffscreenBackBuffer:!1};t.MALLOCSYMBOL=Symbol("SkiaWasmMalloc"),t.malloc=l,t.free=function(t){return!(!t||t.Ye()||(t.delete(),0))},t.GL=Kt,Kt.getCurrentContext=function(){return Kt.Pd.handle},o("SkPathSegmentMask",{Line:1,Quad:2,Conic:4,Cubic:8}),o("SkPathVerb",{Move:0,Line:1,Quad:2,Conic:3,Cubic:4,Close:5}),o("SkCanvasSaveLayerFlagsSet",{None:0,PreserveLCDText:2,InitWithPrevious:4,F16ColorType:16}),o("SkFontStyleWidth",{UltraCondensed:1,ExtraCondensed:2,Condensed:3,SemiCondensed:4,Normal:5,SemiExpanded:6,Expanded:7,ExtraExpanded:8,UltraExpanded:9}),o("SkFontStyleWeight",{Invisible:0,Thin:100,ExtraLight:200,Light:300,Normal:400,Medium:500,SemiBold:600,Bold:700,ExtraBold:800,Black:900,ExtraBlack:1e3}),o("SkFontStyleSlant",{Upright:0,Italic:1,Oblique:2}),o("SkParagraphTextDirection",{LTR:0,RTL:1}),o("SkParagraphTextAlign",{Start:0,End:1,Center:2,Justify:3}),t.SkColor=d,t.SkColorObject=function(t){return{r:t>>16&255,g:t>>8&255,b:255&t,a:(t>>24&255)/255}},t.SkColorR=function(t){return t>>16&255},t.SkColorG=function(t){return t>>8&255},t.SkColorB=function(t){return 255&t},t.SkColorA=function(t){return(t>>24&255)/255},t.ready.then((function(){function o(e){return function(n){if(!n||!n.length)return[];var s=n.length;n=i(n,t.HEAP32);var r=t._malloc(s*Uint16Array.BYTES_PER_ELEMENT);return e.call(this,n,s,r),s=Array.from(new Uint16Array(t.HEAPU8.buffer,r,s)),t._free(n),t._free(r),s}}function f(t){return function(e){var i=this;return u(e,(function(e,n){return t.call(i,e,n)}))}}var p;v=l(Float32Array,6),e(t.SkSurface,"MakeWebGLSurface",g),s(t.SkCanvas,"clear",(function(t){return function(e){t.call(this,d(e))}})),s(t.SkCanvas,"drawColor",(function(e){return function(i,n){e.call(this,d(i),n||t.SkBlendMode.SrcOver)}})),s(t.SkCanvas,"concat",(function(t){return function(e){t.call(this,m(e))}})),s(t.SkCanvas,"setMatrix",(function(t){return function(e){t.call(this,m(e))}})),s(t.SkCanvas,"drawPicture",(function(t){return function(e,i,n){t.call(this,e,i||null,m(n))}})),s(t.SkCanvas,"drawImage",(function(t){return function(e,i,n,s,r){t.call(this,e,i||0,n||0,s||null,r||null)}})),s(t.SkCanvas,"drawImageRect",(function(t){return function(e,i,n,s,r,o){n||={top:0,left:0,right:e.width,bottom:e.height},t.call(this,e,n,i,s||null,r||null,!!o)}})),s(t.SkCanvas,"drawDrawable",(function(t){return function(e,i,n){void 0===n?t.call(this,e,m(i)):t.call(this,e,i,n)}})),s(t.SkCanvas,"colorAt",(function(t){return function(e,i){return"object"==typeof e&&(i=e.y,e=e.x),t.call(this,e||0,i||0)}})),s(t.SkCanvas,"drawPoints",(function(t){return function(e,i,n){var s=this;u(i,(function(i,r){t.call(s,e,i,r,n)}))}})),s(t.SkCanvas,"drawText",(function(t){return function(e,i,n,s,r,o){var a=this;r||=0,o||=0,"object"==typeof r&&(o=r.y||0,r=r.x||0),c(e,s,(function(e,s,l){t.call(a,e,s,r,o,i,n,l)}))}})),s(t.SkCanvas,"drawGlyphs",(function(e){return function(n,s,r,o,a,l){a||=0,l||=0,"object"==typeof a&&(l=a.y||0,a=a.x||0);var c=i(n,t.HEAPU16);e.call(this,c,n.length,a,l,s,r,!!o),t._free(c)}})),s(t.SkCanvas,"drawTextBlob",(function(t){return function(e,i,n,s){n||=0,s||=0,"object"==typeof n&&(s=n.y||0,n=n.x||0),t.call(this,e,n,s,i)}})),n(t.SkColorFilter,"MakeMatrix",(function(e){return function(n){n=i(n,t.HEAPF32);var s=e.call(t.SkColorFilter,n);return t._free(n),s}})),n(t.SkColorFilter,"MakeHSLAMatrix",(function(e){return function(n){n=i(n,t.HEAPF32);var s=e.call(t.SkColorFilter,n);return t._free(n),s}})),n(t.SkImageFilter,"MakeMatrixConvolution",(function(e){return function(n,s,r,o,a,l,c,u,h){return s=i(s,t.HEAPF32),n=h?e.call(t.SkImageFilter,n,s,r,o,a,l,c,u,h):e.call(t.SkImageFilter,n,s,r,o,a,l,c,u),t._free(s),n}})),n(t.SkImageFilter,"MakeMatrixTransform",(function(e){return function(i,n,s){return s?e.call(t.SkImageFilter,m(i),n||null,s):e.call(t.SkImageFilter,m(i),n||null)}})),s(t.SkPaint,"setColor",(function(t){return function(){switch(arguments.length){case 4:return void t.apply(this,arguments);case 3:return void t.call(this,arguments[0],arguments[1],arguments[2],1);case 1:if("object"==typeof arguments[0]){var e=arguments[0];t.call(this,e.r,e.g,e.b,"a"in e?e.a:1)}else t.call(this,0,0,0,parseFloat(arguments[0]));return}t.call(this,0,0,0,0)}})),s(t.SkPath,"getBounds",(function(t){return function(e){return t.call(this,m(e))}})),s(t.SkPath,"computeTightBounds",(function(t){return function(e){return t.call(this,m(e))}})),s(t.SkPath,"contains",(function(t){return function(e,i,n){return t.call(this,e,i,m(n))}})),s(t.SkPath,"transform",(function(t){return function(e){return t.call(this,m(e))}})),s(t.SkPath,"addPath",(function(t){return function(e,i,n){t.call(this,e,m(i),!!n)}})),s(t.SkPath,"addPathOffset",(function(t){return function(e,i,n,s){t.call(this,e,i,n,!!s)}})),s(t.SkPath,"addPoly",(function(t){return function(e,i,n){var s=this;u(e,(function(e,r){t.call(s,e,r,!!i,n||0)}))}})),s(t.SkPath,"addPolyCR",(function(t){return function(e,i,n){var s=this;u(e,(function(e,r){t.call(s,e,r,!!i,n||1)}))}})),s(t.SkPath,"split",(function(t){return function(e){return void 0===e&&(e=!0),t.call(this,!!e)}})),s(t.SkPath,"cut",(function(t){return function(e,i){return void 0===i&&(i=.01),t.call(this,e,i||.01)}})),s(t.SkPath,"addStar",(function(t){return function(e,i,n,s,r,o,a,l,c,u){t.call(this,e,i,n,s,r,o||0,a||0,l||0,c||0,u||0)}})),s(t.SkPath,"addRoundStar",(function(t){return function(e,i,n,s,r,o,a,l,c,u){t.call(this,e,i,n,s,r,o||0,a||0,l||0,c||0,u||0)}})),s(t.SkPath,"addRegularPolygon",(function(t){return function(e,i,n,s,r,o,a){3>n||0>=s||0>=(r||s)||t.call(this,e,i,n,s,r||s,o||0,a||0)}})),s(t.SkPath,"addRoundRegularPolygon",(function(t){return function(e,i,n,s,r,o,a,l){3>n||0>=s||0>=(r||s)||t.call(this,e,i,n,s,r||s,o||0,null!=a?a:o||0,l||0)}})),s(t.SkPath,"flatten",(function(t){return function(e,i){return t.call(this,e||1,i||null)}})),s(t.SkPath,"getStroked",(function(e){return function(n,s,r,o,a,l,c,u,h,d,f){var p=0,g=0;return l&&Array.isArray(l)&&0<l.length&&(1==l.length%2&&(l=l.concat(l)),g=l.length,p=i(l,t.HEAPF32)),n=e.call(this,n,null!=s?s:t.SkPaintStrokeCap.Butt,null!=r?r:t.SkPaintStrokeJoin.Miter,null!=o?o:4,null!=a?a:0,p,g,c||0,u||null,h||null,d||null,f||1),p&&t._free(p),n}})),t.SkPath.prototype.addPolygon=function(t,e){this.addPoly(t,!0,e||0)},t.SkPath.prototype.addPolyline=function(t,e){this.addPoly(t,!1,e||0)},n(t.SkPath,"MakePieces",(function(e){return function(i,n,s){return void 0===n&&(n=.01),void 0===s&&(s=!0),e.call(t.SkPath,i,n||.01,!!s)}})),n(t.SkPath,"MakeFromString",(function(e){return function(i,n){return i=e.call(t.SkPath,i),n||i.noConics(),i}})),n(t.SkPath,"MakeFit",(function(e){return function(i,n,s){return u(i,(function(i,r){return e.call(t.SkPath,i,r,n||2,!!s)}))}})),n(t.SkPath,"MakeFromCommands",(function(e){return function(n,s){if(!n||!n.length)return new t.SkPath;if(Array.isArray(n)){for(var r=[],o=n.length,a=0;a<o;a++)switch(typeof n[a]){case"number":r.push(n[a]);break;case"object":r.push(n[a].x,n[a].y)}n=r}return r=i(n,t.HEAPF32),n=e.call(t.SkPath,r,n.length,!!s),t._free(r),n}})),n(t.SkPathProfile,"MakeSharp",f),n(t.SkPathProfile,"MakeSmooth",f),n(t.SkPathEffect,"MakeBend",(function(e){return function(n,s,r,o,l,c,u){var h=0,d=0,f=!1;return c=c||0,(l=a(l,u||0))?(0<u&&(f=!0,c/=u),d=l.length,h=i(l,t.HEAPF32)):c=0,n=e.call(this,n,s||null,r||null,o||0,h,d,c,f),h&&t._free(h),n}})),n(t.SkPathEffect,"MakeDash",(function(e){return function(n,s,r){if(!(n=a(n,r||0)))return null;var o=0<r;return s=s||0,o&&(s/=r),r=i(n,t.HEAPF32),n=e.call(t.SkPathEffect,r,n.length,s,o),t._free(r),n}})),n(t.SkPathEffect,"Make2D",(function(e){return function(i,n){return e.call(t.SkPathEffect,i,m(n))}})),n(t.SkPathEffect,"MakeLine2D",(function(e){return function(i,n){return e.call(t.SkPathEffect,i,m(n))}})),n(t.SkShader,"MakeLinearGradient",(function(e){return function(i,n,s,r,o,a){return h(s,r,(function(s,r,l){return e.call(t.SkShader,i,n,s,r,l,o||t.SkTileMode.Clamp,m(a))}))}})),n(t.SkShader,"MakeRadialGradient",(function(e){return function(i,n,s,r,o,a){return h(s,r,(function(s,r,l){return e.call(t.SkShader,i,n,s,r,l,o||t.SkTileMode.Clamp,m(a))}))}})),n(t.SkShader,"MakeTwoPointConicalGradient",(function(e){return function(i,n,s,r,o,a,l,c){return h(o,a,(function(o,a,u){return e.call(t.SkShader,i,n,s,r,o,a,u,l||t.SkTileMode.Clamp,m(c))}))}})),n(t.SkShader,"MakeSweepGradient",(function(e){return function(i,n,s,r,o,a,l){return h(r,o,(function(r,o,c){return e.call(t.SkShader,i,n,s,r,o,c,a||t.SkTileMode.Clamp,m(l))}))}})),n(t.SkVertices,"Make",(function(e){return function(n,s,r,o,a){return u(s,(function(s,l){return u(r,(function(r){var c=null,u=0;a&&0<a.length&&(c=i(a,t.HEAPU16),u=a.length);var h=null;return o&&0<o.length&&("object"==typeof o[0]&&(o=o.map(d)),h=i(o,t.HEAPU32)),r=e.call(t.SkVertices,n,s,l,c||0,u,r||0,h||0),c&&t._free(c),h&&t._free(h),r}),!0)}))}})),s(t.SkRuntimeEffect,"makeShader",(function(e){return function(n,s){var r=i(n,t.HEAPF32);return e.call(this,r,4*n.length,m(s))}})),s(t.SkRuntimeEffect,"makeColorFilter",(function(e){return function(n){var s=i(n,t.HEAPF32);return e.call(this,s,4*n.length)}})),s(t.SkRuntimeEffect,"makeShaderWithChildren",(function(e){return function(n,s,r){for(var o=i(n,t.HEAPF32),a=[],l=0,c=s.length;l<c;l++)a.push(s[l].$$.ptr);return s=i(a,t.HEAPU32),e.call(this,o,4*n.length,s,a.length,m(r))}})),n(t.SkRuntimeEffect,"MakeForColorFilter",(function(e){return function(i){if("string"==typeof(i=e.call(t.SkRuntimeEffect,i)))throw Error("Invalid program: "+i);return i}})),n(t.SkRuntimeEffect,"MakeForShader",(function(e){return function(i){if("string"==typeof(i=e.call(t.SkRuntimeEffect,i)))throw Error("Invalid program: "+i);return i}})),s(t.SkRuntimeShaderBuilder,"makeShader",(function(t){return function(e){return t.call(this,m(e))}})),s(t.SkRuntimeShaderBuilder,"color",(function(t){return function(e,i){return t.call(this,e,d(i))}})),s(t.SkRuntimeShaderBuilder,"point",(function(t){return function(e,i,n){return"object"==typeof i&&(n=i.y,i=i.x),t.call(this,e,i||0,n||0)}})),s(t.SkRuntimeShaderBuilder,"int",(function(e){return function(n,s){if(Array.isArray(s)){if(0===s.length)return;if(1===s.length)return void e.call(this,n,s[0]);var r=i(s,t.HEAP32);this.intArray(n,r,s.length),t._free(r)}e.call(this,n,s)}})),s(t.SkRuntimeShaderBuilder,"float",(function(e){return function(n,s){if(Array.isArray(s)){if(0===s.length)return;if(1===s.length)return void e.call(this,n,s[0]);var r=i(s,t.HEAPF32);this.floatArray(n,r,s.length),t._free(r)}e.call(this,n,s)}})),s(t.SkRuntimeShaderBuilder,"matrix",(function(t){return function(e,i){t.call(this,e,m(i))}})),s(t.SkDrawable,"draw",(function(t){return function(e,i,n){return null==n?t.call(this,e,m(i)):t.call(this,e,i,n)}})),s(t.SkPicture,"makeShader",(function(t){return function(e,i,n,s){return s?t.call(this,e,i||e,m(n),s):(n=m(n))?t.call(this,e,i||e,n):t.call(this,e,i||e)}})),s(t.SkPictureRecorder,"finishRecordingAsPicture",(function(t){return function(e){return e?t.call(this,e):t.call(this)}})),t.SkPictureRecorder.Record=function(e,i){var n=new t.SkPictureRecorder;return e=n.beginRecording(e),i=n.finishRecordingAsPicture(i(e)),n.delete(),i},t.SkPictureRecorder.RecordAsync=function(e,i){var n=new t.SkPictureRecorder,s=n.beginRecording(e);return i(s).then((function(t){return t=n.finishRecordingAsPicture(t),n.delete(),s=n=null,t}))},t.SkData.prototype.getBlob=function(t){void 0===t&&(t="");var e=new Uint8Array(this.getBytes());return new Blob([e.buffer],{type:t})},n(t.SkData,"Make",(function(e){return function(n){n instanceof Uint8Array||n instanceof Uint8ClampedArray||(n=new Uint8Array(n));var s=i(n,t.HEAPU8);return e.call(t.SkData,s,n.length)}})),s(t.SkImage,"makeShader",(function(t){return function(e,i,n,s){return s?t.call(this,e,i||e,m(n),s):t.call(this,e,i||e,m(n))}})),t.SkImage.prototype.encodeToDataURI=function(e,i){switch(e){case t.SkEncodedImageFormat.PNG:var n="png";break;case t.SkEncodedImageFormat.JPEG:n="jpeg";break;case t.SkEncodedImageFormat.WEBP:n="webp";break;default:return null}return e=this.encodeToBase64String(e,i||100)||"","data:image/".concat(n,";base64,").concat(e)},n(t.SkImage,"MakeFromEncoded",(function(e){return function(n){if(n instanceof t.SkData)return e.call(t.SkImage,n);n instanceof Uint8Array||n instanceof Uint8ClampedArray||(n=new Uint8Array(n));var s=i(n,t.HEAPU8);return e.call(t.SkImage,s,n.length)}})),n(t.SkImage,"MakeFromPixels",(function(e){return function(n,s,r){n instanceof Uint8Array||n instanceof Uint8ClampedArray||(n=new Uint8Array(n));var o=i(n,t.HEAPU8);return e.call(t.SkImage,o,n.length,s,r||n.length/s/4)}})),t.SkImage.MakeFromImageData=function(e){return t.SkImage.MakeFromPixels(e.data,e.width,e.height)},s(t.SkFont,"countTextGlyphs",(function(t){return function(e,i){var n=this;return c(e,i,(function(e,i,s){return t.call(n,e,i,s)}),0)}})),s(t.SkFont,"measureTextWidth",(function(t){return function(e,i,n){var s=this;return c(e,i,(function(e,i,r){return n?t.call(s,e,i,r,n):t.call(s,e,i,r)}),0)}})),s(t.SkFont,"measureTextBounds",(function(t){return function(e,i,n){var s=this;return c(e,i,(function(e,i,r){return n?t.call(s,e,i,r,n):t.call(s,e,i,r)}),null)}})),s(t.SkFont,"getTextWidths",(function(e){return function(i,n){var s=this;return c(i,n,(function(i,n,r,o){var a=t._malloc(o*Float32Array.BYTES_PER_ELEMENT),l=null;return e.call(s,i,n,a,o,r)&&(l=Array.from(new Float32Array(t.HEAPU8.buffer,a,o))),t._free(a),l}),null)}})),s(t.SkFont,"getWidths",(function(e){return function(n){var s=n.length;n=i(n,t.HEAPU16);var r=t._malloc(s*Float32Array.BYTES_PER_ELEMENT);return e.call(this,n,s,r),s=Array.from(new Float32Array(t.HEAPU8.buffer,r,s)),t._free(n),t._free(r),s}})),s(t.SkFont,"textToGlyphs",(function(e){return function(i,n){var s=this;return c(i,n,(function(i,n,r,o){var a=t._malloc(o*Uint16Array.BYTES_PER_ELEMENT),l=null;return 0<(i=e.call(s,i,n,a,o,r))&&(l=Array.from(new Uint16Array(t.HEAPU8.buffer,a,i))),t._free(a),l}),null)}})),s(t.SkFont,"textToPath",(function(t){return function(e,i,n){var s=this;return c(e,n,(function(e,n,r){return i?t.call(s,e,n,i.x,i.y,r):t.call(s,e,n,0,0,r)}))}})),s(t.SkFont,"unicharsToGlyphs",o),s(t.SkFont,"getXPositions",(function(e){return function(n,s){var r=n.length;n=i(n,t.HEAPU16);var o=t._malloc(r*Float32Array.BYTES_PER_ELEMENT);return e.call(this,n,r,o,s||0),s=Array.from(new Float32Array(t.HEAPU8.buffer,o,r)),t._free(n),t._free(o),s}})),s(t.SkFont,"getPositions",(function(e){return function(n,s){var r=n.length;return n=i(n,t.HEAPU16),s=e.call(this,n,r,s||{x:0,y:0}),t._free(n),s}})),s(t.SkFont,"getBounds",(function(e){return function(n,s){var r=n.length;return n=i(n,t.HEAPU16),s=e.call(this,n,r,s||null),t._free(n),s}})),s(t.SkFont,"getAbsoluteBounds",(function(e){return function(n,s,r){var o=n.length;return n=i(n,t.HEAPU16),s=e.call(this,n,o,s||{x:0,y:0},r||null),t._free(n),s}})),s(t.SkFont,"measureWidth",(function(e){return function(n,s){var r=i(n,t.HEAPU16);return n=e.call(this,r,n.length*t.HEAPU16.BYTES_PER_ELEMENT,s||null),t._free(r),n}})),s(t.SkFont,"measureBounds",(function(e){return function(n,s){var r=n.length*t.HEAPU16.BYTES_PER_ELEMENT;return n=i(n,t.HEAPU16),s=e.call(this,n,r,s||null),t._free(n),s}})),s(t.SkFontMgr,"scanFontInfo",(function(e){return function(n){if(n instanceof t.SkData)return e.call(this,n);var s=i(n=new Uint8Array(n),t.HEAPU8);return n=e.call(this,s,n.byteLength),t._free(s),n}})),s(t.SkFontMgr,"setFallback",(function(e){return function(n){if(n instanceof t.SkData)return e.call(this,n);var s=i(n=new Uint8Array(n),t.HEAPU8);return e.call(this,s,n.byteLength)||null}})),s(t.SkFontMgr,"addFontData",(function(e){return function(n){if(n instanceof t.SkData)return e.call(this,n);var s=i(n=new Uint8Array(n),t.HEAPU8);return e.call(this,s,n.byteLength)||null}})),s(t.SkFontMgr,"makeTypefaceFromData",(function(e){return function(n,s){if(n instanceof t.SkData)return e.call(this,n,s||0);var r=i(n=new Uint8Array(n),t.HEAPU8);return e.call(this,r,n.byteLength,s||0)||null}})),s(t.SkFontMgr,"makeTypefaceInstance",(function(e){return function(n,s){if(n instanceof t.SkData)return e.call(this,n,s);var r=i(n=new Uint8Array(n),t.HEAPU8);return e.call(this,r,n.byteLength,s)||null}})),s(t.SkFontMgr,"addFontInstance",(function(e){return function(n,s,r){if(n instanceof t.SkData)return e.call(this,n,s,r||"");var o=i(n=new Uint8Array(n),t.HEAPU8);return e.call(this,o,n.byteLength,s,r||"")}})),s(t.SkFontMgr,"addAllFontInstances",(function(e){return function(n){if(n instanceof t.SkData)return e.call(this,n);var s=i(n=new Uint8Array(n),t.HEAPU8);return e.call(this,s,n.byteLength)}})),n(t.SkFontMgr,"MakeFromData",(function(e){return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(!n||!n.length)return null;var r=[];s=[];for(var o=0;o<n.length;o++)r.push(i(n[o],t.HEAPU8)),s.push(n[o].byteLength);return r=i(r,t.HEAPU32),s=i(s,t.HEAPU32),n=e.call(t.SkFontMgr,r,s,n.length),t._free(r),t._free(s),n}})),s(t.SkFont,"unicharsToGlyphs",o),s(t.SkTypeface,"getKerningPairAdjustments",(function(e){return function(n,s){if(!n||!n.length||2>n.length)return null;var r=n.length;n=i(n,t.HEAPU16);var o=t._malloc((r-1)*Int32Array.BYTES_PER_ELEMENT),a=null;if(e.call(this,n,r,o)){if(a=new Int32Array(t.HEAPU8.buffer,n,r-1),s&&(r=this.unitsPerEm))for(s/=r,r=0;r<a.length;r++)a[r]*=s;a=Array.from(a)}return t._free(n),t._free(o),a}})),n(t.SkTextBlob,"MakeFromText",(function(e){return function(i,n,s){return c(i,s,(function(i,s,o){return r(s=e.call(t.SkTextBlob,i,s,n,o),i)}),null)}})),n(t.SkTextBlob,"MakeShaped",(function(e){return function(i,n,s,o){return c(i,null,(function(i,a){return r(a=e.call(t.SkTextBlob,i,a,n,s||0,!!o),i)}),null)}})),n(t.SkTextBlob,"MakeFromGlyphs",(function(e){return function(n,s){var o=i(n,t.HEAPU16);return r(n=e.call(t.SkTextBlob,o,n.length*t.HEAPU16.BYTES_PER_ELEMENT,s),o)}})),n(t.SkTextBlob,"MakeFromPosText",(function(e){return function(i,n,s,o){return u(n,(function(n,a){return c(i,o,(function(i,o,l){return r(o=e.call(t.SkTextBlob,i,o,n,a,s,l),i)}),null)}))}})),n(t.SkTextBlob,"MakeFromPosGlyphs",(function(e){return function(n,s,o){return!n||s.length<n.length?null:u(s,(function(s,a){var l=i(n,t.HEAPU16);return r(s=e.call(t.SkTextBlob,l,n.length*Uint16Array.BYTES_PER_ELEMENT,s,a,o),l)}))}})),n(t.SkTextBlob,"MakeFromPosTextH",(function(e){return function(n,s,o,a,l){return c(n,l,(function(n,l,c){var u=i(s,t.HEAPF32);return l=e.call(t.SkTextBlob,n,l,u,o,a,c),t._free(u),r(l,n)}),null)}})),n(t.SkTextBlob,"MakeFromPosGlyphsH",(function(e){return function(n,s,o,a){if(!n)return null;var l=i(n,t.HEAPU16);return s=i(s,t.HEAPF32),n=e.call(t.SkTextBlob,l,n.length*Uint16Array.BYTES_PER_ELEMENT,s,o,a),t._free(s),r(n,l)}})),t.SkTextBlob.MakeFromTextOnPath=function(e,i,n,s,r){return e&&e.length?(e=n.textToGlyphs(e,r||null),t.SkTextBlob.MakeFromGlyphsOnPath(e,i,n,s||0)):null},n(t.SkTextBlob,"MakeFromGlyphsOnPath",(function(e){return function(n,s,o,a){if(!n||!n.length)return null;var l=i(n,t.HEAPU16);return r(n=e.call(t.SkTextBlob,l,n.length,s,o,a||0),l)}})),n(t.SkTextBlob,"MakeFromKernGlyphs",(function(e){return function(n,s,o,a){if(o||=0,a||=0,"object"==typeof o&&(a=o.y||0,o=o.x||0),!n)return null;var l=i(n,t.HEAPU16);return r(n=e.call(t.SkTextBlob,l,n.length,s,o,a),l)}})),s(t.SkParagraph,"paint",(function(t){return function(e,i,n,s,r,o,a){t.call(this,e,i,n||0,s||0,r||0,o||0,!!a)}})),n(t,"init",(function(i){return function(){if(!p&&!globalThis.Skia&&(p=1,i.call(t)))try{e(globalThis,"Skia",t),y=1}catch(t){}}}))}))}(s),e.ready});function i(t){return Number.isFinite(t)&&!Number.isNaN(t)}function n(t,e=0,i=1){return t<=e?e:t>=i?i:t}function s(t,e,i,n,s){return null!=i&&t<=i?i:null!=n&&t>=n?n:(s??=1e4,null!=e&&(t*=s,t/=e*s,t=Math.round(t*s)/s,t=Math.trunc(t)*e),Math.round(t*s)/s)}function r(t,e,i){return e===i?1:(t-e)/(i-e)}function o(t){return Number.isInteger(t)?t:Math.round(100*t)/100}function a(t,e,i=1e-5){return Math.abs(t-e)<=i}function l(t,e=0){const n=parseFloat(t);return i(n)?n:e}const c=/-?(?:\d\.?\d*[Ee][+\-]?\d+|(?:\d+\.\d*|\d*\.\d+)|\d+)/gm;function u(t,e=1){const n=[];let s;for(;s=c.exec(t);){const t=parseFloat(s[0]);i(t)&&n.push(t*e)}return n}function h(t){return Number.isInteger(t)?t.toString():t.toFixed(2)}const d=/^(-?\d+)(?:\.0+|(\.\d*[1-9])0+)$/g;function f(t,e=2,i=""){return null==t?"":0==t?"0"+i:Number.isInteger(t)?t+i:t.toFixed(e).replace(d,"$1$2")+i}class p{#t=null;#e=null;#i=null;#n=0;#s=0;#r=0;#o=0;constructor(t){this.options={lineHeight:0,margin:0,paddingStart:0,paddingEnd:0,thickness:6,roundness:1,sizeDelta:0,position:t??2}}get isVertical(){return this.#i??=g(this.options.position)}get shouldDraw(){return this.isVisible}get isVisible(){return this.#s>this.clientSize}get bounds(){return this.#e??=function(t,e,i,s,r,o=1){const a=r.sizeDelta+(g(r.position)?e:t),l=a-(r.paddingStart+r.paddingEnd),c=r.margin*o,u=r.thickness*o,h=Math.max(n(a/s),2*r.thickness/l),d=s===a?0:n(i/(s-a)),f=l*h*o,p=(r.paddingStart-r.sizeDelta+l*(1-h)*d)*o;switch(r.position){case 2:return new DOMRectReadOnly(t*o-u-c,p,u,f);case 4:return new DOMRectReadOnly(c,p,u,f);case 3:return new DOMRectReadOnly(p,e*o-u-c,f,u);case 1:return new DOMRectReadOnly(p,c,f,u)}}(this.#r,this.#o,this.#n,this.#s,this.options)}get path(){if(this.#t)return this.#t;const t=this.bounds,e=new Path2D;return e.roundRect(t.x,t.y,t.width,t.height,this.options.roundness*this.options.thickness),this.#t=e}contains(t,e){const i=this.bounds;return t>=i.left&&t<=i.right&&e>=i.top&&e<=i.bottom}get offset(){return this.#n}set offset(t){this.#a(t)&&this.invalidate()}get currentBarSize(){return this.scrollableClientSize*n(this.clientSize/this.#s)}#l(t,e){switch(e){case 1:return t*this.options.lineHeight;case 2:return t*Math.max(this.scrollableClientSize,0);default:return t}}inView(t,e){return(t=this.#l(t,e))>=this.#n&&t<=this.#n+this.scrollableClientSize}scrollLineInView(t){const e=this.options.lineHeight,i=e*t;if(i<this.#n)return this.scrollTo(i);const n=i+e,s=this.#n+this.scrollableClientSize;return i>s?this.scrollTo(i):n>s&&this.scrollBy(n-s)}scrollTo(t,e){return!!this.#a(this.#l(t,e))&&(this.invalidate(),!0)}scrollBy(t,e){return!(!t||!this.#a(this.#n+this.#l(t,e))||(this.invalidate(),0))}scrollByWheel(t){const e=this.isVertical;return t.shiftKey?!e&&this.scrollBy(t.deltaY,t.deltaMode):e?this.scrollBy(t.deltaY,t.deltaMode):this.scrollBy(t.deltaX,t.deltaMode)}initScrollByMouse(t){if(this.isVertical){const e=this.bounds.y-t.clientY;return t=>this.#c(t.clientY+e,this.#o)}const e=this.bounds.x-t.clientX;return t=>this.#c(t.clientX+e,this.#r)}#c(t,e){const i=this.options,n=i.paddingStart-i.sizeDelta,s=(t-n)/(e-n-i.paddingEnd);return this.scrollTo(s*this.#s)}get clientSize(){return this.options.sizeDelta+(this.isVertical?this.#o:this.#r)}get scrollableClientSize(){return this.clientSize-this.options.paddingStart-this.options.paddingEnd}get contentSize(){return this.#s}set contentSize(t){this.updateSize(this.#r,this.#o,t)}#a(t){return t=n(t??this.#n,0,Math.max(this.#s-this.clientSize,0)),this.#n!==t&&(this.#n=t,!0)}updateSize(t,e,i){return t=Math.max(t,0),e=Math.max(e,0),i=Math.max(i,0),(this.#r!==t||this.#o!==e||this.#s!==i)&&(this.#r=t,this.#o=e,this.#s=i,this.#a(),this.invalidate(),!0)}updateOptions(t){let e=!1;const i=this.options;for(const[n,s]of Object.entries(t))null!=s&&s!==i[n]&&(i[n]=s,e=!0);return!!e&&(this.#i=null,this.invalidate(),!0)}invalidate(){this.#t=this.#e=null}}function g(t){return 2===t||4===t}function m(t){return t%360+(t<0?360:0)}function v(t){return Math.round(255*t)}function y(t){const e=Math.round(t).toString(16);return 1===e.length?"0"+e:e}function x(t,e,i,n,s){const r=null!=n&&1!==n,o=`${y(t)}${y(e)}${y(i)}${r?y(255*n):""}`;return s||o[0]!==o[1]||o[2]!==o[3]||o[4]!==o[5]||r&&o[6]!==o[7]?`#${o}`:`#${o[0]}${o[2]}${o[4]}${r?o[6]:""}`}function b(){const t=document.activeElement;t instanceof HTMLElement&&t.blur()}const w=new Map,M={capture:!0};function S(t,e,i){let n;n=i?e:t=>{t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),e(t)},w.set(t,n),window.addEventListener(t,n,M)}function k(...t){for(const e of t)if(w.has(e)){const t=w.get(e);w.delete(e),window.removeEventListener(e,t,M)}}let _=!1;function I(t=!0){_=t}function C(t,e,i=!0){_=i,S("pointermove",t),S("pointerup",e),S("pointercancel",e)}function L(){k("pointermove","pointerup","pointercancel"),_=!1}function N(t){return t.toFixed(0).padStart(2,"0")}function j(t,e,i){const n=t%1e3,s=Math.round(e*n/1e3);let r=(t-n)/1e3;const o=r%60;return r=(r-o)/60,i&&!r?`${N(o)}:${N(s)}`:`${N(r)}:${N(o)}:${N(s)}`}function z(t,e){if(!t)return"0s";const i=t%1e3,n=Math.round(e*i/1e3);if(n)return`${N(n)}f`;let s=(t-i)/1e3;const r=s%60;return s=(s-r)/60,s?`${N(s)}:${N(r)}s`:`${N(r)}:00f`}function P(t,e){return Math.round(Math.round(t/e)*e)}function T(t){const e=new Path2D;let i=!0;for(let n=t.firstElementChild;null!=n;n=n.nextElementSibling){const t=A(n);if(!t)continue;const s=n.transform?.baseVal?.consolidate()?.matrix;e.addPath(t,s),i=!1}return i?null:e}function A(t){if(t instanceof SVGPathElement)return new Path2D(t.getAttribute("d"));if(t instanceof SVGRectElement){const e=new Path2D;let i=D(t.rx),n=D(t.ry);return i&&n?(i!==n&&(i=Math.sqrt(i*n)),e.roundRect(D(t.x),D(t.y),D(t.width),D(t.height),i)):e.rect(D(t.x),D(t.y),D(t.width),D(t.height)),e}if(t instanceof SVGCircleElement){const e=new Path2D;return e.ellipse(D(t.cx),D(t.cy),D(t.r),D(t.r),0,0,2*Math.PI),e}if(t instanceof SVGEllipseElement){const e=new Path2D;return e.ellipse(D(t.cx),D(t.cy),D(t.rx),D(t.ry),0,0,2*Math.PI),e}if(t instanceof SVGLineElement){const e=new Path2D;return e.moveTo(D(t.x1),D(t.y1)),e.lineTo(D(t.x2),D(t.y2)),e}if(t instanceof SVGPolygonElement||t instanceof SVGPolylineElement){const e=new Path2D,i=t.points.length;let n=t.points.getItem(0);e.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=t.points.getItem(s),e.lineTo(n.x,n.y);return t instanceof SVGPolygonElement&&e.closePath(),e}return t instanceof SVGGElement?T(t):null}function D(t){return t.baseVal.value}function E(t,e){return Math.abs(t*e/function(t,e){let i;for(;e;)i=e,e=t%e,t=i;return t||1}(t,e))}function*O(t,e){e&&(yield 1);const i=Math.sqrt(t);for(let e=2;e<=i;e++)t%e==0&&(yield e);e&&(yield t)}const W=new Map,R=new Map,B=new Map,U=new Map,$=new Map,F="#",V="=";let H,G,Z=2e3;function Y(t,e,i,n){K(t,e,i,n,!1)}function Q(t,e){R.set(t,e)}function J(...t){for(const e of t){let t=null,i=null;Array.isArray(e)?(i=e[0],t=e[1]):i=e,Y(i,null,null,t)}}function q(t,e,...i){const n="string"==typeof t?t:function(t){if(W.has(t))return W.get(t)[0];throw new Error(`${t.name} is not a registered serializable`)}(t);e??=R.get("name");for(const t of i)B.has(t)||B.set(t,new Map),B.get(t).set(n,e)}function K(t,e,i,n,s){if("function"==typeof t.prototype.toJSON){if(e)throw new Error(`${t.name} must NOT provide a serialization function because .toJSON() method is defined`)}else if(!e)throw new Error(`${t.name} must provide a serialization function or have .toJSON() method defined`);if(n??=t.name,!s&&R.has(n))throw new Error(`${n} is already registered! Use overwrite() to overwrite a registered serializer.`);W.set(t,[n,e]),i||(i="function"==typeof t.fromJSON?t.fromJSON.bind(t):function(e){return Array.isArray(e)?new t(...e):new t(e)}),R.set(n,i)}function X(t,e){const i=this[t]?.constructor;if(!i||!W.has(i))return e;let[n,s]=W.get(i);return U.has(n)&&(n=U.get(n)),s&&(e=s(e,t)),{[F]:n,[V]:e}}function tt(t,e){return JSON.stringify(t,X,e)}function et(t,e){if(null==e||"object"!=typeof e)return e;if(F in e&&V in e){let t=e[F];if($.has(t)&&(t=$.get(t)),H?.has(t))return H.get(t)(e[V],G);if(R.has(t))return R.get(t)(e[V],G)}return e}function it(t,e,i){H=null!=i&&B.has(i)?B.get(i):null,G=e;try{return JSON.parse(t,et)}finally{H=G=null}}function nt(t){return[...t]}Y(Set,nt,(t=>new Set(t))),Y(Map,nt,(t=>new Map(t)));const st=Object.freeze([]);function rt(t,e,i){const n=t.length-1;if(e<0||e>n||0===n||e===i||0===e&&i<0||e===n&&i>n)return!1;const s=t[e];return t.splice(e,1),t.splice(i,0,s),!0}function ot(t,e){return t-e}function at(t,e){return e-t}const lt={type:"application/json"};async function ct(t,e){const i=t.getReader(),n=[];for(;;){const{value:t,done:s}=await i.read();if(s)return new Blob(n,e);n.push(t)}}async function ut(t){const e=t.getReader();let i=null;for(;;){const{value:t,done:n}=await e.read();if(n)return i??new Uint8Array(0);if(null==i){i=new Uint8Array(t);continue}const s=new Uint8Array(i.length+t.byteLength);s.set(i),s.set(t,i.length),i=s}}function ht(t,e){return new ReadableStream({start(e){e.enqueue(t),e.close()}},e)}let dt;function ft(t,e){return(dt??=new TextDecoder).decode(t,e)}function pt(t,e="deflate"){return t.pipeThrough(new CompressionStream(e))}function gt(t,e="deflate"){return t.pipeThrough(new DecompressionStream(e))}async function mt(...t){return await ut(function(...t){return pt(new Blob(t,lt).stream())}(...t))}async function vt(t){return async function(t){return(await async function(t){return ct(gt(t),lt)}(t)).text()}(ht(t))}const yt={type:"application/json"};async function xt(t){if(!t.startsWith("data:image/"))return null;try{return(await fetch(t)).blob()}catch{return null}}class bt extends EventTarget{#u;#h;#d;#f;constructor(t,e,i=!0){super(),this.generationId=0,this.#h=new Map,this.#d=new Map,this.#f=!1,this.#u=t instanceof HTMLElement?getComputedStyle(t):t,this.varPrefix=e,this.#f=i,this.updateInternalValues()}update(){this.#h.clear(),this.#d.clear(),this.generationId++,this.updateInternalValues(),this.dispatchEvent(new Event("update"))}getColor(t,e){if(this.#h.has(t))return this.#h.get(t);let i;const n=this.#u.getPropertyValue(this.#f?`${this.varPrefix}${t}-color`:this.varPrefix+t);return i=null==n||""===n?e||this.parse("#000"):this.parse(n),this.#h.set(t,i),i}getSize(t,e=0){if(this.#d.has(t))return this.#d.get(t);let n=this.#u.getPropertyValue(this.#f?`${this.varPrefix}${t}-size`:this.varPrefix+t);return""===n?n=e||0:(n=parseFloat(n),n=i(n)?n:e||0),this.#d.set(t,n),n}}const wt=function(){let t=null,e=null;function i(){return e||(e=new ResizeObserver((function(i){for(const n of i)t.has(n.target)?t.get(n.target)(n):e.unobserve(n.target)})),t=new WeakMap,e)}const n={box:"device-pixel-content-box"};return{isObserved:e=>null!=t&&t.has(e),observe(e,s,r){const o=i();t.set(e,s),o.observe(e,r?{box:r}:n)},unobserve(i){e&&(t.delete(i),e.unobserve(i))},disconnect(){e&&(e.disconnect(),t=null)}}}();function Mt(t){const e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("target","_blank"),e.click()}function St(t,e,i,n=1){t.style.width=e/n+"px",t.style.height=i/n+"px",t.width=e,t.height=i}function kt(t,e){if(t===e)return!0;if(null==t)return null==e;if("object"!=typeof t||"object"!=typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;const i=t.length;for(let n=0;n<i;n++)if(!kt(t[n],e[n]))return!1;return!0}if("function"==typeof t.equals)return null!=e&&t.equals(e);const i=Object.keys(t);if(Object.keys(e).length!==i.length)return!1;for(const n of i)if(!(n in e)||!kt(t[n],e[n]))return!1;return!0}function _t(t){return null!=t}function It(t){return t}const Ct=crypto.randomUUID.bind(crypto);function Lt(t){let e=!0;const i=()=>{e=!0,t()};return()=>{e&&(e=!1,queueMicrotask(i))}}const Nt=Array.isArray.bind(Array),jt=async function(){}.constructor;function zt(t){return t instanceof jt}function Pt(t){return t.toString(16).padStart(2,"0")}async function Tt(...t){return await navigator.clipboard.write(t),!0}async function At(){return"denied"!==(await navigator.permissions.query({name:"clipboard-read"})).state}ArrayBuffer.isView.bind(ArrayBuffer);const Dt=Math.PI/180,Et=180/Math.PI;function Ot(t,e){(function(t){return"string"==typeof t&&-1!==t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var i=function(t){return"string"==typeof t&&-1!==t.indexOf("%")}(t);return t=360===e?t:Math.min(e,Math.max(0,parseFloat(t))),i&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:t=360===e?(t<0?t%e+e:t%e)/parseFloat(String(e)):t%e/parseFloat(String(e))}function Wt(t){return Math.min(1,Math.max(0,t))}function Rt(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Bt(t){return t<=1?"".concat(100*Number(t),"%"):t}function Ut(t){return 1===t.length?"0"+t:String(t)}function $t(t,e,i){t=Ot(t,255),e=Ot(e,255),i=Ot(i,255);var n=Math.max(t,e,i),s=Math.min(t,e,i),r=0,o=0,a=(n+s)/2;if(n===s)o=0,r=0;else{var l=n-s;switch(o=a>.5?l/(2-n-s):l/(n+s),n){case t:r=(e-i)/l+(e<i?6:0);break;case e:r=(i-t)/l+2;break;case i:r=(t-e)/l+4}r/=6}return{h:r,s:o,l:a}}function Ft(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*i*(e-t):i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function Vt(t,e,i){t=Ot(t,255),e=Ot(e,255),i=Ot(i,255);var n=Math.max(t,e,i),s=Math.min(t,e,i),r=0,o=n,a=n-s,l=0===n?0:a/n;if(n===s)r=0;else{switch(n){case t:r=(e-i)/a+(e<i?6:0);break;case e:r=(i-t)/a+2;break;case i:r=(t-e)/a+4}r/=6}return{h:r,s:l,v:o}}function Ht(t,e,i,n){var s=[Ut(Math.round(t).toString(16)),Ut(Math.round(e).toString(16)),Ut(Math.round(i).toString(16))];return n&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function Gt(t){return Math.round(255*parseFloat(t)).toString(16)}function Zt(t){return Yt(t)/255}function Yt(t){return parseInt(t,16)}var Qt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Jt(t){var e={r:0,g:0,b:0},i=1,n=null,s=null,r=null,o=!1,a=!1;return"string"==typeof t&&(t=function(t){if(0===(t=t.trim().toLowerCase()).length)return!1;var e=!1;if(Qt[t])t=Qt[t],e=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0,format:"name"};var i=te.rgb.exec(t);return i?{r:i[1],g:i[2],b:i[3]}:(i=te.rgba.exec(t))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=te.hsl.exec(t))?{h:i[1],s:i[2],l:i[3]}:(i=te.hsla.exec(t))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=te.hsv.exec(t))?{h:i[1],s:i[2],v:i[3]}:(i=te.hsva.exec(t))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=te.hex8.exec(t))?{r:Yt(i[1]),g:Yt(i[2]),b:Yt(i[3]),a:Zt(i[4]),format:e?"name":"hex8"}:(i=te.hex6.exec(t))?{r:Yt(i[1]),g:Yt(i[2]),b:Yt(i[3]),format:e?"name":"hex"}:(i=te.hex4.exec(t))?{r:Yt(i[1]+i[1]),g:Yt(i[2]+i[2]),b:Yt(i[3]+i[3]),a:Zt(i[4]+i[4]),format:e?"name":"hex8"}:!!(i=te.hex3.exec(t))&&{r:Yt(i[1]+i[1]),g:Yt(i[2]+i[2]),b:Yt(i[3]+i[3]),format:e?"name":"hex"}}(t)),"object"==typeof t&&(ee(t.r)&&ee(t.g)&&ee(t.b)?(e=function(t,e,i){return{r:255*Ot(t,255),g:255*Ot(e,255),b:255*Ot(i,255)}}(t.r,t.g,t.b),o=!0,a="%"===String(t.r).substr(-1)?"prgb":"rgb"):ee(t.h)&&ee(t.s)&&ee(t.v)?(n=Bt(t.s),s=Bt(t.v),e=function(t,e,i){t=6*Ot(t,360),e=Ot(e,100),i=Ot(i,100);var n=Math.floor(t),s=t-n,r=i*(1-e),o=i*(1-s*e),a=i*(1-(1-s)*e),l=n%6;return{r:255*[i,o,r,r,a,i][l],g:255*[a,i,i,o,r,r][l],b:255*[r,r,a,i,i,o][l]}}(t.h,n,s),o=!0,a="hsv"):ee(t.h)&&ee(t.s)&&ee(t.l)&&(n=Bt(t.s),r=Bt(t.l),e=function(t,e,i){var n,s,r;if(t=Ot(t,360),e=Ot(e,100),i=Ot(i,100),0===e)s=i,r=i,n=i;else{var o=i<.5?i*(1+e):i+e-i*e,a=2*i-o;n=Ft(a,o,t+1/3),s=Ft(a,o,t),r=Ft(a,o,t-1/3)}return{r:255*n,g:255*s,b:255*r}}(t.h,n,r),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(i=t.a)),i=Rt(i),{ok:o,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:i}}var qt="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),Kt="[\\s|\\(]+(".concat(qt,")[,|\\s]+(").concat(qt,")[,|\\s]+(").concat(qt,")\\s*\\)?"),Xt="[\\s|\\(]+(".concat(qt,")[,|\\s]+(").concat(qt,")[,|\\s]+(").concat(qt,")[,|\\s]+(").concat(qt,")\\s*\\)?"),te={CSS_UNIT:new RegExp(qt),rgb:new RegExp("rgb"+Kt),rgba:new RegExp("rgba"+Xt),hsl:new RegExp("hsl"+Kt),hsla:new RegExp("hsla"+Xt),hsv:new RegExp("hsv"+Kt),hsva:new RegExp("hsva"+Xt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function ee(t){return Boolean(te.CSS_UNIT.exec(String(t)))}var ie=function(){function t(e,i){var n;if(void 0===e&&(e=""),void 0===i&&(i={}),e instanceof t)return e;"number"==typeof e&&(e=function(t){return{r:t>>16,g:(65280&t)>>8,b:255&t}}(e)),this.originalInput=e;var s=Jt(e);this.originalInput=e,this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(n=i.format)&&void 0!==n?n:s.format,this.gradientType=i.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=s.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},t.prototype.getLuminance=function(){var t=this.toRgb(),e=t.r/255,i=t.g/255,n=t.b/255;return.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(t){return this.a=Rt(t),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){return 0===this.toHsl().s},t.prototype.toHsv=function(){var t=Vt(this.r,this.g,this.b);return{h:360*t.h,s:t.s,v:t.v,a:this.a}},t.prototype.toHsvString=function(){var t=Vt(this.r,this.g,this.b),e=Math.round(360*t.h),i=Math.round(100*t.s),n=Math.round(100*t.v);return 1===this.a?"hsv(".concat(e,", ").concat(i,"%, ").concat(n,"%)"):"hsva(".concat(e,", ").concat(i,"%, ").concat(n,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var t=$t(this.r,this.g,this.b);return{h:360*t.h,s:t.s,l:t.l,a:this.a}},t.prototype.toHslString=function(){var t=$t(this.r,this.g,this.b),e=Math.round(360*t.h),i=Math.round(100*t.s),n=Math.round(100*t.l);return 1===this.a?"hsl(".concat(e,", ").concat(i,"%, ").concat(n,"%)"):"hsla(".concat(e,", ").concat(i,"%, ").concat(n,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(t){return void 0===t&&(t=!1),Ht(this.r,this.g,this.b,t)},t.prototype.toHexString=function(t){return void 0===t&&(t=!1),"#"+this.toHex(t)},t.prototype.toHex8=function(t){return void 0===t&&(t=!1),function(t,e,i,n,s){var r=[Ut(Math.round(t).toString(16)),Ut(Math.round(e).toString(16)),Ut(Math.round(i).toString(16)),Ut(Gt(n))];return s&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))&&r[3].startsWith(r[3].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}(this.r,this.g,this.b,this.a,t)},t.prototype.toHex8String=function(t){return void 0===t&&(t=!1),"#"+this.toHex8(t)},t.prototype.toHexShortString=function(t){return void 0===t&&(t=!1),1===this.a?this.toHexString(t):this.toHex8String(t)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var t=Math.round(this.r),e=Math.round(this.g),i=Math.round(this.b);return 1===this.a?"rgb(".concat(t,", ").concat(e,", ").concat(i,")"):"rgba(".concat(t,", ").concat(e,", ").concat(i,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var t=function(t){return"".concat(Math.round(100*Ot(t,255)),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var t=function(t){return Math.round(100*Ot(t,255))};return 1===this.a?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var t="#"+Ht(this.r,this.g,this.b,!1),e=0,i=Object.entries(Qt);e<i.length;e++){var n=i[e],s=n[0];if(t===n[1])return s}return!1},t.prototype.toString=function(t){var e=Boolean(t);t=null!=t?t:this.format;var i=!1,n=this.a<1&&this.a>=0;return e||!n||!t.startsWith("hex")&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex4"===t&&(i=this.toHex8String(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString()):"name"===t&&0===this.a?this.toName():this.toRgbString()},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){void 0===e&&(e=10);var i=this.toHsl();return i.l+=e/100,i.l=Wt(i.l),new t(i)},t.prototype.brighten=function(e){void 0===e&&(e=10);var i=this.toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(-e/100*255))),i.g=Math.max(0,Math.min(255,i.g-Math.round(-e/100*255))),i.b=Math.max(0,Math.min(255,i.b-Math.round(-e/100*255))),new t(i)},t.prototype.darken=function(e){void 0===e&&(e=10);var i=this.toHsl();return i.l-=e/100,i.l=Wt(i.l),new t(i)},t.prototype.tint=function(t){return void 0===t&&(t=10),this.mix("white",t)},t.prototype.shade=function(t){return void 0===t&&(t=10),this.mix("black",t)},t.prototype.desaturate=function(e){void 0===e&&(e=10);var i=this.toHsl();return i.s-=e/100,i.s=Wt(i.s),new t(i)},t.prototype.saturate=function(e){void 0===e&&(e=10);var i=this.toHsl();return i.s+=e/100,i.s=Wt(i.s),new t(i)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var i=this.toHsl(),n=(i.h+e)%360;return i.h=n<0?360+n:n,new t(i)},t.prototype.mix=function(e,i){void 0===i&&(i=50);var n=this.toRgb(),s=new t(e).toRgb(),r=i/100;return new t({r:(s.r-n.r)*r+n.r,g:(s.g-n.g)*r+n.g,b:(s.b-n.b)*r+n.b,a:(s.a-n.a)*r+n.a})},t.prototype.analogous=function(e,i){void 0===e&&(e=6),void 0===i&&(i=30);var n=this.toHsl(),s=360/i,r=[this];for(n.h=(n.h-(s*e>>1)+720)%360;--e;)n.h=(n.h+s)%360,r.push(new t(n));return r},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){void 0===e&&(e=6);for(var i=this.toHsv(),n=i.h,s=i.s,r=i.v,o=[],a=1/e;e--;)o.push(new t({h:n,s,v:r})),r=(r+a)%1;return o},t.prototype.splitcomplement=function(){var e=this.toHsl(),i=e.h;return[this,new t({h:(i+72)%360,s:e.s,l:e.l}),new t({h:(i+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var i=this.toRgb(),n=new t(e).toRgb(),s=i.a+n.a*(1-i.a);return new t({r:(i.r*i.a+n.r*n.a*(1-i.a))/s,g:(i.g*i.a+n.g*n.a*(1-i.a))/s,b:(i.b*i.a+n.b*n.a*(1-i.a))/s,a:s})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var i=this.toHsl(),n=i.h,s=[this],r=360/e,o=1;o<e;o++)s.push(new t({h:(n+o*r)%360,s:i.s,l:i.l}));return s},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();let ne,se=class t{#p=null;constructor(t=0,e=0,i=0,n=1){this.r=t,this.g=e,this.b=i,this.a=n??1,this.code=(255*this.a<<24|t<<16|e<<8|i)>>>0}get rgba(){return this.#p||(this.#p=`rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`),this.#p}clone(){return this}inverted(){return new t(255-this.r,255-this.g,255-this.b,this.a)}equals(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}interpolate(e,i=.5){return i<=0?this:i>=1?e:new t(re(this.r,e.r,i),re(this.g,e.g,i),re(this.b,e.b,i),function(t,e,i=.5){return null==t&&(t=1),null==e&&(e=1),n(o(t+i*(e-t)),0,1)}(this.a,e.a,i))}toArray(){return[this.r,this.g,this.b,this.a]}toJSON(){return this.code}toIntArray(){return[this.r,this.g,this.b,255*this.a]}toFloatArray(){return[this.r/255,this.g/255,this.b/255,this.a]}toString(){return this.rgba}withOpacity(e){return e=n(e,0,1),this.a===e?this:new t(this.r,this.g,this.b,e)}withAddedOpacity(e){return e=n(e,0,1),0===this.a||1===e?this:new t(this.r,this.g,this.b,this.a*e)}static fromCode(e){return new t(e>>16&255,e>>8&255,255&e,(e>>24&255)/255)}static parse(e,i){if("number"==typeof e)return new t(e>>16&255,e>>8&255,255&e,i??(e>>24&255)/255);if(e instanceof t)return null!=i&&e.a!==i?new t(e.r,e.g,e.b,i):e;const n=Jt(e);return n.ok?new t(n.r,n.g,n.b,i??n.a):t.transparent}static fromHSVA(e,i,n,s){const[r,o,a]=function(t,e,i){t=m(t)/60;const n=i*e,s=n*(1-Math.abs(t%2-1)),r=i-n,o=[r,r,r];return t<1?(o[0]+=n,o[1]+=s):t<2?(o[0]+=s,o[1]+=n):t<3?(o[1]+=n,o[2]+=s):t<4?(o[1]+=s,o[2]+=n):t<5?(o[0]+=s,o[2]+=n):t<6&&(o[0]+=n,o[2]+=s),o}(e,i,n);return new t(255*r,255*o,255*a,s??1)}static fromHSLA(e,i,n,s){const[r,o,a]=function(t,e,i){t=m(t)/60;const n=e*(1-Math.abs(2*i-1)),s=n*(1-Math.abs(t%2-1)),r=i-n/2,o=[r,r,r];return t<1?(o[0]+=n,o[1]+=s):t<2?(o[0]+=s,o[1]+=n):t<3?(o[1]+=n,o[2]+=s):t<4?(o[1]+=s,o[2]+=n):t<5?(o[0]+=s,o[2]+=n):t<6&&(o[0]+=n,o[2]+=s),o}(e,i,n);return new t(255*r,255*o,255*a,s??1)}static{this.transparent=new t(0,0,0,0)}static{this.white=new t(255,255,255)}static{this.black=new t(0,0,0)}static{this.red=new t(255,0,0)}static{this.green=new t(0,255,0)}static{this.blue=new t(0,0,255)}static{this.gray=new t(128,128,128)}};function re(t,e,i=.5){return n(Math.round(t+i*(e-t)),0,255)}class oe{constructor(t=11,e=1,i=!1){this.blend=t,this.opacity=n(e,0,1),this.isolate=i}toJSON(){return[this.blend,this.opacity,this.isolate]}clone(){return this}get needsLayer(){return this.isolate||1!==this.opacity||11!==this.blend}get isVisible(){return this.opacity>0}get isInvisible(){return 0===this.opacity}preparePaint(t){return!!this.needsLayer&&(t.isAntiAlias=!0,t.alpha=this.opacity,t.blendMode=(e=this.blend,ne??=new Map([[0,Skia.SkBlendMode.Color],[1,Skia.SkBlendMode.ColorBurn],[2,Skia.SkBlendMode.ColorDodge],[3,Skia.SkBlendMode.Darken],[4,Skia.SkBlendMode.Difference],[5,Skia.SkBlendMode.Exclusion],[6,Skia.SkBlendMode.HardLight],[7,Skia.SkBlendMode.Hue],[8,Skia.SkBlendMode.Lighten],[9,Skia.SkBlendMode.Luminosity],[10,Skia.SkBlendMode.Multiply],[11,Skia.SkBlendMode.SrcOver],[12,Skia.SkBlendMode.Overlay],[13,Skia.SkBlendMode.Saturation],[14,Skia.SkBlendMode.Screen],[15,Skia.SkBlendMode.SoftLight]]),ne.get(e)??Skia.SkBlendMode.SrcOver),!0);var e}equals(t){return this.blend===t.blend&&this.opacity===t.opacity&&this.isolate===t.isolate}static{this.NormalComposition=new oe(11,1)}static{this.NormalIsolatedComposition=new oe(11,1,!0)}}function ae(t){return 1===t?3:3===t?1:t}let le=class{constructor(t,e,i=0){this.x=t,this.y=e,this.angle=i}equals(t){return t.x===this.x&&t.y===this.y&&t.angle===this.angle}clone(){return this}},ce=class t{static{this.ZERO=new t(0,0)}static{this.UNIT=new t(1,1)}constructor(t,e){this.x=t,this.y=e}get direction(){return Math.atan2(this.y,this.x)}get angle(){return this.direction*Et}getDirectionTo(t){return Math.atan2(this.y-t.y,this.x-t.x)}getAngleTo(t){return this.getDirectionTo(t)*Et}getPositiveAngleTo(t){return(this.getDirectionTo(t)*Et+180)%360}getMiddle(e){return new t((this.x+e.x)/2,(this.y+e.y)/2)}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}get isZero(){return 0===this.x&&0===this.y}get isUnit(){return a(this.length,1)}isPerpendicularTo(t){return a(this.dot(t),0)}distanceTo(e){return t.distance(this,e)}rounded(){return Number.isInteger(this.x)&&Number.isInteger(this.y)?this:new t(Math.round(this.x),Math.round(this.y))}shifted(e,i){return new t(this.x+e,this.y+i)}add(e){return new t(this.x+e.x,this.y+e.y)}sub(e){return new t(this.x-e.x,this.y-e.y)}mul(e){return new t(this.x*e.x,this.y*e.y)}div(e){return new t(this.x/e.x,this.y/e.y)}scale(e){return new t(e*this.x,e*this.y)}project(e,i){const n=i.x-e.x,s=i.y-e.y,r=(n*(this.x-e.x)+s*(this.y-e.y))/(e.x**2+e.y**2);return new t(e.x+n*r,e.y+s*r)}mirror(e){return new t(2*e.x-this.x,2*e.y-this.y)}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}negate(){return this.isZero?this:new t(-this.x,-this.y)}toLength(e){return this.isZero?new t(0,0):this.scale(e/this.length)}toUnit(){return this.toLength(1)}equals(t){return this.x===t.x&&this.y===t.y}clone(){return this}toJSON(){return[this.x,this.y]}static fromObject(e){return new t(e.x,e.y)}static fromAngle(t,e=1,i){return this.fromDirection(t*Dt,e,i)}static fromDirection(e,i=1,n){return n?new t(n.x+i*Math.cos(e),n.y+i*Math.sin(e)):new t(i*Math.cos(e),i*Math.sin(e))}static distance(t,e){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}static center(e,i){return new t((e.x+i.x)/2,(e.y+i.y)/2)}static isSamePoint(t,e){return t.x===e.x&&t.y===e.y}};function ue(t,e,i,n){return Math.sqrt((i-t)**2+(n-e)**2)}function he(t,e,i){return t+(e-t)*i}function de(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function fe(t,e,i){return{x:he(t.x,e.x,i),y:he(t.y,e.y,i)}}function pe(t,e,i,n=3){const s=i.x-e.x,r=i.y-e.y;if(0===s&&0===r)return null;const o=((t.x-e.x)*s+(t.y-e.y)*r)/(s*s+r*r),l=e.x+o*s,c=e.y+o*r;if(ue(t.x,t.y,l,c)>n)return null;const u=ue(e.x,e.y,l,c)/ue(e.x,e.y,i.x,i.y);return u<0||u>1||!a(l,he(e.x,i.x,u))||!a(c,he(e.y,i.y,u))?null:u}function ge(t,e,i,n){const s=i.x-t.x,r=i.y-t.y,o=e.x-t.x,a=e.y-i.y,l=n.x-i.x,c=n.y-i.y,u=s*a-r*o;if(0===u)return s<0!=i.x-e.x<0||r<0!=i.y-e.y<0;const h=o*c-a*l;if(0===h)return!1;const d=(s*c-r*l)/h,f=u/h;return d>=0&&d<=1&&f>=0&&f<=1}function me(t,e,i=3){let n,s=Number.POSITIVE_INFINITY;const r=i**2;let o,a,l,c;for(let i=1;i<100;i++)if(l=i/100,c=e(l),o=ve(t,c),o<=s){if(o<=r&&o<=1e-5)return l;s=o,a=l,n=c}let u=pe(t,e(a-.01),n,i),h=pe(t,n,e(a+.01),i);return null==u?null==h?null:a+h/100:null==h?a-(1-u)/100:(u=a-(1-u)/100,h=a+h/100,ve(t,e(u))<ve(t,e(h))?u:h)}function ve(t,e){return(e.x-t.x)**2+(e.y-t.y)**2}function ye(t,e,i){return{x:t.x+(t.x-e.x)/i,y:t.y+(t.y-e.y)/i}}function xe(t,e,i){return{x:i*t.x+(1-i)*e.x,y:i*t.y+(1-i)*e.y}}function be(t,e){const i=(1-t)**e;return i/(i+t**e)}function we(t,e){return Math.abs(1-1/(t**e+(1-t)**e))}function Me(t,e,i,n){const s=1-n;return s*s*t+2*s*n*e+n*n*i}function Se(t,e,i,n){return 2*(1-n)*(e-t)+2*n*(i-e)}function ke(t,e,i){const n=e-t,s=i-e;if(n===s)return null;const r=n/(n-s);return r<0||r>1?null:r}function*_e(t,e,i){yield t;const n=ke(t.x,e.x,i.x);null!=n&&(yield Ce(t,e,i,n));const s=ke(t.y,e.y,i.y);null!=s&&n!==s&&(yield Ce(t,e,i,s)),yield i}function Ie(t,e,i,n){return Math.atan2(Se(t.y,e.y,i.y,n),Se(t.x,e.x,i.x,n))}function Ce(t,e,i,n){return{x:Me(t.x,e.x,i.x,n),y:Me(t.y,e.y,i.y,n)}}function Le(t,e,i,n){return{x:Me(t.x,e.x,i.x,n),y:Me(t.y,e.y,i.y,n),angle:Ie(t,e,i,n)*Et}}function Ne(t,e,i,n=1){if(n<=0)return 0;n>1&&(n=1);const s=t.x-2*e.x+i.x,r=t.y-2*e.y+i.y,o=2*e.x-2*t.x,a=2*e.y-2*t.y,l=4*(s*s+r*r),c=4*(s*o+r*a)/(2*l),u=(o*o+a*a)/l,h=n+c,d=u-c*c,f=Math.sqrt(h*h+d),p=Math.sqrt(u);return 0===d?.5*Math.sqrt(l)*(h*f-c*p):.5*Math.sqrt(l)*(h*f-c*p+d*Math.log(Math.abs((h+f)/(c+p))))}function je(t,e,i,n,s=3){return t.x+s<Math.min(e.x,i.x,n.x)||t.x-s>Math.max(e.x,i.x,n.x)||t.y+s<Math.min(e.y,i.y,n.y)||t.y-s>Math.max(e.y,i.y,n.y)?null:me(t,(t=>Ce(e,i,n,t)),s)}function ze(t,e,i,n){const s=xe(t,i,be(n,2)),r=we(n,2);return t=>ye(t,s,r)}function Pe(t,e,i,n,s){const r=1-n;return s?{x:r*e.x+n*i.x,y:r*e.y+n*i.y}:{x:r*t.x+n*e.x,y:r*t.y+n*e.y}}function Te(t,e,i,n,s){s??=Ne(t,e,i,1);const r=[];let o;for(let s=1;s<n;s++)o=s/n,r.push(Ne(t,e,i,o),o);return r.push(s,1),r}var Ae=[.0486909570091397,-.0243502926634244,.0486909570091397,.0243502926634244,.0485754674415034,-.072993121787799,.0485754674415034,.072993121787799,.048344762234803,-.1214628192961206,.048344762234803,.1214628192961206,.0479993885964583,-.1696444204239928,.0479993885964583,.1696444204239928,.0475401657148303,-.2174236437400071,.0475401657148303,.2174236437400071,.04696818281621,-.2646871622087674,.04696818281621,.2646871622087674,.0462847965813144,-.311322871990211,.0462847965813144,.311322871990211,.0454916279274181,-.3572201583376681,.0454916279274181,.3572201583376681,.0445905581637566,-.4022701579639916,.0445905581637566,.4022701579639916,.0435837245293235,-.4463660172534641,.0435837245293235,.4463660172534641,.0424735151236536,-.489403145707053,.0424735151236536,.489403145707053,.0412625632426235,-.5312794640198946,.0412625632426235,.5312794640198946,.0399537411327203,-.571895646202634,.0399537411327203,.571895646202634,.0385501531786156,-.6111553551723933,.0385501531786156,.6111553551723933,.03705512854024,-.6489654712546573,.03705512854024,.6489654712546573,.0354722132568824,-.6852363130542333,.0354722132568824,.6852363130542333,.0338051618371416,-.7198818501716109,.0338051618371416,.7198818501716109,.0320579283548516,-.7528199072605319,.0320579283548516,.7528199072605319,.0302346570724025,-.7839723589433414,.0302346570724025,.7839723589433414,.0283396726142595,-.8132653151227975,.0283396726142595,.8132653151227975,.0263774697150547,-.8406292962525803,.0263774697150547,.8406292962525803,.0243527025687109,-.8659993981540928,.0243527025687109,.8659993981540928,.0222701738083833,-.8893154459951141,.0222701738083833,.8893154459951141,.0201348231535302,-.9105221370785028,.0201348231535302,.9105221370785028,.0179517157756973,-.9295691721319396,.0179517157756973,.9295691721319396,.0157260304760247,-.9464113748584028,.0157260304760247,.9464113748584028,.0134630478967186,-.9610087996520538,.0134630478967186,.9610087996520538,.0111681394601311,-.973326827789911,.0111681394601311,.973326827789911,.0088467598263639,-.983336253884626,.0088467598263639,.983336253884626,.0065044579689784,-.9910133714767443,.0065044579689784,.9910133714767443,.0041470332605625,-.9963401167719553,.0041470332605625,.9963401167719553,.0017832807216964,-.9993050417357722,.0017832807216964,.9993050417357722];function De(t,e,i,n,s){return s**3*(n-t+3*(e-i))+3*s*s*(t+i-2*e)+3*s*(e-t)+t}function Ee(t,e,i,n,s){const r=1-s;return 3*(r*r*(e-t)+2*r*s*(i-e)+s*s*(n-i))}function Oe(t,e,i,n){const s=function(t,e,i){if(0===t)return 0===e?null:-i/e;if(0===e){const e=-i/t;return e>=0?Math.sqrt(e):null}let n=e**2-4*t*i;return n<0?null:(n=Math.sqrt(n),[(n-e)/(2*t),-(e+n)/(2*t)].sort(ot))}(n-t+3*(e-i),2*(t-2*e+i),e-t);return null===s?null:"number"==typeof s?s<0||s>1?null:s:s[0]<0||s[0]>1?s[1]<0||s[1]>1?null:s[1]:s[1]<0||s[1]>1?s[0]:s}function We(t,e,i,n,s){const r=Oe(e,i,n,s);if(null!=r)if("number"!=typeof r)for(const e of r)t.add(e);else t.add(r)}let Re;function Be(t,e,i,n,s){return Math.atan2(Ee(t.y,e.y,i.y,n.y,s),Ee(t.x,e.x,i.x,n.x,s))}function Ue(t,e,i,n,s){return{x:De(t.x,e.x,i.x,n.x,s),y:De(t.y,e.y,i.y,n.y,s)}}function $e(t,e,i,n,s=1){if(s<=0)return 0;s>1&&(s=1),s/=2;let r,o=0;for(let a=0,l=Ae.length;a<l;a+=2)r=s*(Ae[a+1]+1),o+=Math.sqrt(Ee(t.x,e.x,i.x,n.x,r)**2+Ee(t.y,e.y,i.y,n.y,r)**2)*Ae[a];return s*o}function Fe(t,e,i,n=2/3){return[fe(t,e,n),fe(e,i,n)]}class Ve{static{this.ZERO=new Ve(0,0,0,0)}#g;#m;#v;#y;#x;constructor(t,e,i,n){i<0&&(t+=i,i=-i),n<0&&(e+=n,n=-n),this.x=t,this.y=e,this.width=i,this.height=n,this.top=e,this.bottom=e+n,this.left=t,this.right=t+i}clone(){return this}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}getPointAtPosition(t,e,i,n){switch(i&&(t=ae(t),e=ae(e)),e){case 1:switch(t){case 1:return this.topLeft;case 3:return this.topRight;case 2:return this.topMiddle;case 0:return n?new ce(n.x,this.top):null}return null;case 3:switch(t){case 1:return this.bottomLeft;case 3:return this.bottomRight;case 2:return this.bottomMiddle;case 0:return n?new ce(n.x,this.bottom):null}return null;case 2:switch(t){case 1:return this.middleLeft;case 3:return this.middleRight;case 2:return this.middle;case 0:return n?new ce(n.x,this.middleY):null}return null;case 0:switch(t){case 1:return new ce(this.left,n.y);case 3:return new ce(this.right,n.y);case 2:return new ce(this.middleX,n.y);case 0:return n?new ce(n.x,n.y):null}return null}return null}get area(){return this.width*this.height}ensureMinSize(t){return this.width>=t.width&&this.height>=t.height?this:new Ve(this.x,this.y,Math.max(this.width,t.width),Math.max(this.height,t.height))}intersects(t){return!(this.right<t.left||t.right<this.left||this.bottom<t.top||t.bottom<this.top)}intersection(t){const e=Math.max(this.x,t.x),i=Math.min(this.right,t.right),n=Math.max(this.y,t.y),s=Math.min(this.bottom,t.bottom);return e>=i||n>=s?null:new Ve(e,n,i-e,s-n)}intersectsLine(t,e,i=!0){return!(!i||!this.contains(t.x,t.y)&&!this.contains(e.x,e.y))||ge(t,e,this.bottomLeft,this.topLeft)||ge(t,e,this.topLeft,this.topRight)||ge(t,e,this.topRight,this.bottomRight)||ge(t,e,this.bottomRight,this.bottomLeft)}intersectsPolyline(t,e,i=!0){const n=t.length-1;if(n<0)return!1;if(this.contains(t[0].x,t[0].y))return!0;if(0===n)return!1;for(let e=1;e<=n;e++)if(this.contains(t[e].x,t[e].y)||this.intersectsLine(t[e-1],t[e],!1))return!0;return!(!e||!this.intersectsLine(t[n],t[0],!1))}containsPoint(t){return this.contains(t.x,t.y)}containsPoints(t){for(const e of t)if(!this.contains(e.x,e.y))return!1;return!0}containsLine(t,e){return this.contains(t.x,t.y)&&this.contains(e.x,e.y)}contains(t,e,i=0){return t+i>=this.left&&t-i<=this.right&&e+i>=this.top&&e-i<=this.bottom}containsRect(t){return t.left>=this.left&&t.right<=this.right&&t.top>=this.top&&t.bottom<=this.bottom}containsQuad(t){const e=t.points;return this.contains(e[0].x,e[0].y)&&this.contains(e[1].x,e[1].y)&&this.contains(e[2].x,e[2].y)&&this.contains(e[3].x,e[3].y)}get middle(){return this.#x||(this.#x=new ce(this.x+this.width/2,this.y+this.height/2)),this.#x}get middleX(){return this.x+this.width/2}get middleY(){return this.y+this.height/2}get topMiddle(){return new ce(this.middleX,this.top)}get bottomMiddle(){return new ce(this.middleX,this.bottom)}get middleLeft(){return new ce(this.left,this.middleY)}get middleRight(){return new ce(this.right,this.middleY)}get topLeft(){return this.#g||(this.#g=new ce(this.left,this.top)),this.#g}get topRight(){return this.#m||(this.#m=new ce(this.right,this.top)),this.#m}get bottomLeft(){return this.#v||(this.#v=new ce(this.left,this.bottom)),this.#v}get bottomRight(){return this.#y||(this.#y=new ce(this.right,this.bottom)),this.#y}get isVisible(){return this.width>0&&this.height>0}get isEmpty(){return 0===this.width&&0===this.height}inset(t,e=t){return this.outset(-t,-e)}get diagonal(){return ce.distance(this.topLeft,this.bottomRight)}outset(t,e=t){return new Ve(this.x-t,this.y-e,this.width+2*t,this.height+2*e)}offset(t,e){return 0===t&&0===e?this:new Ve(this.x+t,this.y+e,this.width,this.height)}scale(t,e=t){return this.outset(this.width*t/2,this.height*e/2)}shifted(t,e){return new Ve(this.x+t,this.y+e,this.width,this.height)}getRelativeRadius(t){const e=this.diagonal/(2*Math.SQRT2);return 0===e?0:t/e}getAbsoluteRadius(t){return t*this.diagonal/(2*Math.SQRT2)}getRelativePoint(t,e){return t=0===this.width?0:(t-this.x)/this.width,e=0===this.height?0:(e-this.y)/this.height,new ce(t,e)}getAbsolutePoint(t,e){return new ce(this.x+this.width*t,this.y+this.height*e)}transform(t,e=!0){return!t||t.isIdentity?this:Ve.fromPoints(t.transformPoint(this.topLeft,e),t.transformPoint(this.topRight,e),t.transformPoint(this.bottomRight,e),t.transformPoint(this.bottomLeft,e))}transformInverse(t,e=!0){return!t||t.isIdentity?this:Ve.fromPoints(t.transformInversePoint(this.topLeft,e),t.transformInversePoint(this.topRight,e),t.transformInversePoint(this.bottomRight,e),t.transformInversePoint(this.bottomLeft,e))}*horizontal(t){yield this.left,t&&(yield this.middleX),yield this.right}*vertical(t){yield this.top,t&&(yield this.middleY),yield this.bottom}*sidePoints(t){yield this.topLeft,yield this.topMiddle,yield this.topRight,yield this.middleRight,yield this.bottomRight,yield this.bottomMiddle,yield this.bottomLeft,yield this.middleLeft,t&&(yield this.middle)}*cornerPoints(t){!t||t.isIdentity?(yield this.topLeft,yield this.topRight,yield this.bottomRight,yield this.bottomLeft):(yield t.transformPoint(this.topLeft),yield t.transformPoint(this.topRight),yield t.transformPoint(this.bottomRight),yield t.transformPoint(this.bottomLeft))}getSidePointPosition(t,e,i){return Ge(this,t,e,i)}toJSON(){return[this.x,this.y,this.width,this.height]}static fromLTRBObject(t){return t?new Ve(t.left,t.top,t.right-t.left,t.bottom-t.top):Ve.ZERO}static fromWH(t,e){return new Ve(0,0,t,e)}static fromLTRB(t,e,i,n){return new Ve(t,e,i-t,n-e)}static fromSize(t,e=ce.ZERO){return new Ve(e.x,e.y,t.width,t.height)}static fromCircle(t,e){return new Ve(t.x-e,t.y-e,e+e,e+e)}static fromEllipse(t,e,i){return new Ve(t.x-e,t.y-i,e+e,i+i)}static fromTransformedPoints(t,...e){if(!t||t.isIdentity)return this.fromPoints(...e);if(0===e.length)return Ve.ZERO;let i=t.transformPoint(e[0]),n=i.x,s=i.y,r=n,o=s;for(let a=1;a<e.length;a++)i=t.transformPoint(e[a]),i.x<n?n=i.x:i.x>r&&(r=i.x),i.y<s?s=i.y:i.y>o&&(o=i.y);return new Ve(n,s,r-n,o-s)}static fromIterablePoints(t,e){let i=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;e?.isIdentity&&(e=null);for(let o of t)e&&(o=e.point(o.x,o.y)),o.x<i&&(i=o.x),o.x>s&&(s=o.x),o.y<n&&(n=o.y),o.y>r&&(r=o.y);return isFinite(i)?new Ve(i,n,s-i,r-n):e?Ve.ZERO.transform(e):Ve.ZERO}static fromPoints(...t){if(!t.length)return Ve.ZERO;let e=t[0].x,i=t[0].y,n=e,s=i;for(let r=1;r<t.length;r++){const o=t[r];o.x<e?e=o.x:o.x>n&&(n=o.x),o.y<i?i=o.y:o.y>s&&(s=o.y)}return new Ve(e,i,n-e,s-i)}static merge(t){let e=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,r=null;for(r of t)r&&r!==Ve.ZERO&&(r.left<e&&(e=r.left),r.top<i&&(i=r.top),r.right>n&&(n=r.right),r.bottom>s&&(s=r.bottom));return r?new Ve(e,i,n-e,s-i):Ve.ZERO}}const He=[{x:1,y:1},{x:2,y:1},{x:3,y:1},{x:3,y:2},{x:3,y:3},{x:2,y:3},{x:1,y:3},{x:1,y:2},{x:2,y:2}].map(Object.freeze);function Ge(t,e,i,n){let s=0;for(const r of t.sidePoints(n)){if(r.distanceTo(e)<=i)return He[s];s++}return null}class Ze{static{this.ZERO=new Ze([ce.ZERO,ce.ZERO,ce.ZERO,ce.ZERO])}#b=null;#w=null;#M=null;#S=null;#k=null;constructor(t,e){if(t instanceof Ve?(this.bounds=t,this.points=[t.topLeft,t.topRight,t.bottomRight,t.bottomLeft]):(this.bounds=Ve.fromPoints(...t),this.points=[...t]),e){const t=this.bounds.middle;this.points.sort(((e,i)=>(e.getDirectionTo(t)-i.getDirectionTo(t))*Et))}}toSorted(){return new Ze(this.points,!0)}toJSON(){return this.points}get isVisible(){return!a(this.area,0)}get left(){return this.bounds.left}get top(){return this.bounds.top}get right(){return this.bounds.right}get bottom(){return this.bounds.bottom}get width(){return this.bounds.width}get height(){return this.bounds.height}get middle(){return this.bounds.middle}get middleLeft(){return this.#w??=this.points[3].getMiddle(this.points[0])}get middleTop(){return this.#M??=this.points[0].getMiddle(this.points[1])}get middleRight(){return this.#S??=this.points[1].getMiddle(this.points[2])}get middleBottom(){return this.#k??=this.points[2].getMiddle(this.points[3])}get topLeft(){return this.points[0]}get topRight(){return this.points[1]}get bottomRight(){return this.points[2]}get bottomLeft(){return this.points[3]}get area(){return this.#b??=Ye(this.points[0],this.points[1],this.points[2])+Ye(this.points[2],this.points[3],this.points[0])}contains(t,e){return this.containsPoint(new ce(t,e))}containsPoint(t){if(!this.bounds.contains(t.x,t.y))return!1;let e=0;return e+=Ye(t,this.points[0],this.points[1]),e+=Ye(t,this.points[1],this.points[2]),e+=Ye(t,this.points[2],this.points[3]),e+=Ye(t,this.points[3],this.points[0]),a(e,this.area)}intersectsLine(t,e,i=!0){if(i&&(this.containsPoint(t)||this.containsPoint(e)))return!0;const n=this.points;return ge(t,e,n[0],n[1])||ge(t,e,n[1],n[2])||ge(t,e,n[2],n[3])||ge(t,e,n[3],n[0])}containsRect(t){return this.containsPoint(t.topLeft)&&this.containsPoint(t.bottomRight)&&this.containsPoint(t.topRight)&&this.containsPoint(t.bottomLeft)}intersectsRect(t){if(t.bottom<=this.top||t.top>=this.bottom||t.right<=this.left||t.left>=this.right)return!1;if(t.top<=this.top&&t.bottom>=this.bottom||t.left<=this.left&&t.right>=this.right)return!0;for(let e=0;e<4;e++)if(t.containsPoint(this.points[e]))return!0;return this.containsPoint(t.topLeft)||this.containsPoint(t.bottomRight)||this.containsPoint(t.topRight)||this.containsPoint(t.bottomLeft)||this.containsPoint(t.middle)}clone(){return this}equals(t){for(let e=0;e<4;e++)if(!this.points[e].equals(t.points[e]))return!1;return!0}transform(t,e){return!t||t.isIdentity?this:new Ze([t.transformPoint(this.points[0]),t.transformPoint(this.points[1]),t.transformPoint(this.points[2]),t.transformPoint(this.points[3])],e)}getSidePointPosition(t,e,i){return Ge(this,t,e,i)}getPointAtPosition(t,e,i){switch(i&&(t=ae(t),e=ae(e)),t){case 1:switch(e){case 1:return this.points[0];case 2:return this.middleLeft;case 3:return this.points[3]}break;case 2:switch(e){case 1:return this.middleTop;case 2:return this.middle;case 3:return this.middleBottom}break;case 3:switch(e){case 1:return this.points[1];case 2:return this.middleRight;case 3:return this.points[2]}}return null}*middlePoints(t){yield this.middleTop,yield this.middleRight,yield this.middleBottom,yield this.middleLeft,t&&(yield this.middle)}*sidePoints(t){yield this.points[0],yield this.middleTop,yield this.points[1],yield this.middleRight,yield this.points[2],yield this.middleBottom,yield this.points[3],yield this.middleLeft,t&&(yield this.middle)}*cornerPoints(t){if(t&&!t.isIdentity)for(const e of this.points)yield t.transformPoint(e);else yield*this.points}static fromSize(t,e){return this.fromWH(t.width,t.height,e)}static fromWH(t,e,i){return!i||i.isIdentity?new Ze(new Ve(0,0,t,e)):new Ze([i.point(0,0),i.point(t,0),i.point(t,e),i.point(0,e)])}static fromRectangle(t,e){return!e||e.isIdentity?new Ze(t):new Ze([e.transformPoint(t.topLeft),e.transformPoint(t.topRight),e.transformPoint(t.bottomRight),e.transformPoint(t.bottomLeft)])}static fromLTRBObject(t){return new Ze([new ce(t.left,t.top),new ce(t.right,t.top),new ce(t.right,t.bottom),new ce(t.left,t.bottom)])}static fromPoints(t,e){return null==e||e.isIdentity?new Ze(t.map((t=>t instanceof ce?t:new ce(t.x,t.y)))):new Ze(t.map((t=>e.point(t.x,t.y))))}static fromJSON(t){return new Ze(t.map((t=>t instanceof ce?t:new ce(t.x,t.y))))}}function Ye(t,e,i){const n=t.distanceTo(e),s=e.distanceTo(i),r=i.distanceTo(t),o=(n+s+r)/2;return Math.sqrt(o*(o-n)*(o-s)*(o-r))}const Qe=1e-13,Je=new Array(6);function qe(t,e,i){const n=t[0]*e[0]+t[2]*e[1],s=t[1]*e[0]+t[3]*e[1],r=t[0]*e[2]+t[2]*e[3],o=t[1]*e[2]+t[3]*e[3],a=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];i[0]=n,i[1]=s,i[2]=r,i[3]=o,i[4]=a,i[5]=l}function Ke(t,e){const i=t[0]*t[3]-t[1]*t[2];if(0===i)return!1;const n=t[3]/i,s=-t[1]/i,r=-t[2]/i,o=t[0]/i,a=-(t[3]*t[4]-t[2]*t[5])/i,l=(t[1]*t[4]-t[0]*t[5])/i;return e[0]=n,e[1]=s,e[2]=r,e[3]=o,e[4]=a,e[5]=l,!0}function Xe(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}function ti(t){return t[0]=t[3]=1,t[1]=t[2]=t[4]=t[5]=0,t}function ei(t,e){return a(t[0],e[0],Qe)&&a(t[1],e[1],Qe)&&a(t[2],e[2],Qe)&&a(t[3],e[3],Qe)&&a(t[4],e[4],Qe)&&a(t[5],e[5],Qe)}function ii(t,e){return t?e?ei(t,e):Xe(t):!e||Xe(e)}function ni(t,e,i){if(i%=360,!(e%=360)&&!i)return;const n=t[0],s=t[1],r=t[2],o=t[3];e%180!=0&&(e=45===e?1:-45===e?-1:Math.tan(e*Dt),t[2]+=n*e,t[3]+=s*e),i%180!=0&&(i=45===i?1:-45===i?-1:Math.tan(i*Dt),t[0]+=r*i,t[1]+=o*i)}function si(t,e){if(!(e%=360))return;let i=0,n=-1;e%180!=0&&(e*=Dt,i=Math.sin(e),n=Math.cos(e));const s=t[0],r=t[1];t[0]=s*n+t[2]*i,t[1]=r*n+t[3]*i,t[2]=t[2]*n-s*i,t[3]=t[3]*n-r*i}function ri(t){if(t%90)return t;const e=t/90;return e%2?Math.sign(t)*(90*(e-1)+89.99):t}function oi(t,e,i,n=!0){return new ce(t[0]*e+t[2]*i+(n?t[4]:0),t[1]*e+t[3]*i+(n?t[5]:0))}function ai(t,e,i,n=!0){return Ke(t,Je)?oi(Je,e,i,n):new ce(e,i)}function li(t){const e=t[0]*t[3]-t[1]*t[2];return e<0?a(e,-1,Qe)?-1:e:a(e,1,Qe)?1:e}function ci(t,e=!0){return!(function(t,e){const i=li(t);return(!e||-1!==i)&&1!==i}(t,e)||function(t,e){return e?!((a(t[0],t[3],Qe)||a(t[0],-t[3],Qe))&&(a(t[1],t[2],Qe)||a(t[1],-t[2],Qe))):!(a(t[0],t[3],Qe)&&a(t[1],t[2],Qe))}(t,e))}function ui(t){let[e,i,n,s,r,o]=t;const a=new ce(r,o);let l=Math.atan2(i,e)*Et,c=1;180!==l&&-180!==l||(c=-1,l=0),c*=Math.sqrt(e*e+i*i),0!==c&&1!==c&&(e/=c,i/=c);let u=e*n+i*s;0!==u&&(n-=u*e,s-=u*i);let h=Math.sqrt(n*n+s*s);e*s-i*n<0&&(h=-h);let d=0;return 0!==h&&(d=Math.atan2(-u,h)*Et%180||0),{translate:a,rotate:l,scale:new ce(c,h),skew:d}}class hi{constructor(t=1,e=0,i=0,n=1,s=0,r=0){this.value=[t,e,i,n,s,r]}get a(){return this.value[0]}get b(){return this.value[1]}get c(){return this.value[2]}get d(){return this.value[3]}get e(){return this.value[4]}get f(){return this.value[5]}get tx(){return this.value[4]}get ty(){return this.value[5]}get determinant(){return li(this.value)}get isInvertible(){return function(t){return 0!==li(t)}(this.value)}get lineScale(){return function(t){return Math.sqrt(Math.abs(li(t)))}(this.value)}get isIdentity(){return Xe(this.value)}get isShiftedIdentity(){return function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]}(this.value)}isNonDestructive(t=!0){return ci(this.value,t)}toIdentity(){return ti(this.value),this}reset(t=1,e=0,i=0,n=1,s=0,r=0){const o=this.value;return o[0]=t,o[1]=e,o[2]=i,o[3]=n,o[4]=s,o[5]=r,this}panZoom(t,e=1){return this.scale(e,e).translate(t.x/e,t.y/e)}preTranslate(t=0,e=0){return function(t,e,i){(e||i)&&(Je[0]=Je[3]=1,Je[1]=Je[2]=0,Je[4]=e,Je[5]=i,qe(Je,t,t))}(this.value,t,e),this}translate(t=0,e=0){return function(t,e,i){(e||i)&&(t[4]+=t[0]*e+t[2]*i,t[5]+=t[1]*e+t[3]*i)}(this.value,t,e),this}scale(t=1,e=1){return function(t,e,i){1===e&&1===i||(t[0]*=e,t[1]*=e,t[2]*=i,t[3]*=i)}(this.value,t,e),this}skew(t=0,e=0){return ni(this.value,t,e),this}rotate(t){return si(this.value,t),this}skewAxis(t=0,e=0){return function(t,e,i){if(e%=360){if(!(i%=360))return ni(t,-e,0);si(t,-i),ni(t,ri(-e),0),si(t,i)}}(this.value,t,e),this}inverse(){return Ke(this.value,this.value),this}multiply(t){return qe(this.value,t.value,this.value),this}multiplyInverse(t){var e,i,n;return e=this.value,i=t.value,n=this.value,Ke(i,Je)&&qe(e,Je,n),this}preMultiply(t){return qe(t.value,this.value,this.value),this}preMultiplyInverse(t){var e,i,n;return e=this.value,i=t.value,n=this.value,Ke(i,Je)&&qe(Je,e,n),this}normalize(){return function(t){for(let e=0;e<6;e++)t[e]=Math.round(t[e]/Qe)*Qe}(this.value),this}point(t,e,i=!0){return oi(this.value,t,e,i)}transformPoint(t,e=!0){return oi(this.value,t.x,t.y,e)}transformPointArray(t,e=!0){const i=[],n=this.value;for(const s of t)i.push(oi(n,s.x,s.y,e));return i}*transformPointList(t,e=!0){const i=this.value;for(const n of t)yield oi(i,n.x,n.y,e)}inversePoint(t,e,i=!0){return ai(this.value,t,e,i)}transformInversePoint(t,e=!0){return ai(this.value,t.x,t.y,e)}clone(){const t=this.value;return new hi(t[0],t[1],t[2],t[3],t[4],t[5])}equals(t){return t?ei(this.value,t.value):this.isIdentity}toString(){return`matrix(${this.value.join(" ")})`}toJSON(){return this.value}decompose(){return ui(this.value)}static Create(t){return t?Array.isArray(t)?new hi(...t):new hi(t.a||0,t.b||0,t.c||0,t.d||0,t.e||0,t.f||0):new hi}static CreatePanZoom(t,e=1){return new hi(e,0,0,e,t.x,t.y)}static CreateDevicePixelRatio(t=1){return new hi(t,0,0,t,0,0)}static Same(t,e){return ii(t?.value,e?.value)}}class di{constructor(t,e){this.width=t,this.height=e}toJSON(){return[this.width,this.height]}equals(t){return this.width===t.width&&this.height===t.height}clone(){return this}get x(){return 0}get y(){return 0}get left(){return 0}get top(){return 0}get right(){return this.width}get bottom(){return this.height}}let fi=class{constructor(t){this.type=t}preparePaint(t){return t.isAntiAlias=!0,t.style=Skia.SkPaintStyle.Fill,!0}clone(){return this}equals(t){return t.type===this.type}};class pi extends fi{static#_;constructor(){super(0)}toJSON(){return null}get isVisible(){return!1}static get INSTANCE(){return null==this.#_&&(this.#_=new pi),this.#_}}class gi extends fi{constructor(t){super(1),this.color=t}toJSON(){return this.color}get isVisible(){return this.color.a>0}preparePaint(t){return super.preparePaint(t),t.color=this.color.code,!0}equals(t){return t.type===this.type&&this.color.equals(t.color)}withColor(t){return this.color.equals(t)?this:new gi(t)}static fromColor(t){return new gi(t instanceof se?t:se.parse(t))}static{this.BLACK=new gi(se.black)}static{this.WHITE=new gi(se.white)}static{this.TRANSPARENT=new gi(se.transparent)}}class mi{constructor(t){this._nativeCache=null,this._stringCache=null,this._isVisible=null,this.list=t||[]}*[Symbol.iterator](){yield*this.list}toJSON(){return this.list}get length(){return this.list.length}get isVisible(){if(null==this._isVisible){this._isVisible=!1;for(const t of this.list)if(t.color.a>0){this._isVisible=!0;break}}return this._isVisible}hasOffset(t){for(const e of this.list)if(e.offset===t)return!0;return!1}getColorAt(t){return this.list[t]?.color}getOffsetAt(t){return this.list[t]?.offset}expand(t){const e=t.list.length-this.list.length;return e<=0?this:new mi(mi.expandStopColorArray(this.cloneStopColorArray(),t.list,e))}allWithColor(t){return new mi(this.list.map((e=>({offset:e.offset,color:t}))))}cloneStopColorArray(){return this.list.map(bi)}computeColor(t){const e=this.list,i=e.length;if(0===i)return se.black;if(1===i)return e[0].color;if(t<=e[0].offset)return e[0].color;const n=i-1;if(t>=e[n].offset)return e[n].color;let s=e[0];for(let i=1;i<n;i++){const n=e[i];if(s.offset<=t&&t<=n.offset)return t===s.offset?s.color:t===n.offset?n.color:s.color.interpolate(n.color,Si(t,s.offset,n.offset));s=n}return s.color.interpolate(e[n].color,Si(t,s.offset,e[n].offset))}toNative(){if(this._nativeCache)return this._nativeCache;const t={colors:[],offsets:[]};for(const e of this.list)t.colors.push(e.color.code),t.offsets.push(e.offset);return this._nativeCache=t}toString(){return null==this._stringCache&&(this._stringCache=mi.stringifyStopColorList(this.list)),this._stringCache}createReadonly(t){let e;if(null==t)e=new mi(this.list.map(bi).sort(Mi));else{const i=this.list.slice();i[t]=bi(i[t]),i.sort(Mi),e=new mi(i)}return e._isVisible=this._isVisible,e}createWritable(){return new vi(this.list.map(bi))}clone(){return this}equals(t){if(!t||this.list.length!==t.list.length)return!1;const e=this.list.length;for(let i=0;i<e;i++)if(this.list[i].offset!==t.list[i].offset||!this.list[i].color.equals(t.list[i].color))return!1;return!0}static stringifyStopColorList(t,e){return e&&(t=t.slice().sort(Mi)),t.map(wi).join(", ")}static fromColor(t){return new mi(xi(t))}static fromJSON(t){return new mi(yi(t))}static expandStopColorArray(t,e,i){const n=e.length-1;for(let s=0;s<i;s++)t.push({offset:1,color:e[n-s].color});return t}}class vi extends mi{sort(){this.list.sort(Mi),this.clearCache()}expand(t){const e=t.list.length-this.list.length;return e>0&&(mi.expandStopColorArray(this.list,t.list,e),this.clearCache()),this}clearCache(){this._nativeCache=this._stringCache=this._isVisible=null}setColorAt(t,e){return!(t>this.list.length||this.list[t].color.equals(e)||(this.list[t].color=e,this.clearCache(),0))}setOffsetAt(t,e,i=!0){if(t<0||t>this.list.length)return null;const n=this.list[t];return n.offset===e?t:(this.clearCache(),n.offset=e,i?(this.list.sort(Mi),this.list.indexOf(n)):t)}removeColorAt(t){return!(t>this.list.length||(this.list.splice(t,1),this.clearCache(),0))}addStopColor(t,e){null==e&&(e=this.computeColor(t));const i={color:e,offset:t};return this.list.push(i),this.list.sort(Mi),this.clearCache(),i}reverseOffsets(){let t=!1;for(const e of this.list).5!==e.offset&&(e.offset=1-e.offset,t=!0);return!!t&&(this.list.reverse(),this._nativeCache=this._stringCache=null,!0)}reverseColors(){let t=!1;const e=this.list,i=e.length-1,n=Math.trunc(e.length/2);for(let s=0;s<n;s++){const n=i-s;if(e[s].color.equals(e[n].color))continue;const r=e[s].color;e[s].color=e[n].color,e[n].color=r,t=!0}return!!t&&(this._nativeCache=this._stringCache=null,!0)}static fromColor(t){return new vi(xi(t))}static fromJSON(t){return new vi(yi(t))}clone(){return this.createWritable()}}function yi(t){for(const e of t)e.color instanceof se||(e.color=se.parse(e.color));return t}function xi(t){return t?[{color:t,offset:0},{color:t.inverted(),offset:1}]:[{color:se.black,offset:0},{color:se.white,offset:1}]}function bi(t){return{color:t.color,offset:t.offset}}function wi(t){return t.color+" "+h(100*t.offset)+"%"}function Mi(t,e){return t.offset===e.offset?0:t.offset<e.offset?-1:1}function Si(t,e,i){return e===i?1:(t-e)/(i-e)}class ki{#I=null;constructor(t=1,e=0){this.scale=t,this.rotate=e}withScale(t){return this.scale===t?this:new ki(t,this.rotate)}withRotate(t){return this.rotate===t?this:new ki(this.scale,t)}toJSON(){return[this.scale,this.rotate]}equals(t){return this.rotate===t.rotate&&this.scale===t.scale}clone(){return this}get isIdentity(){return this.#I??=1===this.scale&&this.rotate%360==0}computeMatrix(t){return this.isIdentity?null:(new hi).translate(t.x,t.y).rotate(this.rotate).scale(1,this.scale).translate(-t.x,-t.y)}static Same(t,e){return t?e?t.equals(e):t.isIdentity:!e||e.isIdentity}}class _i extends fi{#C;constructor(t,e,i,n=null){super(t),this.transform=null,this.#C=void 0,this.stopColors=e,this.spread=i,this.transform=n}get isVisible(){return 0!==this.scale&&this.stopColors.isVisible}get matrix(){return void 0===this.#C?this.#C=this.transform?.computeMatrix(this.origin)||null:this.#C}get rotate(){return this.transform?.rotate??0}get scale(){return this.transform?.scale??1}withScale(t){return this.transform?this.withTransform(this.transform.withScale(t)):this.withTransform(new ki(t,0))}withRotate(t){return this.transform?this.withTransform(this.transform.withRotate(t)):this.withTransform(new ki(1,t))}withStopColorList(t){return t===this.stopColors?this:this.constructWith(t,this.spread,this.transform)}withStopColorListAndTransform(t,e){return t===this.stopColors&&e===this.transform?this:this.constructWith(t,this.spread,e)}withSpreadMethod(t){return this.spread===t?this:this.constructWith(this.stopColors,t,this.transform)}withTransform(t){return t===this.transform||ki.Same(this.transform,t)?this:this.constructWith(this.stopColors,this.spread,t)}equals(t){return this.spread===t.spread&&ki.Same(this.transform,t.transform)&&this.stopColors.equals(t.stopColors)}preparePaint(t){const e=this.getShader(this.stopColors.toNative(),function(t){switch(t){case 1:return Skia.SkTileMode.Repeat;case 2:return Skia.SkTileMode.Mirror;default:return Skia.SkTileMode.Clamp}}(this.spread),this.matrix);return!!e&&(super.preparePaint(t),t.shader=e,t.isDither=!0,!0)}getMatrixAndTransform(t){const e=this.matrix;e&&(t=t.clone().multiply(e));const i=t.decompose(),n=0===i.scale.x?0:Math.abs(i.scale.y/i.scale.x),s=i.rotate;if(s%360==0&&1===n)return[t,null];const r=new ki(n,s);return e||(t=t.clone()),t.multiplyInverse(r.computeMatrix(this.origin)),[t,r]}}class Ii extends _i{#L;constructor(t,e,i,n=0,s=null){super(2,i,n,s),this.start=t,this.end=e}get origin(){return this.center}toJSON(){return[this.start,this.end,this.stopColors,this.spread,this.transform]}get center(){return this.#L??=ce.center(this.start,this.end)}get distance(){return ce.distance(this.start,this.end)}equals(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)&&super.equals(t)}withTransformedCoords(t){if(t.isIdentity)return this;const[e,i]=this.getMatrixAndTransform(t);return new Ii(e.transformPoint(this.start),e.transformPoint(this.end),this.stopColors,this.spread,i)}toRelative(t){return this.withPosition(t.getRelativePoint(this.start.x,this.start.y),t.getRelativePoint(this.end.x,this.end.y))}toAbsolute(t){return this.withPosition(t.getAbsolutePoint(this.start.x,this.start.y),t.getAbsolutePoint(this.end.x,this.end.y))}moveBy(t){return new Ii(this.start.add(t),this.end.add(t),this.stopColors,this.spread,this.transform)}withPosition(t,e){return new Ii(t||this.start,e||this.end,this.stopColors,this.spread,this.transform)}withCenter(t){const e=t.sub(this.center);return e.isZero?this:this.withPosition(this.start.add(e),this.end.add(e))}constructWith(t,e,i){return new Ii(this.start,this.end,t,e,i)}getShader(t,e,i){return Skia.SkShader.MakeLinearGradient(this.start,this.end,t.colors,t.offsets,e,i)}}class Ci extends _i{constructor(t,e,i,n=0,s=null){super(3,i,n,s),this.center=t,this.radius=e}get origin(){return this.center}toJSON(){return[this.center,this.radius,this.stopColors,this.spread,this.transform]}equals(t){return this.type===t.type&&this.radius===t.radius&&this.center.equals(t.center)&&super.equals(t)}withTransformedCoords(t){if(t.isIdentity)return this;const[e,i]=this.getMatrixAndTransform(t),n=e.transformPoint(this.center);return new Ci(n,n.distanceTo(e.point(this.center.x+this.radius,this.center.y)),this.stopColors,this.spread,i)}toRelative(t){return this.withCircle(t.getRelativePoint(this.center.x,this.center.y),t.getRelativeRadius(this.radius))}toAbsolute(t){return this.withCircle(t.getAbsolutePoint(this.center.x,this.center.y),t.getAbsoluteRadius(this.radius))}moveBy(t){return new Ci(this.center.add(t),this.spread,this.stopColors,this.spread,this.transform)}withCenter(t){return this.withCircle(t,this.radius)}withRadius(t){return this.withCircle(this.center,t)}withCircle(t,e){return new Ci(t??this.center,e??this.radius,this.stopColors,this.spread,this.transform)}constructWith(t,e,i){return new Ci(this.center,this.radius,t,e,i)}getShader(t,e,i){return Skia.SkShader.MakeRadialGradient(this.center,this.radius,t.colors,t.offsets,e,i)}}class Li extends _i{constructor(t,e,i,n,s,r=0,o=null){super(4,s,r,o),this.start=t,this.startRadius=e,this.end=i,this.endRadius=n}get origin(){return this.end}toJSON(){return[this.start,this.startRadius,this.end,this.endRadius,this.stopColors,this.spread,this.transform]}equals(t){return this.type===t.type&&this.startRadius===t.startRadius&&this.endRadius===t.endRadius&&this.start.equals(t.start)&&this.end.equals(t.end)&&super.equals(t)}moveBy(t){return t.isZero?this:new Li(this.start.add(t),this.startRadius,this.end.add(t),this.endRadius,this.stopColors,this.spread,this.transform)}withTransformedCoords(t){if(t.isIdentity)return this;const[e,i]=this.getMatrixAndTransform(t),n=e.transformPoint(this.start),s=e.transformPoint(this.end);return new Li(n,n.distanceTo(e.point(this.start.x+this.startRadius,this.start.y)),s,s.distanceTo(e.point(this.end.x+this.endRadius,this.end.y)),this.stopColors,this.spread,i)}toRelative(t){return new Li(t.getRelativePoint(this.start.x,this.start.y),t.getRelativeRadius(this.startRadius),t.getRelativePoint(this.end.x,this.end.y),t.getRelativeRadius(this.endRadius),this.stopColors,this.spread,this.transform)}toAbsolute(t){return new Li(t.getAbsolutePoint(this.start.x,this.start.y),t.getAbsoluteRadius(this.startRadius),t.getAbsolutePoint(this.end.x,this.end.y),t.getAbsoluteRadius(this.endRadius),this.stopColors,this.spread,this.transform)}withRadius(t,e){return this.startRadius===t&&this.endRadius===e?this:new Li(this.start,t,this.end,e,this.stopColors,this.spread,this.transform)}withStartCenter(t,e){if(e){const e=t.distanceTo(this.end),i=this.endRadius-this.startRadius;(i>=0&&e-i>=0||i<0&&e+i>=0)&&(t=ce.fromDirection(t.getDirectionTo(this.end),Math.abs(i)-.1,this.end))}return this.withStart(t,this.startRadius)}withStartRadius(t,e){return e?this.withRadius(t,this.endRadius*t/this.startRadius):this.withStart(this.start,t)}withEndCenter(t,e){if(e){const e=t.distanceTo(this.start),i=this.startRadius-this.endRadius;(i>=0&&e-i>=0||i<0&&e+i>=0)&&(t=ce.fromDirection(t.getDirectionTo(this.start),Math.abs(i)-.1,this.start))}return this.withEnd(t,this.endRadius)}withEndRadius(t,e){return e?this.withRadius(this.startRadius*t/this.endRadius,t):this.withEnd(this.end,t)}withStart(t,e){return t??=this.start,e??=this.startRadius,this.start.equals(t)&&this.startRadius===e?this:new Li(t,e,this.end,this.endRadius,this.stopColors,this.spread,this.transform)}withEnd(t,e){return t??=this.end,e??=this.endRadius,this.end.equals(t)&&this.endRadius===e?this:new Li(this.start,this.startRadius,t,e,this.stopColors,this.spread,this.transform)}getContain(t,e){const i=t.distanceTo(e),n=this.startRadius-this.endRadius;return(n>=0&&i-n>=0||n<0&&i+n>=0)&&(t=ce.fromDirection(t.getDirectionTo(e),Math.abs(n)-.1,e)),t}withPosition(t,e,i){return t??=this.start,e??=this.end,this.start.equals(t)&&this.end.equals(e)?this:new Li(t,this.startRadius,e,this.endRadius,this.stopColors,this.spread,this.transform)}constructWith(t,e,i){return new Li(this.start,this.startRadius,this.end,this.endRadius,t,e,i)}getShader(t,e,i){return Skia.SkShader.MakeTwoPointConicalGradient(this.start,this.startRadius,this.end,this.endRadius,t.colors,t.offsets,e,i)}}class Ni extends _i{constructor(t,e=0,i=360,n,s=0,r=null){super(5,n,s,r),this.center=t,this.startAngle=e,this.arcLength=i}get origin(){return this.center}toJSON(){return[this.center,this.startAngle,this.arcLength,this.stopColors,this.spread,this.transform]}equals(t){return this.type===t.type&&this.startAngle===t.startAngle&&this.arcLength===t.arcLength&&this.center.equals(t.center)&&super.equals(t)}withTransformedCoords(t){if(t.isIdentity)return this;const[e,i]=this.getMatrixAndTransform(t),n=e.transformPoint(this.center);return new Ni(n,this.startAngle,this.arcLength,this.stopColors,this.spread,i)}toRelative(t){return this.withCircle(t.getRelativePoint(this.center.x,this.center.y))}toAbsolute(t){return this.withCircle(t.getAbsolutePoint(this.center.x,this.center.y))}moveBy(t){return new Ni(this.center.add(t),this.startAngle,this.arcLength,this.stopColors,this.spread,this.transform)}withCircle(t,e,i){return new Ni(t||this.center,e??this.startAngle,i??this.arcLength,this.stopColors,this.spread,this.transform)}constructWith(t,e,i){return new Ni(this.center,this.startAngle,this.arcLength,t,e,i)}getShader(t,e,i){return Skia.SkShader.MakeSweepGradient(this.center,this.startAngle,this.startAngle+this.arcLength,t.colors,t.offsets,e,i)}}function ji(t,e,i){if(t.type===e)return t;switch(e){case 0:return pi.INSTANCE;case 1:return function(t){return t instanceof _i?gi.fromColor(t.stopColors.getColorAt(0)):gi.BLACK}(t);case 2:return function(t,e){let i,n;switch(t.type){case 3:{const{center:e,radius:s}=t;i=e.shifted(-s,-s),n=e.shifted(s,s)}break;case 4:{let e,s;t.endRadius>=t.startRadius?(e=t.end,s=t.endRadius):(e=t.start,s=t.startRadius),i=e.shifted(-s,-s),n=e.shifted(s,s)}break;case 5:{const s=t.center,r=e.diagonal/(2*Math.SQRT2);i=s.shifted(-r,-r),n=s.shifted(r,r)}}return new Ii(i??e.topLeft,n??e.bottomRight,zi(t),Pi(t))}(t,i);case 3:return function(t,e){let i,n;switch(t.type){case 2:i=t.center,n=t.distance/(2*Math.SQRT2);break;case 4:t.endRadius>=t.startRadius?(i=t.end,n=t.endRadius):(i=t.start,n=t.startRadius);break;case 5:i=t.center}return new Ci(i??e.middle,n??e.diagonal/(2*Math.SQRT2),zi(t),Pi(t))}(t,i);case 4:return function(t,e){let i,n;switch(t.type){case 2:i=t.center,n=t.distance/(2*Math.SQRT2);break;case 3:i=t.center,n=t.radius;break;case 5:i=t.center}return i??=e.middle,n??=e.diagonal/(2*Math.SQRT2),new Li(i.shifted(n/2,n/2),n/4,i,n,zi(t),Pi(t))}(t,i);case 5:return function(t,e){let i;switch(t.type){case 2:case 3:i=t.center;break;case 4:i=t.endRadius>=t.startRadius?t.end:t.start}return new Ni(i||e.middle,0,360,zi(t),Pi(t))}(t,i)}return t}function zi(t){return t instanceof _i?t.stopColors:t instanceof gi?mi.fromColor(t.color):mi.fromColor(se.black)}function Pi(t){return t instanceof _i?t.spread:0}class Ti{#N=gi.BLACK;#j=1;#z=0;#P=0;#T=4;#A=[];#n=0;#D=0;#E=0;#O=null;#W;#R=void 0;constructor(t=gi.BLACK,e=1){this.#N=t,this.#j=e}clone(t){const e=new Ti;e.#N=this.#N,e.#j=this.#j,e.#z=this.#z,e.#P=this.#P,e.#T=this.#T,e.#A=this.#A,e.#n=this.#n,e.#D=this.#D,e.#E=this.#E,e.#O=this.#O;let i=!0;return this.#W&&(this.#W.isGlobal?e.#W=this.#W:t?i=!1:e.#W=this.#W.clone()),this.#R?i&&(e.#R=this.#R.clone()):e.#R=this.#R,e}getInflatedBounds(t){let e=this.#j;return 0===e||this.#O&&(e*=this.#O.bounds.height*this.#O.scale,0===e)?t:t.outset(2*e)}invalidate(){this.#R?.delete(),this.#R=void 0}dispose(){this.invalidate(),this.#W&&(this.#W.isGlobal||this.#W.dispose(),this.#W=null),this.#O=null,this.#N=null}toJSON(){return{brush:this.#N,width:this.#j,cap:this.#z,join:this.#P,miter:this.#T,dashes:this.#A,offset:this.#n,dashlen:this.#D,align:this.#E,effect:this.#O?.id||null,profile:this.#W?this.#W.isGlobal?this.#W.id:this.#W:null}}static fromJSON(t,e){const i=new Ti;return i.#N=t.brush??gi.BLACK,i.#j=t.width??1,i.#z=t.cap??0,i.#P=t.join??0,i.#T=t.miter??4,i.#A=t.dashes??[],i.#n=t.offset??0,i.#D=t.dashlen||0,i.#E=t.align??0,e&&("string"==typeof t.effect&&(t.effect=e.getPenEffectById(t.effect)),"string"==typeof t.profile&&(t.profile=e.getPenProfileById(t.profile))),i.#O=t.effect||null,i.#W=t.profile||null,i}get isUniform(){return!this.#O&&0===this.#E}get brush(){return this.#N}set brush(t){this.#N=t}get width(){return this.#j}set width(t){this.#j=t}get lineCap(){return this.#z}set lineCap(t){this.#z=t}get lineJoin(){return this.#P}set lineJoin(t){this.#P=t}get miterLimit(){return this.#T}set miterLimit(t){this.#T=t}get dashes(){return this.#A}set dashes(t){kt(this.#A,t)||(this.#A=t,this.pathEffectUsesDashes||this.invalidate())}get offset(){return this.#n}set offset(t){this.#n!==t&&(this.#n=t,this.#A.length>0&&!this.pathEffectUsesDashes&&this.invalidate())}get dashPathLength(){return this.#D}set dashPathLength(t){this.#D!==t&&(this.#D=t,this.#A.length>0&&!this.pathEffectUsesDashes&&this.invalidate())}get align(){return this.#E}set align(t){this.#E=t}get effect(){return this.#O}set effect(t){this.#O!==t&&(this.#O=t,this.invalidate())}get profile(){return this.#W}set profile(t){this.#W!==t&&(this.#W&&!this.#W.isGlobal&&this.#W.dispose(),this.#W=t,this.#O&&this.invalidate())}get isVisible(){return this.#j>0&&this.#N.isVisible}equals(t){return this.#j===t.#j&&this.#P===t.#P&&this.#z===t.#z&&this.#T===t.#T&&this.#n===t.#n&&this.#D===t.#D&&this.#E===t.#E&&this.#O===t.#O&&this.#W===t.#W&&kt(this.#A,t.#A)&&this.#N.equals(t.#N)}get nativeLineCap(){switch(this.#z){case 2:return Skia.SkPaintStrokeCap.Square;case 1:return Skia.SkPaintStrokeCap.Round;default:return Skia.SkPaintStrokeCap.Butt}}get nativeLineJoin(){switch(this.#P){case 2:return Skia.SkPaintStrokeJoin.Bevel;case 1:return Skia.SkPaintStrokeJoin.Round;default:return Skia.SkPaintStrokeJoin.Miter}}get pathEffect(){return void 0===this.#R&&(this.#R=this.computePathEffect()||null),this.#R}computePathEffect(){return this.#O?this.#W?Skia.SkPathEffect.MakeBend(this.#O.bender,this.#W.pathProfileIn,this.#W.pathProfileOut,this.#E,this.#A,this.#n,this.#D):Skia.SkPathEffect.MakeBend(this.#O.bender,null,null,this.#E,this.#A,this.#n,this.#D):1===this.#E?Skia.SkPathEffect.MakeStrokeOutside():-1===this.#E?Skia.SkPathEffect.MakeStrokeInside():this.#A.length>0?Skia.SkPathEffect.MakeDash(this.#A,this.#n,this.#D):null}get pathEffectUsesDashes(){return null!=this.#O||0!==this.#E}preparePaint(t){return!!this.#N.preparePaint(t)&&(this.prepareStrokePaint(t),!0)}prepareStrokePaint(t){t.style=Skia.SkPaintStyle.Stroke,t.strokeWidth=this.#j,t.strokeMiter=this.#T,t.strokeJoin=this.nativeLineJoin,t.strokeCap=this.nativeLineCap,t.pathEffect=this.pathEffect}outlinePath(t){if(null==t||t.isEmpty)return null;const e=new Skia.SkPaint;e.isAntiAlias=!0,this.prepareStrokePaint(e);const i=t.getFilled(e);return e.delete(),i}}class Ai{#t;#B;#U;#$;#F;#V;#H=null;constructor(t,e,i=1,n=0,s=1,r=!1,o=!1){this.id=t||Ct(),this.#t=e,this.#B=i,this.#U=n,this.#$=s,this.#F=r,this.#V=o}get bender(){return null==this.#H?this.#H=Skia.SkPathBender.Make(this.#t.path,this.#B,this.#U,this.#$,this.#F,this.#V,10,.1):this.#H}get bounds(){return this.#t.bounds}clone(t){return new Ai(t?null:this.id,this.#t.clone(),this.#B,this.#U,this.#$,this.#F,this.#V)}toJSON(){return{id:this.id,path:this.#t,scale:this.#B,elasticFrom:this.#U,elasticTo:this.#$,flipX:this.#F,flipY:this.#V}}static fromJSON(t){return new Ai(t.id,t.path,t.scale??1,t.elasticFrom||0,t.elasticTo??1,t.flipX??!1,t.flipY??!1)}dispose(){this.#t?.dispose(),this.#t=null,this.#H?.delete(),this.#H=null}get scale(){return this.#B}set scale(t){this.setScale(t)}get flipX(){return this.#F}set flipX(t){this.setFlip(t,this.#V)}get flipY(){return this.#V}set flipY(t){this.setFlip(this.#F,t)}get elasticFrom(){return this.#U}set elasticFrom(t){this.setElastic(t,this.#$)}get elasticTo(){return this.#$}set elasticTo(t){this.setElastic(this.#U,t)}setElastic(t,e){if((t=n(t,0,1))>(e=n(e,0,1))){const i=t;t=e,e=i}return(this.#U!==t||this.#$!==e)&&(this.#U=t,this.#$=e,this.bender.setElastic(t,e),!0)}setFlip(t,e){return(this.#F!==t||this.flipY!==e)&&(this.flipX=t,this.flipY=e,this.bender.setFlip(t,e),!0)}setScale(t){return!(!t||this.#B===t||(this.#B=t,this.bender.scale=t,0))}}class Di{constructor(t,e=0,i=0,n=null,s=null){this.point=t,this.type=e,this.joint=i,this.handleIn=n||null,this.handleOut=s||null}toJSON(){return[this.point,this.type,this.joint,this.handleIn,this.handleOut]}get x(){return this.point.x}get y(){return this.point.y}equals(t){return this===t||this.point.equals(t.point)&&this.type===t.type&&this.joint===t.joint&&kt(this.handleIn,t.handleIn)&&kt(this.handleOut,t.handleOut)}clone(){return this}}function Ei(t){return 1!==t.joint&&(null!=t.handleIn||null!=t.handleOut)}function Oi(t){return 1!==t.joint&&null!=t.handleIn&&null!=t.handleOut}function*Wi(t,e){1!==t.joint&&t.handleOut?1!==e.joint&&e.handleIn?yield*function*(t,e,i,n){yield t,Re??=new Set,We(Re,t.x,e.x,i.x,n.x),We(Re,t.y,e.y,i.y,n.y);for(const s of Re)yield Ue(t,e,i,n,s);Re.clear(),yield n}(t.point,t.handleOut,e.handleIn,e.point):yield*_e(t.point,t.handleOut,e.point):1!==e.joint&&e.handleIn?yield*_e(t.point,e.handleIn,e.point):(yield t.point,yield e.point)}function Ri(t,e,i=1){return i<=0?0:1!==t.joint&&t.handleOut?1!==e.joint&&e.handleIn?$e(t.point,t.handleOut,e.handleIn,e.point,i):Ne(t.point,t.handleOut,e.point,i):1!==e.joint&&e.handleIn?Ne(t.point,e.handleIn,e.point,i):function(t,e,i=1){return i<=0?0:(i>1&&(i=1),i*ue(t.x,t.y,e.x,e.y))}(t.point,e.point,i)}function Bi(t,e){const i=t.length;if(e<0||!i)return 0;if(e>t[i-2])return 1;let n=0;for(;e>t[n];)n+=2;return e===t[n]?t[n+1]:0===n?0===t[n]?0:t[n+1]*e/t[n]:t[n]===t[n-2]?t[n-1]:t[n-1]+(t[n+1]-t[n-1])*(e-t[n-2])/(t[n]-t[n-2])}function Ui(t,e,i){return 1!==t.joint&&t.handleOut?1!==e.joint&&e.handleIn?Ue(t.point,t.handleOut,e.handleIn,e.point,i):Ce(t.point,t.handleOut,e.point,i):1!==e.joint&&e.handleIn?Ce(t.point,e.handleIn,e.point,i):fe(t.point,e.point,i)}function $i(t,e,i,n){return 2===t?i.mirror(e):3===t?Gi(e,i,n):n}function Fi(t,e,i,n){const s=n?t.point:e.point;let r;r=1!==t.joint&&t.handleOut?1!==e.joint&&e.handleIn?n?t.handleOut:e.handleIn:t.handleOut:1!==e.joint&&e.handleIn?e.handleIn:n?e.point:t.point;const o=s.getDirectionTo(r);return[ce.fromDirection(o,i,s),o+(n?Math.PI:0)]}function Vi(t,e,i){let n,s=null,r=null,o=null,a=null,l=!1,c=!1;if(1!==t.joint&&t.handleOut)if(1!==e.joint&&e.handleIn){o=fe(t.point,t.handleOut,i),a=fe(e.handleIn,e.point,i);const u=fe(t.handleOut,e.handleIn,i);s=fe(o,u,i),r=fe(u,a,i),n=fe(s,r,i),l=c=!0}else n=Ce(t.point,t.handleOut,e.point,i),r=Pe(t.point,t.handleOut,e.point,i,!0),o=Pe(t.point,t.handleOut,e.point,i,!1),l=!0;else 1!==e.joint&&e.handleIn?(n=Ce(t.point,e.handleIn,e.point,i),s=Pe(t.point,e.handleIn,e.point,i,!1),a=Pe(t.point,e.handleIn,e.point,i,!0),c=!0):n=fe(t.point,e.point,i);const u=t.type>=2,h=Qi(u?t.type:0,ce.fromObject(n),s?ce.fromObject(s):null,r?ce.fromObject(r):null);return l?t=Qi(u?0:t.type,t.point,t.handleIn,ce.fromObject(o)):u&&(t=nn(t,0)),c&&(e=Qi(e.type,e.point,ce.fromObject(a),e.handleOut)),[t,h,e]}function Hi(t,e){return 0===e?t.handleIn:t.handleOut}function Gi(t,e,i){return null==i?e.mirror(t):ce.fromAngle(t.getAngleTo(e),t.distanceTo(i),t)}function Zi(t,e,i,n){return 1!==e.joint&&e.handleOut?1!==i.joint&&i.handleIn?function(t,e,i,n,s,r=3){return t.x+r<Math.min(e.x,i.x,n.x,s.x)||t.x-r>Math.max(e.x,i.x,n.x,s.x)||t.y+r<Math.min(e.y,i.y,n.y,s.y)||t.y-r>Math.max(e.y,i.y,n.y,s.y)?null:me(t,(t=>Ue(e,i,n,s,t)),r)}(t,e.point,e.handleOut,i.handleIn,i.point,n):je(t,e.point,e.handleOut,i.point,n):1!==i.joint&&i.handleIn?je(t,e.point,i.handleIn,i.point,n):pe(t,e.point,i.point,n)}function Yi(t,e){return!(t.type!==e.type||t.joint!==e.joint||null==t.handleIn&&null!=e.handleIn||null==t.handleOut&&null!=e.handleOut)}function Qi(t,e,i=null,n=null){let s=0;if(null!=i&&null!=n){const t=e.distanceTo(i),r=e.distanceTo(n);a(i.distanceTo(n),t+r)&&(s=a(t,r)?2:3)}else null==i&&null==n&&(s=1);return new Di(e,t,s,i,n)}function Ji(t,e){return new Di(e.point(t.point.x,t.point.y),t.type,t.joint,t.handleIn?e.point(t.handleIn.x,t.handleIn.y):null,t.handleOut?e.point(t.handleOut.x,t.handleOut.y):null)}function qi(t,e){return e.equals(t.point)?t:new Di(e,t.type,t.joint,t.handleIn,t.handleOut)}function Ki(t,e,i,n){return new Di(t.point,t.type,n??t.joint,e,i)}function Xi(t,e){if(0===e){if(!t.handleIn)return t;let e=t.joint;return 2!==e&&3!==e||(e=0),new Di(t.point,t.type,e,null,t.handleOut)}if(!t.handleOut)return t;let i=t.joint;return 2!==i&&3!==i||(i=0),new Di(t.point,t.type,i,t.handleIn,null)}function tn(t,e,i){const n=Hi(t,i);if(null==e){if(null==n)return t}else if(null!=n&&e.equals(n))return t;return 0===i?new Di(t.point,t.type,t.joint,e,$i(t.joint,t.point,e,t.handleOut)):new Di(t.point,t.type,t.joint,$i(t.joint,t.point,e,t.handleIn),e)}function en(t,e){if(t.joint===e)return t;if(1===e)return new Di(t.point,t.type,e,t.handleIn,t.handleOut);let i=t.handleIn,n=t.handleOut;switch(null==i&&(i=null==n?t.point:n.mirror(t.point)),e){case 2:n=i.mirror(t.point);break;case 3:n=Gi(t.point,i,n);break;case 0:null==n&&(n=i.mirror(t.point))}return new Di(t.point,t.type,e,i,n)}function nn(t,e){return t.type===e?t:new Di(t.point,e,t.joint,t.handleIn,t.handleOut)}function sn(t,e){return new Di(t.point,e??t.type,t.joint,t.handleOut,t.handleIn)}function rn(t,e,i,n){if(0===e&&0===i)return t;const s=0===n,r=s?t.handleIn:t.handleOut;if(null==r)return t;const o=s?t.handleOut:t.handleIn,a=r.shifted(e,i);let l=o;switch(t.joint){case 2:l=a.mirror(t.point);break;case 3:l=Gi(t.point,a,l)}return s?Ki(t,a,l):Ki(t,l,a)}function on(t,e,i,n){return 0===n?null==t.handleIn?t:rn(t,e-t.handleIn.x,i-t.handleIn.y,0):null==t.handleOut?t:rn(t,e-t.handleOut.x,i-t.handleOut.y,1)}function an(t,e,i){return on(t,e,i,0)}function ln(t,e,i){return on(t,e,i,1)}function cn(t,e,i){return 0===e&&0===i?t:new Di(t.point.shifted(e,i),t.type,t.joint,t.handleIn?t.handleIn.shifted(e,i):null,t.handleOut?t.handleOut.shifted(e,i):null)}function un(t,e,i){return cn(t,e-t.point.x,i-t.point.y)}function hn(t){return 1===t?Skia.SkPathFillType.EvenOdd:Skia.SkPathFillType.Winding}class dn{#t=null;#G=null;#e=null;#Z=1;#C=null;#Y=!1;setInternalPath(t){this.#t&&this.#t!==t&&this.#t.delete(),this.#t=t}convertToPath(){return this.#Q(!0)}#Q(t){const e=new Skia.SkPath;return e.fillType=hn(this.#Z),this.preparePath(e,t),this.#Y&&e.reverse(),this.#C&&!this.#C.isIdentity&&e.transform(this.#C),e}get path(){return this.#t??=this.#Q(!1)}get pathLength(){return this.#G??=this.path.length}get bounds(){return this.#e??=Ve.fromLTRBObject(this.path.computeTightBounds())}get fillRule(){return this.#Z}set fillRule(t){this.#Z!==t&&(this.#Z=t,this.#J()&&(this.#t.fillType=hn(t)))}get isDistorted(){return this.#C&&!this.#C.isIdentity}get matrix(){return this.#C}set matrix(t){this.setMatrix(t)}setMatrix(t,e){if(e){if(!t||t.isIdentity)return!1;this.#C&&!this.#C.isIdentity&&(t=t.clone().multiply(this.#C))}if(ii(t?.value,this.#C?.value))return!1;const i=this.#C;if(this.#C=this.setInternalMatrix(t),this.#t){const e=this.#t.copy();this.invalidate(),this.#t=e,i&&!i.isIdentity&&e.transform(i.clone().inverse()),t&&!t.isIdentity&&e.transform(t)}else this.invalidate();return!0}setInternalMatrix(t){return t}get reversed(){return this.#Y}set reversed(t){this.#Y!==t&&(this.#Y=t,this.#J()&&this.#t.reverse())}#J(){if(!this.#t)return!1;const t=this.#t.copy();return this.#t.delete(),this.#t=t,!0}invalidate(){this.#t?.delete(),this.#t=null,this.#G=null,this.#e=null}dispose(){this.#t?.delete(),this.#t=null,this.#G=0,this.#e=null,this.#C=null,this.#Y=!1}equals(t){return this.#Y===t.#Y&&this.#Z===t.#Z&&ii(this.#C?.value,t.#C?.value)}applyJSON(t){null!=t.rule&&(this.#Z=t.rule),t.matrix&&(this.#C=t.matrix),t.reversed&&(this.#Y=!0)}clone(){const t=this.cloneSelf();return t.#t=this.#t?this.#t.clone():null,t.#G=this.#G,t.#Z=this.#Z,t.#e=this.#e,t.#C=this.#C,t.#Y=this.#Y,t}toJSON(){return{rule:1!==this.#Z?this.#Z:void 0,matrix:this.#C&&!this.#C.isIdentity?this.#C:void 0,reversed:!!this.#Y||void 0}}toString(){return this.path.toString()}contains(t,e){return this.path.contains(t.x,t.y,e)}isPointInBounds(t,e=0){return this.bounds.contains(t.x,t.y,e)}static fromJSON(t){if(Array.isArray(t))return new this(...t);const e=new this;return e.applyJSON(t),e}}function fn(t,e,i){return null==i?t.map((t=>en(t,e))):0===i.size?[...t]:t.map(((t,n)=>i.has(n)?en(t,e):t))}function pn(t,e,i){return t[i]&&t[i].type!==e?((t=[...t])[i]=nn(t[i],e),t):t}function gn(t,e,i){return!t[i]||e.equals(t[i])||((t=[...t])[i]=e),t}function mn(t,e,i,n){return 0===e&&0===i?t:null==n?t.map((t=>cn(t,e,i))):0===n.size?[...t]:t.map(((t,s)=>n.has(s)?cn(t,e,i):t))}function vn(t,e,i,n,s){const r=t[i];if(!r)return t;let o;if(s&&2!==r.joint&&Oi(r)){const t=e.mirror(r.point);o=0===n?Ki(r,e,t):Ki(r,t,e)}else o=on(r,e.x,e.y,n);return o.equals(r)||((t=[...t])[i]=o),t}function yn(t,e,i){const n=t[e];if(!n)return null;let s=!1;if(2===n.type){if(!i)return null;s=!0}if(3===n.type||s){let i=e-1;for(;i>=0;){switch(t[i].type){case 1:return i;case 2:case 3:return e===i+1?null:i+1}i--}return null}if(!t[++e]||1===t[e].type)return null;if(i&&t[e].type<2){const i=t.length;for(;++e<i;)switch(t[e].type){case 1:return e-1;case 2:case 3:return e}return null}return e}function xn(t,e){for(;e>=0;){if(1===t[e].type)return e;e--}return 0}function bn(t,e=0){const i=t.length;let n=!1;for(;e<i;){switch(t[e].type){case 2:case 3:return e;case 1:if(n)return e-1;n=!0}e++}return e-1}function wn(t,e,i,n,s){const r=t[e],o=t[i];return null==n?(null==s||o.handleIn.equals(s)||((t=[...t])[i]=an(o,s.x,s.y)),t):null==s?(r.handleOut.equals(n)||((t=[...t])[e]=ln(r,n.x,n.y)),t):(r.handleOut.equals(n)&&o.handleIn.equals(s)||((t=[...t])[e]=ln(r,n.x,n.y),t[i]=an(o,s.x,s.y)),t)}function Mn(t,e,i,n=.5,s=!1){const r=t[e],o=t[i];let a;if(1!==r.joint&&r.handleOut){if(1!==o.joint&&o.handleIn)return t;if(!s)return t;a=Fe(r.point,r.handleOut,o.point,n)}else if(1!==o.joint&&o.handleIn){if(!s)return t;a=Fe(r.point,o.handleIn,o.point,n)}else a=s?function(t,e,i=2/3){return Fe(t,fe(t,e,.5),e,i)}(r.point,o.point,n):n<.5?[fe(r.point,o.point,n),null]:[null,fe(r.point,o.point,n)];return t=[...t],a[0]&&(t[e]=Qi(r.type,r.point,r.handleIn,ce.fromObject(a[0]))),a[1]&&(t[i]=Qi(o.type,o.point,ce.fromObject(a[1]),o.handleOut)),t}function Sn(t,e){const i=t[e];return!i||Oi(i)||(t=[...t],1===i.joint?t[e]=new Di(i.point,i.type,0,i.point,i.point):t[e]=new Di(i.point,i.type,i.joint,i.handleIn||i.point,i.handleOut||i.point)),t}function kn(t,e,i,n){const s=t[e],r=t[i];let o,a=null;return function(t,e){return!(1===t.joint||!t.handleOut||1===e.joint||!e.handleIn)}(s,r)?o=function(t,e,i,n,s){const r=Ue(t,e,i,n,s),o=xe(t,n,be(s,3)),a=we(s,3),l=fe(e,i,s),c=fe(fe(t,e,s),l,s),u=fe(l,fe(i,n,s),s),h=1-s,d=s*h;return c.x=(c.x-r.x)/d+t.x-t.x/s,c.y=(c.y-r.y)/d+t.y-t.y/s,u.x=(u.x-r.x)/d+n.x-n.x/h,u.y=(u.y-r.y)/d+n.y-n.y/h,t=>{const e=ye(t,o,a),i=(t.x-e.x)/d,n=(t.y-e.y)/d;return[{x:c.x+i+e.x/s,y:c.y+n+e.y/s},{x:u.x+i+e.x/h,y:u.y+n+e.y/h}]}}(s.point,s.handleOut,r.handleIn,r.point,n):s.handleOut&&1!==s.joint?(a=0,o=ze(s.point,s.handleOut,r.point,n)):(a=1,o=ze(s.point,r.handleIn,r.point,n)),{func:o,fromIndex:e,toIndex:i,handleType:a}}function _n(t,e){return null==e.handleType?e.func(t):0===e.handleType?[e.func(t),null]:[null,e.func(t)]}function In(t,e,i){const n=yn(t,e);if(null==n)return t;const s=Vi(t[e],t[n],i);return(t=[...t])[e]=s[0],t[n]=s[2],t.splice(e+1,0,s[1]),t}function Cn(t,e,i){if(!t[e])return t;if(1===t[e].type){t=[...t];const n=new Di(i,1,2),s=t.length<=1||!t[e+1]||1===t[e+1].type;t[e]=nn(t[e],s?2:0),t.splice(e,0,n)}else if(2===t[e].type){t=[...t];const n=new Di(i,2,2),s=t.length<=1||!t[e-1]||t[e-1].type>=2;t[e]=nn(t[e],s?1:0),t.splice(e+1,0,n)}return t}function Ln(t,e,i){const n=t[e];return n&&Hi(n,i)?((t=[...t])[e]=Xi(n,i),t):t}function Nn(t,e){if(t=[...t],null==e||0===e.size)return t;for(const i of[...e].sort(at)){switch(t[i].type){case 1:null!=t[i+1]&&1!==t[i+1].type&&(t[i+1]=nn(t[i+1],1));break;case 2:case 3:null!=t[i-1]&&0===t[i-1].type&&(t[i-1]=nn(t[i-1],t[i].type))}t.splice(i,1)}return t}function jn(t){const e=[];for(const i of $n(t)){const t=i.length-1;if(0===t){e.unshift(sn(i[0],1));continue}const n=3===i[t].type;n&&i.push(i.shift()),i[0]=sn(i[0],n?3:2),i[t]=sn(i[t],1);for(let e=1;e<t;e++)i[e]=sn(i[e],0);i.reverse(),e.unshift(...i)}return e}function zn(t,e){return!e||e.isIdentity?[...t]:t.map((t=>Ji(t,e)))}function Pn(t,e,i){let n,s;for(let r=t.length-1;r>=0;r--)if(s=t[r],1!==s.joint){if(s.handleOut&&(n=e.distanceTo(s.handleOut),n<=i))return{index:r,distance:n,node:s,handle:1};if(s.handleIn&&(n=e.distanceTo(s.handleIn),n<=i))return{index:r,distance:n,node:s,handle:0}}return null}function Tn(t,e){if(t.length<=1||1===t[e]?.type)return t;let i=bn(t,e);const n=xn(t,e);if(n===i)return t;let s=!1;if(3!==t[i].type){if(!t[i].point.equals(t[n].point))return t;s=!0}if(t=[...t],s){const s=1!==t[i].joint?t[i].handleIn:null;t[n]=new Di(t[n].point,1,s?0:t[n].joint,s,1!==t[n].joint?t[n].handleOut:null),t.splice(i,1),e===i&&e--,i--,n!==i&&(t[i]=nn(t[i],3))}return n===i||(t[e]=nn(t[e],1),i>e&&(t[i]=nn(t[i],0)),t[e-1]=nn(t[e-1],3),n<e-1&&(t[n]=nn(t[n],0)),t.splice(n,i-n+1,...t.slice(e,i+1),...t.slice(n,e))),t}function An(t){const e=t.length;if(e<2)return 0;let i,n=0,s=null,r=null;for(let o=0;o<e;o++)i=t[o],null!=r&&1!==i.type?(n+=Ri(r,i),2===i.type?s=r=null:3===i.type?(n+=Ri(i,s),s=r=null):r=i):s=r=i;return n}function Dn(t){return f(t,8)}function En(t,e){const i=t.length;if(e??=new Skia.SkPath,0===i)return e;let n,s=null,r=null;for(let o=0;o<i;o++)n=t[o],null!=r&&1!==n.type?(On(e,r,n),2===n.type?s=r=null:3===n.type?(On(e,n,s),e.close(),s=r=null):r=n):(e.moveTo(n.point.x,n.point.y),s=r=n);return e}function On(t,e,i){1!==i.joint&&i.handleIn?1!==e.joint&&e.handleOut?t.cubicTo(e.handleOut.x,e.handleOut.y,i.handleIn.x,i.handleIn.y,i.point.x,i.point.y):t.quadTo(i.handleIn.x,i.handleIn.y,i.point.x,i.point.y):1!==e.joint&&e.handleOut?t.quadTo(e.handleOut.x,e.handleOut.y,i.point.x,i.point.y):t.lineTo(i.point.x,i.point.y)}function Wn(t){const e=[],i=[];return t.walk(((t,n,s,r)=>{switch(t){case Skia.SkPathVerb.Move:i.length>0&&Rn(e,i.splice(0)),i.push(new ce(n.x,n.y),null,null);break;case Skia.SkPathVerb.Close:Rn(e,i.splice(0),!0);break;case Skia.SkPathVerb.Line:i.push(new ce(n.x,n.y),null,null);break;case Skia.SkPathVerb.Quad:i.length>0&&(i[i.length-1]=new ce(n.x,n.y)),i.push(new ce(s.x,s.y),null,null);break;case Skia.SkPathVerb.Cubic:i.length>0&&(i[i.length-1]=new ce(n.x,n.y)),i.push(new ce(r.x,r.y),new ce(s.x,s.y),null)}}),!1),i.length>0&&Rn(e,i),e}function Rn(t,e,i=!1){let n=e.length;if(0!==n)if(n-=3,0!==n){if(i&&null==e[1]&&null==e[n+2]&&a(e[0].distanceTo(e[n]),0)?(t.push(Qi(1,e[0],e[n+1],e[2])),n-=3):t.push(Qi(1,e[0],e[1],e[2])),n>0){for(let i=3;i<n;i+=3)t.push(Qi(0,e[i],e[i+1],e[i+2]));t.push(Qi(i?3:2,e[n],e[n+1],e[n+2]))}}else t.push(Qi(1,e[0],e[1],e[2]))}function Bn(t){const e=[],i=t.length;if(!i)return e;let n=!1,s=!0;for(let r=0;r<i;r++)switch(t[r].type){case 1:s||e.push(r-1),e.push(r),s=!1,n=!0;break;case 2:case 3:e.push(r),s=!0,n=!1;break;case 0:n||(e.push(r),n=!0,s=!1)}return s||e.push(i-1),e}function Un(t,e){if(e??=Bn(t),e.length<=2)return[[...t]];const i=[];for(let n=0;n<e.length;n+=2)i.push(t.slice(e[n],e[n+1]+1));return i}function*$n(t){const e=[];for(const i of t)1===i.type&&e.length>0&&(yield e.splice(0)),e.push(i);e.length>0&&(yield e)}function Fn(t,e){const i=[];let n=0;for(let s=0;s<e.length;s+=2){let r=t[e[s]];const o=[n];for(let i=e[s]+1;i<=e[s+1];i++)n+=Ri(r,t[i]),o.push(n),r=t[i];3===r.type&&(n+=Ri(r,t[e[s]])),o.push(n),i.push(o)}return i}const Vn=[0,0,0,0],Hn=[0,0,0,0],Gn=.551784777779014,Zn=[1,-1,0,0,-1,1,0,0],Yn=[0,1,1,1,1,0,0,0],Qn=[0,1,1,2,2,3,3,0];function Jn(t,e,i,n,s,r){if(function(t){return!t||!!Array.isArray(t)&&0===t[0]&&0===t[1]&&0===t[2]&&0===t[3]}(s)){if(r)return[Qi(1,new ce(t,e)),Qi(0,new ce(t+i,e)),Qi(0,new ce(t+i,e+n)),Qi(3,new ce(t,e+n))];s=Vn}else Array.isArray(s)||(Hn[0]=Hn[1]=Hn[2]=Hn[3]=s,s=Hn);const o=i&&n?Math.min(i/(s[0]+s[1]),n/(s[1]+s[2]),i/(s[2]+s[3]),n/(s[3]+s[0]),1):0,a=[];let l;for(let r=0;r<8;r++){const c=(r+6)%8;l=s[Qn[r]]*o;const u=new ce(t+i*Yn[r]+Zn[r]*l,e+n*Yn[c]+Zn[c]*l);l*=Gn;const h=new ce(u.x-l*Zn[r],u.y-l*Zn[c]);let d;d=r%2?Qi(7===r?3:0,u,null,h):Qi(0===r?1:0,u,h,null),a.push(d)}if(r){let t=a.length-1;for(let e=0;e<t;e+=2){const i=e+1;a[e].point.equals(a[i].point)&&(a[e]=tn(a[e],a[i].handleOut,1),a.splice(i,1),e--,t--)}3!==a[t].type&&(a[t]=nn(a[t],3))}return a}function qn(t,e){const i=[],n=t.length-1;if(n<0)return i;i.push(Qi(1,t[0]));for(let e=1;e<n;e++)i.push(Qi(0,t[e]));return n>0&&i.push(Qi(e?3:2,t[n])),i}function Kn(t,e,i,n,s,r,o,a,l){const c=function(t,e,i){const n=2*Math.PI/t;i[0]=(i[0]-90)*Dt,i[1]=(i[1]-90)*Dt-n/2;const s=new Array(2*t);s[0]=Qi(1,ts(e[0],i[0])),i[0]+=n,i[1]+=n;const r=2*t-1;for(let t=1;t<r;t++){const r=t%2;s[t]=Qi(0,ts(e[r],i[r])),i[r]+=n}return s[r]=Qi(3,ts(e[1],i[1])),s}(t,[i,e],[o+a,r+a]);if(!n&&!s)return l?c:c.map((t=>Ki(t,t.point,t.point,2)));const u=[s*i*.47829,n*e*.47829];return c.map(((t,e)=>{const i=ts(u[e%2],t.point.direction-Math.PI/2,t.point);return Ki(t,i,i.mirror(t.point),2)}))}function Xn(t,e,i,n=0,s){const r=function(t,e,i=0){i-=90,i*=Dt;const n=2*Math.PI/t,s=new Array(t);s[0]=Qi(1,ts(e,i)),i+=n;let r=1;for(;r<t-1;r++)s[r]=Qi(0,ts(e,i)),i+=n;return s[r]=Qi(3,ts(e,i)),s}(t,e,n);return i?(i*=e/4,r.map((t=>{const e=ts(i,t.point.direction-Math.PI/2,t.point);return Ki(t,e,e.mirror(t.point),2)}))):s?r:r.map((t=>Ki(t,t.point,t.point,2)))}function ts(t,e,i=ce.ZERO){return new ce(i.x+t*Math.cos(e),i.y+t*Math.sin(e))}class es extends dn{#q=null;#K=null;constructor(t){super(),this.nodes=t}toJSON(){const t=super.toJSON();return t.nodes=this.nodes,t}applyJSON(t){this.nodes=t.nodes,super.applyJSON(t)}get isEmpty(){return 0===this.nodes.length}get firstNode(){return this.nodes[0]||null}get lastNode(){return this.nodes[this.nodes.length-1]||null}get contours(){return this.#q??=Bn(this.nodes)}get contoursLength(){return this.contours.length>>1}get contoursDimensions(){return this.#K??=Fn(this.nodes,this.contours)}setNodes(t){return t!==this.nodes&&(this.nodes.splice(0),this.nodes.push(...t),this.invalidate(),!0)}setInternalMatrix(t){if(!t||t.isIdentity)return null;const e=this.nodes,i=e.length;for(let n=0;n<i;n++)e[n]=Ji(e[n],t);return null}preparePath(t){En(this.nodes,t)}getPositionInfo(t,e,i=null,n=null){if(!this.isPointInBounds(t,Math.max(e||0,i||0,n||0)))return null!=i?Pn(this.nodes,t,i):null;if(null!=e){const i=function(t,e,i){let n,s;for(let r=t.length-1;r>=0;r--)if(s=t[r],n=e.distanceTo(s),n<=i)return{index:r,distance:n,node:s};return null}(this.nodes,t,e);if(i)return i}if(null!=i){const e=Pn(this.nodes,t,i);if(e)return e}return null!=n?function(t,e,i){let n,s,r,o,l=null,c=Number.POSITIVE_INFINITY,u=null,h=null;const d=t.length;for(let f=0;f<d;f++)if(s=t[f],h&&1!==s.type){if(o=Zi(e,h,s,i),null!=o&&(r=e.distanceTo(Ui(h,s,o)),r<=i&&r<c&&(c=r,l=f-1,n=o,a(c,0))))return{index:l,distance:c,percent:n};switch(s.type){case 3:if(o=Zi(e,s,u,i),null!=o&&(r=e.distanceTo(Ui(s,u,o)),r<=i&&r<c&&(c=r,l=f,n=o,a(c,0))))return{index:l,distance:c,percent:n};u=h=null;break;case 2:u=h=null;break;default:h=s}}else u=h=s;return null==l?null:{index:l,distance:c,percent:n}}(this.nodes,t,n):null}equals(t){const e=this.nodes.length;if(e!==t.nodes.length)return!1;if(!super.equals(t))return!1;for(let i=0;i<e;i++)if(!this.nodes[i].equals(t.nodes[i]))return!1;return!0}cloneSelf(){const t=new es(this.nodes.slice());return t.#q=this.#q,t.#K=this.#K,t}invalidate(){this.#q=this.#K=null,super.invalidate()}dispose(){super.dispose(),this.nodes.splice(0),this.#q=this.#K=null}static fromRect(t){const e=new Skia.SkPath;return e.moveTo(t.left,t.top),e.lineTo(t.right,t.top),e.lineTo(t.right,t.bottom),e.lineTo(t.left,t.bottom),e.close(),this.fromSkPath(e,!0)}static fromSkPath(t,e){const i=new this(Wn(t));return i.fillRule=t.fillType===Skia.SkPathFillType.Winding?0:1,e&&i.setInternalPath(t),i}static fromString(t){const e=Skia.SkPath.MakeFromString(t,!1);return e.fillType=Skia.SkPathFillType.EvenOdd,this.fromSkPath(e,!0)}}const is=ce.ZERO,ns=new ce(.5,0),ss=new ce(1,0),rs=new ce(0,.5),os=new ce(.5,.5),as=new ce(1,.5),ls=new ce(0,1),cs=new ce(.5,1),us=new ce(1,1),hs=[is,ns,ss,rs,os,as,ls,cs,us],ds=[{x:1,y:1},{x:2,y:1},{x:3,y:1},{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:1,y:3},{x:2,y:3},{x:3,y:3}];function fs(t,e,i){return new Ve(-t.x*e,-t.y*i,e,i)}function ps(t,e){if(os.equals(t))return ce.ZERO;let i=0,n=0;return.5!==t.x&&(i=(e.left-e.right)*t.x-e.left),.5!==t.y&&(n=(e.top-e.bottom)*t.y-e.top),new ce(i,n)}function gs(t){return.5===t.x&&.5===t.y}class ms extends dn{#j;#X;#tt;constructor(t=0,e=0,i=null){super(),this.#j=t,this.#X=e,this.#tt=i||os}get width(){return this.#j}set width(t){this.#j!==t&&(this.#j=t,this.invalidate())}get height(){return this.#X}set height(t){this.#X!==t&&(this.#X=t,this.invalidate())}get pin(){return this.#tt}set pin(t){this.#tt.equals(t)||(this.#tt=t,this.invalidate())}dispose(){super.dispose(),this.#tt=null}get x(){return this.#j*(.5-this.#tt.x)}get y(){return this.#X*(.5-this.#tt.y)}get isCircle(){return this.#j===this.#X}equals(t){return this.#j===t.#j&&this.#X===t.#X&&this.#tt.equals(t.#tt)&&super.equals(t)}cloneSelf(){return new ms(this.#j,this.#X,this.#tt)}preparePath(t,e){const{x:i,y:n}=this;if(e){const e=4*Math.tan(Math.PI/8)/3,s=this.#j/2,r=this.#X/2,o=s*e,a=r*e;t.moveTo(i+s,n),t.cubicTo(i+s,n+a,i+o,n+r,i,n+r),t.cubicTo(i-o,n+r,i-s,n+a,i-s,n),t.cubicTo(i-s,n-a,i-o,n-r,i,n-r),t.cubicTo(i+o,n-r,i+s,n-a,i+s,n),t.close()}else this.#j===this.#X?t.addCircle(i,n,this.#j/2):t.addEllipse(i,n,this.#j/2,this.#X/2)}toJSON(){const t=super.toJSON();return t.width=this.#j,t.height=this.#X,t.pin=os.equals(this.#tt)?void 0:this.#tt,t}applyJSON(t){this.#j=t.width,this.#X=t.height,t.pin&&(this.#tt=t.pin),super.applyJSON(t)}}class vs extends dn{#et;#it=!1;constructor(t,e=!1){super(),this.#et=t,this.#it=e}dispose(){super.dispose(),this.#et=null}get points(){return this.#et}set points(t){this.#et=t,this.invalidate()}get isClosed(){return this.#it}set isClosed(t){this.#it!==t&&(this.#it=t,this.invalidate())}toJSON(){const t=super.toJSON();return t.points=this.#et,this.#it&&(t.closed=!0),t}applyJSON(t){this.#et=t.points,t.closed&&(this.#it=!0),super.applyJSON(t)}getNodeByPosition(t,e){let i,n;for(let s=this.#et.length-1;s>=0;s--)if(n=this.#et[s],i=t.distanceTo(n),i<=e)return{index:s,distance:i,node:n};return null}getProjectionInfo(t,e){let i,n,s,r,o=Number.POSITIVE_INFINITY,l=null,c=null,u=this.#et.length-1,h=0;for(this.#it||(h=u,u--);u>=0;u--)if(r=pe(t,this.#et[h],this.#et[u],e),null!=r){if(s=fe(this.#et[h],this.#et[u],r),n=t.distanceTo(s),h=u,n<=e&&n<o&&(c=r,o=n,l=u,i=ce.fromObject(s),a(o,0)))break}else h=u;return null==l?null:(c=1-c,{index:l,distance:o,node:i,percent:c})}getPositionInfo(t,e,i=null){if(null!=e){const i=this.getNodeByPosition(t,e);if(i)return i}return null!=i?this.getProjectionInfo(t,i):null}getPointsInsertAfter(t,e){return vs.addPointAfter(this.#et,t,e,this.#it)}getPointsMovedBy(t,e,i){return vs.movePointsBy(this.#et,t,e,i)}equals(t){if(this.#it!==t.#it)return!1;const e=this.#et.length;if(t.#et.length!==e)return!1;if(!super.equals(t))return!1;for(let i=0;i<e;i++)if(!this.#et[i].equals(t.#et[i]))return!1;return!0}setInternalMatrix(t){return!t||t.isIdentity||(this.#et=t.transformPointArray(this.#et)),null}cloneSelf(){return new vs(this.#et.slice(),this.#it)}get isLine(){return!this.#it&&2===this.#et.length}toString(){return this.#et.map((t=>[f(t.x,8),f(t.y,8)])).flat().join(" ")}preparePath(t){t.addPoly(this.#et,this.#it)}static movePointsBy(t,e,i,n){return 0===e&&0===i?t:n?0===n.size?t:t.map(((t,s)=>n.has(s)?t.shifted(e,i):t)):t.map((t=>t.shifted(e,i)))}static addPointAfter(t,e,i,n){return t[e]?e===t.length-1?n?((t=t.slice()).push(ce.fromObject(fe(t[e],t[0],i))),t):t:((t=t.slice()).splice(e+1,0,ce.fromObject(fe(t[e],t[e+1],i))),t):t}static deletePoints(t,e){if(null==e||0===e.size)return t.slice();const i=[];for(let n=0,s=t.length;n<s;n++)e.has(n)||i.push(t[n]);return i}static canInterpolatePoints(t,e){return t.length===e.length}}class ys{constructor(t=0){"number"==typeof t?(this.value=t,this.isSimple=!0):(this.isSimple=!1,this.value=t)}get isZero(){return this.isSimple?0===this.value:0===this.value[0]&&0===this.value[1]&&0===this.value[2]&&0===this.value[3]}get simpleValue(){if(this.isSimple)return this.value;const t=this.value;return(t[0]+t[1]+t[2]+t[3])/4}get isSimpleValue(){if(this.isSimple)return!0;const t=this.value;return t[0]===t[1]&&t[1]===t[2]&&t[2]===t[3]}add(t){if(t<0&&this.isZero)return this;if(this.isSimple)return new ys(Math.max(0,this.value+t));const e=this.value.slice();for(let i=0;i<4;i++)e[i]=Math.max(0,e[i]+t);return new ys(e)}split(){if(this.isSimple){const t=this.value;return new ys([t,t,t,t])}return this.clone()}join(){return this.isSimple?this.clone():new ys(this.simpleValue)}equals(t){if(this.isSimple)return t.isSimple&&this.value===t.value;for(let e=0;e<4;e++)if(this.value[e]!==t.value[e])return!1;return!0}toJSON(){return this.value}clone(){return new ys("number"==typeof this.value?this.value:[...this.value])}static fromJSON(t){return new ys(t)}static Same(t,e){return t?e?t.equals(e):0===t.value:!e||0===e.value}}class xs extends dn{#j;#X;#nt;#tt;constructor(t=1,e=1,i=null,n=null){super(),this.#j=t,this.#X=e,this.#nt=i||null,this.#tt=n||is}dispose(){super.dispose(),this.#nt=null,this.#tt=null}get width(){return this.#j}set width(t){this.#j!==t&&(this.#j=t,this.invalidate())}get height(){return this.#X}set height(t){this.#X!==t&&(this.#X=t,this.invalidate())}get pin(){return this.#tt}set pin(t){this.#tt.equals(t)||(this.#tt=t,this.invalidate())}get radius(){return this.#nt??=new ys}set radius(t){this.#nt&&this.#nt.equals(t)||(this.#nt=t,this.invalidate())}get x(){return-this.#tt.x*this.#j}get y(){return-this.#tt.y*this.#X}get diagonal(){return Math.sqrt(this.#j**2+this.#X**2)}get isRounded(){return null!=this.#nt&&!this.#nt.isZero}get isSimple(){return!this.#nt||this.#nt.isSimple}equals(t){return this.#j===t.#j&&this.#X===t.#X&&this.#tt.equals(t.#tt)&&ys.Same(this.#nt,t.#nt)&&super.equals(t)}toJSON(){const t=super.toJSON();return t.width=this.#j,t.height=this.#X,t.radius=0!==this.#nt?.value?this.#nt:void 0,is.equals(this.#tt)||(t.pin=this.#tt),t}applyJSON(t){this.#j=t.width,this.#X=t.height,t.radius&&(this.#nt=t.radius),t.pin&&(this.#tt=t.pin),super.applyJSON(t)}cloneSelf(){return new xs(this.#j,this.#X,this.#nt?this.#nt.clone():null,this.#tt)}preparePath(t,e){const{x:i,y:n}=this;if(this.isRounded){const s=this.#nt?.value||0;e?En(Jn(i,n,this.#j,this.#X,s,!0),t):Array.isArray(s)?t.addCornerRadiusRect(i,n,this.#j,this.#X,...s):t.addCornerRadiusRect(i,n,this.#j,this.#X,s,s,s,s)}else t.addRect(i,n,i+this.#j,n+this.#X);t.close()}}class bs extends dn{#st;#nt;#rt;#ot;#tt;constructor(t,e,i=0,n=0,s=null){super(),this.#st=t,this.#nt=e,this.#rt=i||0,this.#ot=n||0,this.#tt=s||os}get sides(){return this.#st}set sides(t){this.#st!==t&&(this.#st=t,this.invalidate())}get radius(){return this.#nt}set radius(t){this.#nt!==t&&(this.#nt=t,this.invalidate())}get cornerRadius(){return this.#rt}set cornerRadius(t){this.#rt!==t&&(this.#rt=t,this.invalidate())}get angle(){return this.#ot}set angle(t){this.#ot!==t&&(this.#ot=t,this.invalidate())}get pin(){return this.#tt}set pin(t){this.#tt.equals(t)||(this.#tt=t,this.invalidate())}dispose(){super.dispose(),this.#tt=null}toJSON(){const t=super.toJSON();return t.sides=this.#st,t.radius=this.#nt,t.cornerRadius=this.#rt||void 0,t.angle=this.#ot||void 0,os.equals(this.#tt)||(t.pin=this.#tt),t}applyJSON(t){this.#st=t.sides,this.#nt=t.radius||0,this.#rt=t.cornerRadius||0,this.#ot=t.angle||0,t.pin&&(this.#tt=t.pin),super.applyJSON(t)}equals(t){return this.#st===t.#st&&this.#nt===t.#nt&&this.#rt===t.#rt&&this.#ot===t.#ot&&this.#tt.equals(t.#tt)&&super.equals(t)}cloneSelf(){return new bs(this.#st,this.#nt,this.#rt,this.#ot,this.#tt)}preparePath(t){t.addRoundRegularPolygon(0,0,this.#st,this.#nt,this.#nt,this.#rt,this.#rt,this.#ot);const e=this.#tt;if(gs(e))return;const i=t.computeTightBounds();if(i){const n=ps(e,i);n.isZero||t.offset(n.x,n.y)}}}class ws extends dn{#st;#at;#lt;#ct;#ut;#ht;#dt;#ot;#tt;constructor(t,e,i,n=0,s=0,r=0,o=0,a=0,l=null){super(),this.#st=t,this.#at=e,this.#lt=i,this.#ct=n||0,this.#ut=s||0,this.#ht=r||0,this.#dt=o||0,this.#ot=a||0,this.#tt=l||os}dispose(){super.dispose(),this.#tt=null}get sides(){return this.#st}set sides(t){this.#st!==t&&(this.#st=t,this.invalidate())}get outerRadius(){return this.#at}set outerRadius(t){this.#at!==t&&(this.#at=t,this.invalidate())}get innerRadius(){return this.#lt}set innerRadius(t){this.#lt!==t&&(this.#lt=t,this.invalidate())}get outerCornerRadius(){return this.#ct}set outerCornerRadius(t){this.#ct!==t&&(this.#ct=t,this.invalidate())}get innerCornerRadius(){return this.#ut}set innerCornerRadius(t){this.#ut!==t&&(this.#ut=t,this.invalidate())}get outerRotate(){return this.#ht}set outerRotate(t){this.#ht!==t&&(this.#ht=t,this.invalidate())}get innerRotate(){return this.#dt}set innerRotate(t){this.#dt!==t&&(this.#dt=t,this.invalidate())}get angle(){return this.#ot}set angle(t){this.#ot!==t&&(this.#ot=t,this.invalidate())}get pin(){return this.#tt}set pin(t){this.#tt.equals(t)||(this.#tt=t,this.invalidate())}toJSON(){const t=super.toJSON();return t.sides=this.#st,t.outerRadius=this.#at,t.innerRadius=this.#lt,t.outerCornerRadius=this.#ct||void 0,t.innerCornerRadius=this.#ut||void 0,t.outerRotate=this.#ht||void 0,t.innerRotate=this.#dt||void 0,t.angle=this.#ot||void 0,os.equals(this.#tt)||(t.pin=this.#tt),t}applyJSON(t){this.#st=t.sides,this.#at=t.outerRadius||0,this.#lt=t.innerRadius||0,this.#ct=t.outerCornerRadius||0,this.#ut=t.innerCornerRadius||0,this.#ht=t.outerRotate||0,this.#dt=t.innerRotate||0,this.#ot=t.angle||0,t.pin&&(this.#tt=t.pin),super.applyJSON(t)}equals(t){return this.#st===t.#st&&this.#at===t.#at&&this.#lt===t.#lt&&this.#ct===t.#ct&&this.#ut===t.#ut&&this.#ht===t.#ht&&this.#dt===t.#dt&&this.#ot===t.#ot&&this.#tt.equals(t.#tt)&&super.equals(t)}cloneSelf(){return new ws(this.#st,this.#at,this.#lt,this.#ct,this.#ut,this.#ht,this.#dt,this.#ot,this.#tt)}preparePath(t){if(t.addRoundStar(0,0,this.#st,this.#at,this.#lt,this.#ct,this.#ut,this.#ht,this.#dt,this.#ot),gs(this.#tt))return;const e=t.computeTightBounds();if(e){const i=ps(this.#tt,e);i.isZero||t.offset(i.x,i.y)}}}class Ms extends dn{#et;constructor(t,e){super(),this.#et=[t,e]}dispose(){super.dispose(),this.#et=null}get points(){return this.#et}set points(t){this.setPoints(t)}setPoints(t){return!this.hasPoints(t)&&(this.#et[0]=t[0],this.#et[1]=t[1],this.invalidate(),!0)}get from(){return this.#et[0]}set from(t){t.equals(this.#et[0])||(this.#et[0]=t,this.invalidate())}get to(){return this.#et[1]}set to(t){t.equals(this.#et[1])||(this.#et[1]=t,this.invalidate())}hasPoints(t){return this.#et[0].equals(t[0])&&this.#et[1].equals(t[1])}equals(t){return this.hasPoints(t.#et)&&super.equals(t)}toJSON(){const t=super.toJSON();return t.from=this.#et[0],t.to=this.#et[1],t}applyJSON(t){this.#et[0]=t.from,this.#et[1]=t.to,super.applyJSON(t)}cloneSelf(){return new Ms(this.#et[0],this.#et[1])}preparePath(t){const e=this.#et;t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y)}setInternalMatrix(t){return!t||t.isIdentity||(this.#et[0]=t.transformPoint(this.#et[0]),this.#et[1]=t.transformPoint(this.#et[1])),null}getPointsMovedBy(t,e,i){return 0===t&&0===e?this.#et.slice():null==i?[this.#et[0].shifted(t,e),this.#et[1].shifted(t,e)]:0===i.size?this.#et.slice():[i.has(0)?this.#et[0].shifted(t,e):this.#et[0],i.has(1)?this.#et[1].shifted(t,e):this.#et[1]]}movePointsBy(t,e,i){if(0===t&&0===e)return!1;let n=!1;for(const s of i)this.#et[s]&&(this.#et[s]=this.#et[s].shifted(t,e),n=!0);return n}getPositionInfo(t,e){let i,n;for(let s=1;s>=0;s--)if(n=this.#et[s],i=t.distanceTo(n),i<=e)return{index:s,distance:i,node:n};return null}}class Ss{constructor(){this.align=Skia.SkParagraphTextAlign.Start,this.valign=0,this.width=0,this.height=0,this.autoWidth=!0,this.autoHeight=!0,this.hinting=!1}clone(){const t=new Ss;return t.align=this.align,t.valign=this.valign,t.width=this.width,t.height=this.height,t.autoWidth=this.autoWidth,t.autoHeight=this.autoHeight,t}toJSON(){return{align:this.align,valign:this.valign,width:this.width,height:this.height,autoWidth:this.autoWidth,autoHeight:this.autoHeight}}static fromJSON(t){const e=new Ss;return e.align=t.align,e.valign=t.valign,e.width=t.width,e.height=t.height,e.autoWidth=t.autoWidth,e.autoHeight=t.autoHeight,e}setWidth(t){return!this.autoWidth&&(t<0&&(t=0),this.width!==t&&(this.width=t,!0))}setHeight(t){return!this.autoHeight&&(t<0&&(t=0),this.height!==t&&(this.height=t,!0))}setAlign(t){return this.align!==t&&(this.align=t,!0)}setVAlign(t){return this.valign!==t&&(this.valign=t,!0)}get adjustY(){if(this.autoHeight)return 0;switch(this.valign){case 1:return 1;case 2:return.5;case 0:return 0}}get adjustX(){if(this.autoWidth)switch(this.align){case Skia.SkParagraphTextAlign.Center:case Skia.SkParagraphTextAlign.Justify:return.5;case Skia.SkParagraphTextAlign.End:return 1}return 0}get maxWidth(){return this.autoWidth?Number.MAX_SAFE_INTEGER:this.width}get maxHeight(){return this.autoHeight?0:this.height}}class ks{#ft;#pt=null;#gt=null;#mt=null;constructor(t=""){this.#ft=t}toJSON(){return this.#ft}static fromJSON(t){return new ks(t??"")}clone(){const t=new ks(this.#ft);return t.#pt=this.#pt,t.#gt=this.#gt,t.#mt=this.#mt,t}invalidate(){this.#pt=null,this.#gt=null,this.#mt=null}get text(){return this.#ft}set text(t){this.#ft!==t&&(this.#ft=t,this.invalidate())}get nbText(){return null===this.#mt&&(this.#mt=this.#ft.replace(/(^ | $)/gm," ")),this.#mt}get length(){return this.#ft.length}get lines(){return null===this.#pt&&(""===this.#ft?this.#pt=[""]:(this.#pt=this.#ft.split(/^/gm),this.#ft.endsWith("\n")&&this.#pt.push(""))),this.#pt}get words(){return null===this.#gt&&(""===this.#ft?this.#gt=[]:this.#gt=this.#ft.split(/\b(\w+\W+)/gm).filter(_s)),this.#gt}insertAt(t,e){return 0!==t.length&&(0===e?this.#ft=t+this.#ft:e===this.#ft.length?this.#ft=this.#ft+t:this.#ft=this.#ft.substring(0,e)+t+this.#ft.substring(e),this.invalidate(),!0)}removeRange(t,e){return t!==e&&(e<t&&([t,e]=[e,t]),0===t?this.#ft=this.#ft.substring(e):e>=this.#ft.length?this.#ft=this.#ft.substring(0,t):this.#ft=this.#ft.substring(0,t)+this.#ft.substring(e),this.invalidate(),!0)}getRange(t,e){return t===e?"":(e<t&&([t,e]=[e,t]),this.#ft.substring(t,e))}prepend(t){return 0!==t.length&&(this.#ft=t+this.#ft,this.invalidate(),!0)}append(t){return 0!==t.length&&(this.#ft+=t,this.invalidate(),!0)}resolveCharRange(t,e){const i=this.#ft.length;return e.start=Math.round(t.start*i),e.end=Math.round(t.end*i),e}resolveLineRange(t,e){const i=this.lines;return e.start=Is(i,Math.round(t.start*i.length)),e.end=Is(i,Math.round(t.end*i.length)),e}resolveWordRange(t,e){const i=this.words;return 0===i.length?e.start=e.end=0:(e.start=Is(i,Math.round(t.start*i.length)),e.end=Is(i,Math.round(t.end*i.length))),e}getCharRange(t){return this.resolveCharRange(t,{start:0,end:0})}getLineRange(t){return this.resolveLineRange(t,{start:0,end:0})}getWordRange(t){return this.resolveWordRange(t,{start:0,end:0})}}function _s(t){return t.length>0}function Is(t,e){if(e<=0)return 0;let i=t[0].length;for(let n=1;n<e&&n<t.length;n++)i+=t[n].length;return i}const Cs=new Map([["semicondensed","semi-condensed"],["ultracondensed","ultra-condensed"],["extracondensed","extra-condensed"],["semiexpanded","semi-expanded"],["extraexpanded","extra-expanded"],["ultraexpanded","ultra-expanded"],["condensed","condensed"],["expanded","expanded"],["extended","expanded"],["thin","100"],["hairline","100"],["extralight","200"],["ultralight","200"],["extralight","250"],["light","300"],["lite","300"],["book","350"],["normal","400"],["regular","400"],["plain","400"],["standard","400"],["thick","425"],["extrathick","450"],["medium","500"],["dark","500"],["extradark","550"],["semibold","600"],["demibold","600"],["bold","700"],["extrabold","800"],["ultrabold","800"],["black","900"],["heavy","900"],["fat","900"],["poster","900"],["extrablack","950"],["ultrablack","950"],["oblique","oblique"],["italic","italic"]]),Ls=new Map;function*Ns(t){const e=function(t){return t.variablePrefix?t.variablePrefix:t.typoFamilyName?Ps(t.typoFamilyName):t.styleName?Ps(t.familyName+t.styleName):t.subFamilyName?Ps(t.familyName+t.subFamilyName):Ps(t.familyName)}(t),i=function(t){if(!t?.length)return null;const e=new Map;for(const i of t)e.set(i.name,i);return e}(t.axisDefinition);if(t?.instances?.length){let n=null!=t.axisValue,s=null!=t.subFamilyName;for(const r of t.instances){const o=js(r,e,i);if(n&&zs(t.axisValue,r.axisValue)&&(n=!1,o.includes(t.postScriptName)||o.splice(1,0,t.postScriptName)),s&&t.subFamilyName===r.styleName){s=!1;const i=Ps(t.postScriptName);o.includes(i)||o.splice(1,0,i),e&&!o.includes(e)&&o.splice(1,0,e)}yield o}}else yield function(t,e){const i=Ps(e);return t.includes(i)||t.splice(1,0,i),t.includes(e)||t.splice(1,0,e),t}(js(t,e,i),t.postScriptName)}function js(t,e,i){const n=[t.postScriptName];if(t.styleName){const i=e+"-"+Ps(t.styleName);n.includes(i)||n.push(i);const s=e+"-"+t.styleName.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]+/g,"");n.includes(s)||n.push(s)}if(i&&t.axisValue){const s=["","",""];for(const[e,n]of Object.entries(t.axisValue)){if(!i.has(e))continue;const t=`_${Ts(n)}${Ps(e)}`,r=i.get(e);s[2]+=t,r.def!==n&&(s[1]+=t,r.hidden||(s[0]+=t))}for(let t of s)t&&(t=e+t,n.includes(t)||n.push(t))}return n}function zs(t,e){if(!e)return!1;for(const[i,n]of Object.entries(t))if(e[i]!==n)return!1;return!0}function Ps(t){return t.replace(/[^a-zA-Z0-9]+/g,"")}function Ts(t){if(!t)return"0";if(Number.isInteger(t))return t.toString();let e=t.toFixed(2);return e=e.replace(/[0]+$/,""),e.endsWith(".")?e.substring(0,e.length-1):e}const As=new Map,Ds=new Set,Es=new Set;let Os;const Ws=new Map;let Rs;const Bs=new Map;function Us(t){for(const e of t)Ws.has(e)||Ws.set(e,t)}function $s(t){return Ws.has(t)?Ws.get(t)[0]:t}function Fs(t){return Ws.get(t)||null}function Vs(t){return Es.has(t)}function Hs(t){return Ds.has(t)}function Gs(t){if(As.has(t))return As.get(t);const e=Ws.get(t);if(!e)return null;for(const t of e)if(As.has(t))return As.get(t);return null}async function Zs(...t){const e=[];for(let i of t){const t=Gs(i);null!=t&&await Qs(t)||e.includes(i)||e.push(i)}return e}function Ys(t){if(t?.length)for(const e of t)for(const t of Ns(e))Ds.add(t[0]),Us(t)}async function Qs(t){const e=$s(t.postscriptName);if(Ds.has(e))return!0;if(Es.has(e))return!1;if(Rs.hasFamilyName(e))return Ds.add(e),!0;try{const e=await(await t.blob()).arrayBuffer();e?.byteLength&&Ys(Rs.addAllFontInstances(e))}catch{}return!!Ds.has($s(e))||(Es.add(e),function(t){if(As.delete(t.postscriptName),!Bs.has(t.family))return;const e=Bs.get(t.family),i=e.indexOf(t);i>=0&&(e.splice(i,1),0===e.length&&Bs.delete(t.family))}(t),!1)}class Js{constructor(t,e,i){this.style=t,this.start=e,this.end=i}toJSON(){return[this.style,this.start,this.end]}clone(){return new Js(this.style.clone(),this.start,this.end)}}function qs(t){return t.clone()}function Ks(t,e){if(e.isEmpty())return!1;let i=!1;for(const n of t)e.mergeStyleInto(n.style)&&(i=!0);return i}function Xs(t,e,i,n,s){if(0===t.length)return!0;if(i===n){if(!s||e.isEmpty())return!1;for(const n of t)if(n.start>=i)return e.mergeStyleInto(n.style);return!1}if(e.isEmpty())return!1;n<i&&([i,n]=[n,i]);let r=!1;for(let s=0;s<t.length;s++){const o=t[s];if(o.start>=n)break;if(!(o.end<=i||e.sameStyle(o.style)))if(r=!0,o.start<i)if(o.end>n){const r=o.clone(),a=o.clone();e.mergeStyleInto(o.style),r.end=o.start=i,a.start=o.end=n,t.splice(s,1,r,o,a),s+=2}else{const n=o.clone();e.mergeStyleInto(n.style),n.start=o.end=i,s++,t.splice(s,0,n)}else if(o.end<=n)e.mergeStyleInto(o.style);else{const i=o.clone();e.mergeStyleInto(i.style),i.end=o.start=n,t.splice(s,0,i),s++}}return r}function tr(t,e,i,n,s){if(e===i||0===t.length)return!1;if(i<e&&([e,i]=[i,e]),i<0)return!1;if(e<0&&(e=0),0===e&&i>=n){if(s){if(1===t.length&&0===t[0].start&&t[0].end===n)return!1;t.splice(1),t[0].start=0,t[0].end=n}else t.splice(0);return!0}const r=i-e;for(let n=0;n<t.length;n++){const s=t[n];s.end<=e||(s.start>=i?(s.start-=r,s.end-=r):s.start<e?s.end>i?s.end-=r:s.end=e:s.end<=i?(t.splice(n,1),n--):(s.start=i-r,s.end-=r))}return!0}function er(t,e,i){if(i<=0)return!1;for(const n of t)n.end<e||(n.start>0&&n.start>=e&&(n.start+=i),n.end+=i);return!0}function ir(t,e){let i=t.length-1;if(i<0)return!1;if(0===i)return(0!==t[0].start||t[0].end!==e)&&(t[0].start=0,t[0].end=e,!0);let n=!1;for(let e=0;e<i;e++){const s=t[e],r=t[e+1];s.style.sameStyle(r.style)&&(s.end=r.end,t.splice(e+1,1),e--,i--,n=!0)}return 0!==t[0].start&&(t[0].start=0,n=!0),t[i].end!==e&&(t[i].end=e,n=!0),n}function nr(t,e){return e<=0?t[0]:e>=t.length?t[t.length-1]:t[e]}function sr(t,e,i,n){if(i.end<=i.start)return!1;if(0===i.start&&1===i.end)return Ks(t,e);const{start:s,end:r}=i.resolveRange(n);return!(r<=s)&&(0===s&&r===n.length?Ks(t,e):Xs(t,e,s,r,!1))}function rr(t,e,i){return void 0===t||void 0!==e&&(i?kt(t,e):t===e)}function or(t,e){return rr(t.fillOpacity,e.fillOpacity)&&rr(t.fill,e.fill,!0)}function ar(t,e){return rr(t.strokeOpacity,e.strokeOpacity)&&rr(t.strokeLineWidth,e.strokeLineWidth)&&rr(t.strokeLineCap,e.strokeLineCap)&&rr(t.strokeLineJoin,e.strokeLineJoin)&&rr(t.strokeMiterLimit,e.strokeMiterLimit)&&rr(t.strokeDashOffset,e.strokeDashOffset)&&rr(t.paintOrder,e.paintOrder)&&rr(t.strokeDashArray,e.strokeDashArray,!0)&&rr(t.strokeBrush,e.strokeBrush,!0)}class lr{#C=null;#vt=null;constructor(t,e){this.blobs=t,this.#C=e}get isEmpty(){return 0===this.blobs.length}setMatrix(t,e){if(e){if(!t||t.isIdentity)return!1;this.#C&&!this.#C.isIdentity&&(t=t.clone().multiply(this.#C))}if(ii(t?.value,this.#C?.value))return!1;const i=this.#C;if(this.#C=t,this.#vt){const e=this.#vt;for(let n=0;n<e.length;n++){if(!e[n])continue;const s=e[n].copy();e[n].delete(),e[n]=s,i&&!i.isIdentity&&s.transform(i.clone().inverse()),t&&!t.isIdentity&&s.transform(t)}}return!0}clone(){const t=new lr(this.blobs.map((t=>((t={...t}).blob=t.blob.clone(),t))),this.#C);return this.#vt&&(t.#vt=this.#vt.map((t=>t?t.clone():t))),t}dispose(){if(this.blobs){for(const t of this.blobs.splice(0))t.blob?.delete();this.blobs=null}if(this.#vt){for(const t of this.#vt.splice(0))t?.delete();this.#vt=null}this.#C=null}getPath(t){const e=this.blobs.indexOf(t);if(e<0)return null;const i=this.#vt??=[];if(void 0===i[e]){const n=t.blob.getPath();n&&!n.isEmpty?(n.fillType=Skia.SkPathFillType.Winding,(t.x||t.y)&&n.offset(t.x,t.y),this.#C&&n.transform(this.#C),i[e]=n):(n?.delete(),i[e]=null)}return i[e]}}class cr{#yt=!1;#xt=null;#bt=null;#pt=null;#wt=null;#Mt=null;#St=null;#e=null;#kt=!1;#t=null;#G=null;#C=null;constructor(t,e,i){this.source=t instanceof ks?t:new ks(t||""),this.style=e||new Ss,this.#C=i||null}toJSON(){return{matrix:this.#C||void 0}}get isEditMode(){return this.#kt}set isEditMode(t){this.#kt!==t&&(this.#kt=t,this.#Mt=null)}get path(){return null==this.#t?this.#t=this.#Q():this.#t}get pathLength(){return null==this.#G?this.#G=this.path?.length||0:this.#G}#Q(){const t=new Skia.SkPath,e=this.#kt,i=this.blobList;for(const n of i.blobs){if(e&&n.clip)continue;const s=i.getPath(n);s&&t.addPath(s)}return t}get matrix(){return this.#C}set matrix(t){this.setMatrix(t)}setMatrix(t){return!(!t||t.isIdentity||(this.#C&&(t=t.clone().multiply(this.#C)),this.#C=t,this.#bt&&this.#bt.setMatrix(t),0))}cloneProperties(t){t.#yt=this.#yt,t.#xt=this.#xt?this.#xt.clone():null,t.#pt=this.#pt,t.#wt=this.#wt,t.#Mt=this.#Mt,t.#St=this.#St,t.#e=this.#e,t.#C=this.#C,this.#bt&&(t.#bt=this.#bt.clone())}get linesBounds(){return this.#St??=Ve.merge(this.lines)}get tightBounds(){return this.#Mt??this.#_t()}#_t(){const{bounds:t,style:e}=this;if(!e.autoWidth&&!e.autoHeight)return t;const i=this.linesBounds.intersection(t);return e.autoWidth?e.autoHeight?i??Ve.ZERO:this.#Mt=new Ve(i?i.x:0,t.y,i?i.width:0,t.height):new Ve(t.x,i?i.y:0,t.width,i?i.height:0)}get bounds(){return this.#e??=this.#It()}#It(){const t=this.style;if(t.autoWidth){const e=this.native.getLongestLine();return t.autoHeight?new Ve(-t.adjustX*e,0,e,this.native.getHeight()):new Ve(-t.adjustX*e,0,e,t.height)}return t.autoHeight?new Ve(0,0,t.width,this.native.getHeight()):new Ve(0,0,t.width,t.height)}isPointOverText(t,e){if(this.#C&&(t=this.#C.inversePoint(t.x,t.y)),!(this.#kt?this.linesBounds:this.tightBounds).contains(t.x,t.y))return!1;if(e)return!0;for(const e of this.lines)if(t.y>=e.top&&t.y<=e.bottom&&t.x>=e.left&&t.x<=e.right)return!0;return!1}#Ct(t,e,i){let n,s=!1;0===t.length?(n=" ",s=!0):(n=t.nbText,"\n"===n[n.length-1]&&(n+=" ",s=!0));const r=e.align;e.autoWidth&&(e.align=Skia.SkParagraphTextAlign.Start);const o=Skia.SkParagraph.MakeMulti(n,e,i,Rs);return e.align=r,o.layout(e.maxWidth),e.autoWidth&&(e.width=Math.ceil(o.getLongestLine())),e.autoHeight&&(e.height=Math.ceil(o.getHeight())),[o,s]}#Lt(){const t=this.#wt=this.computeBlocks(),[e,i]=this.#Ct(this.source,this.style,t);return this.#yt=i,e}get native(){return this.#xt??=this.#Lt()}#Nt(){const t=this.style,{adjustX:e,adjustY:i}=t,n=this.native?.getLines(e,i,t.maxHeight,e,!1);if(!n?.length)return[];if(this.#yt){const t=n[n.length-1];t.end--;const e=t.runs[t.runs.length-1];1===e.indexes.length?t.runs.pop():(e.indexes=e.indexes.slice(0,-1),e.positions=e.positions.slice(0,-1),e.glyphs&&e.glyphs.slice(0,-1))}return n}get lines(){return this.#pt??=this.#Nt()}#jt(t){const{adjustX:e,adjustY:i,maxHeight:n}=this.style,s=t?.getBlobs(e,i,n,e)??[];return new lr(s,this.#C)}get blobList(){return this.#bt??=this.#jt(this.native)}#zt(){return null==this.#wt&&this.native,this.#wt}*splitChars(){const t=this.source.text;if(""===t.trim())return;const e=function(t){const e=[];for(const i of t)for(let t=i.start;t<i.end;t++)e.push(new Js(i.style,t,t+1));return e}(this.computeBlocks()),[i]=this.#Ct(this.source,this.style,e);if(!i)return;const n=this.#jt(i);for(const i of n.blobs){if(i.clip)continue;const s=nr(e,i.index);if(!s)continue;const r=n.getPath(i);r&&(yield[r.clone(),s.style,t.substring(s.start,s.end).trim()])}i.delete(),n.dispose()}*pathsWithStyle(){const t=this.blobList,e=this.#zt();for(const i of t.blobs){if(i.clip)continue;const n=nr(e,i.index);if(!n)continue;let s=t.getPath(i);s&&(yield[s,n.style])}}draw(t,e){if(0===this.source.length)return;const i=this.blobList;if(i.isEmpty)return;const n=this.#zt(),s=new Skia.SkPaint,r=new Skia.SkPaint;let o=!1,a=!1;const l=t.canvas,c=e?e.clone():new Ti;let u=null;const h=!this.#kt,d=this.#C;for(const t of i.blobs){if(h&&t.clip)continue;const e=n[t.index]?.style;e&&(e!==u&&(u&&or(e,u)||(a=this.#Pt(e,r)),u&&ar(e,u)||(o=this.#Tt(e,c,s)),u=e),0===e.paintOrder?(a&&this.#At(l,t,r,d),o&&this.#At(l,t,s,d)):(o&&this.#At(l,t,s,d),a&&this.#At(l,t,r,d)))}s.delete(),r.delete(),c.dispose()}#Pt(t,e){return!(0===t.fillOpacity||!t.fill.isVisible||(e.reset(),!t.fill.preparePaint(e)||(t.fillOpacity<1&&e.addAlpha(t.fillOpacity),0)))}#Tt(t,e,i){return!(0===t.strokeOpacity||0===t.strokeLineWidth||!t.strokeBrush.isVisible||(e.width=t.strokeLineWidth,e.lineCap=t.strokeLineCap,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,e.offset=t.strokeDashOffset,e.dashes=t.strokeDashArray,e.brush=t.strokeBrush,i.reset(),!e.preparePaint(i)||(t.strokeOpacity<1&&i.addAlpha(t.strokeOpacity),0)))}#At(t,e,i,n){if(n){const n=this.#bt.getPath(e);n&&t.drawPath(n,i)}else t.drawTextBlob(e.blob,i,e.x,e.y)}invalidate(){this.#bt&&(this.#bt.dispose(),this.#bt=null),this.#xt?.delete(),this.#xt=null,this.#pt=null,this.#wt=null,this.#Mt=this.#St=this.#e=null,this.#t?.delete(),this.#t=null,this.#G=null}dispose(){this.invalidate(),this.style=null,this.source=null,this.#C=null}setText(t){return t!==this.source.text&&!!this._setText(t)&&(this.invalidate(),!0)}insertText(t,e,i){i??=e;let n=!1;return e!==i&&(n=this._removeRange(e,i),0===t.length)?!!n&&(this.invalidate(),!0):!(0===t.length||!this._insertAt(t,Math.min(e,i))&&!n||(this.invalidate(),0))}removeText(t,e){return t!==e&&!!this._removeRange(t,e)&&(this.invalidate(),!0)}}const ur={};class hr{constructor(){this.fill=void 0,this.fillOpacity=void 0,this.strokeBrush=void 0,this.strokeOpacity=void 0,this.strokeLineWidth=void 0,this.strokeLineCap=void 0,this.strokeLineJoin=void 0,this.strokeMiterLimit=void 0,this.strokeDashArray=void 0,this.strokeDashOffset=void 0,this.paintOrder=void 0,this.fontId=void 0,this.fontSize=void 0,this.fontFeatures=void 0,this.letterSpacing=void 0,this.wordSpacing=void 0,this.lineHeight=void 0,this.baselineShift=void 0}set fillRule(t){}get fillRule(){return 0}toJSON(){return{fill:this.fill,fillOpacity:this.fillOpacity,paintOrder:this.paintOrder,strokeBrush:this.strokeBrush,strokeOpacity:this.strokeOpacity,strokeLineWidth:this.strokeLineWidth,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeDashArray:this.strokeDashArray,strokeDashOffset:this.strokeDashOffset,fontId:this.fontId,fontSize:this.fontSize,fontFeatures:this.fontFeatures,letterSpacing:this.letterSpacing,wordSpacing:this.wordSpacing,lineHeight:this.lineHeight,baselineShift:this.baselineShift}}static fromJSON(t){const e=new hr;return!t.fontId&&t.fontFamily&&(t.fontId=t.fontFamily,delete t.fontFamily),e.copyProperties(t,!1),e}copyProperties(t,e){this.fill=t.fill?e?t.fill.clone():t.fill:void 0,this.fillOpacity=t.fillOpacity,this.strokeBrush=t.strokeBrush?e?t.strokeBrush.clone():t.strokeBrush:void 0,this.strokeOpacity=t.strokeOpacity,this.strokeLineWidth=t.strokeLineWidth,this.strokeLineCap=t.strokeLineCap,this.strokeLineJoin=t.strokeLineJoin,this.strokeMiterLimit=t.strokeMiterLimit,this.strokeDashArray=t.strokeDashArray?e?t.strokeDashArray.slice():t.strokeDashArray:void 0,this.strokeDashOffset=t.strokeDashOffset,this.paintOrder=t.paintOrder,this.fontId=t.fontId,this.fontSize=t.fontSize,this.fontFeatures=t.fontFeatures,this.letterSpacing=t.letterSpacing,this.wordSpacing=t.wordSpacing,this.lineHeight=t.lineHeight,this.baselineShift=t.baselineShift}clone(){const t=new hr;return t.copyProperties(this,!0),t}mergeStyleInto(t){let e=!1;return function(t,e){let i=!1;return void 0===t.fill||e.fill&&t.fill.equals(e.fill)||(e.fill=t.fill.clone(),i=!0),void 0!==t.fillOpacity&&t.fillOpacity!==e.fillOpacity&&(e.fillOpacity=t.fillOpacity,i=!0),i}(this,t)&&(e=!0),function(t,e){let i=!1;return void 0===t.strokeBrush||e.strokeBrush&&t.strokeBrush.equals(e.strokeBrush)||(e.strokeBrush=t.strokeBrush.clone(),i=!0),void 0!==t.strokeOpacity&&t.strokeOpacity!==e.strokeOpacity&&(e.strokeOpacity=t.strokeOpacity,i=!0),void 0!==t.strokeLineWidth&&t.strokeLineWidth!==e.strokeLineWidth&&(e.strokeLineWidth=t.strokeLineWidth,i=!0),void 0!==t.strokeLineCap&&t.strokeLineCap!==e.strokeLineCap&&(e.strokeLineCap=t.strokeLineCap,i=!0),void 0!==t.strokeLineJoin&&t.strokeLineJoin!==e.strokeLineJoin&&(e.strokeLineJoin=t.strokeLineJoin,i=!0),void 0!==t.strokeMiterLimit&&t.strokeMiterLimit!==e.strokeMiterLimit&&(e.strokeMiterLimit=t.strokeMiterLimit,i=!0),void 0===t.strokeDashArray||e.strokeDashArray&&kt(t.strokeDashArray,e.strokeDashArray)||(e.strokeDashArray=t.strokeDashArray.slice(),i=!0),void 0!==t.strokeDashOffset&&t.strokeDashOffset!==e.strokeDashOffset&&(e.strokeDashOffset=t.strokeDashOffset,i=!0),void 0!==t.paintOrder&&t.paintOrder!==e.paintOrder&&(e.paintOrder=t.paintOrder,i=!0),i}(this,t)&&(e=!0),function(t,e){let i=!1;return void 0!==t.fontId&&t.fontId!==e.fontId&&(e.fontId=t.fontId,i=!0),void 0!==t.fontSize&&t.fontSize!==e.fontSize&&(e.fontSize=t.fontSize,i=!0),void 0!==t.fontFeatures&&t.fontFeatures!==e.fontFeatures&&(e.fontFeatures=t.fontFeatures,i=!0),void 0!==t.letterSpacing&&t.letterSpacing!==e.letterSpacing&&(e.letterSpacing=t.letterSpacing,i=!0),void 0!==t.wordSpacing&&t.wordSpacing!==e.wordSpacing&&(e.wordSpacing=t.wordSpacing,i=!0),void 0!==t.lineHeight&&t.lineHeight!==e.lineHeight&&(e.lineHeight=t.lineHeight,i=!0),void 0!==t.baselineShift&&t.baselineShift!==e.baselineShift&&(e.baselineShift=t.baselineShift,i=!0),i}(this,t)&&(e=!0),e}sameStyle(t){return function(t,e){return rr(t.fontSize,e.fontSize)&&rr(t.fontFeatures,e.fontFeatures)&&rr(t.letterSpacing,e.letterSpacing)&&rr(t.wordSpacing,e.wordSpacing)&&rr(t.lineHeight,e.lineHeight)&&rr(t.baselineShift,e.baselineShift)&&rr(t.fontId,e.fontId)}(this,t)&&or(this,t)&&ar(this,t)}samePaint(t){return or(this,t)&&ar(this,t)}undef(t){return function(t,e){rr(t.fillOpacity,e.fillOpacity)&&(t.fillOpacity=void 0),rr(t.fill,e.fill,!0)&&(t.fill=void 0)}(this,t),function(t,e){rr(t.strokeOpacity,e.strokeOpacity)&&(t.strokeOpacity=void 0),rr(t.strokeLineWidth,e.strokeLineWidth)&&(t.strokeLineWidth=void 0),rr(t.strokeLineCap,e.strokeLineCap)&&(t.strokeLineCap=void 0),rr(t.strokeLineJoin,e.strokeLineJoin)&&(t.strokeLineJoin=void 0),rr(t.strokeMiterLimit,e.strokeMiterLimit)&&(t.strokeMiterLimit=void 0),rr(t.strokeDashOffset,e.strokeDashOffset)&&(t.strokeDashOffset=void 0),rr(t.strokeDashArray,e.strokeDashArray,!0)&&(t.strokeDashArray=void 0),rr(t.strokeBrush,e.strokeBrush,!0)&&(t.strokeBrush=void 0),rr(t.paintOrder,e.paintOrder)&&(t.paintOrder=void 0)}(this,t),function(t,e){rr(t.fontSize,e.fontSize)&&(t.fontSize=void 0),rr(t.fontFeatures,e.fontFeatures)&&(t.fontFeatures=void 0),rr(t.letterSpacing,e.letterSpacing)&&(t.letterSpacing=void 0),rr(t.lineHeight,e.lineHeight)&&(t.lineHeight=void 0),rr(t.baselineShift,e.baselineShift)&&(t.baselineShift=void 0),rr(t.fontId,e.fontId)&&(t.fontId=void 0)}(this,t),this}isEmpty(){return this.sameStyle(ur)}static CreateDefault(){const t=new hr;return t.fill=gi.BLACK,t.fillOpacity=1,t.strokeOpacity=1,t.strokeBrush=pi.INSTANCE,t.strokeLineWidth=0,t.strokeMiterLimit=4,t.strokeLineJoin=0,t.strokeLineCap=0,t.strokeDashOffset=0,t.strokeDashArray=[],t.paintOrder=0,t.fontId="ArialMT",t.fontSize=14,t.fontFeatures=0,t.letterSpacing=0,t.wordSpacing=0,t.lineHeight=1,t.baselineShift=0,t}}class dr extends cr{constructor(t,e,i,n){super(t,e,n),i||(i=[]),i.length||i.push(new Js(hr.CreateDefault(),0,this.source.length)),this.blocks=i}dispose(){super.dispose(),this.blocks=null}clone(){const t=new dr(this.source.clone(),this.style.clone(),this.blocks.map(qs));return this.cloneProperties(t),t}toJSON(){const t=super.toJSON();return t.text=this.source.text,t.style=this.style,t.blocks=this.blocks,t}static fromJSON(t){return new dr(t.text,t.style,t.blocks,t.matrix)}computeBlocks(){return this.blocks}_insertAt(t,e){return!!this.source.insertAt(t,e)&&(er(this.blocks,e,t.length),!0)}_removeRange(t,e){if(!this.source.removeRange(t,e))return!1;const i=this.blocks,n=this.source.length;return tr(i,t,e,n,!0)&&ir(i,n),!0}_setText(t){const e=t.length,i=this.source.length;this.source.text=t;const n=this.blocks;return 0===e?(n.length>1&&n.splice(1),n[0].start=n[0].end=0):e>i?er(n,i,e-i):e<i&&tr(n,e,i,i)&&ir(n,i),!0}addStyleToAll(t){return this.addStyle(t,0,this.source.length)}addStyle(t,e,i){i??=e,i<e&&([e,i]=[i,e]);const n=this.blocks,s=this.source.length;return e<=0&&i>=s?!!Ks(n,t)&&(ir(n,s),this.invalidate(),!0):!!Xs(n,t,e,i,!0)&&(ir(n,s),this.invalidate(),!0)}getTextStyleAtRange(t,e){return function(t,e,i){let n;n=e===i?e:Math.min(e,i)+1;for(const e of t)if(n>=e.start&&n<=e.end)return e;return t[t.length-1]}(this.blocks,t,e??t).style}}class fr extends cr{#Dt=null;#Et=null;constructor(t,e,i,n){super(t,e,n),i?(this.block=i,this.#Ot()):this.block=new Js(hr.CreateDefault(),0,this.source.length)}get provider(){return this.#Et}set provider(t){this.#Et!==t&&(this.#Et=t,this.#Dt=null)}get blocks(){return this.#Dt??=this.#Wt()}#Wt(){if(!this.#Et||!this.#Et.hasBlocks)return[this.block];const t=this.source,e=[this.block.clone()];for(const[i,n]of this.#Et.getBlocks())sr(e,n,i,t);return e}clone(){const t=new fr(this.source.clone(),this.style.clone(),this.block.clone());return t.#Dt=this.#Dt,this.cloneProperties(t),t}toJSON(){const t=super.toJSON();return t.text=this.source.text,t.style=this.style,t.block=this.block,t}static fromJSON(t){return new fr(t.text,t.style,t.block,t.matrix)}dispose(){super.dispose(),this.#Et=null,this.#Dt=null,this.block=null}computeBlocks(){return this.blocks}_insertAt(t,e){return!!this.source.insertAt(t,e)&&(this.#Ot(),!0)}_removeRange(t,e){return!!this.source.removeRange(t,e)&&(this.#Ot(),!0)}_setText(t){return this.source.text=t,this.#Ot(),!0}#Ot(){this.block.start=0,this.block.end=this.source.length}invalidate(){this.#Dt=null,super.invalidate()}}class pr{constructor(t=0,e=1,i=0){this.start=t,this.end=e,this.type=i}toJSON(){return[this.start,this.end,this.type]}get isEmpty(){return this.start===this.end}get length(){return this.end-this.start}set length(t){this.end=this.start+t}clone(){return new pr(this.start,this.end,this.type)}resolveRange(t){switch(this.type){case 1:return t.getWordRange(this);case 2:return t.getLineRange(this)}return t.getCharRange(this)}}let gr;Y(se,null,se.fromCode,"Color"),Y(gi,null,gi.fromColor,"SolidBrush"),Y(pi,null,(function(){return pi.INSTANCE}),"EmptyBrush"),J([ce,"Point"],[Ve,"Rectangle"],[hi,"Matrix"],[di,"Size"],[Ze,"ConvexQuad"],[ms,"EllipseShape"],[Ms,"LineShape"],[Di,"PathNode"],[es,"Path"],[vs,"PolyShape"],[xs,"RectShape"],[ys,"RectShapeRadius"],[bs,"RegularPolygonShape"],[ws,"StarShape"],[dr,"Paragraph"],[fr,"DynamicParagraph"],[Ss,"ParagraphStyle"],[hr,"TextStyle"],[Js,"TextBlock"],[pr,"RelativeTextRange"],[Ti,"Pen"],[Ai,"PenEffect"],[oe,"Composition"],[class extends fi{#Rt;#Bt;#Ut;#$t;constructor(t,e=5,i=new hi,n=null){super(6),this.#Rt=t,this.#Ut=e,this.#$t=i,this.#Bt=n}toJSON(){return[this.#Rt,this.#Ut,this.#$t,this.#Bt]}get isVisible(){return!0}preparePaint(t){let e,i;switch(super.preparePaint(t),this.#Ut){case 3:e=Skia.SkTileMode.Repeat,i=Skia.SkTileMode.Decal;break;case 4:e=Skia.SkTileMode.Mirror,i=Skia.SkTileMode.Decal;break;case 1:e=Skia.SkTileMode.Decal,i=Skia.SkTileMode.Repeat;break;case 2:e=Skia.SkTileMode.Decal,i=Skia.SkTileMode.Mirror;break;case 5:e=Skia.SkTileMode.Repeat,i=Skia.SkTileMode.Repeat;break;case 6:e=Skia.SkTileMode.Mirror,i=Skia.SkTileMode.Mirror;break;default:e=Skia.SkTileMode.Decal,i=Skia.SkTileMode.Decal}return t.shader=this.#Rt.getPicture().makeShader(e,i,this.#$t,this.#Bt),!0}equals(t){return!!super.equals(t)&&this.#Rt===t.#Rt}},"PatternBrush"],[mi,"StopColorList"],[vi,"WritableStopColorList"],[ki,"GradientTransform"],[Ii,"LinearGradientBrush"],[Ci,"RadialGradientBrush"],[Li,"TwoPointGradientBrush"],[Ni,"ConicalGradientBrush"]),q("ConicalGradientBrush",(function(t){return t[2]-=t[1],new Ni(...t)}),300,400,500,600),Q("DefaultPen",(function(t){if(!Array.isArray(t))return new Ti;const[e=gi.BLACK,i=1,n=0,s=0,r=4,o=[],a=0]=t,l=new Ti;return l.brush=e,l.width=i,l.lineCap=n,l.lineJoin=s,l.miterLimit=r,l.dashes=o,l.offset=a,l}));class mr{#I=null;constructor(t){t&&20===t.length||((t=new Float32Array(20))[0]=t[6]=t[12]=t[18]=1,this.#I=!0),this.value=t}reset(){const t=this.value;return t.fill(0),t[0]=t[6]=t[12]=t[18]=1,this.#I=!0,this}equals(t){const e=this.value.length;if(t.value.length!==e)return!1;for(let i=0;i<e;i++)if(this.value[i]!==t.value[i])return!1;return!0}clone(){const t=new mr(this.value.slice());return t.#I=this.#I,t}get isIdentity(){if(null==this.#I){const t=this.value;return this.#I=1===t[0]&&1===t[6]&&1===t[12]&&1===t[18]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&0===t[5]&&0===t[7]&&0===t[8]&&0===t[9]&&0===t[10]&&0===t[11]&&0===t[13]&&0===t[14]&&0===t[15]&&0===t[16]&&0===t[17]&&0===t[19]}return this.#I}preMultiply(t){return this.isIdentity?yr(t instanceof mr?t.value:t,this.value):vr(t instanceof mr?t.value:t,this.value,this.value),this.#I=null,this}multiply(t){return this.isIdentity?yr(t instanceof mr?t.value:t,this.value):vr(this.value,t instanceof mr?t.value:t,this.value),this.#I=null,this}tint(t){return this.multiply([t.r/255,0,0,0,0,0,t.g/255,0,0,0,0,0,t.b/255,0,0,0,0,0,t.a,0])}brightness(t){return 1===t?this:this.multiply([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0])}luminanceToAlpha(){return this.multiply([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0])}grayscale(t){return 0===t?this:(t=1-t,this.multiply([.2126+.7874*t,.7152-.7152*t,.0722-.0722*t,0,0,.2126-.2126*t,.7152+.2848*t,.0722-.0722*t,0,0,.2126-.2126*t,.7152-.7152*t,.0722+.9278*t,0,0,0,0,0,1,0]))}hueRotate(t){if(t%360==0)return this;t*=Dt;const e=Math.cos(t),i=Math.sin(t);return this.multiply([.787*e+.213*(1-i),.715*(1-e-i),.072*(1-e)+.928*i,0,0,.213*(1-e)+.143*i,.715+.285*e+.14*i,.072*(1-e)-.283*i,0,0,.213*(1-e)-.787*i,.715*(1-e+i),.928*e+.072*(1+i),0,0,0,0,0,1,0])}contrast(t){if(1===t)return this;const e=(1-t)/2;return this.multiply([t,0,0,0,e,0,t,0,0,e,0,0,t,0,e,0,0,0,1,0])}saturate(t){return 1===t?this:this.multiply([.213+.787*t,.715-.715*t,.072-.072*t,0,0,.213-.213*t,.715+.285*t,.072-.072*t,0,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,0,1,0])}sepia(t){return 0===t?this:(t=1-t,this.multiply([.393+.607*t,.769-.769*t,.189-.189*t,0,0,.349-.349*t,.686+.314*t,.168-.168*t,0,0,.272-.272*t,.534-.534*t,.131+.869*t,0,0,0,0,0,1,0]))}invert(t){if(0===t)return this;const e=t;return t=-2*t+1,this.multiply([t,0,0,0,e,0,t,0,0,e,0,0,t,0,e,0,0,0,1,0])}blackAndWhite(){return this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0])}negative(){return this.multiply([-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,1,0,0,0,1,0])}bgr(){return this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0])}technicolor(){return this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0])}polaroid(){return this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0])}kodachrome(){return this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0])}browni(){return this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0])}vintage(){return this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0])}colorTone(t=.2,e=.15,i,n){const s=i.r/255,r=i.g/255,o=i.b/255,a=n.r/255,l=n.g/255,c=n.b/255;return this.multiply([.3,.59,.11,0,0,s,r,o,t,0,a,l,c,e,0,s-a,r-l,o-c,0,0])}duoTone(t,e){const i=t.r/255,n=t.g/255,s=t.b/255,r=e.r/255,o=e.g/255,a=e.b/255;return this.multiply([i-r,0,0,0,r,n-o,0,0,0,o,s-a,0,0,0,a,0,0,0,1,0])}night(t=.1){return this.multiply([2*-t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0])}predator(t){return this.multiply([11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0,.8044459223747253*t,0,0,0,1,0])}threshold(t){const e=7.8693,i=15.5397,n=2.091;return t=-t,this.multiply([e,i,n,0,t,e,i,n,0,t,e,i,n,0,t,0,0,0,1,0])}lsd(){return this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0])}warm(){return this.multiply([1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0])}cool(){return this.multiply([.99,0,0,0,0,0,.93,0,0,0,0,0,1.08,0,0,0,0,0,1,0])}temperature(t){return this.multiply([1+t,0,0,0,0,0,1,0,0,0,0,0,1-t,0,0,0,0,0,1,0])}protanomaly(){return this.multiply([.817,.183,0,0,0,.333,.667,0,0,0,0,.125,.875,0,0,0,0,0,1,0])}deuteranomaly(){return this.multiply([.8,.2,0,0,0,.258,.742,0,0,0,0,.142,.858,0,0,0,0,0,1,0])}protanopia(){return this.multiply([.567,.433,0,0,0,.558,.442,0,0,0,0,.242,.758,0,0,0,0,0,1,0])}deuteranopia(){return this.multiply([.625,.375,0,0,0,.7,.3,0,0,0,0,.3,.7,0,0,0,0,0,1,0])}tritanopia(){return this.multiply([.95,.05,0,0,0,0,.433,.567,0,0,0,.475,.525,0,0,0,0,0,1,0])}achromatopsia(){return this.multiply([.299,.587,.114,0,0,.299,.587,.114,0,0,.299,.587,.114,0,0,0,0,0,1,0])}achromatomaly(){return this.multiply([.618,.32,.062,0,0,.163,.775,.062,0,0,.163,.32,.516,0,0,0,0,0,1,0])}}function vr(t,e,i){t===i&&(t=t.slice()),e===i&&(e=e.slice());let n=0;for(let s=0;s<20;s+=5){for(let r=0;r<4;r++)i[n++]=t[s+0]*e[r+0]+t[s+1]*e[r+5]+t[s+2]*e[r+10]+t[s+3]*e[r+15];i[n++]=t[s+0]*e[4]+t[s+1]*e[9]+t[s+2]*e[14]+t[s+3]*e[19]+t[s+4]}}function yr(t,e){for(let i=0;i<20;i++)e[i]=t[i]}const xr={left:0,top:0,right:0,bottom:0};class br{#Ft=[];#Vt;#C;#Ht=null;#Gt;constructor(t,e=new hi,i=null){this.#Vt=t,this.#C=e,this.#Ht=new Skia.SkPaint,this.#Vt.setMatrix(e),this.#Gt=i}get canvas(){return this.#Vt}get paint(){return this.#Ht}get surface(){return this.#Gt}dispose(){this.#Vt=null,this.#Gt=null,this.#Ft.splice(0),this.#C.toIdentity(),this.#Ht&&(this.#Ht.delete(),this.#Ht=null)}get matrix(){return this.#C}set matrix(t){this.#C=t,this.#Vt.setMatrix(t)}getLineScale(t=1){return t/this.matrix.lineScale}multiplyMatrix(t){t.isIdentity||(this.matrix=this.#C.multiply(t))}multiplyInverseMatrix(t){t.isIdentity||(this.matrix=this.#C.multiplyInverse(t))}translate(t,e){(t||e)&&(this.matrix=this.#C.translate(t,e))}scale(t,e){null==e&&(e=t),1===t&&1===e||(this.matrix=this.#C.scale(t,e))}rotate(t){t%360!=0&&(this.matrix=this.#C.rotate(t))}clipSize(t,e=ce.ZERO,i){xr.left=e.x,xr.top=e.y,xr.right=e.x+t.width,xr.bottom=e.y+t.height,this.#Vt.clipRect(xr,i?Skia.SkClipOp.Difference:Skia.SkClipOp.Intersect,!0)}clipRect(t,e){this.#Vt.clipRect(t,e?Skia.SkClipOp.Difference:Skia.SkClipOp.Intersect,!0)}clipPath(t,e,i){t=wr(t);let n=!1;!e||e.isIdentity||t.isEmpty||((t=t.copy()).transform(e),n=!0),this.#Vt.clipPath(t,i?Skia.SkClipOp.Difference:Skia.SkClipOp.Intersect,!0),n&&t.delete()}clear(t){this.#Vt.clear(t.code)}prepareFillColor(t){if(0===t.a)return!1;const e=this.#Ht;return e.style=Skia.SkPaintStyle.Fill,e.setColor(t),!0}drawBox(t,e){return t instanceof Ve?this.drawRect(t,e):this.drawQuad(t,e)}drawQuad(t,e){if(!e.isVisible)return;const i=this.#Ht;if(e.preparePaint(i)){const e=t.points,n=this.#Vt;n.drawLine(e[0].x,e[0].y,e[1].x,e[1].y,i),n.drawLine(e[1].x,e[1].y,e[2].x,e[2].y,i),n.drawLine(e[2].x,e[2].y,e[3].x,e[3].y,i),n.drawLine(e[3].x,e[3].y,e[0].x,e[0].y,i)}i.reset()}drawRect(t,e){if(!e.isVisible)return;const i=this.#Ht;e.preparePaint(i)&&this.#Vt.drawRect(t.left,t.top,t.right,t.bottom,i),i.reset()}fillRect(t,e,i=0){this.prepareFillColor(e)&&(this.#Vt.drawRect(t.left-i,t.top-i,t.right+i,t.bottom+i,this.#Ht),this.#Ht.reset())}drawCircle(t,e,i){if(!i.isVisible)return;const n=this.#Ht;i.preparePaint(n)&&this.#Vt.drawCircle(t.x,t.y,e,n),n.reset()}drawEllipse(t,e,i,n){if(!n.isVisible)return;const s=this.#Ht;n.preparePaint(s)&&this.#Vt.drawEllipse(t.x,t.y,e,i,s),s.reset()}drawText(t,e,i,n=ce.ZERO){if(!e.isVisible)return;const s=this.#Ht;e.preparePaint(s)&&("string"==typeof t?this.#Vt.drawText(t,s,i,Skia.SkTextEncoding.UTF8,n.x,n.y):this.#Vt.drawGlyphs(t,s,i,!0,n.x,n.y)),s.reset()}drawLine(t,e,i){if(!i.isVisible)return;const n=this.#Ht;i.preparePaint(n)&&this.#Vt.drawLine(t,e,n),n.reset()}drawPolyLine(t,e){if(!e.isVisible||0===t.length)return;const i=this.#Ht;e.preparePaint(i)&&this.#Vt.drawPoints(Skia.SkCanvasPointMode.Polygon,t,i),i.reset()}drawArc(t,e,i,n,s){if(!s.isVisible||e===i)return;const r=this.#Ht;s.preparePaint(r)&&this.#Vt.drawArc(t,e,i,n,r),r.reset()}drawImage(t,e=0,i=0,n){if(!n)return void this.#Vt.drawImage(t,e,i);if(!n.isVisible)return;const s=this.#Ht;n.preparePaint(s)?this.#Vt.drawImage(t,e,i,s):this.#Vt.drawImage(t,e,i),s.reset()}drawPicture(t,e,i,n){if(!e){if(n){const e=this.#Ht;e.imageFilter=n,this.#Vt.drawPicture(t,e,i),e.reset()}else this.#Vt.drawPicture(t,null,i);return}if(!e.isVisible)return;const s=this.#Ht;e.preparePaint(s)?(n&&(s.imageFilter=n),this.#Vt.drawPicture(t,s,i),s.reset()):n?(s.imageFilter=n,this.#Vt.drawPicture(t,s,i),s.reset()):this.#Vt.drawPicture(t,null,i)}drawPictureBlend(t,e,i){const n=this.#Ht;n.blendMode=e,i&&(n.colorFilter=i),this.#Vt.drawPicture(t,n),n.reset()}drawColor(t){this.#Vt.drawColor(t)}getWireframePaint(t){const e=this.#Ht;if(e.isAntiAlias=!0,e.setColor(0,0,0),t)e.style=Skia.SkPaintStyle.Fill;else{e.style=Skia.SkPaintStyle.Stroke;const t=this.matrix.lineScale;e.strokeWidth=t>1?1/this.matrix.lineScale:1}return e}drawWireframePath(t,e){this.#Vt.drawPath(wr(t),this.getWireframePaint(e))}drawWireframeRect(t,e){const i=this.getWireframePaint();this.#Vt.drawRect(t.left,t.top,t.right,t.bottom,i),e&&(this.#Vt.drawLine(t.left,t.top,t.right,t.bottom,i),this.#Vt.drawLine(t.right,t.top,t.left,t.bottom,i))}drawPath(t,e){if(!t||t.isEmpty||!e.isVisible)return;const i=this.#Ht;e.preparePaint(i)&&this.#Vt.drawPath(wr(t),i),i.reset()}drawPathDirect(t,e){const i=this.#Ht;e.preparePaint(i)&&this.#Vt.drawPath(t,i),i.reset()}fillPath(t,e){!t.isEmpty&&this.prepareFillColor(e)&&(this.#Vt.drawPath(wr(t),this.#Ht),this.#Ht.reset())}drawPathTransformed(t,e,i){if(!t||t.isEmpty||!i.isVisible)return;const n=this.#Ht;i.preparePaint(n)&&(t=wr(t),!e||e.isIdentity?this.#Vt.drawPath(t,n):((t=t.copy()).transform(e),this.#Vt.drawPath(t,n),t.delete())),n.reset()}flush(){this.#Gt?.flush()}restore(){0!==this.#Ft.length&&(this.#Vt.restore(),this.#C=this.#Ft.pop())}save(){this.#Vt.save(),this.#Ft.push(this.#C.clone())}saveLayer(t,e){const i=this.#Ht;t.preparePaint(i),e&&(i.imageFilter=e),this.#Vt.saveLayer(i),this.#Ft.push(this.#C.clone()),i.reset()}saveFilter(t){const e=this.#Ht;e.imageFilter=t,this.#Vt.saveLayer(e),this.#Ft.push(this.#C.clone()),e.reset()}}function wr(t){return t instanceof es?t.path:t}const Mr=new class{#Ht=null;#Zt=0;get isVisible(){return this.#Zt>0&&this.#Ht?.isVisible}apply(t,e){return e>=1?t:(this.#Ht=t,this.#Zt=e,this)}preparePaint(t){return this.#Ht.preparePaint(t)?(t.addAlpha(this.#Zt),this.#Zt=0,this.#Ht=null,!0):(this.#Zt=0,this.#Ht=null,!1)}};function Sr(t,e,i){let n=e.x,s=e.y,r=i.x-n,o=i.y-s;if(r||o){const e=((t.x-n)*r+(t.y-s)*o)/(r*r+o*o);e>1?(n=i.x,s=i.y):e>0&&(n+=r*e,s+=o*e)}return r=t.x-n,o=t.y-s,r*r+o*o}function*kr(t,e){let i,n=t[0];yield n;for(let o=1,a=t.length;o<a;o++)i=t[o],r=n,((s=i).x-r.x)**2+(s.y-r.y)**2>e&&(yield i,n=i);var s,r;i&&n!==i&&(yield i)}function*_r(t,e,i,n){let s,r=n;for(let n=e+1;n<i;n++){const o=Sr(t[n],t[e],t[i]);o>r&&(s=n,r=o)}r<=n||(s-e>1&&(yield*_r(t,e,s,n)),yield t[s],i-s>1&&(yield*_r(t,s,i,n)))}function*Ir(t,e){const i=t.length-1;yield t[0],yield*_r(t,0,i,e),yield t[i]}function Cr(t,e,i=.5){return t+i*(e-t)}function Lr(t,e,i=.5){return Math.max(0,t+i*(e-t))}function Nr(t,e,i=.5){return n(Cr(t,e,i),0,1)}function jr(t,e,i=.5){return i<.5?t:e}function zr(t,e,i=.5){return new ce(Cr(t.x,e.x,i),Cr(t.y,e.y,i))}function Pr(t,e,i=.5){return n(Math.round(t+i*(e-t)),0,255)}const Tr={0:{0:()=>pi.INSTANCE,1:(t,e,i)=>e.withColor(se.transparent.interpolate(e.color,i)),2:Er,3:Er,4:Er,5:Er},1:{0:(t,e,i)=>t.withColor(t.color.interpolate(se.transparent,i)),1:function(t,e,i){return t.withColor(t.color.interpolate(e.color,i))},2:Or,3:Or,4:Or,5:Or},2:{0:Wr,1:Rr,2:function(t,e,i){return new Ii(zr(t.start,e.start,i),zr(t.end,e.end,i),Dr(t.stopColors,e.stopColors,i),jr(t.spread,e.spread,i),Ur(t.transform,e.transform,i))},3:Br,4:Br,5:Br},3:{0:Wr,1:Rr,2:Br,3:function(t,e,i){return new Ci(zr(t.center,e.center,i),Lr(t.radius,e.radius,i),Dr(t.stopColors,e.stopColors,i),jr(t.spread,e.spread,i),Ur(t.transform,e.transform,i))},4:Br,5:Br},4:{0:Wr,1:Rr,2:Br,3:Br,4:function(t,e,i){return new Li(zr(t.start,e.start,i),Lr(t.startRadius,e.startRadius,i),zr(t.end,e.end,i),Lr(t.endRadius,e.endRadius,i),Dr(t.stopColors,e.stopColors,i),jr(t.spread,e.spread,i),Ur(t.transform,e.transform,i))},5:Br},5:{0:Wr,1:Rr,2:Br,3:Br,4:Br,5:function(t,e,i){return new Ni(zr(t.center,e.center,i),Cr(t.startAngle,e.startAngle,i),Lr(t.arcLength,e.arcLength,i),Dr(t.stopColors,e.stopColors,i),jr(t.spread,e.spread,i),Ur(t.transform,e.transform,i))}}};function Ar(t,e,i){return new mi(e.list.map((e=>({offset:e.offset,color:t.interpolate(e.color,i)}))))}function Dr(t,e,i){return new mi(function(t,e,i){const n=e.length-t.length;n>0?(t=t.slice(),mi.expandStopColorArray(t,e,n)):n<0&&(e=e.slice(),mi.expandStopColorArray(e,t,-n));const s=[],r=t.length;for(let n=0;n<r;n++)s.push({offset:Nr(t[n].offset,e[n].offset,i),color:t[n].color.interpolate(e[n].color,i)});return s}(t.list,e.list,i))}function Er(t,e,i){return e.withStopColorList(Ar(se.transparent,e.stopColors,i))}function Or(t,e,i){return e.withStopColorList(Ar(t.color,e.stopColors,i))}function Wr(t,e,i){return t.withStopColorList(Ar(se.transparent,t.stopColors,1-i))}function Rr(t,e,i){return t.withStopColorList(Ar(e.color,t.stopColors,1-i))}function Br(t,e,i){return(i<.5?t:e).withStopColorListAndTransform(Dr(t.stopColors,e.stopColors,i),Ur(t.transform,e.transform,i))}function Ur(t,e,i){return t?e?new ki(Cr(t.scale,e.scale,i),Cr(t.rotate,e.rotate,i)):new ki(Cr(t.scale,1,i),Cr(t.rotate,0,i)):e?new ki(Cr(1,e.scale,i),Cr(0,e.rotate,i)):null}function $r(t,e,i=.5){if(0===i||t.equals(e))return t;if(1===i)return e;const n=zr(t.point,e.point,i),s=t.handleIn&&e.handleIn?zr(t.handleIn,e.handleIn,i):null,r=t.handleOut&&e.handleOut?zr(t.handleOut,e.handleOut,i):null;return i<.5?new Di(n,t.type,t.joint,s??t.handleIn,r??t.handleOut):new Di(n,e.type,e.joint,s??e.handleIn,r??e.handleOut)}function Fr(){return{left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY}}function Vr(t,e){e.x<t.left&&(t.left=e.x),e.x>t.right&&(t.right=e.x),e.y<t.top&&(t.top=e.y),e.y>t.bottom&&(t.bottom=e.y)}function Hr(t,e=[]){return Number.isFinite(t.left)?[new ce(t.left,t.top),new ce(t.right,t.top),new ce(t.right,t.bottom),new ce(t.left,t.bottom)]:e}const Gr=new Map;function Zr(t,e){if(Gr.has(t))for(const i of Gr.get(t))i(e)}function Yr(t,e){Gr.has(t)||Gr.set(t,new Set),Gr.get(t).add(e)}function Qr(t,e){Gr.get(t)?.delete(e)}const Jr=new Map;function qr(t,e){if(!Jr.has(t))return void Jr.set(t,[e]);const i=Jr.get(t);i.includes(e)||i.push(e)}function Kr(t){if(!Jr.has(t))return[];const e=Jr.get(t).sort(Xr);return Jr.delete(t),e}function Xr(t,e){return(t.priority??0)-(e.priority??0)}const to=Symbol(),eo=Symbol(),io=Symbol(),no=Symbol(),so=Symbol(),ro=Symbol(),oo=Symbol(),ao=Symbol(),lo=Symbol(),co=Symbol(),uo=Symbol(),ho=Symbol(),fo=Symbol(),po=Symbol(),go=Symbol();let mo,vo,yo;function xo(t){qr(fo,t)}function bo(t){return t.clone()}function wo(t){t.dispose()}function Mo(t){t.copy??=bo,t.delete??=wo,qr(po,t)}function So(t){qr(go,t)}function ko(t){for(const e of mo){const i=t[e.id];i&&e.dispose?.(i),delete t[e.id]}}function _o(t){for(const e of vo)e.init&&t.set(e.id,e.init(t.get(e.id)));return t}function Io(t){const e=new Map,i=[];for(let n=0,s=vo.length;n<s;n++){const s=vo[n],r=t.get(s.id);if(r){if(s.deps?.length)for(const t of s.deps)i.push(e.get(t));e.set(s.id,s.copy(r,...i)),i.splice(0)}}return e}function Co(t){if(t?.size){for(const e of vo){if(!t.has(e.id))continue;const i=t.get(e.id);if(i&&e.delete(i),t.delete(e.id),!t.size)return}t.clear()}}function Lo(t){const e=new Map;if(t)for(const i of Reflect.ownKeys(t))e.set(i,t[i]);return e}Yr(ro,(()=>{mo=Kr(fo)??[],vo=Kr(po)??[],yo=Kr(go)??[]}));let No=!1,jo=null;const zo=function(){let t=!0;const e=()=>{t=!0};return()=>{t&&(No=!0,jo=To(),1)&&(t=!1,queueMicrotask(e))}}();function Po(){jo?.clear(),jo=null,No=!1}function To(){let t=null;for(const e of yo){const i=e.get();null!=i&&(t??=new Map).set(e.id,i)}return t}function Ao(t){return{global:{},content:t||{}}}function Do(t){t&&(t.content&&(Co(Lo(t.content)),delete t.content),t.global&&(ko(t.global),delete t.global))}let Eo,Oo;class Wo{constructor(){this.manifest=null}async begin(t){this.manifest=t}async end(){this.manifest=null}async serializeData(t){return mt(tt(t))}async serializeRaw(t){return async function(t,e="deflate"){return ut(pt(t,e))}(t)}}class Ro{constructor(){this.manifest=null,this.result=null}async begin(t,e){this.manifest=t,this.result=e}async end(){this.manifest=this.result=null}async deserializeData(t){return it(await vt(t),this.result,this.manifest.version)}async deserializeRaw(t){return async function(t,e="deflate"){return ut(gt(t,e))}(ht(t))}}function Bo(t,e,i){return{marker:t,serialize:new class extends Wo{async*items(){const t=e();null!=t&&(yield this.serializeData(t))}},deserialize:new class extends Ro{#Yt;async add(t){this.#Yt=await this.deserializeData(t)}async compute(t){const e=this.#Yt??t;return i?i(e,this.result):e}async end(){return this.#Yt=void 0,super.end()}}}}function Uo(t,e,i){const n=new DataView(new ArrayBuffer(5));n.setUint8(0,e),n.setUint32(1,i.length),t.enqueue(n.buffer),t.enqueue(i)}async function $o(t){let e;e=t instanceof ReadableStream?new DataView((await ut(t)).buffer):t instanceof Uint8Array?new DataView(t.buffer):new DataView(t);const i=e.getUint32(0);if(1702377317!==i&&1698134117!==i)throw new Error("Unknown file type");let n,s,r=4;function o(t){if(r>=e.byteLength)return null;const i=e.getUint8(r);if(r++,239===i)return null;if(null!=t&&i!==t)return null;const n=e.getUint32(r);r+=4;const s=new DataView(e.buffer,r,n);return r+=n,{marker:i,data:s}}if(n=o(1),!n)throw new Error("Invalid file type");try{s=JSON.parse(await vt(n.data))}catch(t){throw new Error("Invalid manifest")}if(s.version>Z)throw new Error("Project is created using a newer format. Check for updates then retry.");if(s.version<400)throw new Error("Unsupported legacy project");const a=Ao(),l=new Map;for(const t of[mo,vo])for(const e of t){const t=e.serialization;t&&(l.set(t.marker,t.deserialize),await t.deserialize.begin(s,a))}for(;n=o();)l.has(n.marker)&&await l.get(n.marker).add(n.data);for(const[t,e]of[[mo,a.global],[vo,a.content]])for(const i of t){const t=i.serialization;t&&(e[i.id]=await t.deserialize.compute(e[i.id]),await t.deserialize.end())}return a}let Fo=0;const Vo=[];function Ho(t,e){Po(),ta(0),Fo=0,function(){for(const t of vo)t.update(null)}(),Oo&&(ko(Oo),Oo=null),Oo=t.global||{},Vo.push([null,_o(Lo(t.content)),null,null,e]),Ko(0)}let Go=100;function Zo(){return Fo>0}function Yo(){return Fo<Vo.length-1}function Qo(){return Vo[Fo]?.[4]}function Jo(){ta(Fo+1);const t=Vo[Fo],e=t[0];t[0]=null,Go===Vo.length&&(Xo(Vo.shift()),Fo--);const i=To();t[2]=function(t){const e=jo;return jo=null,No?(No=!1,e??t):null}(t[3])??(i?new Map(i):null),Vo.push([e,Io(e),null,i,!1]),Fo++,Zr(io)}function qo(t,e){return function(t,e,i){if(!t)return!1;const n=vo.find((t=>t.id===e));if(!n)return!1;const s=t.get(n.id);return s!==i&&(t.set(n.id,i),n.update(i),s&&n.delete(s),!0)}(Vo[Fo]?.[0],t,e)}function Ko(t){Po();const e=Vo[Fo];e[0]??=Io(e[1]),Zr(to,t),function(t){for(const e of vo)e.update(t.get(e.id))}(e[0]),function(t){if(t?.size)for(const e of yo)e.set(t.get(e.id));else for(const t of yo)t.set(null)}(e[2===t?3:2]),Zr(eo,t)}function Xo(t){Co(t[0]),Co(t[1]),t[2]?.clear(),t[3]?.clear(),t.splice(0)}function ta(t){if(!(t>=Vo.length))for(const e of Vo.splice(t))Xo(e)}const ea=new Set;let ia=0,na=!1;function sa(){if(ea.size){const t=[...ea];ea.clear();for(const e of t)Zr(e)}na&&(na=!1,Jo())}function ra(){na=!0}function oa(){return ia>0}function aa(t){ia++,t&&zo()}function la(t){t&&ra(),--ia||sa()}let ca=()=>!1;function ua(t){return zt(t)?async function(...e){if(ia||ca())return!1;aa();try{return!!await t(...e)&&(ra(),!0)}finally{la()}}:function(...e){if(ia||ca())return!1;aa();try{return!!t(...e)&&(ra(),!0)}finally{la()}}}function ha(t){return function(){ia?ea.add(t):Zr(t)}}const da="settings",fa=new Map;function pa(t,e){e??=Oo;const i=e[da]??={};return i[t]??=fa.has(t)?fa.get(t)(i.settings):null}function ga(t,e){fa.set(t,e)}let ma;function va(t,e=!0){const i=ma.has(t.code)?ma.get(t.code):t.key;return e&&1===i.length?i.toUpperCase():i}xo({id:da,serialization:Bo(2,(()=>Oo?.[da]))});const ya="macOS"===navigator.userAgentData?.platform,xa=new Map([[0,new Map]]),ba=new Map([[0,new Set]]),wa=new Set;let Ma=0;function Sa(t){return!!xa.has(t)&&(Ma=t,!0)}function ka(t){wa.add(t)}function _a(t){let e=0;return(ya?t.metaKey:t.ctrlKey)&&(e|=1),t.shiftKey&&(e|=2),t.altKey&&(e|=4),e}function Ia(t,e,i){const n=xa.get(i);return n&&n.has(e)?n.get(e).get(t):null}function Ca(t,e,i){if(ba.has(i))for(const n of ba.get(i))if(!n(t,e,i))return!1;return!0}function La(t){let e=Ma;const i=_a(t);if(!Ca(t,i,e)||0!==e&&!Ca(t,i,0))return;if(wa.size>0)for(const n of wa)if(n(t,i,e))return void t.preventDefault();const n=va(t);let s=Ia(n,i,e);if(!s){if(0===e)return;if(e=0,s=Ia(n,i,e),!s)return}t.preventDefault(),s(t,i,e)}function Na(t){if(!wa.size)return;let e=Ma;const i=_a(t);if(Ca(t,i,e)&&(0===e||Ca(t,i,0)))for(const n of wa)if(n(t,i,e))return}const ja=new Set(["number","text","password","url","search"]);function za(t){return t instanceof HTMLInputElement?ja.has(t.type):t.isContentEditable||t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement}function Pa(t=document.activeElement){return t instanceof HTMLElement&&(t.shadowRoot?Pa(t.shadowRoot.activeElement):za(t))}function Ta(t){return za(t.target)||za(t.composedPath()[0])}const Aa=new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Hyper","Meta","NumLock","ScrollLock","Shift","Super","Symbol","SymbolLock","Enter","Tab"," ","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Finish","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp","AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate","HangulMode","HanjaMode","JunjaMode","Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHanaku","AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial","Close","New","Open","Print","Save","SpellCheck","MailForward","MailReply","MailSend","Decimal","Key11","Key12","Multiply","Add","Clear","Divide","Subtract","Separator"]),Da=/^(F|Soft)\d/,Ea=/^(TV|Audio|Microphone|Media|Channel|Launch|Browser|Speech|AV|Color|Favorite|Guide|Navigate|Play)/,Oa=new Map([["ShiftLeft",2],["ShiftRight",2],["AltLeft",4],["AltRight",4]]);ya?(Oa.set("MetaLeft",1),Oa.set("MetaRight",1)):(Oa.set("ControlLeft",1),Oa.set("ControlRight",1));let Wa=0,Ra=!1,Ba=!1,Ua=!1;function $a(t){return Wa!==t&&(Wa=t,Ra=!!(1&Wa),Ba=!!(2&Wa),Ua=!!(4&Wa),!0)}function Fa(t){return va(t,!0)}function Va(t){return 1===Oa.get(t.code)}function Ha(t){return 4===Oa.get(t.code)}const Ga=100,Za=1/Ga,Ya=new hi,Qa={x:0,y:0};let Ja,qa,Ka=1,Xa=1;function tl(){return Ya.inversePoint(0,0)}function el(){return Ya.inversePoint(Ja.width,Ja.height)}function il(){return Ve.fromPoints(Ya.inversePoint(0,0),Ya.inversePoint(Ja.width,Ja.height))}function nl(){let t=0;return Ka>=1?t=Ka<5?100:Ka>=5&&Ka<10?50:Ka>=10&&Ka<25?20:10:Ka<1&&(t=Ka>=.5?200:Ka>=.25?400:Ka>=.125?800:Ka>=.05?1600:Ka>=.02?3200:6400),t}function sl(t){return al(t||Ja.middle,1.25)}function rl(t){return al(t||Ja.middle,.8)}function ol(t,e,i){if(!t?.isVisible)return!1;e??=Ja,i??=20,i*=2;const s=Math.min((e.width-i)/t.width,(e.height-i)/t.height),r=(e.width/s-t.width)/2,o=(e.height/s-t.height)/2;return function(t,e,i){return i=n(i,Za,Ga),(Qa.x!==t||Qa.y!==e||Ka!==i)&&(Qa.x=t,Qa.y=e,Ka=i,fl(),!0)}((r-t.x)*s,(o-t.y)*s,s)}function al(t,e){if((e=n(Ka*e,Za,Ga))===Ka)return!1;const i=e/Ka;return Ka=e,Qa.x=t.x+(Qa.x-t.x)*i,Qa.y=t.y+(Qa.y-t.y)*i,fl(),!0}function ll(t){return Ya.transformInversePoint(t)}function cl(t,e){return new ce(t-Ja.x,e-Ja.y)}function ul(t,e){return Ya.inversePoint(t-Ja.x,e-Ja.y)}function hl(t=1){return t/Ya.lineScale}function dl(t,e,i,n,s,r){let o=1;s&&(o/=Ka,r??=20,o*=Math.min((Ja.width-r)/t.width,(Ja.height-r)/t.height),(!Number.isFinite(o)||Number.isNaN(o)||o<=0)&&(o=1));const a=new hi;return e&&!e.isIdentity&&a.multiplyInverse(e),i??=il().middle,a.translate(i.x,i.y),1!==o&&a.scale(o,o),a.translate(-(t.x+t.width*(n?.x??.5)),-(t.y+t.height*(n?.y??.5))),a}function fl(){Ya.toIdentity().panZoom(Qa,Ka),qa()}const pl=Symbol(),gl=Symbol();class ml{#Qt;#Jt;#qt;#Kt;constructor(t,e,i=32){this.#qt=null,this.#Kt=null,this.visible=!1;const n={alpha:!1,willReadFrequently:!0};this.horizontal=t,this.vertical=e,this.#Qt=t.getContext("2d",n),this.#Jt=e.getContext("2d",n),this.size=i}dispose(){this.visible=!1,this.#Qt=this.#Jt=null,this.#qt=this.#Kt=null,this.vertical=this.horizontal=this.theme=null}updateSize(t,e,i){St(this.#Qt.canvas,t,this.size*i,i),St(this.#Jt.canvas,this.size*i,e,i),this.#Qt.scale(i,i),this.#Jt.scale(i,i)}getStep(t){let e=0;return t>=1?e=t<5?100:t>=5&&t<10?50:t>=10&&t<25?20:10:t<1&&(e=t>=.5?200:t>=.25?400:t>=.125?800:t>=.05?1600:t>=.02?3200:6400),e}draw(t,e=!1){const i=this.#Qt,n=this.#Jt;e&&(this.#qt=this.#Kt=null),this.#qt&&(i.putImageData(this.#qt,0,0),n.putImageData(this.#Kt,0,0));const s=i.canvas.width;this.#Xt(i,s,!1,1),this.#Xt(n,s,!0,1),e||this.#qt||(this.#qt=i.getImageData(0,0,i.canvas.width,i.canvas.height),this.#Kt=n.getImageData(0,0,n.canvas.width,n.canvas.height)),t&&(this.#te(i,t.x,!1),this.#te(n,t.y,!0))}#Xt(t,e,i,n=1){const s=this.theme;t.save(),t.fillStyle=s.getColor("rulerBackground").rgba,i?t.fillRect(0,0,this.size,t.canvas.height):t.fillRect(0,0,t.canvas.width,this.size),t.fillStyle=t.strokeStyle=s.getColor("rulerText").rgba,t.lineWidth=1,t.imageSmoothingEnabled=!0,t.imageSmoothingQuality="high",t.font="10px -expressive-sans, sans-serif",t.textAlign="left",t.textBaseline="ideographic";const r=nl(),o=i?Qa.y:Qa.x,a=r*Ka,l=a/10,c=Math.floor(o%a),u=new Path2D;let h;h=o>0?(Math.ceil(-o/a)-1)*r:(Math.floor(-o/a)-1)*r;const d=.5*Xa;i?(t.translate(0,0),t.rotate(90*Dt),t.translate(c+d,-this.size+d)):t.translate(c+d,d);const f=Math.ceil(e/a)+2;for(let e=-1,s=0;e<f;e++,s++){const o=e*a;for(let e=0;e<10;e++){const a=Math.floor(o+e*l);if(u.moveTo(a,i?0:this.size),0===e){u.lineTo(a,i?24:8);let e=h+s*r;1!==n&&(e=Math.round(e*n*1e3)/1e3),t.fillText(e.toString(),a+4,i?20:16)}else 5===e?u.lineTo(a,i?12:20):u.lineTo(a,i?8:24)}}t.stroke(u),t.restore()}#te(t,e,i){const n=new Path2D;t.save(),t.lineWidth=1,t.strokeStyle=this.theme.getColor("rulerIndicator").rgba,i?(n.moveTo(.5,e),n.lineTo(this.size,e)):(n.moveTo(e,0),n.lineTo(e,this.size)),t.stroke(n),t.restore()}}class vl extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n<style>\n    :host {\n        display: block;\n        margin: 0;\n        padding: 0;\n        border: none;\n        min-width: 300px;\n        min-height: 300px;\n        height: 100%;\n        width: 100%;\n        outline: none;\n        box-sizing: border-box;\n    }\n\n    :host {\n        --render-engine-background-color: #252525;\n        --render-engine-board-color: #fff;\n        --render-engine-overlay-color: #fff8;\n        --render-engine-contour-color: #1473e6;\n        --render-engine-rulerBackground-color: #2f2f2f;\n        --render-engine-rulerText-color: #e3e3e3;\n        --render-engine-rulerIndicator-color: #378ef0;\n        --render-engine-snap-color: #c038cc;\n        --render-engine-grid-color: #808080;\n\n        /* guides */\n        --render-engine-guide-color: #d83790;\n        --render-engine-guide-hover-color: var(--render-engine-rulerIndicator-color);\n        --render-engine-guide-hover-size: 1;\n\n        /* element */\n        --render-engine-element-outline-color: #c9252d;\n        --render-engine-element-outline-size: 1;\n\n        /* selection */\n        --render-engine-selection-wrapper-color: #747474;\n        --render-engine-selection-wrapper-size: 1;\n\n        --render-engine-selection-area-color: #0084ff40;\n\n        /* tool */\n        --render-engine-tool-color: #378ef0;\n        --render-engine-tool-size: 1;\n\n        --render-engine-tool-handle-color: white;\n        --render-engine-tool-handle-filled-color: #378ef0;\n        --render-engine-tool-handle-radius-size: 4;\n\n        /* text */\n        --render-engine-text-baseline-color: #c038cc;\n        --render-engine-text-baseline-size: 1;\n\n        /* path */\n        --render-engine-path-line-color: #378ef0;\n        --render-engine-path-line-size: 2;\n\n        --render-engine-path-handle-color: var(--render-engine-path-line-color);\n        --render-engine-path-handle-size: 1;\n        --render-engine-path-handle-radius-size: 3;\n\n        --render-engine-path-node-selected-color: var(--render-engine-path-line-color);\n        --render-engine-path-node-unselected-color: white;\n        --render-engine-path-node-radius-size: 4;\n    }\n\n:host([cursor="artboard"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMS41MDM5LDYuNjY4OWMtLjQ4NDQsMC0uODc4OS0uMzkzMS0uODc4OS0uODc2VjEuNWMwLS40ODI0LjM5MjYtLjg3NS44NzUtLjg3NWg0LjI5M2MuMzU1NSwwLC42NzI5LjIxMjQuODA4Ni41NDA1cy4wNjE1LjcwMjYtLjE5MDQuOTUzMUwyLjExOTEsNi40MTE2Yy0uMTY3LjE2Ni0uMzg0OC4yNTczLS42MTUyLjI1NzNaIi8+PHBhdGggZD0ibTUuNzkyOCwxYy40NDU2LDAsLjY2ODYuNTM4Ni4zNTM2Ljg1MzVMMS44NTM1LDYuMTQ2NGMtLjEwMTguMTAxOS0uMjI3MS4xNDc0LS4zNS4xNDc0LS4yNTcsMC0uNTAzNS0uMTk5Ni0uNTAzNS0uNTAxVjEuNWMwLS4yNzYyLjIyMzktLjUuNS0uNWg0LjI5MjhtMC0uNzVIMS41Qy44MTA4LjI1LjI1LjgxMDguMjUsMS41djQuMjkyOWMwLC42ODk4LjU2MjQsMS4yNTEsMS4yNTM1LDEuMjUxLjMzMDksMCwuNjQzNi0uMTMwNC44ODA0LS4zNjcyTDYuNjc2OCwyLjM4MzljLjM1ODgtLjM1ODguNDY1Mi0uODkzNS4yNzEtMS4zNjIzLS4xOTQyLS40Njg3LS42NDc1LS43NzE2LTEuMTU0OS0uNzcxNmgwWiIgZmlsbD0iI2ZmZiIvPjxyZWN0IHg9IjguNjI1IiB5PSI0LjYyNSIgd2lkdGg9IjEuNzUiIGhlaWdodD0iMy43NSIvPjxwYXRoIGQ9Im0xMCw1djNoLTF2LTNoMW0uNzUtLjc1aC0yLjV2NC41aDIuNXYtNC41aDBaIiBmaWxsPSIjZmZmIi8+PHJlY3QgeD0iNC42MjUiIHk9IjguNjI1IiB3aWR0aD0iMy43NSIgaGVpZ2h0PSIxLjc1Ii8+PHBhdGggZD0ibTgsOXYxaC0zdi0xaDNtLjc1LS43NWgtNC41djIuNWg0LjV2LTIuNWgwWiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im04LjYyNSwyMi4zNzV2LTEzLjc1aDguODc1Yy4xMzk2LDAsLjI3NDQuMDE3Ni40MDkyLjAzNjFsLjEzMzguMDE3MWMyLjI2NDYuMjgyNywzLjk5NzEsMi4wMTUxLDQuMjcyNSw0LjIxOTJsLjAyNDQuMjAwMmMuMDE4Ni4xMzIzLjAzNTIuMjY0Ni4wMzUyLjQwMjN2OC44NzVoLTEzLjc1Wm0xMi0xLjc1di03LjEyNWMwLS4wNDItLjAwMi0uMDg0LS4wMDQ5LS4xMjVoLTIuOTk1MXYtMi45OTQ2Yy0uMDQyLS4wMDM0LS4wODMtLjAwNTQtLjEyNS0uMDA1NGgtNy4xMjV2MTAuMjVoMTAuMjVaIi8+PHBhdGggZD0ibTE3LjUsOWMuMTcxMSwwLC4zMzM3LjAzMTkuNS4wNTA2bC4wNTYzLjAwNTdjMi4wMzE1LjI1NDgsMy42MzI3LDEuODU1OSwzLjg4NzUsMy44ODc1bC4wMDU3LjA1NjNjLjAxODcuMTY2My4wNTA1LjMyODguMDUwNS41djguNWgtMTN2LTEzaDguNW0tNy41LDEyaDExdi03LjVjMC0uMTcxMi0uMDI2Ni0uMzM1My0uMDUwNS0uNWgtMi45NDk1di0yLjk0OTVjLS4xNjQ4LS4wMjM5LS4zMjg5LS4wNTA1LS41LS4wNTA1aC03LjV2MTFtNy41LTEyLjc1aC05LjI1djE0LjVoMTQuNXYtOS4yNWMwLS4xNTU2LS4wMTgzLS4zMDU4LS4wMzg3LS40NTU4bC0uMDE2NS0uMTI3OS0uMDA1LS4wNDg1Yy0uMjk5Ny0yLjM5MTYtMi4xNjU5LTQuMjU3OC00LjU0MDItNC41NTU2bC0uMDc0NS0uMDA3Ny0uMTE4Ny0uMDE1NWMtLjE1MDQtLjAyMDUtLjMwMDgtLjAzODgtLjQ1NjUtLjAzODhoMFptLTYuNzUsMi41aDYuNXYzaDN2Ni41aC05LjV2LTkuNWgwWiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="caret"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMTIuNjI1LDIwLjM3NXYtMWgtMi4yNXYxaC0xLjc1di0uMzc1YzAtMS4xODIxLjg2ODItMi4xNjUsMi0yLjM0NTJWNi4zNDUyYy0xLjEzMTgtLjE4MDItMi0xLjE2MzEtMi0yLjM0NTJ2LS4zNzVoMS43NXYxaDIuMjV2LTFoMS43NXYuMzc1YzAsMS4xODIxLS44NjgyLDIuMTY1LTIsMi4zNDUydjExLjMwOTZjMS4xMzE4LjE4MDIsMiwxLjE2MzEsMiwyLjM0NTJ2LjM3NWgtMS43NVoiLz48cGF0aCBkPSJtMTQsNGMwLDEuMTA0Ni0uODk1NCwyLTIsMnYxMmMxLjEwNDYsMCwyLC44OTU0LDIsMmgtMXYtMWgtM3YxaC0xYzAtMS4xMDQ2Ljg5NTQtMiwyLTJWNmMtMS4xMDQ2LDAtMi0uODk1NC0yLTJoMXYxaDN2LTFoMW0uNzUtLjc1aC0yLjV2MWgtMS41di0xaC0yLjV2Ljc1YzAsMS4yNTY1Ljg0NjksMi4zMTg4LDIsMi42NDYxdjEwLjcwNzljLTEuMTUzMS4zMjcyLTIsMS4zODk2LTIsMi42NDYxdi43NWgyLjV2LTFoMS41djFoMi41di0uNzVjMC0xLjI1NjUtLjg0NjktMi4zMTg4LTItMi42NDYxVjYuNjQ2MWMxLjE1MzEtLjMyNzIsMi0xLjM4OTYsMi0yLjY0NjF2LS43NWgwWiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==") 12 12, auto}\n:host([cursor="hand"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMTEuNTAxMSwzLjY4NzJjLjc5OTcsMCwxLjQ2NjMuNjI1MywxLjUzNSwxLjQ0MTcuMTE5LDEuNDE0NS40MjU3LDQuNzI4MS41MDcyLDUuNzMwNS4wMDkyLjExMzQuMDk2NC4xNzIzLjE4MzUuMTcyMy4wNzk2LDAsLjE1OTEtLjA0OTIuMTc5LS4xNTExLjE1MzktLjc4ODQuMzQyOC0zLjc4MTcuNTgzNS01LjExODQuMTM4Mi0uNzY3NC43OTE0LTEuMjkzMywxLjUxNDgtMS4yOTMzLjEzNTgsMCwuMjc0LjAxODUuNDExOC4wNTc1Ljc3LjIxNzUsMS4yNTA4LDEsMS4xMDc5LDEuODA1Mi0uMjM2MSwxLjMzMDEtLjYzMzUsNC4zMDY0LS43NzE0LDUuMDMxNy0uMDIyMy4xMTc0LjA2ODMuMTk0NS4xNTkxLjE5NDUuMDU1OCwwLC4xMTE3LS4wMjkyLjE0MTItLjA5NjMuMTkwNi0uNDMyNC42NDE4LTIuNDY2MS45NTQ5LTMuMzQ2My4yMTctLjYwOTguNzc5OC0uOTk0NywxLjM4NTktLjk5NDcuMTMsMCwuMjYyMS4wMTc3LjM5My4wNTQ3LjgxNDkuMjMwMiwxLjI3NSwxLjExMzQsMS4wMDgyLDEuOTM1M2wtMy4yOTQxLDEwLjMzNjFjLS4yNTIzLjc0NjMtLjg5NTYsMS4yNDA3LTEuNjE0MiwxLjI0MDdoLTQuODY3NmMtLjY4OTcsMC0xLjI2MjQsMC0xLjkwMzUtLjUxNTctMS4yMzcyLS45OTUtMy40NDQzLTMuNTQ3OC00Ljg0NDMtNS4yMjEtLjY3NTUtLjgwNzMtLjQ3MTEtMi4wNDMzLjQyNDgtMi41Nzk5LjI2MjctLjE1NzMuNTUyLS4yMzMxLjgzODUtLjIzMzEuNDk5NSwwLC45OTAzLjIzMDMsMS4zMTU1LjY1OTcuMzI2Ny40MzEzLjgyNzcsMS4zNDU4Ljk0MzIsMS40OTU5LjA0NDUuMDU3OC4xMDMuMDgyNi4xNjAzLjA4MjYuMTI3OCwwLC4yNDk5LS4xMjM0LjE5OTMtLjI3OTItLjM0MDUtMS4wNDgzLTEuNDQ5LTQuMjc2NC0yLjA0OTctNi4wNDUxLS4yOTUzLS44Njk1LjE4ODctMS44MTMyLDEuMDU0OS0yLjA1NzkuMTM4LS4wMzkuMjc3MS0uMDU3Ny40MTQxLS4wNTc3LjYzNzYsMCwxLjIyOTguNDA0MywxLjQ1ODMsMS4wNDU2LjM5NTksMS4xMTEyLDEuMTYwNiwzLjUzMzYsMS40MDMyLDQuMjE3NC4wMTQ1LjA0MDguMDQ3Ni4wNTkxLjA4MDcuMDU5MS4wNDY2LDAsLjA5MzQtLjAzNjMuMDg4NC0uMDk3MS0uMDg4OS0xLjA5MzMtLjUwNzItNC4yMTcyLS42MzY2LTUuNzYtLjA3NzMtLjkyMi42MzIyLTEuNzEzNywxLjUzNTItMS43MTM3IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIuNzUiLz48L3N2Zz4=") 12 12, auto}\n:host([cursor="hand-grab"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMTAuNzQxNSw0LjVjMS41MTE4LDAsMS44NDQ2Ljc2NTUsMi4yODYyLDEuNTQwMy4xMzI3LjIzMjkuMjcxMi4zMjEyLjQyMjMuMzIxMi40NzQ4LDAsMS4wNzMyLS44NzMyLDIuMDAyNy0uODczMS4yMDcsMCwuNDMwNS4wNDMzLjY3MjcuMTQ5Mi43ODUzLjM0MzUuNjk2MSwxLjE2NjksMS4xNjE2LDEuOTI1My4wMzU2LjA1OC4wNzc5LjA4MS4xMjk2LjA4MS4yMDE4LDAsLjU0NDctLjM1MjIsMS4xNzMtLjM1MjIuMjc5NSwwLC42MTU2LjA2OTcsMS4wMjA3LjI3MTIuNzc0NC4zODUxLjk0NiwxLjQxNjguNjYwNSwyLjMxMDRsLTMuMTA2NSw4LjI3NzhjLS4yNzAxLjgxMTQtLjk1ODgsMS4zNDg5LTEuNzI4MSwxLjM0ODloLTUuMjEwOWMtLjczODMsMC0xLjM1MTQsMC0yLjAzNzgtLjU2MDctMS4zMjQ0LTEuMDgxOC0yLjk1NDEtMy4wMTExLTQuNDUyOC00LjgzMDMtLjcyMzEtLjg3NzctLjE4NDctMy42NTIzLjc3NDQtNC4yMzU3LjE2MjMtLjA5ODcuMjg3NS0uMTQyMS4zODkyLS4xNDIuMzgxNiwwLC40MzEzLjYxMDMuODY0LDEuMTkwNC4wMzY0LjA0ODkuMDY3LjA3MTkuMDkxOS4wNzE5LjIxNDEsMCwuMDA1NC0xLjcwODEtLjU3MDctMy40MzA3LS4zMTYyLS45NDU0LjIzNDQtMi4wNDQ0LDEuMTYxNi0yLjMxMDQuMTMzOC0uMDM4NC4yNzY3LS4wNTY2LjQyMzYtLjA1NjYuNzcwMywwLDEuNjUwMS41MDAzLDEuODk5NywxLjIxMTguMDY4OC4xOTYyLjExNTMuMjc4NC4xNTMzLjI3ODQuMTk2LDAsLjE2NzItMi4xODYxLDEuODE5OC0yLjE4NjEiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9Ii43NSIvPjwvc3ZnPg==") 12 12, auto}\n:host([cursor="bucket"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMS41MDM5LDYuNjY4OWMtLjQ4NDQsMC0uODc4OS0uMzkzMS0uODc4OS0uODc2VjEuNWMwLS40ODI0LjM5MjYtLjg3NS44NzUtLjg3NWg0LjI5M2MuMzU1NSwwLC42NzI5LjIxMjQuODA4Ni41NDA1cy4wNjE1LjcwMjYtLjE5MDQuOTUzMUwyLjExOTEsNi40MTE2Yy0uMTY3LjE2Ni0uMzg0OC4yNTczLS42MTUyLjI1NzNaIi8+PHBhdGggZD0ibTUuNzkyOCwxYy40NDU2LDAsLjY2ODYuNTM4Ni4zNTM2Ljg1MzZMMS44NTM1LDYuMTQ2NGMtLjEwMTguMTAxOS0uMjI3MS4xNDc0LS4zNS4xNDc0LS4yNTcsMC0uNTAzNS0uMTk5Ni0uNTAzNS0uNTAxVjEuNWMwLS4yNzYxLjIyMzktLjUuNS0uNWg0LjI5MjhtMC0uNzVIMS41Qy44MTA4LjI1LjI1LjgxMDguMjUsMS41djQuMjkyOWMwLC42ODk4LjU2MjQsMS4yNTEsMS4yNTM1LDEuMjUxLjMzMDksMCwuNjQzNi0uMTMwNC44ODA0LS4zNjcyTDYuNjc2OCwyLjM4MzljLjM1ODgtLjM1ODguNDY1Mi0uODkzNS4yNzEtMS4zNjIzLS4xOTQyLS40Njg3LS42NDc1LS43NzE2LTEuMTU0OS0uNzcxNmgwWiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xNC43MzE0LDIyLjkzNzVjLS41MTM3LDAtLjk3NzUtLjEwNjktMS4zNzg5LS4zMTc0bC0uMTg0Ni0uMTAyMS01LjU2NDUtNS40ODM5LTMuOTI3Ny0xLjkwMDQsNS4zNzctNS40OTIyYzEuNzA5LTEuNzA4NSwzLjY0NTUtMi43Njc2LDUuMDU3Ni0yLjc2NzYuODU3NCwwLDEuMzk2NS4zNTg0LDEuNjk3My42NTg3bC44NTI1Ljg2MjgsMS43ODEyLTEuNzgxN2MuMjU5OC0uMjU5OC42MDU1LS40MDI4Ljk3MjctLjQwMjhzLjcxMjkuMTQzMS45NzI3LjQwMjhjLjI1ODguMjU5My40MDIzLjYwNDUuNDAyMy45NzIyLDAsLjM2NzItLjE0MjYuNzEyNC0uNDAyMy45NzIybC0xLjc5NDksMS43OTM5LDMuMzYzMywzLjQwMjguMDkyOC4xODUxYy45OTAyLDEuODUwNi0uNDMxNiw0LjU0NzktMi4yODIyLDYuMzk2NS0xLjYwNDUsMS42MDQ1LTMuNTMzMiwyLjYwMTEtNS4wMzQyLDIuNjAxMVoiLz48cGF0aCBkPSJtMTkuNDE0Miw2LjU4NThjLjI1NiwwLC41MTE4LjA5NzYuNzA3Mi4yOTI5LjM5MDUuMzkwNS4zOTA1LDEuMDIzNywwLDEuNDE0MmwtMi4wNTc2LDIuMDU3NSwzLjQ4NTYsMy41Mjg4LjA5ODEuMDk4MS4wNjU0LjEzMDdjLjkwMjgsMS42ODctLjQ1OCw0LjIxMDktMi4yMTE1LDUuOTYzMy0xLjUzNzUsMS41MzY2LTMuMzYyOSwyLjQ5MTItNC43Njk3LDIuNDkxMi0uNDUxNCwwLS44NTcyLS4wOTE2LTEuMjAzOS0uMjc0NmwtLjEzMDktLjA3Mi0uMDk4MS0uMDk4MS01LjQ3NjQtNS4zOTQ0LTIuMjgzNC0xLjEwNS0xLjIzMDEtLjU5NS45NTUzLS45NzQzLDQuMDU2NS00LjE0NTVjMS42MzU3LTEuNjM0NywzLjQ3NDItMi42NTQ3LDQuNzg5NC0yLjY1NDcuNzMyOCwwLDEuMTg0Mi4zMDA4LDEuNDMyOS41NDkzbDEuMTE1MiwxLjEyOTIsMi4wNDg4LTIuMDQ4OGMuMTk1My0uMTk1My40NTEzLS4yOTI5LjcwNzItLjI5MjltMC0uNzVjLS40Njc0LDAtLjkwNjkuMTgyLTEuMjM3NC41MTI0bC0xLjUxNTMsMS41MTUzLS41ODUtLjU5MjNjLS4zNTQ0LS4zNTQyLS45Nzk5LS43NzIyLTEuOTY2NC0uNzcyMi0xLjUzLDAtMy41MTg3LDEuMDc0NS01LjMxOTYsMi44NzQybC00LjA2MjQsNC4xNTE1LS45NTQ4Ljk3MzgtLjczMTEuNzQ1Ni45NDAxLjQ1NDcsMS4yMzAxLjU5NSwyLjE3MTksMS4wNTExLDUuMzg4Miw1LjMwNzUuMDk0NC4wOTQyLjA3NTMuMDc1My4wOTM0LjA1MTQuMTMwOS4wNzJjLjQ2NTUuMjQ1OC45ODgzLjM2NzQsMS41NjUzLjM2NzQsMS42MjAyLDAsMy42MDE0LTEuMDEzMyw1LjI5OTgtMi43MTA3LDEuODA1NS0xLjgwNDMsMy41MDI0LTQuNjgwNCwyLjM0MjctNi44NDc2bC0uMDU2LS4xMTI1LS4wNTQ0LS4xMDg4LS4wODYxLS4wODYtLjA5ODEtLjA5ODEtMi45NTg0LTIuOTk1MSwxLjUzMDUtMS41MzA0Yy42ODI0LS42ODI0LjY4MjQtMS43OTI2LjAwMDEtMi40NzQ5LS4zMzA3LS4zMzA2LS43NzAxLS41MTI2LTEuMjM3NS0uNTEyNmgwWiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xOC40MzYzLDkuOTc3OWwtMS41MjIxLDEuNTIyMWMtLjM5MDUuMzkwNS0xLjAyMzcuMzkwNS0xLjQxNDIsMGgwYy0uMzkwNS0uMzkwNS0uMzkwNS0xLjAyMzcsMC0xLjQxNDJsMS41NjM3LTEuNTYzNywxLjM3MjUsMS40NTU5WiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="node"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="node-add"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIvPjxwb2x5Z29uIHBvaW50cz0iMTguNjI1IDIzLjM3NSAxOC42MjUgMjAuMzc1IDE1LjYyNSAyMC4zNzUgMTUuNjI1IDE4LjYyNSAxOC42MjUgMTguNjI1IDE4LjYyNSAxNS42MjUgMjAuMzc1IDE1LjYyNSAyMC4zNzUgMTguNjI1IDIzLjM3NSAxOC42MjUgMjMuMzc1IDIwLjM3NSAyMC4zNzUgMjAuMzc1IDIwLjM3NSAyMy4zNzUgMTguNjI1IDIzLjM3NSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMCwxNnYzaDN2MWgtM3YzaC0xdi0zaC0zdi0xaDN2LTNoMW0uNzUtLjc1aC0yLjV2M2gtM3YyLjVoM3YzaDIuNXYtM2gzdi0yLjVoLTN2LTNoMFoiLz48L3N2Zz4=") 0 0, auto}\n:host([cursor="node-mold"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIvPjxwYXRoIGQ9Im0xNS41LDIzLjVjLS41NTE4LDAtMS0uNDQ4Ny0xLTFzLjQ0ODItMSwxLTFjMy4zMDg2LDAsNi0yLjY5MTQsNi02LDAtLjU1MTMuNDQ4Mi0xLDEtMXMxLC40NDg3LDEsMWMwLDQuNDExMS0zLjU4ODksOC04LDhaIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTIyLjUsMTQuODc1Yy4zNDQ3LDAsLjYyNS4yNzk4LjYyNS42MjUsMCw0LjIwNDYtMy40MjA5LDcuNjI1LTcuNjI1LDcuNjI1LS4zNDQ3LDAtLjYyNS0uMjc5OC0uNjI1LS42MjVzLjI4MDMtLjYyNS42MjUtLjYyNWMzLjUxNTYsMCw2LjM3NS0yLjg1OTksNi4zNzUtNi4zNzUsMC0uMzQ1Mi4yODAzLS42MjUuNjI1LS42MjVtMC0uNzVjLS43NTgyLDAtMS4zNzUuNjE2OC0xLjM3NSwxLjM3NSwwLDMuMTAxNi0yLjUyMzMsNS42MjUtNS42MjUsNS42MjUtLjc1ODIsMC0xLjM3NS42MTY4LTEuMzc1LDEuMzc1cy42MTY4LDEuMzc1LDEuMzc1LDEuMzc1YzQuNjE4LDAsOC4zNzUtMy43NTcsOC4zNzUtOC4zNzUsMC0uNzU4Mi0uNjE2OC0xLjM3NS0xLjM3NS0xLjM3NWgwWiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="node-move"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIvPjxjaXJjbGUgY3g9IjIwLjUiIGN5PSIyMC41IiByPSIyLjg3NSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMC41LDE4YzEuMzgwNywwLDIuNSwxLjExOTMsMi41LDIuNXMtMS4xMTkzLDIuNS0yLjUsMi41LTIuNS0xLjExOTMtMi41LTIuNSwxLjExOTMtMi41LDIuNS0yLjVtMC0uNzVjLTEuNzkyMSwwLTMuMjUsMS40NTc5LTMuMjUsMy4yNXMxLjQ1NzksMy4yNSwzLjI1LDMuMjUsMy4yNS0xLjQ1NzksMy4yNS0zLjI1LTEuNDU3OS0zLjI1LTMuMjUtMy4yNWgwWiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="node-sub"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIvPjxyZWN0IHg9IjE1LjYyNSIgeT0iMTguNjI1IiB3aWR0aD0iNy43NSIgaGVpZ2h0PSIxLjc1IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTIzLDE5djFoLTd2LTFoN20uNzUtLjc1aC04LjV2Mi41aDguNXYtMi41aDBaIi8+PC9zdmc+") 0 0, auto}\n:host([cursor="not-allowed"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMTEuNSwyMC4zNzVjLTQuODkzNiwwLTguODc1LTMuOTgxNC04Ljg3NS04Ljg3NVM2LjYwNjQsMi42MjUsMTEuNSwyLjYyNXM4Ljg3NSwzLjk4MTQsOC44NzUsOC44NzUtMy45ODE0LDguODc1LTguODc1LDguODc1Wm0tMy4yNDIyLTMuNjg4NWMuOTc2Ni42MTUyLDIuMDg4OS45Mzg1LDMuMjQyMi45Mzg1LDMuMzc3LDAsNi4xMjUtMi43NDc2LDYuMTI1LTYuMTI1LDAtMS4xNTM4LS4zMjMyLTIuMjY2MS0uOTM3NS0zLjI0MjJsLTguNDI5Nyw4LjQyODdabTMuMjQyMi0xMS4zMTE1Yy0zLjM3NywwLTYuMTI1LDIuNzQ3Ni02LjEyNSw2LjEyNSwwLDEuMTUzOC4zMjMyLDIuMjY2MS45Mzc1LDMuMjQyMkwxNC43NDIyLDYuMzEzNWMtLjk3NjYtLjYxNTItMi4wODg5LS45Mzg1LTMuMjQyMi0uOTM4NVoiLz48cGF0aCBkPSJtMTEuNSwzYzQuNjg2NSwwLDguNSwzLjgxMyw4LjUsOC41cy0zLjgxMzUsOC41LTguNSw4LjVTMywxNi4xODcsMywxMS41LDYuODEzNSwzLDExLjUsM20tNS4yNDE3LDEyLjMyNzZMMTUuMzI3Niw2LjI1ODNjLTEuMDc1Mi0uNzg3NC0yLjM5Ni0xLjI1ODMtMy44Mjc2LTEuMjU4My0zLjU4NCwwLTYuNSwyLjkxNi02LjUsNi41LDAsMS40MzE3LjQ3MDksMi43NTI0LDEuMjU4MywzLjgyNzZtNS4yNDE3LDIuNjcyNGMzLjU4NCwwLDYuNS0yLjkxNiw2LjUtNi41LDAtMS40MzE3LS40NzA5LTIuNzUyNC0xLjI1ODMtMy44Mjc2bC05LjA2OTMsOS4wNjkzYzEuMDc1Mi43ODc0LDIuMzk2LDEuMjU4MywzLjgyNzYsMS4yNTgzbTAtMTUuNzVDNi4zOTk1LDIuMjUsMi4yNSw2LjM5OTUsMi4yNSwxMS41czQuMTQ5NSw5LjI1LDkuMjUsOS4yNSw5LjI1LTQuMTQ5NSw5LjI1LTkuMjVTMTYuNjAwNSwyLjI1LDExLjUsMi4yNWgwWm0tNS4xMDU3LDExLjg4MWMtLjQyMzUtLjgxMjItLjY0NDMtMS43MDc1LS42NDQzLTIuNjMxLDAtMy4xNzA2LDIuNTc5NS01Ljc1LDUuNzUtNS43NS45MjM1LDAsMS44MTg4LjIyMDgsMi42MzEuNjQ0M2wtNy43MzY3LDcuNzM2N2gwWm0yLjQ3NDcsMi40NzQ3bDcuNzM2Ny03LjczNjdjLjQyMzUuODEyMi42NDQzLDEuNzA3NS42NDQzLDIuNjMxLDAsMy4xNzA2LTIuNTc5NSw1Ljc1LTUuNzUsNS43NS0uOTIzNSwwLTEuODE4OC0uMjIwOC0yLjYzMS0uNjQ0M2gwWiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==") 12 12, auto}\n:host([cursor="pen"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9IjUuNzEzOSAxNi4yNjUxIC42MjUgMTMuMjEyNCAuNjI1IC44NjU3IDExLjM3NSA2Ljc3ODMgMTEuMzc1IDEyLjg4NjIgMTMuNTM5MSAxNi4xMzI4IDcuMzM4OSAxOS41MTUxIDUuNzEzOSAxNi4yNjUxIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMS41bDEwLDUuNXY2bDIsMy01LjUsMy0xLjUtMy01LTNWMS41TS4yNS4yMzE1djEzLjE5MzFsLjM2NDEuMjE4NSw0LjgxMjcsMi44ODc2LDEuNDAyMywyLjgwNDcuMzQ3NS42OTUyLjY4MjQtLjM3MjIsNS41LTMsLjcxOTYtLjM5MjUtLjQ1NDctLjY4Mi0xLjg3NC0yLjgxMTF2LTYuMjE2NGwtLjM4ODUtLjIxMzdMMS4zNjE1Ljg0MjguMjUuMjMxNUguMjVaIi8+PGxpbmUgeDE9IjEiIHkxPSIxLjUiIHgyPSI2IiB5Mj0iMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iLjc1Ii8+PHJlY3QgeD0iNSIgeT0iOSIgd2lkdGg9IjIiIGhlaWdodD0iMiIgcng9IjEiIHJ5PSIxIi8+PC9zdmc+") 0 0, auto}\n:host([cursor="pen-add"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9IjE4LjYyNSAyMy4zNzUgMTguNjI1IDIwLjM3NSAxNS42MjUgMjAuMzc1IDE1LjYyNSAxOC42MjUgMTguNjI1IDE4LjYyNSAxOC42MjUgMTUuNjI1IDIwLjM3NSAxNS42MjUgMjAuMzc1IDE4LjYyNSAyMy4zNzUgMTguNjI1IDIzLjM3NSAyMC4zNzUgMjAuMzc1IDIwLjM3NSAyMC4zNzUgMjMuMzc1IDE4LjYyNSAyMy4zNzUiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtMjAsMTZ2M2gzdjFoLTN2M2gtMXYtM2gtM3YtMWgzdi0zaDFtLjc1LS43NWgtMi41djNoLTN2Mi41aDN2M2gyLjV2LTNoM3YtMi41aC0zdi0zaDBaIi8+PHBvbHlnb24gcG9pbnRzPSI1LjcxMzkgMTYuMjY1MSAuNjI1IDEzLjIxMjQgLjYyNSAuODY1NyAxMS4zNzUgNi43NzgzIDExLjM3NSAxMi44ODYyIDEzLjUzOTEgMTYuMTMyOCA3LjMzODkgMTkuNTE1MSA1LjcxMzkgMTYuMjY1MSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xLDEuNWwxMCw1LjV2NmwyLDMtNS41LDMtMS41LTMtNS0zVjEuNU0uMjUuMjMxNXYxMy4xOTMxbC4zNjQxLjIxODUsNC44MTI3LDIuODg3NiwxLjQwMjMsMi44MDQ3LjM0NzUuNjk1Mi42ODI0LS4zNzIyLDUuNS0zLC43MTk2LS4zOTI1LS40NTQ3LS42ODItMS44NzQtMi44MTExdi02LjIxNjRsLS4zODg1LS4yMTM3TDEuMzYxNS44NDI4LjI1LjIzMTVILjI1WiIvPjxsaW5lIHgxPSIxIiB5MT0iMS41IiB4Mj0iNiIgeTI9IjEwIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9Ii43NSIvPjxyZWN0IHg9IjUiIHk9IjkiIHdpZHRoPSIyIiBoZWlnaHQ9IjIiIHJ4PSIxIiByeT0iMSIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="pencil"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWxpbmUgcG9pbnRzPSIxMy41IDcuNSAxNS41IDUuNSAxOC41IDguNSAxNi41IDEwLjUiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+PHBhdGggZD0ibTUuMzc1LDIxLjVsMTEuMTI1LTExLTMtM0wyLjUsMTguNjI1bC0xLjkwMjYsNC42Mzc2Yy0uMDM2Mi4wODgxLjA1MTkuMTc2Mi4xNC4xNGw0LjYzNzYtMS45MDI2WiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz48bGluZSB4MT0iMi41IiB5MT0iMTguNSIgeDI9IjUuNSIgeTI9IjIxLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+PC9zdmc+") 0 24, auto}\n:host([cursor="pen-close"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSIyMC41IiBjeT0iMjAuNSIgcj0iMi44NzUiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtMjAuNSwxOGMxLjM4MDcsMCwyLjUsMS4xMTkzLDIuNSwyLjVzLTEuMTE5MywyLjUtMi41LDIuNS0yLjUtMS4xMTkzLTIuNS0yLjUsMS4xMTkzLTIuNSwyLjUtMi41bTAtLjc1Yy0xLjc5MjEsMC0zLjI1LDEuNDU3OS0zLjI1LDMuMjVzMS40NTc5LDMuMjUsMy4yNSwzLjI1LDMuMjUtMS40NTc5LDMuMjUtMy4yNS0xLjQ1NzktMy4yNS0zLjI1LTMuMjVoMFoiLz48cG9seWdvbiBwb2ludHM9IjUuNzEzOSAxNi4yNjUxIC42MjUgMTMuMjEyNCAuNjI1IC44NjU3IDExLjM3NSA2Ljc3ODMgMTEuMzc1IDEyLjg4NjIgMTMuNTM5MSAxNi4xMzI4IDcuMzM4OSAxOS41MTUxIDUuNzEzOSAxNi4yNjUxIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMS41bDEwLDUuNXY2bDIsMy01LjUsMy0xLjUtMy01LTNWMS41TS4yNS4yMzE2djEzLjE5MzFsLjM2NDEuMjE4NSw0LjgxMjcsMi44ODc2LDEuNDAyMywyLjgwNDcuMzQ3NS42OTUyLjY4MjQtLjM3MjIsNS41LTMsLjcxOTYtLjM5MjUtLjQ1NDctLjY4Mi0xLjg3NC0yLjgxMTF2LTYuMjE2NGwtLjM4ODUtLjIxMzdMMS4zNjE1Ljg0MjguMjUuMjMxNkguMjVaIi8+PGxpbmUgeDE9IjEiIHkxPSIxLjUiIHgyPSI2IiB5Mj0iMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iLjc1Ii8+PHJlY3QgeD0iNSIgeT0iOSIgd2lkdGg9IjIiIGhlaWdodD0iMiIgcng9IjEiIHJ5PSIxIi8+PC9zdmc+") 0 0, auto}\n:host([cursor="pen-continue"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9IjUuNzEzOSAxNi4yNjUxIC42MjUgMTMuMjEyNCAuNjI1IC44NjU3IDExLjM3NSA2Ljc3ODMgMTEuMzc1IDEyLjg4NjIgMTMuNTM5MSAxNi4xMzI4IDcuMzM4OSAxOS41MTUxIDUuNzEzOSAxNi4yNjUxIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMS41bDEwLDUuNXY2bDIsMy01LjUsMy0xLjUtMy01LTNWMS41TS4yNS4yMzE2djEzLjE5MzFsLjM2NDEuMjE4NSw0LjgxMjcsMi44ODc2LDEuNDAyMywyLjgwNDcuMzQ3NS42OTUyLjY4MjQtLjM3MjIsNS41LTMsLjcxOTYtLjM5MjUtLjQ1NDctLjY4Mi0xLjg3NC0yLjgxMTF2LTYuMjE2NGwtLjM4ODUtLjIxMzdMMS4zNjE1Ljg0MjguMjUuMjMxNkguMjVaIi8+PGxpbmUgeDE9IjEiIHkxPSIxLjUiIHgyPSI2IiB5Mj0iMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iLjc1Ii8+PHJlY3QgeD0iNSIgeT0iOSIgd2lkdGg9IjIiIGhlaWdodD0iMiIgcng9IjEiIHJ5PSIxIi8+PHJlY3QgeD0iMTQuNDY0MyIgeT0iMTguNjI1IiB3aWR0aD0iOS4wNzE1IiBoZWlnaHQ9IjIuMjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03LjY2MjIgMTMuNDEwNCkgcm90YXRlKC0zMi43MzM3KSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMi4wOTQ3LDE2Ljg2OTFsLjgxMDUsMS4yNjE3LTcsNC41LS44MTA1LTEuMjYxNyw3LTQuNW0uMjI1NS0xLjAzNjZsLS42MzEuNDA1Ny03LDQuNS0uNjMwNy40MDU0LjQwNTMuNjMwOC44MTA1LDEuMjYxNy40MDU1LjYzMTIuNjMxLS40MDU3LDctNC41LjYzMDctLjQwNTQtLjQwNTMtLjYzMDgtLjgxMDUtMS4yNjE3LS40MDU1LS42MzEyaDBaIi8+PC9zdmc+") 0 0, auto}\n:host([cursor="pen-start"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9IjUuNzEzOSAxNi4yNjUxIC42MjUgMTMuMjEyNCAuNjI1IC44NjU3IDExLjM3NSA2Ljc3ODMgMTEuMzc1IDEyLjg4NjIgMTMuNTM5MSAxNi4xMzI4IDcuMzM4OSAxOS41MTUxIDUuNzEzOSAxNi4yNjUxIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMS41bDEwLDUuNXY2bDIsMy01LjUsMy0xLjUtMy01LTNWMS41TS4yNS4yMzE2djEzLjE5MzFsLjM2NDEuMjE4NSw0LjgxMjcsMi44ODc2LDEuNDAyMywyLjgwNDcuMzQ3NS42OTUyLjY4MjQtLjM3MjIsNS41LTMsLjcxOTYtLjM5MjUtLjQ1NDctLjY4Mi0xLjg3NC0yLjgxMTF2LTYuMjE2NGwtLjM4ODUtLjIxMzdMMS4zNjE1Ljg0MjguMjUuMjMxNkguMjVaIi8+PGxpbmUgeDE9IjEiIHkxPSIxLjUiIHgyPSI2IiB5Mj0iMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iLjc1Ii8+PHJlY3QgeD0iNSIgeT0iOSIgd2lkdGg9IjIiIGhlaWdodD0iMiIgcng9IjEiIHJ5PSIxIi8+PHBvbHlnb24gcG9pbnRzPSIxOC42MjUgMjMuMzc1IDE4LjYyNSAyMS43ODk2IDE3LjQ2NzggMjIuOTQ2OCAxNi4wNTI3IDIxLjUzMjcgMTcuMjEgMjAuMzc1IDE1LjYyNSAyMC4zNzUgMTUuNjI1IDE4LjYyNSAxNy4yMTA5IDE4LjYyNSAxNi4wNTI3IDE3LjQ2NjggMTcuNDY3OCAxNi4wNTI3IDE4LjYyNSAxNy4yMSAxOC42MjUgMTUuNjI1IDIwLjM3NSAxNS42MjUgMjAuMzc1IDE3LjIxIDIxLjUzMjIgMTYuMDUyNyAyMi45NDczIDE3LjQ2NjggMjEuNzg5MSAxOC42MjUgMjMuMzc1IDE4LjYyNSAyMy4zNzUgMjAuMzc1IDIxLjc5IDIwLjM3NSAyMi45NDczIDIxLjUzMjcgMjEuNTMyMiAyMi45NDY4IDIwLjM3NSAyMS43ODk2IDIwLjM3NSAyMy4zNzUgMTguNjI1IDIzLjM3NSIvPjxwYXRoIGQ9Im0yMCwxNnYyLjExNTRsMS41MzIyLTEuNTMyMy44ODQ4Ljg4MzgtMS41MzMxLDEuNTMzMmgyLjExNjF2MWgtMi4xMTU2bDEuNTMyNiwxLjUzMjctLjg4NDguODgzOC0xLjUzMjItMS41MzIzdjIuMTE1OGgtMXYtMi4xMTU4bC0xLjUzMjIsMS41MzIzLS44ODQ4LS44ODM4LDEuNTMyNi0xLjUzMjdoLTIuMTE1NnYtMWgyLjExNjFsLTEuNTMzMS0xLjUzMzIuODg0OC0uODgzOCwxLjUzMjIsMS41MzIzdi0yLjExNTRoMW0uNzUtLjc1aC0yLjV2MS4wNTQ2bC0uMjUxOC0uMjUxOS0uNTMtLjUzMDEtLjUzMDQuNTI5OC0uODg0OC44ODM4LS41MzA5LjUzMDMuNTMwNS41MzA2LjI1MjkuMjUyOWgtMS4wNTU1djIuNWgxLjA1NTFsLS4yNTI0LjI1MjQtLjUzMDUuNTMwNi41MzA5LjUzMDMuODg0OC44ODM4LjUzMDQuNTI5OC41My0uNTMwMS4yNTE4LS4yNTE5djEuMDU1MWgyLjV2LTEuMDU1MWwuMjUxOC4yNTE5LjUzLjUzMDEuNTMwNC0uNTI5OC44ODQ4LS44ODM4LjUzMDktLjUzMDMtLjUzMDUtLjUzMDYtLjI1MjQtLjI1MjRoMS4wNTUxdi0yLjVoLTEuMDU1NWwuMjUyOS0uMjUyOS41MzA1LS41MzA2LS41MzA5LS41MzAzLS44ODQ4LS44ODM4LS41MzA0LS41Mjk4LS41My41MzAxLS4yNTE4LjI1MTl2LTEuMDU0NmgwWiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="pen-sub"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB4PSIxNS42MjUiIHk9IjE4LjYyNSIgd2lkdGg9IjcuNzUiIGhlaWdodD0iMS43NSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMywxOXYxaC03di0xaDdtLjc1LS43NWgtOC41djIuNWg4LjV2LTIuNWgwWiIvPjxwb2x5Z29uIHBvaW50cz0iNS43MTM5IDE2LjI2NTEgLjYyNSAxMy4yMTI0IC42MjUgLjg2NTcgMTEuMzc1IDYuNzc4MyAxMS4zNzUgMTIuODg2MiAxMy41MzkxIDE2LjEzMjggNy4zMzg5IDE5LjUxNTEgNS43MTM5IDE2LjI2NTEiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtMSwxLjVsMTAsNS41djZsMiwzLTUuNSwzLTEuNS0zLTUtM1YxLjVNLjI1LjIzMTZ2MTMuMTkzMWwuMzY0MS4yMTg1LDQuODEyNywyLjg4NzYsMS40MDIzLDIuODA0Ny4zNDc1LjY5NTIuNjgyNC0uMzcyMiw1LjUtMywuNzE5Ni0uMzkyNS0uNDU0Ny0uNjgyLTEuODc0LTIuODExMXYtNi4yMTY0bC0uMzg4NS0uMjEzN0wxLjM2MTUuODQyOC4yNS4yMzE2SC4yNVoiLz48bGluZSB4MT0iMSIgeTE9IjEuNSIgeDI9IjYiIHkyPSIxMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIuNzUiLz48cmVjdCB4PSI1IiB5PSI5IiB3aWR0aD0iMiIgaGVpZ2h0PSIyIiByeD0iMSIgcnk9IjEiLz48L3N2Zz4=") 0 0, auto}\n:host([cursor="picker"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtLjUzMzIsMjIuMDY0bC44MjYyLTEuNDYzOSwxLjU1ODYtMy40NTMxLDYuODE4NC02LjkzOTktLjYxMTMtLjU4MTUsMS4yMDYxLTEuMjY3Ni43NDUxLjcwNzUsNC45MTIxLTQuOTEyNmMuNDkzMi0uNDkzNywxLjE0OTQtLjc2NTEsMS44NDc3LS43NjUxLjY5NzMsMCwxLjM1MzUuMjcxNSwxLjg0NzcuNzY1MS40OTMyLjQ5MzIuNzY0NiwxLjE0OTQuNzY0NiwxLjg0NzJzLS4yNzE1LDEuMzU0LS43NjU2LDEuODQ3MmwtNC44MTc0LDQuODE3OSwxLjAwOTguOTU5NS0xLjIwNjEsMS4yNjgxLS43NzE1LS43MzM0LTcuMTU2Miw2Ljk5OS0zLjM3MywxLjQ5OS0xLjQzMTYuODA5MS0xLjQwMzMtMS40MDIzWiIvPjxwYXRoIGQ9Im0xNy44MzU4LDMuNzYyNmMuNTcyNiwwLDEuMTQ1My4yMTg0LDEuNTgyMi42NTUzaDBjLjg3MzguODczOC44NzM4LDIuMjkwNSwwLDMuMTY0M2wtNS4wODk4LDUuMDg5OCwxLjAxNjYuOTY1OC0uNjg5NS43MjQ2LS43NjItLjcyMzktNy4zNjYsNy4yMDQ0LTMuMzExNSwxLjQ3MTctMS4yMTU4LjY4NTYtMS0xLC42ODU1LTEuMjE1OCwxLjU0NjktMy40MjE5LDcuMDM5MS03LjE2NDUtLjYxNjItLjU4NTUuNjg5NS0uNzI0Ni43MzguNzAxMSw1LjE3MDktNS4xNzFjLjQzNjktLjQzNjksMS4wMDk1LS42NTUzLDEuNTgyMi0uNjU1M20wLS43NWMtLjc5OCwwLTEuNTQ4Mi4zMTA3LTIuMTEyNC44NzQ5bC00LjY1NDEsNC42NTQxLS4yMDgtLjE5NzYtLjU0MzMtLjUxNjEtLjUxNjYuNTQyOS0uNjg5NS43MjQ2LS41MTczLjU0MzcuNTQ0MS41MTcuMDYzNC4wNjAyLTYuNTA0Niw2LjYyMDUtLjA5MzQuMDk1MS0uMDU0OS4xMjE1LTEuNTMzMiwzLjM5MTUtLjY2OTIsMS4xODY4LS4yNzk3LjQ5Ni40MDI3LjQwMjcsMSwxLC40MDI2LjQwMjcuNDk2MS0uMjc5NywxLjE4NDYtLjY2OCwzLjI3ODktMS40NTcyLjEyMzQtLjA1NDguMDk2NC0uMDk0NCw2Ljg0OTEtNi42OTg5LjIzNzguMjI2LjU0MzMuNTE2Mi41MTY2LS41NDMuNjg5NS0uNzI0Ni41MTczLS41NDM4LS41NDQxLS41MTctLjQ1ODctLjQzNTgsNC41NDU3LTQuNTQ1N2MuNTY0My0uNTY0My44NzUxLTEuMzE0NS44NzUxLTIuMTEyNHMtLjMxMDgtMS41NDgyLS44NzUxLTIuMTEyNGMtLjU2NDItLjU2NDItMS4zMTQzLS44NzUtMi4xMTI0LS44NzVoMFoiIGZpbGw9IiNmZmYiLz48cG9seWdvbiBwb2ludHM9IjIuMDMwMyAyMS41IDIuNSAyMS45Njk3IDIuODQ3NyAyMS42NTcyIDYuMTYwMiAyMC4xODUxIDEyLjk2NzggMTMuNDk3NiAxMC41MDIgMTEuMDMyNyAzLjgxNTQgMTcuODM5NCAyLjI2NTYgMjEuMjY1MSAyLjAzMDMgMjEuNSIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==") 0 24, auto}\n:host([cursor="picker-alt"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMjAuNTk5NiwyMi42NDExbC0zLjM0MDgtMS40ODI5LTcuMTU2Mi02Ljk5OS0uNzcxNS43MzM0LTEuMjA2MS0xLjI2ODEsMS4wMDk4LS45NTk1LTQuODE4NC00LjgxNzljLS40OTMyLS40OTMyLS43NjQ2LTEuMTQ5NC0uNzY0Ni0xLjg0NzJzLjI3MTUtMS4zNTQuNzY1Ni0xLjg0NzJjLjQ5MzItLjQ5MzcsMS4xNDk0LS43NjUxLDEuODQ2Ny0uNzY1MS42OTgyLDAsMS4zNTQ1LjI3MTUsMS44NDc3Ljc2NTFsNC45MTIxLDQuOTEyNi43NDUxLS43MDc1LDEuMjA2MSwxLjI2NzYtLjYxMTMuNTgxNSw2LjgxODQsNi45Mzk5LDEuNTc0MiwzLjQ4MjkuODEwNSwxLjQzNDEtMS40MDMzLDEuNDAyMy0xLjQ2MzktLjgyNTJaIi8+PHBhdGggZD0ibTYuMTY0MiwzLjc2MjZjLjU3MjYsMCwxLjE0NTMuMjE4NCwxLjU4MjIuNjU1M2w1LjE3MDksNS4xNzEuNzM4LS43MDExLjY4OTUuNzI0Ni0uNjE2Mi41ODU1LDcuMDM5MSw3LjE2NDUsMS41NDY5LDMuNDIxOS42ODU1LDEuMjE1OC0xLDEtMS4yMTU4LS42ODU2LTMuMzExNS0xLjQ3MTctNy4zNjYtNy4yMDQ0LS43NjIuNzIzOS0uNjg5NS0uNzI0NiwxLjAxNjYtLjk2NTgtNS4wODk4LTUuMDg5OGMtLjg3MzgtLjg3MzgtLjg3MzgtMi4yOTA1LDAtMy4xNjQyaDBjLjQzNjktLjQzNjksMS4wMDk1LS42NTUzLDEuNTgyMi0uNjU1M20wLS43NWMtLjc5OCwwLTEuNTQ4Mi4zMTA3LTIuMTEyNC44NzQ5LS41NjQzLjU2NDMtLjg3NSwxLjMxNDUtLjg3NSwyLjExMjVzLjMxMDcsMS41NDgyLjg3NSwyLjExMjVsNC41NDU3LDQuNTQ1Ny0uNDU4Ny40MzU4LS41NDQxLjUxNy41MTczLjU0MzcuNjg5NS43MjQ2LjUxNjYuNTQzLjU0MzMtLjUxNjIuMjM3OC0uMjI1OSw2Ljg0OTEsNi42OTg5LjA5NjQuMDk0NC4xMjM0LjA1NDgsMy4yNzg5LDEuNDU3MiwxLjE4NDYuNjY4LjQ5NjEuMjc5Ny40MDI2LS40MDI3LDEtMSwuNDAyNy0uNDAyNy0uMjc5Ny0uNDk2LS42NjkyLTEuMTg2OC0xLjUzMzItMy4zOTE1LS4wNTQ5LS4xMjE1LS4wOTM0LS4wOTUxLTYuNTA0Ni02LjYyMDUuMDYzNC0uMDYwMi41NDQxLS41MTctLjUxNzMtLjU0MzctLjY4OTUtLjcyNDYtLjUxNjYtLjU0MjktLjU0MzMuNTE2MS0uMjA4LjE5NzYtNC42NTQxLTQuNjU0MWMtLjU2NDItLjU2NDItMS4zMTQ1LS44NzUtMi4xMTI0LS44NzVoMFoiIGZpbGw9IiNmZmYiLz48cG9seWdvbiBwb2ludHM9IjIxLjk2OTcgMjEuNSAyMS41IDIxLjk2OTcgMjEuMTUyMyAyMS42NTcyIDE3LjgzOTggMjAuMTg1MSAxMS4wMzIyIDEzLjQ5NzYgMTMuNDk4IDExLjAzMjcgMjAuMTg0NiAxNy44Mzk0IDIxLjczNDQgMjEuMjY1MSAyMS45Njk3IDIxLjUiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtMjIuNSwyMi41aDBjLjI5MDctLjI5MDcuMzM1OC0uNzQ2Mi4xMDc4LTEuMDg4M2wtMi42MDc4LTQuNDExN2gtNmw3LjQxMTcsNS42MDc4Yy4zNDIxLjIyODEuNzk3Ni4xODMsMS4wODgzLS4xMDc4WiIvPjwvc3ZnPg==") 24 24, auto}\n:host([cursor="resize-v"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9IjguMTc0OCAxNy42MjUgMTAuNjI1IDE3LjYyNSAxMC42MjUgOC4zNzUgOC4xNzQ4IDguMzc1IDExLjUgNC41NjU5IDE0LjgyNTIgOC4zNzUgMTIuMzc1IDguMzc1IDEyLjM3NSAxNy42MjUgMTQuODI1MiAxNy42MjUgMTEuNSAyMS40MzQxIDguMTc0OCAxNy42MjUiLz48cGF0aCBkPSJtMTEuNSw1LjEzNjFsMi41LDIuODYzOWgtMnYxMGgybC0yLjUsMi44NjM5LTIuNS0yLjg2MzloMnYtMTBoLTJsMi41LTIuODYzOW0wLTEuMTQwNWwtLjU2NTEuNjQ3My0yLjUsMi44NjM5LTEuMDg1MiwxLjI0MzJoMi45MDAzdjguNWgtMi45MDAzbDEuMDg1MiwxLjI0MzIsMi41LDIuODYzOS41NjUxLjY0NzMuNTY1MS0uNjQ3MywyLjUtMi44NjM5LDEuMDg1Mi0xLjI0MzJoLTIuOTAwM3YtOC41aDIuOTAwM2wtMS4wODUyLTEuMjQzMi0yLjUtMi44NjM5LS41NjUxLS42NDczaDBaIiBmaWxsPSIjZmZmIi8+PC9zdmc+") 12 12, auto}\n:host([cursor="resize-h"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9IjE2LjYyNSAxMy4zNzUgNy4zNzUgMTMuMzc1IDcuMzc1IDE1LjgyNTIgMy41NjU0IDEyLjUgNy4zNzUgOS4xNzQ4IDcuMzc1IDExLjYyNSAxNi42MjUgMTEuNjI1IDE2LjYyNSA5LjE3NDggMjAuNDM0NiAxMi41IDE2LjYyNSAxNS44MjUyIDE2LjYyNSAxMy4zNzUiLz48cGF0aCBkPSJtMTcsMTBsMi44NjM5LDIuNS0yLjg2MzksMi41di0ySDd2MmwtMi44NjM5LTIuNSwyLjg2MzktMi41djJoMTB2LTJtLS43NS0xLjY1MDN2Mi45MDAzSDcuNzV2LTIuOTAwMmwtMS4yNDMyLDEuMDg1Mi0yLjg2MzksMi40OTk5LS42NDczLjU2NS42NDczLjU2NSwyLjg2MzksMi41LDEuMjQzMiwxLjA4NTN2LTIuOTAwM2g4LjV2Mi45MDAzbDEuMjQzMi0xLjA4NTMsMi44NjM5LTIuNS42NDczLS41NjUtLjY0NzMtLjU2NS0yLjg2MzktMi41LTEuMjQzMi0xLjA4NTNoMFoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=") 12 12, auto}\n:host([cursor="rotate"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMTcuMjUsMTMuMzc1di01LjYyNWgtNC44NzV2Mi4wNTA4bC0zLjk2MDktMy4zMDA4LDMuOTYwOS0zLjMwMDh2Mi4wNTA4aDUuMTI1YzEuMjQwMiwwLDIuMjUsMS4wMDkzLDIuMjUsMi4yNXY1Ljg3NWgtMi41WiIvPjxwYXRoIGQ9Im0xMiwzLjk5OTl2MS42MjUxaDUuNWMxLjAzNDIsMCwxLjg3NS44NDEzLDEuODc1LDEuODc1djUuNWgtMS43NXYtNS41YzAtLjA2ODgtLjA1NTctLjEyNS0uMTI1LS4xMjVoLTUuNXYxLjYyNDhsLTMtMi40OTk5LDMtMi40OTk5bS43NS0xLjYwMTNsLTEuMjMwMSwxLjAyNTEtMywyLjQ5OTktLjY5MTQuNTc2Mi42OTE0LjU3NjIsMywyLjQ5OTksMS4yMzAxLDEuMDI1di0yLjQ3Nmg0LjEyNXY1LjYyNWgzLjI1di02LjI1YzAtMS40NDc0LTEuMTc3Ni0yLjYyNS0yLjYyNS0yLjYyNWgtNC43NXYtMi40NzYzaDBaIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTExLjYyNSwxOC43NWgtNS4xMjVjLTEuMjQwMiwwLTIuMjUtMS4wMDkzLTIuMjUtMi4yNXYtNS44NzVoMi41djUuNjI1aDQuODc1di0yLjA1MDhsMy45NjA5LDMuMzAwOC0zLjk2MDksMy4zMDA4di0yLjA1MDhaIi8+PHBhdGggZD0ibTYuMzc1LDExdjUuNWMwLC4wNjg4LjA1NTcuMTI1LjEyNS4xMjVoNS41di0xLjYyNWwzLDIuNDk5OS0zLDIuNDk5OXYtMS42MjQ4aC01LjVjLTEuMDM0MiwwLTEuODc1LS44NDEzLTEuODc1LTEuODc1di01LjVoMS43NW0uNzUtLjc1aC0zLjI1djYuMjVjMCwxLjQ0NzQsMS4xNzc2LDIuNjI1LDIuNjI1LDIuNjI1aDQuNzV2Mi40NzYxbDEuMjMwMS0xLjAyNTEsMy0yLjQ5OTkuNjkxNC0uNTc2Mi0uNjkxNC0uNTc2Mi0zLTIuNDk5OS0xLjIzMDEtMS4wMjUxdjIuNDc2MmgtNC4xMjV2LTUuNjI1aDBaIiBmaWxsPSIjZmZmIi8+PC9zdmc+") 12 12, auto}\n:host([cursor="selection"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3Ii8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="selection-anchor"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3Ii8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIgZmlsbD0iI2ZmZiIvPjxjaXJjbGUgY3g9IjIwLjUiIGN5PSIyMC41IiByPSIyLjg3NSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMC41LDE4YzEuMzgwNywwLDIuNSwxLjExOTMsMi41LDIuNXMtMS4xMTkzLDIuNS0yLjUsMi41LTIuNS0xLjExOTMtMi41LTIuNSwxLjExOTMtMi41LDIuNS0yLjVtMC0uNzVjLTEuNzkyMSwwLTMuMjUsMS40NTc5LTMuMjUsMy4yNXMxLjQ1NzksMy4yNSwzLjI1LDMuMjUsMy4yNS0xLjQ1NzksMy4yNS0zLjI1LTEuNDU3OS0zLjI1LTMuMjUtMy4yNWgwWiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="selection-move"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3Ii8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIgZmlsbD0iI2ZmZiIvPjxyZWN0IHg9IjE3LjYyNSIgeT0iMTcuNjI1IiB3aWR0aD0iNS43NSIgaGVpZ2h0PSI1Ljc1Ii8+PHBhdGggZD0ibTIzLDE4djVoLTV2LTVoNW0uNzUtLjc1aC02LjV2Ni41aDYuNXYtNi41aDBaIiBmaWxsPSIjZmZmIi8+PC9zdmc+") 0 0, auto}\n:host([cursor="selection-resize"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3Ii8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIgZmlsbD0iI2ZmZiIvPjxwb2x5Z29uIHBvaW50cz0iMTMuNjI1IDIzLjM3NSAxMy42MjUgMTkuMDk0NyAxNSAyMC40Njk3IDIwLjQ2OTcgMTUgMTkuMDk0NyAxMy42MjUgMjMuMzc1IDEzLjYyNSAyMy4zNzUgMTcuOTA1MyAyMiAxNi41MzAzIDE2LjUzMDMgMjIgMTcuOTA1MyAyMy4zNzUgMTMuNjI1IDIzLjM3NSIvPjxwYXRoIGQ9Im0yMywxNHYyLjk5OTlsLTEtLjk5OTktNiw2LDEsLjk5OTloLTN2LTIuOTk5OWwxLDEsNi02LTEtMWgzbS43NS0uNzVoLTUuNTYwN2wxLjI4MDQsMS4yODAzLjQ2OTYuNDY5Ny00LjkzOTMsNC45MzkzLS40Njk3LS40Njk3LTEuMjgwMy0xLjI4MDN2NS41NjA2aDUuNTYwOGwtMS4yODA1LTEuMjgwMy0uNDY5Ni0uNDY5Niw0LjkzOTMtNC45MzkzLjQ2OTcuNDY5NiwxLjI4MDMsMS4yODAydi01LjU2MDVoMFoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=") 0 0, auto}\n:host([cursor="target"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB4PSIzLjYyNSIgeT0iMTEuNjI1IiB3aWR0aD0iNC43NSIgaGVpZ2h0PSIxLjc1Ii8+PHBhdGggZD0ibTgsMTJ2MWgtNHYtMWg0bS43NS0uNzVIMy4yNXYyLjVoNS41di0yLjVoMFoiIGZpbGw9IiNmZmYiLz48cmVjdCB4PSIxMC42MjUiIHk9IjQuNjI1IiB3aWR0aD0iMS43NSIgaGVpZ2h0PSI0Ljc1Ii8+PHBhdGggZD0ibTEyLDV2NGgtMXYtNGgxbS43NS0uNzVoLTIuNXY1LjVoMi41di01LjVoMFoiIGZpbGw9IiNmZmYiLz48cmVjdCB4PSIxMC42MjUiIHk9IjExLjYyNSIgd2lkdGg9IjEuNzUiIGhlaWdodD0iMS43NSIvPjxwYXRoIGQ9Im0xMiwxMnYxaC0xdi0xaDFtLjc1LS43NWgtMi41djIuNWgyLjV2LTIuNWgwWiIgZmlsbD0iI2ZmZiIvPjxyZWN0IHg9IjEwLjYyNSIgeT0iMTUuNjI1IiB3aWR0aD0iMS43NSIgaGVpZ2h0PSI0Ljc1Ii8+PHBhdGggZD0ibTEyLDE2djRoLTF2LTRoMW0uNzUtLjc1aC0yLjV2NS41aDIuNXYtNS41aDBaIiBmaWxsPSIjZmZmIi8+PHJlY3QgeD0iMTQuNjI1IiB5PSIxMS42MjUiIHdpZHRoPSI0Ljc1IiBoZWlnaHQ9IjEuNzUiLz48cGF0aCBkPSJtMTksMTJ2MWgtNHYtMWg0bS43NS0uNzVoLTUuNXYyLjVoNS41di0yLjVoMFoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=") 12 12, auto}\n:host([cursor="text-add"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9IjMuNjI1IDguMzc1IDMuNjI1IDUuMzc1IC42MjUgNS4zNzUgLjYyNSAzLjYyNSAzLjYyNSAzLjYyNSAzLjYyNSAuNjI1IDUuMzc1IC42MjUgNS4zNzUgMy42MjUgOC4zNzUgMy42MjUgOC4zNzUgNS4zNzUgNS4zNzUgNS4zNzUgNS4zNzUgOC4zNzUgMy42MjUgOC4zNzUiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtNSwxdjNoM3YxaC0zdjNoLTF2LTNIMXYtMWgzVjFoMW0uNzUtLjc1aC0yLjV2M0guMjV2Mi41aDN2M2gyLjV2LTNoM3YtMi41aC0zVi4yNWgwWiIvPjxwYXRoIGQ9Im0xMy42MjUsMjMuMzc1di0xLjI1aC4zNzVjMS4yOTEsMCwxLjYyNS0uMzM0LDEuNjI1LTEuNjI1di05LjEyNWgtMS4xMjVjLS40MDkyLDAtLjc2NTYtLjAxMzItMS4wNzUyLS4wMjQ0LS4yMjk1LS4wMDg4LS40MzI2LS4wMTY2LS42MTMzLS4wMTY2LS43NTY4LDAtLjkzNjUsMC0uOTM2NSwxLjY2NnYuMzc1aC0xLjI1di0zLjc1aDEyLjc1djMuNzVoLTEuMjV2LS4zNzVjMC0xLjY2Ni0uMTc5Ny0xLjY2Ni0uOTM2NS0xLjY2Ni0uMTc5NywwLS4zODM4LjAwNzgtLjYxMzMuMDE2Ni0uMzA5Ni4wMTEyLS42NjYuMDI0NC0xLjA3NTIuMDI0NGgtMS4xMjV2OS4xMjVjMCwxLjI5MS4zMzQsMS42MjUsMS42MjUsMS42MjVoLjM3NXYxLjI1aC02Ljc1WiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMywxMHYzaC0uNWMwLTEuNzg1Ny0uMjU1MS0yLjA0MDgtMS4zMTItMi4wNDA4LS40MjI3LDAtLjk3MzguMDQwOC0xLjY4OC4wNDA4aC0xLjV2OS41YzAsMS41LjUsMiwyLDJ2LjVoLTZ2LS41YzEuNSwwLDItLjUsMi0ydi05LjVoLTEuNWMtLjcxNDQsMC0xLjI2NTMtLjA0MDgtMS42ODgtLjA0MDgtMS4wNTY4LDAtMS4zMTIuMjU1Mi0xLjMxMiwyLjA0MDhoLS41di0zaDEybS43NS0uNzVoLTEzLjV2NC41aDJ2LS43NWMwLS45ODA4LjA5MDUtMS4yMTMxLjEyOTMtMS4yNjc0LS4wMDA0LjAwMTMuMDAwNy4wMDE5LjAwMzkuMDAxOS4wMjA4LDAsLjEyOTQtLjAyNTMuNDI4Ny0uMDI1My4xNzU4LDAsLjM3NDUuMDA3Ni41OTkyLjAxNTkuMzEzNy4wMTE2LjY3NDQuMDI0OSwxLjA4ODkuMDI0OWguNzV2OC43NWMwLDEuMDg2NC0uMTYzNiwxLjI1LTEuMjUsMS4yNWgtLjc1djJoNy41di0yaC0uNzVjLTEuMDg2NCwwLTEuMjUtLjE2MzYtMS4yNS0xLjI1di04Ljc1aC43NWMuNDE0MywwLC43NzUtLjAxMzMsMS4wODg3LS4wMjQ5LjIyNDktLjAwODMuNDIzNi0uMDE1OS41OTk0LS4wMTU5LjM0NDIsMCwuNDM2My4wMzM1LjQ1NjMuMDQzNy4wMTUzLjAzNC4xMDU2LjI2NjIuMTA1NiwxLjI0NzF2Ljc1aDJ2LTQuNWgwWiIvPjwvc3ZnPg==") 4.5 4.5, auto}\n:host([cursor="gradient"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5kIHsKICAgICAgICBmaWxsOiAjZmZmOwogICAgICB9CgogICAgICAuZSB7CiAgICAgICAgZmlsbDogdXJsKCNiKTsKICAgICAgfQoKICAgICAgLmYgewogICAgICAgIGZpbGw6IHVybCgjYyk7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgxPSI2Ljg3MTkiIHkxPSIxNi4wNzk1IiB4Mj0iLjczMTgiIHkyPSI1LjE5NDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAwMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjYuMTY3MSIgeTE9IjE0LjY0MzkiIHgyPSIxLjk3OTYiIHkyPSI3LjAxODkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMDAwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzIzMWYyMCIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8Zz4KICAgIDxwb2x5Z29uIGNsYXNzPSJlIiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3Ii8+CiAgICA8cGF0aCBjbGFzcz0iZCIgZD0iTTEsMkwxMiwxM0g1LjVMMSwxNy41VjJNLjI1LC4xODkzVjE5LjMxMDdsMS4yODAzLTEuMjgwMyw0LjI4MDQtNC4yODAzSDEzLjgxMDdsLTEuMjgwNC0xLjI4MDNMMS41MzAzLDEuNDY5NywuMjUsLjE4OTNILjI1WiIvPgogIDwvZz4KICA8cGF0aCBjbGFzcz0iZiIgZD0iTTEuNzUsMy44MTA3TDEwLjE4OTMsMTIuMjVINS4xODkzbC0uMjE5NiwuMjE5Ny0zLjIxOTcsMy4yMTk3VjMuODEwN20tLjc1LTEuODEwN3YxNS41bDQuNS00LjVoNi41TDEsMmgwWiIvPgo8L3N2Zz4=") 0 0, auto}\n:host([cursor="gradient-move"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5kIHsKICAgICAgICBmaWxsOiAjZmZmOwogICAgICB9CgogICAgICAuZSB7CiAgICAgICAgZmlsbDogdXJsKCNiKTsKICAgICAgfQoKICAgICAgLmYgewogICAgICAgIGZpbGw6IHVybCgjYyk7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgxPSI2Ljg3MTkiIHkxPSIxNi4wNzk1IiB4Mj0iLjczMTgiIHkyPSI1LjE5NDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAwMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjYuMTY3MSIgeTE9IjE0LjY0MzkiIHgyPSIxLjk3OTYiIHkyPSI3LjAxODkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMDAwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzIzMWYyMCIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8Zz4KICAgIDxyZWN0IHg9IjE3LjYyNSIgeT0iMTcuNjI1IiB3aWR0aD0iNS43NSIgaGVpZ2h0PSI1Ljc1Ii8+CiAgICA8cGF0aCBjbGFzcz0iZCIgZD0iTTIzLDE4djVoLTV2LTVoNW0uNzUtLjc1aC02LjV2Ni41aDYuNXYtNi41aDBaIi8+CiAgPC9nPgogIDxnPgogICAgPGc+CiAgICAgIDxwb2x5Z29uIGNsYXNzPSJlIiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3Ii8+CiAgICAgIDxwYXRoIGNsYXNzPSJkIiBkPSJNMSwyTDEyLDEzSDUuNUwxLDE3LjVWMk0uMjUsLjE4OTNWMTkuMzEwN2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNIMTMuODEwN2wtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LC4yNSwuMTg5M0guMjVaIi8+CiAgICA8L2c+CiAgICA8cGF0aCBjbGFzcz0iZiIgZD0iTTEuNzUsMy44MTA3TDEwLjE4OTMsMTIuMjVINS4xODkzbC0uMjE5NiwuMjE5Ny0zLjIxOTcsMy4yMTk3VjMuODEwN20tLjc1LTEuODEwN3YxNS41bDQuNS00LjVoNi41TDEsMmgwWiIvPgogIDwvZz4KPC9zdmc+") 0 0, auto}\n:host([cursor="gradient-resize"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5kIHsKICAgICAgICBmaWxsOiAjZmZmOwogICAgICB9CgogICAgICAuZSB7CiAgICAgICAgZmlsbDogdXJsKCNiKTsKICAgICAgfQoKICAgICAgLmYgewogICAgICAgIGZpbGw6IHVybCgjYyk7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgxPSI2Ljg3MTkiIHkxPSIxNi4wNzk1IiB4Mj0iLjczMTgiIHkyPSI1LjE5NDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAwMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjYuMTY3MSIgeTE9IjE0LjY0MzkiIHgyPSIxLjk3OTYiIHkyPSI3LjAxODkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMDAwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzIzMWYyMCIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8Zz4KICAgIDxwb2x5Z29uIHBvaW50cz0iMTMuNjI1IDIzLjM3NSAxMy42MjUgMTkuMDk0NyAxNSAyMC40Njk3IDIwLjQ2OTcgMTUgMTkuMDk0NyAxMy42MjUgMjMuMzc1IDEzLjYyNSAyMy4zNzUgMTcuOTA1MyAyMiAxNi41MzAzIDE2LjUzMDMgMjIgMTcuOTA1MyAyMy4zNzUgMTMuNjI1IDIzLjM3NSIvPgogICAgPHBhdGggY2xhc3M9ImQiIGQ9Ik0yMywxNHYyLjk5OTlsLTEtLjk5OTktNiw2LDEsLjk5OTloLTN2LTIuOTk5OWwxLDEsNi02LTEtMWgzbS43NS0uNzVoLTUuNTYwN2wxLjI4MDQsMS4yODAzLC40Njk2LC40Njk3LTQuOTM5Myw0LjkzOTMtLjQ2OTctLjQ2OTctMS4yODAzLTEuMjgwM3Y1LjU2MDZoNS41NjA4bC0xLjI4MDUtMS4yODAzLS40Njk2LS40Njk2LDQuOTM5My00LjkzOTMsLjQ2OTcsLjQ2OTYsMS4yODAzLDEuMjgwMnYtNS41NjA1aDBaIi8+CiAgPC9nPgogIDxnPgogICAgPGc+CiAgICAgIDxwb2x5Z29uIGNsYXNzPSJlIiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3Ii8+CiAgICAgIDxwYXRoIGNsYXNzPSJkIiBkPSJNMSwyTDEyLDEzSDUuNUwxLDE3LjVWMk0uMjUsLjE4OTNWMTkuMzEwN2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNIMTMuODEwN2wtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LC4yNSwuMTg5M0guMjVaIi8+CiAgICA8L2c+CiAgICA8cGF0aCBjbGFzcz0iZiIgZD0iTTEuNzUsMy44MTA3TDEwLjE4OTMsMTIuMjVINS4xODkzbC0uMjE5NiwuMjE5Ny0zLjIxOTcsMy4yMTk3VjMuODEwN20tLjc1LTEuODEwN3YxNS41bDQuNS00LjVoNi41TDEsMmgwWiIvPgogIDwvZz4KPC9zdmc+") 0 0, auto}\n:host([cursor="shapebuilder-add"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmIgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnPgogICAgPHBvbHlnb24gcG9pbnRzPSIuNjI1IDEuMDk0NyAxMi45MDUzIDEzLjM3NSA1LjY1NTMgMTMuMzc1IC42MjUgMTguNDA1MyAuNjI1IDEuMDk0NyIvPgogICAgPHBhdGggY2xhc3M9ImIiIGQ9Ik0xLDJMMTIsMTNINS41TDEsMTcuNVYyTS4yNSwuMTg5M1YxOS4zMTA3bDEuMjgwMy0xLjI4MDMsNC4yODA0LTQuMjgwM0gxMy44MTA3bC0xLjI4MDQtMS4yODAzTDEuNTMwMywxLjQ2OTcsLjI1LC4xODkzSC4yNVoiLz4KICA8L2c+CiAgPGc+CiAgICA8cG9seWdvbiBwb2ludHM9IjE4LjYyNSAyMy4zNzUgMTguNjI1IDIwLjM3NSAxNS42MjUgMjAuMzc1IDE1LjYyNSAxOC42MjUgMTguNjI1IDE4LjYyNSAxOC42MjUgMTUuNjI1IDIwLjM3NSAxNS42MjUgMjAuMzc1IDE4LjYyNSAyMy4zNzUgMTguNjI1IDIzLjM3NSAyMC4zNzUgMjAuMzc1IDIwLjM3NSAyMC4zNzUgMjMuMzc1IDE4LjYyNSAyMy4zNzUiLz4KICAgIDxwYXRoIGNsYXNzPSJiIiBkPSJNMjAsMTZ2M2gzdjFoLTN2M2gtMXYtM2gtM3YtMWgzdi0zaDFtLjc1LS43NWgtMi41djNoLTN2Mi41aDN2M2gyLjV2LTNoM3YtMi41aC0zdi0zaDBaIi8+CiAgPC9nPgo8L3N2Zz4=") 0 0, auto}\n:host([cursor="shapebuilder-sub"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmIgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnPgogICAgPHBvbHlnb24gcG9pbnRzPSIuNjI1IDEuMDk0NyAxMi45MDUzIDEzLjM3NSA1LjY1NTMgMTMuMzc1IC42MjUgMTguNDA1MyAuNjI1IDEuMDk0NyIvPgogICAgPHBhdGggY2xhc3M9ImIiIGQ9Ik0xLDJMMTIsMTNINS41TDEsMTcuNVYyTS4yNSwuMTg5M1YxOS4zMTA3bDEuMjgwMy0xLjI4MDMsNC4yODA0LTQuMjgwM0gxMy44MTA3bC0xLjI4MDQtMS4yODAzTDEuNTMwMywxLjQ2OTcsLjI1LC4xODkzSC4yNVoiLz4KICA8L2c+CiAgPGc+CiAgICA8cmVjdCB4PSIxNS42MjUiIHk9IjE4LjYyNSIgd2lkdGg9IjcuNzUiIGhlaWdodD0iMS43NSIvPgogICAgPHBhdGggY2xhc3M9ImIiIGQ9Ik0yMywxOXYxaC03di0xaDdtLjc1LS43NUgxNS4yNXYyLjVoOC41di0yLjVoMFoiLz4KICA8L2c+Cjwvc3ZnPg==") 0 0, auto}\n:host([cursor="zoom"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmIgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnPgogICAgPHBhdGggZD0iTTEwLjYwODQsMTMuMTk5MmMtLjk1NjEsLjUyNDktMi4wMjQ0LC44MDA4LTMuMTA4NCwuODAwOC0zLjU4NCwwLTYuNS0yLjkxNi02LjUtNi41UzMuOTE2LDEsNy41LDFzNi41LDIuOTE2LDYuNSw2LjVjMCwxLjU5MDMtLjU3MzIsMy4wOTkxLTEuNjIxMSw0LjI4ODFsMy42ODE2LDMuNjgxNi0xLjU5MDgsMS41OTA4LTMuODYxMy0zLjg2MTNaIi8+CiAgICA8cGF0aCBjbGFzcz0iYiIgZD0iTTcuNSwxLjM3NWMzLjM3NywwLDYuMTI1LDIuNzQ3Niw2LjEyNSw2LjEyNSwwLDEuNjczMy0uNjc1OSwzLjE5MDctMS43NjcyLDQuMjk3MmwzLjY3MjUsMy42NzI1LTEuMDYwNSwxLjA2MDYtMy43OTk2LTMuNzk5NmMtLjkyNjMsLjU2MzUtMi4wMDksLjg5NDMtMy4xNzAyLC44OTQzLTMuMzc3LDAtNi4xMjUtMi43NDc2LTYuMTI1LTYuMTI1UzQuMTIzLDEuMzc1LDcuNSwxLjM3NW0wLS43NUMzLjcwOTEsLjYyNSwuNjI1LDMuNzA5MSwuNjI1LDcuNXMzLjA4NDEsNi44NzUsNi44NzUsNi44NzVjMS4wNTI1LDAsMi4wOTE2LS4yNDYxLDMuMDM4LS43MTU4bDMuNDAxNSwzLjQwMTQsLjUzMDMsLjUzMDMsLjUzMDMtLjUzMDMsMS4wNjA1LTEuMDYwNSwuNTMwNC0uNTMwMy0uNTMwNC0uNTMwMy0zLjE3MzctMy4xNzM4Yy45NjQ0LTEuMjEyLDEuNDg4Mi0yLjcwMTMsMS40ODgyLTQuMjY1NkMxNC4zNzUsMy43MDkxLDExLjI5MDksLjYyNSw3LjUsLjYyNWgwWiIvPgogIDwvZz4KICA8Y2lyY2xlIGNsYXNzPSJiIiBjeD0iNy41IiBjeT0iNy41IiByPSI0Ljg3NSIvPgo8L3N2Zz4=") 7.5 7.5, auto}\n:host([cursor="zoom-in"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmIgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnPgogICAgPHBhdGggZD0iTTEwLjYwODQsMTMuMTk5MmMtLjk1NjEsLjUyNDktMi4wMjQ0LC44MDA4LTMuMTA4NCwuODAwOC0zLjU4NCwwLTYuNS0yLjkxNi02LjUtNi41UzMuOTE2LDEsNy41LDFzNi41LDIuOTE2LDYuNSw2LjVjMCwxLjU5MDMtLjU3MzIsMy4wOTkxLTEuNjIxMSw0LjI4ODFsMy42ODE2LDMuNjgxNi0xLjU5MDgsMS41OTA4LTMuODYxMy0zLjg2MTNaIi8+CiAgICA8cGF0aCBjbGFzcz0iYiIgZD0iTTcuNSwxLjM3NWMzLjM3NywwLDYuMTI1LDIuNzQ3Niw2LjEyNSw2LjEyNSwwLDEuNjczMy0uNjc1OSwzLjE5MDctMS43NjcyLDQuMjk3MmwzLjY3MjUsMy42NzI1LTEuMDYwNSwxLjA2MDYtMy43OTk2LTMuNzk5NmMtLjkyNjMsLjU2MzUtMi4wMDksLjg5NDMtMy4xNzAyLC44OTQzLTMuMzc3LDAtNi4xMjUtMi43NDc2LTYuMTI1LTYuMTI1UzQuMTIzLDEuMzc1LDcuNSwxLjM3NW0wLS43NUMzLjcwOTEsLjYyNSwuNjI1LDMuNzA5MSwuNjI1LDcuNXMzLjA4NDEsNi44NzUsNi44NzUsNi44NzVjMS4wNTI1LDAsMi4wOTE2LS4yNDYxLDMuMDM4LS43MTU4bDMuNDAxNSwzLjQwMTQsLjUzMDMsLjUzMDMsLjUzMDMtLjUzMDMsMS4wNjA1LTEuMDYwNiwuNTMwNC0uNTMwMy0uNTMwNC0uNTMwMy0zLjE3MzctMy4xNzM4Yy45NjQ0LTEuMjEyLDEuNDg4Mi0yLjcwMTMsMS40ODgyLTQuMjY1NkMxNC4zNzUsMy43MDkxLDExLjI5MDksLjYyNSw3LjUsLjYyNWgwWiIvPgogIDwvZz4KICA8Y2lyY2xlIGNsYXNzPSJiIiBjeD0iNy41IiBjeT0iNy41IiByPSI0Ljg3NSIvPgogIDxwb2x5Z29uIHBvaW50cz0iMTAgNyA4IDcgOCA1IDcgNSA3IDcgNSA3IDUgOCA3IDggNyAxMCA4IDEwIDggOCAxMCA4IDEwIDciLz4KPC9zdmc+") 7.5 7.5, auto}\n:host([cursor="zoom-out"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmIgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnPgogICAgPHBhdGggZD0iTTEwLjYwODQsMTMuMTk5MmMtLjk1NjEsLjUyNDktMi4wMjQ0LC44MDA4LTMuMTA4NCwuODAwOC0zLjU4NCwwLTYuNS0yLjkxNi02LjUtNi41UzMuOTE2LDEsNy41LDFzNi41LDIuOTE2LDYuNSw2LjVjMCwxLjU5MDMtLjU3MzIsMy4wOTkxLTEuNjIxMSw0LjI4ODFsMy42ODE2LDMuNjgxNi0xLjU5MDgsMS41OTA4LTMuODYxMy0zLjg2MTNaIi8+CiAgICA8cGF0aCBjbGFzcz0iYiIgZD0iTTcuNSwxLjM3NWMzLjM3NywwLDYuMTI1LDIuNzQ3Niw2LjEyNSw2LjEyNSwwLDEuNjczMy0uNjc1OSwzLjE5MDctMS43NjcyLDQuMjk3MmwzLjY3MjUsMy42NzI1LTEuMDYwNSwxLjA2MDUtMy43OTk2LTMuNzk5NmMtLjkyNjMsLjU2MzUtMi4wMDksLjg5NDMtMy4xNzAyLC44OTQzLTMuMzc3LDAtNi4xMjUtMi43NDc2LTYuMTI1LTYuMTI1UzQuMTIzLDEuMzc1LDcuNSwxLjM3NW0wLS43NUMzLjcwOTEsLjYyNSwuNjI1LDMuNzA5MSwuNjI1LDcuNXMzLjA4NDEsNi44NzUsNi44NzUsNi44NzVjMS4wNTI1LDAsMi4wOTE2LS4yNDYxLDMuMDM4LS43MTU4bDMuNDAxNSwzLjQwMTQsLjUzMDMsLjUzMDMsLjUzMDMtLjUzMDMsMS4wNjA1LTEuMDYwNiwuNTMwNC0uNTMwMy0uNTMwNC0uNTMwMy0zLjE3MzctMy4xNzM4Yy45NjQ0LTEuMjEyLDEuNDg4Mi0yLjcwMTMsMS40ODgyLTQuMjY1NkMxNC4zNzUsMy43MDkxLDExLjI5MDksLjYyNSw3LjUsLjYyNWgwWiIvPgogIDwvZz4KICA8Y2lyY2xlIGNsYXNzPSJiIiBjeD0iNy41IiBjeT0iNy41IiByPSI0Ljg3NSIvPgogIDxyZWN0IHg9IjUiIHk9IjciIHdpZHRoPSI1IiBoZWlnaHQ9IjEiLz4KPC9zdmc+") 7.5 7.5, auto}\n\n    #main {\n        background: var(--render-engine-background-color);\n        box-sizing: border-box;\n    }\n    #grid {\n        display: grid;\n        grid-template-columns: 32px 1fr;\n        grid-template-rows: 32px 1fr;\n        grid-gap: 0;\n        outline: none;\n        border: none;\n        padding: 0;\n        margin: 0;\n        max-width: 100%;\n        max-height: 100%;\n        min-width: 100%;\n        min-height: 100%;\n        width: 100%;\n        height: 100%;\n        box-sizing: border-box;\n    }\n    #grid.no-ruler {\n        grid-template-rows: 1fr;\n        grid-template-columns: 1fr;\n        grid-template-areas: "main";\n    }\n    #grid.no-ruler > .bg-ruler, #grid.no-ruler > #unit {\n        display: none;\n    }\n    #grid.no-ruler > canvas {\n        grid-area: main;\n    }\n\n    .bg-ruler {\n        background: var(--render-engine-rulerBackground-color);\n        box-sizing: border-box;\n    }\n\n    #unit {\n        display: flex;\n        flex: 1;\n        font-size: 10px;\n        font-family: -expressive-sans, sans-serif;\n        color: var(--render-engine-rulerText-color);\n        justify-content: center;\n        align-items: center;\n        user-select: none;\n        box-sizing: border-box;\n    }\n\n    canvas {\n        display: block;\n        outline: none;\n        border: none;\n        touch-action: none;\n    }\n</style>\n<div class="no-ruler" id="grid">\n    <div id="unit" class="bg-ruler"><slot name="unit">px</slot></div>\n    <canvas id="rulerH" class="bg-ruler" height="32"></canvas>\n    <canvas id="rulerV" class="bg-ruler" width="32"></canvas>\n    <canvas id="main"></canvas>\n</div>\n',this.ruler=new ml(this.shadowRoot.getElementById("rulerH"),this.shadowRoot.getElementById("rulerV"))}get canvas(){return this.shadowRoot.getElementById("main")}#ee="selection";get cursor(){return this.#ee}set cursor(t){this.#ee!==t&&(this.#ee=t,this.setAttribute("cursor",t))}updateRulerVisibility(){const t=this.shadowRoot.getElementById("grid").classList;this.ruler.visible?t.remove("no-ruler"):t.add("no-ruler")}connectedCallback(){this.isConnected&&this.dispatchEvent(new Event("connect"))}disconnectedCallback(){this.dispatchEvent(new Event("disconnect"))}}class yl extends bt{constructor(t){super(t,"--render-engine-")}parse(t){return se.parse(t)}updateInternalValues(){this.board=this.getColor("board"),this.background=this.getColor("background"),this.overlay=this.getColor("overlay"),this.contour=this.getColor("contour"),this.snap=this.getColor("snap"),this.textBaseline=this.getColor("text-baseline")}}let xl,bl,wl=!1,Ml=!1,Sl=!1;const kl={x:0,y:0};function _l(){return ul(kl.x,kl.y)}const Il=new Map;function Cl(t){return Il.get(t)}let Ll;function Nl(t){return t!==Ll&&(Ll?.deactivate(),Ll=t,Ll?.activate(),Bl(),Zr(gl,Ll),!0)}function jl(t){t?Ll?.startPan(1):Ll?.endPan(1)}function zl(t){xl.cursor=t}function Pl(){Al()}let Tl=null;function Al(){Ll&&Tl&&Ll.onMouseMove(Tl)}let Dl,El=!0,Ol=!0,Wl=null;function Rl(){El=!0,Ol=!1,Wl&&(Wl.delete(),Wl=null)}function Bl(){El=!0}let Ul,$l,Fl,Vl,Hl,Gl=0;function Zl(){1!=++Gl||Ul||(Ul=requestAnimationFrame(Ql))}function Yl(){0==--Gl&&(cancelAnimationFrame(Ul),Ul=null)}function Ql(t){Jl(t),Ul=requestAnimationFrame(Ql)}function Jl(t){El&&(El=!1,function(){if(!Ol)return Dl(Kl()),void(Ol=!0);if(Wl){const t=Kl();return t.save(),t.matrix=t.matrix.toIdentity(),t.drawImage(Wl),void t.restore()}Dl(Kl()),Wl=ql().makeImageSnapshot()}(),Ll?.render(t),Kl().flush())}function ql(){return $l??=function(t){let e;try{e=Skia.SkSurface.MakeWebGLSurface(t,null,{antialias:!1,powerPreference:"high-performance"},Vl)}catch(t){return null}if(!e)return null;const i=e.canvasElement.getContext("webgl2");return Vl??={samples:0,stencil_bits:0},Vl.samples=i.getParameter(i.SAMPLES),Vl.stencil_bits=i.getParameter(i.STENCIL_BITS),e}(xl.canvas)}function Kl(){return Fl??=function(){const t=ql();return new br(t.getCanvas(),hi.CreateDevicePixelRatio(Xa),t)}()}function Xl(){Yl(),tc();const t=xl.canvas;dc(t);const e=t.width,i=t.height,n=t.cloneNode(!1);t.replaceWith(n),St(n,e,i,Xa),hc(n),Rl(),Zl()}function tc(){$l&&($l.canvasElement?.getContext("webgl2"),$l.delete(),$l=null),Fl&&(Fl.dispose(),Fl=null)}function ec(){_c(!0),Rl()}function ic(){cc(!0),wt.isObserved(xl)||wt.observe(xl,uc),xl.addEventListener("dragenter",sc),xl.addEventListener("dragover",sc),xl.addEventListener("drop",rc),xl.ruler.vertical.addEventListener("pointerdown",Ic),xl.ruler.horizontal.addEventListener("pointerdown",Ic),xl.updateRulerVisibility(),hc(xl.canvas),bl.update()}function nc(){wt.unobserve(xl),xl.removeEventListener("dragenter",sc),xl.removeEventListener("dragover",sc),xl.removeEventListener("drop",rc),xl.ruler.vertical.removeEventListener("pointerdown",Ic),xl.ruler.horizontal.removeEventListener("pointerdown",Ic),dc(xl.canvas)}function sc(t){t.preventDefault()}function rc(t){t.preventDefault(),Hl?.(t)}const oc=[0,0];function ac(){let[t,e]=oc;const i=xl.ruler;if(i.visible){const n=Xa*i.size;t-=n,e-=n}St(xl.canvas,t,e,Xa),tc(),Rl(),i.updateSize(t,e,Xa),_c(!0)}let lc;function cc(t){t&&(lc=null);const e=lc??=xl.getBoundingClientRect(),i=xl.ruler,n=i.visible?i.size:0;var s;s=new Ve(e.x+n,e.y+n,e.width-n,e.height-n),Ja=s}function uc(t){var e;e=devicePixelRatio||1,Xa!==e&&(Xa=e),oc[0]=t.devicePixelContentBoxSize[0].inlineSize,oc[1]=t.devicePixelContentBoxSize[0].blockSize,cc(!0),ac(),Ll&&(Pl(),Rl(),Jl(0))}function hc(t){t.addEventListener("webglcontextlost",Xl),t.addEventListener("pointerdown",fc),t.addEventListener("pointerup",pc),t.addEventListener("pointermove",gc),t.addEventListener("pointerenter",mc),t.addEventListener("pointerleave",vc),t.addEventListener("wheel",yc),t.addEventListener("focus",xc),t.addEventListener("blur",xc),t.setAttribute("tabindex","-1")}function dc(t){t.removeEventListener("webglcontextlost",Xl),t.removeEventListener("pointerdown",fc),t.removeEventListener("pointerup",pc),t.removeEventListener("pointermove",gc),t.removeEventListener("pointerenter",mc),t.removeEventListener("pointerleave",vc),t.removeEventListener("wheel",yc),t.removeEventListener("focus",xc),t.removeEventListener("blur",xc)}function fc(t){t.isPrimary&&(Ml=!0,xl.canvas.setPointerCapture(t.pointerId),Ll?.onMouseDown(Tl=bc(t)))}function pc(t){Ml&&t.isPrimary&&(Ml=!1,xl.canvas.releasePointerCapture(t.pointerId),Ll?.onMouseUp(Tl=bc(t)))}function gc(t){t.isPrimary&&(kl.x=t.clientX,kl.y=t.clientY,wl&&_c(!1),Ll?.onMouseMove(Tl=bc(t)))}function mc(t){t.isPrimary&&(wl=!0,_c(!1),Ll?.onMouseEnter(Tl=bc(t)))}function vc(t){t.isPrimary&&(wl=!1,_c(!1),Ll?.onMouseLeave(Tl=bc(t)))}function yc(t){t.preventDefault(),t.stopImmediatePropagation(),Ll&&(Tl=bc(t),function(t,e){al(t,n(1-.005*e,.85,1.15))}(Tl.canvasPosition,t.deltaY))}function xc(t){Sl="focus"===t.type,Sl?Ll?.onFocus():Ll?.onBlur()}function bc(t){const e=cl(t.clientX,t.clientY);return{canvasPosition:e,position:ll(e),button:t.button>=3?3:t.button,domEvent:t}}let wc,Mc=1;function Sc(){_c(!0),Mc!==Ka&&(Mc=Ka,Pl(),Zr(pl,Ka)),Rl()}function kc(t){const e=xl?.ruler;Ja&&e&&e.visible!==t&&(e.visible=t,xl.updateRulerVisibility(),cc(!1),ac(),Pl())}function _c(t){xl.ruler.visible&&xl.ruler.draw(wl?cl(kl.x,kl.y):null,t)}function Ic(t){if(!wc||0!==t.button)return;if(null!=Ll&&(Ll.isWorkingOrPanning||!Ll.allowGuideCreation))return;const e=Ll,i=wc(t.target===xl.ruler.horizontal,(()=>{Ll===i&&(i.deactivate(),Ll=e,e.activate(),Rl())}));i&&(Ll?.deactivate(),Ml=!0,xl.canvas.setPointerCapture(t.pointerId),Ll=i,i.activate(),i.onMouseDown(Tl=bc(t)))}Yr(eo,(function(){Ll?.onStateChanged(),Rl()})),Yr(io,Bl);const Cc={mouse:1,pen:2,touch:4};class Lc{constructor(){this.isWorking=!1,this.mouseDownEvent=null,this.defaultCanvasCursor="selection",this.dblClickDelta=300,this.#ie=!1,this.#ne=!1,this.#se=Number.NEGATIVE_INFINITY,this.#re=!1,this.#oe=!1,this.#ae=0,this.#le=null,this.#ce=null,this.#ue=!1}#ie;#ne;get startPosition(){return this?.mouseDownEvent.position}get isActive(){return this.#ne}get isWorkingOrPanning(){return this.isWorking||this.#ae>0}get allowGuideCreation(){return!1}get allowSpaceBarPan(){return!0}activate(){this.#ne=!0,zl(this.defaultCanvasCursor)}deactivate(){this.#ne=!1,this.#ie=!1,this.mouseDownEvent=null,this.#re=!1,this.#oe=!1,this.#ue=!1,this.#ae=0,this.#le=null,Bl(),zl("selection")}render(t){this.#ae||this.draw(t)}#se;#re;#oe;get isMouseLeftDown(){return this.#re||this.#oe}get isMouseInside(){return wl}onMouseDown(t){if(this.mouseDownEvent=t,this.#ae)switch(t.domEvent?.preventDefault(),t.button){case 0:this.#re=!0,this.startPan(4,t.canvasPosition);break;case 2:t.domEvent?.stopPropagation(),this.startPan(16,t.canvasPosition);break;case 1:this.startPan(8,t.canvasPosition)}else if(0===t.button){if(this.#oe)return this.#oe=!1,this.#re=!0,void(this.#se=t.domEvent.timeStamp);!this.isWorking&&t.domEvent.timeStamp-this.#se<=this.dblClickDelta?(this.#se=Number.NEGATIVE_INFINITY,this.onDblClick(t)):(this.#se=t.domEvent.timeStamp,this.#re=!0,this.onMouseLeftButtonDown(t),this.#ie=!0)}else 2===t.button?(t.domEvent?.preventDefault(),this.onContextMenu(t)):1===t.button&&(t.domEvent?.preventDefault(),this.startPan(8,t.canvasPosition))}onMouseUp(t){if(this.#ae)switch(t.button){case 0:this.#re=!1,this.endPan(4);break;case 2:this.endPan(16);break;case 1:this.endPan(8)}else this.#re&&0===t.button&&(this.#re=!1,this.onMouseLeftButtonUp(t));this.mouseDownEvent=null}onMouseMove(t){if(this.#ae)return void(this.mouseDownEvent&&this.#he(t));if(!this.isMouseLeftDown)return void this.onMouseHover(t);let e=!1;if(this.#ie){const i=this.mouseDownEvent;if(i&&i.canvasPosition.distanceTo(t.canvasPosition)<(Cc[t.domEvent.pointerType]||1))return;this.#ie=!1,e=!0}this.onMouseLeftButtonMove(t,e)}onKeyDown(t){return this.isWorking}onKeyUp(t){return this.isWorking}#ae;get isPanning(){return 0!==this.#ae}#le;#ce;#ue;startPan(t,e=null){return 0!==this.#ae?(e&&!this.#le&&(this.#le=e),(this.#ae&t)!==t&&(this.#ae|=t,this.#de()),!1):(this.#le=null,this.#ae=t,this.#ce=xl.cursor,this.#re?(this.#ae|=4,this.#ue=!0):this.#ue=this.#oe,this.#de(),Bl(),!0)}endPan(t){return!!(this.#ae&t)&&(this.#ae&=~t,this.#de(),0!==this.#ae?(28&this.#ae||(this.#le=null),!1):(this.#le=null,this.#oe=this.#ue&&!this.#re,zl(this.#ce),this.#ce=null,this.onPanEnd(),!0))}onPanEnd(){Al(),Bl()}#he(t){const e=t.canvasPosition;var i,n;this.#le&&(i=e.x-this.#le.x,n=e.y-this.#le.y,(i||n)&&(Qa.x+=i,Qa.y+=n,fl())),this.#le=e}#de(){const t=this.#ae;zl(28&t?"hand-grab":3&t?"hand":this.defaultCanvasCursor)}}let Nc=1;const jc=new Map,zc=new Map,Pc=new Map;function Tc(t,e=1,i){Ac(t,i),Dc(t,e),zc.set(t,new Ti)}function Ac(t,e){jc.set(t,gi.fromColor(e??se.black))}function Dc(t,e){Pc.set(t,{value:e,original:e})}function Ec(t){return jc.get(t)}function Oc(t){return zc.get(t)}function Wc(t){return Pc.get(t).value}function Rc(t,e){return hl(Pc.get(t).original)/(e?Math.max(e.lineScale,1e-4):1)}function Bc(t){if(t===Nc)return!1;Nc=t;for(const e of Pc.values())e.value=e.original/t;for(const[t,e]of zc)e.width=Pc.get(t).value;return!0}function Uc(){for(const[t,e]of Pc)e.original=bl.getSize(t,e.original),e.value=e.original/Nc,zc.has(t)&&(zc.get(t).width=e.value);for(let[t,e]of jc)e=e.withColor(bl.getColor(t,e.color)),jc.set(t,e),zc.has(t)&&(zc.get(t).brush=e)}let $c;function Fc(t){$c=t}Yr(ro,(()=>{bl.addEventListener("update",Uc)})),Yr(oo,Uc);const Vc=Symbol(),Hc=Symbol(),Gc=Symbol(),Zc=Symbol(),Yc=Symbol(),Qc=Symbol(),Jc=Symbol(),qc=Symbol(),Kc=Symbol(),Xc=Symbol(),tu=Symbol(),eu=Symbol(),iu=Symbol(),nu=Symbol(),su=Symbol(),ru=Symbol(),ou=Symbol(),au=Lt((()=>Zr(Xc)));function lu(t){const e=new Set,i=Lt((()=>{Zr(t,e),e.clear()}));return t=>{$c&&t.document===$c&&!e.has(t)&&(e.add(t),i())}}const cu=lu(tu),uu=lu(eu),hu=lu(iu),du=lu(nu),fu=lu(su),pu=lu(ru),gu=new hi;class mu{#fe=null;#pe=null;#ge=null;#me=null;#ve=null;#ye=null;#xe=null;#be=null;#we=!1;#Me=!0;#Se=null;#ke=null;#_e=null;#Ie=null;#Ce=null;#Le=null;constructor(t=null){this.#fe=t}dispose(){if(this.#xe)for(const t of Array.from(this.children()))t.dispose();this.#xe=this.#be=null,this.#pe=null,this.#ke=this.#Se=null,this.#_e=this.#Ie=this.#Ce=this.#Le=null,this.#ge=null,this.#me=this.#ye=this.#ve=null}applyJSON(t){this.#fe=t.id,this.#pe=t.title??null,this.#we=!!t.hidden;const e=t.children;if(e&&this.supportsChildren)for(const t of e)t&&this.acceptsChild(t)&&t.acceptsParent(this)&&this.#Ne(t)}toJSON(){return{id:this.#fe,title:this.#pe??void 0,hidden:!!this.#we||void 0,visible:this.#Me,children:this.#xe?Array.from(this.children()):void 0}}static fromJSON(t){const e=new this;return e.applyJSON(t),e}get id(){return this.#fe}set id(t){this.#fe=t}get title(){return this.#pe}set title(t){this.#pe=t}get document(){return this.#ge}set document(t){this.#ge=t}get parent(){return this.#me}get firstChild(){return this.#xe}get lastChild(){return this.#be}get nextSibling(){return this.#ve}get previousSibling(){return this.#ye}get hasChildren(){return null!=this.#xe}get isFragment(){return 0===this.nodeType||3===this.nodeType}get isDocument(){return 0===this.nodeType}get isLayer(){return 1===this.nodeType}get isElement(){return 2===this.nodeType}get isFilterContainer(){return 3===this.nodeType}get isFilter(){return 4===this.nodeType}get hidden(){return this.#we}set hidden(t){this.#we!==t&&(this.#we=t,this.onVisibilityChanged())}get visible(){return this.#Me}set visible(t){this.#Me!==t&&(this.#Me=t,this.onVisibilityChanged())}get isInvisible(){return this.#we||!this.#Me}onChildAdded(t,e){t.isInvisible||this.invalidate(!0)}onChildRemoved(t){t.isInvisible||this.invalidate(!0)}onChildMoved(t){t.isInvisible||this.invalidate(!1)}onParentChanged(t,e){this.#ge?.onNodeParentChanged(this,e),t&&t.#ge&&!hi.Same(t.globalMatrix,e?.globalMatrix)&&this.invalidateGlobalMatrix(!1)}onSiblingsChanged(){}onVisibilityChanged(){this.invalidateParent(!0,!0)}onChildGraphicsChanged(t,e,i){!i&&t.isInvisible||this.invalidate(e)}onChildMatrixChanged(t){t.isInvisible||this.invalidate(!0)}invalidateLocalMatrix(t){this.#ke&&(this.#ke=null,fu(this),t?this.invalidateGlobalMatrix(!0):(this.#Se&&this.invalidateGlobalMatrix(!1),this.#me?.onChildMatrixChanged(this)))}invalidateGlobalMatrix(t){if(this.#Se=null,pu(this),this.#Ie=null,this.#Le=null,du(this),!t)for(let t=this.#xe;null!==t;t=t.#ve)t.#Se&&t.invalidateGlobalMatrix(!1)}invalidate(t,e){t&&this.invalidateBounds(),this.invalidateGraphics(),this.#me?.onChildGraphicsChanged(this,t,e)}invalidateParent(t,e){this.#me?.onChildGraphicsChanged(this,t,e)}contains(t){if(t===this)return!1;do{if((t=t.#me)===this)return!0}while(null!=t);return!1}bringForward(){if(!this.#ve||!this.#me)return!1;const t=this.#ge;try{t&&(t.preventAdoptAndAbandon=!0),this.#me.insertAfter(this,this.#ve)}finally{t&&(t.preventAdoptAndAbandon=!1)}return!0}sendBackward(){if(!this.#ye||!this.#me)return!1;const t=this.#ge;try{t&&(t.preventAdoptAndAbandon=!0),this.#me.insertBefore(this,this.#ye)}finally{t&&(t.preventAdoptAndAbandon=!1)}return!0}bringToFront(){if(!this.#ve||!this.#me)return!1;const t=this.#ge;try{t&&(t.preventAdoptAndAbandon=!0),this.#me.insertAfter(this,this.#me.#be)}finally{t&&(t.preventAdoptAndAbandon=!1)}return!0}sendToBack(){if(!this.#ye||!this.#me)return!1;const t=this.#ge;try{t&&(t.preventAdoptAndAbandon=!0),this.#me.insertBefore(this,this.#me.#xe)}finally{t&&(t.preventAdoptAndAbandon=!1)}return!0}remove(){return!!this.#me&&(this.isFragment?this.detachFromTree():this.#me.removeChild(this),!0)}get supportsRenderableChildren(){return this.supportsChildren}get supportsContextChildren(){return this.supportsChildren}acceptsParent(t){return!(!t||!t.supportsChildren||this.isDocument)&&(this.isLayer?t.isDocument:this.isElement?t.isLayer||t.isElement:!this.isFilterContainer&&!!this.isFilter&&(t.isFilterContainer||t.isFilter))}acceptsChild(t){return!!this.supportsChildren&&(this.isDocument?t.isLayer:this.isLayer||this.isElement?t.isElement:!(!this.isFilterContainer&&!this.isFilter)&&t.isFilter)}insertAfter(t,e){return null!==e.#ve?this.insertBefore(t,e.#ve):this.appendChild(t)}insertBefore(t,e){if(t===e||e.#ye===t)return t;if(e.#me!==this||t.contains(this))throw new Error("Invalid target");const i=t.#me===this;if(!i){if(!this.acceptsChild(t))throw new Error("Child is not supported");if(!t.acceptsParent(this))throw new Error("Parent is not supported")}const n=t.#me;if(n)if(n===this){if(t.#ve===e)return t;this.#je(t)}else n.removeChild(t);t.#me=this;const s=e.#ye;return e.#ye=t,t.#ve=e,t.#ye=s,s?s.#ve=t:this.#xe=t,this.#ge?.adoptNode(t),i?(t.onSiblingsChanged(),this.onChildMoved(t)):(t.onParentChanged(this,n),this.onChildAdded(t,n)),t}appendChild(t){if(t===this.#be)return t;if(t===this||t.contains(this))throw new Error("Invalid node");const e=t.#me===this;if(!e){if(!this.acceptsChild(t))throw new Error("Child is not supported");if(!t.acceptsParent(this))throw new Error("Parent is not supported")}const i=t.#me;if(i)if(i===this){if(this.#be===t)return t;this.#je(t)}else i.removeChild(t);return this.#Ne(t),e?(t.onSiblingsChanged(),this.onChildMoved(t)):(t.onParentChanged(this,i),this.onChildAdded(t,i)),t}prependChild(t){return this.#xe?this.insertBefore(t,this.#xe):this.appendChild(t)}insertAdjacentNodes(t,...e){if(0===e.length)return!1;let i=e[0];if(this===i)return!1;let n=!1;const s=this.#ge;let r=!1;null!=s&&s===i.document&&(s.preventAdoptAndAbandon=!0,r=!0);try{switch(t){case"append":if(this.#be===i||!this.acceptsChild(i)||!i.acceptsParent(this)||i.contains(this))return!1;this.#be!==i&&(this.appendChild(i),n=!0);break;case"prepend":if(this.#xe===i||!this.acceptsChild(i)||!i.acceptsParent(this)||i.contains(this))return!1;this.#xe!==i&&(this.prependChild(i),n=!0);break;case"before":if(!this.#me||this.#ye===i||!this.#me.acceptsChild(i)||!i.acceptsParent(this.#me)||i.contains(this.#me))return!1;this!==i&&this.#ye!==i&&(this.#me.insertBefore(i,this),n=!0);break;case"after":if(!this.#me||this.#ve===i||!this.#me.acceptsChild(i)||!i.acceptsParent(this.#me)||i.contains(this.#me))return!1;this!==i&&this.#ve!==i&&(this.#me.insertAfter(i,this),n=!0);break;default:return!1}if(e.length>1){const t=i.#me;for(let s=1;s<e.length;s++)t.acceptsChild(e[s])&&e[s].acceptsParent(t)&&!e[s].contains(t)&&(i!==e[s]&&i.#ve!==e[s]&&(t.insertAfter(e[s],i),n=!0),i=e[s])}}finally{s&&r&&(s.preventAdoptAndAbandon=!1)}return n}removeChild(t){if(t===this||t.#me!==this)throw new Error("Invalid node");return t.isFragment?(t.detachFromTree(),t):(this.#je(t),t.onParentChanged(null,this),this.onChildRemoved(t),t)}#je(t){this.#xe===t?this.#be===t?this.#xe=this.#be=null:(this.#xe=t.#ve,this.#xe.#ye=null):this.#be===t?(this.#be=t.#ye,this.#be.#ve=null):(t.#ve.#ye=t.#ye,t.#ye.#ve=t.#ve),t.#me=t.#ve=t.#ye=null,this.#ge?.abandonNode(t)}#Ne(t){t.#me=this,this.#be&&(this.#be.#ve=t,t.#ye=this.#be),this.#be=t,this.#xe||(this.#xe=t),this.#ge?.adoptNode(t)}cloneCurrent(){return new this.constructor}cloneProperties(t){t.#pe=this.#pe,t.#we=this.#we,t.#Me=this.#Me,this.#ke&&(t.#ke=this.#ke.clone()),this.#Se&&(t.#Se=this.#Se.clone()),t.#_e=this.#_e,t.#Ie=this.#Ie,t.#Ce=this.#Ce,t.#Le=this.#Le}clone(t=!1){const e=this.cloneCurrent();e.#fe=t?null:this.#fe,this.cloneProperties(e);for(let i=this.#xe;null!=i;i=i.#ve)e.#Ne(i.clone(t));return e}*[Symbol.iterator](){for(let t=this.#xe;null!=t;t=t.#ve)yield t}*children(t=!1){if(t)for(let t=this.#be;null!=t;t=t.#ye)yield t;else for(let t=this.#xe;null!=t;t=t.#ve)yield t}get localMatrix(){return this.isTransformable?this.#ke??=this.computeLocalMatrix():gu}computeLocalMatrix(){return gu}get globalMatrix(){if(this.#Se)return this.#Se;if(!this.isTransformable)return this.#Se=this.#me?.globalMatrix||gu;const t=this.localMatrix;if(!this.#me)return this.#Se=t;const e=this.#me.globalMatrix;return e.isIdentity?this.#Se=t:t.isIdentity?this.#Se=e.clone():this.#Se=e.clone().multiply(t)}getLocalPoint(t,e=!0){const i=this.globalMatrix;return i.isIdentity?t:i.inversePoint(t.x,t.y,e)}getGlobalPoint(t,e=!0){const i=this.globalMatrix;return i.isIdentity?t:i.point(t.x,t.y,e)}localBoundsContainPoint(t){const e=this.globalMatrix;return e&&!e.isIdentity&&(t=e.inversePoint(t.x,t.y)),this.localBounds.contains(t.x,t.y)}get localBounds(){return this.#_e??=this.computeLocalBounds()}get globalBounds(){return this.#Ie??=this.computeGlobalBounds()}computeGlobalBounds(){return Ze.fromRectangle(this.localBounds,this.globalMatrix)}get localBoundsPoints(){return this.#Ce??=this.computeLocalBoundsPoints()}get globalBoundsPoints(){return this.#Le??=this.computeGlobalBoundsPoints()}computeGlobalBoundsPoints(){const t=this.localBoundsPoints;if(!t.length)return t;const e=this.globalMatrix;return e.isIdentity?t:e.transformPointArray(t)}computeLocalBoundsPoints(){const t=this.localBounds;return t?[t.topLeft,t.topRight,t.bottomRight,t.bottomLeft]:st}invalidateBounds(){const t=null!=this.#_e;this.#_e=this.#Ie=this.#Ce=this.#Le=null,t&&(hu(this),du(this))}attachToTree(t){if(!this.isFragment)return!1;const e=this.#me;return t!==e&&(t&&t.#ge===this.#ge||this.#ge?.abandonNode(this),this.#me=t,t&&t.#ge?.adoptNode(this),e?.onFragmentDetached(this),this.onParentChanged(t,e),t?.onFragmentAttached(this),!0)}detachFromTree(){return this.attachToTree(null)}onFragmentDetached(t){}onFragmentAttached(t){}get hasFragments(){return!1}get fragments(){return null}}class vu extends mu{constructor(){super(...arguments),this.nodeType=3,this.supportsFilters=!1,this.supportsContext=!1,this.supportsChildren=!0,this.isTransformable=!1,this.isRenderable=!1,this.type="filter-container"}get inputBounds(){return this.parent?.pictureBounds}get outputBounds(){return this.localBounds}get filter(){return this.isInvisible?null:this.lastChild?.filter||null}onParentChanged(t,e){t&&(this.invalidateBounds(),super.onParentChanged(t,e),e&&this.firstChild?.invalidateChain())}onChildRemoved(t){const e=this.firstChild;this.invalidateBounds(),e?e.invalidateChain():this.isInvisible||this.parent?.invalidateFilters()}onChildAdded(t){t.invalidateChain()}onChildMoved(t){this.firstChild.invalidateChain()}onVisibilityChanged(){this.invalidateBounds(),this.parent?.invalidateFilters()}onChildGraphicsChanged(t,e,i){this.invalidateBounds(),!i&&this.isInvisible||this.parent?.invalidateFilters()}computeLocalBounds(){const t=this.inputBounds;if(!t)return Ve.ZERO;const e=this.filter;return e&&Ve.fromLTRBObject(e.getBounds(t))||t}invalidateGraphics(){}}function yu(t,e,i){if(t.length<2)return i?t:[...t];const n=i?t:[];i&&(t=t.splice(0));const s=t[0].document;if(!s)return n;const r=[s];let o=t.length;for(;r.length>0;){const i=r.pop();if(t.includes(i)&&(n.unshift(i),0==--o))return n;if(i.hasChildren&&r.push(...i.children(e)),i.hasFragments){const t=i.fragments;t?.length&&(1===t.length?r.push(t[0]):(e&&t.reverse(),r.push(...t)))}}return n}function xu(t){const e=new Map;return null!=t.id&&e.set(t.id,t),bu(t,e),e}function bu(t,e){for(const i of t.children()){if(null!=i.id&&e.set(i.id,i),i.hasFragments)for(const t of i.fragments)bu(t,e);i.hasChildren&&bu(i,e)}}function wu(t){const e=t[0].parent;for(let i=1;i<t.length;i++)if(t[i].parent!==e)return!1;return!0}function Mu(t){const e=t.parent?.globalMatrix;return!e||e.isIdentity?null:e}function*Su(t,e){if(t.hasFragments&&!e)for(const i of t.fragments)yield i,yield*Su(i,e);if(t.hasChildren)for(const i of t.children())yield i,yield*Su(i,e)}function*ku(t){yield t,yield*Su(t)}const _u=new Map([["document","Document"],["layer","Layer"],["text","Text"],["clip-group","Clip Group"],["clip-path","Clip Path"],["ellipse","Ellipse"],["group","Group"],["image","Image"],["line","Line"],["mask","Mask"],["path","Path"],["poly","Polyline"],["rect","Rectangle"],["regular-polygon","Polygon"],["star","Star"],["symbol","Symbol"],["text-style","Text Style"],["filter-container","Effects"],["filter:blur","Blur"],["filter:color-adjust","Color adjust"],["filter:drop-shadow","Drop Shadow"]]);function Iu(t){let e=t.title;return null==e?_u.get(t.type)||"":(e=e.trim(),""===e?_u.get(t.type)||"":e)}const Cu=ha(Yc);let Lu=!1;function Nu(){return Lu}const ju=[];function zu(){return ju}function Pu(){return ju[0]||null}function Tu(){return ju[ju.length-1]||null}function Au(){return ju.length>0}function Du(t){for(const e of t)e.invalidate(!0);return t}function Eu(t){return t&&t.supportsContext&&t.document===$c&&(!t.isLayer||null!=(t.previousSibling||t.nextSibling))}function Ou(t,e=!1){if(!Eu(t))return!!ju.length&&(Lu=!1,Yu(0),Cu(),!0);if(ju[0]===t){if(!Lu||1===ju.length)return!1;Yu(1)}else Yu(0),ju.push(t),Lu=e||!t.supportsContextChildren,t.invalidate(!0);return Cu(),!0}function Wu(t){const e=t.filter(Bu);if(0===e.length)return Ou(null);if(1===e.length)return Ou(e[0],!0);Yu(0),Lu=!0,ju.push(...e),Zu();for(const t of e)t.invalidate(!0);return Cu(),!0}function Ru(){return!!ju.length&&Ou(function(){if(!ju.length)return null;let t=Tu()?.parent;for(;t&&!t.supportsContext;)t=t.parent;return t||null}(),!1)}function Bu(t){return null!=t&&t.supportsContext&&t.document===$c}function Uu(t){if(!Lu||!t.supportsContext||t.document!==$c||ju.indexOf(t)>=0)return!1;for(const e of ju)if(e.contains(t))return!1;return ju.push(t),Zu(),t.invalidate(!0),Cu(),!0}function $u(t){return ju.includes(t)}function Fu(t){return!Lu&&ju.includes(t)}function Vu(t=!1){if(!ju.length)return null;let e=Lu?Tu()?.parent?.globalMatrix:ju[0]?.globalMatrix;return!e||e.isIdentity?null:(e=e.clone(),t?e.inverse():e)}function Hu(t){if(!ju.length)return $c===t.document;if(!Lu)return ju[0].contains(t);for(const e of ju)if(e===t||e.contains(t))return!0;return!1}function Gu(t){return ju.length?Lu?t&&1!==ju.length?ju.slice().reverse():ju:ju[0].children(t):$c.children(t)}function Zu(){return!(ju.length<=1||(yu(ju,!1,!0),0))}function Yu(t){Du(ju.splice(t))}function Qu(){return ju.length?Lu?ju.map(qu):qu(ju[0]):null}function Ju(t){if(Lu=!1,ju.length&&Yu(0),t){if(Nt(t)){for(const e of t){const t=Ku(e);Bu(t)&&ju.push(t)}Lu=ju.length>0}else{const e=Ku(t);e&&Eu(e)&&(ju.push(e),Lu=!e.supportsContextChildren)}ju.length&&(Zu(),Du(ju))}}function qu(t){return t.id}function Ku(t){return $c.find(t)}var Xu;Yr(so,(()=>{So({id:"isolation-context",priority:-1e3,get:Qu,set:Ju})})),Yr(Hc,(function(t){if(!ju.length)return;let e=!1;for(let i=0;i<ju.length;i++)(ju[i]===t||t.contains(ju[i]))&&(ju.splice(i,1),i--,e=!0);e&&(ju.length||(Lu=!1),Cu())})),Yr(io,(()=>{if(!ju.length)return;const t=Vo[Fo]?.[1]?.get("document");if(t)for(const e of ju)t.find(e.id)?.invalidate(!0)}));class th extends mu{#ze=void 0;#Pe=null;#Te=null;#Ae=!1;#De=null;#Ee=null;#Oe=!1;#We=11;#Zt=1;#Re=!1;#Be=null;get supportsContext(){return this.providesPicture}get isolationContour(){return null}dispose(){super.dispose(),this.#Be=this.#We=null,this.#Pe?.dispose(),this.#Pe=null,this.#ze?.delete(),this.#ze=null,this.#De?.delete(),this.#De=null,this.#Te=this.#Ee=null}applyJSON(t){this.#Oe=!!t.locked,this.providesPicture&&(this.#Zt=t.opacity??1,this.#Re=!!t.isolate,this.#We=t.blendMode??11);const e=t.filters;e&&!this.setInitialFilters(e)&&e.dispose?.(),super.applyJSON(t)}toJSON(){const t=super.toJSON();return this.#Oe&&(t.locked=!0),this.providesPicture&&(1!==this.#Zt&&(t.opacity=this.#Zt),this.#Re&&(t.isolate=!0),11!==this.#We&&(t.blendMode=this.#We)),this.#Pe&&(t.filters=this.#Pe),t}cloneProperties(t){super.cloneProperties(t),t.#Oe=this.#Oe,t.#Zt=this.#Zt,t.#Re=this.#Re,t.#We=this.#We,t.#Be=this.#Be,t.#ze=this.#ze?this.#ze.clone():this.#ze,t.#Te=this.#Te}clone(t=!1){const e=super.clone(t);return this.#Pe&&e.setInitialFilters(this.#Pe.clone(t)),e}get supportsFilters(){return this.providesPicture}invalidateFilters(){this.#Pe&&(uu(this),this.invalidateParent(!0))}get locked(){return this.#Oe}set locked(t){this.#Oe=t}get opacity(){return this.#Zt}set opacity(t){this.#Zt!==t&&this.providesPicture&&(this.#Zt=t,this.#Be=null,this.invalidateParent())}get blend(){return this.#We}set blend(t){this.#We!=t&&this.providesPicture&&(this.#We=t,this.#Be=null,this.invalidateParent())}get isolate(){return this.#Re}set isolate(t){this.#Re!=t&&this.providesPicture&&(this.#Re=t,this.#Be=null,this.invalidateParent())}get composition(){return null==this.#Be?this.#Be=this.providesPicture?new oe(this.#We,this.#Zt,this.#Re):oe.NormalComposition:this.#Be}isClickable(t){return!this.#Oe&&(t?this.isRenderable&&!this.isInvisible:!this.isInvisibleDrawing)}intersectsRect(t){if(!this.isClickable())return!1;if(this.supportsRenderableChildren){if(!this.hasChildren||!this.globalBounds.intersectsRect(t))return!1;for(const e of this.children())if(e.isClickable()&&e.intersectsRect(t))return!0;return!1}return this.globalBounds.intersectsRect(t)}get isInvisibleDrawing(){return!this.providesPicture||this.isInvisible||0===this.#Zt}get pictureBounds(){return this.#Te??=this.computePictureBounds()}computePictureBounds(){return this.supportsRenderableChildren?this.computePictureBoundsForChildren():this.localBounds}computePictureBoundsForChildren(){return Ve.merge(this.#Ue())}*#Ue(){for(const t of this.children())t instanceof Xu&&t.isRenderable&&!t.isInvisible&&(yield t.pictureAndFiltersBounds.transform(t.localMatrix))}get pictureAndFiltersBounds(){return this.#Ae?this.#Ee:this.#Pe?.outputBounds||this.pictureBounds}get picture(){return void 0===this.#ze?this.providesPicture?this.#ze=this.computePicture():this.#ze=null:this.#ze}get providesPicture(){return this.isRenderable}computePicture(){const t=this.pictureBounds,e=new Skia.SkPictureRecorder,i=new br(e.beginRecording(t)),n=this.drawOnPicture(i,t),s=n?e.finishRecordingAsPicture(n):e.finishRecordingAsPicture(t);return e.delete(),i.dispose(),s}get hasFragments(){return null!=this.#Pe}get fragments(){return this.#Pe?[this.#Pe]:null}get filters(){return this.#Pe}set filters(t){this.setFilters(t)}setFilters(t){return!(!this.supportsFilters||this.#Pe===t||(this.#Pe?.detachFromTree(),t?.attachToTree(this),0))}setInitialFilters(t){return t?!!(t instanceof vu&&this.supportsFilters)&&(this.#Pe=t,t.attachToTree(this),!0):(this.#Pe=null,!0)}onFragmentAttached(t){this.#Pe!==t&&t instanceof vu&&(this.#Pe=t,this.invalidate(!0))}onFragmentDetached(t){this.#Pe===t&&(this.#Pe=null,this.invalidate(!0))}get isFrozen(){return this.#Ae}set isFrozen(t){if(t!==this.#Ae)if(this.#Ae=t,this.#De?.delete(),this.#De=null,this.#Ee=null,t){const t=this.picture;t?(this.#De=t.clone(),this.#Ee=Ve.fromLTRBObject(t.getBounds())):this.#Ee=Ve.ZERO}else this.invalidateParent(!0)}get frozenPicture(){return this.#De}draw(t){if(this.isInvisibleDrawing)return;const e=this.#Ae?this.#De:this.picture;e&&t.drawPicture(e,this.composition,this.localMatrix,this.#Pe?.filter)}drawWireframe(t){const e=this.localMatrix;e.isIdentity?this.drawOnWireframe(t):(t.save(),t.multiplyMatrix(e),this.drawOnWireframe(t),t.restore())}drawOnPicture(t,e){if(!this.hasChildren)return Ve.ZERO;if(Au())for(const e of this.children())e instanceof Xu&&e.isRenderable&&!$u(e)&&e.draw(t);else for(const e of this.children())e instanceof Xu&&e.isRenderable&&e.draw(t)}drawOnWireframe(t){if(this.hasChildren)if(Au())for(const e of this.children())e instanceof Xu&&!$u(e)&&e.drawWireframe(t);else for(const e of this.children())e instanceof Xu&&e.drawWireframe(t)}invalidateBounds(){this.#Te=null,super.invalidateBounds(),this.#Pe?.invalidateBounds()}invalidateGraphics(){this.#ze?.delete(),this.#ze=void 0,cu(this)}invalidateGlobalMatrix(t){super.invalidateGlobalMatrix(t),this.#Pe?.invalidateGlobalMatrix(!0)}}Xu=th;const eh=ha(Qc);let ih=null,nh=new Set,sh=null;function rh(){return nh.values()}function oh(){return ih}function ah(){return[...nh]}function lh(){return nh.size}function ch(){return!nh.size}function uh(){if(sh){const t=$c.find(sh);if(t?.isLayer)return t;sh=null}for(const t of $c.children(!0))if(!t.hidden)return sh=t.id,t;const t=$c.lastChild;return sh=t.id,t}function hh(t){return nh.has(t)}function dh(t){if(!nh.size)return!1;if(nh.has(t))return!0;for(const e of nh)if(e.contains(t))return!0;return!1}function fh(t){if(!nh.size||nh.has(t))return!0;let e;for(e of nh)if(e.contains(t)||t.contains(e))return!1;return e.nodeType===t.nodeType}function ph(t,e){return e?nh.has(t)?!!Ch(t)&&(_h(),!0):(function(t){if(nh.size)return Ih()?.nodeType!==t.nodeType?(nh.clear(),void nh.add(t)):(function(t){let e=t.parent;for(;e&&!e.isDocument&&nh.size>0;)nh.has(e)&&nh.delete(e),e=e.parent}(t),function(t){if(!nh.size||!t.hasFragments&&!t.hasChildren)return 0;for(const e of nh)t.contains(e)&&nh.delete(e)}(t),void nh.add(t));nh.add(t)}(t),Ch(t),_h(),!0):!(1===nh.size&&nh.has(t)||(nh.clear(),nh.add(t),Ch(t),_h(),0))}function gh(t){const e=t.length-1;if(e<0)return Mh();if(0===e)return ph(t[0]);let i=!1;t=[...t];for(const e of nh){const n=t.indexOf(e);if(n>=0){if(t.splice(n,1),!t.length)break}else i=!0,nh.delete(e)}if(t.length){for(const e of t)nh.add(e);i=!0,Ch(t[t.length-1])}else Ch()&&(i=!0);return!!i&&(_h(),!0)}function mh(t,e){if(t===e||t.nodeType!==e.nodeType||t.parent!==e.parent)return ph(e);let i=[],n=!1;for(let s=t.parent?.firstChild;null!=s;s=s.nextSibling){if(!n)if(s===t)n=!0,i.push(s);else{if(s!==e)continue;{n=!0,i.push(s);const r=t;t=e,e=r}}if(i.push(s),s===e)break}return gh(i)}function vh(t,e=!0,i,n){if(!t.isVisible)return!n&&Mh();if(n){let n=!1;for(const s of yh(t,e,i))n=!0,nh.has(s)?nh.delete(s):nh.add(s);return n&&(Ch(),_h()),n}const s=nh.size>0;nh.clear();for(const n of yh(t,e,i))nh.add(n);return nh.size?(nh.has(ih)||Ch(),_h(),!0):(ih=null,!!s&&(_h(),!0))}function*yh(t,e=!0,i){let n,s=null;if(Au())if(Nu()){n=[];for(const t of zu()){const e=t.parent;e&&!n.includes(e)&&n.push(e)}1===n.length&&(n=n[0]),s=zu()}else n=Pu();else n=$c;if(Array.isArray(n))for(const r of n)for(const n of xh(t,e,r,s))i&&!i(n)||(yield n);else if(n)for(const r of xh(t,e,n,s))i&&!i(r)||(yield r)}function*xh(t,e,i,n,s){for(const r of i.children(!0))if((!n||-1!==n.indexOf(r))&&!r.isInvisible&&!r.locked&&r.globalBounds.intersectsRect(t))if(r.supportsRenderableChildren){if(!r.hasChildren)continue;e||r.isLayer?yield*xh(t,e,r,n,!1):null!=xh(t,e,r,n,!0).next().value&&(yield r)}else if(yield r,s)return}function bh(t){return!!nh.has(t)&&(nh.delete(t),ih===t&&Ch(),_h(),!0)}function wh(t,e){return e&&nh.has(t)?bh(t):ph(t,e)}function Mh(){return!!nh.size&&(ih=null,nh.clear(),_h(),!0)}function Sh(t){return t?ih!==t&&ph(t,!0):Mh()}function kh(t){for(const e of nh)if(t(e))return!0;return!1}function _h(){Oh(),eh()}function Ih(){if(!nh.size)return null;const[t]=nh;return t}function Ch(t){t??=Ih();const e=ih===t;for(ih=t||null;null!=t&&!t.isDocument;){if(t.isLayer)return sh=t.id,e;t=t.parent}return e}function Lh(){return nh.size?[jh(),ih?.id]:null}function Nh(t){if(sh=null,ih=null,nh.clear(),Oh(),!t)return;let e=null;for(const i of t[0]){const t=$c.find(i);t&&(nh.add(t),e=t)}ih=$c.find(t[1])??e,ih&&(nh.add(ih),Ch(ih))}function jh(){const t=new Array(nh.size);let e=0;for(const i of nh)t[e++]=i.id;return t}function zh(){return Th(Ah)}function Ph(){return Th(Dh)}function*Th(t,e=!0){if(e)for(const e of nh)t(e)&&(yield e);else for(const e of nh)e!==ih&&t(e)&&(yield e)}function Ah(t){return t.isTransformable}function Dh(t){return t.isElement}Yr(so,(()=>{So({id:"selection",priority:-900,get:Lh,set:Nh})})),Yr(Hc,(function(t){if(!nh.size)return;let e=!1;for(const i of nh)(i===t||t.contains(i))&&(nh.delete(i),e=!0);e&&(ih&&!nh.has(ih)&&Ch(),_h())})),Yr(Yc,(function(){if(!nh.size||!Au())return;let t=!1;if(Nu())for(const e of nh)e.supportsContext&&$u(e)||(nh.delete(e),t=!0);else{const e=Pu();nh.has(e)&&(nh.delete(e),t=!0);for(const i of nh)e.contains(i)||(nh.delete(i),t=!0)}t&&(ih&&!nh.has(ih)&&Ch(),_h())})),Yr(nu,Oh),Yr(su,Oh);let Eh=null;function Oh(){Eh=null}function Wh(){return nh.size?Ve.merge(function*(t){for(const e of t)e.isRenderable&&(yield e.globalBounds.bounds)}(nh)):Ve.ZERO}class Rh extends th{constructor(){super(...arguments),this.nodeType=2,this.#$e=ce.ZERO,this.#Fe=ce.ZERO,this.#B=ce.UNIT,this.#Ve=0,this.#He=0,this.#Ge=0,this.#Ze=0,this.#Ye=0}#$e;#Fe;#B;#Ve;#He;#Ge;#Ze;#Ye;get supportsChildren(){return!1}get isRenderable(){return!0}get isTransformable(){return!0}dispose(){super.dispose(),this.#$e=this.#Fe=this.#B=null}cloneProperties(t){super.cloneProperties(t),this.isTransformable&&(t.#$e=this.#$e,t.#Fe=this.#Fe,t.#B=this.#B,t.#Ve=this.#Ve,t.#He=this.#He,t.#Ge=this.#Ge,t.#Ze=this.#Ze,t.#Ye=this.#Ye)}toJSON(){const t=super.toJSON();if(this.isTransformable&&(this.#$e.isZero||(t.position=this.#$e),this.#Fe.isZero||(t.anchor=this.#Fe),1===this.#B.x&&1===this.#B.y||(t.scale=this.#B),this.#Ve&&(t.skewAngle=this.#Ve),this.#He&&(t.skewAxis=this.#He),this.#Ge&&(t.rotate=this.#Ge),0!==this.#Ze)){t.orientation=this.#Ze;const e=this.autoOrientAngle;e%360!=0&&(t.autoOrientAngle=e)}return t}applyJSON(t){this.isTransformable&&(this.#$e=t.position??ce.ZERO,this.#Fe=t.anchor??ce.ZERO,this.#B=t.scale??ce.UNIT,this.#Ve=t.skewAngle||0,this.#He=t.skewAxis||0,this.#Ge=t.rotate||0,this.#Ze=t.orientation??0),super.applyJSON(t)}get position(){return this.#$e}set position(t){t instanceof Di&&(t=t.point),this.isTransformable&&(this.#$e=t,this.invalidateLocalMatrix(!1))}get anchor(){return this.#Fe}set anchor(t){this.isTransformable&&(this.#Fe=t,this.invalidateLocalMatrix(!1))}get scale(){return this.#B}set scale(t){this.isTransformable&&(this.#B=t,this.invalidateLocalMatrix(!1))}get skewAngle(){return this.#Ve}set skewAngle(t){this.isTransformable&&(this.#Ve=t,this.invalidateLocalMatrix(!1))}get skewAxis(){return this.#He}set skewAxis(t){this.isTransformable&&(this.#He=t,this.invalidateLocalMatrix(!1))}get rotate(){return this.#Ge}set rotate(t){this.isTransformable&&(this.#Ge=t,this.invalidateLocalMatrix(!1))}get orientation(){return this.#Ze}set orientation(t){this.#Ze!==t&&this.isTransformable&&(this.#Ze=t,this.invalidateLocalMatrix(!1))}get autoOrientAngle(){return 0===this.#Ze?0:-1===this.#Ze?180+this.#Ye:this.#Ye}set autoOrientAngle(t){this.setAutoOrientAngle(t)}setAutoOrientAngle(t){return!!this.isTransformable&&(t%=360,this.#Ye!==t&&(this.#Ye=t,0!==this.#Ze&&this.invalidateLocalMatrix(!1),!0))}get totalRotate(){return this.#Ge+this.autoOrientAngle}computeLocalMatrix(){return(new hi).translate(this.#$e.x,this.#$e.y).rotate(this.totalRotate).skewAxis(this.#Ve,this.#He).scale(this.#B.x,this.#B.y).translate(-this.#Fe.x,-this.#Fe.y)}#Qe(){let t=!1;return this.#$e.isZero||(this.#$e=ce.ZERO,t=!0),this.#Ge!==-this.autoOrientAngle&&(this.#Ge=-this.autoOrientAngle),0!==this.#He?(this.#He=0,0!==this.#Ve&&(t=!0)):0!==this.#Ve&&(this.#Ve=0,t=!0),1===this.#B.x&&1===this.#B.y||(this.#B=ce.UNIT,t=!0),this.#Fe.isZero||(this.#Fe=ce.ZERO,t=!0),t}#Je(t,e){if(!t||t.isIdentity)return!(!e||!this.#Qe()||(this.invalidateLocalMatrix(),0));const i=e?t:t.clone().multiply(this.localMatrix),{translate:n,rotate:s,scale:r,skew:o}=i.decompose(),a=i.transformInversePoint(n.sub(this.#$e).negate(),!1);return this.#Ge=s-this.autoOrientAngle,this.#Ve=o,this.#He=0,this.#B=r,this.#Fe=a,this.invalidateLocalMatrix(),!0}absorbMatrix(t){return!!this.isTransformable&&this.#Je(t,!1)}setTransformMatrix(t){return!(!this.isTransformable||this.localMatrix.equals(t))&&this.#Je(t,!0)}get forwardsMatrixIncorporation(){return this.supportsChildren}incorporateMatrix(t,e,i=!0){if(!this.isTransformable){if(!this.hasChildren)return!1;let n=!1;for(const i of this.children())i.incorporateMatrix(t,e,!1)&&(n=!0);return!!n&&(i?this.invalidate(!0):(this.invalidateBounds(),this.invalidateGraphics(),this.invalidateGlobalMatrix(!0)),!0)}return this.localMatrix.isIdentity||(t=t?t.clone().multiply(this.localMatrix):this.localMatrix.clone()),!!e(this,t,e)&&(i?(this.invalidateLocalMatrix(!1),this.parent?.invalidate(!0)):(this.invalidateLocalMatrix(!1),this.invalidateGlobalMatrix(!0)),!0)}get isResizable(){return!1}localResize(t,e){return null}pictureBoundsContainPoint(t){const e=this.globalMatrix;return e&&!e.isIdentity&&(t=e.inversePoint(t.x,t.y)),this.pictureBounds.contains(t.x,t.y)}getElementAt(t,e){if(!this.isClickable(e?.wireframe)||!this.pictureBoundsContainPoint(t))return null;if(!this.supportsChildren)return this;if(!this.hasChildren)return null;let i;for(const n of this.children(!0))if(i=n.getElementAt(t,e))return e.seeThrough||hh(i)?i:this;return null}}class Bh extends Rh{#qe=null;#Ke=null;#Xe=1;#ti=1;#ei=0;#ii=void 0;#ni=void 0;dispose(){super.dispose(),this.#ii?.delete(),this.#ni?.delete(),this.#ii=this.#ni=null,this.#Ke?.dispose(),this.#qe=this.#Ke=null}toJSON(){const t=super.toJSON();return t.fill=this.#qe,1!==this.#Xe&&(t.fillOpacity=this.#Xe),t.stroke=this.#Ke,1!==this.#ti&&(t.strokeOpacity=this.#ti),0!==this.#ei&&(t.paintOrder=this.#ei),t}applyJSON(t){this.#qe=t.fill||null,this.#Xe=t.fillOpacity??1,this.#Ke=t.stroke||null,this.#ti=t.strokeOpacity??1,this.#ei=t.paintOrder??0,super.applyJSON(t)}cloneProperties(t){super.cloneProperties(t),t.#qe=this.#qe?this.#qe.clone():null,t.#Xe=this.#Xe,t.#ei=this.#ei,t.#Ke=this.#Ke?this.#Ke.clone():null,t.#ti=this.#ti,t.#ni=this.#ni?this.#ni.clone():this.#ni,t.#ii=this.#ii?this.#ii.clone():this.#ii}get paintOrder(){return this.#ei}set paintOrder(t){this.#ei=t,this.invalidate(!1)}get fill(){return this.#qe??=gi.BLACK}set fill(t){this.#qe=t,this.invalidate(!1)}get fillOpacity(){return this.#Xe}set fillOpacity(t){this.#Xe=t,this.invalidate(!1)}getDefaultPen(){return new Ti}get stroke(){return this.#Ke??=this.getDefaultPen()}set stroke(t){this.#Ke!==t&&(this.#Ke?.dispose(),this.#Ke=t),this.invalidateOutlinePath(),this.invalidate(!0)}get strokeBrush(){return this.stroke.brush}set strokeBrush(t){const e=this.isStrokeVisible;this.stroke.brush=t,this.invalidate(e!==this.isStrokeVisible)}get strokeOpacity(){return this.#ti}set strokeOpacity(t){const e=this.isStrokeVisible;this.#ti=t,this.invalidate(e!==this.isStrokeVisible)}get strokeLineWidth(){return this.stroke.width}set strokeLineWidth(t){this.stroke.width=t,this.invalidateOutlinePath(),this.invalidate(!0)}get strokeLineCap(){return this.stroke.lineCap}set strokeLineCap(t){const e=this.stroke;t!==e.lineCap&&(e.lineCap=t,this.invalidateOutlinePath(),this.invalidate(!0))}get strokeLineJoin(){return this.stroke.lineJoin}set strokeLineJoin(t){const e=this.stroke;t!==e.lineJoin&&(e.lineJoin=t,this.invalidateOutlinePath(),this.invalidate(!0))}get strokeMiterLimit(){return this.stroke.miterLimit}set strokeMiterLimit(t){t=n(t,1,Number.POSITIVE_INFINITY);const e=this.stroke;t!==e.miterLimit&&(e.miterLimit=t,this.invalidateOutlinePath(),this.invalidate(!0))}get strokeDashArray(){return this.stroke.dashes}set strokeDashArray(t){const e=this.stroke;t!==e.dashes&&(e.dashes=t,this.invalidateOutlinePath(),this.invalidate(!1))}get strokeDashOffset(){return this.stroke.offset}set strokeDashOffset(t){const e=this.stroke;t!==e.offset&&(e.offset=t,e.dashes.length>0&&(this.invalidateOutlinePath(),this.invalidate(!1)))}get strokeDashPathLength(){return this.stroke.dashPathLength}set strokeDashPathLength(t){t??=0;const e=this.stroke;t!==e.dashPathLength&&(e.dashPathLength=t,e.dashes.length>0&&(this.invalidateOutlinePath(),this.invalidate(!1)))}get strokeAlign(){return this.stroke.align}set strokeAlign(t){const e=this.stroke;t!==e.align&&(e.align=t,this.invalidateOutlinePath(),this.invalidate(!0))}get strokeEffect(){return this.stroke.effect}set strokeEffect(t){const e=this.stroke;t!==e.effect&&(e.effect=t,this.invalidateOutlinePath(),this.invalidate(!0))}get strokeProfile(){return this.stroke.profile}set strokeProfile(t){const e=this.stroke;t!==e.profile&&(e.profile=t,this.invalidateOutlinePath(),this.invalidate(!0))}computePictureBounds(){return this.getStrokeBounds(this.localBounds)}getStrokeBounds(t){return this.isStrokeVisible?this.stroke.getInflatedBounds(t):t}drawOnPicture(t,e){let i,n;return 0===this.#ei?(i=this.drawFill(t),n=this.drawStroke(t)):(n=this.drawStroke(t),i=this.drawFill(t)),n||i?e:Ve.ZERO}drawOnWireframe(t){const e=this.localPath;e&&!e.isEmpty&&t.drawWireframePath(e)}drawFill(t){if(this.isFillVisible){const e=this.localPath;return!(!e||e.isEmpty||(t.drawPathDirect(e,Mr.apply(this.fill,this.#Xe)),0))}return!1}drawStroke(t){if(this.isStrokeVisible){const e=this.stroke;if(e.isUniform){const i=this.localPath;return!(!i||i.isEmpty||(t.drawPathDirect(i,Mr.apply(e,this.#ti)),0))}{const i=this.outlinePath;return!(!i||i.isEmpty||(t.drawPathDirect(i,Mr.apply(e.brush,this.#ti)),0))}}return!1}get globalPath(){if(void 0===this.#ni){const t=this.globalMatrix;this.#ni=this.localPath?.copy()||null,this.#ni&&!t.isIdentity&&this.#ni.transform(t)}return this.#ni}get pathLength(){return this.localPath?.length||0}get outlinePath(){return void 0===this.#ii&&(this.#ii=this.stroke.outlinePath(this.localPath)),this.#ii}computeGlobalBoundsPoints(){return super.computeGlobalBoundsPoints()}invalidateOutlinePath(){this.#ii?.delete(),this.#ii=void 0}invalidateGlobalPath(){this.#ni?.delete(),this.#ni=void 0}invalidateGlobalMatrix(t){this.invalidateGlobalPath(),super.invalidateGlobalMatrix(t)}invalidateBounds(){this.invalidateGlobalPath(),super.invalidateBounds()}isGlobalPointOnPaintedStroke(t){return this.isLocalPointOnPaintedStroke(this.getLocalPoint(t))}isLocalPointOnPaintedStroke(t){if(0===this.#ti||!this.stroke.isVisible)return!1;const e=this.outlinePath;return null!=e&&!e.isEmpty&&e.contains(t.x,t.y)}isGlobalPointOnPaintedFill(t){return this.isLocalPointOnPaintedFill(this.getLocalPoint(t))}isLocalPointOnPaintedFill(t){if(0===this.#Xe||!this.fill.isVisible)return!1;const e=this.localPath;return null==e||e.isEmpty?null:e.contains(t.x,t.y)}get isVisible(){return this.opacity>0&&(this.isFillVisible||this.isStrokeVisible)}get isInvisibleDrawing(){return super.isInvisibleDrawing||!(this.isFillVisible||this.isStrokeVisible)}get isStrokeVisible(){return this.strokeOpacity>0&&this.stroke.isVisible}get isFillVisible(){return this.fillOpacity>0&&this.fill.isVisible}intersectsRect(t){return!(this.isInvisible||this.locked||!this.isFillVisible&&!this.isStrokeVisible)&&!!this.globalBounds.intersectsRect(t)&&this.globalPath?.intersectsRect(t,!1)}getElementAt(t,e){if(this.locked||(e.wireframe?this.hidden||!this.visible:this.isInvisible))return null;if(null!=e.filter&&!e.filter(this,t))return null;if(e.boundsOnly&&this.localBoundsContainPoint(t))return this.isFillVisible||this.isStrokeVisible?this:null;if(t=this.getLocalPoint(t),!this.pictureBounds.contains(t.x,t.y))return null;if(e.wireframe)return this.isLocalPointOnPaintedFill(t)?this:null;const i=this.localBounds;return 0===i.width?0===i.height?null:this.isLocalPointOnPaintedStroke(t)?this:null:0===i.height?this.isLocalPointOnPaintedStroke(t)?this:null:this.isLocalPointOnPaintedFill(t)||this.isLocalPointOnPaintedStroke(t)?this:null}}class Uh extends Bh{constructor(t,e){super(e),this._shape=t}get forwardsMatrixIncorporation(){return!0}get shape(){return this._shape}set shape(t){t!==this._shape&&(this._shape=t,this.invalidateShape())}setShapeMatrix(t){return!!this._shape.setMatrix(t,!0)&&(this.invalidateShape(),!0)}get fillRule(){return this._shape.fillRule}set fillRule(t){const e=this._shape;e.fillRule!==t&&(e.fillRule=t,this.invalidateShape())}applyJSON(t){this._shape=t.shape,t.fillRule&&(this._shape.fillRule=t.fillRule),super.applyJSON(t)}toJSON(){const t=super.toJSON();return t.shape=this._shape,t}get isResizable(){return!0}get localPath(){return this._shape.path}get pathLength(){return this._shape.pathLength}get localBounds(){return this._shape.bounds}computeLocalBounds(){return this._shape.bounds}invalidateShape(){this.invalidateGlobalPath(),this.invalidateOutlinePath(),this.invalidate(!0)}dispose(){super.dispose(),this._shape?.dispose(),this._shape=null}cloneCurrent(){return new this.constructor(this._shape.clone())}}class $h{constructor(t,e,i,n){this.id=t,this.handler=i,this.groups=null!=n?Array.isArray(n)?n:[n]:null,"string"==typeof e?(this.getValue=t=>t[e],this.setValue=(t,n)=>!i.sameValue(n,t[e])&&(t[e]=n,!0)):(this.getValue=e[0],this.setValue=e[1])}sameValue(t,e){return this.handler.sameValue(this.getValue(t),e)}cloneValue(t){return this.handler.cloneValue(this.getValue(t))}}function Fh(t,e,i=0){return t+e-i}function Vh(t,e,i=ce.ZERO){return new ce(t.x+e.x-i.x,t.y+e.y-i.y)}function Hh(t,e,i){if(t.length!==e.length)return i;const n=[];for(let s=0,r=t.length;s<r;s++)n[s]=Vh(t[s],e[s],i[s]);return n}function Gh(t,e,i){return new Di(Vh(t.point,e.point,i.point),i.type,i.joint,i.handleIn?Vh(t.handleIn,e.handleIn,i.handleIn):null,i.handleOut?Vh(t.handleOut,e.handleOut,i.handleOut):null)}const Zh={interpolate:Cr,sameValue:fd,cloneValue:It,mix:Fh},Yh={interpolate:function(t,e,i=.5){return Math.round(t+i*(e-t))},sameValue:fd,cloneValue:It,mix:Fh},Qh={interpolate:Lr,sameValue:fd,cloneValue:It,mix:Fh},Jh={interpolate:Nr,sameValue:fd,cloneValue:It,mix:Fh},qh={interpolate:zr,sameValue:hd,cloneValue:It,mix:Vh},Kh={interpolate:function(t,e,i=.5){return[zr(t[0],e[0],i),zr(t[1],e[1],i)]},sameValue:dd,cloneValue:pd,mix:Hh},Xh={interpolate:function(t,e,i=.5){if(0===i||t.equals(e))return t;if(1===i)return e;const n=Ui(t,e,i);return new Di(new ce(n.x,n.y),0,0)},sameValue:function(t,e){return(t instanceof Di?t.point:t).equals(e instanceof Di?e.point:e)},cloneValue:gd,mix:function(t,e,i){return Vh(t instanceof Di?t.point:t,e instanceof Di?e.point:e,i instanceof Di?i.point:i)}},td={interpolate:function(t,e,i=.5){return 0===i||t.equals(e)?t:1===i?e:new le(Cr(t.x,e.x,i),Cr(t.y,e.y,i),i>=1?e.angle:t.angle)},sameValue:hd,cloneValue:gd},ed={interpolate:function(t,e,i=.5){if(t.length!==e.length)return jr(t,e,i).slice();const n=[],s=t.length;for(let r=0;r<s;r++)n.push(zr(t[r],e[r],i));return n},sameValue:dd,cloneValue:pd,mix:Hh},id={interpolate:function(t,e,i=.5){return i<=0?t:i>=1?e:new se(Pr(t.r,e.r,i),Pr(t.g,e.g,i),Pr(t.b,e.b,i),function(t,e,i=.5){return null==t&&(t=1),null==e&&(e=1),n(o(t+i*(e-t)),0,1)}(t.a,e.a,i))},sameValue:hd,cloneValue:It,mix:function(t,e){const i=t.a+e.a;return new se(Math.round((t.r*t.a+e.r*e.a)/i),Math.round((t.g*t.a+e.g*e.a)/i),Math.round((t.b*t.a+e.b*e.a)/i),i/2)}},nd={interpolate:function(t,e,i=.5){return 0===i?t:1===i?e:Tr.hasOwnProperty(t.type)&&Tr[t.type].hasOwnProperty(e.type)?Tr[t.type][e.type](t,e,i):jr(t,e,i)},sameValue:hd,cloneValue:It},sd={interpolate:jr,sameValue:fd,cloneValue:It},rd={interpolate:jr,sameValue:hd,cloneValue:It},od=sd,ad=sd,ld={interpolate:function(t,e,i=.5){if(0===i)return t.slice();if(1===i)return e.slice();if(t.length!==e.length)if(0===t.length)t=new Array(e.length).fill(0);else if(0===e.length)e=new Array(t.length).fill(0);else{const i=E(t.length,e.length);t=new Array(Math.trunc(i/t.length)).fill(t).flat(),e=new Array(Math.trunc(i/e.length)).fill(e).flat()}const n=[],s=t.length;for(let r=0;r<s;r++)n.push(Lr(t[r],e[r],i));return n},sameValue:function(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},cloneValue:pd},cd={interpolate:function(t,e,i=.5){if(0===i)return t.slice();if(1===i)return e.slice();if(t.length!==e.length)return jr(t,e,i).slice();const n=t.length,s=[];for(let r=0;r<n;r++)s.push($r(t[r],e[r],i));return s},sameValue:dd,cloneValue:function(t){return t.map(gd)},mix:function(t,e,i){if(t.length!==e.length)return i;const n=[];for(let s=0,r=t.length;s<r;s++)n[s]=Gh(t[s],e[s],i[s]);return n}},ud={interpolate:function(t,e,i=.5){if(0===i)return t.clone();if(1===i)return e.clone();let n=t.value,s=e.value;if("number"==typeof t.value){if("number"==typeof e.value)return new ys(Lr(t.value,e.value,i));n=[t.value,t.value,t.value,t.value]}else"number"==typeof e.value&&(s=[e.value,e.value,e.value,e.value]);const r=[];for(let t=0;t<4;t++)r.push(Lr(n[t],s[t],i));return new ys(r)},sameValue:hd,cloneValue:gd};function hd(t,e){return t.equals(e)}function dd(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].equals(e[i]))return!1;return!0}function fd(t,e){return t===e}function pd(t){return t.slice()}function gd(t){return t.clone()}const md=new Map;function vd(t,e=!0){if(md.has(t)||md.set(t,new Map),e){const e=md.get(t),i=Object.getPrototypeOf(t);if(i&&md.has(i))for(const t of md.get(i).values())t instanceof $h&&e.set(t.id,t)}}function yd(t,...e){vd(t,!1);const i=md.get(t);for(const t of e)t instanceof $h&&i.set(t.id,t)}function xd(t,e){const i=md.get(t);if(i)for(const t of Array.from(i.values()))e(t)&&i.delete(t.id)}function bd(t,e){return md.get(t?.constructor)?.has(e.id)}function wd(t){return md.get(t?.constructor)?.values()}const Md=Symbol();let Sd=0;const kd=Lt((()=>{Sd&&clearTimeout(Sd),Sd=setTimeout(Id,60)})),_d=new Set;function Id(){Sd=0,_d.size&&(Zr(Md,_d),_d.clear())}function Cd(t){if(Array.isArray(t))for(const e of t)_d.add(e);else _d.add(t);kd()}let Ld=(t,e,i)=>e.setValue(t,i);function Nd(t,e,i){return!!bd(t,e)&&jd(t,e,i)}function jd(t,e,i){return!!Ld(t,e,i)&&(e.groups&&Cd(e.groups),!0)}function zd(t,e,i){let n=!1;for(const s of t)bd(s,e)&&Ld(s,e,i(s))&&(n=!0);return n&&e.groups&&Cd(e.groups),n}const Pd=new $h("node.compositing.opacity","opacity",Jh,5),Td=new $h("node.compositing.blend","blend",sd,5),Ad=new $h("node.compositing.isolate","isolate",od,5);var Dd=Object.freeze({__proto__:null,blend:Td,isolate:Ad,opacity:Pd});const Ed=new $h("node.transform.position","position",Xh,1),Od=new $h("node.transform.anchor","anchor",qh,1),Wd=new $h("node.transform.scale","scale",qh,1),Rd=new $h("node.transform.rotate","rotate",Zh,1),Bd=new $h("node.transform.skew-angle","skewAngle",Zh,1),Ud=new $h("node.transform.skew-axis","skewAxis",Zh,1),$d=new $h("node.transform.orientation","orientation",sd,1);var Fd=Object.freeze({__proto__:null,anchor:Od,orientation:$d,position:Ed,rotate:Rd,scale:Wd,skewAngle:Bd,skewAxis:Ud});const Vd=new $h("node.sizable.pin","pin",rd,4),Hd=new $h("shape.path.nodes","nodes",cd,4),Gd=new $h("vector.fill.rule","fillRule",sd,4),Zd=new $h("node.layer.z-order","zOrder",Yh,4),Yd=new $h("node.motion.distance","travel",Zh);new $h("node.motion.orientation","orientation",sd,1);const Qd=new $h("node.motion.oriented-point","position",td,1),Jd=new $h("vector.fill.opacity","fillOpacity",Jh,2),qd=new $h("vector.fill.brush","fill",nd,2);var Kd=Object.freeze({__proto__:null,brush:qd,opacity:Jd,rule:Gd});const Xd=new $h("vector.stroke.opacity","strokeOpacity",Jh,3),tf=new $h("vector.stroke.brush","strokeBrush",nd,3),ef=new $h("vector.stroke.line-width","strokeLineWidth",Qh,3),nf=new $h("vector.stroke.line-join","strokeLineJoin",sd,3),sf=new $h("vector.stroke.line-cap","strokeLineCap",sd,3),rf=new $h("vector.stroke.miter-limit","strokeMiterLimit",Qh,3),of=new $h("vector.stroke.dash-array","strokeDashArray",ld,3),af=new $h("vector.stroke.dash-offset","strokeDashOffset",Zh,3),lf=new $h("vector.stroke.dash-path-length","strokeDashPathLength",od,3),cf=new $h("vector.stroke.paint-order","paintOrder",sd,3),uf=new $h("vector.stroke.align","strokeAlign",sd,3),hf=new $h("vector.stroke.profile","strokeProfile",sd,3),df=new $h("vector.stroke.effect","strokeEffect",sd,3);var ff=Object.freeze({__proto__:null,align:uf,brush:tf,dashArray:of,dashOffset:af,dashPathLength:lf,effect:df,lineCap:sf,lineJoin:nf,lineWidth:ef,miterLimit:rf,opacity:Xd,paintOrder:cf,profile:hf}),pf=Object.freeze({__proto__:null,fill:Kd,stroke:ff});const gf=new $h("paragraph.style.width","width",Qh,4),mf=new $h("paragraph.style.height","height",Qh,4),vf=new $h("paragraph.style.auto-width","autoWidth",od,4),yf=new $h("paragraph.style.auto-height","autoHeight",od,4),xf=new $h("paragraph.style.align","align",sd,4),bf=new $h("paragraph.style.valign","valign",sd,4),wf=new $h("paragraph.style.direction","direction",sd,4);var Mf=Object.freeze({__proto__:null,align:xf,autoHeight:yf,autoWidth:vf,direction:wf,height:mf,valign:bf,width:gf});const Sf=new $h("text.range.start","rangeStart",Jh,7),kf=new $h("text.range.end","rangeEnd",Jh,7),_f=new $h("text.range.length","rangeLength",Jh,7),If=new $h("text.range.type","rangeType",sd,7);var Cf=Object.freeze({__proto__:null,end:kf,length:_f,start:Sf,type:If});const Lf=new $h("text.source.content","text",ad,7),Nf=new $h("text.style.font-id","fontId",ad,7),jf=new $h("text.style.font-size","fontSize",Qh,7),zf=new $h("text.style.letter-spacing","letterSpacing",Qh,7),Pf=new $h("text.style.word-spacing","wordSpacing",Qh,7),Tf=new $h("text.style.line-height","lineHeight",Qh,7),Af=new $h("text.style.baseline-shift","baselineShift",Zh,7);var Df=Object.freeze({__proto__:null,baselineShift:Af,fontId:Nf,fontSize:jf,letterSpacing:zf,lineHeight:Tf,wordSpacing:Pf});const Ef=new $h("element.reference.id","reference",ad,4),Of=new $h("element.reference.seek","seek",Zh,4);var Wf=Object.freeze({__proto__:null,id:Ef,seek:Of});const Rf=new $h("element.clip-group.is-alpha-mask","isAlphaMask",od,4);var Bf=Object.freeze({__proto__:null,isAlphaMask:Rf}),Uf=Object.freeze({__proto__:null,nodes:Hd,rule:Gd});const $f=new $h("element.rect.width","width",Qh,4),Ff=new $h("element.rect.height","height",Qh,4),Vf=new $h("element.rect.radius","radius",ud,4);var Hf=Object.freeze({__proto__:null,height:Ff,pin:Vd,radius:Vf,width:$f});const Gf=new $h("element.ellipse.width","width",Qh,4),Zf=new $h("element.ellipse.height","height",Qh,4);var Yf=Object.freeze({__proto__:null,height:Zf,pin:Vd,width:Gf});const Qf=new $h("element.image.id","imageId",ad,4),Jf=new $h("element.image.width","width",Qh,4),qf=new $h("element.image.height","height",Qh,4);var Kf=Object.freeze({__proto__:null,height:qf,id:Qf,pin:Vd,width:Jf});const Xf=new $h("element.line.points","points",Kh,4);var tp=Object.freeze({__proto__:null,points:Xf});const ep=new $h("element.poly.points","points",ed,4),ip=new $h("element.poly.closed","isClosed",od,4);var np=Object.freeze({__proto__:null,closed:ip,points:ep}),sp=Object.freeze({__proto__:null,nodes:Hd});const rp=new $h("element.regular-polygon.sides","sides",Qh,4),op=new $h("element.regular-polygon.radius","radius",Qh,4),ap=new $h("element.regular-polygon.corner-radius","cornerRadius",Zh,4),lp=new $h("element.regular-polygon.angle","angle",Zh,4);var cp=Object.freeze({__proto__:null,angle:lp,cornerRadius:ap,pin:Vd,radius:op,sides:rp});const up=new $h("element.star.sides","sides",Qh,4),hp=new $h("element.star.outer-radius","outerRadius",Qh,4),dp=new $h("element.star.inner-radius","innerRadius",Qh,4),fp=new $h("element.star.outer-corner-radius","outerCornerRadius",Zh,4),pp=new $h("element.star.inner-corner-radius","innerCornerRadius",Zh,4),gp=new $h("element.star.outer-rotate","outerRotate",Zh,4),mp=new $h("element.star.inner-rotate","innerRotate",Zh,4),vp=new $h("element.star.angle","angle",Zh,4);var yp=Object.freeze({__proto__:null,angle:vp,innerCornerRadius:pp,innerRadius:dp,innerRotate:mp,outerCornerRadius:fp,outerRadius:hp,outerRotate:gp,pin:Vd,sides:up});const xp=new $h("element.symbol.pan","pan",qh,4),bp=new $h("element.symbol.zoom","zoom",Qh,4),wp=new $h("element.symbol.rotation","rotation",Zh,4),Mp=new $h("element.symbol.align","align",qh,4),Sp=new $h("element.symbol.width","width",Qh,4),kp=new $h("element.symbol.height","height",Qh,4);var _p=Object.freeze({__proto__:null,align:Mp,height:kp,pan:xp,pin:Vd,rotation:wp,width:Sp,zoom:bp}),Ip=Object.freeze({__proto__:null,clipGroup:Bf,clipPath:Uf,ellipse:Yf,image:Kf,line:tp,path:sp,poly:np,rect:Hf,reference:Wf,regularPolygon:cp,star:yp,symbol:_p});const Cp=new $h("filter.blur.radius","radius",Qh,6);var Lp=Object.freeze({__proto__:null,radius:Cp});const Np=new $h("filter.color-adjust.brightness","brightness",Qh,6),jp=new $h("filter.color-adjust.contrast","contrast",Qh,6),zp=new $h("filter.color-adjust.saturate","saturate",Qh,6),Pp=new $h("filter.color-adjust.hue-rotate","hueRotate",Zh,6),Tp=new $h("filter.color-adjust.invert","invert",Qh,6),Ap=new $h("filter.color-adjust.grayscale","grayscale",Qh,6),Dp=new $h("filter.color-adjust.sepia","sepia",Qh,6);var Ep=Object.freeze({__proto__:null,brightness:Np,contrast:jp,grayscale:Ap,hueRotate:Pp,invert:Tp,saturate:zp,sepia:Dp});const Op=new $h("filter.drop-shadow.blur","blur",Qh,6),Wp=new $h("filter.drop-shadow.offset","offset",qh,6),Rp=new $h("filter.drop-shadow.color","color",id,6);var Bp=Object.freeze({__proto__:null,blur:Op,color:Rp,offset:Wp});const Up=[1,2,3,4,5,6,7],$p=new Ve(0,0,100,100);function Fp(t,e,i){return i&&e instanceof _i?e.toRelative(i.localBounds).toAbsolute($p):t.handler.cloneValue(e)}class Vp{constructor(){this.values=new Map([[Pd,1],[Td,11],[Jd,1],[qd,gi.fromColor("#bababa")],[Gd,1],[Xd,1],[tf,gi.BLACK],[sf,0],[nf,0],[rf,4],[ef,1],[of,[]],[af,0],[lf,0],[cf,0],[uf,0],[df,null],[Nf,"SourceSans3Roman-Regular"],[jf,24],[Tf,1.2],[zf,0],[Pf,0],[Af,0],[xf,0],[bf,0],[Vf,new ys(0)],[rp,5],[ap,0],[up,5],[mp,0],[gp,0],[pp,0],[fp,0]]),this.customDecorators=new Map([]),this.customUpdaters=new Map([[qd,Fp],[tf,Fp]]),this.starRadiusRatio=.4}dispose(){this.values.clear()}hasValue(t){return this.values.has(t)}getValue(t){return this.values.get(t)}setValue(t,e){return!!this.values.has(t)&&(this.customUpdaters.has(t)&&(e=this.customUpdaters.get(t)(t,e)),this.values.set(t,e),!0)}update(t){if(!t)return;const e=this.customUpdaters;for(const i of this.values.keys())if(bd(t,i)){const n=i.getValue(t);if(void 0!==n){let s;s=e.has(i)?e.get(i)(i,n,t):i.handler.cloneValue(n),this.values.set(i,s)}}this.updateCustomValues(t)}decorate(t){if(!t)return;const e=this.customDecorators;for(const[i,n]of this.values.entries())bd(t,i)&&(e.has(i)?e.get(i)(t,i,n):i.setValue(t,i.handler.cloneValue(n)))}decorateParagraphStyle(t){return t.align=this.paragraphAlign,t.valign=this.paragraphVAlign,t}decorateTextStyle(t,e=!0){t.fillOpacity=this.fillOpacity,t.fill=this.#si(this.fill),t.strokeOpacity=this.strokeOpacity,t.strokeBrush=this.#si(this.strokeBrush),t.strokeLineWidth=this.strokeLineWidth,t.strokeMiterLimit=this.strokeMiterLimit,t.strokeLineCap=this.strokeLineCap,t.strokeLineJoin=this.strokeLineJoin,t.paintOrder=this.paintOrder;const i=!t.fill.isVisible;return i||0===t.fillOpacity?0!==t.strokeOpacity&&t.strokeBrush.isVisible?(t.strokeLineWidth<=0||t.strokeLineWidth>1)&&(t.strokeLineWidth=1):(i&&(t.fill=gi.BLACK),0===t.fillOpacity&&(t.fillOpacity=1),t.strokeLineWidth=0):t.strokeLineWidth=0,t.strokeDashOffset=0,t.strokeDashArray=[],t.fontId=this.fontId,t.fontSize=this.fontSize,t.letterSpacing=this.letterSpacing,t.wordSpacing=this.wordSpacing,t.lineHeight=this.lineHeight,t}#si(t){return t instanceof _i?gi.BLACK:t}updateCustomValues(t){if("start"===t.type){const e=t;this.starRadiusRatio=e.innerRadius/e.outerRadius,(!i(this.starRadiusRatio)||this.starRadiusRatio<=0)&&(this.starRadiusRatio=.4)}}get opacity(){return this.values.get(Pd)}set opacity(t){this.setValue(Pd,t)}get blend(){return this.values.get(Td)}set blend(t){this.setValue(Td,t)}get isolate(){}get fill(){return this.values.get(qd)}set fill(t){this.setValue(qd,t)}get fillOpacity(){return this.values.get(Jd)}set fillOpacity(t){this.setValue(Jd,t)}get fillRule(){return this.values.get(Gd)}set fillRule(t){this.setValue(Gd,t)}get strokeBrush(){return this.values.get(tf)}set strokeBrush(t){this.setValue(tf,t)}get strokeOpacity(){return this.values.get(Xd)}set strokeOpacity(t){this.setValue(Xd,t)}get strokeLineCap(){return this.values.get(sf)}set strokeLineCap(t){this.setValue(sf,t)}get strokeLineJoin(){return this.values.get(nf)}set strokeLineJoin(t){this.setValue(nf,t)}get strokeMiterLimit(){return this.values.get(rf)}set strokeMiterLimit(t){this.setValue(rf,t)}get strokeLineWidth(){return this.values.get(ef)}set strokeLineWidth(t){this.setValue(ef,t)}get strokeDashOffset(){return this.values.get(af)}set strokeDashOffset(t){this.setValue(af,t)}get strokeDashArray(){return this.values.get(of)}set strokeDashArray(t){this.setValue(of,t)}get strokeDashPathLength(){return this.values.get(lf)}set strokeDashPathLength(t){this.setValue(lf,t)}get paintOrder(){return this.values.get(cf)}set paintOrder(t){this.setValue(cf,t)}get strokeAlign(){return this.values.get(uf)}set strokeAlign(t){this.setValue(uf,t)}get strokeEffect(){return this.values.get(df)}set strokeEffect(t){this.setValue(df,t)}copyFillToStroke(t=!1){this.strokeBrush=this.fill,t||(this.strokeOpacity=this.fillOpacity)}copyStrokeToFill(t=!1){this.fill=this.strokeBrush,t||(this.fillOpacity=this.strokeOpacity)}swapStrokeFill(t=!1){let e=this.strokeBrush;this.strokeBrush=this.fill,this.fill=e,t||(e=this.strokeOpacity,this.strokeOpacity=this.fillOpacity,this.fillOpacity=e)}changeStrokeBrushType(t){return t!==this.strokeBrush.type&&(this.strokeBrush=ji(this.strokeBrush,t,this.brushBounds),!0)}changeFillBrushType(t){return t!==this.fill.type&&(this.fill=ji(this.fill,t,this.brushBounds),!0)}get brushBounds(){return $p}get fontFeatures(){return 0}get fontId(){return this.values.get(Nf)}set fontId(t){this.setValue(Nf,t)}get fontSize(){return this.values.get(jf)}set fontSize(t){this.setValue(jf,t)}get lineHeight(){return this.values.get(Tf)}set lineHeight(t){this.setValue(Tf,t)}get letterSpacing(){return this.values.get(zf)}set letterSpacing(t){this.setValue(zf,t)}get wordSpacing(){return this.values.get(Pf)}set wordSpacing(t){this.setValue(Pf,t)}get baselineShift(){return this.values.get(Af)}set baselineShift(t){this.setValue(Af,t)}get paragraphAlign(){return this.values.get(xf)}set paragraphAlign(t){this.setValue(xf,t)}get paragraphVAlign(){return this.values.get(bf)}set paragraphVAlign(t){this.setValue(bf,t)}get rectRadius(){return this.values.get(Vf)}set rectRadius(t){this.setValue(Vf,t)}setRectRadiusType(t){const e=this.rectRadius;t?e.isSimple&&(this.rectRadius=e.split()):e.isSimple||(this.rectRadius=e.join())}get regularPolygonSides(){return this.values.get(rp)}set regularPolygonSides(t){this.setValue(rp,t)}get regularPolygonCornerRadius(){return this.values.get(ap)}set regularPolygonCornerRadius(t){this.setValue(ap,t)}get starSides(){return this.values.get(up)}set starSides(t){this.setValue(up,t)}get starInnerRotate(){return this.values.get(mp)}set starInnerRotate(t){this.setValue(mp,t)}get starOuterRotate(){return this.values.get(gp)}set starOuterRotate(t){this.setValue(gp,t)}get starInnerCornerRadius(){return this.values.get(pp)}set starInnerCornerRadius(t){this.setValue(pp,t)}get starOuterCornerRadius(){return this.values.get(fp)}set starOuterCornerRadius(t){this.setValue(fp,t)}}const Hp=1e-4;function*Gp(t,e,i,n,s){(i.x||i.y)&&(e=e.clone().translate(i.x?t.localBounds.width:0,i.y?t.localBounds.height:0)),(e.tx||e.ty)&&(yield[Od,t.anchor.shifted(-e.tx,-e.ty)]);const r=t.localBounds.transform(e,!1);yield[n,r.width||Hp],yield[s,r.height||Hp]}class Zp extends Uh{get type(){return"ellipse"}get width(){return this._shape.width}set width(t){(t=n(t,0,Number.POSITIVE_INFINITY))!==this._shape.width&&(this._shape.width=t,this.invalidateShape())}get height(){return this._shape.height}set height(t){(t=n(t,0,Number.POSITIVE_INFINITY))!==this._shape.height&&(this._shape.height=t,this.invalidateShape())}get pin(){return this._shape.pin}set pin(t){this._shape.pin.equals(t)||(this._shape.pin=t,this.invalidateShape())}applyJSON(t){super.applyJSON(t)}*localResize(t){yield*function*(t,e,i,n){(e.tx||e.ty)&&(yield[Od,t.anchor.shifted(-e.tx,-e.ty)]);const s=new Ve(-t.width/2,-t.height/2,t.width,t.height).transform(e,!1);yield[i,s.width||Hp],yield[n,s.height||Hp]}(this,t,Gf,Zf)}}var Yp;class Qp extends Rh{get supportsChildren(){return!0}get type(){return"group"}computeLocalBounds(){return this.hasChildren?Ve.fromIterablePoints(this.#ri()):Ve.ZERO}*#ri(){for(const t of this.children()){if(t.isInvisible)continue;const e=t.localBounds;0===e.width&&0===e.height||(yield*e.cornerPoints(t.localMatrix))}}computeGlobalBounds(){return this.hasChildren?super.computeGlobalBounds():Ze.ZERO}computeLocalBoundsPoints(){if(!this.hasChildren)return st;const t=Fr(),e=ti([]);return Ke(this.globalMatrix.value,e),this.#oi(this,t,e),Hr(t,st)}#oi(t,e,i){for(const n of t.children())if(n instanceof Yp)this.#oi(n,e,i);else for(let t of n.globalBoundsPoints)Vr(e,oi(i,t.x,t.y))}computeGlobalBoundsPoints(){if(!this.hasChildren)return st;const t=Fr();return this.#ai(this,t),Hr(t,st)}#ai(t,e){for(const i of t.children())if(i instanceof Yp)t.#ai(i,e);else for(let t of i.globalBoundsPoints)Vr(e,t)}invalidateGlobalMatrix(t){this.invalidateBounds(),super.invalidateGlobalMatrix(t)}}Yp=Qp;class Jp extends Uh{get type(){return"path"}get path(){return this._shape}get nodes(){return this._shape.nodes}set nodes(t){this._shape.setNodes(t),this.invalidateShape()}*localResize(t){yield[Hd,zn(this._shape.nodes,t)]}}class qp extends Uh{get type(){return"poly"}get points(){return this._shape.points}set points(t){t!==this._shape.points&&(this._shape.points=t,this.invalidateShape())}get isClosed(){return this._shape.isClosed}set isClosed(t){t!==this._shape.isClosed&&(this._shape.isClosed=t,this.invalidateShape())}intersectsRect(t){if(this.isInvisible||this.locked||!this.isFillVisible&&!this.isStrokeVisible)return!1;let e=this.points;if(0===e.length)return!1;const i=this.globalMatrix;return i&&!i.isIdentity&&(e=i.transformPointArray(e)),t.intersectsPolyline(e,this.isClosed,!0)}*localResize(t){yield[ep,t.transformPointArray(this._shape.points)]}}class Kp extends Uh{get type(){return"rect"}get radius(){return this._shape.radius}set radius(t){this._shape.radius!==t&&(this._shape.radius=t,this.invalidateShape())}get width(){return this._shape.width}set width(t){(t=n(t,0,Number.POSITIVE_INFINITY))!==this._shape.width&&(this._shape.width=t,this.invalidateShape())}get height(){return this._shape.height}set height(t){(t=n(t,0,Number.POSITIVE_INFINITY))!==this._shape.height&&(this._shape.height=t,this.invalidateShape())}get pin(){return this._shape.pin}set pin(t){this._shape.pin.equals(t)||(this._shape.pin=t,this.invalidateShape())}applyJSON(t){super.applyJSON(t)}intersectsRect(t){if(this.isInvisible||this.locked||!this.isFillVisible&&!this.isStrokeVisible)return!1;if(!this.radius.isZero)return this.globalPath?.intersectsRect(t,!0);const{x:e,y:i,width:n,height:s}=this._shape;let r=[{x:e,y:i},{x:e+n,y:i},{x:e+n,y:i+s},{x:e,y:i+s}];const o=this.globalMatrix;return o&&!o.isIdentity&&(r=o.transformPointArray(r)),t.intersectsPolyline(r,!0,!0)}*localResize(t,e){yield*Gp(this,t,e,$f,Ff)}}class Xp extends Uh{get type(){return"regular-polygon"}get sides(){return this._shape.sides}set sides(t){(t=n(t,3,Number.POSITIVE_INFINITY))!==this._shape.sides&&(this._shape.sides=t,this.invalidateShape())}get radius(){return this._shape.radius}set radius(t){t!==this._shape.radius&&(this._shape.radius=t,this.invalidateShape())}get cornerRadius(){return this._shape.cornerRadius}set cornerRadius(t){t!==this._shape.cornerRadius&&(this._shape.cornerRadius=t,this.invalidateShape())}get angle(){return this._shape.angle}set angle(t){t!==this._shape.angle&&(this._shape.angle=t,this.invalidateShape())}get pin(){return this._shape.pin}set pin(t){this._shape.pin.equals(t)||(this._shape.pin=t,this.invalidateShape())}applyJSON(t){super.applyJSON(t)}*localResize(t,e){const i=this.radius;(e.x||e.y)&&(t=t.clone().translate(e.x?i:0,e.y?i:0)),yield[op,t.point(i,i).length/Math.SQRT2||Hp]}}class tg extends Uh{get type(){return"line"}get points(){return this._shape.points}set points(t){this._shape.setPoints(t)&&this.invalidateShape()}get from(){return this._shape.from}set from(t){this._shape.from.equals(t)||(this._shape.from=t,this.invalidateShape())}get to(){return this._shape.to}set to(t){this._shape.to.equals(t)||(this._shape.to=t,this.invalidateShape())}computeLocalBounds(){return Ve.fromIterablePoints(this._shape.points)}computeLocalBoundsPoints(){return this._shape.points}computeGlobalBoundsPoints(){const t=this._shape.points,e=this.globalMatrix;return e.isIdentity?t:e.transformPointArray(t)}intersectsRect(t){if(this.isInvisible||this.locked||!this.isFillVisible&&!this.isStrokeVisible)return!1;const e=this.globalMatrix;return e&&!e.isIdentity?t.intersectsLine(e.transformPoint(this.from),e.transformPoint(this.to),!0):t.intersectsLine(this.from,this.to,!0)}*localResize(t){yield[Xf,t.transformPointArray(this.shape.points)]}}class eg extends Uh{get type(){return"star"}get sides(){return this._shape.sides}set sides(t){(t=n(t,3,Number.POSITIVE_INFINITY))!==this._shape.sides&&(this._shape.sides=t,this.invalidateShape())}get outerRadius(){return this._shape.outerRadius}set outerRadius(t){(t=n(t,0,Number.POSITIVE_INFINITY))!==this._shape.outerRadius&&(this._shape.outerRadius=t,this.invalidateShape())}get innerRadius(){return this._shape.innerRadius}set innerRadius(t){(t=n(t,0,Number.POSITIVE_INFINITY))!==this._shape.innerRadius&&(this._shape.innerRadius=t,this.invalidateShape())}get outerCornerRadius(){return this._shape.outerCornerRadius}set outerCornerRadius(t){t!==this._shape.outerCornerRadius&&(this._shape.outerCornerRadius=t,this.invalidateShape())}get innerCornerRadius(){return this._shape.innerCornerRadius}set innerCornerRadius(t){t!==this._shape.innerCornerRadius&&(this._shape.innerCornerRadius=t,this.invalidateShape())}get outerRotate(){return this._shape.outerRotate}set outerRotate(t){t!==this._shape.outerRotate&&(this._shape.outerRotate=t,this.invalidateShape())}get innerRotate(){return this._shape.innerRotate}set innerRotate(t){t!==this._shape.innerRotate&&(this._shape.innerRotate=t,this.invalidateShape())}get angle(){return this._shape.angle}set angle(t){t!==this._shape.angle&&(this._shape.angle=t,this.invalidateShape())}get pin(){return this._shape.pin}set pin(t){this._shape.pin.equals(t)||(this._shape.pin=t,this.invalidateShape())}applyJSON(t){super.applyJSON(t)}*localResize(t,e){const i=this.innerRadius>this.outerRadius,n=i?this.innerRadius:this.outerRadius;(e.x||e.y)&&(t=t.clone().translate(e.x?n:0,e.y?n:0));let s=t.point(n,n,!0).length/Math.SQRT2||Hp;if(s===n)return;let r=(i?this.outerRadius:this.innerRadius)*s/n;i&&([s,r]=[r,s]),yield[hp,s],yield[dp,r]}}class ig extends Rh{#t;get isRenderable(){return!1}get forwardsMatrixIncorporation(){return!0}constructor(t,e){super(e),this.#t=t}dispose(){super.dispose(),this.#t?.dispose(),this.#t=null}get path(){return this.#t}get nodes(){return this.#t.nodes}set nodes(t){this.#t.setNodes(t),this.invalidate(!0)}get fillRule(){return this.#t.fillRule}set fillRule(t){this.#t.fillRule!==t&&(this.#t.fillRule=t,this.invalidate())}setPathMatrix(t){return!!this.#t.setMatrix(t,!0)&&(this.invalidate(!0),!0)}applyJSON(t){this.#t=t.path,super.applyJSON(t)}toJSON(){const t=super.toJSON();return t.path=this.#t,t}get isResizable(){return!0}*localResize(t){yield[Hd,zn(this.#t.nodes,t)]}get localBounds(){return this.#t.bounds}computeLocalBounds(){return this.#t.bounds}getElementAt(t,e){return this.hidden||!this.visible||this.locked||!this.localBoundsContainPoint(t)?null:(null==e.filter||e.filter(this,t))&&this.#t?.contains(t,this.globalMatrix)?this:null}cloneCurrent(){return new this.constructor(this.#t.clone())}drawOnPicture(t,e){return Ve.ZERO}drawOnWireframe(t){}get picture(){return null}}class ng extends ig{get type(){return"clip-path"}acceptsParent(t){return"clip-group"===t.type}}class sg extends Rh{#li;constructor(t,e){super(e),this.#li=t}get isInvisible(){return!this.#li||super.isInvisible}applyJSON(t){this.#li=t.reference,super.applyJSON(t)}toJSON(){const t=super.toJSON();return t.reference=this.#li,t}get reference(){return this.#li}set reference(t){this.#li!==t&&(this.#li=t,this.invalidate())}getReferencePictureOptions(){}resolvePicture(){return this.#li&&this.document,null}drawOnWireframe(t){t.drawWireframeRect(this.localBounds,!0)}getElementAt(t,e){return this.isClickable(e?.wireframe)&&this.localBoundsContainPoint(t)&&(null==e.filter||e.filter(this,t))?this:null}cloneCurrent(){return new this.constructor(this.#li)}}const rg=new hi;class og extends sg{#ci=ce.ZERO;#j=0;#X=0;#ui=1;#hi=0;#E=os;#tt=is;constructor(t,e){super(t,e)}get type(){return"symbol"}applyJSON(t){if(this.#j=t.width,this.#X=t.height,this.#hi=t.rotation||0,this.#E=t.align||os,t.pan?this.#ci=t.pan:this.#ci=new ce(t.x||0,t.y||0),null!=t.zoom)this.#ui=t.zoom||0;else{const e=t.box;e?(this.#ui=Math.max(this.#j,e.width,this.#X,e.height),!Number.isNaN(this.#ui)&&Number.isFinite(this.#ui)||(this.#ui=1)):this.#ui=1}if(null!=t.pin){let e=t.pin;this.#tt=e}super.applyJSON(t)}toJSON(){const t=super.toJSON();return t.pan=this.#ci,t.zoom=this.#ui,t.rotation=this.#hi,t.align=this.#E,t.width=this.#j,t.height=this.#X,this.#tt.isZero||(t.pin=this.#tt),t}get pan(){return this.#ci}set pan(t){this.#ci.equals(t)||(this.#ci=t,this.invalidate())}get zoom(){return this.#ui}set zoom(t){t<0&&(t=-t),this.#ui!==t&&(this.#ui=t,this.invalidate())}get rotation(){return this.#hi}set rotation(t){this.#hi!==t&&(this.#hi=t,this.invalidate())}get align(){return this.#E}set align(t){this.#E.equals(t)||(this.#E=t,this.invalidate())}get width(){return this.#j}set width(t){t=n(t,0,Number.POSITIVE_INFINITY),this.#j!==t&&(this.#j=t,this.invalidate(!0))}get height(){return this.#X}set height(t){t=n(t,0,Number.POSITIVE_INFINITY),this.#X!==t&&(this.#X=t,this.invalidate(!0))}get pin(){return this.#tt}set pin(t){this.#tt.equals(t)||(this.#tt=t,this.invalidate(!0))}get isResizable(){return!0}computeLocalBounds(){return fs(this.#tt,this.#j,this.#X)}cloneProperties(t){super.cloneProperties(t),t.#ci=this.#ci,t.#ui=this.#ui,t.#hi=this.#hi,t.#E=this.#E,t.#j=this.#j,t.#X=this.#X,t.#tt=this.#tt}drawOnPicture(t,e){if(0===this.#ui)return;const i=this.resolvePicture();if(!i)return;t.clipRect(e.outset(.5,.5)),rg.toIdentity().translate(this.#j*this.#E.x,this.#X*this.#E.y).rotate(this.#hi).scale(this.#ui,this.#ui).translate(-this.#ci.x,-this.#ci.y);const n=this.localBounds;return t.translate(n.x,n.y),t.drawPicture(i,oe.NormalIsolatedComposition,rg),e}*localResize(t,e){yield*Gp(this,t,e,Sp,kp)}}class ag extends Qp{get type(){return"mask"}get supportsContext(){return!0}get isRenderable(){return!1}get providesPicture(){return!0}acceptsParent(t){return"clip-group"===t.type}}class lg{#di=new Map;constructor(t){t&&this.merge(t)}get size(){return this.#di.size}all(){return this.#di.values()}has(t){return this.#di.has(t)}get(t){return this.#di.get(t)||null}delete(t){const e=this.#di.get(t);return!!e&&(this.#di.delete(t),e.dispose(),!0)}add(t){return!this.#di.has(t.id)&&(this.#di.set(t.id,t),!0)}import(t){const e=this.#di;for(const i of[...t])e.has(i.id)?e.get(i.id)===i&&t.#di.delete(i.id):(e.set(i.id,i),t.#di.delete(i.id))}merge(t){const e=this.#di;for(const i of t)e.has(i.id)?e.get(i.id)!==i&&i.dispose():e.set(i.id,i)}dispose(){for(const t of this.#di.values())t.dispose();this.#di.clear()}[Symbol.iterator](){return this.#di.values()}}class cg extends lg{}class ug{constructor(t,e){this.data=t,this.id=e}get width(){return this.data.width}get height(){return this.data.height}getBlob(){return new Blob([this.data.getBytes()])}dispose(){this.data?.delete(),this.data=null}static async idFromData(t){return async function(t){const e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(Pt).join("")}(t)}static async fromRawData(t,e){if(!t)return null;const i=Skia.SkImage.MakeFromEncoded(t);return i?(e??=await this.idFromData(i.getBytes()),new ug(i,e)):null}}const hg="images";function dg(t){return t??=Oo,t[hg]??=new cg}function fg(t){const e=new Set;return pg(t.firstChild,e),e}function pg(t,e){for(let i=t;null!=i;i=i.nextSibling){if("image"===i.type){const t=i.imageResource;t&&e.add(t)}i.hasChildren&&pg(i.firstChild,e)}}xo({id:hg,priority:0,dispose(t){t.dispose()},serialization:{marker:4,serialize:new class extends Wo{#fi;async begin(t){const e=this.#fi=[...fg($c)].reverse();return e.length&&(t[hg]=e.map((t=>t.id))),super.begin(t)}async*items(){for(const t of this.#fi)yield this.serializeRaw(t.getBlob().stream())}async end(){return this.#fi=null,super.end()}},deserialize:new class extends Ro{#pi=null;#gi;#mi;async begin(t,e){return this.#gi=0,this.#pi=t[hg],this.#mi=[],super.begin(t,e)}async end(){return this.#pi=this.#mi=null,super.end()}async add(t){const e=this.#pi[this.#gi++],i=await ug.fromRawData(await this.deserializeRaw(t),e);i&&this.#mi.push(i)}async compute(t){return t&&!this.#mi?.length?t:(t?.dispose(),new cg(this.#mi))}}}});class gg extends Rh{#vi;#j=null;#X=null;#tt=is;constructor(t,e){super(e),this.#vi=t}get type(){return"image"}get imageId(){return this.#vi}set imageId(t){this.#vi!==t&&(this.#vi=t,this.invalidate(!0))}get imageResource(){return dg().get(this.#vi)}get width(){return null==this.#j?this.#j=this.imageResource?.width||0:this.#j}set width(t){t<0&&(t=0),this.#j!==t&&(this.#j=t,this.invalidate(!0))}get height(){return null==this.#X?this.#X=this.imageResource?.height||0:this.#X}set height(t){t<0&&(t=0),this.#X!==t&&(this.#X=t,this.invalidate(!0))}get pin(){return this.#tt}set pin(t){this.#tt.equals(t)||(this.#tt=t,this.invalidate(!0))}get isRenderable(){return!0}get isResizable(){return!0}*localResize(t,e){yield*Gp(this,t,e,Jf,qf)}computeLocalBounds(){return fs(this.#tt,this.width,this.height)}drawOnWireframe(t){t.drawWireframeRect(this.localBounds,!0)}drawOnPicture(t,e){const i=this.imageResource;if(!i)return;const{width:n,height:s}=this;return t.translate(-this.#tt.x*n,-this.#tt.y*s),t.scale(n/i.width,s/i.height),t.drawImage(this.imageResource.data),e}cloneCurrent(){return new gg(this.imageId)}cloneProperties(t){super.cloneProperties(t),t.#vi=this.#vi,t.#j=this.#j,t.#X=this.#X,t.#tt=this.#tt}toJSON(){const t=super.toJSON();return t.image=this.#vi,t.width=this.width,t.height=this.height,this.#tt.isZero||(t.pin=this.#tt),t}applyJSON(t){if(this.#vi=t.image||t.resourceId,null!=t.width&&(this.#j=t.width),null!=t.height&&(this.#X=t.height),null!=t.pin){let e=t.pin;this.#tt=e}super.applyJSON(t)}}class mg extends Rh{#yi;#xi;#bi;#wi;#Mi;#Si=!1;get type(){return"clip-group"}get forwardsMatrixIncorporation(){return!0}get isAlphaMask(){return this.#Si}set isAlphaMask(t){this.#Si!==t&&(this.#Si=t,this.invalidateParent(!1,!0))}onChildAdded(t,e){yg(t)?this.#ki(t):xg(t)?this.#_i(t):super.onChildAdded(t,e)}onChildRemoved(t){yg(t)?this.#ki(t):xg(t)?this.#_i(t):super.onChildRemoved(t)}onChildMoved(t){yg(t)?this.#ki(t,!1):xg(t)?this.#_i(t,!1):super.onChildMoved(t)}onChildGraphicsChanged(t,e,i){yg(t)?this.#ki(t,!0,!0):xg(t)?this.#_i(t,!0,!0):super.onChildGraphicsChanged(t,e,i)}onChildMatrixChanged(t){yg(t)?this.#ki(t):xg(t)?this.#_i(t):super.onChildMatrixChanged(t)}get clipPath(){return void 0===this.#yi?this.#yi=this.#Ii():this.#yi}get clipBounds(){return void 0===this.#bi?this.#bi=this.#Ci():this.#bi}get clipPicture(){return void 0===this.#xi?this.#xi=this.#Li(this.clipBounds):this.#xi}get maskBounds(){return void 0===this.#Mi?this.#Mi=this.#Ni():this.#Mi}get maskPicture(){return void 0===this.#wi?this.#wi=this.#ji(this.maskBounds):this.#wi}#_i(t,e=!0,i){!i&&t.isInvisible||(this.#wi?.delete(),this.#Mi=this.#wi=void 0,this.invalidate(e))}#ki(t,e=!0,i){!i&&t.isInvisible||(this.#yi?.delete(),this.#xi?.delete(),this.#bi=this.#yi=this.#xi=void 0,this.invalidate(e))}#Li(t){if(!t||!t.isVisible)return null;const e=new Skia.SkPictureRecorder,i=new br(e.beginRecording(t));for(const t of this.children()){if(t.isInvisible||!yg(t))continue;const e=t.path;if(e.isEmpty)continue;const n=t.localMatrix;n.isIdentity?i.drawPathDirect(e.path,gi.WHITE):(i.save(),i.multiplyMatrix(n),i.drawPathDirect(e.path,gi.WHITE),i.restore())}const n=e.finishRecordingAsPicture(t);return e.delete(),i.dispose(),n}#ji(t){if(!t||!t.isVisible)return null;const e=new Skia.SkPictureRecorder,i=new br(e.beginRecording(t));for(const t of this.children())xg(t)&&t.draw(i);const n=e.finishRecordingAsPicture(t);return e.delete(),i.dispose(),n}#Ci(){const t=this.clipPath;return t?Ve.fromLTRBObject(t.computeTightBounds()):null}#Ni(){return Mg(this,xg)}#Ii(){const t=new Skia.SkPath;t.fillType=Skia.SkPathFillType.Winding;for(const e of this.children()){if(!yg(e)||e.isInvisible)continue;const i=e.path;i.isEmpty||t.addPath(i.path,e.localMatrix)}return t.isEmpty?(t.delete(),null):t}#zi(){return Mg(this,(t=>!vg(t)))||Ve.ZERO}get isolationContour(){return this.clipPath}computeLocalBounds(){return this.clipBounds||this.maskBounds||this.#zi()}computePictureBounds(){return Fu(this)?Ve.merge([this.clipBounds,this.#Mi,this.#zi()]):this.localBounds}get supportsChildren(){return!0}acceptsChild(t){return t.isElement&&(t.isRenderable||vg(t))}toJSON(){const t=super.toJSON();return this.#Si&&(t.alphaMask=!0),t}applyJSON(t){super.applyJSON(t),t.alphaMask&&(this.#Si=!0);const e=t.clipRule;if(null!=e)for(const t of this.children())yg(t)&&(t.fillRule=e)}dispose(){super.dispose(),this.#yi?.delete(),this.#xi?.delete(),this.#wi?.delete(),this.#yi=this.#bi=this.#xi=this.#wi=this.#wi=null}getElementAt(t,e){if(Fu(this))return super.getElementAt(t,e);if(this.locked||!this.localBounds.isVisible||(e.wireframe?this.hidden||!this.visible:this.isInvisible))return null;const i=this.getLocalPoint(t),n=this.clipPath;if(n&&!n.contains(i.x,i.y))return null;const s=this.maskBounds;if(s&&!s.containsPoint(i))return null;if(null!=e.filter&&!e.filter(this,t))return null;let r;for(const i of this.children(!0))if(i.providesPicture&&(r=i.getElementAt(t,e),r))break;return r?e.seeThrough||hh(r)?r:this:null}cloneProperties(t){super.cloneProperties(t),t.#Si=this.#Si,t.#bi=this.#bi,t.#Mi=this.#Mi,this.#yi?t.#yi=this.#yi.clone():t.#yi=this.#yi,this.#xi?t.#xi=this.#xi.clone():t.#xi=this.#xi,this.#wi?t.#wi=this.#wi.clone():t.#wi=this.#wi}drawOnPicture(t,e){if(!this.hasChildren)return Ve.ZERO;if(Au())if(Fu(this))for(const e of this.children())e instanceof th&&e.providesPicture&&e.draw(t);else for(const e of this.children())e instanceof th&&e.isRenderable&&!$u(e)&&e.draw(t);else for(const e of this.children())e instanceof th&&e.isRenderable&&!vg(e)&&e.draw(t)}draw(t){if(this.isInvisible)return;const e=this.isFrozen?this.frozenPicture:this.picture;if(!e)return;if(Fu(this))return void t.drawPicture(e,this.composition,this.localMatrix,this.filters?.filter);const i=this.composition;if(i.isInvisible)return;const n=this.clipPicture,s=this.maskPicture;(n||s)&&(t.saveLayer(i,this.filters?.filter),t.multiplyMatrix(this.localMatrix),t.drawPicture(e),s&&t.drawPictureBlend(s,Skia.SkBlendMode.DstIn,this.#Si?wg??=Skia.SkColorFilter.MakeMatrix([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0]):bg??=Skia.SkColorFilter.MakeLuma()),n&&t.drawPictureBlend(n,Skia.SkBlendMode.DstIn),t.restore())}drawOnWireframe(t){let e=!$u(this);if(e){const i=this.clipPath;i?(t.save(),t.clipPath(i)):e=!1}super.drawOnWireframe(t),e&&t.restore()}}function vg(t){return yg(t)||xg(t)}function yg(t){return"clip-path"===t.type}function xg(t){return"mask"===t.type}let bg,wg;function Mg(t,e){let i=0,n=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(const a of t.children()){if(a.isInvisible||!e(a))continue;let t=a.pictureAndFiltersBounds;t&&t.isVisible&&(a.localMatrix.isIdentity||(t=t.transform(a.localMatrix)),i++,n=Math.min(n,t.left),s=Math.min(s,t.top),r=Math.max(r,t.right),o=Math.max(o,t.bottom))}return i?Ve.fromLTRB(n,s,r,o):null}class Sg extends Rh{constructor(t,e){super(e),this.paragraph=t}get forwardsMatrixIncorporation(){return!0}get type(){return"text"}applyJSON(t){this.paragraph=t.paragraph,super.applyJSON(t)}toJSON(){const t=super.toJSON();return t.paragraph=this.paragraph,t}dispose(){super.dispose(),this.paragraph?.dispose(),this.paragraph=null}computeLocalBounds(){return this.paragraph.tightBounds.transform(this.paragraph.matrix)}computePictureBounds(){let t=Ve.merge([this.paragraph.bounds,this.paragraph.linesBounds]).transform(this.paragraph.matrix),e=0;for(const t of this.paragraph.blocks)e=Math.max(e,t.style.strokeLineWidth??0);return e>0?(e*=2,t.outset(e,e)):t}get style(){return this.paragraph.style}get width(){return this.style.width}set width(t){this.style.setWidth(t)&&this.invalidateParagraph()}get height(){return this.style.height}set height(t){this.style.setHeight(t)&&this.invalidateParagraph()}get autoWidth(){return this.style.autoWidth}set autoWidth(t){const e=this.style;e.autoWidth!==t&&(e.autoWidth=t,this.invalidateParagraph())}get autoHeight(){return this.style.autoHeight}set autoHeight(t){const e=this.style;e.autoHeight!==t&&(e.autoHeight=t,this.invalidateParagraph())}get align(){return this.style.align}set align(t){this.style.setAlign(t)&&this.invalidateParagraph()}get valign(){return this.style.valign}set valign(t){this.style.setVAlign(t)&&this.invalidateParagraph()}get text(){return this.paragraph.source.text}set text(t){this.setText(t)}setParagraphMatrix(t){return!!this.paragraph.setMatrix(t)&&(this.invalidate(!0,!0),!0)}setText(t){return!!this.paragraph.setText(t)&&(this.invalidateParagraph(),!0)}get fillOpacity(){return this.getStyleProperty("fillOpacity")}set fillOpacity(t){this.setStyleProperty("fillOpacity",t)}get fill(){return this.getStyleProperty("fill")}set fill(t){this.setStyleProperty("fill",t)}get fillRule(){return 0}set fillRule(t){}get strokeOpacity(){return this.getStyleProperty("strokeOpacity")}set strokeOpacity(t){this.setStyleProperty("strokeOpacity",t)}get strokeBrush(){return this.getStyleProperty("strokeBrush")}set strokeBrush(t){this.setStyleProperty("strokeBrush",t)}get strokeLineWidth(){return this.getStyleProperty("strokeLineWidth")}set strokeLineWidth(t){this.setStyleProperty("strokeLineWidth",t)}get strokeMiterLimit(){return this.getStyleProperty("strokeMiterLimit")}set strokeMiterLimit(t){this.setStyleProperty("strokeMiterLimit",t)}get strokeLineCap(){return this.getStyleProperty("strokeLineCap")}set strokeLineCap(t){this.setStyleProperty("strokeLineCap",t)}get strokeLineJoin(){return this.getStyleProperty("strokeLineJoin")}set strokeLineJoin(t){this.setStyleProperty("strokeLineJoin",t)}get strokeDashOffset(){return this.getStyleProperty("strokeDashOffset")}set strokeDashOffset(t){this.setStyleProperty("strokeDashOffset",t)}get strokeDashArray(){return this.getStyleProperty("strokeDashArray")}set strokeDashArray(t){this.setStyleProperty("strokeDashArray",t)}get strokeDashPathLength(){return 0}set strokeDashPathLength(t){}get paintOrder(){return this.getStyleProperty("paintOrder")}set paintOrder(t){this.setStyleProperty("paintOrder",t)}get fontId(){return this.getStyleProperty("fontId")}set fontId(t){this.setStyleProperty("fontId",t)}get fontSize(){return this.getStyleProperty("fontSize")}set fontSize(t){this.setStyleProperty("fontSize",t)}get fontFeatures(){return this.getStyleProperty("fontFeatures")}set fontFeatures(t){this.setStyleProperty("fontFeatures",t)}get letterSpacing(){return this.getStyleProperty("letterSpacing")}set letterSpacing(t){this.setStyleProperty("letterSpacing",t)}get wordSpacing(){return this.getStyleProperty("wordSpacing")}set wordSpacing(t){this.setStyleProperty("wordSpacing",t)}get lineHeight(){return this.getStyleProperty("lineHeight")}set lineHeight(t){this.setStyleProperty("lineHeight",t)}get baselineShift(){return this.getStyleProperty("baselineShift")}set baselineShift(t){this.setStyleProperty("baselineShift",t)}drawOnPicture(t,e){return this.paragraph.draw(t),e}drawOnWireframe(t){const e=this.paragraph?.path;e&&!e.isEmpty&&t.drawWireframePath(e,!0)}getElementAt(t,e){if(this.locked||(e.wireframe?this.hidden||!this.visible:this.isInvisible))return null;if(null!=e.filter&&!e.filter(this,t))return null;if(e.boundsOnly&&this.localBoundsContainPoint(t))return this;const i=this.globalMatrix;return i&&!i.isIdentity&&(t=i.inversePoint(t.x,t.y)),this.paragraph.isPointOverText(t,!0)?this:null}intersectsRect(t){return!!this.isClickable()&&this.globalBounds.intersectsRect(t)}invalidateParagraph(){this.paragraph?.invalidate(),this.invalidate(!0)}}class kg extends Sg{constructor(t,e){super(t,e)}cloneCurrent(){return new kg(this.paragraph.clone())}getStyleProperty(t,e){return e??=gr(this),this.paragraph.getTextStyleAtRange(e.start,e.end)[t]}setStyleProperty(t,e,i){const n=new hr;let s;return n[t]=e,i??=gr(this),s=i.start===i.end?this.paragraph.addStyleToAll(n):this.paragraph.addStyle(n,i.start,i.end),!!s&&(this.invalidateParagraph(),!0)}collectFonts(t){for(const{style:e}of this.paragraph.blocks)e.fontId&&t.add(e.fontId)}}class _g extends Rh{#u;#Pi;static CreateFromBlock(t,e){const i=new this;i.#u=t.style;const n=e.length;return i.#Pi=0===n?new pr(0,0):new pr(t.start/n,t.end/n),i}computeLocalBounds(){return Ve.ZERO}onVisibilityChanged(){this.parent?.invalidateParagraph()}get isTransformable(){return!1}get isRenderable(){return!1}get supportsChildren(){return!1}get supportsContext(){return!1}acceptsChild(t){return!1}acceptsParent(t){return t instanceof Sg}dispose(){super.dispose(),this.#u=this.#Pi=null}cloneProperties(t){super.cloneProperties(t),t.#u=this.#u?this.#u.clone():void 0,t.#Pi=this.#Pi?this.#Pi.clone():void 0}toJSON(){const t=super.toJSON();return t.style=this.#u,t.range=this.#Pi,t}applyJSON(t){this.#u=t.style,this.#Pi=t.range,super.applyJSON(t)}get type(){return"text-style"}get style(){return this.#u??=new hr}set style(t){this.#u=t}get range(){return this.#Pi??=new pr}get rangeStart(){return this.range.start}set rangeStart(t){this.setRange(t,this.range.end)}get rangeEnd(){return this.range.end}set rangeEnd(t){this.setRange(this.range.start,t)}get rangeLength(){return this.range.length}set rangeLength(t){this.setRange(this.range.start,this.range.start+t)}get rangeType(){return this.range.type}set rangeType(t){this.setRangeType(t)}setRangeType(t){return this.range.type!==t&&(this.range.type=t,this.invalidateParagraph(),!0)}setRange(t,e){return t=n(t,0,1),(e=n(e,0,1))<t&&([t,e]=[e,t]),(this.range.start!==t||this.range.end!==e)&&(this.range.start=t,this.range.end=e,this.invalidateParagraph(),!0)}addStyle(t){return!!t.mergeStyleInto(this.style)&&(this.invalidateParagraph(),!0)}setStyleProperty(t,e){return this.style[t]!==e&&(this.style[t]=e,this.invalidateParagraph(),!0)}getStyleProperty(t){const e=this.style[t];return void 0===e?this.parent?.[t]:e}get fillOpacity(){return this.getStyleProperty("fillOpacity")}set fillOpacity(t){this.setStyleProperty("fillOpacity",t)}get fill(){return this.getStyleProperty("fill")}set fill(t){this.setStyleProperty("fill",t)}get fillRule(){return 0}set fillRule(t){}get strokeOpacity(){return this.getStyleProperty("strokeOpacity")}set strokeOpacity(t){this.setStyleProperty("strokeOpacity",t)}get strokeBrush(){return this.getStyleProperty("strokeBrush")}set strokeBrush(t){this.setStyleProperty("strokeBrush",t)}get strokeLineWidth(){return this.getStyleProperty("strokeLineWidth")}set strokeLineWidth(t){this.setStyleProperty("strokeLineWidth",t)}get strokeMiterLimit(){return this.getStyleProperty("strokeMiterLimit")}set strokeMiterLimit(t){this.setStyleProperty("strokeMiterLimit",t)}get strokeLineCap(){return this.getStyleProperty("strokeLineCap")}set strokeLineCap(t){this.setStyleProperty("strokeLineCap",t)}get strokeLineJoin(){return this.getStyleProperty("strokeLineJoin")}set strokeLineJoin(t){this.setStyleProperty("strokeLineJoin",t)}get strokeDashOffset(){return this.getStyleProperty("strokeDashOffset")}set strokeDashOffset(t){this.setStyleProperty("strokeDashOffset",t)}get strokeDashArray(){return this.getStyleProperty("strokeDashArray")}set strokeDashArray(t){this.setStyleProperty("strokeDashArray",t)}get strokeDashPathLength(){return 0}set strokeDashPathLength(t){}get paintOrder(){return this.getStyleProperty("paintOrder")}set paintOrder(t){this.setStyleProperty("paintOrder",t)}get fontId(){return this.getStyleProperty("fontId")}set fontId(t){this.setStyleProperty("fontId",t)}get fontSize(){return this.getStyleProperty("fontSize")}set fontSize(t){this.setStyleProperty("fontSize",t)}get fontFeatures(){return this.getStyleProperty("fontFeatures")}set fontFeatures(t){this.setStyleProperty("fontFeatures",t)}get letterSpacing(){return this.getStyleProperty("letterSpacing")}set letterSpacing(t){this.setStyleProperty("letterSpacing",t)}get wordSpacing(){return this.getStyleProperty("wordSpacing")}set wordSpacing(t){this.setStyleProperty("wordSpacing",t)}get lineHeight(){return this.getStyleProperty("lineHeight")}set lineHeight(t){this.setStyleProperty("lineHeight",t)}get baselineShift(){return this.getStyleProperty("baselineShift")}set baselineShift(t){this.setStyleProperty("baselineShift",t)}invalidateParagraph(){if(this.isInvisible)return;const t=this.parent;t&&(t instanceof Sg||t instanceof _g)&&t.invalidateParagraph()}draw(t){}drawOnPicture(t,e){return Ve.ZERO}drawWireframe(t){}drawOnWireframe(t){}collectFonts(t){const e=this.style.fontId;if(null!=e&&""!==e&&t.add(e),this.hasChildren)for(const e of this.children())e.collectFonts(t)}}class Ig extends Sg{constructor(t,e){super(t,e),t&&(t.provider=this)}get supportsChildren(){return!0}get supportsRenderableChildren(){return!1}get supportsContextChildren(){return!1}acceptsChild(t){return t instanceof _g}toJSON(){const t=super.toJSON();return t.blocks=this.paragraph.blocks,t}applyJSON(t){super.applyJSON(t),t.paragraph&&(t.paragraph.provider=this)}cloneCurrent(){return new Ig(this.paragraph.clone())}hasBlocks(){return this.hasChildren}*getBlocks(){for(const t of this.children())t instanceof _g&&!t.isInvisible&&(yield[t.range,t.style])}getStyleProperty(t){return this.paragraph.block.style[t]}setStyleProperty(t,e){const i=new hr;return i[t]=e,!!i.mergeStyleInto(this.paragraph.block.style)&&(this.invalidateParagraph(),!0)}collectFonts(t){const e=this.paragraph.block.style.fontId;if(null!=e&&""!==e&&t.add(e),this.hasChildren)for(const e of this.children())e.collectFonts(t)}}class Cg extends th{constructor(){super(...arguments),this.nodeType=1,this.isRenderable=!0,this.isTransformable=!1,this.supportsChildren=!0}get type(){return"layer"}getElementAt(t,e){if(this.isInvisible||this.locked||!this.pictureBounds.contains(t.x,t.y))return null;let i;for(const n of this.children(!0))if(i=n.getElementAt(t,e))return i;return null}computeLocalBounds(){return Ve.fromIterablePoints(this.#Ti())}*#Ti(){for(const t of this.children())yield*t.globalBoundsPoints}}let Lg=0,Ng=!1,jg=function(t,e,i){if(!t.forwardsMatrixIncorporation)return Tg(t,e);let[n,s]=function(t){if(ci(t.value,!0))return[t,null];const e=ui(t.value),i=(new hi).translate(e.translate.x,e.translate.y).rotate(e.rotate).scale(e.scale.x?Math.sign(e.scale.x):1,e.scale.y?Math.sign(e.scale.y):1);return[i,t=t.clone().preMultiplyInverse(i)]}(e),r=Tg(t,n);if(t.supportsChildren&&(s||Ng)){s??=new hi;for(const e of t.children())e.incorporateMatrix(s,i,!1)&&(r=!0);return r}return function(t,e){if(t instanceof ig)return t.setPathMatrix(e);let i=1;if(Lg&&(i=Ag(e?.lineScale)),t instanceof Sg)return!!t.setParagraphMatrix(e)&&(Dg(t,e,i,1),!0);if(t instanceof Uh){let n=0;return 1&Lg&&(n=t.pathLength),!!t.setShapeMatrix(e)&&(n=n?Ag(n/t.pathLength):1,Dg(t,e,i,n),!0)}return!1}(t,s)&&(r=!0),r};function zg(t,e,i,n){const s=Lg;null!=i&&(Lg=i),Ng=n;const r=t.incorporateMatrix(e,jg,!0);return Ng=!1,Lg=s,r}function Pg(t,e,i){if(i){const i=e.toRelative(t.localBounds);return n=>n===t?e:i.toAbsolute(n.localBounds)}const n=e.withTransformedCoords(t.globalMatrix);return i=>{if(i===t)return e;const s=i.globalMatrix;return s.isIdentity?n:n.withTransformedCoords(s.clone().inverse())}}function Tg(t,e){return t.setTransformMatrix(e)}function Ag(t){return t&&Number.isFinite(t)?t<0?-t:t:1}function Dg(t,e,i,n){if(!e||e.isIdentity)return!1;let s=!1;if(t instanceof kg)for(const r of t.paragraph.blocks)Eg(r.style,e,i,n)&&(s=!0);else if(Wg(t,qd,e)&&(s=!0),Wg(t,tf,e)&&(s=!0),Og(t,i,n)&&(s=!0),t instanceof Ig)for(const r of t.children())Dg(r,e,i,n)&&(s=!0);return s}function Eg(t,e,i,n){let s=!1;if(t.fill instanceof _i){const i=t.fill.withTransformedCoords(e);i!==t.fill&&(t.fill=i,s=!0)}if(t.strokeBrush instanceof _i){const i=t.strokeBrush.withTransformedCoords(e);i!==t.strokeBrush&&(t.strokeBrush=i,s=!0)}return Og(t,i,n)&&(s=!0),s}function Og(t,e,i){let n=!1;return e&&1!==e&&t.strokeLineWidth&&(t.strokeLineWidth*=e,n=!0),i&&1!==i&&!t.strokeDashPathLength&&(t.strokeDashOffset&&(t.strokeDashOffset*=i,n=!0),t.strokeDashArray?.length&&(t.strokeDashArray=t.strokeDashArray.map((t=>t?(n=!0,t*i):0)))),n}function Wg(t,e,i){const n=e.getValue(t);if(!(n instanceof _i))return!1;const s=n.withTransformedCoords(i);return n!==s&&jd(t,e,s)}function Rg(t,e){return Bg(t,2,2,e)}function Bg(t,e,i,n){const s=t.globalBounds.getPointAtPosition(e,i);return null!==s&&$g(t,s,n)}function Ug(t,e,i){if(!t.isTransformable)return!1;const n=t.localBounds.getPointAtPosition(e,i);return null!==n&&jd(t,Od,n)}function $g(t,e,i){return Qg(t,Jg(t,e,!0),i)}function Fg(t){t.isTransformable&&$g(t,t.globalBounds.middle,!0);for(const e of t.children())Fg(e)}function Vg(t,e){return 0!==e&&zd(t,Rd,(t=>t.rotate+e))}function Hg(t,e){return(1!==e.x||1!==e.y)&&zd(t,Wd,(t=>t.scale.mul(e)))}function Gg(t,e,i){return!e.isZero&&(i?zd(t,Od,(t=>{const i=t.globalMatrix;return i.isIdentity?t.anchor.sub(e):t.anchor.sub(i.transformInversePoint(e,!1))})):zd(t,Ed,(t=>t.position.add(Jg(t,e)))))}function Zg(t,e,i,n,s){const r=Jg(t,t.position),o=e.getPointAtPosition(i,n,!1,r),a=t.globalBounds.bounds.getPointAtPosition(i,n,!1,r);return!a.equals(o)&&Yg(t,o.sub(a),s)}function Yg(t,e,i){if(e.isZero||!t.isTransformable)return!1;if(i){const i=t.globalMatrix;return jd(t,Od,t.anchor.sub(i.isIdentity?e:i.transformInversePoint(e,!1)))}return jd(t,Ed,t.position.add(Jg(t,e)))}function Qg(t,e,i){if(!t.isTransformable)return!1;const n=t.position;if(n.equals(e))return!1;const s=t.anchor.sub(t.localMatrix.transformInversePoint(n.sub(e),!1));return i?(t.anchor=s,t.position=e,!0):(jd(t,Od,s),jd(t,Ed,e),!0)}function Jg(t,e,i=!1){if(e.isZero)return e;const n=t?.parent.globalMatrix;return n&&!n.isIdentity?n.transformInversePoint(e,i):e}let qg=class t extends mu{#ze;#Te;#Ai;#Di;constructor(t){super(t??Ct()),this.nodeType=0,this.supportsFilters=!1,this.supportsChildren=!0,this.supportsContext=!1,this.isTransformable=!1,this.isRenderable=!0,this.#ze=void 0,this.#Te=null,this.#Ai=null,this.#Di=0,this.document=this}get type(){return"document"}dispose(){super.dispose(),this.#ze?.delete(),this.#ze=null}cloneCurrent(){return new t(this.id)}cloneProperties(t){super.cloneProperties(t),t.#ze=this.#ze?this.#ze.clone():this.#ze}applyJSON(t){this.id??=Ct();const e=t.children;if(e?.length&&!e[0].isLayer){const i=new Cg;for(i.title="Layer 1";e.length>0;)i.appendChild(e.shift());t.children=[i]}super.applyJSON(t)}static fromJSON(t){const e=new this(t.id);return e.applyJSON(t),e}get hidden(){return!1}set hidden(t){}get visible(){return!0}set visible(t){}get isInvisible(){return!1}get preventAdoptAndAbandon(){return this.#Di>0}set preventAdoptAndAbandon(t){t?this.#Di++:this.#Di>0&&this.#Di--}adoptNode(t){if(this.preventAdoptAndAbandon)return!1;const e=this.nodeCache;for(const i of ku(t))i.id??=Ct(),i.document=this,e.set(i.id,i);return!0}abandonNode(t){if(this.preventAdoptAndAbandon)return!1;Zr(Hc,t);const e=this.#Ai;for(const i of ku(t))e?.delete(i.id),i.document=null;return!0}onNodeParentChanged(t,e){e&&t.parent&&t.isElement&&t.isTransformable&&function(t,e){if(!t||!e||!t.isTransformable)return!1;const i=e.globalMatrix,n=t.parent,s=new hi;n&&s.multiplyInverse(n.globalMatrix),i&&!i.isIdentity&&s.multiply(i),zg(t,s,0)}(t,e)}find(t){return this.nodeCache.get(t)||null}get picture(){if(void 0===this.#ze){const t=this.pictureBounds;if(!t.isVisible)return this.#ze=null;const e=new Skia.SkPictureRecorder,i=new br(e.beginRecording(t));for(const t of this.children())t.draw(i);this.#ze=e.finishRecordingAsPicture(t)||null,e.delete(),i.dispose()}return this.#ze}get pictureBounds(){return this.#Te??=Ve.merge(this.#Ei())}computeLocalBounds(){return Ve.merge(this.#Oi())}computeLocalBoundsPoints(){return st}*#Oi(){for(const t of this.children())!t.isInvisible&&t.hasChildren&&(yield t.localBounds)}*#Ei(){for(const t of this.children())!t.isInvisible&&t.hasChildren&&(yield t.pictureAndFiltersBounds)}invalidateBounds(){this.#Te=null,super.invalidateBounds()}invalidateGraphics(){void 0!==this.#ze&&(this.#ze?.delete(),this.#ze=void 0),function(t){$c&&t===$c&&au()}(this)}get nodeCache(){return this.#Ai??=xu(this)}get hasNodeCache(){return null!=this.#Ai}};class Kg extends mu{constructor(){super(...arguments),this.nodeType=4,this.supportsFilters=!1,this.supportsContext=!1,this.isTransformable=!1,this.isRenderable=!1,this.#Wi=void 0,this.#Ri=void 0,this.#Bi=void 0}#Wi;#Ri;#Bi;get supportsChildren(){return!1}dispose(){super.dispose(),this.#Bi?.delete(),this.#Bi=null,this.#Wi=this.#Ri=null}cloneProperties(t){super.cloneProperties(t),t.#Wi=this.#Wi,t.#Ri=this.#Ri,t.#Bi=this.#Bi?this.#Bi.clone():this.#Bi}get element(){const t=this.parent;return t?t.isFilterContainer?t.parent:t instanceof Kg?t.element:null:null}get inputBounds(){return void 0===this.#Wi?this.#Wi=this.#Ui():this.#Wi}#Ui(){const t=this.previousSibling;return t?t.outputBounds:this.parent?.inputBounds||null}get outputBounds(){if(void 0===this.#Ri){const t=this.inputBounds;return!this.providesBounds||this.isInvisible||this.isIdentity?this.#Ri=t:this.#Ri=this.computeOutputBounds(t)}return this.#Ri}computeOutputBounds(t){return t}get filter(){if(void 0===this.#Bi){const t=this.#$i();if(this.isIdentity||this.isInvisible)return this.#Bi=t?t.clone():null;const e=this.computeFilter(t,this.needsBounds?this.outputBounds:null);return this.#Bi=null==e||e===t?t?.clone()||null:e}return this.#Bi}#$i(){const t=this.previousSibling;return t?t.filter:null}onChildMoved(t){}onChildAdded(t,e){}onChildRemoved(t){}onSiblingsChanged(){}onParentChanged(t,e){super.onParentChanged(t,e),this.invalidate(!0)}onVisibilityChanged(){this.invalidateChain()}invalidateGraphics(){this.#Bi?.delete(),this.#Bi=void 0}invalidateBounds(){this.#Wi=this.#Ri=void 0,super.invalidateBounds()}invalidate(t,e){t&&this.invalidateBounds(),this.invalidateGraphics(),e&&this.parent?.onChildGraphicsChanged(this,t,e)}invalidateFilter(){this.isInvisible?(this.invalidateGraphics(),this.invalidateBounds()):this.invalidateChain()}invalidateChain(){let t=this;for(;t;)t.invalidate(!0,!1),t=t.nextSibling;this.parent?.onChildGraphicsChanged(this,!0)}computeLocalBounds(){return this.outputBounds||Ve.ZERO}}class Xg extends Kg{#Fi=void 0;dispose(){this.#Fi?.delete(),this.#Fi=void 0,super.dispose()}get providesBounds(){return!1}get needsBounds(){return!1}computeFilter(t){const e=this.colorFilter;return e?Skia.SkImageFilter.MakeColorFilter(e,t):null}get colorFilter(){return void 0===this.#Fi?this.#Fi=this.computeColorFilter():this.#Fi}cloneProperties(t){super.cloneProperties(t),this.#Fi?t.#Fi=this.#Fi.clone():t.#Fi=this.#Fi}invalidateGraphics(){super.invalidateGraphics(),this.#Fi?.delete(),this.#Fi=void 0}}const tm=new mr;class em extends Xg{computeColorFilter(){return this.computeColorMatrix(tm.reset()),tm.isIdentity?null:Skia.SkColorFilter.MakeMatrix(tm.value)}}class im extends Kg{#nt=0;toJSON(){const t=super.toJSON();return this.#nt>0&&(t.radius=this.#nt),t}applyJSON(t){super.applyJSON(t);let e=t.radius;if(null==e){let i=t.x||0,n=t.y??i;e=Math.sqrt(i**2+n**2)}this.#nt=e||0}cloneProperties(t){super.cloneProperties(t),t.#nt=this.#nt}get needsBounds(){return!1}get providesBounds(){return!0}get type(){return"filter:blur"}get isIdentity(){return 0===this.#nt}get radius(){return this.#nt}set radius(t){t<0&&(t=0),this.#nt!==t&&(this.#nt=t,this.invalidateFilter())}computeOutputBounds(t){const e=3*this.#nt;return t?.outset(e,e)}computeFilter(t){return Skia.SkImageFilter.MakeBlur(this.#nt,this.#nt,Skia.SkTileMode.Decal,t)}}class nm extends em{#Vi=1;#Hi=1;#Gi=1;#Zi=0;#Yi=0;#Qi=0;#Ji=0;get type(){return"filter:color-adjust"}cloneProperties(t){super.cloneProperties(t),t.#Vi=this.#Vi,t.#Hi=this.#Hi,t.#Gi=this.#Gi,t.#Zi=this.#Zi,t.#Yi=this.#Yi,t.#Qi=this.#Qi,t.#Ji=this.#Ji}toJSON(){const t=super.toJSON();return t.brightness=this.#Vi,t.contrast=this.#Hi,t.saturate=this.#Gi,t.hueRotate=this.#Zi,t.invert=this.#Yi,t.grayscale=this.#Qi,t.sepia=this.#Ji,t}applyJSON(t){super.applyJSON(t),this.#Vi=t.brightness,this.#Hi=t.contrast,this.#Gi=t.saturate,this.#Zi=t.hueRotate,this.#Yi=t.invert,this.#Qi=t.grayscale,this.#Ji=t.sepia}get isIdentity(){return 1===this.#Vi&&1===this.#Hi&&1===this.#Gi&&this.#Zi%360==0&&0===this.#Yi&&0===this.#Qi&&0===this.#Ji}get brightness(){return this.#Vi}set brightness(t){this.#Vi!==t&&(this.#Vi=t,this.invalidateFilter())}get contrast(){return this.#Hi}set contrast(t){this.#Hi!==t&&(this.#Hi=t,this.invalidateFilter())}get saturate(){return this.#Gi}set saturate(t){this.#Gi!==t&&(this.#Gi=t,this.invalidateFilter())}get hueRotate(){return this.#Zi}set hueRotate(t){this.#Zi!==t&&(this.#Zi=t,this.invalidateFilter())}get invert(){return this.#Yi}set invert(t){this.#Yi!==t&&(this.#Yi=t,this.invalidateFilter())}get grayscale(){return this.#Qi}set grayscale(t){this.#Qi!==t&&(this.#Qi=t,this.invalidateFilter())}get sepia(){return this.#Ji}set sepia(t){this.#Ji!==t&&(this.#Ji=t,this.invalidateFilter())}computeColorMatrix(t){t.brightness(this.#Vi).contrast(this.#Hi).saturate(this.#Gi).hueRotate(this.#Zi).invert(this.#Yi).grayscale(this.#Qi).sepia(this.#Ji)}}se.fromCode(16770432),se.fromCode(3375104);class sm extends Kg{#n=ce.ZERO;#qi=0;#Ki=se.black;get type(){return"filter:drop-shadow"}get needsBounds(){return!1}get providesBounds(){return!0}get offset(){return this.#n}set offset(t){this.#n.equals(t)||(this.#n=t,this.invalidateFilter())}get blur(){return this.#qi}set blur(t){t<0&&(t=0),this.#qi!==t&&(this.#qi=t,this.invalidateFilter())}get color(){return this.#Ki}set color(t){this.#Ki.equals(t)||(this.#Ki=t,this.invalidateFilter())}get isIdentity(){return 0===this.#Ki.a}computeOutputBounds(t){if(!t)return null;let{x:e,y:i,width:n,height:s}=t;const r=this.#n;r.isZero||(r.x<0?(e+=r.x,n-=r.x):n+=r.x,r.y<0?(i+=r.y,s-=r.y):s+=r.y);const o=3*this.#qi;return o>0&&(e-=o,e-=o,n+=2*o,i-=o,s+=2*o),new Ve(e,i,n,s)}computeFilter(t){return Skia.SkImageFilter.MakeDropShadow(this.#n.x,this.#n.y,this.#qi,this.#qi,this.#Ki.code,t)}cloneProperties(t){super.cloneProperties(t),t.#n=this.#n,t.#qi=this.#qi,t.#Ki=this.#Ki}applyJSON(t){super.applyJSON(t);let e=t.blur;null==e&&t.radius instanceof ce&&(e=t.radius.length),this.#qi=e||0,this.#n=t.offset??ce.ZERO,this.#Ki=t.color||se.black}toJSON(){const t=super.toJSON();return this.#n.isZero||(t.offset=this.#n),this.#qi>0&&(t.blur=this.#qi),t.color=this.#Ki,t}}se.fromCode(16770432),se.fromCode(3375104);const rm=ha(qc),om={start:0,end:0};let am=null;function lm(t,e){return(om.start!==t||om.end!==e)&&(om.start=t,om.end=e,am&&rm(),!0)}function cm(){return!!um(oh())&&(rm(),!0)}function um(t){if(t instanceof Sg||(t=null),am===t)return!1;const e=null===am;return am=t,om.start=om.end=0,!(!am&&e)}const hm={start:0,end:0};function dm(){return am?[om.start,om.end]:null}function fm(t){if(am=null,om.start=om.end=0,t&&um(oh())){const e=am.text.length;om.start=Math.min(t[0],e),om.end=Math.max(t[1],e)}}gr=t=>t===am?om:hm,Yr(Vc,cm),Yr(Yc,cm),Yr(Qc,cm),Yr(so,(()=>{So({id:"text-selection",priority:-800,get:dm,set:fm})}));const pm=ha(Jc);let gm=new Map;function mm(){return!gm.size}function vm(t){return gm.get(t)||null}function ym(){return!!gm.size&&(gm.clear(),pm(),!0)}function xm(){return gm.entries()}function bm(t,e,i){if(!hh(t))return!1;if(gm.has(t)){const n=gm.get(t);if(i){if(n.has(e))return!1}else{if(n.has(e)&&1===n.size&&1===gm.size)return!1;n.clear(),gm.clear(),gm.set(t,n)}return n.add(e),pm(),!0}i||gm.clear();const n=new Set;return n.add(e),gm.set(t,n),pm(),!0}function wm(t,e){let i;if(Im(t))i=t.nodes.length;else if(t instanceof qp)i=t.points.length;else{if(!(t instanceof tg))return!1;i=2}const n=new Array(i);for(let t=0;t<i;t++)n[t]=t;return Mm(t,n,e)}function Mm(t,e,i){if(!hh(t))return!1;if(gm.has(t)){const n=gm.get(t);if(function(t,e){if(t.size!==e.length)return!1;for(const i of e)if(!t.has(i))return!1;return!0}(n,e))return!1;i||(n.clear(),gm.clear(),gm.set(t,n));for(const t of e)n.add(t);return pm(),!0}return i||gm.clear(),gm.set(t,new Set(e)),pm(),!0}function Sm(t,e){if(!gm.has(t))return!1;const i=gm.get(t);return!!i.has(e)&&(i.delete(e),i.size||gm.delete(t),pm(),!0)}function km(t){if(!gm.has(t))return!1;const e=function(t){return t instanceof Jp||t instanceof ig?t.path.nodes.length:t instanceof qp?t.points.length:0}(t);if(!e)return!1;let i=!1;const n=gm.get(t);for(const t of[...n])t>=e&&(n.delete(t),i=!0);return i&&t.document===$c&&pm(),i}function _m(t){return t instanceof Jp||t instanceof qp||t instanceof tg||t instanceof ig}function Im(t){return t instanceof Jp||t instanceof ig}function Cm(t,e){return Im(t)?t.nodes[e]?.point:t instanceof tg||t instanceof qp?t.points[e]:null}function*Lm(t){const e=gm.get(t);if(!e?.size)return;const i=t.nodes;for(const t of e)i[t]&&(yield i[t])}function Nm(t,e){const i=function(t){return t instanceof Jp||t instanceof ig?t.path.nodes:t instanceof qp||t instanceof tg?t.points:null}(t);return i?.length?function(t,e,i){null!=i&&i.isIdentity&&(i=null);let n,s=null;for(let r=0,o=e.length;r<o;r++)n=i?i.point(e[r].x,e[r].y):e[r],t.contains(n.x,n.y)&&(s??=new Set).add(r);return s}(e,i,t.globalMatrix):null}function jm(t,e){return t.isVisible?zm(t,e):ym()}function zm(t,e){let i=!1;const n=Th(_m);if(e)for(const e of n){const n=Nm(e,t);if(n)if(i=!0,gm.has(e)){const t=gm.get(e);for(const e of n)t.has(e)?t.delete(e):t.add(e)}else gm.set(e,n)}else{const e=new Set(gm.keys());for(const s of n){const n=Nm(s,t);n?(e.delete(s),gm.has(s)&&Pm(n,gm.get(s))||(gm.set(s,n),i=!0)):gm.has(s)&&(gm.delete(s),e.delete(s),i=!0)}if(e.size){for(const t of e)gm.delete(t);i=!0}}return!!i&&(pm(),!0)}function Pm(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function Tm(){if(!gm.size)return null;const t=new Map;for(const[e,i]of gm)i.size&&t.set(e.id,[...i].sort(ot));return t}function Am(t){if(gm.clear(),t?.size)for(const[e,i]of t){const t=$c.find(e);t&&hh(t)&&gm.set(t,new Set(i))}}Yr(so,(()=>{So({id:"point-selection",priority:-700,get:Tm,set:Am})})),Yr(Hc,(function(t){if(!gm.size)return!1;let e=!1;for(const i of[...gm.keys()])(i===t||t.contains(i))&&(gm.delete(i),e=!0);return e&&pm(),e})),Yr(Qc,(function(){if(!gm.size)return!1;if(ch())return ym();let t=!1;for(const e of gm.keys())hh(e)||(gm.delete(e),t=!0);return t&&pm(),t}));const Dm="tree-folding",Em=ha(Kc);function Om(t){return t??=Oo,t[Dm]??=new Set}function Wm(t){return Om().has(t.id)}function Rm(t){if(!t||!Bm(t))return!1;const e=t.id,i=Om();return i.has(e)?i.delete(e):i.add(e),Em(),!0}function Bm(t){return!(!t.supportsChildren||!t.hasChildren)||!(!t.isElement&&!t.isLayer)&&null!=t.filters}xo({id:Dm,serialization:Bo(5,(function(){!function(){const t=Om();for(const e of t)$c.find(e)||t.delete(e)}();const t=Om();return t.size?t:null}))});const Um=ha(Vc);function $m(t){return t instanceof Bh||t instanceof Sg}function Fm(t){return t instanceof Bh}function Vm(t){return t instanceof Sg}function Hm(t){if(t??=$c,t.hasChildren)return!1;const e=new Cg;return e.title="Layer 1",t.appendChild(e),t===$c&&Um(),!0}function Gm(t){if(!t?.length)return!1;if(Au())if(Nu()){let e=Tu();const i=e.parent;for(const n of t)i.insertAfter(n,e),Uu(n),e=n}else{const e=Pu();for(const i of t)e.appendChild(i)}else{const e=uh();for(const i of t)e.appendChild(i)}return Um(),!0}function Zm(t){const e=nv(t);t.remove(),t.dispose(),e&&Um()}function Ym(t){let e=!1,i=!1;for(const n of t)!i&&nv(n)&&(i=!0),e=!0,n.remove(),n.dispose();return i&&Um(),e}function Qm(){return!ch()&&!!Ym(ah())&&(Hm(),!0)}function Jm(t){if(t.isFragment)return null;const e=t.clone(!0);return e.title=function(t,e){if(t&&(t=t.trim()),null==t||""===t)return _u.has(e)?`${_u.get(e)} (copy)`:null;const i=t.replace(/\(copy(?:\s(\d+))?\)\s*$/i,(function(t,e){return`(copy ${parseInt(e??"1")+1})`}));return i!==t?i:`${t} (copy)`}(t.title,t.type),t.parent.insertAfter(e,t),nv(e)&&(Um(),Zr(Zc,[t,e])),e}function qm(t,e,i){const n=t.parent,s=t.previousSibling,r=nv(t);r&&Zr(Gc,[t,e]),n.removeChild(t),i||null==s?n.prependChild(e):n.insertAfter(e,s),r&&Um()}function Km(t,e,i="append",n){if("append"===i||"prepend"===i)switch(t.nodeType){case 3:if(!e.supportsFilters)return!1;if(e.isLayer||e.isElement)return null==e.filters&&(e.filters=t,nv(e)&&Um(),!0);break;case 4:if(e.isLayer||e.isElement){if(!e.supportsFilters)return!1;e.filters??=new vu,e=e.filters}}if(n){if(!e.insertAdjacentNodes(i,t,...n))return!1}else if(!e.insertAdjacentNodes(i,t))return!1;return nv(e)&&Um(),!0}function Xm(t,e,i=!0){const n=[],s=[];for(const r of t)r instanceof e&&r.isElement&&r.supportsChildren&&(r.hasChildren?(n.push(...tv(r)),i&&s.push(r)):i&&s.push(r));return s.length>0&&Ym(s),n}function tv(t){if(!t.isElement)return[];let e=t.localMatrix;e.isIdentity&&(e=null);const i=[],n=t.document;try{n&&(n.preventAdoptAndAbandon=!0);const e=t.parent;let s=t;for(const n of[...t.children()])e.acceptsChild(n)&&n.acceptsParent(e)&&(i.push(n),e.insertAfter(n,s),s=n)}finally{n&&(n.preventAdoptAndAbandon=!1,i.length&&$c===n&&Um())}return i}function ev(t,e,i){let n=!1,s=!1;null!=i&&(t=yu([...t],i,!0));for(const i of t)e(i)&&(n=!0,!s&&nv(i)&&(s=!0));return s&&Um(),n}function iv(t,e){const i=new Qp(t.id);return i.hidden=t.hidden,i.visible=t.visible,i.title=t.title,i.opacity=t.opacity,i.isolate=t.isolate,i.blend=t.blend,t.filters&&(i.filters=t.filters),t.hasChildren&&i.insertAdjacentNodes("append",...t.children()),e&&(t.remove(),t.dispose()),i}function nv(t){return null!=$c&&$c===t.document}function sv(t){const e=[...t.paragraph.pathsWithStyle()];if(!e.length)return null;const i=e.length-1;let n=!0;for(let t=1;t<=i;t++)if(!e[t][1].samePaint(e[t-1][1])){n=!1;break}if(n){let n;const s=e[0][1];if(0===i)n=e[0][0].copy();else{n=new Skia.SkPath;for(const t of e)n.addPath(t[0])}e.splice(0);const r=new Jp(es.fromSkPath(n,!0),t.id);return lv(t,r),uv(t,r),hv(s,r),r.fillRule=0,r}const s=new Qp(t.id);lv(t,s),uv(t,s);for(const[t,i]of e){const e=new Jp(es.fromSkPath(t.copy(),!0));hv(i,e),e.fillRule=0,s.appendChild(e)}return s.hasChildren?s:(s.dispose(),null)}function rv(t){const e=[...t.paragraph.splitChars()];if(!e.length)return null;const i=new Qp(t.id);lv(t,i),uv(t,i);for(const[t,n,s]of e){const e=new Jp(es.fromSkPath(t,!0));e.title=s,hv(n,e),e.fillRule=0,i.appendChild(e)}return i.hasChildren?i:(i.dispose(),null)}function ov(t,e){let i=null;if(t instanceof Uh?i=t.shape.convertToPath():t instanceof Bh?i=t.localPath.copy():t instanceof Sg?(i=t.paragraph.path.copy(),i.fillType=Skia.SkPathFillType.Winding):t instanceof ig&&(i=t.path.convertToPath()),!i)return null;if(e&&!i.isEmpty){const e=t.globalMatrix;e?.isIdentity||i.transform(e)}return i}function av(t,e){t!==e&&(lv(t,e),uv(t,e),hv(t,e),e.fillRule=t.fillRule)}function lv(t,e){e.opacity=t.opacity,e.blend=t.blend,e.isolate=t.isolate,cv(t,e)}function cv(t,e){e.hidden=t.hidden,e.locked=t.locked,e.visible=t.visible,e.title=t.title}function uv(t,e){e.orientation=t.orientation,e.autoOrientAngle=t.autoOrientAngle,e.position=t.position,e.anchor=t.anchor,e.scale=t.scale,e.rotate=t.rotate,e.skewAngle=t.skewAngle,e.skewAxis=t.skewAxis}function hv(t,e){e.fillOpacity=t.fillOpacity,e.fill=t.fill,e.paintOrder=t.paintOrder,e.strokeOpacity=t.strokeOpacity,t instanceof Bh?e.stroke=t.stroke.clone():(e.strokeBrush=t.strokeBrush.clone(),e.strokeLineWidth=t.strokeLineWidth,e.strokeLineJoin=t.strokeLineJoin,e.strokeLineCap=t.strokeLineCap,e.strokeMiterLimit=t.strokeMiterLimit,e.strokeDashArray=t.strokeDashArray.slice(),e.strokeDashOffset=t.strokeDashOffset,e.strokeDashPathLength=t.strokeDashPathLength)}const dv=Hd;let fv,pv;function gv(t){return t instanceof Jp||t instanceof ig}function mv(t,e,i,n=.5,s){return Lv(t,Mn,e,i,n,s)}function vv(t,e){return Lv(t,Sn,e)}function yv(t,e,i){return Lv(t,gn,e,i)}function xv(t,e,i){return Lv(t,fn,e,i)}function bv(t,e,i){return Lv(t,pn,e,i)}function wv(t){return Lv(t,jn)}function Mv(t,e,i){return Lv(t,Ln,e,i)}function Sv(t,e,i){return Lv(t,In,e,i)}function kv(t,e){return!!Lv(t,Nn,e)&&(km(t),!0)}function _v(t,e,i,n,s){return Lv(t,wn,e,i,n,s)}function Iv(t,e,i){return!(!e.x&&!e.y)&&(t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e,!1)),Lv(t,mn,e.x,e.y,i))}function Cv(t,e,i,n,s){return t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e)),Lv(t,vn,e,i,n,s)}function Lv(t,e,...i){if(!gv(t))return!1;const n=e(t.nodes,...i);return t.nodes!==n&&!!jd(t,dv,n)&&(fv?.(t,e,i),!0)}const Nv=ep,jv=Xf;let zv;function Pv(t){return t instanceof qp}function Tv(t){return t instanceof tg}function Av(t,e,i){return Uv(t,vs.addPointAfter,e,i,t.isClosed)}function Dv(t,e){return!!Uv(t,vs.deletePoints,e)&&(km(t),!0)}function Ev(t){return Uv(t,Ov)}function Ov(t){return t.length>1?t.toReversed():t}function Wv(t,e,i){return!e.isZero&&(t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e,!1)),Uv(t,vs.movePointsBy,e.x,e.y,i))}function Rv(t,e,i){if(e.isZero)return!1;t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e,!1));const n=vs.movePointsBy(t.points,e.x,e.y,i);return t.points!==n&&jd(t,jv,n)}function Bv(t){const e=t.points;return!e[0].equals(e[1])&&jd(Ip,jv,e.toReversed())}function Uv(t,e,...i){if(!Pv(t))return!1;const n=e(t.points,...i);return t.points!==n&&!!jd(t,Nv,n)&&(zv?.(t,e,i),!0)}const $v=new Vp,Fv=Symbol(),Vv=Symbol(),Hv=new Map,Gv=new Map,Zv=new Set,Yv=new Set;function Qv(t){for(const[e,i]of t){if(!Hv.has(e)){Yv.add(e),Hv.set(e,new Set);for(const t of e.groups)Zv.add(t)}Hv.get(e).add(i)}!function(t){if(ch()?function(t,e){for(const i of t){if(!$v.hasValue(i)){Gv.get(i)!==Fv&&(Gv.set(i,Fv),e.add(i));continue}const t=$v.getValue(i);Gv.has(i)&&iy(i,t,Gv.get(i))||(Gv.set(i,t),e.add(i))}}(t,qv):1===lh()?(Jv[0]=oh(),ey(t,Jv,qv),Jv[0]=null):ey(t,rh(),qv),qv.size){for(const t of qv){let e=Gv.get(t);const i=e===Vv,n=e===Fv;(i||n)&&(e=void 0);for(const s of Hv.get(t))s(e,i,n)}qv.clear()}}(new Set(t.keys()))}const Jv=[null],qv=new Set,Kv=new Set,Xv=new Set,ty=new Set;function ey(t,e,i){t:for(const n of e)for(const e of t){if(Kv.has(e))continue;if(!bd(n,e)){Xv.has(e)||ty.add(e);continue}const s=e.getValue(n);if(Xv.has(e)){if(!iy(e,s,Gv.get(e))&&(Gv.set(e,Vv),i.add(e),Kv.add(e),Kv.size===t.size))break t}else Gv.has(e)?iy(e,s,Gv.get(e))||(Gv.set(e,e.handler.cloneValue(s)),i.add(e)):(Gv.set(e,s),i.add(e)),Xv.add(e),ty.delete(e)}for(const t of ty)Gv.get(t)!==Fv&&(Gv.set(t,Fv),i.add(t));Kv.clear(),Xv.clear(),ty.clear()}function iy(t,e,i){return e===i||e!==Fv&&e!==Vv&&i!==Fv&&i!==Vv&&t.handler.sameValue(e,i)}class ny extends Rh{get isTransformable(){return!1}}J([mg,"ClipGroupElement"],[ng,"ClipPathElement"],[Zp,"EllipseElement"],[Qp,"GroupElement"],[tg,"LineElement"],[ag,"MaskElement"],[Jp,"PathElement"],[qp,"PolyElement"],[Kp,"RectElement"],[Xp,"RegularPolygonElement"],[eg,"StarElement"],[og,"SymbolElement"],[kg,"TextElement"],[Ig,"StyledTextElement"],[_g,"TextStyleElement"],[gg,"ImageElement"],[Cg,"Layer"],[qg,"Document"],[vu,"FilterContainer"],[im,"BlurFilter"],[nm,"ColorAdjustFilter"],[sm,"DropShadowFilter"]),q("ClipPathElement",(function(t){const e=t.path,i=t.id;t.id=null,delete t.path;const n=mg.fromJSON(t),s=new ng(e,i);return n.prependChild(s),n}),300,400,500),Yr(so,(()=>{!function(){const t=[Xd,tf,ef,rf,sf,nf,af,of,cf];vd(Cg),yd(Cg,...Object.values(Dd),Zd),vd(Rh),yd(Rh,Td,Pd,...Object.values(Fd)),vd(ny),xd(ny,(t=>t.id.startsWith("node.transform."))),vd(ig),xd(ig,(t=>t.id.startsWith("node.compositing."))),vd(Bh),yd(Bh,...Object.values(Kd),...Object.values(ff)),vd(Uh),vd(sg),yd(sg,...Object.values(Wf)),vd(Qp),yd(Qp,Ad),vd(ag),vd(Sg),yd(Sg,...Object.values(Kd),...t,...Object.values(Mf),...Object.values(Df),Lf),vd(kg),vd(Ig),vd(_g),xd(_g,(t=>t.id.startsWith("node.compositing."))),yd(_g,...Object.values(Kd),...t,...Object.values(Df),...Object.values(Cf)),vd(mg),yd(mg,Ad,...Object.values(Bf)),vd(ng),yd(ng,...Object.values(Uf)),vd(gg),yd(gg,...Object.values(Kf)),vd(tg),yd(tg,...Object.values(tp)),vd(Jp),yd(Jp,...Object.values(sp)),vd(qp),yd(qp,...Object.values(np)),vd(Xp),yd(Xp,...Object.values(cp)),vd(eg),yd(eg,...Object.values(yp)),vd(Zp),yd(Zp,...Object.values(Yf)),vd(Kp),yd(Kp,...Object.values(Hf)),vd(og),yd(og,...Object.values(_p)),vd(im),yd(im,...Object.values(Lp)),vd(nm),yd(nm,...Object.values(Ep)),vd(sm),yd(sm,...Object.values(Bp))}(),Mo({id:"document",priority:-1e3,update:Fc,copy:null,delete:null,serialization:{marker:3,serialize:new class extends Wo{begin(t){return t.fontMap=function(){const t=new Set;if(function(t,e){e??=new Set;for(const i of Su(t,!0))i instanceof Sg&&i.collectFonts(e)}($c,t),!t.size)return;let e;for(const i of t){const t=Fs(i);t?.length>1&&(e??={},e[t[0]]=t)}return e}(),super.begin(t)}async*items(){$c&&(yield this.serializeData($c))}},deserialize:new class extends Ro{#Yt;async begin(t,e){await super.begin(t,e),function(t){if(t)for(const e of Object.values(t))Us(e)}(t.fontMap)}async add(t){this.#Yt=await this.deserializeData(t)}async compute(){return this.#Yt}async end(){return this.#Yt&&(await async function(t){const e=new Set,i=new Set;for(const n of Su(t,!0))if(n instanceof Sg){if(n.collectFonts(i),0===i.size)continue;let t=!1;for(const n of i)Vs(n)?e.add(n):Hs(n)||((await Zs(n)).includes(n)&&e.add(n),t=!0);i.clear(),t&&n.invalidateParagraph()}e.size&&Zr(ou,e)}(this.#Yt),this.#Yt=void 0),super.end()}}}})}));const sy=new Map,ry=new Map,oy=new Map;let ay;function ly(t,e,i){var n;t&&(n=t.mime,sy.set(n,(async(e,i)=>t.paste(e,i)))),e&&(function(t){ry.set(t,(async t=>e.copy(t)))}(e.mime),i&&function(t,e){oy.set(t,e)}(e.mime,i))}async function cy(t,e){await hy(t,e)}async function uy(t){return!!await hy(t)&&!!oy.has(t)&&oy.get(t)(t)}async function hy(t,e){if(!ry.has(t))return!1;const i=await ry.get(t)(e??null,t);return!!i&&Tt(i)}async function dy(t,e){const i=await t.getType(e);return i&&0!==i.size?i:null}const fy=1702377317;class py{constructor(t,e){this.app=t,this.mime=e}async copy(t){return t??=await this.getInput(),null==t?null:this.#Xi(await this.getData(t))}async#Xi(t){if(null==t)return null;const e=pt((i=this.createManifest(t),n=this.iterateAllData(t),i.version||(i.version=Z),new ReadableStream({async start(t){const e=new Blob([JSON.stringify(i)],yt),n=new DataView(new Uint32Array(2).buffer);n.setUint32(0,1702377317),n.setUint32(4,e.size),t.enqueue(n.buffer),t.enqueue(await e.arrayBuffer())},async pull(t){const{value:e,done:i}=await n.next();if(i)return void t.close();let s;s=e[1]instanceof ArrayBuffer?e[1]:e[1]instanceof Blob?await e[1].arrayBuffer():await new Blob([tt(e[1])],yt).arrayBuffer();const r=new DataView(new Uint32Array(2).buffer);r.setUint32(0,e[0]),r.setUint32(4,s.byteLength),t.enqueue(r.buffer),t.enqueue(s)}})));var i,n;if(!e)return null;const s=this.mime;return new ClipboardItem({[s]:await ct(e,{type:s.startsWith("web ")?s.substring(4):s})})}createManifest(t){return{version:null,app:this.app}}}class gy extends py{*iterateAllData(t){yield[0,t]}}class my{constructor(t,e){this.app=t,this.mime=e}isAvailable(){return!0}clean(){this.manifest=this.options=null}async paste(t,e){if(this.options=e,!this.isAvailable())return!1;try{return await async function(t,e){const i=await ut(t),n=new DataView(i.buffer);let s=0,r=n.getUint32(s);if(!e.setPrefix(r))return e.cancel();s+=4;let o=n.getUint32(s);s+=4;let a=new DataView(n.buffer,s,o);s+=o;const l=JSON.parse(ft(a));if(!e.setManifest(l))return e.cancel();for(;!(s>=n.byteLength);)r=n.getUint32(s),s+=4,o=n.getUint32(s),s+=4,e.supportsItem(r)&&(a=new DataView(n.buffer,s,o),e.addItem(r,a)),s+=o;return e.resolve()}(gt(t.stream()),this)}catch(t){return Zr(ho,"Clipboard error"),!1}finally{this.clean()}}async deserializeData(t){return it(await new Blob([t],{type:"application/json"}).text(),null,this.manifest.version)}setPrefix(t){return t===fy||(Zr(uo,"Clipboard contains unrecognised data"),!1)}setManifest(t){return t.version>Z?(Zr(uo,"Clipboard contains data created with a newer version of the app"),!1):(this.manifest=t,!!t.app.startsWith("expressive/")||(Zr(uo,"Clipboard contains unsupported data"),!1))}cancel(){return!1}}class vy extends my{#Yt;supportsItem(t){return 0===t}addItem(t,e){0===t&&(this.#Yt=e)}async resolve(){if(!this.#Yt)return Zr(lo,"Clipboard is empty"),!1;const t=await this.deserializeData(this.#Yt);return this.#Yt=null,t?this.handle(t):(Zr(ho,"Invalid clipboard data"),!1)}clean(){this.#Yt=null,super.clean()}}const yy={top:{alignX:.5,alignY:0,dirX:0,dirY:-1,offsetX:0,offsetY:4},"top-left":{alignX:0,alignY:0,dirX:1,dirY:-1,offsetX:0,offsetY:4},"top-right":{alignX:1,alignY:0,dirX:-1,dirY:-1,offsetX:0,offsetY:4},bottom:{alignX:.5,alignY:1,dirX:0,dirY:1,offsetX:0,offsetY:4},"bottom-right":{alignX:1,alignY:1,dirX:-1,dirY:1,offsetX:0,offsetY:4},"bottom-left":{alignX:0,alignY:1,dirX:1,dirY:1,offsetX:0,offsetY:4}};let xy=null,by=!1;function wy(){return xy||(xy=document.querySelector("cc-shell"),by=xy.hasAttribute("titlebar")),xy}function My(t){wy().blockPointerEvents(t)}function Sy(t,e="normal",i){return wy().showToast(t,e,i)}async function ky(t,e,i,n=!0){let s;return s="string"==typeof i?yy[i]:i,wy().showContextMenu(t,e,s,n)}async function _y(t,e){return wy().showDialog(t,e)}let Iy=null;async function Cy(t,e){return Iy??=document.createElement("cc-loading-dialog-content"),_y(Iy,{message:t,done:e,animated:!0})}async function Ly(t,e,i=300){if(!(t instanceof Promise))return t;if(!i)return Cy(e,t);let n,s;const r=setTimeout((()=>{n=Cy(e,new Promise((t=>s=t)))}),i);let o;try{o=await t}finally{clearTimeout(r),n&&(s?.(o),await n)}return o}let Ny=null;async function jy(t){return Ny??=document.createElement("cc-confirm-dialog-content"),wy().showDialog(Ny,t)}const zy=new BroadcastChannel("cc");function Py(t){wy().style.cursor=t||"auto"}const Ty="cc-computed-theme-changed",Ay=document.querySelector('meta[name="theme-color"]');let Dy=Oy();By();let Ey=!1;function Oy(){return localStorage.getItem("theme")||"auto"}function Wy(){const t="auto"===Dy?Ey?"dark":"light":Dy;Ry(t),window.dispatchEvent(new CustomEvent(Ty,{detail:t}))}function Ry(t){Ay?.setAttribute("content","dark"===t?"#1D1D1D":"#FFF")}function By(){document.documentElement.style.setProperty("--theme",Dy)}function Uy(t){return Dy!==t&&(Dy=t,localStorage.setItem("theme",Dy),By(),Wy(),zy.postMessage({type:"theme",value:Dy}),!0)}function $y(){return Dy}function Fy(t,e){e?window.addEventListener(Ty,t):window.removeEventListener(Ty,t)}(()=>{const t=matchMedia("(prefers-color-scheme: dark)");Ey=t.matches,t.addEventListener("change",(t=>{Ey=t.matches,"auto"===Dy&&Wy()}),{capture:!0,passive:!0}),"auto"===Dy?Wy():Ry(Dy),zy.addEventListener("message",(t=>{"theme"===t.data.type&&Uy(Oy())}))})();const Vy=globalThis,Hy=Vy.ShadowRoot&&(void 0===Vy.ShadyCSS||Vy.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Gy=Symbol(),Zy=new WeakMap;let Yy=class{constructor(t,e,i){if(this._$cssResult$=!0,i!==Gy)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(Hy&&void 0===t){const i=void 0!==e&&1===e.length;i&&(t=Zy.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&Zy.set(e,t))}return t}toString(){return this.cssText}};const Qy=t=>new Yy("string"==typeof t?t:t+"",void 0,Gy),Jy=(t,...e)=>{const i=1===t.length?t[0]:e.reduce(((e,i,n)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[n+1]),t[0]);return new Yy(i,t,Gy)},qy=Hy?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return Qy(e)})(t):t,{is:Ky,defineProperty:Xy,getOwnPropertyDescriptor:tx,getOwnPropertyNames:ex,getOwnPropertySymbols:ix,getPrototypeOf:nx}=Object,sx=globalThis,rx=sx.trustedTypes,ox=rx?rx.emptyScript:"",ax=sx.reactiveElementPolyfillSupport,lx={toAttribute(t,e){switch(e){case Boolean:t=t?ox:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},cx=(t,e)=>!Ky(t,e),ux={attribute:!0,type:String,converter:lx,reflect:!1,hasChanged:cx};Symbol.metadata??=Symbol("metadata"),sx.litPropertyMetadata??=new WeakMap;class hx extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=ux){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const i=Symbol(),n=this.getPropertyDescriptor(t,i,e);void 0!==n&&Xy(this.prototype,t,n)}}static getPropertyDescriptor(t,e,i){const{get:n,set:s}=tx(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get(){return n?.call(this)},set(e){const r=n?.call(this);s.call(this,e),this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??ux}static _$Ei(){if(this.hasOwnProperty("elementProperties"))return;const t=nx(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty("finalized"))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty("properties")){const t=this.properties,e=[...ex(t),...ix(t)];for(const i of e)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,i]of e)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const i=this._$Eu(t,e);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(qy(t))}else void 0!==t&&e.push(qy(t));return e}static _$Eu(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const i of e.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{if(Hy)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const i of e){const e=document.createElement("style"),n=Vy.litNonce;void 0!==n&&e.setAttribute("nonce",n),e.textContent=i.cssText,t.appendChild(e)}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EC(t,e){const i=this.constructor.elementProperties.get(t),n=this.constructor._$Eu(t,i);if(void 0!==n&&!0===i.reflect){const s=(void 0!==i.converter?.toAttribute?i.converter:lx).toAttribute(e,i.type);this._$Em=t,null==s?this.removeAttribute(n):this.setAttribute(n,s),this._$Em=null}}_$AK(t,e){const i=this.constructor,n=i._$Eh.get(t);if(void 0!==n&&this._$Em!==n){const t=i.getPropertyOptions(n),s="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:lx;this._$Em=n,this[n]=s.fromAttribute(e,t.type),this._$Em=null}}requestUpdate(t,e,i){if(void 0!==t){if(i??=this.constructor.getPropertyOptions(t),!(i.hasChanged??cx)(this[t],e))return;this.P(t,e,i)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,e,i){this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,i]of t)!0!==i.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],i)}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}}hx.elementStyles=[],hx.shadowRootOptions={mode:"open"},hx.elementProperties=new Map,hx.finalized=new Map,ax?.({ReactiveElement:hx}),(sx.reactiveElementVersions??=[]).push("2.0.4");const dx=globalThis,fx=dx.trustedTypes,px=fx?fx.createPolicy("lit-html",{createHTML:t=>t}):void 0,gx="$lit$",mx=`lit$${(Math.random()+"").slice(9)}$`,vx="?"+mx,yx=`<${vx}>`,xx=document,bx=()=>xx.createComment(""),wx=t=>null===t||"object"!=typeof t&&"function"!=typeof t,Mx=Array.isArray,Sx=t=>Mx(t)||"function"==typeof t?.[Symbol.iterator],kx="[ \t\n\f\r]",_x=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ix=/-->/g,Cx=/>/g,Lx=RegExp(`>|${kx}(?:([^\\s"'>=/]+)(${kx}*=${kx}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Nx=/'/g,jx=/"/g,zx=/^(?:script|style|textarea|title)$/i,Px=(t,...e)=>({_$litType$:1,strings:t,values:e}),Tx=Symbol.for("lit-noChange"),Ax=Symbol.for("lit-nothing"),Dx=new WeakMap,Ex=xx.createTreeWalker(xx,129);function Ox(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==px?px.createHTML(e):e}const Wx=(t,e)=>{const i=t.length-1,n=[];let s,r=2===e?"<svg>":"",o=_x;for(let e=0;e<i;e++){const i=t[e];let a,l,c=-1,u=0;for(;u<i.length&&(o.lastIndex=u,l=o.exec(i),null!==l);)u=o.lastIndex,o===_x?"!--"===l[1]?o=Ix:void 0!==l[1]?o=Cx:void 0!==l[2]?(zx.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=Lx):void 0!==l[3]&&(o=Lx):o===Lx?">"===l[0]?(o=s??_x,c=-1):void 0===l[1]?c=-2:(c=o.lastIndex-l[2].length,a=l[1],o=void 0===l[3]?Lx:'"'===l[3]?jx:Nx):o===jx||o===Nx?o=Lx:o===Ix||o===Cx?o=_x:(o=Lx,s=void 0);const h=o===Lx&&t[e+1].startsWith("/>")?" ":"";r+=o===_x?i+yx:c>=0?(n.push(a),i.slice(0,c)+gx+i.slice(c)+mx+h):i+mx+(-2===c?e:h)}return[Ox(t,r+(t[i]||"<?>")+(2===e?"</svg>":"")),n]};class Rx{constructor({strings:t,_$litType$:e},i){let n;this.parts=[];let s=0,r=0;const o=t.length-1,a=this.parts,[l,c]=Wx(t,e);if(this.el=Rx.createElement(l,i),Ex.currentNode=this.el.content,2===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(n=Ex.nextNode())&&a.length<o;){if(1===n.nodeType){if(n.hasAttributes())for(const t of n.getAttributeNames())if(t.endsWith(gx)){const e=c[r++],i=n.getAttribute(t).split(mx),o=/([.?@])?(.*)/.exec(e);a.push({type:1,index:s,name:o[2],strings:i,ctor:"."===o[1]?Vx:"?"===o[1]?Hx:"@"===o[1]?Gx:Fx}),n.removeAttribute(t)}else t.startsWith(mx)&&(a.push({type:6,index:s}),n.removeAttribute(t));if(zx.test(n.tagName)){const t=n.textContent.split(mx),e=t.length-1;if(e>0){n.textContent=fx?fx.emptyScript:"";for(let i=0;i<e;i++)n.append(t[i],bx()),Ex.nextNode(),a.push({type:2,index:++s});n.append(t[e],bx())}}}else if(8===n.nodeType)if(n.data===vx)a.push({type:2,index:s});else{let t=-1;for(;-1!==(t=n.data.indexOf(mx,t+1));)a.push({type:7,index:s}),t+=mx.length-1}s++}}static createElement(t,e){const i=xx.createElement("template");return i.innerHTML=t,i}}function Bx(t,e,i=t,n){if(e===Tx)return e;let s=void 0!==n?i._$Co?.[n]:i._$Cl;const r=wx(e)?void 0:e._$litDirective$;return s?.constructor!==r&&(s?._$AO?.(!1),void 0===r?s=void 0:(s=new r(t),s._$AT(t,i,n)),void 0!==n?(i._$Co??=[])[n]=s:i._$Cl=s),void 0!==s&&(e=Bx(t,s._$AS(t,e.values),s,n)),e}class Ux{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:i}=this._$AD,n=(t?.creationScope??xx).importNode(e,!0);Ex.currentNode=n;let s=Ex.nextNode(),r=0,o=0,a=i[0];for(;void 0!==a;){if(r===a.index){let e;2===a.type?e=new $x(s,s.nextSibling,this,t):1===a.type?e=new a.ctor(s,a.name,a.strings,this,t):6===a.type&&(e=new Zx(s,this,t)),this._$AV.push(e),a=i[++o]}r!==a?.index&&(s=Ex.nextNode(),r++)}return Ex.currentNode=xx,n}p(t){let e=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class $x{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,i,n){this.type=2,this._$AH=Ax,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Bx(this,t,e),wx(t)?t===Ax||null==t||""===t?(this._$AH!==Ax&&this._$AR(),this._$AH=Ax):t!==this._$AH&&t!==Tx&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):Sx(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==Ax&&wx(this._$AH)?this._$AA.nextSibling.data=t:this.T(xx.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:i}=t,n="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=Rx.createElement(Ox(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===n)this._$AH.p(e);else{const t=new Ux(n,this),i=t.u(this.options);t.p(e),this.T(i),this._$AH=t}}_$AC(t){let e=Dx.get(t.strings);return void 0===e&&Dx.set(t.strings,e=new Rx(t)),e}k(t){Mx(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,n=0;for(const s of t)n===e.length?e.push(i=new $x(this.S(bx()),this.S(bx()),this,this.options)):i=e[n],i._$AI(s),n++;n<e.length&&(this._$AR(i&&i._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class Fx{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,n,s){this.type=1,this._$AH=Ax,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=s,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Ax}_$AI(t,e=this,i,n){const s=this.strings;let r=!1;if(void 0===s)t=Bx(this,t,e,0),r=!wx(t)||t!==this._$AH&&t!==Tx,r&&(this._$AH=t);else{const n=t;let o,a;for(t=s[0],o=0;o<s.length-1;o++)a=Bx(this,n[i+o],e,o),a===Tx&&(a=this._$AH[o]),r||=!wx(a)||a!==this._$AH[o],a===Ax?t=Ax:t!==Ax&&(t+=(a??"")+s[o+1]),this._$AH[o]=a}r&&!n&&this.j(t)}j(t){t===Ax?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class Vx extends Fx{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===Ax?void 0:t}}class Hx extends Fx{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==Ax)}}class Gx extends Fx{constructor(t,e,i,n,s){super(t,e,i,n,s),this.type=5}_$AI(t,e=this){if((t=Bx(this,t,e,0)??Ax)===Tx)return;const i=this._$AH,n=t===Ax&&i!==Ax||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,s=t!==Ax&&(i===Ax||n);n&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class Zx{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){Bx(this,t)}}const Yx={P:gx,A:mx,C:vx,M:1,L:Wx,R:Ux,D:Sx,V:Bx,I:$x,H:Fx,N:Hx,U:Gx,B:Vx,F:Zx},Qx=dx.litHtmlPolyfillSupport;Qx?.(Rx,$x),(dx.litHtmlVersions??=[]).push("3.1.2");const Jx=(t,e,i)=>{const n=i?.renderBefore??e;let s=n._$litPart$;if(void 0===s){const t=i?.renderBefore??null;n._$litPart$=s=new $x(e.insertBefore(bx(),t),t,void 0,i??{})}return s._$AI(t),s};let qx=class extends hx{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=Jx(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Tx}};qx._$litElement$=!0,qx.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:qx});const Kx=globalThis.litElementPolyfillSupport;function Xx(t,e=""){return t?e:Ax}Kx?.({LitElement:qx}),(globalThis.litElementVersions??=[]).push("4.0.4");const tb={cancelable:!0};class eb extends Event{constructor(t,e=null,i,n){super(n??"change",i??tb),this.detail=t,this.item=e}handle(t,e){return!(this.defaultPrevented||!t&&(this.preventDefault(),this.stopPropagation(),e?.(),1))}}const ib=new Map,nb=new Map;class sb extends bt{constructor(t){super(t,"--cc-canvas-",!1),this.lineWidth=0,this.lineHeight=0,this.scrollSize=6,this.scrollColor="#000",this.scrollRoundness=1,this.scrollOpacity=1}updateInternalValues(){this.lineWidth=this.getSize("line-width",0),this.lineHeight=this.getSize("line-height",0),this.scrollSize=this.getSize("scroll-size",6),this.scrollColor=this.getColor("scroll-color","gray"),this.scrollOpacity=this.getSize("scroll-opacity",1),this.scrollRoundness=this.getSize("scroll-roundness",1)}parse(t){return t}}class rb{#tn;#en;#in;#c;#nn;constructor(...t){this.#tn=nb,this.dblClickMaxDiff=250,this.isMouseInside=!1,this.isMouseDown=!1,this.mousePosition={x:-1,y:-1},this.isScrolling=!1,this.#c=null,this.#nn=null,this.size={dpr:1,bounds:new DOMRect,canvas:{width:0,height:0},content:{width:0,height:0}},this.#sn=t=>{const e=this.size;e.dpr=window.devicePixelRatio,e.canvas.width=t.devicePixelContentBoxSize[0].inlineSize,e.canvas.height=t.devicePixelContentBoxSize[0].blockSize,e.content.width=e.canvas.width/e.dpr,e.content.height=e.canvas.height/e.dpr,this.canvas.width=e.canvas.width,this.canvas.height=e.canvas.height,e.bounds=this.canvas.getBoundingClientRect(),this.onSizeChanged()},this.#rn=()=>{const t=this.canvas?.getBoundingClientRect();t&&(this.size.bounds=t)},this.#on=()=>{this.theme.update(),this.renderFrame(!0)},this.#an=t=>{t.preventDefault(),t.stopPropagation(),!this.isScrolling&&this.onWheel(t)&&this.onScroll()},this.renderFrame=t=>{t?(this.#ln=!1,this.#cn()):this.#ln=!0},this.#un=0,this.#hn=()=>{this.#ln&&(this.#ln=!1,this.#cn()),this.#un=requestAnimationFrame(this.#hn)},this.#cn=()=>{const t=this.size,e=this.#en;if(e.reset(),e.clearRect(0,0,t.canvas.width,t.canvas.height),e.scale(t.dpr,t.dpr),this.render(e,t.content.width,t.content.height),this.isMouseInside){const t=this.theme;e.fillStyle=t.scrollColor,e.globalAlpha=t.scrollOpacity;for(const t of this.#in)t.shouldDraw&&e.fill(t.path,"nonzero")}},this.#dn=t=>{t.isPrimary&&(this.isMouseInside=!0,this.#fn(),this.#pn()&&this.renderFrame(),this.#gn(t))},this.#mn=t=>{t.isPrimary&&(this.#vn(),this.isMouseInside=!1,this.mousePosition.x=this.mousePosition.y=-1,(this.clearHoverInfo()||this.#pn())&&this.renderFrame())},this.#yn=-1,this.#xn=t=>{if(!t.isPrimary||0!==t.button)return;this.isMouseDown=!0,this.#vn();const e=t.timeStamp-this.#yn;if(this.#yn=t.timeStamp,e<this.dblClickMaxDiff)return void this.handleDblClick(t);C(this.#gn,this.#bn,!1),this.canvas.setPointerCapture(t.pointerId);const i=this.#wn(t);if(i?.isVisible)return this.isScrolling=!0,this.#c=i.initScrollByMouse(t),this.clearHoverInfo()&&this.renderFrame(),void I(!0);this.handleMouseDown(t),I(!0)},this.#gn=t=>{t.isPrimary&&(this.#Mn(t),this.isMouseDown?this.isScrolling?this.#c(t)&&this.renderFrame():(this.#nn=t,this.handleMouseMove(t)):this.#wn(t)?.isVisible?(this.setCursor(),this.clearHoverInfo()&&this.renderFrame()):this.handleMouseHover(t))},this.#bn=t=>{t.isPrimary&&(0!==t.button&&t.preventDefault(),this.canvas.releasePointerCapture(t.pointerId),L(),this.#fn(),this.isMouseDown=!1,this.#nn=null,this.isScrolling?(this.isScrolling=!1,this.#c=null):this.handleMouseUp(t),this.#wn(t)?.isVisible?this.clearHoverInfo()&&this.renderFrame():this.updateHoverInfo()&&this.renderFrame())},this.canvas=document.createElement("canvas"),this.canvas.id="canvas",this.#en=this.canvas.getContext("2d",{alpha:!1,willReadFrequently:!1}),this.#in=t,this.theme=this.createTheme(this.canvas),this.theme.addEventListener("update",(()=>this.onThemeChanged()))}createTheme(t){return new sb(t)}get lineHeight(){return this.theme.lineHeight}get lineWidth(){return this.theme.lineWidth}get contentWidth(){return this.size.content.width}get contentHeight(){return this.size.content.height}activate(){const t=this.canvas;wt.observe(t,this.#sn),window.addEventListener("resize",this.#rn),Fy(this.#on,!0),t.addEventListener("wheel",this.#an,{passive:!1}),t.addEventListener("pointerenter",this.#dn),t.addEventListener("pointerleave",this.#mn),t.addEventListener("pointerdown",this.#xn),this.canvas.isConnected?this.theme.update():requestAnimationFrame(this.#on),this.#Sn()}deactivate(){this.#kn();const t=this.canvas;wt.unobserve(t),window.removeEventListener("resize",this.#rn),Fy(this.#on,!1),t.removeEventListener("wheel",this.#an),t.removeEventListener("pointerenter",this.#dn),t.removeEventListener("pointerleave",this.#mn),t.removeEventListener("pointerdown",this.#xn),this.mousePosition.x=this.mousePosition.y=-1,this.isScrolling=!1,this.isMouseInside=!1,this.isMouseDown=!1}#sn;#rn;#on;#an;onSizeChanged(){this.updateScrollbarSize(),this.updateHoverInfo(),this.renderFrame(!0)}onThemeChanged(){const t=this.theme,e={lineHeight:t.lineHeight,roundness:t.scrollRoundness,thickness:t.scrollSize};for(const t of this.#in)t.updateOptions(e)}refresh(t,e){t&&this.invalidate(),this.updateScrollbarSize(),this.updateHoverInfo(),this.renderFrame(e)}updateScrollbarSize(){if(0===this.#in.length)return!1;const{contentWidth:t,contentHeight:e}=this,i=this.size.content;let n=!1;for(const s of this.#in)s.updateSize(i.width,i.height,s.isVertical?e:t)&&(n=!0);return n}handleMouseHover(t){this.updateHoverInfo()&&this.renderFrame()}onScroll(){this.isMouseDown?this.#nn&&this.#gn(this.#nn):this.updateHoverInfo(),this.renderFrame()}onWheel(t){let e=!1;for(const i of this.#in)i.scrollByWheel(t)&&(e=!0);return e}#ln;#un;#hn;#Sn(){this.refresh(!0),this.#hn()}#kn(){this.#un&&(cancelAnimationFrame(this.#un),this.#un=0),this.#ln&&(this.#ln=!1,this.#cn())}#cn;#Mn(t){const e=this.size.bounds;this.mousePosition.x=t.clientX-e.x,this.mousePosition.y=t.clientY-e.y}#pn(){for(const t of this.#in)if(t.isVisible)return!0;return!1}#dn;#mn;#fn(){this.canvas.addEventListener("pointermove",this.#gn)}#vn(){this.canvas.removeEventListener("pointermove",this.#gn)}#yn;#xn;#gn;#bn;#wn(t){const e=this.getMouseX(t),i=this.getMouseY(t);for(const t of this.#in)if(t.contains(e,i))return t;return null}setCursor(t){this.canvas.style.cursor=t??"default"}setTitle(t){this.canvas.title!==t&&(this.canvas.title=t)}getMouseX(t){return t.clientX-this.size.bounds.x}getMouseY(t){return t.clientY-this.size.bounds.y}renderIcon(t,e,i,n,s,r=1,o=1){t.save(),t.globalAlpha*=r,t.translate(n,s),t.scale(o,o),t.translate(-i/2,-i/2),t.fill(this.#tn.get(e),"nonzero"),t.restore()}renderCenteredText(t,e,i,n,s,r=0){t.textRendering="optimizeLegibility",t.textBaseline="middle",t.beginPath(),t.rect(i,0,n-i,s),t.clip(),t.fillText(e,i,s/2+r)}}class ob extends qx{#_n;constructor(){super(),this.#_n=document.createElement("div"),this.#_n.id="titlebar"}setTitle(t){this.#_n.textContent=t}firstUpdated(){this.#In=this.shadowRoot.getElementById("context-menu"),this.#Cn=this.shadowRoot.getElementById("toast"),this.#_n.textContent||this.setTitle(document.title)}connectedCallback(){super.connectedCallback(),window.addEventListener("wheel",this.#an,{passive:!1})}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("wheel",this.#an)}render(){return Px`
            ${this.#_n}
            <slot></slot>
            <cc-context-menu id="context-menu"></cc-context-menu>
            <cc-toast id="toast" type="normal" @close=${this.#Ln}></cc-toast>
            `}#an=t=>{(t.ctrlKey||t.metaKey)&&0!==t.deltaY&&0===t.deltaX&&0===t.deltaZ&&t.preventDefault()};blockPointerEvents(t){t?this.style.setProperty("--cc-pointer-events","none","important"):this.style.setProperty("--cc-pointer-events","auto")}#Cn;#Nn=null;#Ln=()=>{this.#Nn&&(clearTimeout(this.#Nn),this.#Nn=null),this.#Cn.classList.remove("show")};showToast(t,e,i){const n=this.#Cn;n.type=e??"normal",n.innerText=t,n.classList.add("show"),clearTimeout(this.#Nn),this.#Nn=setTimeout(this.#Ln,i??5e3)}#In;#jn;async showContextMenu(t,e,i,n=!0){if(this.#jn)return this.#jn;this.#jn=this.#In.open(t,e,i.alignX,i.alignY,i.dirX,i.dirY,i.offsetX,i.offsetY,n);const s=await this.#jn;return this.#jn=null,s}#zn=new WeakMap;async showDialog(t,e){let i;const n=this.#zn;n.has(t)?i=n.get(t):(i=document.createElement("cc-dialog"),i.appendChild(t),n.set(t,i)),this.shadowRoot.appendChild(i),await t.init(e);const s=await i.open();return i.remove(),s}static{this.styles=[Jy`
:host {
    display: flex;
    flex-direction: column;
    width: 100vw;
    height: 100vh;
    margin: 0;
    padding: 0;
    color: var(--text-color-default);
    background: var(--surface-color);
    font-size: 14px;
    font-family: -expressive-sans, sans-serif;
    contain: strict;
    --cc-pointer-events: auto;
    --cc-titlebar-height: env(titlebar-area-height, 32px);
}

:host(:not([titlebar])) {
    --cc-titlebar-height: 0px;
    #titlebar {
        display: none;
    }
}

#titlebar {
    app-region: drag;
    width: 100%;
    height: var(--cc-titlebar-height);
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    overflow: hidden;
}

::slotted(*) {
    app-region: no-drag;
    flex: 1;
    width: 100vw;
    max-width: 100vw;
    height: calc(100vh - var(--cc-titlebar-height, 0px));
    max-height: calc(100vh - var(--cc-titlebar-height, 0px));
}

#toast {
    position: fixed;
    left: 50%;
    bottom: 64px;
    transform: translateX(-50%);
}

#toast:not(.show) {
    display: none;
}

`]}}function ab(t,e,i,n,s,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!e&&t?n.static?t:t.prototype:null,h=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d=!1,f=i.length-1;f>=0;f--){var p={};for(var g in n)p[g]="access"===g?{}:n[g];for(var g in n.access)p.access[g]=n.access[g];p.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,i[f])("accessor"===l?{get:h.get,set:h.set}:h[c],p);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(h.get=a),(a=o(m.set))&&(h.set=a),(a=o(m.init))&&s.unshift(a)}else(a=o(m))&&("field"===l?s.unshift(a):h[c]=a)}u&&Object.defineProperty(u,n.name,h),d=!0}function lb(t,e,i){for(var n=arguments.length>2,s=0;s<e.length;s++)i=n?e[s].call(t,i):e[s].call(t);return n?i:void 0}function cb(t,e,i){return"symbol"==typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}"function"==typeof SuppressedError&&SuppressedError;const ub={attribute:!0,type:String,converter:lx,reflect:!1,hasChanged:cx},hb=(t=ub,e,i)=>{const{kind:n,metadata:s}=i;let r=globalThis.litPropertyMetadata.get(s);if(void 0===r&&globalThis.litPropertyMetadata.set(s,r=new Map),r.set(i.name,t),"accessor"===n){const{name:n}=i;return{set(i){const s=e.get.call(this);e.set.call(this,i),this.requestUpdate(n,s,t)},init(e){return void 0!==e&&this.P(n,void 0,t),e}}}if("setter"===n){const{name:n}=i;return function(i){const s=this[n];e.call(this,i),this.requestUpdate(n,s,t)}}throw Error("Unsupported decorator location: "+n)};function db(t){return(e,i)=>"object"==typeof i?hb(t,e,i):((t,e,i)=>{const n=e.hasOwnProperty(i);return e.constructor.createProperty(i,n?{...t,wrapped:!0}:t),n?Object.getOwnPropertyDescriptor(e,i):void 0})(t,e,i)}function fb(t){return db({...t,state:!0,attribute:!1})}const pb=(t,e,i)=>(i.configurable=!0,i.enumerable=!0,Reflect.decorate&&"object"!=typeof e&&Object.defineProperty(t,e,i),i);function gb(t,e){return(i,n,s)=>{const r=e=>e.renderRoot?.querySelector(t)??null;if(e){const{get:t,set:e}="object"==typeof n?i:s??(()=>{const t=Symbol();return{get(){return this[t]},set(e){this[t]=e}}})();return pb(i,n,{get(){let i=t.call(this);return void 0===i&&(i=r(this),(null!==i||this.hasUpdated)&&e.call(this,i)),i}})}return pb(i,n,{get(){return r(this)}})}}let mb=(()=>{let t,e,i,n=qx,s=[],r=[],o=[],a=[],l=[],c=[];return class extends n{static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!0})],e=[db({type:String,reflect:!0})],i=[db({type:Boolean,reflect:!0})],ab(this,null,t,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:u},s,r),ab(this,null,e,{kind:"accessor",name:"variant",static:!1,private:!1,access:{has:t=>"variant"in t,get:t=>t.variant,set:(t,e)=>{t.variant=e}},metadata:u},o,a),ab(this,null,i,{kind:"accessor",name:"outline",static:!1,private:!1,access:{has:t=>"outline"in t,get:t=>t.outline,set:(t,e)=>{t.outline=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#Pn=lb(this,s,!1);get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}#Tn=(lb(this,r),lb(this,o,"primary"));get variant(){return this.#Tn}set variant(t){this.#Tn=t}#An=(lb(this,a),lb(this,l,!1));get outline(){return this.#An}set outline(t){this.#An=t}render(){return Px`<slot></slot>`}static{this.styles=[Jy`

:host {
    --btn-text: transparent;
    --btn-face: transparent;
    --btn-border: transparent;
    --btn-border-radius: 32px;
}

@container --theme-provider style(--theme: dark) {
    :host {
        --btn-text: var(--text-color-lighter);

        --btn-primary-face: var(--gray-600);
        --btn-primary-face-hover: var(--gray-700);
        --btn-primary-face-down: var(--gray-800);

        --btn-secondary-face: var(--gray-800);
        --btn-secondary-face-hover: var(--gray-700);
        --btn-secondary-face-down: var(--gray-600);

        --btn-primary-outline-face: transparent;
        --btn-primary-outline-face-hover: var(--gray-800);
        --btn-primary-outline-face-down: var(--gray-700);
        --btn-primary-outline-border: var(--white);

        --btn-secondary-outline-face: transparent;
        --btn-secondary-outline-face-hover: var(--gray-800);
        --btn-secondary-outline-face-down: var(--gray-700);
        --btn-secondary-outline-border: var(--gray-600);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --btn-text: var(--text-color-darker);

        --btn-primary-face: var(--gray-200);
        --btn-primary-face-hover: var(--gray-100);
        --btn-primary-face-down: var(--gray-50);

        --btn-secondary-face: var(--gray-50);
        --btn-secondary-face-hover: var(--gray-100);
        --btn-secondary-face-down: var(--gray-200);

        --btn-primary-outline-face: transparent;
        --btn-primary-outline-face-hover: var(--gray-50);
        --btn-primary-outline-face-down: var(--gray-100);
        --btn-primary-outline-border: var(--black);

        --btn-secondary-outline-face: transparent;
        --btn-secondary-outline-face-hover: var(--gray-50);
        --btn-secondary-outline-face-down: var(--gray-100);
        --btn-secondary-outline-border: var(--gray-400);
    }
}

:host {
    font-size: 14px;
    font-weight: 700;
    padding: 7px 14px;
    line-height: 1;

    border-width: 2px;
    border-color: transparent;
    border-style: solid;

    cursor: pointer;
    outline: none;
    user-select: none;
    contain: content;

    border-radius: var(--btn-border-radius);
    box-sizing: border-box;
    height: var(--btn-border-radius);

    display: flex;
    flex-flow: row nowrap;
    align-items: center;
    place-content: center;

    color: var(--btn-text);
    background: var(--btn-face);
    border-color: var(--btn-border);

    --btn-accent-face: var(--accent-color-500);
    --btn-accent-face-hover: var(--accent-color-600);
    --btn-accent-face-down: var(--accent-color-700);
}

::slotted(cc-icon) {
    margin: 0 4px;
}

:host([disabled]) {
    opacity: 45%;
    --btn-face: var(--btn-primary-face) !important;
    pointer-events: none;
}

:host([variant="primary"]) {
    --btn-face: var(--btn-primary-face);
}

:host([variant="primary"]:hover) {
    --btn-face: var(--btn-primary-face-hover);
}

:host([variant="primary"]:active) {
    --btn-face: var(--btn-primary-face-down);
}

:host([variant="secondary"]) {
    --btn-face: var(--btn-secondary-face);
}

:host([variant="secondary"]:hover) {
    --btn-face: var(--btn-secondary-face-hover);
}

:host([variant="secondary"]:active) {
    --btn-face: var(--btn-secondary-face-down);
}

:host([variant="accent"]) {
    --btn-face: var(--btn-accent-face);
    --btn-text: var(--white);
}

:host([variant="accent"]:hover) {
    --btn-face: var(--btn-accent-face-hover);
}

:host([variant="accent"]:active) {
    --btn-face: var(--btn-accent-face-down);
}

:host([variant="primary"][outline]) {
    --btn-face: var(--btn-primary-outline-face);
    --btn-border: var(--btn-primary-outline-border);
}

:host([variant="primary"][outline]:hover) {
    --btn-face: var(--btn-primary-outline-face-hover);
    --btn-border: var(--btn-primary-outline-border);
}

:host([variant="primary"][outline]:active) {
    --btn-face: var(--btn-primary-outline-face-down);
    --btn-border: var(--btn-primary-outline-border);
}

:host([variant="secondary"][outline]) {
    --btn-face: var(--btn-secondary-outline-face);
    --btn-border: var(--btn-secondary-outline-border);
}

:host([variant="secondary"][outline]:hover) {
    --btn-face: var(--btn-secondary-outline-face-hover);
    --btn-border: var(--btn-secondary-outline-border);
}

:host([variant="secondary"][outline]:active) {
    --btn-face: var(--btn-secondary-outline-face-down);
    --btn-border: var(--btn-secondary-outline-border);
}

:host(:not([outline])) {
    border-width: 0;
}

:host([hidden]) {
    display: none;
}
    `]}constructor(){super(...arguments),lb(this,c)}}})(),vb=(()=>{let t,e,i,n,s,r,o=qx,a=[],l=[],c=[],u=[],h=[],d=[],f=[],p=[],g=[],m=[],v=[],y=[];return class extends o{static{const x="function"==typeof Symbol&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!0})],e=[db({type:String,reflect:!0})],i=[db({type:Boolean,reflect:!0})],n=[db({type:Boolean,reflect:!0})],s=[db({type:Boolean,reflect:!0})],r=[db({type:Boolean,reflect:!0,attribute:"hold-affordance"})],ab(this,null,t,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:x},a,l),ab(this,null,e,{kind:"accessor",name:"size",static:!1,private:!1,access:{has:t=>"size"in t,get:t=>t.size,set:(t,e)=>{t.size=e}},metadata:x},c,u),ab(this,null,i,{kind:"accessor",name:"quiet",static:!1,private:!1,access:{has:t=>"quiet"in t,get:t=>t.quiet,set:(t,e)=>{t.quiet=e}},metadata:x},h,d),ab(this,null,n,{kind:"accessor",name:"selected",static:!1,private:!1,access:{has:t=>"selected"in t,get:t=>t.selected,set:(t,e)=>{t.selected=e}},metadata:x},f,p),ab(this,null,s,{kind:"accessor",name:"emphasized",static:!1,private:!1,access:{has:t=>"emphasized"in t,get:t=>t.emphasized,set:(t,e)=>{t.emphasized=e}},metadata:x},g,m),ab(this,null,r,{kind:"accessor",name:"holdAffordance",static:!1,private:!1,access:{has:t=>"holdAffordance"in t,get:t=>t.holdAffordance,set:(t,e)=>{t.holdAffordance=e}},metadata:x},v,y),x&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:x})}#Pn=lb(this,a,!1);get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}#Dn=(lb(this,l),lb(this,c,void 0));get size(){return this.#Dn}set size(t){this.#Dn=t}#En=(lb(this,u),lb(this,h,!1));get quiet(){return this.#En}set quiet(t){this.#En=t}#On=(lb(this,d),lb(this,f,!1));get selected(){return this.#On}set selected(t){this.#On=t}#Wn=(lb(this,p),lb(this,g,!1));get emphasized(){return this.#Wn}set emphasized(t){this.#Wn=t}#Rn=(lb(this,m),lb(this,v,!1));get holdAffordance(){return this.#Rn}set holdAffordance(t){this.#Rn=t}#Bn=lb(this,y);constructor(){super(),this.#Bn=document.createElement("slot")}render(){return this.#Bn}static{this.styles=[Jy`
@container --theme-provider style(--theme: dark) {
    :host {
        --action-btn-face: var(--gray-800);
        --action-btn-face-hover: var(--gray-700);
        --action-btn-face-down: var(--gray-600);

        --action-btn-text: var(--text-color-default);
        --action-btn-text-selected: var(--white);
        --action-btn-text-accent: var(--white);

        --action-btn-face-quiet: transparent;
        --action-btn-face-quiet-hover: var(--gray-800);
        --action-btn-face-quiet-down: var(--gray-700);

        --action-btn-face-selected: var(--gray-600);
        --action-btn-face-selected-hover: var(--gray-700);
        --action-btn-face-selected-down: var(--gray-800);
    }

    :host([input-face]) {
        --action-btn-face: var(--gray-1000);
        --action-btn-face-hover: var(--gray-1000);
        --action-btn-face-down: var(--black);

        --action-btn-face-selected: var(--gray-1000);
        --action-btn-face-selected-hover: var(--gray-1000);
        --action-btn-face-selected-down: var(--black);

        --action-btn-border-hover: var(--gray-700);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --action-btn-face: var(--gray-100);
        --action-btn-face-hover: var(--gray-200);
        --action-btn-face-down: var(--gray-300);

        --action-btn-text: var(--text-color-default);
        --action-btn-text-selected: var(--black);
        --action-btn-text-accent: var(--white);

        --action-btn-face-quiet: transparent;
        --action-btn-face-quiet-hover: var(--gray-50);
        --action-btn-face-quiet-down: var(--gray-100);

        --action-btn-face-selected: var(--gray-300);
        --action-btn-face-selected-hover: var(--gray-200);
        --action-btn-face-selected-down: var(--gray-100);
    }

    :host([input-face]) {
        --action-btn-face: var(--gray-50);
        --action-btn-face-hover: var(--gray-50);
        --action-btn-face-down: var(--gray-200);

        --action-btn-face-selected: var(--gray-50);
        --action-btn-face-selected-hover: var(--gray-50);
        --action-btn-face-selected-down: var(--gray-200);

        --action-btn-border-hover: var(--gray-300);
    }
}

:host {
    --action-btn-padding: 3px;
    --action-btn-border-size: 4px;

    color: var(--action-btn-text);

    font-size: var(--action-btn-font-size, 14px);

    line-height: 1;
    appearance: none;
    border-radius: calc(var(--action-btn-border-size) * var(--cc-border-tl, 1)) calc(var(--action-btn-border-size) * var(--cc-border-tr, 1)) calc(var(--action-btn-border-size) * var(--cc-border-br, 1)) calc(var(--action-btn-border-size) * var(--cc-border-bl, 1));
    border: none;
    cursor: pointer;
    outline: none;
    user-select: none;

    padding: var(--action-btn-padding);

    display: flex;
    flex-flow: row nowrap;
    align-items: center;
    place-content: center;
    contain: paint;

    --action-btn-face-selected-emp: var(--accent-color-500);
    --action-btn-face-selected-emp-hover: var(--accent-color-600);
    --action-btn-face-selected-emp-down: var(--accent-color-700);
}

:host {
    background-color: var(--action-btn-bg, var(--action-btn-face));
}
:host(:hover) {
    background-color: var(--action-btn-bg-hover, var(--action-btn-face-hover));
}
:host(:active), :host([active]) {
    background-color: var(--action-btn-bg-active, var(--action-btn-face-down));
}

:host([disabled]) {
    opacity: 45%;
    background-color: var(--action-btn-face) !important;
    pointer-events: none;
}

:host([disabled][quiet]) {
    background-color: transparent !important;
}


:host([quiet]) {
    --action-btn-bg: var(--action-btn-face-quiet);
    --action-btn-bg-hover: var(--action-btn-face-quiet-hover);
    --action-btn-bg-active: var(--action-btn-face-quiet-down);
}

:host([input-face]) {
    --action-btn-font-size: 12px;
    overflow: hidden;
    box-sizing: border-box;
    border: 1px solid var(--action-btn-face);
    padding: calc(var(--action-btn-padding) - 1px);
}
:host([input-face][selected]) {
    border: 1px solid var(--accent-color-500);
}
:host([input-face]:not([selected]):hover) {
    border: 1px solid var(--action-btn-border-hover);
}

slot {
    pointer-events: none;
}

@container --cc-quiet-provider style(--cc-quiet: true) {
    :host {
        --action-btn-bg: var(--action-btn-face-quiet);
        --action-btn-bg-hover: var(--action-btn-face-quiet-hover);
        --action-btn-bg-active: var(--action-btn-face-quiet-down);
    }
    :host([disabled]) {
        background-color: transparent !important;
    }
}

:host([size="m"]) {
    --action-btn-padding: 7px;
}
@container --cc-size-provider style(--cc-size: m) {
    :host {
        --action-btn-padding: 7px;
    }
}

:host([hold-affordance])::after {
    --action-btn-indicator-size: 4px;
    content: "";
    width: var(--action-btn-indicator-size);
    border-top: var(--action-btn-indicator-size) solid transparent;
    border-right: var(--action-btn-indicator-size) solid currentColor;
    position: absolute;
    right: 2px;
    bottom: 2px;
    user-select: none;
    pointer-events: none;
}

:host([selected]) {
    --action-btn-bg: var(--action-btn-face-selected);
    --action-btn-bg-hover: var(--action-btn-face-selected-hover);
    --action-btn-bg-active: var(--action-btn-face-selected-down);
}

:host([selected][emphasized]) {
    color: var(--action-btn-text-accent);
    --action-btn-bg: var(--action-btn-face-selected-emp);
    --action-btn-bg-hover: var(--action-btn-face-selected-emp-hover);
    --action-btn-bg-active: var(--action-btn-face-selected-emp-down);
}

@container --cc-emphasized-provider style(--cc-emphasized: true) {
    :host([selected]) {
        color: var(--action-btn-text-accent);
        --action-btn-bg: var(--action-btn-face-selected-emp);
        --action-btn-bg-hover: var(--action-btn-face-selected-emp-hover);
        --action-btn-bg-active: var(--action-btn-face-selected-emp-down);
    }
}
    `]}}})();const yb=Jy`
:host {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;

    align-items: center;
    justify-content: flex-start;
    user-select: none;

    gap: 8px;

    --cc-border-tl: 1;
    --cc-border-tr: 1;
    --cc-border-br: 1;
    --cc-border-bl: 1;

    contain: paint;

    container-name: --cc-size-provider --cc-quiet-provider --cc-emphasized-provider;
    container-type: normal;
}
:host([disabled]) {
    pointer-events: none;
}
:host([justify="center"]) {
    justify-content: center;
}
:host([justify="end"]) {
    justify-content: flex-end;
}

:host([quiet]) {
    --cc-quiet: true;
}
:host([emphasized]) {
    --cc-emphasized: true;
}
:host([size="m"]) {
    --cc-size: m;
}

:host([vertical]) {
    flex-direction: column;
}

:host([compact]) {
    gap: 0;
    --cc-border-tl: 0;
    --cc-border-tr: 0;
    --cc-border-br: 0;
    --cc-border-bl: 0;
}
:host([gapless]) {
    gap: 0;
}
`,xb=Jy`
:host([compact]) > :first-child {
    --cc-border-tl: 1;
    --cc-border-tr: 0;
    --cc-border-br: 0;
    --cc-border-bl: 1;
}

:host([compact][vertical]) > :first-child {
    --cc-border-tl: 1;
    --cc-border-tr: 1;
    --cc-border-br: 0;
    --cc-border-bl: 0;
}

:host([compact]) > :last-child {
    --cc-border-tl: 0;
    --cc-border-tr: 1;
    --cc-border-br: 1;
    --cc-border-bl: 0;
}
:host([compact][vertical]) > :last-child {
    --cc-border-tl: 0;
    --cc-border-tr: 0;
    --cc-border-br: 1;
    --cc-border-bl: 1;
}
`,bb=Jy`
:host([compact]) > cc-action-button:first-of-type {
    --cc-border-tl: 1;
    --cc-border-tr: 0;
    --cc-border-br: 0;
    --cc-border-bl: 1;
}

:host([compact][vertical]) > cc-action-button:first-of-type {
    --cc-border-tl: 1;
    --cc-border-tr: 1;
    --cc-border-br: 0;
    --cc-border-bl: 0;
}

:host([compact]) > cc-action-button:last-of-type {
    --cc-border-tl: 0;
    --cc-border-tr: 1;
    --cc-border-br: 1;
    --cc-border-bl: 0;
}
:host([compact][vertical]) > cc-action-button:last-of-type {
    --cc-border-tl: 0;
    --cc-border-tr: 0;
    --cc-border-br: 1;
    --cc-border-bl: 1;
}
`,wb=Jy`
:host([compact]) ::slotted(*:first-child) {
    --cc-border-tl: 1;
    --cc-border-tr: 0;
    --cc-border-br: 0;
    --cc-border-bl: 1;
}

:host([compact][vertical]) ::slotted(*:first-child) {
    --cc-border-tl: 1;
    --cc-border-tr: 1;
    --cc-border-br: 0;
    --cc-border-bl: 0;
}

:host([compact]) ::slotted(*:last-child) {
    --cc-border-tl: 0;
    --cc-border-tr: 1;
    --cc-border-br: 1;
    --cc-border-bl: 0;
}
:host([compact][vertical]) ::slotted(*:last-child) {
    --cc-border-tl: 0;
    --cc-border-tr: 0;
    --cc-border-br: 1;
    --cc-border-bl: 1;
}
`,Mb=Jy`:host {pointer-events: var(--cc-pointer-events, auto)}`,Sb=Jy`
@container --theme-provider style(--theme: dark) {
    :host {
        --input-face: var(--gray-1000);

        --input-border-hover: var(--gray-700);
        --input-border-selected: var(--accent-color-500);

        --input-text: var(--text-color-default);
        --input-placeholder-text: var(--gray-500);
        --input-icon: var(--text-color-darker);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --input-face: var(--gray-50);

        --input-border-hover: var(--gray-300);
        --input-border-selected: var(--accent-color-500);

        --input-text: var(--text-color-default);
        --input-placeholder-text: var(--gray-400);
        --input-icon: var(--text-color-lighter);
    }
}

#input,
#input::-webkit-outer-spin-button,
#input::-webkit-inner-spin-button {
    appearance: none;
}

#input {
    box-sizing: border-box;
    border: none;
    outline: none;
    color: var(--input-text);
    font-size: 12px;
    font-family: -expressive-sans;
    text-overflow: ellipsis;
    overflow: visible;
    text-align: left;
    width: 100%;
    height: 100%;
    background: none;
    user-select: text;
    flex: 1;
    padding: 0;
}

:host([indeterminate]) #input::placeholder {
    display: none !important;
}

#input::placeholder {
    color: var(--input-placeholder-text);
}

:host {
    display: flex;
    align-items: center;

    box-sizing: border-box;
    contain: content;
    height: 24px;

    color: var(--text-color-default);
    background-color: var(--input-face);
    border: 1px solid transparent;

    gap: 8px;
    padding: 0 3px;

    user-select: none;

    font-family: -expressive-sans;
    --input-border-size: 4px;

    border-radius: calc(var(--input-border-size) * var(--cc-border-tl, 1)) calc(var(--input-border-size) * var(--cc-border-tr, 1)) calc(var(--input-border-size) * var(--cc-border-br, 1)) calc(var(--input-border-size) * var(--cc-border-bl, 1));
}

:host([padded]) #input {
    padding-left: 4px;
}

::slotted(*) {
    color: var(--input-icon);
    flex-shrink: 0;
}

:host([quiet]) {
    background: none;
    border: none;
    padding: 0;
}

:host(:not([quiet]):hover) {
    border: 1px solid var(--input-border-hover);
}

:host([active]:not([quiet])),
:host(:not([quiet]):focus-within) {
    border: 1px solid var(--input-border-selected);
}

:host([disabled]) {
    opacity: 45%;
    pointer-events: none;
}

:host([text-center]) #input {
    text-align: center;
}

:host([text-right]) #input {
    text-align: right;
}

:host([size="m"]) {
    height: 32px;
}
@container --cc-size-provider style(--cc-size: m) {
    :host {
        height: 32px;
    }
}
`,kb=Jy`
*[badge]::before {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;

    top: 1px;
    right: 1px;

    border-radius: 2px;
    padding: 1px;

    background: var(--accent-color-500);
    color: #fff;

    font-family: -expressive-mono;
    line-height: 1;
    font-size: 7px;
    content: attr(badge);
}

*[badge][disabled]::before {
    filter: grayscale(1);
}

*[badge][badge-left]::before {
    right: unset;
    left: 1px;
}

*[badge][badge-hover]::before {
    opacity: 0;
    transition: 0.125s ease-in-out opacity;
}
*[badge][badge-hover]:hover::before {
    opacity: 1;
}
`;function _b(t,e){return Qy(`\n${t} {\n    overflow-x: hidden !important;\n    overflow-y: scroll !important;\n\n    outline: none !important;\n    line-height: normal;\n\n    display: block;\n\n    box-sizing: border-box;\n    overscroll-behavior: contain;\n    scrollbar-gutter: stable both-edges;\n}\n\n${t}::-webkit-scrollbar {\n    width: var(--scrollbar-size);\n    height: var(--scrollbar-size);\n}\n\n${t}::-webkit-scrollbar-corner {\n    display: none;\n}\n\n${t}::-webkit-scrollbar-track {\n    background: transparent;\n}\n\n${t}::-webkit-scrollbar-thumb {\n    background: transparent;\n    border-radius: var(--scrollbar-size);\n}\n\n${t}${e?"(:hover)":":hover"}::-webkit-scrollbar-thumb {\n    background: var(--scrollbar-color);\n}\n`)}_b(":host",!0);const Ib=Jy`:host{display:contents}`,Cb=Jy`.text-ellipsis{
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
}`;class Lb extends qx{firstUpdated(){this.style.containerName="--cc-size-provider --cc-quiet-provider --cc-emphasized-provider"}render(){return Px`<slot></slot>`}static{this.styles=[yb,wb]}}let Nb=(()=>{let t,e=qx,i=[];return class extends e{static{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[db({type:String,reflect:!1,noAccessor:!0})],ab(this,null,t,{kind:"setter",name:"name",static:!1,private:!1,access:{has:t=>"name"in t,set:(t,e)=>{t.name=e}},metadata:n},null,i),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}#Un=void lb(this,i);#$n=void 0;get name(){return this.#Un}set name(t){this.#Un!==t&&(this.#Un=t,this.#$n?.remove(),this.#$n=void 0,this.requestUpdate())}get#Fn(){return void 0===this.#$n&&(this.#$n=ib.get(this.#Un)||null,this.#$n&&(this.#$n=this.#$n.cloneNode(!0))),this.#$n}render(){return this.#Fn||Ax}static{this.styles=[Jy`
:host {
    display: inline-block;
    width: 18px;
    height: 18px;
    user-select: none;
    pointer-events: none;
    color: inherit;
    box-sizing: content-box;
    contain: strict;
}

:host([padded]) {
    padding: 3px;
}

svg {
    width: 100%;
    height: 100%;
    stroke: none;
    fill: currentColor;
}

svg > * {
    shape-rendering: geometricPrecision;
}
    `]}}})(),jb=(()=>{let t,e=qx,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[db({type:String,reflect:!0})],ab(this,null,t,{kind:"accessor",name:"name",static:!1,private:!1,access:{has:t=>"name"in t,get:t=>t.name,set:(t,e)=>{t.name=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#Vn=lb(this,i,"");get name(){return this.#Vn}set name(t){this.#Vn=t}render(){return Ax}static{this.styles=Jy`
:host {
    display: inline-block;
    width: 18px;
    height: 18px;
    user-select: none;
    pointer-events: none;
    background: var(--icon-color, currentColor);
    clip-path: path(evenodd, var(--icon-path));
    box-sizing: content-box;
    contain: strict;
}

:host([padded]) {
    padding: 3px;
}

:host([name=""]), :host(:not([name])) {
    visibility: hidden;
}

:host([name="Checkmark"]) {
    --icon-path: "M15.656,3.8625l-.7275-.5665a.5.5,0,0,0-.7.0875L7.411,12.1415,4.0875,8.8355a.5.5,0,0,0-.707,0L2.718,9.5a.5.5,0,0,0,0,.707l4.463,4.45a.5.5,0,0,0,.75-.0465L15.7435,4.564A.5.5,0,0,0,15.656,3.8625Z";
}
:host([name="ChevronDown"]) {
    --icon-path: "M4,7.01a1,1,0,0,1,1.7055-.7055l3.289,3.286,3.289-3.286a1,1,0,0,1,1.437,1.3865l-.0245.0245L9.7,11.7075a1,1,0,0,1-1.4125,0L4.293,7.716A.9945.9945,0,0,1,4,7.01Z";
}
:host([name="Close"]) {
    --icon-path: "M13.2425,3.343,9,7.586,4.7575,3.343a.5.5,0,0,0-.707,0L3.343,4.05a.5.5,0,0,0,0,.707L7.586,9,3.343,13.2425a.5.5,0,0,0,0,.707l.707.7075a.5.5,0,0,0,.707,0L9,10.414l4.2425,4.243a.5.5,0,0,0,.707,0l.7075-.707a.5.5,0,0,0,0-.707L10.414,9l4.243-4.2425a.5.5,0,0,0,0-.707L13.95,3.343a.5.5,0,0,0-.70711-.00039Z";
}
:host([name="MaintainChecked"]) {
    --icon-path: "M14,9a3.419,3.419,0,0,0-3.333-3.5H7.333A3.419,3.419,0,0,0,4,9a3.419,3.419,0,0,0,3.333,3.5h3.334A3.419,3.419,0,0,0,14,9ZM7,14.5a5.5,5.5,0,0,1,0-11V2A7,7,0,0,0,7,16ZM11,2V3.5a5.5,5.5,0,0,1,0,11V16A7,7,0,0,0,11,2Z";
}
:host([name="MaintainUnchecked"]) {
    --icon-path: "M7,14.5a5.5,5.5,0,0,1,0-11V2A7,7,0,0,0,7,16ZM11,2V3.5a5.5,5.5,0,0,1,0,11V16A7,7,0,0,0,11,2Z";
}
:host([name="Play"]) {
    --icon-path: "M4,2.529V15.471a.521.521,0,0,0,.784.456L15.741,9.456a.531.531,0,0,0,0-.912L4.784,2.073A.521.521,0,0,0,4,2.529Z";
}
:host([name="Pause"]) {
    --icon-path: "M16,2.5c0-.3333-.1667-.5-.5-.5h-5c-.3333,0-.5.1667-.5.5v13c0,.3333.1667.5.5.5h5c.3333,0,.5-.1667.5-.5V2.5Zm-8,0c0-.3333-.1667-.5-.5-.5H2.5c-.3333,0-.5.1667-.5.5v13c0,.3333.1667.5.5.5h5c.3333,0,.5-.1667.5-.5V2.5Z";
}
:host([name="SwapArrows"]) {
    --icon-path: "M16.937,12.084A.252.252,0,0,0,16.75,12H14.125V8.5A3.629,3.629,0,0,0,10.5,4.875H6V2.25a.25.25,0,0,0-.437-.166L2.17,5.6a.251.251,0,0,0,0,.35l3.39,3.4A.25.25,0,0,0,6,9.182V6.125h4.5A2.377,2.377,0,0,1,12.875,8.5V12H9.818a.25.25,0,0,0-.166.437l3.4,3.39a.251.251,0,0,0,.35,0l3.513-3.393A.25.25,0,0,0,16.937,12.084Z";
}
:host([name="SwapArrowUpLeft"]) {
    --icon-path: "M13.5,14.875A7.384,7.384,0,0,1,6.125,7.5V6H9.182a.25.25,0,0,0,.166-.437L5.836,2.17a.252.252,0,0,0-.351,0l-3.4,3.39A.25.25,0,0,0,2.25,6H4.875V7.5A8.635,8.635,0,0,0,13.5,16.125H16v-1.25Z";
}
:host([name="SwapArrowDownRight"]) {
    --icon-path: "M3.238,4.5a7.383,7.383,0,0,0,7.375,7.375h1.5V8.818a.247.247,0,0,1,.084-.187.25.25,0,0,1,.353.021l3.392,3.512a.25.25,0,0,1,0,.351l-3.389,3.4a.254.254,0,0,1-.188.084.249.249,0,0,1-.249-.25V13.125h-1.5A8.635,8.635,0,0,1,1.988,4.5V2h1.25Z";
}
:host([name="EvenOdd"]) {
    --icon-path: "M15.562,2H2.437A.438.438,0,0,0,2,2.438V15.562A.438.438,0,0,0,2.437,16H15.562A.438.438,0,0,0,16,15.562V2.438A.438.438,0,0,0,15.562,2ZM9,13a4,4,0,1,1,4-4A4,4,0,0,1,9,13Z";
}
:host([name="NonZero"]) {
    --icon-path: "M6,9a3,3 0 1,0 6,0a3,3 0 1,0 -6,0M15.562,2H2.437A.438.438,0,0,0,2,2.438V15.562A.438.438,0,0,0,2.437,16H15.562A.438.438,0,0,0,16,15.562V2.438A.438.438,0,0,0,15.562,2ZM9,13a4,4,0,1,1,4-4A4,4,0,0,1,9,13Z";
}
:host([name="RectRadiusSame"]) {
    --icon-path: "M14,2a2,2,0,0,1,2,2V14a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V4A2,2,0,0,1,4,2H14m0-1H4A3,3,0,0,0,1,4V14a3,3,0,0,0,3,3H14a3,3,0,0,0,3-3V4a3,3,0,0,0-3-3Z";
}
:host([name="RectRadiusSeparate"]) {
    --icon-path: "M2,7V4A2,2,0,0,1,4,2H7V1H4A3,3,0,0,0,1,4V7ZM11,2h3a2,2,0,0,1,2,2V7h1V4a3,3,0,0,0-3-3H11ZM7,16H4a2,2,0,0,1-2-2V11H1v3a3,3,0,0,0,3,3H7ZM16,11v3a2,2,0,0,1-2,2H11v1h3a3,3,0,0,0,3-3V11Z";
}
:host([name="Folder"]) {
    --icon-path: "M16.5,4l-7.166.004-1.65-1.7A1,1,0,0,0,6.9645,2H2A1,1,0,0,0,1,3V14.5a.5.5,0,0,0,.5.5h15a.5.5,0,0,0,.5-.5V4.5A.5.5,0,0,0,16.5,4ZM2,3H6.9645L8.908,5H2Z";
}
`}constructor(){super(...arguments),lb(this,n)}}})();class zb{#Hn;#Gn;constructor(t){this.started=!1,this.inherited=!1,this.#Hn=null,this.#Gn=!1,this.#Gn=!!t}start(t){this.started||(this.started=!0,this.#Hn?.dispatchEvent(new CustomEvent("start",{bubbles:this.#Gn,detail:t})))}update(t){this.started||this.start(t),this.#Hn?.dispatchEvent(new CustomEvent("update",{bubbles:this.#Gn,detail:t}))}end(){this.started&&(this.started=!1,this.#Hn?.dispatchEvent(new Event("end",{bubbles:this.#Gn})))}connect(t){this.#Hn!==t&&this.end(),this.#Hn=t}disconnect(){this.end(),this.#Hn=null}}const Pb=[],Tb=new WeakMap;function Ab(t){Pb.push(t),Tb.set(t,document.activeElement),t.showModal()}function Db(){const t=Pb.pop();if(t&&Tb.has(t)){const e=Tb.get(t);Tb.delete(t),e instanceof HTMLElement&&e.isConnected&&e.focus()}}const Eb={cancelable:!0,bubbles:!1,composed:!1};function Ob(t){Pb.at(-1)?.dispatchEvent(new CustomEvent("send-response",{detail:t,...Eb}))}function Wb(t,e,i,n,s,r,o,a){let l=s+(r-s)*i;switch(n){case-1:if(l-e-t<o){if(.5===i)return o;const n=s+(r-s)*(1-i);return n+e+t>a?a-t:n}return l-e-t;case 1:if(l+e+t>a){if(.5===i)return a-t;const n=s+(r-s)*(1-i);return n-e-t<o?o:n-e-t}return l+e<o?o:l+e}if(t>a-o)return(a-o-t)/2;const c=l-t/2;return c<o?o:l+t/2<=a?c:a-t}function Rb(t,e,i,n,s,r,o=0,a=0){const{x:l,y:c}=function(t,e,i,n,s,r,o=0,a=0){const l=function(){const t=document.documentElement;return new DOMRect(t.clientLeft,t.clientTop,t.clientWidth,t.clientHeight)}(),c=function(t){return t instanceof HTMLElement?t.getBoundingClientRect():t instanceof DOMRect?t:new DOMRect(t.x,t.y,0,0)}(e);return{x:Wb(t.width,o,i,s,c.left,c.right,l.left,l.right),y:Wb(t.height,a,n,r,c.top,c.bottom,l.top,l.bottom)}}(t.getBoundingClientRect(),e,i,n,s,r,o,a);t.style.transform=`translate(${l}px, ${c}px)`}class Bb extends qx{#Zn;#Yn;firstUpdated(){this.#Zn=this.shadowRoot.getElementById("dialog"),this.#Yn=this.shadowRoot.getElementById("popover")}render(){return Px`<dialog title="" id="dialog" @send-response=${this.#Qn} @cancel=${this.#Jn} @close=${this.#qn} @click=${this.#Kn}>
            <div id="popover" part="popover">
                <slot id="slot"></slot>
            </div>
        </dialog>`}#Xn;#ts;#es;get isOpen(){return null!=this.#Xn}async open(t,e=1,i=0,n=1,s=1,r=0,o=0){return this.#Xn?this.#Xn:this.#Xn=new Promise((a=>{this.#ts=a,queueMicrotask((()=>{this.setAttribute("open",""),Ab(this.#Zn),Rb(this.#Zn,t,e,i,n,s,r,o);const a=this.shadowRoot.getElementById("slot");for(const t of a.assignedElements())t.dispatchEvent(new Event("popover-visible"))}))}))}close(t){this.#Xn&&(this.#es=t,this.#Zn.close())}#Qn=t=>{t.stopPropagation(),this.close(t.detail)};#Jn=t=>{t.preventDefault(),t.stopPropagation(),this.close()};#qn=()=>{if(Db(),this.removeAttribute("open"),this.#Xn){const t=this.#ts,e=this.#es;this.#ts=this.#Xn=this.#es=void 0,t(e)}};#Kn=t=>{t.composedPath().includes(this.#Yn)||this.close()};static{this.styles=[Jy`
@container --theme-provider style(--theme: dark) {
    :host {
        --popover-face: var(--gray-1000);
        --popover-border: var(--gray-700);
        --popover-shadow: 1px 4px 8px -2px rgb(0 0 0);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --popover-face: var(--white);
        --popover-border: var(--gray-100);
        --popover-shadow: 1px 4px 8px -2px rgb(0 0 0 / 15%);
    }
}

:host {
    cursor: default;
    display: contents;
}

#dialog {
    appearance: none;
    border: none;
    outline: none;
    background: none;
    padding: 16px !important;
    margin: 0 !important;
    overflow: hidden;
    box-sizing: border-box;
    border-radius: 4px;
    max-width: 100vw;
    max-height: 100vh;
    contain: content;
}
#dialog::backdrop {
    background: transparent;
}

#popover {
    color: var(--text-color-default);
    background-color: var(--popover-face);
    border: 1px solid var(--popover-border);
    padding: 4px 0;
    border-radius: 4px;
    display: flex;
    flex-direction: column;
    box-shadow: var(--popover-shadow);
    box-sizing: border-box;
    user-select: none;
    min-width: var(--popover-min-width, 24px);
}

    `]}}const Ub=t=>t??Ax;let $b=(()=>{let t,e,i,n,s,r=qx,o=[],a=[],l=[],c=[],u=[],h=[],d=[],f=[],p=[],g=[];return class extends r{static{const m="function"==typeof Symbol&&Symbol.metadata?Object.create(r[Symbol.metadata]??null):void 0;t=[db({type:String,reflect:!1})],e=[db({type:Boolean,reflect:!1})],i=[db({type:Object,attribute:!1})],n=[db({type:Boolean,reflect:!0})],s=[db({type:String,reflect:!1})],ab(this,null,t,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:m},o,a),ab(this,null,e,{kind:"accessor",name:"lazy",static:!1,private:!1,access:{has:t=>"lazy"in t,get:t=>t.lazy,set:(t,e)=>{t.lazy=e}},metadata:m},l,c),ab(this,null,i,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:m},u,h),ab(this,null,n,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:m},d,f),ab(this,null,s,{kind:"accessor",name:"placeholder",static:!1,private:!1,access:{has:t=>"placeholder"in t,get:t=>t.placeholder,set:(t,e)=>{t.placeholder=e}},metadata:m},p,g),m&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})}#is=lb(this,o,void 0);get value(){return this.#is}set value(t){this.#is=t}#ns=(lb(this,a),lb(this,l,!1));get lazy(){return this.#ns}set lazy(t){this.#ns=t}#ss=(lb(this,c),lb(this,u,[]));get items(){return this.#ss}set items(t){this.#ss=t}#Pn=(lb(this,h),lb(this,d,!1));get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}#rs=(lb(this,f),lb(this,p,void 0));get placeholder(){return this.#rs}set placeholder(t){this.#rs=t}#Yn=lb(this,g);#os=!1;firstUpdated(){this.#Yn=this.shadowRoot.getElementById("popover")}get#as(){const t=this.value;if(void 0!==t){const e=this.items.find((e=>e&&"object"==typeof e&&e.value===t));if(e)return e.title}return this.placeholder||""}render(){let t=Ax;return!this.#os&&this.lazy||(t=this.items.map(this.#ls)),Px`
            <div id="wrapper" @click=${this.#cs}>
                <div id="label" class="text-ellipsis">${this.#as}</div>
                <cc-css-icon id="icon" name="ChevronDown"></cc-css-icon>
            </div>
            <cc-popover id="popover" @click=${this.#us}>${t}</cc-popover>
        `}#us(t){const e=t.target;if(!e.classList.contains("item"))return;if(void 0===e.dataset.index)return;const i=parseInt(e.dataset.index),n=this.items[i];n&&"object"==typeof n&&this.#Yn.close(n)}#ls=(t,e)=>{if(!t)return Px`<div class="divider"></div>`;if("string"==typeof t)return Px`<div class="header">${t}</div>`;const i=this.value===t.value;return Px`<cc-menu-item class="item" .disabled=${!!t.disabled} data-index=${e} badge=${Ub(t.badge)}>
            <cc-css-icon class="icon" slot="before" name=${i?"Checkmark":""}></cc-css-icon>
            ${t.title}
        </cc-menu-item>`};async#cs(){this.setAttribute("open","");const t=this.#Yn,e=this.getBoundingClientRect();t.style.setProperty("--popover-min-width",e.width+"px"),this.lazy&&(this.#os=!0,this.requestUpdate(),await this.updateComplete,this.#os=!1);const i=await t.open(e,.5,1,0,1,0,-12);this.removeAttribute("open");const n=i?.value;void 0!==n&&n!==this.value&&this.dispatchEvent(new eb(n,i))&&(this.value=n)}static{this.styles=[kb,Cb,Jy`
@container --theme-provider style(--theme: light) {
    :host {
        --picker-face: var(--gray-50);
        --picker-face-hover: var(--gray-50);
        --picker-face-down: var(--gray-200);

        --picker-border-hover: var(--gray-300);

        --picker-divider: var(--gray-100);
    }
}

@container --theme-provider style(--theme: dark) {
    :host {

        --picker-face: var(--gray-1000);
        --picker-face-hover: var(--gray-1000);
        --picker-face-down: var(--black);

        --picker-border-hover: var(--gray-700);

        --picker-divider: var(--gray-700);
    }
}

:host {
    display: block;
    height: 24px;
    background-color: var(--picker-face);
    color: var(--text-color-default);
    border: 1px solid var(--picker-face);

    --picker-border: transparent;
    --picker-border-selected: var(--accent-color-500);

    --picker-border-size: 4px;
    border-radius: calc(var(--picker-border-size) * var(--cc-border-tl, 1)) calc(var(--picker-border-size) * var(--cc-border-tr, 1)) calc(var(--picker-border-size) * var(--cc-border-br, 1)) calc(var(--picker-border-size) * var(--cc-border-bl, 1));
    padding: 0 3px 0 7px;

    box-sizing: border-box;
    width: 100%;
}

#label {
    flex: 1;
    pointer-events: none;
    font-size: 12px;
}

#wrapper {
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    gap: 3px;
    cursor: pointer;
    user-select: none;
}

:host([disabled]) {
    opacity: 45%;
    pointer-events: none !important;
}

:host(:hover) {
    border-color: var(--picker-border-hover);
}

:host(:active) {
    background-color: var(--picker-face-down);
}

:host([open]) {
    background-color: var(--picker-face-down);
    border-color: var(--picker-border-selected);
}

:host([size="m"]) {
    height: 32px;
}
@container --cc-size-provider style(--cc-size: m) {
    :host {
        height: 32px;
    }
}

#popover {
    width: 100%;
    max-height: 50vh;
}

.divider {
    pointer-events: none;
    background: var(--picker-divider);
    width: 100%;
    height: 1px;
    margin: 1px 0;
}

.header {
    pointer-events: none;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 0 8px;
    font-size: 10px;
    opacity: 75%;
}

.item:not([disabled]) > .icon {
    color: var(--accent-color-500);
}
`]}}})();const Fb=t=>(...e)=>({_$litDirective$:t,values:e});let Vb=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};const Hb="important",Gb=" !"+Hb,Zb=Fb(class extends Vb{constructor(t){if(super(t),1!==t.type||"style"!==t.name||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{const n=t[i];return null==n?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${n};`}),"")}update(t,[e]){const{style:i}=t.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(e)),this.render(e);for(const t of this.ft)null==e[t]&&(this.ft.delete(t),t.includes("-")?i.removeProperty(t):i[t]=null);for(const t in e){const n=e[t];if(null!=n){this.ft.add(t);const e="string"==typeof n&&n.endsWith(Gb);t.includes("-")||e?i.setProperty(t,e?n.slice(0,-11):n,e?Hb:""):i[t]=n}}return Tx}}),Yb={min:0,max:100,step:1};let Qb=(()=>{let t,e,i,r,o,a,l,c=qx,u=[],h=[],d=[],f=[],p=[],g=[],m=[],v=[],y=[],x=[],w=[],M=[];return class extends c{constructor(){super(...arguments),this.#is=lb(this,u,void 0),this.#hs=(lb(this,h),lb(this,d,Yb)),this.#Pn=(lb(this,f),lb(this,p,!1)),this.#ds=(lb(this,g),lb(this,m,!1)),this.#fs=(lb(this,v),lb(this,y,void 0)),this.#ps=(lb(this,x),lb(this,w,void 0)),this.stream=(lb(this,M),null),this.#gs=null,this.#xn=t=>{if(t.preventDefault(),!t.isPrimary||0!==t.button)return;const e=this.#ms;e.setAttribute("active",""),C(this.#gn,this.#bn),e.setPointerCapture(t.pointerId),this.#gs=e.getBoundingClientRect(),b(),this.#vs.start(this.value),t.target===e&&this.#gn(t)},this.#gn=t=>{const e=this.offsetHeight,i=this.#gs,r=n((t.clientX-(i.left+e/2))/(i.width-e)),o=this.constraint;let a=o.min+r*(o.max-o.min);a=s(a,o.step,o.min,o.max),this.value!==a&&(this.value=a,this.#vs.update(a))},this.#bn=t=>{if(!t.isPrimary)return;0!==t.button&&t.preventDefault();const e=this.#ms;e.releasePointerCapture(t.pointerId),L(),e.removeAttribute("active"),this.#gs=null,this.#vs.end()}}static{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(c[Symbol.metadata]??null):void 0;t=[db({type:Number,reflect:!1})],e=[db({type:Object,reflect:!1})],i=[db({type:Boolean,reflect:!0})],r=[db({type:Boolean,reflect:!0})],o=[db({type:Number,reflect:!1})],a=[gb("#wrapper",!0)],ab(this,null,t,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:n},u,h),ab(this,null,e,{kind:"accessor",name:"constraint",static:!1,private:!1,access:{has:t=>"constraint"in t,get:t=>t.constraint,set:(t,e)=>{t.constraint=e}},metadata:n},d,f),ab(this,null,i,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:n},p,g),ab(this,null,r,{kind:"accessor",name:"indeterminate",static:!1,private:!1,access:{has:t=>"indeterminate"in t,get:t=>t.indeterminate,set:(t,e)=>{t.indeterminate=e}},metadata:n},m,v),ab(this,null,o,{kind:"accessor",name:"pivot",static:!1,private:!1,access:{has:t=>"pivot"in t,get:t=>t.pivot,set:(t,e)=>{t.pivot=e}},metadata:n},y,x),ab(this,l={get:cb((function(){return this.#ps}),"#wrapper","get"),set:cb((function(t){this.#ps=t}),"#wrapper","set")},a,{kind:"accessor",name:"#wrapper",static:!1,private:!0,access:{has:t=>#ms in t,get:t=>t.#ms,set:(t,e)=>{t.#ms=e}},metadata:n},w,M),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}#is;get value(){return this.#is}set value(t){this.#is=t}#hs;get constraint(){return this.#hs}set constraint(t){this.#hs=t}#Pn;get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}#ds;get indeterminate(){return this.#ds}set indeterminate(t){this.#ds=t}#fs;get pivot(){return this.#fs}set pivot(t){this.#fs=t}#ps;get#ms(){return l.get.call(this)}set#ms(t){return l.set.call(this,t)}get#vs(){return this.stream??=new zb}connectedCallback(){super.connectedCallback(),this.#vs.inherited||this.#vs.connect(this)}disconnectedCallback(){super.disconnectedCallback(),this.#vs.inherited||this.#vs.disconnect()}#gs;#xn;#gn;#bn;render(){const t=this.constraint,e=this.value,i=this.pivot,s=null==i?0:n((i-t.min)/(t.max-t.min)),r=null==e?s:n((e-t.min)/(t.max-t.min));return Px`<div id="wrapper" @pointerdown=${this.#xn} style=${Zb({"--slider-progress":r,"--slider-pivot":s})}>
            <div id="track"></div><div id="slider"><div id="thumb"></div></div>
        </div>`}static{this.styles=Jy`
@container --theme-provider style(--theme: dark) {
    :host {
        --slider-track-face: var(--gray-700);
        --slider-track-face-filled: var(--gray-300);
        --slider-track-handle-face: var(--gray-900);
        --slider-track-handle-border: var(--gray-300);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --slider-track-face: var(--gray-200);
        --slider-track-face-filled: var(--gray-800);
        --slider-track-handle-face: var(--white);
        --slider-track-handle-border: var(--gray-800);
    }
}

:host {
    --thumb-size: 16px;
    --track-height: 2px;

    box-sizing: border-box;
    width: 100%;
    height: var(--thumb-size);
    user-select: none;
    overflow: clip;

    display: flex;
    contain: content;
    pointer-events: var(--cc-pointer-events, auto);
}

:host([disabled]) {
    pointer-events: none;
    opacity: 45%;
}

#wrapper {
    --slider-progress: 0;
    --slider-pivot: 0;
    width: 100%;
    height: 100%;
    flex: 1;
    display: inline-grid;
    place-items: center;
    gap: 0;
}

#wrapper > * {
    grid-area: 1 / 1 / 1 / 1;
}

#track {
    width: 100%;
    background: var(--slider-track-face);
    height: var(--track-height);
    pointer-events: none;
}

:host([ramp]) {
    --track-height: 14px;
}

:host([ramp]) #track {
    clip-path: polygon(0% 40%, 100% 0%, 100% 100%, 0% 60%);
    border-radius: var(--thumb-size);
}


/*
|-----|----|-----|
0     p    l     1
*/
:host([filled]:not([indeterminate])) #track {
    --slider-gradient-progress: calc((100% - var(--thumb-size) / 2) * var(--slider-progress));
    --slider-pivot-progress: calc((100%) * var(--slider-pivot));

    --from: min(var(--slider-gradient-progress), var(--slider-pivot-progress));
    --to: max(var(--slider-gradient-progress), var(--slider-pivot-progress));

    background: linear-gradient(to right,
        var(--slider-track-face) 0% var(--from),
        var(--slider-track-face-filled) var(--from) var(--to),
        var(--slider-track-face) var(--to) 100%
    );
}

:host([indeterminate]) #slider {
    --slider-progress: 0.5;
}

#slider {
    width: 100%;
    height: var(--thumb-size);
    transform: translateX(calc((100% - var(--thumb-size)) * var(--slider-progress)));
    pointer-events: none;
    justify-self: start;
}

#thumb {
    box-sizing: border-box;
    width: var(--thumb-size);
    height: var(--thumb-size);
    background-color: var(--slider-track-handle-face);
    border-radius: var(--thumb-size);
    border: 2px solid var(--slider-track-handle-border);
    transition: border-width 0.15s ease-in-out;
    pointer-events: var(--cc-pointer-events, auto);
}

#wrapper[active] #thumb,
#thumb:active {
    border: 6px solid var(--slider-track-handle-border);
}
    `}}})(),Jb=(()=>{let t,e,i,n=qx,s=[],r=[],o=[],a=[],l=[],c=[];return class extends n{static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!0})],e=[db({type:Boolean,reflect:!0})],i=[db({type:Boolean,reflect:!0})],ab(this,null,t,{kind:"accessor",name:"checked",static:!1,private:!1,access:{has:t=>"checked"in t,get:t=>t.checked,set:(t,e)=>{t.checked=e}},metadata:u},s,r),ab(this,null,e,{kind:"accessor",name:"indeterminate",static:!1,private:!1,access:{has:t=>"indeterminate"in t,get:t=>t.indeterminate,set:(t,e)=>{t.indeterminate=e}},metadata:u},o,a),ab(this,null,i,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#ys=lb(this,s,!1);get checked(){return this.#ys}set checked(t){this.#ys=t}#ds=(lb(this,r),lb(this,o,!1));get indeterminate(){return this.#ds}set indeterminate(t){this.#ds=t}#Pn=(lb(this,a),lb(this,l,!1));get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}render(){return Px`<div id="thumb"></div>`}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.#cs)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.#cs)}#cs=(lb(this,c),()=>{if(this.disabled)return;const t=!this.checked;this.dispatchEvent(new eb(t))&&(this.indeterminate=!1,this.checked=t)});static{this.styles=Jy`
@container --theme-provider style(--theme: dark) {
    :host {
        --toggle-face: var(--gray-700);
        --toggle-handle: var(--text-color-default);
        --toggle-handle-checked: var(--white);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --toggle-face: var(--gray-100);
        --toggle-handle: var(--text-color-default);
        --toggle-handle-checked: var(--white);
    }
}

:host {
    --thumb-size: 14px;

    display: inline-grid;
    align-items: center;

    width: 32px;
    height: 18px;
    padding: 2px;

    cursor: pointer;
    user-select: none;


    background-color: var(--toggle-face);
    border-radius: var(--thumb-size);
    box-sizing: border-box;

    --toggle-face-checked: var(--accent-color-500);
}

:host([disabled]) {
    pointer-events: none;
    opacity: 45%;
    background-color: var(--toggle-face) !important;
}

:host([checked]) {
    background-color: var(--toggle-face-checked);
}


:host([checked]) #thumb {
    transform: translateX(100%);
    background: var(--toggle-handle-checked);
}

:host([disabled]) #thumb {
    background: var(--toggle-handle) !important;
}

:host([indeterminate]) {
    background-color: var(--toggle-face) !important;
}
:host([indeterminate]) #thumb {
    transform: translateX(50%);
    background: var(--toggle-handle) !important;
}

#thumb {
    background: var(--toggle-handle);
    width: var(--thumb-size);
    height: var(--thumb-size);
    border-radius: var(--thumb-size);
    transition: transform 0.15s ease-in-out;
}
    `}}})(),qb=(()=>{let t,e,i,n=qx,s=[],r=[],o=[],a=[],l=[],c=[];return class extends n{static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!0})],e=[db({type:Number,reflect:!1})],i=[db({type:String,reflect:!1})],ab(this,null,t,{kind:"accessor",name:"indeterminate",static:!1,private:!1,access:{has:t=>"indeterminate"in t,get:t=>t.indeterminate,set:(t,e)=>{t.indeterminate=e}},metadata:u},s,r),ab(this,null,e,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:u},o,a),ab(this,null,i,{kind:"accessor",name:"label",static:!1,private:!1,access:{has:t=>"label"in t,get:t=>t.label,set:(t,e)=>{t.label=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#ds=lb(this,s,!1);get indeterminate(){return this.#ds}set indeterminate(t){this.#ds=t}#is=(lb(this,r),lb(this,o,0));get value(){return this.#is}set value(t){this.#is=t}#xs=(lb(this,a),lb(this,l,""));get label(){return this.#xs}set label(t){this.#xs=t}render(){const t=Math.round(100*this.value)+"%";return Px`
        <div id="info"><span>${this.label}</span><span>${this.indeterminate?"":t}</span></div>
        <div id="track" style=${Zb({"--fill-width":t})}>
            <div id="slider">
                <div id="fill"></div>
            </div>
        </div>
        `}static{this.styles=Jy`
:host {
    display: inline-block;
    width: 100%;
    user-select: none;
    --progress-radius-size: 4px;

    --fill-width: 0;
    --indeterminate-fill-width: 50%;
    --fill-color: var(--accent-color-500);
}

#info {
    display: flex;
    flex-direction: row;
    align-items: baseline;
    justify-content: space-between;
    font-size: 12px;
    color: var(--text-color-default);
    margin-bottom: 8px;
}

:host([hide-label]) #info {
    display: none;
}

:host([disabled]) {
    pointer-events: none;
    opacity: 45%;
    --fill-color: var(--gray-500) !important;
}

#track, #slider {
    pointer-events: none;
    width: 100%;
    height: 8px;
    border-radius: var(--progress-radius-size);
    overflow: hidden;
}

#fill {
  width: var(--fill-width);
  height: 100%;
  border-radius: var(--progress-radius-size);
  background: var(--fill-color);
}

:host([indeterminate]) #slider {
    --fill-width: var(--indeterminate-fill-width) !important;
}

:host([indeterminate][disabled]) #slider {
    --fill-width: 100% !important;
}

:host([indeterminate]:not([disabled])) #slider {
    /* start value (internal) - hides fill completely */
    --initial-slider-position: calc(var(--fill-width) * -1);
    --final-slider-position: 100%;

    transform: translate(--initial-slider-position);
    will-change: transform;

    animation-name: slide;
    animation-duration: 1s;
    animation-delay: 0;
    animation-iteration-count: infinite;
    animation-timing-function: ease-in-out;
    animation-direction: normal;
}

:host([indeterminate][alternate]) #slider {
    animation-direction: alternate;
}

:host([indeterminate][ping-pong]) #slider {
    --initial-slider-position: 0;
    --final-slider-position: calc(100% - var(--fill-width));
    animation-direction: alternate;
    animation-timing-function: linear;
    animation-duration: 0.5s;
}

@keyframes slide {
  from {
    transform: translateX(var(--initial-slider-position));
  }
  to {
    transform: translateX(var(--final-slider-position));
  }
}
    `}constructor(){super(...arguments),lb(this,c)}}})(),Kb=(()=>{let t,e,i,n,s=qx,r=[],o=[],a=[],l=[],c=[],u=[];return class extends s{static{const h="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[gb("#dialog",!0)],i=[db({type:Boolean,reflect:!0})],n=[db({type:Boolean,reflect:!0})],ab(this,e={get:cb((function(){return this.#bs}),"#dialog","get"),set:cb((function(t){this.#bs=t}),"#dialog","set")},t,{kind:"accessor",name:"#dialog",static:!1,private:!0,access:{has:t=>#Zn in t,get:t=>t.#Zn,set:(t,e)=>{t.#Zn=e}},metadata:h},r,o),ab(this,null,i,{kind:"accessor",name:"cancelable",static:!1,private:!1,access:{has:t=>"cancelable"in t,get:t=>t.cancelable,set:(t,e)=>{t.cancelable=e}},metadata:h},a,l),ab(this,null,n,{kind:"accessor",name:"animated",static:!1,private:!1,access:{has:t=>"animated"in t,get:t=>t.animated,set:(t,e)=>{t.animated=e}},metadata:h},c,u),h&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h})}#bs=lb(this,r,void 0);get#Zn(){return e.get.call(this)}set#Zn(t){return e.set.call(this,t)}#ws=(lb(this,o),lb(this,a,!1));get cancelable(){return this.#ws}set cancelable(t){this.#ws=t}#Ms=(lb(this,l),lb(this,c,!0));get animated(){return this.#Ms}set animated(t){this.#Ms=t}render(){return Px`<dialog id="dialog" part="dialog"
        @send-response=${this.#Qn}
        @cancel=${this.#Jn}
        @close=${this.#qn}>
            <slot></slot>
            <div id="close" part="close" @click=${this.#Ss}><cc-css-icon name="Close"></cc-css-icon></div>
        </dialog>`}#es=lb(this,u);#ts;#Qn(t){t.stopPropagation(),this.close(t.detail)}#Jn(t){t.preventDefault(),t.stopPropagation(),this.cancelable&&this.close()}#qn(){if(Db(),this.#ts){const t=this.#ts,e=this.#es;this.#ts=this.#es=void 0,t(e)}}#Ss(){this.close()}disconnectedCallback(){super.disconnectedCallback(),this.animated&&this.#ks()}async open(){if(!this.#ts)return new Promise((t=>{this.#ts=t,Ab(this.#Zn)}))}close(t){this.#ts&&(this.#es=t,this.animated?this.#_s():setTimeout((()=>this.#Zn.close()),0))}#_s=()=>{const t=this.#Zn;t.addEventListener("animationend",this.#Is),t.classList.add("hiding")};#ks=()=>{const t=this.#Zn;t.removeEventListener("animationend",this.#Is),t.classList.remove("hiding")};#Is=t=>{"hide-dialog"===t.animationName&&(this.#ks(),this.#Zn.close())};static{this.styles=Jy`
@container --theme-provider style(--theme: dark) {
    :host {
        --box-shadow-color: var(--black);
    }
}
@container --theme-provider style(--theme: light) {
    :host {
        --box-shadow-color: var(--gray-400);
    }
}
#dialog {
    background: var(--surface-color);
    color: var(--text-color-default);
    border: none;
    outline: none;
    padding: 0;
    border-radius: 4px;

    min-width: 32px;
    min-height: 32px;
    max-width: 100vw;
    max-height: 100vh;
    font-size: 12px;

    box-shadow: 0px 0px 24px -4px var(--box-shadow-color);

    contain: content;
}

#dialog.hiding #close,
:host(:not([cancelable])) #close {
    display: none;
}

#close {
    position: absolute;
    top: 16px;
    right: 16px;

    box-sizing: border-box;
    padding: 3px;
    width: 24px;
    height: 24px;
    cursor: pointer;
    border-radius: 50%;
}
#close:hover {
    background: #5555;
}

:host([size="s"]) {
    width: 288px;
    min-height: 120p;
}

#dialog::backdrop {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    /* background: #0008; */
    backdrop-filter: blur(1px);
    animation: none;
}

:host([animated]) #dialog[open] {
    animation: show-dialog 0.125s ease-in-out forwards;
}

:host([animated]) #dialog.hiding {
    animation: hide-dialog 0.125s ease-in-out forwards;
}

:host([animated]) #dialog[open]::backdrop {
    animation: show-backdrop 0.125s ease-out forwards;
}

:host([animated]) #dialog.hiding::backdrop {
    animation: hide-backdrop 0.125s ease-in-out forwards;
}


@keyframes show-dialog {
    from {
        opacity: 0;
        transform: scale(50%, 50%) translateY(50%)
    }
    to {
        opacity: 1;
        transform: scale(100%, 100%) translateY(0)
    }
}

@keyframes hide-dialog {
    to {
        opacity: 0;
        transform: scale(50%, 50%) translateY(-50%);
    }
}

@keyframes show-backdrop {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes hide-backdrop {
    to {
        opacity: 0;
    }
}

    `}}})();class Xb extends qx{get dialog(){return this.closest("cc-dialog")}}const tw={ctrl:"⌘",alt:"⌥",shift:"⇧",enter:"↵",backspace:"⌫",delete:"⌫",escape:"⎋",left:"←",right:"→",up:"↑",down:"↓",space:"␣",tab:"⇥"},ew="macOS"===navigator.userAgentData?.platform;let iw=(()=>{let t,e=qx,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[db({type:Array,reflect:!1,attribute:"shortcut",converter:t=>t.split(" ")})],ab(this,null,t,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#is=lb(this,i,void 0);get value(){return this.#is}set value(t){this.#is=t}render(){if(ew)return this.value.map((t=>this.renderKeySymbol(t,tw)));const t=[this.renderKey(this.value[0])];for(let e=1;e<this.value.length;e++)t.push(this.renderSeparator("+"),this.renderKey(this.value[e]));return t}renderKey(t){return t=1===t.length?t.toUpperCase():t.substring(0,1).toUpperCase()+t.substring(1).toLowerCase(),Px`<span>${t}</span>`}renderKeySymbol(t,e){return t in e?Px`<span>${e[t]}</span>`:Px`<span>${t.toUpperCase()}</span>`}renderSeparator(t){return Px`<span class="separator">${t}</span>`}static{this.styles=Jy`
        :host {
            font-family: -expressive-keys;
            pointer-events: none;
            font-size: 12px;
            font-weight: normal;
            font-style: normal;
            color: inherit;
            display: flex;
            align-items: center;
            flex-direction: row;
            text-rendering: optimizeLegibility;
        }

        .separator {
            font-size: smaller;
        }
    `}constructor(){super(...arguments),lb(this,n)}}})(),nw=(()=>{let t,e=qx,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!0})],ab(this,null,t,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#Pn=lb(this,i,!1);get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}render(){return Px`
            <slot name="before"></slot>
            <span id="text" class="text-ellipsis"><slot></slot></span>
            <slot name="after"></slot>
        `}static{this.styles=[Cb,Jy`
@container --theme-provider style(--theme: light) {
    :host {
        --menu-item-face-hover: var(--gray-50);
    }
}

@container --theme-provider style(--theme: dark) {
    :host {
        --menu-item-face-hover: var(--gray-900);
    }
}

:host {
    display: flex;
    align-items: center;
    box-sizing: border-box;
    width: 100%;
    height: 32px;
    font-size: 14px;
    padding: 0 8px;
    gap: 8px;
    color: var(--text-color-default);
    background: none;
    contain: layout paint;
}

:host([disabled]) {
    opacity: 45%;
    pointer-events: none;
}

:host(:hover) {
    /* background: linear-gradient(45deg, var(--menu-item-face-hover), transparent); */
    background: var(--menu-item-face-hover);
}

#text {
    flex: 1;
}

::slotted(*) {
    flex-shrink: 0;
}
    `]}constructor(){super(...arguments),lb(this,n)}}})(),sw=(()=>{let t,e=qx,i=[],n=[];return class extends e{constructor(){super(...arguments),this.#ss=lb(this,i,void 0),this.level=(lb(this,n),0),this.#ls=(t,e)=>t?"string"==typeof t?Px`<div class="header">${t}</div>`:t.hidden?Ax:Px`<cc-menu-item class="item"
        @click=${this.#cs}
        @pointerenter=${this.#Cs}
        @pointerleave=${this.#Ls}
        .disabled=${!!t.disabled}
        data-submenu=${Xx(t.children)}
        data-selectable=${Xx(t.selectable)}
        data-index=${e}>
            ${this.#Ns(t)}
            ${t.title}
            ${this.#js(t)}
        </cc-menu-item>`:Px`<div class="divider"></div>`,this.#cs=t=>{this.#zs(t,"menu-item-click")},this.#Cs=t=>{this.#zs(t,"menu-item-enter")},this.#Ls=t=>{this.#zs(t,"menu-item-leave")}}static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[db({attribute:!1})],ab(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#ss;get items(){return this.#ss}set items(t){this.#ss=t}render(){return this.items.map(this.#ls)}#ls;#Ns(t){return t.selectable?Px`<cc-css-icon class="icon" slot="before" name=${t.value?"Checkmark":""}></cc-css-icon>`:t.icon?Px`<cc-icon class="icon" slot="before" .name=${t.icon}></cc-icon>`:Px`<div class="icon" slot="before"></div>`}#js(t){return t.children?Px`<cc-icon slot="after" name="workflow:ChevronRight"></cc-icon>`:t.shortcut?Px`<cc-kbd .value=${t.shortcut} slot="after"></cc-kbd>`:Ax}#Ps(t){const e=t.target;if(!e.hasAttribute("data-index"))return null;const i=parseInt(e.dataset.index);return this.items[i]||null}#zs(t,e){const i=this.#Ps(t);i&&this.dispatchEvent(new CustomEvent(e,{bubbles:!0,composed:!0,cancelable:!1,detail:{item:i,menu:this,trigger:t.target,event:t}}))}#cs;#Cs;#Ls;static{this.styles=Jy`
@container --theme-provider style(--theme: dark) {
    :host {
        --menu-face: var(--gray-1000);
        --menu-border: var(--gray-700);
        --menu-item-divider: var(--gray-800);
        --menu-item-face-hover: var(--gray-800);
        --menu-shadow: 1px 4px 8px -2px rgb(0 0 0);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --menu-face: var(--white);
        --menu-border: var(--gray-100);
        --menu-item-divider: var(--gray-100);
        --menu-item-face-hover: var(--gray-100);
        --menu-shadow: 1px 4px 8px -2px rgb(0 0 0 / 15%);
    }
}

:host {
    color: var(--text-color-default);
    background-color: var(--menu-face);
    border: 1px solid var(--menu-border);
    padding: 4px 0;
    border-radius: 4px;
    min-width: 96px;
    display: flex;
    flex-direction: column;
    box-shadow: var(--menu-shadow);
    box-sizing: border-box;
    user-select: none;
    contain: content;
}

.divider {
    pointer-events: none;
    background: var(--menu-border);
    width: 100%;
    height: 1px;
    margin: 1px 0;
}

.header {
    pointer-events: none;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 4px 16px;
    font-size: 10px;
    opacity: 75%;
}

cc-kbd {
    pointer-events: none;
    opacity: 75%;
    user-select: none;
}

.item > .icon {
    pointer-events: none;
}

.item[data-selectable]:not([disabled]) > .icon {
    color: var(--accent-color-500);
}

.item > div.icon {
    width: 18px;
}
`}}})();class rw extends qx{#Zn;constructor(){super(),this.#Zn=document.createElement("dialog")}render(){return this.#Zn}#Ft=[];#Ts(t){const e=this.#Ft;t.level=e.length,e.push(t),this.#Zn.appendChild(t)}#As(t){const e=this.#Ft;for(;e.length>t;)e.pop().remove()}connectedCallback(){super.connectedCallback();const t=this.#Zn;t.addEventListener("cancel",this.#Jn),t.addEventListener("close",this.#qn),t.addEventListener("click",this.#cs),t.addEventListener("menu-item-click",this.#Ds),t.addEventListener("menu-item-enter",this.#Es),t.addEventListener("menu-item-leave",this.#Os)}disconnectedCallback(){const t=this.#Zn;t.removeEventListener("cancel",this.#Jn),t.removeEventListener("close",this.#qn),t.removeEventListener("click",this.#cs),t.removeEventListener("menu-item-click",this.#Ds),t.removeEventListener("menu-item-enter",this.#Es),t.removeEventListener("menu-item-leave",this.#Os),this.#As(0),super.disconnectedCallback()}#Jn=t=>{t.preventDefault(),t.stopPropagation(),this.close(void 0)};#qn=()=>{if(Db(),this.#As(0),this.#Ws.clear(),this.#Xn){const t=this.#ts,e=this.#es;this.#ts=this.#Xn=this.#es=void 0,t(e)}};#Xn;#ts;#es;async open(t,e,i=1,n=0,s=1,r=1,o=0,a=0,l=!0){return this.#Xn?this.#Xn:(this.#Rs=l,this.#Xn=new Promise((async l=>{this.#ts=l;const c=this.#Bs(t),u=this.#Us(t);this.#Ts(u),c&&u.requestUpdate(),Ab(this.#Zn),await u.updateComplete,Rb(u,e,i,n,s,r,o,a)})))}close(t){this.#Xn&&(this.#es=t,this.#Zn.close())}#Ds=async t=>{t.stopPropagation();const{item:e,menu:i,event:n}=t.detail;e.children||(await(e.action?.(e,n)),e.preventClose?(i.requestUpdate(),await i.updateComplete):this.close(e))};#$s=null;#Es=t=>{t.stopPropagation(),this.#$s&&(clearTimeout(this.#$s),this.#$s=null);const{item:e,menu:i,trigger:n}=t.detail,s=i.level+1,r=e.children;if(!r)return void this.#As(s);const o=this.#Ft.find((t=>t.items===r));o||(this.#$s=setTimeout((async()=>{this.#As(s);const t=this.#Bs(r),e=this.#Us(r);this.#Ts(e),t&&e.requestUpdate(),await e.updateComplete,Rb(e,n,1,0,1,1,-5,-5)}),200))};#Os=t=>{t.stopPropagation(),this.#$s&&(clearTimeout(this.#$s),this.#$s=null)};#cs=t=>{t.target===this.#Zn&&this.close()};#Rs=!0;#Fs=new WeakMap;#Ws=new Map;#Us=t=>{const e=this.#Rs?this.#Fs:this.#Ws;if(e.has(t))return e.get(t);const i=document.createElement("cc-menu");return i.setAttribute("part","menu"),i.items=t,e.set(t,i),i};#Bs(t){return(this.#Rs?this.#Fs:this.#Ws).has(t)}static{this.styles=Jy`
dialog {
    appearance: none;
    border: none;
    outline: none;
    background: none;
    padding: 0;
    margin: 0;
    overflow: hidden;
    box-sizing: border-box;
    width: 100vw;
    height: 100vh;
    max-width: 100vw;
    max-height: 100vh;
    contain: strict;
}
dialog::backdrop {
    background: none;
}
cc-menu {
    position: absolute;
    top: 0;
    left: 0;
    min-width: 220px;
    width: 220px;
}
`}}class ow extends qx{#Vs;#Hs;#Gs;constructor(){super(),this.#Hs=document.createElement("div"),this.#Hs.id="scrollbar-y",this.#Gs=document.createElement("div"),this.#Gs.id="content",this.#Gs.part.add("content"),this.#Gs.appendChild(document.createElement("slot")),this.#Vs=[this.#Gs,this.#Hs]}render(){return this.#Vs}connectedCallback(){super.connectedCallback(),wt.observe(this,this.#Zs,"border-box"),wt.observe(this.#Gs,this.#Zs,"border-box"),this.addEventListener("scroll",this.#Zs,{passive:!0}),this.#Hs.addEventListener("pointerdown",this.#xn)}disconnectedCallback(){super.disconnectedCallback(),wt.unobserve(this),wt.unobserve(this.#Gs),this.removeEventListener("scroll",this.#Zs),this.#Hs.removeEventListener("pointerdown",this.#xn)}#Ys;#n;#xn=t=>{t.isPrimary&&0===t.button&&(this.#Ys=this.getBoundingClientRect(),this.#n=t.offsetY,C(this.#gn,this.#bn),this.#Hs.setPointerCapture(t.pointerId))};#gn=t=>{const e=(t.clientY-this.#Ys.y-this.#n)/this.#Ys.height;this.scrollTop=n(e)*this.scrollHeight};#bn=t=>{t.isPrimary&&(0!==t.button&&t.preventDefault(),this.#Ys=null,this.#Hs.releasePointerCapture(t.pointerId),L())};#Zs=()=>{const t=this.#Hs,e=this.offsetHeight/this.scrollHeight;let i=0,n=0;e<1&&(i=this.offsetHeight*e,n=this.scrollTop*(0+e)),t.style.setProperty("--scroll-top",n+"px"),t.style.setProperty("--scroll-height",i+"px")};static{this.styles=Jy`
:host {
    display: block;
    width: 100%;
    height: 100%;
    contain: strict;

    overflow-x: hidden;
    overflow-y: auto;
    overscroll-behavior: contain;
    box-sizing: border-box;
    outline: none;
    padding: 0 !important;

    --scroll-top: 0;
    --scroll-height: 0;
}

#content {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    display: flex;
    flex-direction: column;
    width: 100%;
    height: auto;
    word-break: break-all;
    word-wrap: break-word;
    outline: none;
}

:host::-webkit-scrollbar {
    display: none;
}

:host(:hover) #scrollbar-y {
    display: block;
}

#scrollbar-y {
    display: none;

    position: sticky;
    top: 0;
    float: right;

    transform: translateY(var(--scroll-top));

    width: var(--scrollbar-size);
    border-radius: calc(var(--scrollbar-size) / 2);
    height: var(--scroll-height);
    background: var(--scrollbar-color);

    margin: 0;
    padding: 0;
    outline: none;

    user-select: none;

    will-change: transform, height;
}
`}}let aw=(()=>{let t,e,i,n,s=qx,r=[],o=[],a=[],l=[],c=[],u=[],h=[],d=[];return class extends s{static{const f="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[db({attribute:!1})],e=[db({type:Boolean,reflect:!0})],i=[db({reflect:!1})],n=[db({type:Boolean,reflect:!0,attribute:"css-icon"})],ab(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:f},r,o),ab(this,null,e,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:f},a,l),ab(this,null,i,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:f},c,u),ab(this,null,n,{kind:"accessor",name:"cssIcon",static:!1,private:!1,access:{has:t=>"cssIcon"in t,get:t=>t.cssIcon,set:(t,e)=>{t.cssIcon=e}},metadata:f},h,d),f&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f})}#ss=lb(this,r,[]);get items(){return this.#ss}set items(t){this.#ss=t}#Pn=(lb(this,o),lb(this,a,!1));get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}#is=(lb(this,l),lb(this,c,void 0));get value(){return this.#is}set value(t){this.#is=t}#Qs=(lb(this,u),lb(this,h,!1));get cssIcon(){return this.#Qs}set cssIcon(t){this.#Qs=t}render(){const t=this.items.find((t=>t.value===this.value))??this.items[0];return Px`<cc-action-button
            title=${t.title}
            .selected=${t.emphasized||!1}
            .emphasized=${t.emphasized||!1}
            .disabled=${this.disabled}
            @click=${this.#cs}
        >
            ${this.#Ns(t.icon)}
        </cc-action-button>`}#Ns(t){return this.cssIcon?Px`<cc-css-icon .name=${t}></cc-css-icon>`:Px`<cc-icon .name=${t}></cc-icon>`}#cs(){const t=this.items;let e=this.value,i=0;void 0!==e&&(i=(t.findIndex((t=>t.value===this.value))+1)%t.length),e=t[i].value,this.dispatchEvent(new eb(e,t[i]))&&(this.value=e)}static{this.styles=Jy`
:host {
    display: inline-block;
    container-name: --cc-size-provider --cc-quiet-provider;
    container-type: normal;
}

:host([quiet]) {
    --cc-quiet: true;
}
:host([size="m"]) {
    --cc-size: m;
}
    `}constructor(){super(...arguments),lb(this,d)}}})(),lw=(()=>{let t,e,i,n,s=qx,r=[],o=[],a=[],l=[],c=[],u=[],h=[],d=[];return class extends s{static{const f="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[db({attribute:!1})],e=[db({reflect:!1})],i=[db({type:Boolean,reflect:!0})],n=[db({type:Boolean,reflect:!1})],ab(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:f},r,o),ab(this,null,e,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:f},a,l),ab(this,null,i,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:f},c,u),ab(this,null,n,{kind:"accessor",name:"text",static:!1,private:!1,access:{has:t=>"text"in t,get:t=>t.text,set:(t,e)=>{t.text=e}},metadata:f},h,d),f&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f})}#ss=lb(this,r,[]);get items(){return this.#ss}set items(t){this.#ss=t}#is=(lb(this,o),lb(this,a,void 0));get value(){return this.#is}set value(t){this.#is=t}#Pn=(lb(this,l),lb(this,c,!1));get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}#Js=(lb(this,u),lb(this,h,!1));get text(){return this.#Js}set text(t){this.#Js=t}render(){return this.items.map(this.text?this.#qs:this.#Ks)}#qs=(lb(this,d),(t,e)=>Px`<cc-action-button .disabled=${this.disabled} .selected=${t.value===this.value} data-index=${e}>
            ${t.title}
        </cc-action-button>`);#Ks=(t,e)=>Px`<cc-action-button .disabled=${this.disabled} .selected=${t.value===this.value} title=${t.title} data-index=${e}>
            <cc-icon .name=${t.icon}></cc-icon>
        </cc-action-button>`;#cs=t=>{const e=t.composedPath()[0];if(void 0===e.dataset.index)return;const i=this.items[+e.dataset.index];if(!i)return;const n=i.value;n!==this.value&&this.dispatchEvent(new eb(n,i))&&(this.value=n)};connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.#cs)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.#cs)}static{this.styles=[yb,xb]}}})(),cw=(()=>{let t,e,i,n,s=qx,r=[],o=[],a=[],l=[],c=[],u=[],h=[];return class extends s{constructor(){super(...arguments),this.#ss=(lb(this,r),lb(this,o,[])),this.#Xs=(lb(this,a),lb(this,l,!1)),this.#tr=lb(this,c),this.#er=lb(this,u,!1),this.longPressDelay=(lb(this,h),400),this.menuOffset=8,this.#di=new WeakMap,this.#ir=null,this.#nr=(t,e)=>{let i=!1;return Array.isArray(t)&&(t=this.#di.get(t)||t[0],i=!0),Px`<cc-action-button
            class="item"
            badge=${Ub(t.badge)}
            .selected=${t.value===this.#tr}
            .holdAffordance=${i}
            title=${function(t){let e=t.title;return t.shortcut&&(e+=` (${t.shortcut.join("+")})`),e}(t)}
            data-index=${e}>
            <cc-icon .name=${t.icon}></cc-icon>
        </cc-action-button>`},this.#cs=t=>{const e=this.#sr(t);if(null==e)return;this.#rr();let i=this.items[e];if(Array.isArray(i)){const t=this.#di;t.has(i)||t.set(i,i[0]),i=t.get(i)}i&&this.#or(i)},this.#ar=null,this.#rr=()=>{clearTimeout(this.#ar),this.#ar=null},this.#xn=t=>{const e=this.#sr(t);null!=e&&(this.#rr(),Array.isArray(this.items[e])&&(this.#ar=setTimeout(this.#lr,this.longPressDelay,e,t.composedPath()[0])))},this.#lr=async(t,e)=>{const i=this.items[t];if(!Array.isArray(i))return;let n;e.setAttribute("active",""),await this.#cr(),n=this.vertical?await this.#ir.open(i,e,1,.5,1,0,this.menuOffset,0):await this.#ir.open(i,e,.5,1,0,1,0,this.menuOffset),e.removeAttribute("active"),n&&this.#or(n)&&this.#di.set(i,n)}}static{const d="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[db({attribute:!1})],e=[db({type:Boolean,reflect:!1})],i=[db({reflect:!1,noAccessor:!0})],n=[db({type:Boolean,reflect:!0})],ab(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:d},o,a),ab(this,null,e,{kind:"accessor",name:"unselectable",static:!1,private:!1,access:{has:t=>"unselectable"in t,get:t=>t.unselectable,set:(t,e)=>{t.unselectable=e}},metadata:d},l,c),ab(this,null,i,{kind:"setter",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,set:(t,e)=>{t.value=e}},metadata:d},null,r),ab(this,null,n,{kind:"accessor",name:"vertical",static:!1,private:!1,access:{has:t=>"vertical"in t,get:t=>t.vertical,set:(t,e)=>{t.vertical=e}},metadata:d},u,h),d&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d})}#ss;get items(){return this.#ss}set items(t){this.#ss=t}#Xs;get unselectable(){return this.#Xs}set unselectable(t){this.#Xs=t}#tr;get value(){return this.#tr}set value(t){if(this.#tr===t)return;const e=this.items;for(const i of e)if(Array.isArray(i)){const e=i.find((e=>e.value===t));if(e){this.#di.set(i,e);break}}else if(i.value===t)break;this.#tr=t,this.requestUpdate()}#er;get vertical(){return this.#er}set vertical(t){this.#er=t}#di;#ir;render(){const t=this.items.map(this.#nr);return this.#ir&&t.push(this.#ir),t}#nr;connectedCallback(){super.connectedCallback(),this.addEventListener("pointerdown",this.#xn),this.addEventListener("pointerup",this.#rr),this.addEventListener("pointercancel",this.#rr),this.addEventListener("click",this.#cs)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("pointerdown",this.#xn),this.removeEventListener("pointerup",this.#rr),this.removeEventListener("pointercancel",this.#rr),this.removeEventListener("click",this.#cs)}#or(t){if(this.#tr===t.value){if(!this.unselectable)return!1;t=void 0}return!!this.dispatchEvent(new eb(t?.value,t))&&(this.value=t?.value,!0)}#sr(t){if(0!==t.button)return null;const e=t.composedPath();if(e.includes(this.#ir))return null;const i=e[0];return i.classList.contains("item")&&void 0!==i.dataset.index?parseInt(i.dataset.index):null}#cs;#ar;#rr;#xn;async#cr(){this.#ir||(this.#ir=document.createElement("cc-context-menu"),this.#ir.id="menu",this.requestUpdate(),await this.updateComplete)}#lr;static{this.styles=[yb,bb,kb]}}})(),uw=(()=>{let t,e,i,n,s,r=qx,o=[],a=[],l=[],c=[],u=[],h=[],d=[],f=[],p=[],g=[];return class extends r{static{const m="function"==typeof Symbol&&Symbol.metadata?Object.create(r[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!0})],e=[db({type:Boolean,reflect:!0})],i=[db({type:String,reflect:!1,attribute:"on-icon"})],n=[db({type:String,reflect:!1,attribute:"off-icon"})],s=[db({type:Boolean,reflect:!0,attribute:"css-icon"})],ab(this,null,t,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:m},o,a),ab(this,null,e,{kind:"accessor",name:"checked",static:!1,private:!1,access:{has:t=>"checked"in t,get:t=>t.checked,set:(t,e)=>{t.checked=e}},metadata:m},l,c),ab(this,null,i,{kind:"accessor",name:"onIcon",static:!1,private:!1,access:{has:t=>"onIcon"in t,get:t=>t.onIcon,set:(t,e)=>{t.onIcon=e}},metadata:m},u,h),ab(this,null,n,{kind:"accessor",name:"offIcon",static:!1,private:!1,access:{has:t=>"offIcon"in t,get:t=>t.offIcon,set:(t,e)=>{t.offIcon=e}},metadata:m},d,f),ab(this,null,s,{kind:"accessor",name:"cssIcon",static:!1,private:!1,access:{has:t=>"cssIcon"in t,get:t=>t.cssIcon,set:(t,e)=>{t.cssIcon=e}},metadata:m},p,g),m&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})}#Pn=lb(this,o,!1);get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}#ys=(lb(this,a),lb(this,l,!1));get checked(){return this.#ys}set checked(t){this.#ys=t}#ur=(lb(this,c),lb(this,u,"MaintainChecked"));get onIcon(){return this.#ur}set onIcon(t){this.#ur=t}#hr=(lb(this,h),lb(this,d,"MaintainUnchecked"));get offIcon(){return this.#hr}set offIcon(t){this.#hr=t}#Qs=(lb(this,f),lb(this,p,!0));get cssIcon(){return this.#Qs}set cssIcon(t){this.#Qs=t}render(){const t=this.checked;return Px`<cc-action-button .selected=${t} .disabled=${this.disabled} @click=${this.#cs}>
            ${this.#Ns(t?this.onIcon:this.offIcon)}
        </cc-action-button>`}#Ns(t){return this.cssIcon?Px`<cc-css-icon .name=${t}></cc-css-icon>`:Px`<cc-icon .name=${t}></cc-icon>`}#cs(){const t=!this.checked;this.dispatchEvent(new eb(t))&&(this.checked=t)}static{this.styles=Jy`
:host {
    display: flex;
    container-name: --cc-size-provider --cc-quiet-provider --cc-emphasized-provider;
    container-type: normal;
}

:host([quiet]) {
    --cc-quiet: true;
}
:host([emphasized]) {
    --cc-emphasized: true;
}
:host([size="m"]) {
    --cc-size: m;
}
    `}constructor(){super(...arguments),lb(this,g)}}})(),hw=(()=>{let t,e,i=qx,n=[],s=[],r=[],o=[];return class extends i{static{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;t=[db({type:String,reflect:!1})],e=[db({type:Boolean,reflect:!0})],ab(this,null,t,{kind:"accessor",name:"label",static:!1,private:!1,access:{has:t=>"label"in t,get:t=>t.label,set:(t,e)=>{t.label=e}},metadata:a},n,s),ab(this,null,e,{kind:"accessor",name:"open",static:!1,private:!1,access:{has:t=>"open"in t,get:t=>t.open,set:(t,e)=>{t.open=e}},metadata:a},r,o),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}#xs=lb(this,n,"");get label(){return this.#xs}set label(t){this.#xs=t}#dr=(lb(this,s),lb(this,r,!1));get open(){return this.#dr}set open(t){this.#dr=t}render(){return Px`
            <div id="label" @click=${this.toggle}>
                <span>${this.label}</span>
                <cc-css-icon id="icon" name="ChevronDown"></cc-css-icon>
            </div>
            <div id="content" part="content" .inert=${!this.open}>
                <slot></slot>
            </div>`}toggle(){this.dispatchEvent(new Event("toggle",{cancelable:!0}))&&(this.open=!this.open)}static{this.styles=Jy`
@container --theme-provider style(--theme: dark) {
    :host {
        --accordion-hover-color: var(--white);
        --accordion-hover-bg: var(--gray-800);
    }
}
@container --theme-provider style(--theme: light) {
    :host {
        --accordion-hover-color: var(--black);
        --accordion-hover-bg: var(--gray-50);
    }
}
:host {
    display: block;
    box-sizing: border-box;
    --accordion-padding: 8px;
    --accordion-padding-double: calc(var(--accordion-padding) * 2);
    border-bottom: var(--border-size) solid var(--separator-color);
    contain: content;
}

:host([hidden]) {
    display: none;
}

:host([open]) {
    padding-bottom: var(--accordion-padding);
}

#label {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    height: 48px;
    padding: 0 var(--accordion-padding-double);
    color: var(--text-color-default);

    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 1px;
    user-select: none;
    cursor: pointer;
}

#label:hover {
    color: var(--accordion-hover-color);
}

:host(:not([open])) #label:hover {
    /* background: linear-gradient(45deg, var(--accordion-hover-bg), transparent); */
    background: var(--accordion-hover-bg);
}

#icon {
    margin-right: 3px;
    transform: rotate(90deg);
    transition: transform 0.2s;
}

:host([open]) #icon {
    transform: rotate(0deg);
}

#content {
    padding: var(--accordion-padding) var(--accordion-padding-double);
}

:host(:not([open])) #content {
    display: none;
}
`}constructor(){super(...arguments),lb(this,o)}}})();const{I:dw}=Yx,fw=(t,e)=>void 0===e?void 0!==t?._$litType$:t?._$litType$===e,pw=()=>document.createComment(""),gw=(t,e,i)=>{const n=t._$AA.parentNode,s=void 0===e?t._$AB:e._$AA;if(void 0===i){const e=n.insertBefore(pw(),s),r=n.insertBefore(pw(),s);i=new dw(e,r,t,t.options)}else{const e=i._$AB.nextSibling,r=i._$AM,o=r!==t;if(o){let e;i._$AQ?.(t),i._$AM=t,void 0!==i._$AP&&(e=t._$AU)!==r._$AU&&i._$AP(e)}if(e!==s||o){let t=i._$AA;for(;t!==e;){const e=t.nextSibling;n.insertBefore(t,s),t=e}}}return i},mw=(t,e,i=t)=>(t._$AI(e,i),t),vw={},yw=(t,e=vw)=>t._$AH=e,xw=t=>t._$AH,bw=t=>{t._$AP?.(!1,!0);let e=t._$AA;const i=t._$AB.nextSibling;for(;e!==i;){const t=e.nextSibling;e.remove(),e=t}},ww=(t,e,i)=>{const n=new Map;for(let s=e;s<=i;s++)n.set(t[s],s);return n},Mw=Fb(class extends Vb{constructor(t){if(super(t),2!==t.type)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let n;void 0===i?i=e:void 0!==e&&(n=e);const s=[],r=[];let o=0;for(const e of t)s[o]=n?n(e,o):o,r[o]=i(e,o),o++;return{values:r,keys:s}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,n]){const s=xw(t),{values:r,keys:o}=this.dt(e,i,n);if(!Array.isArray(s))return this.ut=o,r;const a=this.ut??=[],l=[];let c,u,h=0,d=s.length-1,f=0,p=r.length-1;for(;h<=d&&f<=p;)if(null===s[h])h++;else if(null===s[d])d--;else if(a[h]===o[f])l[f]=mw(s[h],r[f]),h++,f++;else if(a[d]===o[p])l[p]=mw(s[d],r[p]),d--,p--;else if(a[h]===o[p])l[p]=mw(s[h],r[p]),gw(t,l[p+1],s[h]),h++,p--;else if(a[d]===o[f])l[f]=mw(s[d],r[f]),gw(t,s[h],s[d]),d--,f++;else if(void 0===c&&(c=ww(o,f,p),u=ww(a,h,d)),c.has(a[h]))if(c.has(a[d])){const e=u.get(o[f]),i=void 0!==e?s[e]:null;if(null===i){const e=gw(t,s[h]);mw(e,r[f]),l[f]=e}else l[f]=mw(i,r[f]),gw(t,s[h],i),s[e]=null;f++}else bw(s[d]),d--;else bw(s[h]),h++;for(;f<=p;){const e=gw(t,l[p+1]);mw(e,r[f]),l[f++]=e}for(;h<=d;){const t=s[h++];null!==t&&bw(t)}return this.ut=o,yw(t,l),Tx}});let Sw=(()=>{let t,e=qx,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[db({type:Array})],ab(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#ss=lb(this,i,[]);get items(){return this.#ss}set items(t){this.#ss=t}#Me=(lb(this,n),0);render(){return this.#Me=0,Px`${Mw(this.items,kw,this.#ls)}<div id="placeholder"><slot></slot></div>`}#fr=0;connectedCallback(){super.connectedCallback(),this.#fr++>0&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),this.#fr++,this.requestUpdate()}updated(){this.#Me?this.classList.remove("placeholder"):this.classList.add("placeholder")}#ls=t=>{const e=this.#fr%2==1?this.resolve():null,i=null!=e&&t.isVisible(e),n=i?t.getLabel(e):"",s=t.open,r=i&&s?t.getElement(e):null;return i&&this.#Me++,Px`<cc-accordion
            .label=${n}
            .open=${s}
            .hidden=${!i}
            data-id=${t.id}
            @toggle=${this.#pr}
        >
            ${r||Ax}
        </cc-accordion>`};#pr(t){_w.call(this,t)}static{this.styles=Jy`
#placeholder {display: none}
:host(.placeholder) #accordion {display: none}
:host(.placeholder) #placeholder {display: block}
`}}})();function kw(t){return t.id}function _w(t){const e=t.target.dataset.id,i=this.items.find((t=>t.id===e));i&&(i.open=!i.open,this.requestUpdate())}class Iw{constructor(t){this.id=t,this.open=!0,this.#Hn=null}#Hn;getElement(t){return this.#Hn??=this.createElement(),this.#Hn.value=t,this.#Hn}}class Cw extends qx{#gr=!1;constructor(){super(),this.updateContent=Lt((()=>{this.#gr&&this.isConnected&&this.refresh()}))}firstUpdated(){this.#gr=!0,this.updateContent()}find(t){return this.shadowRoot.querySelector(t)}connectedCallback(){super.connectedCallback(),this.updateContent()}}class Lw{constructor(t,e,i,n=!0){this.id=t,this.label=e,this.content=i,this.open=n}}let Nw=(()=>{let t,e=qx,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[db({type:Array})],ab(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#ss=lb(this,i,[]);get items(){return this.#ss}set items(t){this.#ss=t}render(){return Px`${Mw(this.items,kw,this.#ls)}`}#ls=(lb(this,n),t=>{const e=t.open?t.content:null;return e?.isConnected&&e.updateContent(),Px`<cc-accordion
            .label=${t.label}
            .open=${t.open}
            data-id=${t.id}
            @toggle=${this.#pr}
        >${e||Ax}</cc-accordion>`});#pr(t){_w.call(this,t)}}})(),jw=(()=>{let t,e,i,n,s,r,o,a,l,c,u=qx,h=[],d=[],f=[],p=[],g=[],m=[],v=[],y=[],x=[],b=[],w=[],M=[],S=[],k=[],_=[],I=[],C=[],L=[];return class extends u{static{const N="function"==typeof Symbol&&Symbol.metadata?Object.create(u[Symbol.metadata]??null):void 0;t=[db({type:String,reflect:!1})],e=[db({type:String,reflect:!1})],i=[db({reflect:!1})],n=[db({type:Number,reflect:!1,attribute:"minlength"})],s=[db({type:Number,reflect:!1,attribute:"maxlength"})],r=[db({type:String,reflect:!1})],o=[db({type:Boolean,reflect:!0})],a=[db({attribute:!1})],l=[gb("#input",!0)],ab(this,null,t,{kind:"accessor",name:"placeholder",static:!1,private:!1,access:{has:t=>"placeholder"in t,get:t=>t.placeholder,set:(t,e)=>{t.placeholder=e}},metadata:N},h,d),ab(this,null,e,{kind:"accessor",name:"type",static:!1,private:!1,access:{has:t=>"type"in t,get:t=>t.type,set:(t,e)=>{t.type=e}},metadata:N},f,p),ab(this,null,i,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:N},g,m),ab(this,null,n,{kind:"accessor",name:"minLength",static:!1,private:!1,access:{has:t=>"minLength"in t,get:t=>t.minLength,set:(t,e)=>{t.minLength=e}},metadata:N},v,y),ab(this,null,s,{kind:"accessor",name:"maxLength",static:!1,private:!1,access:{has:t=>"maxLength"in t,get:t=>t.maxLength,set:(t,e)=>{t.maxLength=e}},metadata:N},x,b),ab(this,null,r,{kind:"accessor",name:"pattern",static:!1,private:!1,access:{has:t=>"pattern"in t,get:t=>t.pattern,set:(t,e)=>{t.pattern=e}},metadata:N},w,M),ab(this,null,o,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:N},S,k),ab(this,null,a,{kind:"accessor",name:"formatter",static:!1,private:!1,access:{has:t=>"formatter"in t,get:t=>t.formatter,set:(t,e)=>{t.formatter=e}},metadata:N},_,I),ab(this,c={get:cb((function(){return this.#mr}),"#input","get"),set:cb((function(t){this.#mr=t}),"#input","set")},l,{kind:"accessor",name:"#input",static:!1,private:!0,access:{has:t=>#vr in t,get:t=>t.#vr,set:(t,e)=>{t.#vr=e}},metadata:N},C,L),N&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:N})}static{this.shadowRootOptions={...qx.shadowRootOptions,delegatesFocus:!0}}#rs=lb(this,h,void 0);get placeholder(){return this.#rs}set placeholder(t){this.#rs=t}#yr=(lb(this,d),lb(this,f,"text"));get type(){return this.#yr}set type(t){this.#yr=t}#is=(lb(this,p),lb(this,g,void 0));get value(){return this.#is}set value(t){this.#is=t}#xr=(lb(this,m),lb(this,v,void 0));get minLength(){return this.#xr}set minLength(t){this.#xr=t}#br=(lb(this,y),lb(this,x,void 0));get maxLength(){return this.#br}set maxLength(t){this.#br=t}#wr=(lb(this,b),lb(this,w,void 0));get pattern(){return this.#wr}set pattern(t){this.#wr=t}#Pn=(lb(this,M),lb(this,S,!1));get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}#Mr=(lb(this,k),lb(this,_,null));get formatter(){return this.#Mr}set formatter(t){this.#Mr=t}#mr=(lb(this,I),lb(this,C,void 0));get#vr(){return c.get.call(this)}set#vr(t){return c.set.call(this,t)}render(){let t="";return null!=this.value&&(t=this.formatter?this.formatter.format(this.value):this.value.toString()),Px`
            <slot name="before"></slot>
            <input id="input" part="input"
                .value=${t}
                .type=${this.type}
                .disabled=${this.disabled}
                .inert=${this.disabled}
                @input=${this.#Sr}
                @change=${this.#kr}
                minlength=${Ub(this.minLength)}
                maxlength=${Ub(this.maxLength)}
                pattern=${Ub(this.pattern)}
                placeholder=${Ub(this.placeholder)}
                spellcheck="false"
                autocomplete="off"
            >
            <slot name="after"></slot>
        `}selectAll(){this.#vr.setSelectionRange(0,this.#vr.value.length,"none")}#Sr(t){t.stopPropagation(),this.dispatchEvent(new CustomEvent("update",{detail:this.#vr.value}))}#kr(t){let e;if(t.stopPropagation(),this.formatter){if(e=this.formatter.parse(this.#vr.value),this.formatter.equals?.(e,this.value))return}else e=this.#vr.value;e!==this.value&&(this.dispatchEvent(new eb(e))?this.value=e:this.requestUpdate())}static{this.styles=[Sb]}constructor(){super(...arguments),lb(this,L)}}})(),zw=(()=>{let t,e,i,s,r,o,a,l=qx,c=[],h=[],d=[],f=[],p=[],g=[],m=[],v=[],y=[],x=[],b=[],w=[];return class extends l{static{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(l[Symbol.metadata]??null):void 0;t=[db({type:Number,reflect:!1})],e=[db({type:Number,reflect:!1})],i=[db({type:Number,reflect:!1})],s=[db({type:Number,reflect:!1})],r=[db({type:Boolean,reflect:!0})],o=[gb("#input",!0)],ab(this,null,t,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:n},c,h),ab(this,null,e,{kind:"accessor",name:"fps",static:!1,private:!1,access:{has:t=>"fps"in t,get:t=>t.fps,set:(t,e)=>{t.fps=e}},metadata:n},d,f),ab(this,null,i,{kind:"accessor",name:"min",static:!1,private:!1,access:{has:t=>"min"in t,get:t=>t.min,set:(t,e)=>{t.min=e}},metadata:n},p,g),ab(this,null,s,{kind:"accessor",name:"max",static:!1,private:!1,access:{has:t=>"max"in t,get:t=>t.max,set:(t,e)=>{t.max=e}},metadata:n},m,v),ab(this,null,r,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:n},y,x),ab(this,a={get:cb((function(){return this.#mr}),"#input","get"),set:cb((function(t){this.#mr=t}),"#input","set")},o,{kind:"accessor",name:"#input",static:!1,private:!0,access:{has:t=>#vr in t,get:t=>t.#vr,set:(t,e)=>{t.#vr=e}},metadata:n},b,w),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}static{this.shadowRootOptions={...qx.shadowRootOptions,delegatesFocus:!0}}#is=lb(this,c,0);get value(){return this.#is}set value(t){this.#is=t}#_r=(lb(this,h),lb(this,d,60));get fps(){return this.#_r}set fps(t){this.#_r=t}#Ir=(lb(this,f),lb(this,p,0));get min(){return this.#Ir}set min(t){this.#Ir=t}#Cr=(lb(this,g),lb(this,m,5184e6));get max(){return this.#Cr}set max(t){this.#Cr=t}#Pn=(lb(this,v),lb(this,y,!1));get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}#mr=(lb(this,x),lb(this,b,void 0));get#vr(){return a.get.call(this)}set#vr(t){return a.set.call(this,t)}render(){return Px`
            <slot name="before"></slot>
            <input id="input" part="input" type="text"
                .value=${j(this.value,this.fps)}
                .disabled=${this.disabled}
                .inert=${this.disabled}
                @change=${this.#kr}
                spellcheck="false"
                autocomplete="off"
            >
            <slot name="after"></slot>
        `}#kr(t){t.stopPropagation();const e=1e3/this.fps,i=P(this.min*e,e),s=P(this.max*e,e);let r=function(t,e){if(!t)return 0;const i=u(t,1),n=i.length;if(0===n)return 0;i.reverse();let s=Math.abs(1e3*i[0]/e);return n>1&&(s+=Math.abs(1e3*i[1]),n>2&&(s+=Math.abs(6e4*i[2]))),Math.round(s)}(this.#vr.value,this.fps);r=P(r,e),r=n(r,i,s),r!==this.value&&(this.dispatchEvent(new eb(r))?this.value=r:this.requestUpdate())}static{this.styles=[Sb]}constructor(){super(...arguments),lb(this,w)}}})();const Pw={unit:"",digits:2};let Tw=(()=>{let t,e,i,n,r,o=qx,a=[];return class extends o{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!0,noAccessor:!0})],e=[db({type:Boolean,reflect:!0,noAccessor:!0})],i=[db({attribute:!1,noAccessor:!0})],n=[db({type:String,reflect:!1,noAccessor:!0})],r=[db({type:Number,reflect:!1,noAccessor:!0})],ab(this,null,t,{kind:"setter",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,set:(t,e)=>{t.disabled=e}},metadata:s},null,a),ab(this,null,e,{kind:"setter",name:"indeterminate",static:!1,private:!1,access:{has:t=>"indeterminate"in t,set:(t,e)=>{t.indeterminate=e}},metadata:s},null,a),ab(this,null,i,{kind:"setter",name:"formatter",static:!1,private:!1,access:{has:t=>"formatter"in t,set:(t,e)=>{t.formatter=e}},metadata:s},null,a),ab(this,null,n,{kind:"setter",name:"placeholder",static:!1,private:!1,access:{has:t=>"placeholder"in t,set:(t,e)=>{t.placeholder=e}},metadata:s},null,a),ab(this,null,r,{kind:"setter",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,set:(t,e)=>{t.value=e}},metadata:s},null,a),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}static{this.shadowRootOptions={...qx.shadowRootOptions,delegatesFocus:!0}}#Lr;get disabled(){return this.#Lr}set disabled(t){this.#Lr!==t&&(this.#Lr=t,this.#vr.disabled=this.#vr.inert=t)}#Nr;get indeterminate(){return this.#Nr}set indeterminate(t){this.#Nr!==t&&(this.#Nr=t,this.#jr())}#zr;get formatter(){return this.#zr}set formatter(t){this.#zr!==t&&(this.#zr=t,this.#jr())}#vr;get#vs(){return this.stream??=new zb}#Pr;get placeholder(){return this.#Pr}set placeholder(t){this.#vr.placeholder=t}#tr;get value(){return this.#tr}set value(t){this.#tr!==t&&(this.#tr=t,this.#jr())}constructor(){super(),this.#Lr=(lb(this,a),!1),this.#Nr=!1,this.stream=null,this.pointerStep=5,this.#zr=Pw,this.#Pr="",this.#tr=void 0,this.#Tr=!1,this.#Ar=()=>{this.#Tr=!0;const t=this.#vr,e=this.formatter;t.type="number",t.min=Aw(e.min,e.scale),t.max=Aw(e.max,e.scale),t.step=Aw(e.step,e.scale),t.addEventListener("wheel",this.#an),t.addEventListener("input",this.#Sr),t.addEventListener("keydown",this.#Dr),this.#jr()},this.#Er=()=>{this.#Tr=!1;const t=this.#vr;t.type="text",this.#jr(),t.removeEventListener("wheel",this.#an),t.removeEventListener("input",this.#Sr),t.removeEventListener("keydown",this.#Dr),this.#vs.end()},this.#Sr=t=>{t.stopPropagation(),this.#or(this.#vr.valueAsNumber/(this.#zr.scale??1))},this.#Dr=t=>{switch(t.key){case"ArrowUp":return t.preventDefault(),void this.#Or(1,t.shiftKey);case"ArrowDown":return t.preventDefault(),void this.#Or(-1,t.shiftKey);case"Enter":case"Escape":return t.preventDefault(),void this.#vr.blur()}},this.#an=t=>{t.preventDefault(),t.stopPropagation();const e=-Math.sign(t.deltaY);0===e||isNaN(e)||this.#Or(e,t.shiftKey)},this.#Wr={x:0,y:0},this.#Rr=!1,this.#xn=t=>{t.isPrimary&&0===t.button&&t.composedPath()[0]!==this.#vr&&(t.preventDefault(),b(),this.setPointerCapture(t.pointerId),this.setAttribute("active",""),C(this.#gn,this.#bn),this.#Wr.x=t.clientX,this.#Wr.y=t.clientY,this.#Rr=!1)},this.#gn=t=>{const e=this.#Wr,i=this.pointerStep,n=Math.round((t.clientX-e.x)/i);if(Math.abs(n)>=1)return e.x+=n*i,e.y=t.clientY,void(this.#Or(n,t.shiftKey)&&(this.#Rr=!0));const s=-Math.round((t.clientY-e.y)/i);return Math.abs(s)>=1?(e.x=t.clientX,e.y-=s*i,void(this.#Or(s,t.shiftKey)&&(this.#Rr=!0))):void 0},this.#bn=t=>{t.isPrimary&&(0!==t.button&&t.preventDefault(),this.releasePointerCapture(t.pointerId),L(),this.removeAttribute("active"),this.#Rr&&this.#vs.end())};const t=document.createElement("input");t.id="input",t.part.add("input"),t.type="text",t.inputMode="decimal",this.#vr=t}connectedCallback(){super.connectedCallback();const t=this.#vr;t.addEventListener("focus",this.#Ar),t.addEventListener("blur",this.#Er),this.pointerStep&&this.addEventListener("pointerdown",this.#xn),this.#vs.inherited||this.#vs.connect(this)}disconnectedCallback(){super.disconnectedCallback();const t=this.#vr;t.removeEventListener("focus",this.#Ar),t.removeEventListener("blur",this.#Er),this.pointerStep&&this.removeEventListener("pointerdown",this.#xn),this.#vs.inherited||this.#vs.disconnect()}render(){return Px`
            <slot name="before"></slot>
            ${this.#vr}
            <slot name="after"></slot>
        `}#Tr;#jr(){let t=this.#tr;const e=this.#vr;if(this.#Nr||null==this.#tr)return void(e.value="");const i=this.#zr;i.scale&&(t*=i.scale),this.#Tr?e.valueAsNumber=Math.round(1e4*t)/1e4:e.value=f(t,i.digits??2,i.unit??"")}#Or(t,e){const i=this.#zr;return e&&(t*=10),t*=(i.stepScale||1)*(i.step||1),!!this.#or((this.#tr??i.min??0)+t)&&(this.#jr(),!0)}#or(t){if(Number.isNaN(t)||!Number.isFinite(t))return!1;const e=this.#zr;return t=s(t,e.step,e.min,e.max),this.#tr!==t&&(this.#vs.started||this.#vs.start(this.#tr),this.#tr=t,this.#vs.update(t),!0)}#Ar;#Er;#Sr;#Dr;#an;#Wr;#Rr;#xn;#gn;#bn;static{this.styles=[Sb,Jy`:host {cursor: ew-resize}`]}}})();function Aw(t,e){return null==t?"":(t*(e??1)).toFixed(2)}let Dw=(()=>{let t,e,i,n,s=qx,r=[],o=[],a=[],l=[],c=[];return class extends s{static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[db({type:String,reflect:!1,noAccessor:!0})],e=[db({type:Number,reflect:!1,noAccessor:!0})],i=[db({type:Boolean,reflect:!0})],n=[db({type:Boolean,reflect:!0})],ab(this,null,t,{kind:"setter",name:"paint",static:!1,private:!1,access:{has:t=>"paint"in t,set:(t,e)=>{t.paint=e}},metadata:u},null,r),ab(this,null,e,{kind:"setter",name:"opacity",static:!1,private:!1,access:{has:t=>"opacity"in t,set:(t,e)=>{t.opacity=e}},metadata:u},null,r),ab(this,null,i,{kind:"accessor",name:"selected",static:!1,private:!1,access:{has:t=>"selected"in t,get:t=>t.selected,set:(t,e)=>{t.selected=e}},metadata:u},o,a),ab(this,null,n,{kind:"accessor",name:"indeterminate",static:!1,private:!1,access:{has:t=>"indeterminate"in t,get:t=>t.indeterminate,set:(t,e)=>{t.indeterminate=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#qe=lb(this,r);#Ht="transparent";get paint(){return this.#Ht}set paint(t){this.#Ht!==t&&(this.#Ht=t,this.#qe.style.setProperty("background",t))}#Zt=1;get opacity(){return this.#Zt}set opacity(t){this.#Zt!==t&&(this.#Zt=t,this.#qe.style.setProperty("opacity",t.toString()))}#On=lb(this,o,!1);get selected(){return this.#On}set selected(t){this.#On=t}#ds=(lb(this,a),lb(this,l,!1));get indeterminate(){return this.#ds}set indeterminate(t){this.#ds=t}constructor(){super(),lb(this,c),this.#qe=document.createElement("div"),this.#qe.id="fill"}render(){return this.#qe}static{this.styles=Jy`
@container --theme-provider style(--theme: light) {
    :host {
        --brush-thumb-bg: var(--gray-100);
        --brush-thumb-border: var(--gray-300);
        --q-mark: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBmaWxsPSIjMDAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4IiBoZWlnaHQ9IjE0LjIyMjIiIHZpZXdCb3g9IjAgMCA4IDE0LjIyMjIiPgogICAgPHBhdGggZD0ibTIuNTk5OCw5LjU2OTZjLS4wNzQxLS40OTE5LS4wNTUyLS45NDIyLjA1NjEtMS4zNTI0LjExMTItLjQwOTQuMjczMS0uNzg1NC40ODgzLTEuMTI3My4yMTUyLS4zNDEuNDU5NC0uNjU4Ny43MzQzLS45NTIyLjI3MzEtLjI5MzUuNTMzNS0uNTgxMi43Nzc3LS44NjEzLjI0NDItLjI3OTMuNDQ4NS0uNTU2MS42MTEzLS44Mjk2LjE2MjgtLjI3MjcuMjQ0Mi0uNTY3LjI0NDItLjg4MTMsMC0uNDkxMS0uMTU5MS0uODg3Mi0uNDc3NC0xLjE4ODItLjMyMDEtLjMwMDItLjc1OTYtLjQ1MTEtMS4zMjItLjQ1MTEtLjQ1OTQsMC0uODc1My4wOTU5LTEuMjQ1Mi4yODY4LS4zNzA3LjE5MTgtLjcxODkuNDUxMS0xLjA0NDQuNzc4OEwwLDEuNzgyN2MuNDg5Mi0uNTE4NiwxLjA3MDYtLjk0NTUsMS43NDQzLTEuMjgwNy42NzQ2LS4zMzQ0LDEuNDM0Mi0uNTAyLDIuMjc4Ny0uNTAyLjU3NjksMCwxLjExMDQuMDcxNywxLjU5ODcuMjE1MS40OTAxLjE0MzQuOTA3OS4zNTg1LDEuMjU2OS42NDU0LjM0NzIuMjg2OC42MjIxLjY0MjkuODIxMSwxLjA2NTYuMjAwNy40MjM2LjMwMDIuOTE1NS4zMDAyLDEuNDc1OCwwLC40MzY5LS4wODUuODI5Ni0uMjU1LDEuMTc4MnMtLjM4MTYuNjc5Ni0uNjMzLjk5MzljLS4yNTMyLjMxNDMtLjUyMjcuNjE0NS0uODEyLjkwMTNzLS41NDguNTg3OC0uNzc3Ny45MDIyLS40MTQyLjY0ODctLjU1NTIsMS4wMDM5LS4xODI3Ljc1MTMtLjEyMywxLjE4ODJoLTIuMjQ0NFoiLz4KICAgIDxwYXRoIGQ9Im0zLjk5MDksMTQuMjIyMmMtLjM4MTUsMC0uNjk3NC0uMTI2NS0uOTQ4Ni0uMzc2OC0uMjUwNC0uMjUwMy0uMzc1Ni0uNTY4Ni0uMzc1Ni0uOTU2NnMuMTI1Mi0uNzA2My4zNzU2LS45NTY2Yy4yNTEyLS4yNTAzLjU2NzEtLjM3NjguOTQ4Ni0uMzc2OHMuNzAwMy4xMjY1Ljk1NjYuMzc2OC4zODU4LjU2ODYuMzg1OC45NTY2LS4xMjk2LjcwNjMtLjM4NTguOTU2Ni0uNTc1MS4zNzY4LS45NTY2LjM3NjhaIi8+Cjwvc3ZnPg==");
    }
}

@container --theme-provider style(--theme: dark) {
    :host {
        --brush-thumb-bg: var(--gray-800);
        --brush-thumb-border: var(--gray-700);
        --q-mark: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBmaWxsPSIjZmZmIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4IiBoZWlnaHQ9IjE0LjIyMjIiIHZpZXdCb3g9IjAgMCA4IDE0LjIyMjIiPgogICAgPHBhdGggZD0ibTIuNTk5OCw5LjU2OTZjLS4wNzQxLS40OTE5LS4wNTUyLS45NDIyLjA1NjEtMS4zNTI0LjExMTItLjQwOTQuMjczMS0uNzg1NC40ODgzLTEuMTI3My4yMTUyLS4zNDEuNDU5NC0uNjU4Ny43MzQzLS45NTIyLjI3MzEtLjI5MzUuNTMzNS0uNTgxMi43Nzc3LS44NjEzLjI0NDItLjI3OTMuNDQ4NS0uNTU2MS42MTEzLS44Mjk2LjE2MjgtLjI3MjcuMjQ0Mi0uNTY3LjI0NDItLjg4MTMsMC0uNDkxMS0uMTU5MS0uODg3Mi0uNDc3NC0xLjE4ODItLjMyMDEtLjMwMDItLjc1OTYtLjQ1MTEtMS4zMjItLjQ1MTEtLjQ1OTQsMC0uODc1My4wOTU5LTEuMjQ1Mi4yODY4LS4zNzA3LjE5MTgtLjcxODkuNDUxMS0xLjA0NDQuNzc4OEwwLDEuNzgyN2MuNDg5Mi0uNTE4NiwxLjA3MDYtLjk0NTUsMS43NDQzLTEuMjgwNy42NzQ2LS4zMzQ0LDEuNDM0Mi0uNTAyLDIuMjc4Ny0uNTAyLjU3NjksMCwxLjExMDQuMDcxNywxLjU5ODcuMjE1MS40OTAxLjE0MzQuOTA3OS4zNTg1LDEuMjU2OS42NDU0LjM0NzIuMjg2OC42MjIxLjY0MjkuODIxMSwxLjA2NTYuMjAwNy40MjM2LjMwMDIuOTE1NS4zMDAyLDEuNDc1OCwwLC40MzY5LS4wODUuODI5Ni0uMjU1LDEuMTc4MnMtLjM4MTYuNjc5Ni0uNjMzLjk5MzljLS4yNTMyLjMxNDMtLjUyMjcuNjE0NS0uODEyLjkwMTNzLS41NDguNTg3OC0uNzc3Ny45MDIyLS40MTQyLjY0ODctLjU1NTIsMS4wMDM5LS4xODI3Ljc1MTMtLjEyMywxLjE4ODJoLTIuMjQ0NFoiLz4KICAgIDxwYXRoIGQ9Im0zLjk5MDksMTQuMjIyMmMtLjM4MTUsMC0uNjk3NC0uMTI2NS0uOTQ4Ni0uMzc2OC0uMjUwNC0uMjUwMy0uMzc1Ni0uNTY4Ni0uMzc1Ni0uOTU2NnMuMTI1Mi0uNzA2My4zNzU2LS45NTY2Yy4yNTEyLS4yNTAzLjU2NzEtLjM3NjguOTQ4Ni0uMzc2OHMuNzAwMy4xMjY1Ljk1NjYuMzc2OC4zODU4LjU2ODYuMzg1OC45NTY2LS4xMjk2LjcwNjMtLjM4NTguOTU2Ni0uNTc1MS4zNzY4LS45NTY2LjM3NjhaIi8+Cjwvc3ZnPg==");
    }
}

 :host {
    display: inline-grid;
    place-items: center;

    width: 32px;
    height: 32px;
    box-sizing: border-box;
    border-radius: 4px;
    border: 1px solid var(--brush-thumb-border);
    user-select: none;

    background: var(--chess-gradient) 50% / 16px 16px;
    contain: strict;
 }

 #fill {
    grid-column: 1; grid-row: 1;

    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    border-radius: 3px;
    outline: none;
    box-sizing: border-box;
 }

 :host([indeterminate]) #fill {
    display: none;
 }

 :host([indeterminate]) {
    background-color: var(--brush-thumb-bg);
    background-repeat: no-repeat;
    background-position: center;
    background-image: var(--q-mark);
    background-size: 16px 16px;
 }

 :host([indeterminate][cut]) {
    background-image: var(--q-mark), var(--q-mark), var(--q-mark), var(--q-mark);
    background-position: top left, top right, bottom left, bottom right;
    background-size: 8px 8px;
 }

 :host([cut]) {
    clip-path: polygon(-5% -5%, -5% 105%, 25% 105%, 25% 25%, 75% 25%, 75% 75%, 25% 75%, 25% 105%, 105% 105%, 105% -5%);
 }

 :host([cut])::after {
    grid-column: 1; grid-row: 1;
    content: "";
    box-sizing: border-box;
    display: inline-block;
    width: 18px;
    height: 18px;

    background: var(--brush-thumb-border);
    border-radius: 2px;
 }
 `}}})(),Ew=(()=>{let t,e,i,n=qx,s=[],r=[],o=[];return class extends n{static{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!0})],e=[db({type:String,reflect:!1,noAccessor:!0})],i=[db({type:Number,reflect:!1,noAccessor:!0})],ab(this,null,t,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:a},r,o),ab(this,null,e,{kind:"setter",name:"color",static:!1,private:!1,access:{has:t=>"color"in t,set:(t,e)=>{t.color=e}},metadata:a},null,s),ab(this,null,i,{kind:"setter",name:"opacity",static:!1,private:!1,access:{has:t=>"opacity"in t,set:(t,e)=>{t.opacity=e}},metadata:a},null,s),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}#qe=lb(this,s);#Pn=lb(this,r,!1);get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}#Ki=(lb(this,o),"transparent");get color(){return this.#Ki}set color(t){this.#Ki!==t&&(this.#Ki=t,this.#qe.style.background=t)}#Zt=1;get opacity(){return this.#Zt}set opacity(t){this.#Zt!==t&&(this.#Zt=t,this.#qe.style.opacity=(t??1).toString())}constructor(){super(),this.#qe=document.createElement("div"),this.#qe.id="fill"}render(){return this.#qe}static{this.styles=Jy`
@container --theme-provider style(--theme: light) {
    :host {
        --color-thumb-border: var(--gray-50);
        --color-thumb-border-hover: var(--gray-300);
    }
}

@container --theme-provider style(--theme: dark) {
    :host {
        --color-thumb-border: var(--gray-1000);
        --color-thumb-border-hover: var(--gray-700);
    }
}
:host {
    display: inline-block;
    box-sizing: border-box;
    width: 24px;
    height: 24px;

    background: var(--chess-gradient) 50% / 16px 16px;
    background-position: bottom left;
    background-origin: border-box;

    --color-thumb-rounding: 4px;
    border-radius: calc(var(--color-thumb-rounding) * var(--cc-border-tl, 1)) calc(var(--color-thumb-rounding) * var(--cc-border-tr, 1)) calc(var(--color-thumb-rounding) * var(--cc-border-br, 1)) calc(var(--color-thumb-rounding) * var(--cc-border-bl, 1));

    border: 1px solid var(--color-thumb-border);
    cursor: pointer;
    contain: strict;
}

:host([disabled]) {
    pointer-events: none;
    opacity: 45%;
}

:host([selected]) {
    --color-thumb-border: var(--accent-color-500) !important;
}

:host(:hover) {
    border-color: var(--color-thumb-border-hover);
}

#fill {
    width: 100%;
    height: 100%;
}

:host([size="m"]) {
    width: 32px;
    height: 32px;
}
@container --cc-size-provider style(--cc-size: m) {
    :host {
        width: 32px;
        height: 32px;
    }
}
`}}})(),Ow=(()=>{let t,e,i=qx,n=[],s=[],r=[],o=[];return class extends i{static{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!0})],e=[db({type:Boolean,reflect:!0})],ab(this,null,t,{kind:"accessor",name:"content",static:!1,private:!1,access:{has:t=>"content"in t,get:t=>t.content,set:(t,e)=>{t.content=e}},metadata:a},n,s),ab(this,null,e,{kind:"accessor",name:"active",static:!1,private:!1,access:{has:t=>"active"in t,get:t=>t.active,set:(t,e)=>{t.active=e}},metadata:a},r,o),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}#Br=lb(this,n,!1);get content(){return this.#Br}set content(t){this.#Br=t}#Ur=(lb(this,s),lb(this,r,!1));get active(){return this.#Ur}set active(t){this.#Ur=t}render(){return this.content?Px`<slot></slot>`:Ax}static{this.styles=Jy`
:host {
    --color-handle-size: 16px;
    --color-handle-bg: none;
    --color-handle-scale: 1;
    --color-handle-tx: -50%;
    --color-handle-ty: -50%;
    --color-handle-border-size: 2px;
    --color-handle-border: #fff;

    display: flex;
    box-sizing: border-box;
    width: var(--color-handle-size);
    height: var(--color-handle-size);
    background: var(--color-handle-bg);

    translate: var(--color-handle-tx) var(--color-handle-ty);
    scale: var(--color-handle-scale);
    transition: scale 0.2s;

    border: calc(var(--color-handle-border-size) / var(--color-handle-scale)) solid var(--color-handle-border);
    outline: calc(1px / var(--color-handle-scale)) solid var(--gray-500);
    box-shadow: inset 0 0 0 calc(1px / var(--color-handle-scale)) var(--gray-500);

    border-radius: 50%;
    user-select: none;
    pointer-events: var(--cc-pointer-events, auto);
    contain: layout;
}

:host([chess]) {
    --color-handle-bg: var(--chess-gradient) 50% /  var(--color-handle-size);
}

:host([active]) {
    --color-handle-scale: 1.75;
    z-index: 1;
}

:host([active][data-tip])::before {
    content: attr(data-tip);


    font-family: -expressive-keys;
    box-sizing: border-box;
    border: 0.25px solid var(--gray-500);
    border-radius: 4px;
    padding: 1px 3px;
    pointer-events: none;
    white-space: pre;

    display: flex;
    align-items: center;
    justify-content: space-around;

    text-align: justify;

    font-size: 6px;
    min-width: 100%;

    background: var(--canvas-color);
    color: var(--text-color-default);

    position: absolute;

    translate: -50% -100%;
    top: -4px;
    left: 50%;
}
`}constructor(){super(...arguments),lb(this,o)}}})(),Ww=(()=>{let t,e,i,s,r=qx,o=[],a=[],l=[],c=[],u=[],h=[],d=[],f=[];return class extends r{static{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(r[Symbol.metadata]??null):void 0;t=[db({type:Number,reflect:!1})],e=[db({type:Boolean,reflect:!0})],i=[db({type:Boolean,reflect:!0})],s=[db({type:String,reflect:!1})],ab(this,null,t,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:n},o,a),ab(this,null,e,{kind:"accessor",name:"vertical",static:!1,private:!1,access:{has:t=>"vertical"in t,get:t=>t.vertical,set:(t,e)=>{t.vertical=e}},metadata:n},l,c),ab(this,null,i,{kind:"accessor",name:"tip",static:!1,private:!1,access:{has:t=>"tip"in t,get:t=>t.tip,set:(t,e)=>{t.tip=e}},metadata:n},u,h),ab(this,null,s,{kind:"accessor",name:"color",static:!1,private:!1,access:{has:t=>"color"in t,get:t=>t.color,set:(t,e)=>{t.color=e}},metadata:n},d,f),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}#is=lb(this,o,0);get value(){return this.#is}set value(t){this.#is=t}#er=(lb(this,a),lb(this,l,!1));get vertical(){return this.#er}set vertical(t){this.#er=t}#$r=(lb(this,c),lb(this,u,!1));get tip(){return this.#$r}set tip(t){this.#$r=t}#Fr=(lb(this,h),lb(this,d,"#000"));get color(){return this.#Fr}set color(t){this.#Fr=t}#Vr=lb(this,f);#Hr;#vs=new zb;connectedCallback(){super.connectedCallback(),this.#vs.connect(this)}disconnectedCallback(){super.disconnectedCallback(),this.#vs.disconnect()}firstUpdated(){this.#Vr=this.shadowRoot.getElementById("slider"),this.#Hr=this.shadowRoot.getElementById("thumb")}render(){return Px`<div id="slider" @pointerdown=${this.#xn} style=${Zb({"--alpha-slider-value":this.value,"--alpha-slider-color":this.color})}><div id="track"><cc-color-handle id="thumb" content chess data-tip=${Xx(this.tip,Math.round(1e4*this.value)/100+"%")}><div id="color"></div></cc-color-handle></div></div>`}#gs=null;#xn=t=>{t.isPrimary&&0===t.button&&(this.#Hr.setAttribute("active",""),this.setPointerCapture(t.pointerId),C(this.#gn,this.#bn),this.#gs=this.#Vr.getBoundingClientRect(),b(),this.#vs.start(this.value),t.target===this.#Vr&&this.#gn(t))};#gn=t=>{const e=this.#gs;let i=n(this.vertical?1-(t.clientY-e.top)/e.height:(t.clientX-e.left)/e.width);i=Math.round(100*i)/100,this.value!==i&&(this.value=i,this.#vs.update(i))};#bn=t=>{t.isPrimary&&(0!==t.button&&t.preventDefault(),this.releasePointerCapture(t.pointerId),L(),this.#Hr.removeAttribute("active"),this.#gs=null,this.#vs.end())};static{this.styles=Jy`
:host {
    --alpha-slider-color: #000;
    --alpha-slider-size: 16px;
    --alpha-slider-direction: to right;

    display: flex;
    box-sizing: border-box;
    border-radius: 4px;
    user-select: none;
    contain: layout;
}

:host {
    width: 160px;
    height: var(--alpha-slider-size);
}

:host([vertical]) {
    width: var(--alpha-slider-size);
    height: 160px;
    flex-direction: column;
    --alpha-slider-direction: to top;
}

#slider {
    box-sizing: border-box;
    border-radius: inherit;

    flex: 1;
    margin: 0 calc(var(--alpha-slider-size) / 2);

    background: linear-gradient(var(--alpha-slider-direction), transparent 0%, var(--alpha-slider-color) 100%),
                var(--chess-gradient) 50% / var(--alpha-slider-size) var(--alpha-slider-size);
}

:host([vertical]) #slider {
    margin: calc(var(--alpha-slider-size) / 2) 0;
}

#track {
    width: 100%;
    height: 100%;
    transform: translateX(calc(var(--alpha-slider-value, 0) * 100%));
    pointer-events: none;
}

:host([vertical]) #track {
    transform: translateY(calc((1 - var(--alpha-slider-value, 0)) * 100%));
}

#thumb {
    --color-handle-tx: -50%;
    --color-handle-ty: 0;
    --color-handle-size: var(--alpha-slider-size);
}

:host([vertical]) #thumb {
    --color-handle-tx: 0;
    --color-handle-ty: -50%;
}

#color {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: var(--alpha-slider-color);
    opacity: var(--alpha-slider-value, 0);
    pointer-events: none;
}

`}}})(),Rw=(()=>{let t,e,i,s,r,o,a=qx,l=[],c=[],u=[],h=[],d=[],f=[],p=[],g=[],m=[],v=[],y=[],x=[];return class extends a{static{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(a[Symbol.metadata]??null):void 0;t=[db({type:Number,reflect:!1})],e=[db({type:Number,reflect:!1})],i=[db({type:Number,reflect:!1})],s=[db({type:Number,reflect:!1})],r=[db({type:Number,reflect:!1})],o=[db({type:Boolean})],ab(this,null,t,{kind:"accessor",name:"radius",static:!1,private:!1,access:{has:t=>"radius"in t,get:t=>t.radius,set:(t,e)=>{t.radius=e}},metadata:n},l,c),ab(this,null,e,{kind:"accessor",name:"thumb",static:!1,private:!1,access:{has:t=>"thumb"in t,get:t=>t.thumb,set:(t,e)=>{t.thumb=e}},metadata:n},u,h),ab(this,null,i,{kind:"accessor",name:"hue",static:!1,private:!1,access:{has:t=>"hue"in t,get:t=>t.hue,set:(t,e)=>{t.hue=e}},metadata:n},d,f),ab(this,null,s,{kind:"accessor",name:"saturation",static:!1,private:!1,access:{has:t=>"saturation"in t,get:t=>t.saturation,set:(t,e)=>{t.saturation=e}},metadata:n},p,g),ab(this,null,r,{kind:"accessor",name:"brightness",static:!1,private:!1,access:{has:t=>"brightness"in t,get:t=>t.brightness,set:(t,e)=>{t.brightness=e}},metadata:n},m,v),ab(this,null,o,{kind:"accessor",name:"tip",static:!1,private:!1,access:{has:t=>"tip"in t,get:t=>t.tip,set:(t,e)=>{t.tip=e}},metadata:n},y,x),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}#Gr=lb(this,l,160);get radius(){return this.#Gr}set radius(t){this.#Gr=t}#Zr=(lb(this,c),lb(this,u,16));get thumb(){return this.#Zr}set thumb(t){this.#Zr=t}#Yr=(lb(this,h),lb(this,d,0));get hue(){return this.#Yr}set hue(t){this.#Yr=t}#Qr=(lb(this,f),lb(this,p,1));get saturation(){return this.#Qr}set saturation(t){this.#Qr=t}#Jr=(lb(this,g),lb(this,m,1));get brightness(){return this.#Jr}set brightness(t){this.#Jr=t}#$r=(lb(this,v),lb(this,y,!1));get tip(){return this.#$r}set tip(t){this.#$r=t}#vs=(lb(this,x),new zb);#qr=!1;#Kr=!1;connectedCallback(){super.connectedCallback(),this.#vs.connect(this)}disconnectedCallback(){super.disconnectedCallback(),this.#vs.disconnect()}render(){let t,e;return this.tip&&(this.#qr&&(t=`${Math.trunc(this.hue)}°`),this.#Kr&&(e=`S: ${Math.trunc(100*this.saturation)}%\nB: ${Math.trunc(100*this.brightness)}%`)),Px`<div id="wrapper"
style=${Zb({"--wheel-radius":this.radius+"px","--thumb-size":this.thumb+"px","--clip-path":this.#Xr(this.radius,this.thumb),"--hue":this.hue+"deg","--saturation":this.saturation,"--brightness":this.brightness})}>
<div id="hue" class="layer" @pointerdown=${this.#to}></div>
<cc-color-handle id="hue-thumb" .active=${this.#qr} data-tip=${Ub(t)} @pointerdown=${this.#to}></cc-color-handle>
<div id="area" class="layer" @pointerdown=${this.#eo}><div id="area-slider"><cc-color-handle id="area-thumb" .active=${this.#Kr} data-tip=${Ub(e)}></cc-color-handle></div></div>
</div>
`}get#io(){return{h:this.hue,s:this.saturation,v:this.brightness}}#gs=null;#to=t=>{t.isPrimary&&0===t.button&&(this.#gs=this.shadowRoot.getElementById("hue").getBoundingClientRect(),this.#qr=!0,this.setPointerCapture(t.pointerId),C(this.#no,this.#so),b(),this.#vs.start(this.#io),"hue"===t.target.id&&this.#no(t),this.requestUpdate())};#no=t=>{const e=this.#gs,{width:i,height:n,left:s,top:r}=e,o=s+i/2,a=r+n/2,l=t.clientX-o,c=t.clientY-a,u=180*Math.atan2(c,l)/Math.PI,h=(360+Math.round(u))%360;this.hue!==h&&(this.hue=h,this.#vs.update(this.#io))};#so=t=>{t.isPrimary&&(0!==t.button&&t.preventDefault(),this.releasePointerCapture(t.pointerId),L(),this.#qr=!1,this.#gs=null,this.#vs.end(),this.requestUpdate())};#eo=t=>{t.isPrimary&&0===t.button&&(this.#gs=this.shadowRoot.getElementById("area").getBoundingClientRect(),this.#Kr=!0,this.setPointerCapture(t.pointerId),C(this.#ro,this.#oo),b(),this.#vs.start(this.#io),"area"===t.target.id&&this.#ro(t),this.requestUpdate())};#ro=t=>{const e=this.#gs;let i=n((t.clientX-e.left)/e.width),s=n(1-(t.clientY-e.top)/e.height);i=Math.round(100*i)/100,s=Math.round(100*s)/100,this.saturation===i&&this.brightness===s||(this.saturation=i,this.brightness=s,this.#vs.update(this.#io))};#oo=t=>{t.isPrimary&&(0!==t.button&&t.preventDefault(),this.releasePointerCapture(t.pointerId),L(),this.#Kr=!1,this.#gs=null,this.#vs.end(),this.requestUpdate())};#Xr(t,e){const i=t/2,n=i-e,s=t-2*e;return`path(evenodd, 'M ${i} ${i} m -${i} 0 a ${i} ${i} 0 1 0 ${t} 0 a ${i} ${i} 0 1 0 -${t} 0 M ${i} ${i} m -${n} 0 a ${n} ${n} 0 1 0 ${s} 0 a ${n} ${n} 0 1 0 -${s} 0')`}static{this.styles=Jy`
:host {
    contain: layout;
    pointer-events: var(--cc-pointer-events, auto);
}
:host, * {
    user-select: none;
}
#wrapper {
    --wheel-radius: 160px;
    --thumb-size: 16px;

    --hue: 0deg;
    --saturation: 1;
    --brightness: 1;

    width: var(--wheel-radius);
    height: var(--wheel-radius);
    aspect-ratio: 1;

    display: grid;
    place-items: center;
}

.layer {
    width: 100%;
    aspect-ratio: 1;

    box-sizing: border-box;
    grid-area: 1 / 1 / 1 / 1;
}

#hue {
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    clip-path: var(--clip-path);
    background: conic-gradient(
        from 90deg,
        rgb(255, 0, 0),
        rgb(255, 128, 0),
        rgb(255, 255, 0),
        rgb(128, 255, 0),
        rgb(0, 255, 0),
        rgb(0, 255, 128),
        rgb(0, 255, 255),
        rgb(0, 128, 255),
        rgb(0, 0, 255),
        rgb(128, 0, 255),
        rgb(255, 0, 255),
        rgb(255, 0, 128),
        rgb(255, 0, 0)
    );
}

#hue-thumb, #area-thumb {
    --color-handle-size: var(--thumb-size) !important;
}

#hue-thumb {
    --radius: calc((var(--wheel-radius) - var(--thumb-size)) / 2);
    --color-handle-tx: calc(cos(var(--hue)) * var(--radius));
    --color-handle-ty: calc(sin(var(--hue)) * var(--radius));
    --color-handle-bg: hsl(var(--hue), 100%, 50%);
    grid-area: 1 / 1 / 1 / 1;
}

#area-thumb {
    --lum: calc(var(--brightness) * (1 - var(--saturation) / 2));
    --sat: calc((var(--brightness) - var(--lum)) / min(var(--lum), 1 - var(--lum)));
    --color-handle-bg: hsl(var(--hue), calc(var(--sat) * 100%), calc(var(--lum) * 100%));
}

#area-slider {
    width: 100%;
    height: 100%;
    pointer-events: none;
    transform: translate(calc(100% * var(--saturation)), calc(100% * (1 - var(--brightness))));
}

#area {
    border-radius: 2px;
    width: calc(1.41421356237 * (50% - 3 / 2 * var(--thumb-size)) - 2px);

    --area-y: calc(var(--lightness) + var(--saturation) * min(var(--lightness), 1 - var(--lightness)));
    --area-x: calc(2 * (1 - var(--lightness) / var(--area-y)));

    background: linear-gradient(to top, black 0%, hsla(var(--hue), 100%, 0%, 0) 100%), linear-gradient(to right, white 0%, hsla(var(--hue), 100%, 0%, 0) 100%), hsl(var(--hue), 100%, 50%);
}
    `}}})(),Bw=(()=>{let t,e=qx,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!0})],ab(this,null,t,{kind:"accessor",name:"vertical",static:!1,private:!1,access:{has:t=>"vertical"in t,get:t=>t.vertical,set:(t,e)=>{t.vertical=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#er=lb(this,i,!1);get vertical(){return this.#er}set vertical(t){this.#er=t}render(){return Ax}static{this.styles=Jy`
:host {
    display: block;
    --divider-size: 24px;
    pointer-events: none;
    user-select: none;
    background: var(--gray-500);
    opacity: 45%;

    width: var(--divider-size);
    height: 1px;
    margin: auto 0;
}

:host([vertical]) {
    width: 1px;
    height: var(--divider-size);
    margin: 0 auto;
}
`}constructor(){super(...arguments),lb(this,n)}}})(),Uw=(()=>{let t,e=qx,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[db({type:String,reflect:!0})],ab(this,null,t,{kind:"accessor",name:"type",static:!1,private:!1,access:{has:t=>"type"in t,get:t=>t.type,set:(t,e)=>{t.type=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#yr=lb(this,i,"normal");get type(){return this.#yr}set type(t){this.#yr=t}render(){return Px`
            <div id="content"><slot></slot></div>
            <div id="close" @click=${this.#ao}><cc-css-icon name="Close"></cc-css-icon></div>`}#ao(){this.dispatchEvent(new Event("close"))}static{this.styles=Jy`
@container --theme-provider style(--theme: dark) {
    :host {
        --toast-face: var(--gray-900);
        --toast-border: var(--gray-700);
        --toast-shadow: 1px 4px 8px -2px rgb(0 0 0);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --toast-face: var(--gray-50);
        --toast-border: var(--gray-100);
        --toast-shadow: 1px 4px 8px -2px rgb(0 0 0 / 15%);
    }
}

:host {
    display: flex;
    align-items: center;
    gap: 4px;
    box-sizing: border-box;
    border-radius: 4px;
    user-select: none;
    border: 1px solid var(--toast-border);
    box-shadow: var(--toast-shadow);

    width: min-content;
    height: auto;
    overflow: clip;
    padding: 8px;
    min-width: 320px;
    min-height: 64px;
    max-width: 640px;
    max-height: 240px;
    font-size: 14px;

    color: var(--text-color-default);
    background: var(--toast-face);
}

:host(:not([type="normal"])) {
    color: #fff;
}

:host([type="info"]) {
    --toast-face: var(--info-color);
}

:host([type="success"]) {
    --toast-face: var(--success-color);
}

:host([type="warning"]) {
    --toast-face: var(--warning-color);
}

:host([type="error"]) {
    --toast-face: var(--error-color);
}

#content {
    flex: 1;
}

#close {
    box-sizing: border-box;
    padding: 3px;
    width: 24px;
    height: 24px;
    cursor: pointer;
    border-radius: 50%;
}
#close:hover {
    background: #5555;
}
`}constructor(){super(...arguments),lb(this,n)}}})(),$w=(()=>{let t,e,i=qx,n=[],s=[],r=[],o=[];return class extends i{static{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;t=[db({type:Object,attribute:!1})],e=[db({type:String,reflect:!1})],ab(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:a},n,s),ab(this,null,e,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:a},r,o),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}#ss=lb(this,n,[]);get items(){return this.#ss}set items(t){this.#ss=t}#is=(lb(this,s),lb(this,r,void 0));get value(){return this.#is}set value(t){this.#is=t}#lo=(lb(this,o),new WeakMap);render(){return this.current||Ax}get current(){const t=this.items.find((t=>t.value===this.value));return t?(this.#lo.has(t)||this.#lo.set(t,this.#co(t)),this.#lo.get(t)):null}#co(t){return"string"==typeof t.content?document.createElement(t.content):t.content(t)}static{this.styles=Jy`
        :host {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        :host > * {
            width: 100%;
            height: 100%;
        }
    `}}})();const Fw=["Top-Left","Top-Center","Top-Right","Middle-Left","Center","Middle-Right","Bottom-Left","Bottom-Center","Bottom-Right"],Vw=[{x:0,y:0},{x:.5,y:0},{x:1,y:0},{x:0,y:.5},{x:.5,y:.5},{x:1,y:.5},{x:0,y:1},{x:.5,y:1},{x:1,y:1}];let Hw=(()=>{let t,e,i,n,s=qx,r=[],o=[],a=[],l=[],c=[],u=[],h=[];return class extends s{static{const d="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!0})],e=[db({type:Boolean,reflect:!1})],i=[db({type:Array,attribute:!1})],n=[db({type:Object,reflect:!1,noAccessor:!0})],ab(this,null,t,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:d},o,a),ab(this,null,e,{kind:"accessor",name:"unselectable",static:!1,private:!1,access:{has:t=>"unselectable"in t,get:t=>t.unselectable,set:(t,e)=>{t.unselectable=e}},metadata:d},l,c),ab(this,null,i,{kind:"accessor",name:"valueMap",static:!1,private:!1,access:{has:t=>"valueMap"in t,get:t=>t.valueMap,set:(t,e)=>{t.valueMap=e}},metadata:d},u,h),ab(this,null,n,{kind:"setter",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,set:(t,e)=>{t.value=e}},metadata:d},null,r),d&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d})}#Pn=(lb(this,r),lb(this,o,!1));get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}#Xs=(lb(this,a),lb(this,l,!1));get unselectable(){return this.#Xs}set unselectable(t){this.#Xs=t}#uo=(lb(this,c),lb(this,u,Vw));get valueMap(){return this.#uo}set valueMap(t){this.#uo=t}#tr=(lb(this,h),null);get value(){return this.#tr}set value(t){if(this.#tr!==t){if(null==t)this.#tr=this.#ho=null;else{const e=this.valueMap.findIndex((e=>e.x===t.x&&e.y===t.y));if(-1===e)this.#tr=this.#ho=null;else{if(this.#ho===e)return;this.#ho=e,this.#tr=this.valueMap[e]}}this.requestUpdate()}}#ho=null;render(){return Px`<div id="wrapper">${Mw(Fw,this.#do)}</div>`}#do=(t,e)=>Px`<div class="pin" data-index=${e} title=${t} @click=${this.#cs} selected=${Xx(this.#ho===e)}></div>`;#cs(t){let e,i=parseInt(t.target.dataset.index);if(i===this.#ho){if(!this.unselectable)return;e=null,i=null}else e=this.valueMap[i];this.dispatchEvent(new eb(e))&&(this.#ho=i,this.#tr=e,this.requestUpdate())}static{this.styles=Jy`
@container --theme-provider style(--theme: dark) {
    :host {
        --pin-point-face-hover: var(--text-color-darker);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --pin-point-face-hover: var(--text-color-lighter);
    }
}

:host {
    --pin-point-size: 18px;
    --pin-point-radius: 3px;
    --pin-point-border-radius: 1px;
    --pin-point-line-size: 0px;
    --pin-point-face: var(--text-color-default);

    --container-size: calc(var(--pin-point-size) + 2 * var(--pin-point-radius));

    display: block;
    box-sizing: border-box;
    width: var(--container-size);
    height: var(--container-size);
    user-select: none;
    contain: strict;
}

:host([bordered]) {
    --pin-point-line-size: 2px;
}

:host([round]) {
    --pin-point-border-radius: 50%;
}

:host([size="m"]) {
    --pin-point-size: 32px;
    --pin-point-radius: 5px;
}

:host([disabled]) {
    pointer-events: none;
    opacity: 45%;
}

#wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: calc(var(--pin-point-size) - var(--pin-point-line-size));
    height: calc(var(--pin-point-size) - var(--pin-point-line-size));

    border: var(--pin-point-line-size) solid var(--pin-point-face);
    pointer-events: none;
}

.pin {
    position: absolute;
    border-radius: var(--pin-point-border-radius);
    width: calc(2 * var(--pin-point-radius));
    height: calc(2 * var(--pin-point-radius));
    background: var(--pin-point-face);
    cursor: pointer;
    pointer-events: var(--cc-pointer-events, auto);
}

:host([disabled]) .pin {
    pointer-events: none;
}

.pin:hover {
    background: var(--pin-point-face-hover);
}

:host(:not([disabled])) .pin[selected] {
    background: var(--accent-color-500);
}

:host(:not([disabled])) .pin[selected]:hover {
    background: var(--accent-color-400);
}

.pin[data-index="0"] {top: 0; left: 0; transform: translate(-50%, -50%)}
.pin[data-index="1"] {top: 0; left: 50%; transform: translate(-50%, -50%)}
.pin[data-index="2"] {top: 0; right: 0; transform: translate(50%, -50%)}
.pin[data-index="3"] {top: 50%; left: 0; transform: translate(-50%, -50%)}
.pin[data-index="4"] {top: 50%; left: 50%; transform: translate(-50%, -50%)}
.pin[data-index="5"] {top: 50%; right: 0; transform: translate(50%, -50%)}
.pin[data-index="6"] {bottom: 0; left: 0; transform: translate(-50%, 50%)}
.pin[data-index="7"] {bottom: 0; left: 50%; transform: translate(-50%, 50%)}
.pin[data-index="8"] {bottom: 0; right: 0; transform: translate(50%, 50%)}

`}}})();const Gw=-12,Zw=new Map([["bottom",[.5,1,0,1,0,Gw]],["top",[.5,0,0,-1,0,Gw]],["right",[1,.5,1,0,Gw,0]],["left",[0,.5,-1,0,Gw,0]]]);let Yw=(()=>{let t,e,i=vb,n=[],s=[],r=[],o=[];return class extends i{constructor(){super(...arguments),this.longPressDelay=400,this.#uo=lb(this,n,Vw),this.#fo=(lb(this,s),lb(this,r,"bottom")),this.#us=(lb(this,o),t=>{t.preventDefault(),Ob({...t.detail})}),this.#cs=t=>{this.#Yn.isOpen||t.composedPath().includes(this.#Yn)||this.#po(this.valueMap[4])},this.#ar=null,this.#bn=t=>{0===t.button&&(clearTimeout(this.#ar),this.#ar=null)},this.#rr=()=>{clearTimeout(this.#ar),this.#ar=setTimeout(this.#go,this.longPressDelay)},this.#go=async()=>{this.#po(await this.#Yn.open(this,...Zw.get(this.placement)))}}static{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;t=[db({type:Array,attribute:!1})],e=[db({type:String,reflect:!1})],ab(this,null,t,{kind:"accessor",name:"valueMap",static:!1,private:!1,access:{has:t=>"valueMap"in t,get:t=>t.valueMap,set:(t,e)=>{t.valueMap=e}},metadata:a},n,s),ab(this,null,e,{kind:"accessor",name:"placement",static:!1,private:!1,access:{has:t=>"placement"in t,get:t=>t.placement,set:(t,e)=>{t.placement=e}},metadata:a},r,o),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}#Yn;#uo;get valueMap(){return this.#uo}set valueMap(t){this.#uo=t}#fo;get placement(){return this.#fo}set placement(t){this.#fo=t}firstUpdated(){this.#Yn=this.shadowRoot.getElementById("popover")}render(){return[super.render(),Px`<cc-popover id="popover"><cc-pin-point bordered .valueMap=${this.valueMap} @change=${this.#us} size="m"></cc-pin-point></cc-popover>`]}#us;#cs;#ar;#bn;#rr;#go;#po(t){t&&this.dispatchEvent(new eb(t))}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.#cs),this.addEventListener("pointerdown",this.#rr),this.addEventListener("pointerup",this.#bn),this.addEventListener("pointercancel",this.#bn)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.#cs),this.removeEventListener("pointerdown",this.#rr),this.removeEventListener("pointerup",this.#bn),this.removeEventListener("pointercancel",this.#bn)}static{this.styles=[...super.styles,Jy`
#popover::part(popover) {
    padding: 8px;
}
`]}}})();class Qw extends qx{render(){return Px`<slot></slot>`}static{this.styles=Jy`
:host {
    --flex-gap: 8px;
    display: flex;
    flex-direction: column;
    gap: var(--flex-gap);
}
::slotted([flex]) {
    flex: 1;
}
    `}}class Jw extends qx{render(){return Px`<slot></slot>`}static{this.styles=Jy`
:host {
    display: flex;
    flex-direction: row;
    gap: var(--flex-gap);
    align-items: center;
}
:host([spaced]) {
    justify-content: space-between;
}

::slotted([flex]) {flex: 1}
::slotted([fluid]) {width: calc((100% - 3 * var(--flex-gap) - 2 * 32px) / 2)}
::slotted([fluid-2]) {width: calc((100% - var(--flex-gap)) / 2)}
::slotted([fluid-3]) {width: calc((100% - 2 * var(--flex-gap)) / 3)}
::slotted([fluid-4]) {width: calc((100% - 3 * var(--flex-gap)) / 4)}
::slotted([fixed-18]) {width: 18px}
::slotted([fixed-24]) {width: 24px}
::slotted([fixed-32]) {width: 32px}
::slotted([fixed-42]) {width: 42px}
::slotted([left-gap]) {margin-left: var(--flex-gap)}
::slotted([right-gap]) {margin-right: var(--flex-gap)}
    `}}let qw=(()=>{let t,e,i,n,s,r=qx,o=[];return class extends r{static{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(r[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!0,noAccessor:!0})],e=[db({type:Boolean,reflect:!0,noAccessor:!0})],i=[db({type:Number,reflect:!1,noAccessor:!0})],n=[db({type:Boolean,reflect:!1,noAccessor:!0})],s=[db({type:Boolean,reflect:!1,noAccessor:!0})],ab(this,null,t,{kind:"setter",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,set:(t,e)=>{t.disabled=e}},metadata:a},null,o),ab(this,null,e,{kind:"setter",name:"indeterminate",static:!1,private:!1,access:{has:t=>"indeterminate"in t,set:(t,e)=>{t.indeterminate=e}},metadata:a},null,o),ab(this,null,i,{kind:"setter",name:"pivot",static:!1,private:!1,access:{has:t=>"pivot"in t,set:(t,e)=>{t.pivot=e}},metadata:a},null,o),ab(this,null,n,{kind:"setter",name:"filled",static:!1,private:!1,access:{has:t=>"filled"in t,set:(t,e)=>{t.filled=e}},metadata:a},null,o),ab(this,null,s,{kind:"setter",name:"ramp",static:!1,private:!1,access:{has:t=>"ramp"in t,set:(t,e)=>{t.ramp=e}},metadata:a},null,o),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}#Lr=(lb(this,o),!1);get disabled(){return this.#Lr}set disabled(t){this.#Lr!==t&&(this.#Vr.disabled=this.#vr.disabled=this.#Lr=t)}#Nr=!1;get indeterminate(){return this.#Nr}set indeterminate(t){this.#Nr!==t&&(this.#Vr.indeterminate=this.#vr.indeterminate=this.#Nr=t)}#tr;get value(){return this.#tr}set value(t){this.#tr!==t&&(this.#Vr.value=this.#vr.value=this.#tr=t)}get formatter(){return this.#vr.formatter}set formatter(t){this.#vr.formatter=t}get constraint(){return this.#Vr.constraint}set constraint(t){this.#Vr.constraint=t}get pivot(){return this.#Vr.pivot}set pivot(t){this.#Vr.pivot=t}get filled(){return this.#Vr.hasAttribute("filled")}set filled(t){this.#mo(this.#Vr,"filled",t)}get ramp(){return this.#Vr.hasAttribute("filled")}set ramp(t){this.#mo(this.#Vr,"ramp",t)}#vs=new zb;#vr;#Vr;#Gs;constructor(){super(),this.#vs.inherited=!0;const t=document.createElement("cc-number-input");t.id="input",t.part.add("input"),t.setAttribute("quiet",""),t.setAttribute("text-right",""),t.stream=this.#vs,t.pointerStep=0,this.#vr=t;const e=document.createElement("cc-slider");e.id="slider",e.part.add("slider"),e.stream=this.#vs,this.#Vr=e;const i=document.createElement("slot");i.id="label",i.part.add("label"),this.#Gs=[i,e,t]}connectedCallback(){super.connectedCallback(),this.addEventListener("update",this.#vo),this.#vs.connect(this)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("update",this.#vo),this.#vs.disconnect()}#mo(t,e,i){i?t.setAttribute(e,""):t.removeAttribute(e)}#vo=t=>{this.#Vr.value=this.#vr.value=this.#tr=t.detail};render(){return this.#Gs}static{this.styles=Jy`
:host {
    display: grid;
    column-gap: 8px;
    row-gap: 0px;
    grid-template-areas: "label label label input" "slider slider slider slider";
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: min-content;
    align-items: center;
    user-select: none;
    contain: content;
}

:host([inline]) {
    grid-template-areas: "label slider slider input";
    grid-template-columns: min-content 1fr 1fr 32px;
}

:host([inline][hide-label]) {
    grid-template-areas: "slider slider slider input";
    grid-template-columns: 1fr 1fr 1fr 32px;
}

:host([inline][hide-label]) #label {
    display: none;
}

:host([disabled]) {
    pointer-events: none;
}

:host([disabled]) #label {
    opacity: 45%;
}
::slotted(*) {grid-area: label}
#label {grid-area: label; font-size: 12px}
#slider {grid-area: slider}
#input {grid-area: input}
    `}}})(),Kw=(()=>{let t,e,i,n,s=qx,r=[],o=[],a=[],l=[],c=[],u=[],h=[],d=[];return class extends s{static{const f="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[db({type:Array,attribute:!1})],e=[db({reflect:!1})],i=[db({type:String,reflect:!0})],n=[db({type:String,reflect:!0})],ab(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:f},r,o),ab(this,null,e,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:f},a,l),ab(this,null,i,{kind:"accessor",name:"variant",static:!1,private:!1,access:{has:t=>"variant"in t,get:t=>t.variant,set:(t,e)=>{t.variant=e}},metadata:f},c,u),ab(this,null,n,{kind:"accessor",name:"justify",static:!1,private:!1,access:{has:t=>"justify"in t,get:t=>t.justify,set:(t,e)=>{t.justify=e}},metadata:f},h,d),f&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f})}#ss=lb(this,r,[]);get items(){return this.#ss}set items(t){this.#ss=t}#is=(lb(this,o),lb(this,a,void 0));get value(){return this.#is}set value(t){this.#is=t}#Tn=(lb(this,l),lb(this,c,"bottom"));get variant(){return this.#Tn}set variant(t){this.#Tn=t}#yo=(lb(this,u),lb(this,h,"start"));get justify(){return this.#yo}set justify(t){this.#yo=t}render(){return this.items.map(this.#xo)}#xo=(lb(this,d),(t,e)=>{const i=t.value===this.value;return Px`<div part="tab" class="tab" active=${Xx(i)} data-index=${e}>${t.title}</div>`});connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.#cs)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.#cs)}#cs=t=>{const e=t.composedPath()[0];if(!(e instanceof HTMLElement&&e.className.includes("tab")))return;const i=+e.dataset.index,n=this.items[i];n&&n.value!==this.value&&this.dispatchEvent(new eb(n.value,n))&&(this.value=n.value)};static{this.styles=Jy`
@container --theme-provider style(--theme: dark) {
    :host {
        --tabs-text-active-color: var(--text-color-lighter);
        --tabs-border-color: var(--gray-700);
        --tabs-border-active-color: var(--gray-300);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --tabs-text-active-color: var(--text-color-darker);
        --tabs-border-color: var(--gray-200);
        --tabs-border-active-color: var(--gray-800);
    }
}

:host {
    display: flex;
    box-sizing: border-box;
    font-size: 14px;
    justify-contentL flex-start;
    --tabs-width: max-content;
    --tabs-height: 32px;
    --tabs-border-size: 2px;
    color: var(--text-color-default);
}

:host([justify="center"]) {
    justify-content: center;
}
:host([justify="end"]) {
    justify-content: flex-end;
}
:host([justify="fill"]) .tab {
    flex: 1;
}

:host([variant="top"]),
:host([variant="bottom"]) {
    flex-direction: row;
    padding: 0 8px;
}

:host([variant="left"]),
:host([variant="right"]) {
    flex-direction: column;
    padding: 8px 0;
}

:host([variant="left"]) {
    align-items: flex-start;
    border-left: var(--tabs-border-size) solid var(--tabs-border-color);
}
:host([variant="right"]) {
    align-items: flex-end;
    border-right: var(--tabs-border-size) solid var(--tabs-border-color);
}
:host([variant="top"]) {
    border-top: var(--tabs-border-size) solid var(--tabs-border-color);
}
:host([variant="bottom"]) {
    border-bottom: var(--tabs-border-size) solid var(--tabs-border-color);
}

.tab {
    display: flex;
    justify-content: center;
    box-sizing: border-box;
    user-select: none;
    cursor: pointer;
    padding: 8px;
}

.tab:hover {
    color: var(--tabs-text-active-color);
}

.tab[active] {
    color: var(--tabs-text-active-color);
    border-color: var(--tabs-border-active-color) !important;
}
:host([bold]) .tab[active] {
    font-weight: bolder;
}

:host([variant="top"]) .tab,
:host([variant="bottom"]) .tab {
    flex-direction: row;
    width: var(--tabs-width);
}

:host([variant="left"]) .tab,
:host([variant="right"]) .tab {
    flex-direction: column;
    height: var(--tabs-height);
}

:host([variant="top"]) .tab {
    border-top: var(--tabs-border-size) solid var(--tabs-border-color);
    transform: translateY(calc(-1 * var(--tabs-border-size)));
}

:host([variant="bottom"]) .tab {
    border-bottom: var(--tabs-border-size) solid var(--tabs-border-color);
    transform: translateY(var(--tabs-border-size));
}

:host([variant="left"]) .tab {
    border-left: var(--tabs-border-size) solid var(--tabs-border-color);
    transform: translateX(calc(-1 * var(--tabs-border-size)));
}

:host([variant="right"]) .tab {
    border-right: var(--tabs-border-size) solid var(--tabs-border-color);
    transform: translateX(var(--tabs-border-size));
}

`}}})(),Xw=(()=>{let t,e,i,n=qx,s=[],r=[],o=[],a=[],l=[],c=[];return class extends n{static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[db({attribute:!1})],e=[db({reflect:!1})],i=[db({type:Boolean,reflect:!0})],ab(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:u},s,r),ab(this,null,e,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:u},o,a),ab(this,null,i,{kind:"accessor",name:"vertical",static:!1,private:!1,access:{has:t=>"vertical"in t,get:t=>t.vertical,set:(t,e)=>{t.vertical=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#ss=lb(this,s,[]);get items(){return this.#ss}set items(t){this.#ss=t}#is=(lb(this,r),lb(this,o,void 0));get value(){return this.#is}set value(t){this.#is=t}#er=(lb(this,a),lb(this,l,!1));get vertical(){return this.#er}set vertical(t){this.#er=t}render(){return this.items.map(this.#ls)}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.#cs)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.#cs)}#ls=(lb(this,c),(t,e)=>Px`
        <div part="item" class="item" data-index=${e} badge=${Ub(t.badge)} data-selected=${Xx(t.value===this.value)}>
            <div part="icon" class="icon"><cc-icon .name=${t.icon}></cc-icon></div>
            <div class="content">
                <div part="title" class="title">${t.title}</div>
                <div part="description" class="description">${t.description||""}</div>
            </div>
        </div>
        `);#cs=t=>{const e=t.composedPath()[0],i=this.items[+e?.dataset?.index];i&&i.value!==this.value&&this.dispatchEvent(new eb(i.value,i))&&(this.value=i.value)};static{this.styles=[kb,Jy`
:host {
    display: flex;
    flex-direction: row;
    gap: 8px;
    box-sizing: border-box;
    user-select: none;
    --item-padding: 16px;
}
:host([vertical]) {
    flex-direction: column;
}

.item {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 8px;
    border-radius: 4px;
    padding: var(--item-padding);
    cursor: pointer;
    contain: content;
}
.item:hover, .item[data-selected] {
    background: var(--surface-hover-color);
}

.item > * {
    pointer-events: none;
}

.icon {
    width: 32px;
    height: 32px;
    border-radius: 4px;
    padding: 7px;
    box-sizing: border-box;
    background: var(--accent-color-500);
    color: var(--white);
}


.content {
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    gap: 0;
    font-size: 12px;
}

.title {
    font-weight: bold;
}
.description {
    font-size: 10px;
    opacity: 75%;
}

`]}}})(),tM=(()=>{let t,e,i,n,s=qx,r=[],o=[],a=[],l=[],c=[],u=[],h=[],d=[];return class extends s{static{const f="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!1})],e=[db({type:Boolean,reflect:!0})],i=[db({type:Boolean,reflect:!0})],n=[db({attribute:!1})],ab(this,null,t,{kind:"accessor",name:"directory",static:!1,private:!1,access:{has:t=>"directory"in t,get:t=>t.directory,set:(t,e)=>{t.directory=e}},metadata:f},r,o),ab(this,null,e,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:f},a,l),ab(this,null,i,{kind:"accessor",name:"invalid",static:!1,private:!1,access:{has:t=>"invalid"in t,get:t=>t.invalid,set:(t,e)=>{t.invalid=e}},metadata:f},c,u),ab(this,null,n,{kind:"accessor",name:"options",static:!1,private:!1,access:{has:t=>"options"in t,get:t=>t.options,set:(t,e)=>{t.options=e}},metadata:f},h,d),f&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f})}#tr=null;get value(){return this.#tr}set value(t){t?this.directory&&"file"===t.kind||this.#tr&&t.isSameEntry(this.#tr)||(this.#tr=t,this.requestUpdate()):this.#tr&&(this.#tr=null,this.requestUpdate())}#bo=lb(this,r,!1);get directory(){return this.#bo}set directory(t){this.#bo=t}#Pn=(lb(this,o),lb(this,a,!1));get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}#wo=(lb(this,l),lb(this,c,!1));get invalid(){return this.#wo}set invalid(t){this.#wo=t}#Mo=(lb(this,u),lb(this,h,void 0));get options(){return this.#Mo}set options(t){this.#Mo=t}render(){return Px`<cc-action-button id="input" .disabled=${this.disabled} @click=${this.#So} input-face>
            <div id="file" class="text-ellipsis">${this.#tr?.name||""}</div>
            <cc-css-icon name="Folder"></cc-css-icon>
        </cc-action-button>`}async#So(){try{const t=await(this.directory?window.showDirectoryPicker(this.options):window.showSaveFilePicker(this.options));if(!t)return;if(this.#tr&&t.isSameEntry(this.#tr))return;this.dispatchEvent(new eb(t))&&(this.#tr=t,this.requestUpdate())}catch{}}static{this.styles=[Cb,Jy`
:host {
    width: 100%;
}
#input {
    width: 100%;
    justify-content: space-between;
}
#file {
    flex: 1;
}
:host([invalid]) #input {
    color: var(--error-color);
    border: 1px solid var(--error-color);
}
`]}constructor(){super(...arguments),lb(this,d)}}})();class eM extends Xb{#ko;constructor(){super(),this.#ko=document.createElement("cc-progressbar"),this.#ko.id="progress"}render(){return this.#ko}async init(t){const e=this.dialog;e.cancelable=!1,e.animated=!!t.animated;const i=this.#ko;i.indeterminate=!0,i.value=0,i.label=t?.message||"",t.done.then(this.#ao)}#ao=t=>{this.dialog.close(t)};static{this.styles=Jy`
:host {
    display: flex;
    width: 320px;
    height: 96px;
    align-items: center;
    padding: 16px;
    pointer-events: none;
    user-select: none;
    box-sizing: border-box;
}
`}}let iM=(()=>{let t,e,i=Xb,n=[],s=[];return class extends i{static{const r="function"==typeof Symbol&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;t=[fb()],ab(this,e={get:cb((function(){return this.#_o}),"#data","get"),set:cb((function(t){this.#_o=t}),"#data","set")},t,{kind:"accessor",name:"#data",static:!1,private:!0,access:{has:t=>#Yt in t,get:t=>t.#Yt,set:(t,e)=>{t.#Yt=e}},metadata:r},n,s),r&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})}#_o=lb(this,n,{});get#Yt(){return e.get.call(this)}set#Yt(t){return e.set.call(this,t)}render(){const t=this.#Yt;return Px`
        <div id="message">${t.message||""}</div>
        <div id="buttons">
            <cc-button variant="secondary" outline @click=${this.#Jn} hidden=${Xx(!1===t.cancel)}>${t.cancel||"Cancel"}</cc-button>
            <cc-button variant="primary" outline @click=${this.#Io}>${t.no||"No"}</cc-button>
            <cc-button variant="accent" @click=${this.#Co}>${t.yes||"Yes"}</cc-button>
        </div>
        `}#Co(){this.dialog.close(!0)}#Io(){this.dialog.close(!1)}#Jn(){this.dialog.close(void 0)}async init(t){this.dialog.cancelable=!1!==t.cancel,this.#Yt=t,await this.updateComplete}static{this.styles=Jy`
:host {
    display: flex;
    flex-direction: column;
    width: 440px;
    height: 160px;
    padding: 16px;
    user-select: none;
}

#message {
    flex: 1;
    font-size: 14px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

#buttons {
    display: flex;
    gap: 8px;
    justify-content: center;
}

cc-button {
    flex: 1;
}

`}constructor(){super(...arguments),lb(this,s)}}})();const nM={min:0,max:1,step:.01,scale:100,unit:"%",digits:0},sM={step:.001,stepScale:10,scale:100,digits:1,unit:"%"},rM={...sM,min:0},oM={...sM,min:0,max:1},aM={min:0,step:.1,stepScale:10,digits:1,unit:""},lM={min:0,step:1,digits:0,unit:""},cM={step:.1,stepScale:10,digits:1,unit:"°"},uM={...cM,min:0,max:360},hM={step:.01,stepScale:100,digits:2,unit:""},dM={...hM,min:0},fM=Symbol(),pM=Symbol(),gM=new Map,mM=new Map;function vM(t,e){t.startsWith(".")||(t="."+t),gM.set(t,e)}function yM(t){if(t.type)return t.type;const e="."+t.name.trim().toLowerCase().split(".").pop();return gM.has(e)?gM.get(e):""}function xM(t,...e){for(const i of e)mM.set(i,t)}let bM;async function wM(t,e,i){if(t instanceof FileSystemFileHandle){if("file"!==t.kind)return null;t=await t.getFile()}return e??=yM(t),MM(await t.arrayBuffer(),e,i)}async function MM(t,e,i){if(!mM.has(e))return!1;const n=Ao();try{return!1!==await mM.get(e)(n,t,e)&&await async function(t,e){const i=await bM(t,e);return!!i&&(Zr(pM,i),!0)}(n,i)}catch{return!1}finally{Do(n)}}async function SM(t){return t instanceof File?$o(await t.arrayBuffer()):t instanceof FileSystemFileHandle?$o(await(await t.getFile()).arrayBuffer()):t instanceof Blob?$o(await t.arrayBuffer()):$o(t)}const kM=new Map([["normal",0],["fill",0],["fill stroke",0],["fill stroke markers",0],["fill markers",0],["fill markers stroke",0],["stroke",2],["stroke fill",2],["stroke fill markers",2],["stroke markers",2],["stroke markers fill",2],["markers",0],["markers fill",0],["markers fill stroke",0],["markers stroke",2],["markers stroke fill",2]]),_M=new Map([[0,"fill"],[2,"stroke"]]),IM=new Map([["butt",0],["square",2],["round",1]]),CM=VM(IM),LM=new Map([["miter",0],["bevel",2],["round",1]]),NM=VM(LM),jM=new Map([["normal",11],["multiply",10],["screen",14],["overlay",12],["darken",3],["lighten",8],["color-dodge",2],["color-burn",1],["hard-light",6],["soft-light",15],["difference",4],["exclusion",5],["hue",7],["saturation",13],["color",0],["luminosity",9]]),zM=VM(jM),PM=new Map([["pad",0],["repeat",1],["reflect",2]]),TM=VM(PM),AM=new Map([["evenodd",1],["nonzero",0]]),DM=VM(AM);function EM(t){return _M.get(t)??"fill"}function OM(t){return CM.get(t)??"butt"}function WM(t){return NM.get(t)??"miter"}function RM(t){return zM.get(t)??"normal"}function BM(t){return jM.get(t)??11}function UM(t){return TM.get(t)??"pad"}function $M(t){return DM.get(t)??"evenodd"}function FM(t){return AM.get(t)??1}function VM(t){const e=new Map;for(const[i,n]of t)e.set(n,i);return e}class HM{#Ft=[];constructor(t,e){this.push(t,e)}get#tr(){return this.#Ft.at(-1)}get#me(){return this.#Ft.at(-2)}get viewBox(){return this.#tr[0]}get matrix(){return this.#tr[1]}get parentMatrix(){return this.#me[1]}push(t,e){this.#Ft.push([t,e||new hi])}concat(t,e){const i=this.#tr;this.#Ft.push([e||i[0],i[1].clone().multiply(t)])}pop(){this.#Ft.length>1&&this.#Ft.pop()}}const GM="http://www.w3.org/2000/svg";function ZM(t){return document.createElementNS(GM,t)}const YM={x1:{axis:"x",fallback:0},y1:{axis:"y",fallback:0},x2:{axis:"x",fallback:1},y2:{axis:"y",fallback:0}},QM={cx:{axis:"x",fallback:.5},cy:{axis:"y",fallback:.5},r:{axis:null,fallback:.5},fx:{axis:"x",fallback:t=>t.cx},fy:{axis:"y",fallback:t=>t.cy},fr:{axis:null,fallback:0}};class JM{constructor(){this.#Lo=new Map,this.subUnitAsPercent=!1,this.#No=["id","title","data-title","data-name"]}#Lo;dispose(){this.#Lo?.clear(),this.#Lo=null}getStyle(t){return this.#Lo.has(t)||this.#Lo.set(t,t.computedStyleMap()),this.#Lo.get(t)}getUnit(t,e){return this.getStyle(t).get(e)}isPercentLikeUnit(t){return this.subUnitAsPercent&&"px"===t.unit&&t.value>=0&&t.value<=1}getNumber(t,e){return this.getUnit(t,e).value}getKeyword(t,e){return this.getStyle(t).get(e).value}getString(t,e){return this.getStyle(t).get(e).toString()}getNumberOrPercentFromViewBox(t,e,i,n=null,s=1){const r=this.getUnit(t,e);return"auto"===r.value.toString()?s*this.getAxisValue(i,n):"percent"===r.unit?r.value/100*this.getAxisValue(i,n):this.isPercentLikeUnit(r)?r.value*this.getAxisValue(i,n):r.value}getOpacity(t){return this.getNumber(t,"opacity")}getBlendMode(t){return BM(this.getKeyword(t,"mix-blend-mode"))}getIsolate(t){return"isolate"===this.getKeyword(t,"isolation")}getAxisValue(t,e){return"x"===e?t.width:"y"===e?t.height:Math.sqrt((t.width**2+t.height**2)/2)}getAxisSize(t,e,i,n,s=0){const r=this.getUnit(t,e);return r instanceof CSSUnitValue?"percent"===r.unit?r.value/100*this.getAxisValue(i,n):this.isPercentLikeUnit(r)?r.value*this.getAxisValue(i,n):r.value:s}getPercentAxisValue(t,e,i){return"x"===i?e.x+t*e.width:"y"===i?e.y+t*e.height:t*Math.sqrt((e.width**2+e.height**2)/2)}getSVGLength(t,e,i){t instanceof SVGAnimatedLength&&(t=t.baseVal);const n=t.valueInSpecifiedUnits;return t.unitType===SVGLength.SVG_LENGTHTYPE_PERCENTAGE?this.getPercentAxisValue(n/100,e,i):t.value}resolveElementId(t,e){let i=t;do{i=i.ownerSVGElement;const t=i.getElementById(e);if(t)return t}while(i.ownerSVGElement);return null}resolveHref(t){let e=this.getSVGHref(t);return e&&e.startsWith("#")?this.resolveElementId(t,e.substring(1)):null}getSVGHref(t){return t instanceof SVGElement&&(t=t.href),t instanceof SVGAnimatedString?t.baseVal:t}getSVGRefId(t){if(!t||"none"===t)return null;const e=/^url\(["']?#([^)"']+)["']?\)/i.exec(t);return e&&e[1]?e[1]:null}#No;getTitle(t){let e=null;for(const i of this.#No)if(e=t.getAttribute(i),"string"==typeof e&&(e=e.trim(),e.length>0))return e;return null}getTransform(t){const e=this.getStyle(t).get("transform");if(!e||"none"===e.toString()||!e.is2D)return new hi;const i=e.toMatrix();return i.isIdentity?new hi:hi.Create(i)}getSVGMatrix(t,e){let i=t[e];if(!i)return null;if(i instanceof SVGAnimatedTransformList&&(i=i.baseVal),!(i instanceof SVGTransformList))return null;const n=i?.consolidate()?.matrix;return n?hi.Create(n):null}getHidden(t){return"none"===this.getString(t,"display")||"visible"!==this.getString(t,"visibility")}getPathLength(t){if(!t.hasAttribute("pathLength"))return 0;const e=t.getAttribute("pathLength");return e&&"none"!==e?l(e,0):0}getVectorEffect(t){return this.getString(t,"vector-effect")}getFill(t){return this.getString(t,"fill")}getFillOpacity(t){return this.getNumber(t,"fill-opacity")}getFillRule(t){return FM(this.getKeyword(t,"fill-rule"))}getPaintOrder(t){return e=this.getString(t,"paint-order"),kM.get(e)??0;var e}getClipRule(t){return FM(this.getKeyword(t,"clip-rule"))}getStroke(t){return this.getString(t,"stroke")}getStrokeOpacity(t){return this.getNumber(t,"stroke-opacity")}getStrokeWidth(t,e){return this.getNumberOrPercentFromViewBox(t,"stroke-width",e)}getStrokeJoin(t){return e=this.getKeyword(t,"stroke-linejoin"),LM.get(e)??0;var e}getStrokeCap(t){return e=this.getKeyword(t,"stroke-linecap"),IM.get(e)??0;var e}getStrokeMiterLimit(t){return this.getNumber(t,"stroke-miterlimit")}getStrokeDashOffset(t,e){return this.getNumberOrPercentFromViewBox(t,"stroke-dashoffset",e)}getStrokeDashArray(t,e){const i=this.getString(t,"stroke-dasharray");if("none"===i)return[];const n=this.getAxisValue(e,null),s=[];for(let t of i.split(/,\s*/g)){t=t.trim();let e=l(t,0);t.endsWith("%")&&(e*=n/100),s.push(e)}return s}getViewBox(t,e){if(!t.hasAttribute("viewBox"))return e??=new Ve(0,0,100,100),new Ve(this.getAxisSize(t,"x",e,"x",0),this.getAxisSize(t,"y",e,"y",0),this.getAxisSize(t,"width",e,"x",e.width),this.getAxisSize(t,"height",e,"y",e.height));const i=t.viewBox.baseVal;return new Ve(i.x,i.y,i.width,i.height)}getViewBoxAlign(t){switch(t.preserveAspectRatio.baseVal.align){case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN:return{x:1,y:1};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMID:return{x:1,y:2};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMAX:return{x:1,y:3};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMIN:return{x:2,y:1};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMID:return{x:2,y:2};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMAX:return{x:2,y:3};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMIN:return{x:3,y:1};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMID:return{x:3,y:2};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMAX:return{x:3,y:3}}return null}getViewBoxSlice(t){return t.preserveAspectRatio.baseVal.meetOrSlice===SVGPreserveAspectRatio.SVG_MEETORSLICE_SLICE}getSpreadMethod(t){return e=t.getAttribute("spreadMethod"),PM.get(e)??0;var e}getStopColor(t){return this.getString(t,"stop-color")}getStopOpacity(t){return this.getNumber(t,"stop-opacity")}getStopOffset(t){return t.offset.baseVal}resolveGradientInheritance(t){let e=[];for(;t instanceof SVGGradientElement&&!e.includes(t);)e.push(t),t=this.resolveHref(t);return e}resolveGradientProperties(t,e,i,n,s){const r=this.resolveGradientInheritance(t);let o=!1;for(const t of r)if(t.hasAttribute("gradientUnits")){o=t.gradientUnits.baseVal!==SVGUnitTypes.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX;break}let a,l=0;for(const t of r)if(t.hasAttribute("spreadMethod")){l=this.getSpreadMethod(t);break}for(const t of r)if(t.hasAttribute("gradientTransform")){a=this.getSVGMatrix(t,"gradientTransform");break}a??=new hi;const c=[];for(const t of r){const e=t.querySelectorAll("stop");if(0!==e.length){for(const t of e){let e=se.parse(this.getStopColor(t));if(e.a>0){const i=this.getStopOpacity(t);1!==i&&(e=e.withAddedOpacity(i))}c.push({offset:this.getStopOffset(t),color:e})}break}}const u=o?i:n;s&&!o&&a.preMultiply((new hi).translate(n.middleX,n.middleY).scale(1,n.height/n.width).translate(-n.middleX,-n.middleY));const h={},d=r[0].localName;for(const[t,i]of Object.entries(e)){let e=null;for(const i of r)if(i.localName===d&&i.hasAttribute(t)){if(i[t]instanceof SVGAnimatedLength){e=i[t].baseVal;break}if(i[t]instanceof SVGLength){e=i[t];break}}h[t]=e?this.getSVGLength(e,u,i.axis):"function"==typeof i.fallback?i.fallback(h):this.getPercentAxisValue(i.fallback,u,i.axis)}return{inheritance:r,properties:h,fixed:o,matrix:a,stops:c,spread:l}}resolveLinearGradient(t,e,i){return this.resolveGradientProperties(t,YM,e,i,!1)}resolveRadialGradient(t,e,i){return this.resolveGradientProperties(t,QM,e,i,!0)}}let qM=class{#fe;#jo;#zo;#Po;#To;constructor(){this.exportIfInvisible=!1,this.rasterizeFilters=!1,this.imageType=Skia.SkEncodedImageFormat.PNG,this.#fe=0,this.#zo=[],this.#Po=new Map,this.#To=new Map}dispose(){this.#To.clear()}async exportDocument(t,e,i,n,s,r,o){i??=new di(e.width,e.height);const a=ZM("svg");a.setAttribute("xmlns",GM),s||(a.setAttribute("width",i.width.toString()),a.setAttribute("height",i.height.toString())),a.setAttribute("viewBox",`${e.x} ${e.y} ${e.width} ${e.height}`),a.style.isolation="isolate",n&&0!==n.a&&(a.style.backgroundColor=n.rgba),this.#jo=ZM("defs"),a.appendChild(this.#jo),r?this.#Ao(r,a):this.#Do(t,a);const l=new Blob([a.outerHTML],{type:o||"image/svg+xml"});return this.#jo=null,this.#fe=0,this.#zo.splice(0),this.#Po.clear(),l}#Eo(t){return`${t}-${this.#fe++}`}#Oo(t){this.#jo.appendChild(t)}#Wo(t){if(!t)return null;if(this.#Po.has(t.id))return this.#Po.get(t.id);const e=ZM("image");e.setAttribute("x","0"),e.setAttribute("y","0"),e.setAttribute("width",t.data.width.toString()),e.setAttribute("height",t.data.height.toString()),e.setAttribute("preserveAspectRatio","none");const i=this.#Eo("img");return e.setAttribute("id",i),this.#Po.set(t.id,i),this.#To.has(t.id)||this.#To.set(t.id,t.data.encodeToDataURI(this.imageType,100)),e.setAttribute("href",this.#To.get(t.id)),this.#Oo(e),i}#Ro(t){return!1}#Bo(t){const e=t.pictureBounds,i=ZM("image");return i.setAttribute("x",e.x.toString()),i.setAttribute("y",e.y.toString()),i.setAttribute("width",e.width.toString()),i.setAttribute("height",e.height.toString()),i.setAttribute("preserveAspectRatio","none"),this.#zo.push({type:"picture",src:t,dst:i}),i}#Ao(t,e){for(const i of t){if(!i?.isElement)continue;let t=this.#Uo(i);if(!t)continue;const n=i.parent.globalMatrix;if(!n.isIdentity){const e=ZM("g");e.setAttribute("transform",n.toString()),e.appendChild(t),t=e}e.appendChild(t)}return e}#Do(t,e){for(const i of t.children()){const t=this.#Uo(i);t&&e.appendChild(t)}return e}#Uo(t){const e=t.isInvisible;if(e&&!this.exportIfInvisible)return null;let i,n=!1;const s=this.rasterizeFilters&&this.#Ro(t);if(s){if(e)return null;i=this.#Bo(t)}else if(t instanceof Bh)i=this.#$o(t);else if(t instanceof Sg)i=this.#Fo(t);else switch(t.type){case"group":case"layer":case"mask":t.hasChildren&&(i=ZM("g"),n=!0);break;case"clip-group":t.hasChildren&&(i=this.#Vo(t),n=!0);break;case"clip-path":i=this.#Ho(t);break;case"symbol":i=this.#Go(t);break;case"image":i=this.#Zo(t)}if(!i)return null;if(this.#Yo(t,i),!s&&(this.#Qo(t,i),n))for(const e of this.#Jo(t))i.appendChild(e);return i}*#Jo(t){if(t.supportsChildren&&t.hasChildren)for(const e of t.children())if(e.isRenderable){const t=this.#Uo(e);t&&(yield t)}}#Fo(t){const e=sv(t);if(!e)return null;const i=this.#Uo(e);return e.dispose(),i}#$o(t){if(t.isStrokeVisible){if(t.stroke.isUniform){const e=this.#qo(t);return e?(this.#Ko(t,e),this.#Xo(t,e),this.#ta(t,e),e):null}const e=ZM("path");e.setAttribute("d",t.outlinePath?.toString()),e.setAttribute("stroke","none"),e.setAttribute("fill",this.#ea(t.strokeBrush));const i=this.#ia(t.strokeBrush)*t.strokeOpacity;if(1!==i&&e.setAttribute("fill-opacity",i.toString()),!t.isFillVisible)return e;const n=this.#qo(t);if(!n)return e;this.#Xo(t,n);const s=ZM("g");return 0===t.paintOrder?(s.appendChild(n),s.appendChild(e)):(s.appendChild(e),s.appendChild(n)),s}if(t.isFillVisible){const e=this.#qo(t);return e?(this.#Xo(t,e),e):null}return null}#qo(t){let e;if(t instanceof Uh&&!t.shape.isDistorted)switch(t.type){case"rect":{const i=t.shape;if(i.isRounded)if(i.isSimple){e=ZM("rect"),e.setAttribute("width",i.width.toString()),e.setAttribute("height",i.height.toString());const t=i.radius.value.toString();e.setAttribute("rx",t)}else{e=ZM("path");const i=t.shape.convertToPath();e.setAttribute("d",i.toString()),i.delete()}else e=ZM("rect"),e.setAttribute("width",i.width.toString()),e.setAttribute("height",i.height.toString())}break;case"ellipse":{const i=t.shape;i.isCircle?(e=ZM("circle"),e.setAttribute("r",(i.width/2).toString())):(e=ZM("ellipse"),e.setAttribute("rx",(i.width/2).toString()),e.setAttribute("ry",(i.height/2).toString()))}break;case"line":{const i=t.shape;e=ZM("line"),e.setAttribute("x1",i.points[0].x.toString()),e.setAttribute("y1",i.points[0].y.toString()),e.setAttribute("x2",i.points[1].x.toString()),e.setAttribute("y2",i.points[1].y.toString())}break;case"poly":{const i=t.shape;e=i.isClosed?ZM("polygon"):ZM("polyline"),e.setAttribute("points",i.points.map((t=>`${t.x},${t.y}`)).join(" "))}}if(!e){const i=t instanceof Uh?t.shape.convertToPath():t.localPath.clone();if(!i||i.isEmpty)return i?.delete(),null;e=ZM("path"),e.setAttribute("d",i.toString()),i.delete()}return e}#Ho(t){const e=t.path;if(!e||e.isEmpty)return null;const i=ZM("path");i.setAttribute("d",e.toString()),1===t.fillRule&&i.setAttribute("clip-rule","evenodd");const n=t.localMatrix;return n.isIdentity||i.setAttribute("transform",n.toString()),i}#na(t){if(!t.length)return null;const e=ZM("clipPath");for(const i of t){const t=this.#Uo(i);t&&e.appendChild(t)}return e.hasChildNodes()?e:null}#sa(t){if(!t.length)return null;const e=ZM("mask");for(const i of t){const t=this.#Uo(i);t&&t.hasChildNodes()&&e.appendChild(t)}return e.hasChildNodes()?(e.setAttribute("maskUnits","userSpaceOnUse"),e):null}#Vo(t){const e=[],i=[],n=[];for(const s of t.children())s instanceof ng?e.push(s):s instanceof ag?i.push(s):n.push(s);if(!n.length||!e.length&&!i.length)return null;let s;if(1===n.length)s=this.#Uo(n[0]);else{s=ZM("g");for(const t of n){const e=this.#Uo(t);e&&s.appendChild(e)}s.hasChildNodes()||(s=null)}if(!s)return null;const r=this.#na(e),o=this.#sa(i);return r&&(r.setAttribute("id",this.#Eo("cp")),this.#Oo(r),s.setAttribute("clip-path",`url(#${r.id})`)),o&&(t.isAlphaMask&&(o.style.maskType="alpha"),o.setAttribute("id",this.#Eo("mk")),this.#Oo(o),s.setAttribute("mask",`url(#${o.id})`)),s}#Go(t){return null}#Zo(t){const e=this.#Wo(t.imageResource);if(!e)return null;const{width:i,height:n}=t,s=ZM("use");s.setAttribute("href",`#${e}`),s.setAttribute("width",i.toString()),s.setAttribute("height",n.toString());const r=new hi;if(r.scale(i/t.imageResource.width,n/t.imageResource.height),r.isIdentity)return s;s.setAttribute("transform",r.toString());const o=ZM("g");return o.appendChild(s),o}#Qo(t,e){if(!t.supportsFilters||!t.filters||t.filters.isInvisible)return;const i=[];for(const e of t.filters.children())if(!e.isInvisible)if(e instanceof im){const t=ZM("feGaussianBlur");t.setAttribute("stdDeviation",`${e.radius}`),t.setAttribute("color-interpolation-filters","sRGB"),i.push(t)}else if(e instanceof sm){const t=ZM("feDropShadow");t.setAttribute("dx",e.offset.x.toString()),t.setAttribute("dy",e.offset.y.toString()),t.setAttribute("flood-color",e.color.rgba),t.setAttribute("stdDeviation",`${e.blur}`),t.setAttribute("color-interpolation-filters","sRGB"),i.push(t)}else if(e instanceof nm){const t=new mr;t.brightness(e.brightness).contrast(e.contrast).saturate(e.saturate).hueRotate(e.hueRotate).invert(e.invert).grayscale(e.grayscale).sepia(e.sepia);const n=ZM("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values",t.value.join(" ")),i.push(n)}if(0===i.length)return;const n=ZM("filter");n.id=this.#Eo("fx");for(const t of i)n.appendChild(t);this.#Oo(n),e.setAttribute("filter",`url(#${n.id})`)}#Yo(t,e){const i=t.localMatrix;i&&!i.isIdentity&&e.setAttribute("transform",i.toString()),t.providesPicture&&(1!==t.opacity&&e.setAttribute("opacity",t.opacity.toString()),11!==t.blend&&(e.style.mixBlendMode=RM(t.blend)),t.isolate&&t.supportsChildren&&(e.style.isolation="isolate")),t.hidden&&e.setAttribute("visibility","hidden"),null!=t.title&&""!==t.title&&e.setAttribute("title",t.title)}#ta(t,e){2===t.paintOrder&&e.setAttribute("paint-order","stroke")}#ea(t){switch(t.type){case 1:return this.#ra(t.color);case 2:return this.#oa(t);case 3:return this.#aa(t);case 4:return this.#la(t)}return"none"}#oa(t){const e=ZM("linearGradient");return e.setAttribute("x1",t.start.x.toString()),e.setAttribute("y1",t.start.y.toString()),e.setAttribute("x2",t.end.x.toString()),e.setAttribute("y2",t.end.y.toString()),this.#ca(t,e,"lg")}#aa(t){const e=ZM("radialGradient");return e.setAttribute("cx",t.center.x.toString()),e.setAttribute("cy",t.center.y.toString()),e.setAttribute("r",t.radius.toString()),this.#ca(t,e,"rg")}#la(t){const e=ZM("radialGradient");return e.setAttribute("cx",t.end.x.toString()),e.setAttribute("cy",t.end.y.toString()),e.setAttribute("r",t.endRadius.toString()),e.setAttribute("fx",t.start.x.toString()),e.setAttribute("fy",t.start.y.toString()),e.setAttribute("fr",t.startRadius.toString()),this.#ca(t,e,"tg")}#ca(t,e,i){e.setAttribute("id",this.#Eo(i)),e.setAttribute("gradientUnits","userSpaceOnUse");const n=t.matrix;n&&!n.isIdentity&&e.setAttribute("gradientTransform",n.toString()),e.setAttribute("spreadMethod",UM(t.spread));for(const i of t.stopColors){const t=ZM("stop");t.setAttribute("offset",i.offset.toString()),t.setAttribute("stop-color",this.#ra(i.color)),1!==i.color.a&&t.setAttribute("stop-opacity",i.color.a.toString()),e.appendChild(t)}return this.#Oo(e),`url(#${e.id})`}#ia(t){return t instanceof gi?t.color.a:1}#ra(t){return`#${this.#ua(t.r)}${this.#ua(t.g)}${this.#ua(t.b)}`}#ua(t){const e=Math.round(t).toString(16);return e.length<2?"0"+e:e}#Xo(t,e){1===t.fillRule&&e.setAttribute("fill-rule","evenodd");const i=this.#ia(t.fill)*t.fillOpacity;if(0===i)return void e.setAttribute("fill","none");const n=this.#ea(t.fill);e.setAttribute("fill",n),"none"!==n&&1!==i&&e.setAttribute("fill-opacity",i.toString())}#Ko(t,e){const i=this.#ia(t.strokeBrush)*t.strokeOpacity;if(0===i)return void e.setAttribute("stroke","none");const n=t.stroke,s=this.#ea(n.brush);if(e.setAttribute("stroke",s),"none"!==s&&(1!==i&&e.setAttribute("stroke-opacity",i.toString()),e.setAttribute("stroke-width",n.width.toString()),e.setAttribute("stroke-linecap",OM(n.lineCap)),e.setAttribute("stroke-linejoin",WM(n.lineJoin)),0===n.lineJoin&&e.setAttribute("stroke-miterlimit",n.miterLimit.toString()),n.dashes.length>0)){const t=n.dashPathLength;t>0&&e.setAttribute("pathLength",t.toString()),e.setAttribute("stroke-dasharray",n.dashes.join(" ")),0!==n.offset&&e.setAttribute("stroke-dashoffset",n.offset.toString())}}};class KM{constructor(){this.background=se.transparent,this.#ha=null,this.#da=null,this.#Gt=null}#ha;#da;#Gt;get canvas(){return this.#ha}get bitmap(){return this.#ha.transferToImageBitmap()}createSurface(t){this.deleteCurrentSurface(),this.#ha=new OffscreenCanvas(t.width,t.height),this.#da=Skia.GL.getCurrentContext(),this.#Gt=Skia.SkSurface.MakeWebGLSurface(this.#ha,t)}deleteCurrentSurface(){this.#Gt?.delete(),this.#Gt=null,null!==this.#da&&(Skia.GL.makeContextCurrent(this.#da),this.#da=null),this.#ha=null}async*renderRegions(t,e,i=1,n){const s=t.picture?.clone();if(s){for(const t of e){const e=new di(t.width*i,t.height*i);this.createSurface(e);const r=await this.renderPicture(s,t,e,n);this.deleteCurrentSurface(),yield[t,r]}s.delete()}}async renderDocumentRegion(t,e,i,n){const s=t.picture?.clone();if(!s)return null;this.createSurface(i||e);const r=await this.renderPicture(s,e,i,n);return this.deleteCurrentSurface(),s?.delete(),r}async renderPicture(t,e,i,n){return t?(this.drawPicture(t,e,i),this.#ha.convertToBlob(n)):null}drawPicture(t,e,i){this.#Gt||this.createSurface(i||e);const n=this.#Gt;!function(t,e,i,n,s){if(t.clear(s??se.transparent),!e)return;i??=Ve.fromLTRBObject(e.getBounds()),n??=i;const r=Math.min(n.width/i.width,n.height/i.height),o=-i.x*r+(n.width-r*i.width)/2,a=-i.y*r+(n.height-r*i.height)/2;t.saveLayer(),t.translate(o,a),t.scale(r,r),t.clipRect(i,Skia.SkClipOp.Intersect,!0),t.drawPicture(e),t.restore()}(n.getCanvas(),t,e,i,this.background),n.flush()}async renderElement(t,e,i,n){let s,r=t.pictureAndFiltersBounds;if(i&&(r=r.transform(t.globalMatrix)),e??=new di(r.width,r.height),i){const e=new Skia.SkPictureRecorder,i=new br(e.beginRecording(r));i.saveLayer(oe.NormalIsolatedComposition),t.parent&&i.multiplyMatrix(t.parent.globalMatrix),t.draw(i),i.restore(),s=e.finishRecordingAsPicture(r),e.delete(),i.dispose()}else s=t.picture.clone();this.createSurface(e);const o=await this.renderPicture(s,r,e,n);return this.deleteCurrentSurface(),s.delete(),o}dispose(){this.deleteCurrentSurface()}}class XM{#fa=0;#pa=null;#ga=null;#Ki;constructor(t){this.#Ki=t||se.gray}get color(){return this.#Ki}set color(t){t.equals(this.#Ki)||(this.#Ki=t,this.#ma())}toJSON(){return{color:this.#Ki}}*snapToSize(t,e,i){let{width:n,height:s}=this.calcSize();e&&(n/=e.x,s/=e.y);const r=Math.floor(t.x/n)*n,o=Math.floor(t.y/s)*s,a=r+n/2,l=o+s/2;if(i){if(t.x===a&&t.y===l)return void(yield t);yield new ce(a,l)}t.x<=a?t.y<=l?yield new ce(r,o):yield new ce(r,o+s):t.y<=l?yield new ce(r+n,o):yield new ce(r+n,o+s)}cloneProperties(t){t.#Ki=this.#Ki,t.#fa=this.#fa,t.#pa=this.#pa,this.#ga&&(t.#ga=this.#ga.clone())}getTransformMatrix(t){return null}dispose(){this.#ma()}invalidate(){this.#ma()}#va(t){if(this.#ga)return this.#ga;const e=Kl().paint;e.reset(),e.isAntiAlias=!0,e.style=Skia.SkPaintStyle.Stroke,e.color=this.#Ki.code,e.strokeWidth=this.#fa;const i=new Skia.SkPictureRecorder,n=i.beginRecording(t);this.drawGridCell(t,n,e);const s=i.finishRecordingAsPicture(t);return i.delete(),this.#ga=s.makeShader(Skia.SkTileMode.Repeat,Skia.SkTileMode.Repeat,this.getTransformMatrix(t),t),s.delete(),e.reset(),this.#ga}#ma(){this.#ga?.delete(),this.#ga=null}shouldDrawGrid(t){return Math.sqrt(t.width*t.height)*Ka>=4}calcLineWidth(t){return Kl().getLineScale(Xa)}render(){const{canvas:t,paint:e}=Kl(),i=this.calcSize();this.#pa&&i.equals(this.#pa)||(this.#pa=i,this.#ma());const n=this.calcLineWidth(i);if(this.#fa!==n&&(this.#fa=n,this.#ma()),!this.shouldDrawGrid(i))return;const s=this.#va(i);e.isAntiAlias=!0,e.style=Skia.SkPaintStyle.Fill,e.shader=s;const r=tl(),o=el();t.drawRect(r.x,r.y,o.x,o.y,e),e.reset()}}class tS extends XM{#ya={x:1,y:1};constructor(t,e){super(e),t&&(this.#ya.x=t.x,this.#ya.y=t.y)}cloneProperties(t){super.cloneProperties(t),t.#ya.x=this.#ya.x,t.#ya.y=this.#ya.y}get divisions(){return this.#ya}set divisions(t){this.setDivisions(t.x,t.y)}get divX(){return this.divisions.x}set divX(t){this.setDivisions(t,null)}get divY(){return this.divisions.y}set divY(t){this.setDivisions(null,t)}setDivisions(t,e){const i=this.#ya;return t??=i.x,e??=i.y,(i.x!==t||i.y!==e)&&(i.x=t,i.y=e,this.invalidate(),!0)}drawGridCell(t,e,i){e.drawRect(0,0,t.width,t.height,i);const n=this.#ya;i.strokeWidth/=2;const s=i.strokeWidth/2,r=t.width/n.x;for(let o=1;o<n.x;o++)e.drawVLine(o*r-s,0,t.height,i);const o=t.height/n.y;for(let r=1;r<n.y;r++)e.drawHLine(0,r*o-s,t.width,i)}snap(t){return this.snapToSize(t,this.divisions,!1)}toJSON(){const t=super.toJSON();return t.divisions=this.#ya,t}}class eS extends tS{#xa=null;constructor(t,e,i){super(e,i),this.#xa=t}get size(){return this.#xa}set size(t){this.#xa.equals(t)||(this.#xa=t,this.invalidate())}get width(){return this.#xa.width}set width(t){this.setSize(t,null)}get height(){return this.#xa.height}set height(t){this.setSize(null,t)}setSize(t,e){return t??=this.#xa.width,e??=this.#xa.height,(this.#xa.width!==t||this.#xa.height!==e)&&(this.#xa=new di(t,e),this.invalidate(),!0)}shouldDrawGrid(t){return!(this.#xa.width<this.divisions.x||this.#xa.height<this.divisions.y)&&super.shouldDrawGrid(t)}clone(){const t=new eS(this.#xa);return this.cloneProperties(t),t}calcSize(){return this.#xa}toJSON(){const t=super.toJSON();return t.size=this.#xa,t}static fromJSON(t){return new eS(t.size,t.divisions,t.color)}}class iS extends tS{#xa=null;constructor(t,e){super(t||{x:10,y:10},e)}shouldDrawGrid(t){return!0}cloneProperties(t){super.cloneProperties(t),t.#xa=this.#xa}clone(){const t=new iS;return this.cloneProperties(t),t}calcSize(){const t=nl();return this.#xa&&this.#xa.width===t?this.#xa:this.#xa=new di(t,t)}static fromJSON(t){return Array.isArray(t)&&3===t.length?new iS({x:t[1],y:t[2]}):new iS(t?.divisions,t?.color)}}const nS={x:2,y:2};class sS extends XM{#j;#ba=!1;#X=null;#xa=null;#ot;constructor(t,e,i,n){super(n),this.#j=t,this.#ot=e??30,this.#ba=!!i}get width(){return this.#j}set width(t){this.#j!==t&&(this.#j=t,this.invalidate())}get height(){return this.#X??=this.#j*Math.tan(this.#ot*Dt)}set height(t){this.angle=Math.abs(Math.atan(t/this.#j))*Et}get angle(){return this.#ot}set angle(t){t=n(t,0,90),this.#ot!==t&&(this.#ot=t,this.invalidate())}get xangle(){return 180-2*this.#ot}set xangle(t){this.angle=(180-t)/2}get complex(){return this.#ba}set complex(t){this.#ba!==t&&(this.#ba=t,super.invalidate())}invalidate(){super.invalidate(),this.#X=null,this.#xa=null}cloneProperties(t){super.cloneProperties(t),t.#xa=this.#xa,t.#X=this.#X}clone(){const t=new sS(this.#j,this.#ot,this.#ba);return this.cloneProperties(t),t}calcSize(){return this.#xa??=new di(this.width,this.height)}drawGridCell(t,e,i){const n=t.width/2,s=t.height/2;this.#ba&&(e.drawRect(0,0,t.width,t.height,i),e.drawLine(n,0,n,t.height,i),e.drawLine(0,s,t.width,s,i)),e.drawLine(0,0,t.width,t.height,i),e.drawLine(0,t.height,t.width,0,i)}snap(t){return this.#ba?this.snapToSize(t,nS,!1):this.snapToSize(t,null,!0)}toJSON(){const t=super.toJSON();return t.size=this.#j,t.angle=this.#ot,t.complex=this.#ba,t}static fromJSON(t){return new sS(t.size,t.angle||null,!!t.complex,t.color)}}const rS=new di(1,1);class oS extends XM{clone(){return new oS(this.color)}calcSize(){return rS}drawGridCell(t,e,i){e.drawRect(0,0,1,1,i)}*snap(t){yield t.rounded()}shouldDrawGrid(t){return Ka>=2}}const aS={x:new Map,y:new Map},lS=[],cS=new Set,uS=new Set;function hS(t,e,i,n=!1){if(!t.has(e))return void t.set(e,[i,i,n]);const s=t.get(e);i<s[0]?s[0]=i:i>s[1]&&(s[1]=i),n&&(s[2]=!0)}function dS(t,e,i,n){return e===t[i]&&(hS(aS[i],e,t[n],!0),cS.add(t),!0)}function fS(t,e,i,n){let s=!1;for(const r of t.sidePoints(!0))dS(r,e,i,n)&&(s=!0);return!!s&&(uS.add(t),!0)}const pS=new Map([[ce,dS],[Ve,fS],[Ze,fS]]),gS={x:new Set,y:new Set};function mS(t,e,i,n){if(!gS[e].has(t)&&(gS[e].add(t),n[e].has(t)))for(const s of n[e].get(t))pS.get(s?.constructor)?.(s,t,e,i)}function vS(t,e,i){hS(aS.x,t,e),mS(t,"x","y",i)}function yS(t,e,i){hS(aS.y,e,t),mS(e,"y","x",i)}function xS(t,e,i){hS(aS.x,t,e),hS(aS.y,e,t),mS(t,"x","y",i),mS(e,"y","x",i)}let bS=!1;function wS(t,e){t.equals(e)||(lS.push([e,t]),cS.add(e),bS=!0)}function MS(){bS=!1,lS.splice(0),cS.clear(),uS.clear()}const SS=new Ti,kS=new Ti;let _S,IS,CS,LS,NS=function*(t){yield t.rounded()},jS=!1;const zS={x:new Map,y:new Map},PS=new Set,TS=new Set,AS={x:new Set,y:new Set};let DS=null;function ES(t){return jS?(t&&function(t){if(LS&&t)for(const e of t)LS.add(e)}(t),!0):!!lk().enabled&&(LS=new WeakSet(t),US(),jS=!0)}function OS(){jS&&(jS=!1,LS=null,TS.clear(),WS())}function WS(){MS(),PS.clear(),AS.x.clear(),AS.y.clear(),zS.x.clear(),zS.y.clear()}function RS(){lk().enabled?jS&&US():OS()}function BS(t,e){e?.isIdentity&&(e=null);for(let i of t)i=e?e.point(i.x,i.y):i,TS.add(i),jS&&VS(i)}function US(){WS();for(const t of _S)t();TS.size&&HS(TS)}function $S(t,e,i){t.has(e)||t.set(e,new Set),t.get(e).add(i)}function FS(t,e){AS.x.add(t),e&&$S(zS.x,t,e)}function VS(t,e){PS.add(t),$S(zS.x,t.x,t),$S(zS.y,t.y,t),e&&($S(zS.x,t.x,e),$S(zS.y,t.y,e))}function HS(t,e){if(e&&!e.isIdentity)for(const i of t)VS(e.point(i.x,i.y));else for(const e of t)VS(e)}function GS(t,e){if(t.width||t.height){e&&!e.isIdentity&&(t=t instanceof Ve?Ze.fromRectangle(t,e):t.transform(e),e=null);for(const e of t.sidePoints(!0))VS(e,t)}}function*ZS(t,e,i,n){const s=AS[e];if(s.has(t))return void(yield t);let r=null,o=1/0;for(const e of s){if(e<i||e>n)continue;const s=Math.abs(t-e);s<o&&(o=s,r=e)}for(const s of DS?ik(PS):PS){const a=s[e];if(a<i||a>n)continue;const l=Math.abs(t-a);l<o&&(o=l,r=a)}null!=r&&(yield r)}function YS(t,e,i,n){let s=1/0,r=!1;const o=new Set;return a=>{if(r)return!0;if(o.has(a))return!1;o.add(a);const l=a+i,c=function(t,e,i,n){if(DS)if("x"===e){if(n<DS.left||i>DS.right)return null;i=Math.max(i,DS.left),n=Math.min(n,DS.right)}else{if(n<DS.top||i>DS.bottom)return null;i=Math.max(i,DS.top),n=Math.min(n,DS.bottom)}let s,r=1/0,o=null;for(const a of function*(t,e,i,n){for(const s of IS)yield*s(t,e,i,n)}(t,e,i,n))if(!(a>n||a<i)){if(a===t)return a;s=Math.abs(t-a),s<r&&(r=s,o=a)}return o}(l,e,l-n,l+n);if(null==c)return!1;if(c===l)return t[e]=i,r=!0;const u=Math.abs(c-l);return u<s&&(s=u,t[e]=c-a),!1}}function QS(){return 10/Ka}const JS=[null];function qS(t,e){return jS?(JS[0]=t,t.add(sk(JS,ce.ZERO,e))):t}function KS(t,e,i){return jS?sk(t.sidePoints(!0),e,i):function(t,e){return e?"x"===e?t.y?new ce(0,t.y):ce.ZERO:t.x?new ce(t.x,0):ce.ZERO:t}(e,i)}function XS(t,e,i=15){let n=e.getAngleTo(t);if(n%i!=0&&(n=Math.round(n/i)*i),e=ce.fromAngle(n,t.distanceTo(e),t),n%180==0){const t=qS(e,"y");return e.shifted(t.x-e.x,0)}if(n%90==0){const t=qS(e,"x");return e.shifted(0,t.y-e.y)}return MS(),e}function tk(t,e){if(t.distanceTo(e)<QS())return MS(),e;const i=ek(e.getAngleTo(t),!0),n=qS(t="x"===i?new ce(e.x,t.y):new ce(t.x,e.y),i);return wS(n,e),n}function ek(t,e){return(t=(t+180+(e?90:0))%360)>45&&t<135||t>225&&t<315?"y":"x"}function*ik(t){for(const e of t)DS.contains(e.x,e.y)&&(yield e)}function nk(t,e,i,n){let s=1/0;if(n){let r=null;const o={x:i.x,y:i.y};o[n]=0;const a="x"===n?"y":"x";for(const i of e)for(const e of t(i.add(o))){const t=e[a]-i[a];if(!t)return ce.ZERO;const n=Math.abs(t);n<s&&(s=n,r=t)}return null!=r&&(o[a]=r),new ce(o.x,o.y)}let r=i;for(const n of e)for(const e of t(n.add(i))){if(n.equals(e))return ce.ZERO;const t=ce.distance(e,n);t<s&&(s=t,r=e.sub(n))}return r}function sk(t,e,i){MS();const n=lk();DS=n.view?il():null;const s=new Set(n.view?ik(t):t);if(!s.size)return e;let r;if(r=n.pixel&&NS?nk(NS,s,e,i):CS?.enabled?nk(CS.snap,s,e,i):function(t,e,i){const n=QS(),s={x:null,y:null};if(i){let r;"x"===i?(r="y",s.x=0):(r="x",s.y=0);const o=YS(s,r,e[r],n);for(const e of t)if(o(e[r]))break}else{const i=YS(s,"x",e.x,n),r=YS(s,"y",e.y,n);let o=!1,a=!1;for(const e of t)if(o=o||i(e.x),a=a||r(e.y),o&&a)break}return s}(s,e,i),!r||null==r.x&&null==r.y)return e;const o=new ce(r.x??e.x,r.y??e.y);return function(t,e,i,n){let s;s="x"===i?yS:"y"===i?vS:xS;for(const i of t)s(i.x+e.x,i.y+e.y,n);gS.x.clear(),gS.y.clear(),function(){lS.splice(0);let t=0;for(const[e,i]of aS.x)i[2]&&i[0]!==i[1]&&(lS[t++]=[{x:e,y:i[0]},{x:e,y:i[1]}]);aS.x.clear();for(const[e,i]of aS.y)i[2]&&i[0]!==i[1]&&(lS[t++]=[{x:i[0],y:e},{x:i[1],y:e}]);aS.y.clear()}(),bS=(lS.length||cS.size||uS.size)>0}(s,o,null==r.x?"x":null==r.y?"y":null,zS),o}const rk=Symbol(),ok=Symbol(),ak="snapping";function lk(t){return pa(ak,t)}let ck;function uk(){ck||(ck=!0,ga(ak,(t=>({enabled:t?.snapping?.enabled??!0,view:t?.snapping?.view??!0,pixel:!1}))),function(t,e=0){qr(ok,{priority:e,handler:ZS})}(0,0),Yr(ro,(()=>{_S=Kr(rk).map(hk),IS=Kr(ok).map(hk)})))}function hk(t){return t.handler}function dk(t,e=0){qr(rk,{priority:e,handler:t})}const fk="grid";let pk,gk;function mk(t){return qo(fk,t)}function vk(){return pk||mk(new iS),pk}function yk(t){return pa(fk,t)}function xk(){return yk().enabled}let bk=class t{constructor(t,e,i=!1){this.position=t,this.isHorizontal=e,this.isHidden=i}toJSON(){return[this.position,this.isHorizontal,this.isHidden]}clone(){return new t(this.position,this.isHorizontal,this.isHidden)}},wk=class t{#wa;#Ma=new Ti;constructor(t=[]){this.#wa=t||[]}get isEmpty(){return 0===this.#wa.length}exists(t,e,i){const n=this.#wa;if(0===n.length)return!1;for(const s of n)if(s!==i&&s.isHorizontal===e&&s.position===t)return!0;return!1}toJSON(){return[this.#wa]}dispose(){this.#wa=null}add(t){this.#wa.push(t)}has(t){return this.#wa.indexOf(t)>=0}remove(t){const e=this.#wa.indexOf(t);return e>=0&&(this.#wa.splice(e,1),!0)}render(){const t=Kl(),e=this.#Ma;e.width=Xa/t.matrix.lineScale,e.brush=e.brush.withColor(bl.getColor("guide"));const i=tl(),n=el();for(const s of this.#wa)s.isHidden||(s.isHorizontal?t.drawLine({x:i.x,y:s.position},{x:n.x,y:s.position},e):t.drawLine({x:s.position,y:i.y},{x:s.position,y:n.y},e))}getGuideAtPoint(t,e=1e-6){for(const i of this.#wa){if(i.isHidden)continue;const n=i.isHorizontal?t.x:t.y;if(Math.abs(i.position-n)<=e)return i}return null}clone(){return new t(this.#wa.map((t=>t.clone())))}*horizontal(){for(const t of this.#wa)t.isHorizontal&&(yield t)}*vertical(){for(const t of this.#wa)t.isHorizontal||(yield t)}*[Symbol.iterator](){yield*this.#wa}};const Mk="guides";let Sk,kk;function _k(){return Sk||(t=new wk,qo(Mk,t)),Sk;var t}function Ik(t){return pa(Mk,t)}class Ck{constructor(t,e="",i){this.bounds=t,this.title=e,this.id=i??Ct()}setSize(t,e){return(this.bounds.width!==t||this.bounds.height!==e)&&(this.bounds=new Ve(this.bounds.x,this.bounds.y,t,e),!0)}setBounds(t){return!this.bounds.equals(t)&&(this.bounds=t,!0)}intersectionArea(t){return this.intersectionRect(t)?.area||0}intersectionRect(t){return this.bounds.intersection(t)}clone(){return new Ck(this.bounds,this.title,this.id)}toJSON(){return[this.bounds,this.title,this.id]}}class Lk{#t=null;#Sa=!0;#e=null;constructor(...t){this.list=t}get isSingle(){return 1===this.list.length}get first(){return this.list[0]}find(t){return this.list.find((e=>e.id===t))||null}add(t){if(t instanceof Ve)t=new Ck(t);else if(this.list.includes(t))return!1;return this.list.push(t),this.invalidate(),!0}remove(t){const e=this.list.indexOf(t);return-1!==e&&1!==this.list.length&&(this.list.splice(e,1),this.invalidate(),!0)}clone(){const t=new Lk(...this.list.map((t=>t.clone())));return!this.#Sa&&this.#t&&(t.#Sa=!1,t.#t=this.#t.copy()),t}invalidate(){this.#Sa=!0,this.#e=null}toJSON(){return this.list}get path(){if(0===this.list.length)return null;if(null==this.#t){const t=new Skia.SkPath;t.fillType=Skia.SkPathFillType.Winding,t.isVolatile=!0,this.#t=t}if(this.#Sa){this.#t.rewind();for(const t of this.list)this.#t.addRect(t.bounds);this.#Sa=!1}return this.#t}get bounds(){return this.#e?this.#e:0===this.list.length?this.#e=Ve.ZERO:1===this.list.length?this.#e=this.list[0].bounds:this.#e=Ve.fromLTRBObject(this.path.computeTightBounds())}setItemSize(t,e,i){return!!t.setSize(e,i)&&(this.invalidate(),!0)}setItemBounds(t,e){return!!t.setBounds(e)&&(this.invalidate(),!0)}transformItems(t,e){if(!t||t.isIdentity)return!1;if(e??=this.list,0===e.length)return!1;for(const i of e)i.bounds=i.bounds.transform(t);return this.invalidate(),!0}moveItems(t,e){if(t.isZero)return!1;if(e??=this.list,0===e.length)return!1;for(const i of e)i.bounds=i.bounds.shifted(t.x,t.y);return this.invalidate(),!0}*regions(){for(const t of this.list)yield t.bounds}dispose(){this.list?.splice(0),this.list=null,this.#t?.delete(),this.#t=null,this.#e=null}*[Symbol.iterator](){yield*this.list}}const Nk="board";let jk,zk,Pk,Tk=!1;function Ak(t){return pa(Nk,t)}function Dk(){return zk.bounds}ga(Nk,(()=>({snap:!0})));const Ek=ua((async()=>!ch()&&(zo(),uy("web expressive/elements")))),Ok=ua((async()=>cy("web expressive/elements"))),Wk=ua((async(t,e,i)=>(zo(),Ly(async function(t){const e=await async function(){if(!await At())return null;try{return await navigator.clipboard.read()}catch(t){return null}}();if(!e)return Zr(ho,"Access to clipboard is denied"),!1;for(const i of e)for(const e of i.types){if(sy.has(e))return sy.get(e)(await dy(i,e),t,e);if(ay?.has(e))return ay.read(await dy(i,e),t,e)}return!1}({isShift:e,isAlt:t,position:i}),"Pasting...",500)))),Rk=ua((async t=>Ly(async function(t){const e=t.dataTransfer.files;if(0===e.length)return null;const i={position:ul(t.clientX,t.clientY),zoom:t.altKey};zo();for(const t of e)if(await wM(t,null,i))return!0;return!1}(t),"Importing...",500))),Bk=ua((async()=>{Ly(async function(){Yl();const t=new KM;let e;try{let i=oh();if(i){if(!i.isLayer&&!i.isElement)return!1;e=await t.renderElement(i,null,!0)}else e=await t.renderDocumentRegion($c,Dk())}catch(t){return!1}finally{t.dispose(),Zl()}return async function(t){if("image/png"!==t.type){if(!t.type.startsWith("image/"))return console.warn(`Invalid image type ${t.type}`),!1;if("image/png"!==(t=await async function(t){return["image/gif","image/apng","image/avif"].includes(t.type)?async function(t){if(!await ImageDecoder.isTypeSupported(t.type))return null;const e=new ImageDecoder({type:t.type,data:t.stream()}),i=(await e.decode({frameIndex:0,completeFramesOnly:!0})).image;e.close();const n=new OffscreenCanvas(i.displayWidth,i.displayHeight);return n.getContext("2d").drawImage(i,0,0),n.convertToBlob({type:"image/png"})}(t):t}(t)).type)return console.warn(`Cannot convert ${t.type} to image/png`),!1}return async function(t){return Tt(new ClipboardItem({[t.type]:t},null))}(t)}(e)}(),"Generating image...",500)})),Uk=ua((async()=>{const t=ov(oh(),!0);if(!t)return;const e=[t.toString()];t.delete(),await Tt(new ClipboardItem({"web expressive/path":new Blob(e,{type:"expressive/path"}),"text/plain":new Blob(e,{type:"text/plain"})}))})),$k=ua((async()=>{const t=[...Ph()];let e;const i=new qM;try{t.length?(yu(t,!1,!0),e=await i.exportDocument($c,Wh(),null,null,!0,t,"image/svg+xml")):e=await i.exportDocument($c,Dk(),null,null,!0,null,"image/svg+xml")}finally{i.dispose()}if(e){const t=new Blob([e],{type:"text/plain"});await Tt(new ClipboardItem({[e.type]:e,[t.type]:t}))}}));function Fk(){!function(){let t;if(Au())t=Nu()?[...zu()]:[...Pu().children()];else{t=[];for(const e of $c.children())t.push(...e.children())}gh(t)}()}function Vk(){Mh()}function Hk(){ol(Dk())}function Gk(){sl()}function Zk(){rl()}const Yk=ua((()=>ev(rh(),(t=>t.bringForward()),!0))),Qk=ua((()=>ev(rh(),(t=>t.bringToFront()),!0))),Jk=ua((()=>ev(rh(),(t=>t.sendBackward()),!1))),qk=ua((()=>ev(rh(),(t=>t.sendToBack()),!1))),Kk=ua((function(t){if(ch())return $v.swapStrokeFill(t),!1;let e=!1;return n_(Th($m),(i=>{const n=i.strokeBrush?.clone(),s=i.fill?.clone();if(s_(i,tf,s)&&(e=!0),s_(i,qd,n)&&(e=!0),t)return;const{fillOpacity:r,strokeOpacity:o}=i;r!==o&&(s_(i,Xd,r)&&(e=!0),s_(i,Jd,o)&&(e=!0))})),e})),Xk=ua((function(t){if(ch())return $v.copyFillToStroke(t),!1;let e=!1;return n_(Th($m),(i=>{s_(i,tf,i.fill)&&(e=!0),!t&&s_(i,Xd,i.fillOpacity)&&(e=!0)})),e})),t_=ua((function(t){if(ch())return $v.copyStrokeToFill(t),!1;let e=!1;return n_(Th($m),(i=>{s_(i,qd,i.strokeBrush)&&(e=!0),!t&&s_(i,Jd,i.strokeOpacity)&&(e=!0)})),e})),e_=ua((function(t){return ch()?($v.changeStrokeBrushType(t)&&Cd(tf.groups),!1):zd(Th($m),tf,(e=>ji(e.strokeBrush,t,e.localBounds)))})),i_=ua((function(t){return ch()?($v.changeFillBrushType(t)&&Cd(qd.groups),!1):zd(Th($m),qd,(e=>ji(e.fill,t,e.localBounds)))}));function n_(t,e){for(const i of t)$m(i)&&e(i)}function s_(t,e,i,n=!0){return void 0!==i&&(n?jd(t,e,i):Nd(t,e,i))}const r_=Symbol(),o_=Symbol(),a_=Symbol(),l_=ua((function(){if(ch())return!1;const t=[...Th($m)];if(!t.length)return!1;const e=[],i=oh();zo(),Mh();let n=null;for(const s of t){if(s instanceof Jp){ph(s,!0);continue}const t=x_(s);t&&(e.push(s),ph(t,!0),t===i&&(n=t))}return e.length>0&&Ym(e),n?(Sh(n),!0):!ch()})),c_=ua((function(t,e,i){if(lh()<2)return!1;zo();const n=function(t,e,i,n){if(t.length<2)return null;t=yu(t,n,!1);let s,r=null;if(null!=i&&$m(i)){const n=t.indexOf(i);if(-1===n)s=ov(i);else if(0===n){if(3===e)return null;s=ov(i),t.shift()}else if(n===t.length-1){if(4===e)return null;s=ov(i),t.pop()}else{let o;if(r=t.splice(n+1),t.splice(n,1),4===e){o=y_(t,Skia.SkPathOp.Union,b_(i));const e=r;r=t,t=e}else o=y_(r,Skia.SkPathOp.Union,b_(i));if(s=ov(i),s&&(o.add(s,Skia.SkPathOp.Union),s.delete()),s=o.resolve(),o.delete(),null==s)return null}}else s=ov(i=4===e?n?t.pop():t.shift():3===e&&n?t.shift():t.pop());if(!s)return null;const o=b_(i);let a;switch(e){case 1:a=y_(t,Skia.SkPathOp.Union,o),a.add(s,Skia.SkPathOp.Intersect);break;case 2:a=y_(t,Skia.SkPathOp.Xor,o),a.add(s,Skia.SkPathOp.Xor);break;case 3:case 4:a=y_(t,Skia.SkPathOp.Union,o),a.add(s,Skia.SkPathOp.ReverseDifference);break;default:a=y_(t,Skia.SkPathOp.Union,o,!1),a.add(s,Skia.SkPathOp.Union)}s.delete();const l=a.resolve();if(a.delete(),null==l)return null;l.simplify();const c=x_(i,es.fromSkPath(l,!0));return c&&(function(t){const e=t.localMatrix;if(e.isIdentity)return!1;t.nodes=zn(t.nodes,e),t.position=ce.ZERO,t.rotate=0,t.autoOrientAngle=0,t.skewAngle=0,t.skewAxis=0,t.scale=ce.UNIT,t.anchor=ce.ZERO,t.position=t.anchor=t.localBounds.middle}(c),t.includes(i)||t.push(i),Ym(t),r&&Ym(r)),c}([...Th($m)],t,e?oh():null,i);return!!n&&(ph(n,!1),Zr(r_,n),!0)})),u_=ua((function(t,e,i){let n,s=[...Th($m)];if(s.length<1)return!1;zo();let r=t?oh():null;if(i??=.1,null!=r&&1===s.length&&s[0]===r){if(n=ov(r),!n||n.isEmpty)return n?.delete(),null;const t=n.copy(),e=n.cut(t,i);if(t.delete(),!e)return n.delete(),null;n.simplify()}else{if(s=yu(s,e,!0),null!=r&&$m(r)){const t=s.indexOf(r);-1!==t&&(s.splice(t,1),s.push(r))}else r=s[s.length-1];const t=s.map((t=>{const e=ov(t,!0);return!e||e.isEmpty?(e?.delete(),null):e})).filter((t=>null!=t)),o=Skia.SkPath.MakePieces(t,i,!0);if(t.map((t=>t.delete())),t.splice(0),null==o||0===o.length)return!1;n=new Skia.SkPath,n.isVolatile=!0;for(const t of o)t.simplify(),n.addPath(t),t.delete();const a=b_(r);null!=a&&n.transform(a)}if(n.isEmpty)return n.delete(),null;const o=x_(r,es.fromSkPath(n,!0));return!!o&&(Ym(s),ph(o),!0)})),h_=ua((function(t){if(ch())return!1;zo();const e=[],i=[];for(const n of Th(Fm)){if(0===n.strokeLineWidth)continue;const s=n.localPath;if(null==s||s.isEmpty)continue;const r=n.stroke.outlinePath(s);if(null==r)continue;if(r.isEmpty){r.delete();continue}r.simplify(),t&&r.addPath(s);const o=x_(n,es.fromSkPath(r,!0));null!=o&&(i.push(n),e.push(o))}return i.length>0&&Ym(i),!!e.length&&(gh(e),!0)})),d_=ua((function(t,e){let i=[...Th($m)];if(i.length<2)return!1;let n=t?oh():null;if(i=yu(i,e,!0),null!=n&&$m(n)){const t=i.indexOf(n);-1!==t&&i.splice(t,1)}else n=i.pop();const s=function(t,e){const i=new Skia.SkPath;i.isVolatile=!0;for(const n of t){const t=ov(n,!0);t&&(t.isEmpty||i.addPath(t,e,void 0),t.delete())}return i}(i,b_(n));if(null==s||s.isEmpty)return s?.delete(),!1;zo();const r=ov(n);r&&(s.addPath(r),r.delete());const o=x_(n,es.fromSkPath(s,!0));return!!o&&(o.fillRule=0,i.includes(n)||i.push(n),Ym(i),ph(o,!1),!0)})),f_=ua((function(){if(ch())return!1;zo();let t=!1;for(const e of rh())e instanceof Jp&&w_(e)&&(t=!0);return t})),p_=ua((function(){if(ch())return!1;zo();const t=[];for(const e of rh()){const i=M_(e);null!=i&&t.push(...i)}return!!t.length&&(gh(t),!0)})),g_=ua(((t,e)=>{if(!gv(t))return!1;zo();const i=xn(t.nodes,e);return!!function(t,e){return Lv(t,Tn,e)}(t,e)&&(bm(t,i,!1),!0)})),m_=ua((()=>{if(ch())return!1;zo();let t=!1;for(const e of rh())gv(e)?wv(e)&&(t=!0):Pv(e)?Ev(e)&&(t=!0):Tv(e)&&Bv(e)&&(t=!0);return t})),v_=ua((()=>{if(ch())return!1;const t=[...Th((t=>Vm(t)&&""!==t.text.trim()))];if(!t.length)return!1;const e=[],i=oh();zo(),Mh();let n=null;for(const s of t){const t=rv(s);t&&(t.filters=s.filters,qm(s,t),e.push(s),ph(t,!0),t===i&&(n=t))}return e.length>0&&Ym(e),n?(Sh(n),!0):!ch()}));function y_(t,e,i,n){let s=!0;const r=new Skia.SkOpBuilder;for(const o of t){const t=ov(o,!0);if(null!=t)if(t.isEmpty)t.delete();else{if(i&&t.transform(i),n){const i=t.split(!0);if(i?.length>0)for(const n of i)t.isEmpty||(s?(r.add(n,Skia.SkPathOp.Union),s=!1):r.add(n,e)),n.delete()}else s?(r.add(t,Skia.SkPathOp.Union),s=!1):r.add(t,e);t.delete()}}return r}function x_(t,e){if(!$m(t)||!t.parent)return null;let i;if(null==e)if(t instanceof Sg)i=sv(t);else{const e=ov(t,!1);if(!e)return null;if(e.isEmpty)return e.delete(),null;i=new Jp(es.fromSkPath(e,!0),t.id),av(t,i)}else i=new Jp(e,t.id),av(t,i);return i?(i.filters=t.filters,qm(t,i),i):null}function b_(t){const e=t.globalMatrix;return!e||e.isIdentity?null:e.clone().inverse()}function w_(t){const e=t.path.path;return!(!e||e.isEmpty||!e.simplify()||(jd(t,Hd,Wn(e)),Zr(a_,t),0))}function M_(t,e){if(!(t instanceof Jp)||t.path.contoursLength<2)return null;const i=t.document,n=t.parent;if(!i||!n)return null;const s=[];let r=t,o=0;const a=t.filters;for(const e of $n(t.path.nodes)){const i=new Jp(new es(e));av(t,i),i.title=Iu(i)+" ("+ ++o+")",a&&(i.filters=a.clone(!0)),n.insertAfter(i,r),r=i,s.push(i)}return Zr(o_,[t,s]),e||Zm(t),s}const S_=ua((function(t,e,i){return!ch()&&function(t,e,i,n,s){let r=!1;for(const o of t)Zg(o,e,i,n,s)&&(r=!0);return r}(zh(),t,e.x,e.y,i)})),k_=ua((function(t,e){return function(t,e,i){let n=t.length-1;if(n<2)return!1;const s=e?"y":"x";t.sort(((t,e)=>t.globalBounds.middle[s]-e.globalBounds.middle[s]));const r=t[0].globalBounds.middle[s],o=(t[n].globalBounds.middle[s]-r)/n;let a=!1;for(let l=1;l<n;l++){const n=Math.round(1e4*(r+l*o-t[l].globalBounds.middle[s]))/1e4;if(0===n)continue;const c=e?new ce(0,n):new ce(n,0);Yg(t[l],c,i)&&(a=!0)}return a}([...zh()],t,e)})),__=ua((function(t,e){const i=e?Bg:Ug;return function(t){if(ch())return!1;let e=!1;for(const i of zh())t(i)&&(e=!0);return e}((e=>i(e,t.x,t.y)))})),I_=ua((t=>Vg(zh(),t))),C_=ua((()=>Hg(zh(),{x:1,y:-1}))),L_=ua((()=>Hg(zh(),{x:-1,y:1}))),N_=ua((function(t){return function(t,e,i){let n=!1;for(const s of t)!bd(s,e)||Ld(s,e,i)&&(n=!0);return n&&e.groups&&Cd(e.groups),n}(zh(),$d,t)})),j_=ua((function(){if(ch())return!1;const t=oh();return!(!t.isElement&&!t.isLayer)&&(zo(),function(t,e){let i=!1,n=!1;for(const s of t)(s.isElement||s.isLayer)&&s.locked!==e&&(s.locked=e,i=!0,!n&&nv(s)&&(n=!0));return n&&Um(),i}(rh(),!t.locked))})),z_=ua((function(){return!ch()&&(zo(),function(t,e){let i=!1,n=!1;for(const s of t)s.hidden!==e&&(s.hidden=e,i=!0,!n&&nv(s)&&(n=!0));return n&&Um(),i}(rh(),!oh()?.hidden))})),P_=ua((function(){if(ch())return!1;const t=function(t){const e=[];for(const i of t){const t=Jm(i);t&&e.push(t)}return e}(rh());return!!t.length&&(zo(),gh(t),!0)})),T_=ua((()=>!ch()&&(zo(),Qm()))),A_=ua((function(t,e){if(ch())return!1;if(zo(),1===lh())return Km(oh(),t,e);const i=yu(ah(),!1,!0);return Km(i.shift(),t,e,i)})),D_=ua((function(){if(ch())return!1;const t=oh();if(!t.isElement)return!1;zo();const e=new Qp;if(t.parent.insertAfter(e,t),function(t,e){const i=[];let n=!1;const s=nv(t);try{$c&&($c.preventAdoptAndAbandon=!0);for(const r of yu([...e],!1,!0))if(t.acceptsChild(r)&&r.acceptsParent(t)){const e=!n&&nv(r);t.appendChild(r),n||!e&&!s||(n=!0),i.push(r)}}finally{$c&&($c.preventAdoptAndAbandon=!1)}n&&Um()}(e,Ph()),!e.hasChildren)return e.remove(),e.dispose(),!1;if(Rg(e,!0),Nu()){const t=[...zu()];let i=!1;for(const n of e.children()){const e=t.indexOf(n);e>=0&&(t.splice(e,1),i=!0)}i&&(t.push(e),Wu(t))}return ph(e,!1),!0})),E_=ua((function(){if(ch())return!1;const t=[...Ph()];if(!t.length)return!1;zo();const e=[];return e.push(...Xm(t,Qp,!0)),e.push(...Xm(t,mg,!0)),!!e.length&&(gh(e),!0)})),O_=ua((function(){if(ch())return!1;if(!oh().isElement)return!1;const t=[...Ph()];if(0===t.length)return Sy("Selection is empty","info"),!1;if(1===t.length){const e=t[0];if(e instanceof ag)return!1;if(!(e.isRenderable&&e.parent instanceof mg))return Sy("Select at least two objects","info"),!1;zo();const i=U_(e);return!!i&&(ph(i,!1),!0)}if(!wu(t))return Sy("Selected objects must have the same parent","warning"),!1;zo();const e=B_(t,!0,!1);return e?(ph(e,!1),!0):(Sy("Selection cannot not be converted to mask","warning"),!1)})),W_=ua((function(){if(ch())return!1;if(!oh().isElement)return!1;const t=[...Ph()];if(0===t.length)return Sy("Selection is empty","info"),!1;if(1===t.length){const e=t[0];if(!($m(e)&&e.parent instanceof mg))return Sy("Select at least two objects","info"),!1;zo();const i=$_(e);return!!i&&(ph(i),!0)}if(!wu(t))return Sy("Selected objects must have the same parent","warning"),!1;zo();const e=B_(t,!1,!1);return e?(ph(e,!1),!0):(Sy("Selection cannot not be converted to clip-path","warning"),!1)})),R_=ua((function(){if(ch())return!1;if(!oh().isElement)return!1;let t=[...Th($m)];if(0===t.length)return!1;if(!wu(t))return Sy("Selected objects must have the same parent","warning"),!1;zo(),Mh(),yu(t,!1,!0);const e=t[t.length-1],i=new mg;e.parent.insertAfter(i,e),i.insertAdjacentNodes("append",...t);for(const e of t){const t=Jm(e);t&&(t.title=null,$_(t)||(t.remove(),t.dispose()))}return Ou(i,!1),gh(t),!0}));function B_(t,e=!1,i=!0){if(t.length<2)return null;if(i&&!wu(t))return null;let n;yu(t,!1,!0);for(let i=t.length-1;i>=0;i--)if(e?t[i].isRenderable:$m(t[i])){n=t[i];break}if(!n)return null;const s=new mg;return n.parent.insertAfter(s,n),s.insertAdjacentNodes("append",...t),e?U_(n):$_(n),s.position=s.anchor=s.localBounds.middle,s}function U_(t,e=!0){if(!t.isRenderable)return null;const i=new ag;return t instanceof Qp?(cv(t,i),uv(t,i),i.insertAdjacentNodes("append",...t.children()),qm(t,i,e),Zm(t)):(t.insertAdjacentNodes(e?"before":"after",i),i.insertAdjacentNodes("append",t)),Um(),i}function $_(t,e=!0){if(!$m(t))return null;const i=ov(t);if(!i)return null;const n=new ng(es.fromSkPath(i,!0),t.id);return n.fillRule=t.fillRule,cv(t,n),uv(t,n),qm(t,n,e),Zm(t),n}const F_=ua((()=>{if(mm())return!1;zo();let t=!1;const e=[];for(const[i,n]of xm())gv(i)?kv(i,n)&&(t=!0,i.nodes.length||e.push(i)):Pv(i)?Dv(i,n)&&(t=!0,i.points.length||e.push(i)):Tv(i)&&n.size>=2&&e.push(i);return t&&ym(),e.length&&Ym(e),t})),V_=ua((t=>{if(mm())return!1;let e=!1;for(const[i,n]of xm())gv(i)&&xv(i,t,n)&&(e=!0);return e}));function H_(t){return new Promise((function(e,i){t.oncomplete=t.onsuccess=function(){return e(t.result)},t.onabort=t.onerror=function(){return i(t.error)}}))}function G_(t,e){var i=indexedDB.open(t);i.onupgradeneeded=function(){return i.result.createObjectStore(e)};var n=H_(i);return function(t,i){return n.then((function(n){return i(n.transaction(e,t).objectStore(e))}))}}var Z_;function Y_(){return Z_||(Z_=G_("keyval-store","keyval")),Z_}function Q_(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y_())("readwrite",(function(i){return i.put(e,t),H_(i.transaction)}))}let J_=null;function q_(){return J_??=G_("expressive","vars")}async function K_(t){let e=await function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y_())("readonly",(function(e){return H_(e.get(t))}))}("recentProjects",q_())||[];return t&&e.length>0&&(e=e.filter((e=>null!=e.handle&&t.name!==e.handle.name))),e}async function X_(t){const e={title:($c.title||"").trim(),handle:t,date:new Date},i=await K_(t);i.unshift(e),i.splice(20),await Q_("recentProjects",i,q_())}class tI{#ka=[];#_a=!1;#Ia=new Set;#Ca=!1;get value(){return this._getInternalValue()}equals(t){return this._sameValue(this.value,t)}subscribe(t,e){return!this.#Ca&&!this.#Ia.has(t)&&(this.#Ia.add(t),e&&t(this.value,void 0),!0)}unsubscribe(t){return this.#Ia.delete(t)}invalidate(){this.#Ca||this._invalidate()}#ar=null;invalidateAsync(){this.#Ca||(this.#ar&&(clearTimeout(this.#ar),this.#ar=null),this.#ar=setTimeout(this._invalidate.bind(this),0))}dispose(){this.#Ca||(this._cleanup(),this.#ka.splice(0),this.#ka=void 0,this.#Ia.clear(),this.#Ia=void 0,this.#Ca=!0)}_sameValue(t,e){return t===e}_invalidate(){this._notifySubscribers(this._getInternalValue())}_notifySubscribers(t,e=t){if(0!==this.#Ia.size&&(this.#ka.push(t),!this.#_a)){this.#_a=!0;do{t=this.#ka.shift();for(const i of this.#Ia)i(t,e);e=t}while(this.#ka.length>0);this.#_a=!1}}_change(t,e){const i=this._getInternalValue();return!(e&&this._sameValue(i,t)||(this._setInternalValue(t),this._notifySubscribers(t,i),0))}}class eI extends tI{set value(t){this._change(t,!0)}get value(){return this._getInternalValue()}change(t,e=!0){return this._change(t,e)}update(t,e=!0){return this._change(t(this.value),e)}}class iI extends eI{constructor(t){super(),this._value=t}_getInternalValue(){return this._value}_setInternalValue(t){this._value=t}_cleanup(){this._value=void 0}}class nI extends iI{toggle(){return this._change(!this.value,!1)}}function sI(t){return t.value}const rI=new iI(null),oI=new nI(!1),aI=new nI(!1);function lI(){aI.change(Qo())}Yr(io,lI),Yr(eo,lI),Yr(no,lI);const cI=new iI("");function uI(){cI.change($c?.title||"")}Yr(eo,uI),Yr(io,uI);const hI=new class extends tI{constructor(t,...e){super(),this._stores=[],this._storesSubscribers=[],this._currentValues=[],this._compute=t;for(let t=0;t<e.length;t++){this._stores.push(e[t]),this._currentValues.push(e[t].value);const i=this.createSubscriber(t);e[t].subscribe(i),this._storesSubscribers.push(i)}this._value=this._compute(...this._currentValues)}get storeValues(){return this._stores.map(sI)}createSubscriber(t){return e=>{e!==this._currentValues[t]&&(this._currentValues[t]=e,this._change(this._compute(...this._currentValues),!0))}}_getInternalValue(){return this._value}_setInternalValue(t){this._value=t}_invalidate(){const t=this._value;this._value=this._compute(...this.storeValues),this._notifySubscribers(this._value,t)}_cleanup(){for(let t=0;t<this._stores.length;t++)this._stores[t].unsubscribe(this._storesSubscribers[t]);this._stores.splice(0),this._storesSubscribers.splice(0),this._currentValues.splice(0),this._value=void 0}}(((t,e)=>{if(!e)return t;const i=e.name;return!t||i.toLocaleLowerCase().startsWith(t.toLocaleLowerCase())?i:`${i} (${t})`}),cI,rI),dI=new nI(!0),fI=new iI("HEX"),pI=new nI(!1),gI=new nI(!1),mI=new iI(null);new iI("appearance");const vI=new nI(!1);Yr(eo,(t=>{0===t&&vI.change(!1)}));const yI="animator",xI="Expressive Animator",bI="1.1.1",wI="https://expressive.app",MI="eaf",SI=`.${MI}`;Eo="expressive/animator";const kI=`utm_source=${yI}-app&utm_medium=dialog`,_I=`${wI}/expressive-${yI}/?${kI}`,II=`https://www.youtube.com/@expressiveapps/?${kI}`,CI=`${wI}/account/?${kI}`,LI=`${wI}/store/try-${yI}/?${kI}`,NI=`${wI}/store/buy-${yI}/?${kI}`,jI=`/assets/${yI}`,zI=[{description:`${xI} files`,accept:{"application/vnd.expressive.animator":[SI]}}],PI=[],TI=[];function AI(){0!==WebGLBuffAddr0xeb273.valueOf()&&window.open(window.location.href,"_blank","resizable")}const DI=ua((async function(t=!1){if(0===WebGLBuffAddr0x4d565.valueOf())return;if(!t&&void 0===await ZI())return;const e=await async function(){qI??=document.createElement("es-new-project-dialog-content"),KI??=document.createElement("es-create-project-settings");void 0===JI&&(JI=await async function(t){let e;try{e=await(await fetch(`${t}/list.json`)).json()}catch{return null}for(const i of e)i.img=`${t}/${i.img}`,i.url=`${t}/${i.url}`;return e}("/assets/animator/samples"));let t=await _y(qI,{open:YI,settings:KI,recent:await K_(rI.value),samples:JI});return t?(FileSystemFileHandle,t):null}();e&&(e instanceof FileSystemFileHandle?await Ly(QI(e),"Opening project...",200):"string"==typeof e?await Ly(async function(t){let e;try{e=await SM(await(await fetch(t)).arrayBuffer())}catch{return Sy("Failed to open project","error"),!1}return tC(e),!0}(e),"Opening project...",300):tC(e))})),EI=ua((async function(t,e){0!==WebGLBuffAddr0xc58a6.valueOf()&&(e||void 0!==await ZI())&&await Ly(QI(t),"Opening project...",100)})),OI=zt(WI=async function(t){return 0!==WebGLBuffAddr0x7d6b8.valueOf()&&QI(t)})?async function(...t){aa();try{return await WI(...t)}finally{la()}}:function(...t){aa();try{return WI(...t)}finally{la()}};var WI;const RI=ua((async function(t){0!==WebGLBuffAddr0x8aafd.valueOf()&&await Ly(HI(t),"Saving project...",1e3)})),BI=ua((async function(t){return 0!==WebGLBuffAddr0xd3bd3.valueOf()&&Ly(async function(t){const e=await YI(t??TI);return!!e&&(zo(),wM(e))}(t),"Importing...",1e3)})),UI=ua((()=>(zo(),function(){const t=new Cg;return t.title="Layer "+([...$c.children()].length+1),$c.appendChild(t),Um(),Ou(null),ph(t),!0}()))),$I=ua((t=>!ch()&&(zo(),function(t){const e=[];for(const i of rh())if(i.isFilter)e.push(i.parent.insertAfter(t(),i));else if(i.isFilterContainer)e.push(i.appendChild(t()));else if(i.supportsFilters&&(i.isLayer||i.isElement)){const n=i;n.filters||(n.filters=new vu),e.push(n.filters.appendChild(t()))}return 0!==e.length&&(Um(),gh(e),!0)}(t)))),FI=ua((()=>{Zo()&&(Fo--,Ko(1))})),VI=ua((()=>{Yo()&&(Fo++,Ko(2))}));async function HI(t){oI.change(!0);let e=rI.value;if(t||!e)try{if(e=await window.showSaveFilePicker({id:"saveProject",suggestedName:XI($c?.title||"New project",MI),types:zI}),null==e)return!1;rI.change(e)}catch(t){return oI.change(!1),!1}try{const t=await async function(){const t={version:Z,type:Eo};return new ReadableStream({start:async e=>{e.enqueue(new Uint32Array([1702377317]).buffer);for(const e of[mo,vo])for(const i of e)i.serialization&&await i.serialization.serialize.begin(t);Uo(e,1,await mt(JSON.stringify(t)))},pull:async t=>{for(const e of[mo,vo])for(const i of e){const e=i.serialization;if(e){for await(const i of e.serialize.items())Uo(t,e.marker,i);await e.serialize.end()}}t.enqueue(new Uint8Array([239]).buffer),t.close()}})}();await t.pipeTo(await e.createWritable()),function(){const t=Vo.length;if(t&&!Vo[Fo][4]){for(let e=0;e<t;e++)Vo[e][4]=Fo===e;Zr(no)}}()}catch(t){return Sy("Failed to save project","error"),console.error(t),!1}finally{oI.change(!1)}return await X_(e),!0}const GI={message:"Project contains unsaved changes",yes:"Save project",no:"Discard changes",cancel:"Cancel"};async function ZI(){if(Qo())return!1;const t=await jy(GI);return t?Ly(HI(!1),"Saving project...",500):t}async function YI(t){t??=PI;try{const[e]=await window.showOpenFilePicker({id:"openProject",multiple:!1,types:t});return e}catch(t){return null}}async function QI(t){if(!t&&!(t=await YI()))return!1;const e=t.name.endsWith(SI);let i;try{i=e?await SM(t):await async function(t,e){if(t instanceof FileSystemFileHandle){if("file"!==t.kind)return null;t=await t.getFile()}if(e??=yM(t),!mM.has(e))return null;const i=mM.get(e),n=Ao();let s=!0;try{!1===await i(n,t,e)&&(s=!1)}catch{s=!1}return s?(Zr(fM,n),n):(Do(n),null)}(t)}catch(i){return i instanceof DOMException&&"NotFoundError"===i.name?(Sy("File not found","error"),await async function(t){const e=await K_(t);await Q_("recentProjects",e,q_())}(t)):Sy(e?"Failed to open project":"Failed to import project","error"),!1}return i?(tC(i,e?t:null),e&&await X_(t),!0):(Sy("Unsupported file type","error"),!1)}let JI,qI=null,KI=null;function XI(t,e){return t+"."+e}function tC(t,e=null){Ho(t,!0),rI.change(e),Hk()}const eC=[];let iC=null;async function nC(){0===WebGLBuffAddr0xb7b92.valueOf()&&(await rC(),0===WebGLBuffAddr0xa62a6.valueOf())||(iC??=document.createElement("es-export-dialog-content"),await _y(iC,eC))}let sC=null;async function rC(t){sC??=document.createElement("es-upgrade-dialog-content"),await _y(sC,t)}let oC=null;async function aC(){return oC??=document.createElement("es-about-dialog-content"),_y(oC)}const lC=ua((t=>(t=t.trim().substring(0,128))!==$c.title&&(zo(),$c.title=t,!0))),cC=ua(((t,e)=>{const i=Dk();return n=new Ve(i.x,i.y,t||i.width,e||i.height),n??=Ve.ZERO,!(!(Tk?jk.setItemBounds(zk,n):qo(Nk,n))||(Rl(),0));var n})),uC=ua((t=>!!mk(t)&&(xk()&&Rl(),!0))),hC=new Map([["layer","expr:layer"],["rect","expr:rectangle-tool"],["ellipse","expr:ellipse"],["star","expr:star-tool"],["regular-polygon","expr:polygon"],["poly","expr:polyline-tool"],["line","expr:line-tool"],["path","expr:path"],["symbol","expr:symbol"],["group","workflow:Folder"],["clip-group","workflow:Crop"],["clip-path","expr:clip-path"],["mask","workflow:Preset"],["text","expr:text-tool"],["text-style","workflow:TextStyle"],["image","workflow:Image"],["filter-container","workflow:Effects"],["filter:blur","workflow:Blur"],["filter:color-adjust","workflow:Contrast"],["filter:drop-shadow","workflow:TrimPath"]]);function dC(t){return _u.get(t)??"Unknown"}function fC(t){return hC.get(t)??"expr:unknown"}function pC(t){const e=t.title;return null!=e&&""!==e?e:_u.get(t.type)??"Unknown"}function gC(t){return hC.get(t.type)??"expr:unknown"}let mC=(()=>{let t,e,i,n=qx,s=[],r=[],o=[],a=[],l=[],c=[];return class extends n{static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[db({reflect:!0,type:Boolean})],e=[db({reflect:!1,type:Array})],i=[db({reflect:!1,type:String})],ab(this,null,t,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:u},s,r),ab(this,null,e,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:u},o,a),ab(this,null,i,{kind:"accessor",name:"position",static:!1,private:!1,access:{has:t=>"position"in t,get:t=>t.position,set:(t,e)=>{t.position=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#Pn=lb(this,s,!1);get disabled(){return this.#Pn}set disabled(t){this.#Pn=t}#ss=(lb(this,r),lb(this,o,void 0));get items(){return this.#ss}set items(t){this.#ss=t}#La=(lb(this,a),lb(this,l,"bottom-right"));get position(){return this.#La}set position(t){this.#La=t}#Na=(lb(this,c),null);get#ja(){if(null==this.#Na)for(const t of this.items)if(null!=t&&"object"==typeof t){this.#Na=t;break}return this.#Na}set#ja(t){this.#Na!==t&&(this.#Na=t,this.requestUpdate())}render(){const t=this.#ja;return Px`
            <cc-action-group compact>
                <cc-action-button @click=${this.#cs} .disabled=${this.disabled||t.disabled} title=${t.title}>
                    <cc-icon .name=${t.icon}></cc-icon>
                </cc-action-button>
                <cc-action-button @click=${this.#za} .disabled=${this.disabled}>
                        <cc-css-icon name="ChevronDown"></cc-css-icon>
                </cc-action-button>
            </cc-action-group>
        `}async#za(t){const e=await ky(this.items,t.target,this.position);e&&(this.#ja=e)}#cs(t){const e=this.#ja;e?.action?.(e,t)}}})();const vC=t=>(t=>null!=t?._$litType$?.h)(t)?t._$litType$.h:t.strings,yC=Fb(class extends Vb{constructor(t){super(t),this.et=new WeakMap}render(t){return[t]}update(t,[e]){const i=fw(this.it)?vC(this.it):null,n=fw(e)?vC(e):null;if(null!==i&&(null===n||i!==n)){const e=xw(t).pop();let n=this.et.get(i);if(void 0===n){const t=document.createDocumentFragment();n=Jx(Ax,t),n.setConnected(!1),this.et.set(i,n)}yw(n,[e]),gw(n,void 0,e)}if(null!==n){if(null===i||i!==n){const e=this.et.get(n);if(void 0!==e){const i=xw(e).pop();(t=>{t._$AR()})(t),gw(t,void 0,i),yw(t,[i])}}this.it=e}else this.it=void 0;return this.render(e)}});let xC=(()=>{let t,e,i,n,s,r,o,a,l=qx,c=[],u=[],h=[],d=[],f=[],p=[],g=[],v=[],y=[],x=[],b=[],w=[],M=[],S=[],k=[];return class extends l{static{const m="function"==typeof Symbol&&Symbol.metadata?Object.create(l[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!1})],e=[db({type:Boolean,reflect:!1})],i=[db({type:String,reflect:!1})],n=[db({type:Boolean,reflect:!1,attribute:"eye-dropper"})],s=[db({type:Boolean,reflect:!1})],r=[db({type:Boolean,reflect:!0})],o=[db({type:Boolean,reflect:!1})],a=[db({type:Object,reflect:!1,converter:t=>se.parse(t),noAccessor:!0})],ab(this,null,t,{kind:"accessor",name:"text",static:!1,private:!1,access:{has:t=>"text"in t,get:t=>t.text,set:(t,e)=>{t.text=e}},metadata:m},u,h),ab(this,null,e,{kind:"accessor",name:"alpha",static:!1,private:!1,access:{has:t=>"alpha"in t,get:t=>t.alpha,set:(t,e)=>{t.alpha=e}},metadata:m},d,f),ab(this,null,i,{kind:"accessor",name:"format",static:!1,private:!1,access:{has:t=>"format"in t,get:t=>t.format,set:(t,e)=>{t.format=e}},metadata:m},p,g),ab(this,null,n,{kind:"accessor",name:"eyeDropper",static:!1,private:!1,access:{has:t=>"eyeDropper"in t,get:t=>t.eyeDropper,set:(t,e)=>{t.eyeDropper=e}},metadata:m},v,y),ab(this,null,s,{kind:"accessor",name:"formatter",static:!1,private:!1,access:{has:t=>"formatter"in t,get:t=>t.formatter,set:(t,e)=>{t.formatter=e}},metadata:m},x,b),ab(this,null,r,{kind:"accessor",name:"thumbnail",static:!1,private:!1,access:{has:t=>"thumbnail"in t,get:t=>t.thumbnail,set:(t,e)=>{t.thumbnail=e}},metadata:m},w,M),ab(this,null,o,{kind:"accessor",name:"addSlot",static:!1,private:!1,access:{has:t=>"addSlot"in t,get:t=>t.addSlot,set:(t,e)=>{t.addSlot=e}},metadata:m},S,k),ab(this,null,a,{kind:"setter",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,set:(t,e)=>{t.value=e}},metadata:m},null,c),m&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})}#Js=(lb(this,c),lb(this,u,!0));get text(){return this.#Js}set text(t){this.#Js=t}#Pa=(lb(this,h),lb(this,d,!0));get alpha(){return this.#Pa}set alpha(t){this.#Pa=t}#Ta=(lb(this,f),lb(this,p,"HEX"));get format(){return this.#Ta}set format(t){this.#Ta=t}#Aa=(lb(this,g),lb(this,v,!0));get eyeDropper(){return this.#Aa}set eyeDropper(t){this.#Aa=t}#Mr=(lb(this,y),lb(this,x,!0));get formatter(){return this.#Mr}set formatter(t){this.#Mr=t}#Da=(lb(this,b),lb(this,w,!1));get thumbnail(){return this.#Da}set thumbnail(t){this.#Da=t}#Ea=(lb(this,M),lb(this,S,!1));get addSlot(){return this.#Ea}set addSlot(t){this.#Ea=t}#Oa=(lb(this,k),{h:0,s:0,v:0,a:1});#tr;get value(){return this.#tr}set value(t){if(!(t instanceof se)||this.#tr&&t.equals(this.#tr))return;const e=this.#tr;this.#tr=t;const[i,n,s]=function(t,e,i){const n=Math.max(t,e,i),s=n-Math.min(t,e,i),r=[0,0,n];return 0!==s&&(r[0]=n===t?(e-i)/s%6:n===e?2+(i-t)/s:4+(t-e)/s,r[0]=m(Math.round(60*r[0]))),0!==n&&(r[1]=s/n),r}(t.r/255,t.g/255,t.b/255),r=this.#Oa;r.a=t.a,r.v=Math.round(100*s)/100,0===s&&0===r.v||0===n&&0===r.s||(360===r.h&&0===i||(r.h=i),r.s=Math.round(100*n)/100),this.requestUpdate("value",e)}#vs=new zb;connectedCallback(){super.connectedCallback(),this.#vs.connect(this)}disconnectedCallback(){super.disconnectedCallback(),this.#vs.disconnect()}render(){const t=this.addSlot?Px`<slot></slot>`:Ax;return this.text?this.thumbnail?[this.#Wa(),this.#Ra(),t]:[this.#Ba(),this.#Wa(),t]:[this.#Ba(),t]}#Ra(){return Px`<cc-popover id="popover">${this.#Ba()}</cc-popover>`}#Ba(){return Px`<div id="color-container">
            ${yC(this.#Ua())}
            ${this.alpha?yC(this.#$a()):Ax}
    </div>`}#Ua(){const t=this.#Oa;return Px`<cc-color-wheel
            .hue=${t.h}
            .saturation=${t.s}
            .brightness=${t.v}
            tip
            @start=${this.#Fa}
            @end=${this.#Va}
            @update=${this.#Ha}
        ></cc-color-wheel>`}#$a(){const t=this.#tr;return Px`<cc-alpha-slider
            .value=${this.#Oa.a}
            .color=${`rgb(${t.r}, ${t.g}, ${t.b})`}
            tip
            vertical
            @start=${this.#Fa}
            @end=${this.#Va}
            @update=${this.#Ga}
        ></cc-alpha-slider>`}#Wa(){return Px`
            <es-color-text
                .value=${this.#tr}
                .format=${this.format}
                .thumbnail=${this.thumbnail}
                .alpha=${this.alpha}
                .formatter=${this.formatter}
                .eyeDropper=${this.eyeDropper}
                @change=${this.#Za}
                @thumb=${this.#Ya}
                compact
            ></es-color-text>
        `}async#Ya(t){const e=t.target.shadowRoot.getElementById("thumbnail");e.setAttribute("selected",""),await this.shadowRoot.querySelector("#popover").open(this,0,.5,-1,0,-12,0),e.removeAttribute("selected")}#Ha(t){const e=t.detail;this.#Oa.h=e.h,this.#Oa.s=e.s,this.#Oa.v=e.v,this.#Qa(this.#Oa)}#Ga(t){this.#Oa.a=t.detail,this.#Qa(this.#Oa)}#Qa(t){this.#po(se.fromHSVA(t.h,t.s,t.v,t.a))}#Za(t){this.#po(t.detail),this.#vs.end()}#po(t,e=!0){this.#tr&&t.equals(this.#tr)?e&&this.requestUpdate():(this.#vs.started||this.#vs.start(this.#tr),this.value=t,this.#vs.update(t))}#Fa(){this.#vs.start(this.#tr)}#Va(){this.#vs.end()}static{this.styles=Jy`
        :host {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        :host([thumbnail]) {
            gap: 0;
        }

        #popover #color-container {
            padding: 24px 16px;
        }

        #color-container {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;

            gap: 16px;
            min-width: 192px;
        }
    `}}})();const bC=[{title:"HEX",value:"HEX"},{title:"RGB",value:"RGB"},{title:"HSV",value:"HSV"},{title:"HSL",value:"HSL"}],wC="undefined"!=typeof EyeDropper;let MC=(()=>{let t,e,i,n,s,r,o=qx,a=[],l=[],c=[],u=[],h=[],d=[],f=[],p=[],g=[],m=[],v=[],y=[];return class extends o{static{const x="function"==typeof Symbol&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;t=[db({type:Object,reflect:!1,converter:t=>se.parse(t)})],e=[db({type:String,reflect:!1})],i=[db({type:Boolean,reflect:!1})],n=[db({type:Boolean,reflect:!1,attribute:"eye-dropper"})],s=[db({type:Boolean,reflect:!1})],r=[db({type:Boolean,reflect:!1})],ab(this,null,t,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:x},a,l),ab(this,null,e,{kind:"accessor",name:"format",static:!1,private:!1,access:{has:t=>"format"in t,get:t=>t.format,set:(t,e)=>{t.format=e}},metadata:x},c,u),ab(this,null,i,{kind:"accessor",name:"alpha",static:!1,private:!1,access:{has:t=>"alpha"in t,get:t=>t.alpha,set:(t,e)=>{t.alpha=e}},metadata:x},h,d),ab(this,null,n,{kind:"accessor",name:"eyeDropper",static:!1,private:!1,access:{has:t=>"eyeDropper"in t,get:t=>t.eyeDropper,set:(t,e)=>{t.eyeDropper=e}},metadata:x},f,p),ab(this,null,s,{kind:"accessor",name:"formatter",static:!1,private:!1,access:{has:t=>"formatter"in t,get:t=>t.formatter,set:(t,e)=>{t.formatter=e}},metadata:x},g,m),ab(this,null,r,{kind:"accessor",name:"thumbnail",static:!1,private:!1,access:{has:t=>"thumbnail"in t,get:t=>t.thumbnail,set:(t,e)=>{t.thumbnail=e}},metadata:x},v,y),x&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:x})}#is=lb(this,a,void 0);get value(){return this.#is}set value(t){this.#is=t}#Ta=(lb(this,l),lb(this,c,"HEX"));get format(){return this.#Ta}set format(t){this.#Ta=t}#Pa=(lb(this,u),lb(this,h,!0));get alpha(){return this.#Pa}set alpha(t){this.#Pa=t}#Aa=(lb(this,d),lb(this,f,!0));get eyeDropper(){return this.#Aa}set eyeDropper(t){this.#Aa=t}#Mr=(lb(this,p),lb(this,g,!0));get formatter(){return this.#Mr}set formatter(t){this.#Mr=t}#Da=(lb(this,m),lb(this,v,!1));get thumbnail(){return this.#Da}set thumbnail(t){this.#Da=t}render(){return Px`<cc-action-group compact>
            ${this.thumbnail?yC(this.#Ra()):Ax}
            ${wC&&this.eyeDropper?yC(this.#Ja()):Ax}
            ${yC(this.#qa())}
            ${this.formatter?yC(this.#Ka()):Ax}
        </cc-action-group>`}#Ra(){return Px`<cc-color-thumb id="thumbnail" @click=${this.#Xa} .color=${this.value.rgba} input-face></cc-color-thumb>`}#qa(){return Px`<cc-text-input
            id="input"
            style="flex: 1"
            .value=${this.#tl(this.value)}
            @change=${this.#el}
            text-center
        ></cc-text-input>`}#el(t){this.#il(se.parse(t.detail,this.alpha?null:1))}#Xa(){this.dispatchEvent(new CustomEvent("thumb",{detail:this.value}))}#il(t){return!(null!=this.value&&this.value.equals(t)||!this.dispatchEvent(new eb(t))||(this.value=t,0))}#Ja(){return Px`<cc-action-button id="eye-dropper" @click=${this.#nl} input-face>
            <cc-icon name="expr:colorpicker-tool"></cc-icon>
        </cc-action-button>`}async#nl(){if(wC)try{const t=new EyeDropper;this.#il(se.parse((await t.open()).sRGBHex,1))}catch{}}#Ka(){return Px`<cc-picker id="format" .value=${this.format} .items=${bC} @change=${this.#sl}></cc-picker>`}#sl(t){this.format=t.detail,this.dispatchEvent(new CustomEvent("color-format",{bubbles:!0,composed:!0,detail:this.format}))}#tl(t){const e=new ie(t);switch(this.alpha||(e.a=1),this.format){case"RGB":return e.toRgbString();case"HSV":return e.toHsvString();case"HSL":return e.toHslString();default:return 1!==e.a?e.toHex8String(!0):e.toHexString(!0)}}static{this.styles=Jy`
:host {height: 24px}
cc-action-group {width: 100%}
#thumbnail {width: 40px}
#format {width: 56px}
`}constructor(){super(...arguments),lb(this,y)}}})(),SC=(()=>{let t,e,i,s=qx,r=[];return class extends s{constructor(){super(...arguments),this.maxHandles=(lb(this,r),50),this.#rl=null,this.#ol=!1,this.#ho=0,this.#al=(t,e)=>{const i=this.#ho===e;return Px`<div class="slider" style=${Zb({"--slider-stop-color":t.color.rgba,"--slider-stop-offset":t.offset.toFixed(6)})}>
            <cc-color-handle
                class="handle"
                data-tip=${Math.round(100*t.offset)+"%"}
                data-index=${e}
                data-selected=${Xx(i)}
            ></cc-color-handle>
        </div>`},this.#ll=null,this.#cl=async t=>{if(t.preventDefault(),!t.isPrimary||0!==t.button)return;b();const e=t.composedPath()[0];if(e.classList.contains("handle"))this.edit=!1,this.#ul(+e.dataset.index),this.#hl=e,this.#ll=setTimeout(this.#dl,100);else{if(this.#fl.length+1>=this.maxHandles)return;const e=this.#pl(t);if(this.#fl.hasOffset(e))return;this.#gl();const i=this.#rl.list.indexOf(this.#rl.addStopColor(e));this.#ul(i),this.dispatchEvent(new CustomEvent("add",{bubbles:!1,composed:!0})),this.#ml(),await this.updateComplete,this.#hl=this.#vl(i),this.#dl()}this.#yl=this.getBoundingClientRect(),C(this.#xl,this.#bl),this.focus(),this.setPointerCapture(t.pointerId)},this.#xl=t=>{this.#a(this.#pl(t))},this.#bl=t=>{if(!t.isPrimary)return;0!==t.button&&t.preventDefault();const e=this.#hl;this.#wl(),this.releasePointerCapture(t.pointerId),L(),e.addEventListener("transitionend",(()=>{this.edit=!1}),{once:!0})},this.#dl=()=>{const t=this.#hl;t&&(t.active=!0,t.parentElement.setAttribute("active",""))},this.#wl=()=>{this.#ll&&(clearTimeout(this.#ll),this.#ll=null);const t=this.#hl;t&&(this.#hl=null,t.active=!1,t.parentElement.removeAttribute("active"))},this.#Dr=()=>{},this.#Er=()=>{this.edit=!1}}static{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[db({type:Boolean,noAccessor:!0})],e=[db({type:Object,noAccessor:!0})],i=[db({type:Object,noAccessor:!0})],ab(this,null,t,{kind:"setter",name:"edit",static:!1,private:!1,access:{has:t=>"edit"in t,set:(t,e)=>{t.edit=e}},metadata:n},null,r),ab(this,null,e,{kind:"setter",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,set:(t,e)=>{t.value=e}},metadata:n},null,r),ab(this,null,i,{kind:"setter",name:"color",static:!1,private:!1,access:{has:t=>"color"in t,set:(t,e)=>{t.color=e}},metadata:n},null,r),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}#tr;#rl;#ol;get edit(){return this.#ol}set edit(t){this.#ol!==t&&(this.#ol=t,t?this.#rl=this.#tr.createWritable():(this.#Ml(),this.#rl=null),this.dispatchEvent(new CustomEvent("edit",{composed:!0,bubbles:!1,detail:t})))}#Ml(){const t=this.#rl.list[this.#ho];return this.#rl.sort(),this.#ul(this.#rl.list.indexOf(t)),this.#rl}#ho;#ul(t){if(t===this.#ho||t<0||t>=this.#fl.length)return;const e=this.#ho;this.#ho=t,this.#vl(e).active=!1,this.dispatchEvent(new CustomEvent("select",{composed:!0,bubbles:!1,detail:t})),this.requestUpdate()}#vl(t){return this.shadowRoot.querySelector(`cc-color-handle[data-index="${t}"]`)}get value(){return this.#tr}set value(t){const e=this.#tr;t!==e&&(this.#tr=t,!this.#rl&&this.#ho>=t.length&&this.#ul(t.length-1),this.dispatchEvent(new CustomEvent("value",{bubbles:!1,composed:!0,detail:this.color})),this.requestUpdate("value",e))}get#fl(){return this.#ol?this.#rl:this.#tr}get color(){return this.#fl.list[this.#ho].color}set color(t){this.edit=!0;const e=this.#fl.list[this.#ho];if(!e.color.equals(t)){const i=e.color;e.color=t,this.#ml(),this.requestUpdate("color",i)}}#a(t,e){const i=this.#fl.list[this.#ho];i&&(e&&(t+=i.offset),t=n(Math.round(100*t)/100),i.offset!==t&&(this.edit=!0,i.offset=t,this.#ml(),this.requestUpdate()))}#ml(t){this.dispatchEvent(new CustomEvent("update",{composed:!0,bubbles:!1,detail:this.#rl.createReadonly(t?null:this.#ho)}))}render(){const t=this.#fl;return t?Px`<div id="wrapper" style=${Zb({"--gradient-bg":this.#ol?vi.stringifyStopColorList(t.list,!0):t.toString()})}>${t.list.map(this.#al)}</div>`:Ax}#al;#hl;#ll;#cl;#xl;#bl;#dl;#wl;#Dr;reverseStops(t){if(this.#gl(),t)this.#rl.reverseColors(),this.#ml();else{const t=this.#rl.list[this.#ho];this.#rl.reverseOffsets();const e=this.#rl.list.indexOf(t);this.#ml(!0),this.#ul(e)}this.edit=!1}removeCurrentHandle(){if(this.#fl.length<=2)return;this.#gl();const t=this.#ho;this.#rl.removeColorAt(t),t>=this.#rl.length&&this.#ul(this.#rl.length-1),this.dispatchEvent(new CustomEvent("remove",{bubbles:!1,composed:!0})),this.#ml(),this.edit=!1}#yl;#pl(t){const e=this.#yl;return e?n(Math.round(100*(t.clientX-e.left)/e.width)/100):0}#gl(){this.#ol&&(this.edit=!1),this.edit=!0}#Er;firstUpdated(){this.#yl=this.getBoundingClientRect(),this.addEventListener("pointerdown",this.#cl),this.addEventListener("keydown",this.#Dr),this.addEventListener("blur",this.#Er)}disconnectedCallback(){this.edit=!1,super.disconnectedCallback()}static{this.styles=Jy`
:host {
    display: flex;
    outline: none !important;
    box-sizing: border-box;
    border-radius: 4px;
    user-select: none;

    --slider-size: 16px;

    width: 100%;
    height: var(--slider-size);

    background: var(--chess-gradient) 50% / var(--slider-size);
    contain: layout;
}

#wrapper {
    display: grid;
    border-radius: inherit;
    background: linear-gradient(to right, var(--gradient-bg));
    width: 100%;
    height: var(--slider-size);
}

.slider {
    grid-area: 1 / 1 / 1 / 1;
    width: 100%;
    height: var(--slider-size);
    transform: translateX(calc(100% * var(--slider-stop-offset)));
    pointer-events: none;
}

.handle {
    --color-handle-bg: var(--slider-stop-color);
    --color-handle-tx: -50%;
    --color-handle-ty: 0;
    pointer-events: all;
}

.slider[active] {
    z-index: 1;
}

.handle[data-selected]:not([active]) {
    --color-handle-border: var(--accent-color-500);
}
`}}})();class kC{constructor(t){this.map=new Map(t)}on(){for(const[t,e]of this.map)t instanceof tI?t.subscribe(e):Yr(t,e)}off(){for(const[t,e]of this.map)t instanceof tI?t.unsubscribe(e):Qr(t,e)}}class _C{#Sl;constructor(t){this.#Sl=new kC(t)}hostConnected(){this.#Sl.on()}hostDisconnected(){this.#Sl.off()}}function IC(t,e){let i;const n=[];for(const s of e)Nt(s)?n.push(s):(i??=()=>t.requestUpdate(),n.push([s,i]));t.addController(new _C(n))}class CC extends Sw{constructor(){super(),IC(this,[eo,Qc])}resolve(){return oh()??$v}}class LC extends sb{constructor(){super(...arguments),this.font="12px -expressive-sans",this.indentSize=16,this.itemPadding=8,this.iconSize=18,this.iconMargin=2,this.smallIconScale=.75,this.textMargin=8,this.textBaselineShift=2,this.previewPercent=.4}updateInternalValues(){super.updateInternalValues(),this.background=this.getColor("background"),this.backgroundHover=this.getColor("background-hover"),this.backgroundSelected=this.getColor("background-selected"),this.separator=this.getColor("separator"),this.text=this.getColor("text")}}class NC extends rb{createTheme(t){return new LC(t)}#kl={type:0,item:null};#_l=new Set;#Il;constructor(){const t=new p;super(t),this.#Il=t,this.dblClickMaxDiff=-1}#tr=null;get value(){return this.#tr}set value(t){t||(t=null),this.#tr!==t&&(this.#tr=t)}#Cl="";get preview(){return this.#Cl}set preview(t){t=t.trim(),this.#Cl!==t&&(this.#Cl=t,this.renderFrame())}#Ll="";get search(){return this.#Ll}set search(t){t=t.trim(),this.#Ll!==t&&(this.#Ll=t,this.refresh(!0))}#Nl=null;get info(){return this.#Nl??=this.#jl()}deactivate(){super.deactivate(),this.#Ll=""}scrollToSelected(){const t=this.#tr;if(!t)return!1;const e=Gs(t);if(!e)return!1;const i=e.family;this.#_l.has(i)||(this.#_l.add(i),this.refresh(!0));let n=this.info.find((t=>t.font.postscriptName===e.postscriptName))?.top;return null!=n&&this.#Il.scrollTo(n,1)}#jl(){let t=[],e=0,i=this.#Ll;if(""===i)for(const i of Bs.values()){if(0===i.length)continue;if(1===i.length){t.push({top:e++,left:0,font:i[0],hasStyles:!1});continue}let n=i.find((t=>"Regular"===t.style||"Roman"===t.style))||i[0];const s=this.#_l.has(n.family);if(t.push({top:e++,left:0,font:n,hasStyles:!0,open:s}),s)for(const n of i)t.push({top:e++,left:1,font:n})}else{i=i.toLowerCase();for(const n of As.values())n.fullName.toLowerCase().includes(i)&&t.push({top:e++,left:0,font:n})}return t}render(t,e,i){const n=this.theme,s=this.#Il.offset;t.fillStyle=n.background,t.fillRect(0,0,e,i);const r=this.#kl,o=this.info,a=o.length,l=Math.trunc(s/n.lineHeight),c=Math.min(l+Math.ceil(i/n.lineHeight),a-1);if(t.save(),l<a&&c>=l){const i=this.#Ll.length>0,a=n.lineHeight/2,h=n.iconMargin+n.iconSize/2,d=this.#Cl||null;t.translate(0,-s);for(let s=l;s<=c;s++){const l=o[s],c=l===r.item,f=l.font.postscriptName===this.#tr;t.save(),t.translate(0,n.lineHeight*l.top),!f||l.hasStyles&&l.open?c&&(t.fillStyle=n.backgroundHover,t.fillRect(0,0,e,n.lineHeight)):(t.fillStyle=n.backgroundSelected,t.fillRect(0,0,e,n.lineHeight));let p=n.itemPadding+l.left*n.indentSize,g=e-n.itemPadding;g-=(e-2*n.itemPadding)*n.previewPercent,t.fillStyle=n.text,t.font=ya?`16px ${l.font.postscriptName}`:`${u=l.font,function(t){if(Ls.has(t.postscriptName))return Ls.get(t.postscriptName);const e=[];let i=t.fullName.toLowerCase();const n=t.family.toLowerCase();i.startsWith(n)&&(i=i.substring(n.length));const s=i.split(" ");for(let t=0;t<s.length;t++){let i=s[t];"extra"!==i&&"ultra"!==i&&"semi"!==i&&"demi"!==i||(t+1<s.length?(i+=s[t+1],t++):i+="bold"),e.push(i)}const r=e.filter((t=>Cs.has(t))).map((t=>Cs.get(t))).join(" ");return Ls.set(t.postscriptName,r),r}(u)} 16px "${l.font.family}"`,t.textBaseline="middle",t.fillText(d??l.font.family,g,a),i||(p+=h,l.hasStyles&&this.renderIcon(t,l.open?"workflow:ChevronDown":"workflow:ChevronRight",n.iconSize,p,a),p+=h),p+=n.textMargin,t.font=n.font,this.renderCenteredText(t,0===l.left?l.hasStyles?l.font.family:l.font.fullName:l.font.style,p,g,n.lineHeight,n.textBaselineShift),t.restore()}}var u;t.restore()}#zl(t,e){const i=this.#kl;return(i.type!==t||i.item!==e)&&(i.type=t,i.item=e,this.setCursor(1===t?"pointer":"default"),!0)}updateHoverInfo(){const t=this.info;if(!t.length)return this.clearHoverInfo();const e=this.mousePosition,i=this.theme,n=this.#Il.offset,s=e.y+n,r=Math.floor(s/i.lineHeight);if(r<0||r>=t.length)return this.clearHoverInfo();const o=t[r];let a=!1;if(o.hasStyles){const t=i.itemPadding+2*i.iconMargin+i.smallIconScale*i.iconSize+i.textMargin;a=e.x<=t}return this.#zl(a?1:2,o)}clearHoverInfo(){return this.#zl(0,null)}handleDblClick(){}handleMouseDown(t){t.preventDefault()}handleMouseMove(t){}handleMouseUp(t){switch(this.#kl.type){case 1:{const t=this.#kl.item.font.family;this.#_l.has(t)?this.#_l.delete(t):this.#_l.add(t),this.refresh(!0)}break;case 2:{const t=this.#kl.item.font.postscriptName;this.#tr=t,Ob(t)}}}invalidate(){this.#Nl=null}get contentHeight(){return this.info.length*this.lineHeight}}class jC extends qx{#Pl;constructor(){super(),this.#Pl=new NC}connectedCallback(){super.connectedCallback(),this.addEventListener("popover-visible",(()=>{this.#Pl.scrollToSelected()}),{once:!0}),this.#Pl.value=this.value,this.#Pl.activate()}disconnectedCallback(){super.disconnectedCallback(),this.#Pl.deactivate(),this.shadowRoot.getElementById("search").value=""}render(){return[Px`
            <cc-text-input size="m" placeholder="Search..." id="search" @update=${this.#Tl}>
                <cc-icon id="search-icon" name="expr:zoom-tool" slot="before"></cc-icon>
            </cc-text-input>
            <cc-text-input size="m" placeholder="Preview..." id="preview" @update=${this.#Al} value=${this.#Pl.preview}></cc-text-input>
            `,this.#Pl.canvas]}#Al(t){this.#Pl.preview=t.detail}#Tl(t){this.#Pl.search=t.detail}static{this.styles=[_b("#wrapper"),Jy`
@container --theme-provider style(--theme: dark) {
    canvas {
        --cc-canvas-background: var(--gray-1000);
        --cc-canvas-background-hover: var(--gray-900);
        --cc-canvas-background-selected: var(--gray-800);
    }
}

@container --theme-provider style(--theme: light) {
    canvas {
        --cc-canvas-background: var(--white);
        --cc-canvas-background-hover: var(--gray-50);
        --cc-canvas-background-selected: var(--gray-100);
    }
}

:host {
    width: 480px;
    height: 640px;
    display: grid;
    grid-template-areas: "search preview" "canvas canvas";
    grid-template-columns: 0.60fr 0.40fr;
    grid-template-rows: 32px auto;
    gap: 0;
    contain: strict;
}

#search {
    grid-area: search;
    box-sizing: border-box;
}

#search-icon {
    margin: 0 3px 0 6px;
}

#preview {
    grid-area: preview;
    padding-left: 0;
}

#search, #preview {
    border-top: none;
    border-left: none;
    border-right: none;
    border-radius: 0;
    background: none !important;
}

canvas {
    grid-area: canvas;
    display: block;
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
    border: none;
    outline: none;
    touch-action: none;
    contain: strict;
    --cc-canvas-line-height: 32;
    --cc-canvas-scroll-size: var(--scrollbar-size);
    --cc-canvas-scroll-color: var(--scrollbar-color);
    --cc-canvas-separator-color: var(--separator-color);
    --cc-canvas-text: var(--text-color-default);
    --cc-canvas-text-selected: var(--accent-color-500);
}


`]}}const zC=Jy`
    #expressive-logo {
        background-image: var(--expressive-app-logo);
        background-repeat: no-repeat;
        background-position: left center;
        width: 100%;
        height: 48px;
        user-select: none;
        pointer-events: none;
    }

    #expressive-logo::before {
        content: "Expressive";
        display: block;
        padding-left: 56px;
        padding-top: 4px;
        font-size: 14px;
        user-select: none;
        pointer-events: none;
    }

    #expressive-logo::after {
        content: var(--expressive-app-name);
        display: block;
        padding-left: 56px;
        font-weight: bold;
        font-size: 18px;
        text-transform: uppercase;
        letter-spacing: 1px;
        user-select: none;
        pointer-events: none;
    }
`;let PC=(()=>{let t,e,i=Xb,n=[],s=[];return class extends i{static{const r="function"==typeof Symbol&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;t=[fb()],ab(this,e={get:cb((function(){return this.#Dl}),"#loading","get"),set:cb((function(t){this.#Dl=t}),"#loading","set")},t,{kind:"accessor",name:"#loading",static:!1,private:!0,access:{has:t=>#El in t,get:t=>t.#El,set:(t,e)=>{t.#El=e}},metadata:r},n,s),r&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})}#Ol=null;#Dl=lb(this,n,!1);get#El(){return e.get.call(this)}set#El(t){return e.set.call(this,t)}render(){return Px`
    <div id="expressive-logo"></div>
    <div id="content">
        <div id="version">Version ${bI}</div>
        <div id="copyright">Copyright © ${(new Date).getFullYear()} Expressive Suite SRL. All rights reserved.</div>
    </div>
    <div id="buttons">
        ${this.#El?Px`<cc-progressbar label="Checking for updates..." indeterminate></cc-progressbar>`:this.#Wl()}
    </div>
`}#Wl(){return Px`
<cc-button @click=${this.#cs} href=${II} variant="secondary" outline>YouTube</cc-button>
<cc-button @click=${this.#cs} href=${_I} variant="secondary" outline>Official page</cc-button>
<div style="flex: 1"></div>
${this.#Ol?this.#Rl(this.#Ol):Px`<cc-button @click=${this.#Bl} variant="primary">Check for updates</cc-button>`}
`}#Rl(t){return t.isDownloaded?"Restart the application to update":t.isAvailable?"The update is downloading":t.isError?"Failed to check for updates":"No updates available"}#cs(t){Mt(t.target.getAttribute("href"))}async#Bl(){this.#El=!0,this.dialog.cancelable=!1;try{await window.api.update.check(),this.#Ol=await window.api.update.status()}finally{this.dialog.cancelable=!0,this.#El=!1}}async init(){this.dialog.cancelable=!0,this.#Ol&&(this.#Ol=null,this.requestUpdate(),await this.updateComplete)}static{this.styles=[zC,Jy`
:host {
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
    width: 440px;
    height: 220px;
    padding: 16px;
}
#content {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 8px;
    font-size: 14px;
}

#buttons {
    display: flex;
    align-items: center;
    gap: 8px;
}

#version {
    font-weight: bold;
}
`]}constructor(){super(...arguments),lb(this,s)}}})();class TC extends Vb{constructor(t){if(super(t),this.it=Ax,2!==t.type)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===Ax||null==t)return this._t=void 0,this.it=t;if(t===Tx)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}}TC.directiveName="unsafeHTML",TC.resultType=1;const AC=Fb(TC);function DC(t,e){navigator.onLine&&(e??={},e.app_name=yI,e.app_version=bI,plausible(t,{props:e}))}function EC(t,e){DC("AppSetupStep",{setup_step_name:t,setup_step_skipped:e?1:0})}let OC;const WC=new Map([[0,"ok"],[1,"aborted"],[2,"error"]]);let RC=null;function BC(t){RC=t}class UC extends Xb{#pe;#mi;#gi=0;get#Ul(){return this.#mi[this.#gi]}next(){this.#gi++,this.requestUpdate()}prev(){this.#gi--,this.requestUpdate()}close(){this.dialog.close()}render(){const t=this.#Ul;return Px`
        <div id="wrapper">${this.#ls(t)}</div>
        <div id="actions">
            <div id="title">${this.#pe}</div>
            <cc-tabs id="tabs" variant="left" bold inert .items=${this.#mi} .value=${this.#gi}></cc-tabs>
            ${this.#Wl(t)}
        </div>`}#ls(t){const e=t.content;return"license"===e.data.type?Px`
            <div id="text-title">${e.title||""}</div>
            <div id="textbox">${AC(e.data.value)}</div>
            `:"action"===e.data.type?Px`
            <img id="image" inert src=${e.data.image}>
            <div id="content-group">
                <div id="content-title">${e.title}</div>
                <div id="content-description">${e.data.description}</div>
            </div>
        `:Px`
            <div style="padding: 1em">
                <h2>${e.title}</h2>
                <p style="margin: 0">${e.data.description}</p>
            </div>
            <div style="padding: 1em">
                <cc-rich-list .items=${[{icon:"workflow:DeviceDesktop",title:"System",value:"auto",description:"Match your OS ambiance"},{icon:"workflow:Light",title:"Light",value:"light",description:"Luminous elegance in every detail"},{icon:"workflow:Moon",title:"Dark",value:"dark",description:"Nocturnal charm unveiled"}]} vertical @change=${t=>Uy(t.detail)} .value=${$y()}></cc-rich-list>
            </div>
        `}async init(t){this.dialog.cancelable=!1,this.#gi=0,this.#pe=t.title,this.#mi=t.items.filter((t=>!t.hidden)),this.#mi.forEach(((t,e)=>t.value=e)),this.requestUpdate(),await this.updateComplete,DC("AppSetupStarted")}#Wl(t){return Px`<div id="buttons">
            <cc-button variant="secondary" outline @click=${this.#$l} .hidden=${!t.secondary}>${t.secondary?.title||""}</cc-button>
            <cc-button variant="accent" @click=${this.#Fl}>${t.primary.title}</cc-button>
        </div>`}async#$l(){const t=this.#Ul;await this.#Vl(t.secondary.action),EC(t.id,!0)}async#Fl(){const t=this.#Ul;await this.#Vl(t.primary.action),EC(t.id,!1)}async#Vl(t){if(!t)return;const e=this.shadowRoot.getElementById("buttons");e.inert=!0;try{await t(this)}finally{e.inert=!1}}static{this.styles=[Jy`
:host {
    width: 640px;
    height: 480px;
    user-select: none;
    display: flex;
    flex-direction: row;
}

#actions, #wrapper, #content-group {
    display: flex;
    flex-direction: column;
}
#wrapper, #content-group {
    flex: 1;
}

#actions {
    box-sizing: border-box;
    width: 270px;
}

#actions, #content-group {
    gap: 8px;
    padding: 16px;
    font-size: 14px;
}

#content-group {
    gap: 4px;
}

#title {
    font-size: 20px;
    font-weight: bold;
}

#text-title {
    font-size: 20px;
    font-weight: bold;
    padding: 16px;
}

#content-title {
    font-weight: bold;
}

#tabs {
    flex: 1;
    --tabs-height: 48px;
}

#buttons {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: flex-end;
    gap: 8px;
}

cc-button[hidden] {
    display: none;
}

#image {
    width: 100%;
    aspect-ratio: 1;
}

#textbox {
    flex: 1;
    scrollbar-gutter: stable !important;
    margin: 0 0 16px 16px;
}

#textbox {
    user-select: text;
}
#textbox p {
    margin: 0.5em 0;
    font-size: 0.75rem;
    word-break: break-word;
}
#textbox p.lead {
    margin-top: 0;
}
#textbox h2 {
    margin: 0.5em 0;
    font-size: 1rem;
}
#textbox h4 {
    margin: 0.25em 0;
    font-size: 0.8rem;
}
    `,_b("#textbox")]}}const $C=Intl.NumberFormat("en",{notation:"compact",style:"unit",unit:"byte",unitDisplay:"narrow"});class FC extends qx{showPreview(t){this.dispatchEvent(new CustomEvent("es-export-preview",{detail:t,bubbles:!0,composed:!0}))}getSuggestedName(t,e){return`${t?t.replace(/[\/\\:]/g,""):"export"}.${e}`}async getFileHandle(t){try{return t=t?{id:"export",...t}:{id:"export"},await window.showSaveFilePicker(t)||null}catch{return null}}async getDirHandle(t){try{return await window.showDirectoryPicker({id:"export",mode:"readwrite",startIn:t})||null}catch{return null}}static{this.styles=[Jy`
    .label {width: 130px;}
    .heading {font-weight: bold; margin: 8px 0;}
    .input-group {
        gap: 4px;
    }
    .input-group :first-child {
        font-size: 10px;
        margin-left: 8px;
    }
`]}}class VC extends Xb{#Hl;#Gl=!1;#Zl;#Yl;#Ql;#Jl;constructor(){super(),this.#Zl=document.createElement("cc-progressbar"),this.#Zl.id="progress",this.#Zl.inert=!0,this.#Yl=document.createElement("cc-dynamic-container"),this.#Yl.id="container",this.#Yl.classList.add("inert"),this.#Ql=document.createElement("cc-rich-list"),this.#Ql.id="rich-list",this.#Ql.classList.add("inert"),this.#Ql.addEventListener("change",this.#ql),this.#Jl=document.createElement("div"),this.#Jl.id="export-result",this.#Jl.inert=!0}async init(t){this.dialog.cancelable=!0,this.#Gl=!1,this.#Ql.items=this.#Yl.items=t,this.#Hl||(this.#Ql.value=this.#Yl.value=t[0].value);const e=this.#Yl.current;e&&e.initialize(),this.#Kl(null),this.#Cl=null,this.requestUpdate(),await this.updateComplete}render(){return Px`
            <div id="left-panel" class="not-preview">${this.renderLeft()}</div>
            <div class="panel-separator not-preview"></div>
            <div id="right-panel" class="not-preview">
                <div id="title">Export settings</div>
                ${this.renderRight()}
                ${this.#Yl}
                <div id="actions">
                    ${this.#Xl()}
                </div>
            </div>
            <cc-flex-col id="preview-content">${this.#tc()}</cc-flex-col>
        `}#Xl(){return this.#Gl?Px`${this.#Zl}<cc-button variant="secondary" @click=${this.#ec}>Abort</cc-button>`:Px`
            ${this.#Jl}
            ${this.#ic()}
            <cc-button variant="secondary" @click=${this.#Jn}>Cancel</cc-button>
            <cc-button variant="accent" @click=${this.#nc}>Export</cc-button>
        `}#ic(){return this.#Cl?Px`<cc-button variant="secondary" outline @click=${this.#sc}>View exported file</cc-button>`:Ax}#tc(){if(!this.#rc)return Ax;const{type:t,width:e,height:i,file:n}=this.#Cl;return Px`
<cc-flex-row class="preview-container" style=${Zb({"--aspect":`${e} / ${i}`})} flex>
    ${this.#oc(this.#rc,t)}
</cc-flex-row>
<cc-flex-row style="justify-content: space-between">
    <div>${n.name} (${$C.format(n.size)})</div>
    <cc-button variant="secondary" outline @click=${this.#ac}>Back to export</cc-button>
</cc-flex-row>
`}#oc(t,e){switch(e){case"svg":return Px`<object class="preview-object" data="${t}" type="image/svg+xml"></object>`;case"image":return Px`<img class="preview-object" src="${t}">`;case"video":return Px`<video class="preview-object" autoplay controls loop src="${t}"></video>`}return Ax}#sc(){this.#Cl&&(this.classList.add("preview"),this.dialog.cancelable=!1,this.#rc=URL.createObjectURL(this.#Cl.file),this.requestUpdate())}#ac(){URL.revokeObjectURL(this.#rc),this.#rc=null,this.#Cl=null,this.dialog.cancelable=!0,this.requestUpdate(),this.classList.remove("preview")}#Cl=null;#rc;#lc=t=>{this.#Cl=t.detail,this.requestUpdate()};renderFormats(){return this.#Ql}#ql=t=>{if(!t.handle(0!==WebGLBuffAddr0xa5932.valueOf(),(()=>rC())))return;this.#Kl(null);const e=t.detail;this.#Hl=e,this.#Ql.value=e,this.#Yl.value=e,this.#Yl.current?.initialize(),this.#Cl&&(this.#Cl=null,this.requestUpdate())};async#ec(){await(this.#Yl.current?.abort())}#Jn(){this.dialog.close()}async#nc(){if(this.#Gl)return;const t=this.#Yl.current;if(!t||!t.validate())return;let e;this.#Cl=null,this.#Gl=!0,this.#cc(0,"Exporting..."),this.requestUpdate(),await this.updateComplete,this.#uc(!0),Py("wait");try{e=await t.execute(this.#cc)}catch{e=2}Py(null),this.#uc(!1),this.#Kl(e),this.#Gl=!1,function(t,e){let i;RC&&(i=RC.toString(),RC=null),DC("AppExportCompleted",{export_type:t,export_status:WC.get(e),export_error:i})}(t.lastExecutedType,e),this.requestUpdate()}#Kl(t){const e=this.#Jl;switch(t){case 2:e.setAttribute("data-type","error"),e.textContent="Export failed";break;case 1:e.setAttribute("data-type","aborted"),e.textContent="Export aborted";break;case 0:e.setAttribute("data-type","success"),e.textContent="Export complete";break;default:e.removeAttribute("data-type"),e.textContent=""}}#cc=(t,e)=>{const i=this.#Zl;e&&(i.label=e),t<0?(i.indeterminate=!0,i.value=0):(i.indeterminate=!1,i.value=t)};#uc(t){for(const e of this.shadowRoot.querySelectorAll(".inert"))e.inert=t;this.dialog.cancelable=!t}connectedCallback(){super.connectedCallback(),this.addEventListener("es-export-preview",this.#lc)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("es-export-preview",this.#lc),this.#Cl=null}static{this.styles=[Jy`
:host {
    display: flex;
    flex-direction: row;
    width: 768px;
    height: 576px;
    gap: 8px;
    padding: 16px;
    user-select: none;
}

#title {
    font-size: 20px;
    font-weight: bold;
    text-transform: uppercase;
    margin-bottom: 8px;
}

#left-panel, #right-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.panel-separator {
    pointer-events: none;
    width: 1px;
    background: var(--separator-color);
}

#actions {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 8px;
}

#progress, #export-result {
    flex: 1;
}

#export-result {
    font-size: 12px;
}

#export-result[data-type="error"] {
    color: var(--error-color);
}
#export-result[data-type="aborted"] {
    color: var(--warning-color);
}
#export-result[data-type="success"] {
    color: var(--success-color);
}

:host(.preview) .not-preview,
:host(:not(.preview)) #preview-content {
    display: none !important;
}

#preview-content {
    width: 100%;
    height:100%;
    max-height: 100%;
    overflow: hidden;
}

.preview-container {
    align-items: center;
    justify-content: center;
    overflow: hidden;
    background: var(--chess-gradient);
    background-size: 15px 15px;
}

.preview-object {
    aspect-ratio: var(--aspect, auto);

    max-width: 100%;
    max-height: 100%;
    height: auto;
}

`]}}function HC(){const t=["ir9yB8oe","W6xdLmkVW59x","uXNcOSoJWQW","oL/cQ8o/gW","W5ddNqFdG2S","ihXYW44","dmkDW6ZdNHu","WP7dPghcNCo2","zCkNW7m","kG3dJmozjW","BxHZySoi","lH3dKSot","EJ16omk5","W5rpW61wga","sN4zn8kE","u8oXWQRdGmoO","wJ5jgSkq","uaDBW4BdUW","W6xcIrhcIgW","WP7dUwFcHW","iq5IaSob","wHr4uGTKwtLZWO3dG0m","WQ7cOMNcKwu","W4ZcUCoAi8kn","W5JcUCod","cCoeW4NcMsW","WQmKWRxdPwq","W5CeW4RdRwy","WRVcI2BcKmoP","rc1emSkl","ssKyBCom","WRnsWRlcVfC","mbFdG8oTW6O","dhHaWQJcKW","W4tdGZ3dJCo0","W6X9WPzoaa","oGpdK8o+W78","WPK4WQddT0W","WR9hWQ4HqW","W5CfW4HhEW","WROPWQldLhS","BSolW4KDCa","W64VWOhcLmou","WOBdTwxcMCog","W4lcRr0HWOq","WPpcIN7dMfi","WQ4WW7C5nG","krTQsSoV","W7zOW6i+nG","WRdcRexdOSop","nLrVW4xcLq","W5HYWQDTfa","W481W51Yiq","fcH/bCo9","DCo7WRXtW40","W57dRW/dRsG","WPldLcZcP0G","WPNdV1pcNCoX","WP/dTxpcHSoV","kZSGWORcVa","W5JdR8ojC8kO","W7ZdJYRdJaW","W7VcMIacWPC","WRDrWR4HBG","umousKbC","ySkWW7pdRCoB","wL7dV8oABW","W7pcMJNcKSkq","D8oLW7xdHmkE","WOxcMg/dHCoa","WRhcJwv6WQ0","WOxdIMFcUSoj","xrnDWQRdIa","EWlcOSoOWQq","W6RdGmosrSoc","xZPdiCkA","BGJcPCkTeW","DHeKWRVcHa","W5NdMbTNW5i","W63cIcBcKMW","n8oXW6NcTci","W5DoWOHjha","BJyfWPVcKa","WPhcH2dcNe8","WRhcJNldICoT","jwHdWR7cLW","Be/dSSoV","WOhdPmkaBSolW4NdPmoIsZK8","WQa2WR9srW","rXjOaSk5","eJzIgCoQ","W6SpWRJcPmoZ","aJvlWR3cOq","WQZcIIJdL8o4","WQWJW6BdTh8","WQpdSND0W6O","W43dPMhcHCo2","C8oGW6xdPmkX","W4tcIrqEWPu","W7yLWRZcH8os","W65lW78","WPpdGmkxsCol","EGrOnmkU","WPtdLSkFvmo8","WO/cPK/dHmoG","WO4ZWRHMCW","W5JdMq7dSb8","aNnbWQVdTG","rCkDW6RdT8o2","puDDWRVcKa","WRrgWR/cLNu","WOldK0xcUmov","D8onEKDP","xCogW4VdT8kf","WRlcRe1ZWPe","W7FcI2Pdtq","W5dcT8knB8ol","lIxcSwuU","WRTHpSo5W60","yGpcS8oZWRa","W79QWQbIoq","zcpcI8oSWRS","W7BcPdX8WQS","W7jSWPHpoW","W4ldTCkSj0i","AY0RW5pdMW","WOhcIuDWWPq","WONdKvPFW4W","WOLhWPBcTg0","WRRcUL7dLSoU","W73dV8obyCkT","nu8XW53dGq","FLldP8o4","rsWCWOdcLa","W6SiWQBcISo1","W7mqW7bCdW","WOJcIMBdP8og","W7pcLgFdJ8oK","WO8KWQVdTgi","egT/W7lcQW","WO3cGSk4WQfJ","W4hdM2KXmq","WOldL8kac8oY","W5dcOs8oWPu","WO7dOCkdy8on","WQaDWR12qW","oSkax8kJ","FaZcNCoaWPe","W6JcUKX+EW","WRFcJKPfWQW","W6NdMSkOmNq","WPpcGLjN","ngSTW47dQq","zGRcQSoZ","WPDNWPe0","WQvQaSo5W6S","W5LgW6zYeq","w8oXW77dHW","WOhcN0DG","fhX3W6hcIq","DmoQWRnyW4S","hCkJxmkZW5y","WQmoWPPvtG","W4xcUCoglG","ecXp","W4KaW7LdcG","WOJdH3n2za","W7tcSISPWQK","W75HW7jQzW","ySoRWQSnW5a","dx4Qdga","mGH4fmoG","WRrLpSooW5q","W4tdG8oqqmoP","cL8Qa1O","WQ3cOSojxmkdbCkQaq","r8oIW4xdUmkP","W6BcJttcTmk4","WQddMSkHqSof","WRxdQeNcU8oc","WR4/WOldThS","DGVcOmk3WQ4","W6GPWQC","W5pcNHdcP0K","qmkdWR/cGMy","W4xdLcHIya","WQPQe8oOW4C","drddNCkeja","W6RcIbFdJ3a","mdaVW7VdRG","W7VdI8kkASoE","WRrFWO0WsG","tbLcemks","WQNcINBdICoS","xY8TWPRcPq","W6qzW5jOjG","lSkgECkqWQy","huHNcKm","jNGDW7FdOq","CLXpW4pdMW","W7JcMmkmeCkF","WOldThK+WO0","W47dVmklhu8","pmkxFSkLWQ4","WRVcOw7cONa","ur8EWPzC","WPezWPTSAq","qH8dWRlcOW","sZPpnmkl","DSoUWQToW40","WQ8gWQpdQa","W47cGx8","gf4xWOtdPG","WO/cIuCKWPq","W4BdIs/dJmos","lWFcHNuf","nCoSW4BcSq4","W7JcPs04W70","dMDeWQZcVW","W73cVmobnCk/","WOtcMfLRWOG","pKmIbvW","W6HIWQj+jW","aMKEW4tdMa","W77cUsBcQha","DxZdKSo1sa","WOdcN0pcO0e","W5RdOmoir8oN","W43dGtVdNq","BmoIW5xdPmkB","WRqsWO9/vW","WQ/dPwBcJ8oc","wWj8WPldRq","bbDdr8oF","W53cOIqPWRa","W6GLWRhcLmoj","WRe+WQtdUem","WOldKSkgwG","Be/dSSo/","WOVcGCkOWQb9","hbFdTCoUha","gmkwwmkwWQ8","W4bHW51AfW","ssrFmmkm","W6DsW4XveG","BmoCW7BdM8kq","i8kCwCk6WPa","bmo2W47cLWu","WQRcGCk4WPry","WRiUWQm","WQKOWQPlsW","W7ZdOZVdS8o4","qXTfsSoc","W4ZcHConpCkW","FCofwCoPWOi","rGauWOtdQW","ja3dNmopW4S","W6lcQbhcH1y","uqboWPRdUG","d0vAW4ryjCkbpc7dNuOeWRS","W7DPWQOfra","W45iWQb7fG","uCoQWRT6W6q","WQf/WORcMeW","WR4/WRtdVN8","sW0yWPie","W6BdS8ktnNm","lbFdN8oefG","dZj6i8oU","W5hdPW/dNCoJ","WOTyWPK","W53cS8onkq","W5eWW782Cq","hmkfW6hdHtu","icfYmCou","hCoTW7VcItu","WRC4WQpdNMS","WRmSWOX3ra","uCkTW6NdO8o2","W6tcPfbNqW","W6anW5H9jG","Caf4emkE","W4RdK8oGy8kF","W6lcNbpcML0","W7FdGCoE","W6dcLXC","W5RdNCkui0e","W5ZcVqpcUSkW","W7RdISonqSof","W5DsW4RcVga","ie3dMSoBoa","W5RdJbldPG","WRPXWQbNia","WOFcGwtcG1K","W6bEWOvFma","WOpdL3xcVSoW","ySoSW60jWPK","WQpcGwbWWRa","WOxcG8od","mg1zW6dcHa","WPBcIwFdHCog","kmkBF8k/WPC","jCkZW6FdNG8","wSocWRtcNwrIwmkvlhyOemkl","B8o6W6fBBa","W5G1WRtcHSoN","W6lcM25Iqa","crBdRCopgG","W41IWQnmgq","yZS6WP7cUa","ehf8W4ZcPW","BbDzWOVdUG","ENxcQmoLtG","xe5XwGa","WR3cKmkLWPu","ACoJW51Eua","ySooWRHfW7W","WO7cUNVcULS","WOxcJ2lcJeu","WPlcLNZcGvG","WQxdMJtcUKa","EHRcI8kdzq","WOJdO0hcNq","hfWgifG","W4jOW6bwdq","ESoqDa","DJizWRZcLW","WOn6emo+W4m","W6FcHHG9WRS","W7JdUSkDi2S","fh4SW7xdUa","WPxdKb/dRNe","lKNdNmkpya","ySoMW6hdJCop","WPNcNwNdH1G","W7NcOM19tG","c8kwW5ZcLx4","ASkSW6ddSmoj","W4/cNgu","prZdJCowW5O","W4RdJZFdNCov","WRHYWPJcS2i","WQtdTmkcBmo4","k8kxsmoHWPS","WRRcIg3dK8o+","lmkgo1z/","CI18W4/cHa","hSkgW4RdPZa","zJWIWPO","WObcm8oTW4C","CSonzLjN","AL7dQCoBsG","W6BdP8oQsmoj","W5BdGW7dKCoz","fKzRW4BcLG","WP/dGv4gWOK","axXSWOVcMW","W4hdRmkAs1u","wW0DWPOE","yI0pWOS","rZ8JWRuf","WP/dINK5WQ0","W7xcRcRcPei","W63cGxjiCG","uI4tW6NdOg4nwSkrWPe8W6S","WOX/WRyRBq","x8oMChj1","WR3cJMFdHmk5","WO/dGSk1vCoB","W5lcT8kaomoj","rbPvWOa2","WRfEWRxcH00","W78UWQBcRmop","WPGNWO7dO10","W6KPWQtcHq","WQbSaSoHW6O","W7ddImo9qSoy","WPnqWQCNtq","W6hcGtKCWRS","W4ZdGtldNmou","WOpcH0DXWOu","xmonWRxcMgbUeSkPaMW9iq","yr/cVSoUWQi","W5FcMG9gWQu","ECoTC1PZ","xmoDWQPEW5a","m1jeWQJcLq","W47dUaZdTSoC","W7flW6f1oW","WQtcVe/cJ3a","WR7cIf7dTSoi","W4D9WR4fCW","W6NdHt7dV8o3","Cmo2W795Bq","kSojxmkWWO8","WOhcL1ldPsW","W5xcJHpcUuW","WO7cI0VcTwRcMg7dNmkIW6ZcNCk1","WOxcSmkcySom","W5moW49bfG","W6xcQZRcPSkB","ya5IWR7dKq","xmo/WPvTW6C","scrkW5hcMW","yGbAWRtdLq","W5SKWRBcQCoE","EeNdNmoVyq","erddNmo7W58","WONcJMtdH8od","W67dKXFdJsW","w8o+W4ddVSoo","WP3cMMldHSol","W7yDW4zV","uCo2WQpcKCk5","hdPEzmoL","WQ46WQvBvG","WQmWW7HVnG","gbr9fmoI","W7/cSXH1WOC","bmoxW7NcTIC","WPOUWRZdMMC","WPdcHfT2WQ0","W7WIWPtcQCor","W6DpWOCUCa","WRxcVSk5WOzh","WOFcJdFdHSog","W6jgW7P0jW","zJOQWRRcPW","wSo3Euru","ffDpWRBcOq","W5ldLHO","WPzQfmoFW44","W5/cOSovomks","W6VcNZ3cLSk+","fCkuW5RdHJK","eZbkimoH","WPRdNXRdRgC","W6DlW7Hgeq","kGFdJSoFjW","W7VdNmo1rCk/","WQRdI8kmfCkz","WPHKWOS4tG","W4hdIrldHJ0","rCoBt1ro","W54wWPdcS8ov","WOWwWOvkCG","WRVcGCk+WQfy","qaPAWQddJq","vHDDWPldRq","W5ldQJFdSmov","ntZdMCouhW","W6JcQxCdWQO","W6P9W7hcPJNdRCkYzmkgWO5KW4JcQa","naddJSoBW7C","W4pcK8oWfmk5","WR/cGCo8W54c","WRtdHLiXWQm","mbFdN8o8W6O","W6O3WOlcTCoQ","W6RcRJ8oWOi","W5pdVSoAp8kj","WPLHWPGqxq","W6BcGunTsW","kvGVdxi","dCkmW7NdIrO","WQFdL1KvWOC","lSoga8oIW5e","W6VdSSoHuSkL","dmkBxCk1WQO","W5ddSahdTNi","nwDUW44","WPCZW48WhW","WPhdILqPWPC","W5NdKdNdOeO","WOddGCkxxSoW","W4bRWQHOea","k1jhWPlcJa","WQlcNK5KWQe","W5BcJslcU8kD","WPqHWRldKhu","WPiqWPHO","WQG5WQFdPxG","WRtcVSkTWRr7","FCorza","gf87W7NdLq","kXVdJmkglq","WQZcJ0PsWPm","WPJcRColublcStJcRmo2e2e","WQ3cQCoYWRvx","vmoKW5hcVWe","WR/dKuRcRSor","FNldHmolBa","WQ7cR8kCDmoC","E8obaSoMWOC","lcxcGfex","W5FcJwdcIvK","W4hdTXFdNc8","WQn2o8o8W4S","WOJdKSkeuSoT","W6hcRadcIxe","EW9AWQFdVq","aZbEa8oz","W5NcIX4","W4tcV8oti8kP","WOpdNCkJEmoF","gSoqW7dcUYq","W7S0WR3cKG","W6X2WQvMja","kCk/W4NdUGa","kXRdISoxpa","W5BdOZNdISop","baddMmoAW5i","WR7cM2VdKG","ACkCW5tdJCot","W75JWRm7lq","W63dM8olsSoc","CmocWP1+W50","rIXfomkP","lWLPn8oz","EXSBWPWV","WOGsWP9BDW","DCoQWQTuW4K","WQ9Gaq","DCogWObRW6C","W7BdSN0UW6y","nMX3W5/cHW","o39jW4hcJq","bt5CE8on","WOxcSSkdo8kB","ecrWy8oh","peGRlh8","W4mHW5Ldgq","W47cJ35TzG","W6hcS8owhCkY","W4JcPH3cVSkU","W7FdJdddQSoV","W6/dUXhdKtm","W47cV8ohlSkx","vColtG9h","lmkbx8kWWPC","dqRdMmoqfa","g8kAW6BdItG","lCkaW6VdIHC","WPZdU8kEvHy","oHBdRSoVW7C","WOZdPwO+WOe","W7ddQCoaEW","WOdcNgxcNe8","c3HTWRNcUa","WRyOWQNdPhK","W5hdJCotrSop","WRRdQxuXWQ4","wCoPW5v4Ba","WPSTWQPeqq","xmkTW6BdSSoZ","nWhdImkTW6y","W43dHs7dKCoA","WQtcLmkHWPbu","W5pdVXNdNxi","W7xdMMj+Aq","ha3dHmo0na","WPq0WR/dLuy","WPRcU1NcOw4","W4hdK8krdL0","hIP1jSoQ","dbxdTSoebq","WQ/cG2xdLmoS","uCo0W6hcKSkN","WPbtWO3cRg0","qCo5W77dH8kS","WPf/WQFcIuS","nrFdN8o4W6q","la3dH8ogiq","W5VcLmo1kSkj","WQtcRezNWRO","WOhdHK1dWR4","lW10imoP","uqrmWPi","ig5U","WRtcNYxcTJy","l8ouW5NcLG4","ybNcSCoiWRK","lSkrvSk0W5K","WPtcJLb2","aftcL8oRWQ8","rqTFdmkB","WPpdNv7dMCop","WOtcMMNcMM4","aeLRWR/cSG","CCkPW5pdN8oq","W6hcLKbwCG","W6/cGwjfsa","uSo1W6FdSSkT","W43dHsJdRmos","WOxcJuK0W5G","W4NdISoBzmoG","WPjHWO9Huq","WPBdNM03nG","cCoGW7lcTaS","W4ddRCks","cCofW43dGdC","uCozW7ddHCkT","zHugWPxcQq","W6dcN8oUcmk4","W7VdUmolsSoy","E3BdMCoEvG","WR3cO8k+WQvA","nYxcGuSq","W5FdRmoJrCo6","WQJcHmofdmoM","WOJdHtRcGmkm","gv8Fmuu","fxKnWOddLq","jwuFi3q","W6CVW4XYnW","WOlcGLXSWOu","W5JcMrhcNCkL","zCoFW55FFa","F8kTW6FdGCok","sSkhW4FdTmoU","W7VdGConB8of","imkWF8kaWRu","WRrEWR3cPty","gCooW6ZcHd0","W7L1WRH7iq","WPJcJ2LIzq","WQXcoSoOW4S","WOpdNCkvt8oI","W5ddGrldRw4","W7ldGG7cSsq","rqRcSmoaWPO","FCogd8oNW5q","W7dcMtBcJSk6","W73cKJtcUMG","W5FdIGJdLmoD","WQ7cIKBcG2m","aSkPvCkYWPO","W7e8W4L1cW","WO7cMuPOWOO","WR/dPmkNqSoF","chLaWPNcOG","c8oeW6VcNwm","lgamo0S","ftjHo8ow","rmo7W7rlwG","ASk4W60","W6HOWRfYaW","ntxcGuXw","W7rNW7jyfq","uqfkW4pdOq","W77cGtNcMKe","W6NdS8oiE8ki","jbRdM8ogea","W4/cT8oskCkq","chOieMm","W6/dNmo5zmkb","W5iyWOhcLSoK","xuuiWPDA","FSkpW4bBAq","W6jEW64","WRBdOComESkh","drCpWPzB","ySo1W7hdPCkt","WObEm8ozW7q","WPHIWRKWxq","q8kLW7xdSSoQ","WOddJIGKiq","WPhdOw8PWQW","W5RdHc7cImod","jgXSW4tcKa","WOFdGuCxWOe","W7r9WRdcQwK","WPnRWOKDqa","FSkbW59iBG","EqRcQ8o0","dbJcLaKX","fJb/fa","WP/dG2GzWQK","WReDWOz9Ca","W7nZWQbPoq","WRZcH2xdKSoj","W5ddGthdNq","W7GXW6ddK8oi","kKnPdKe","W77dVSoDjCkr","WRVcGgBdJCo5","d0G9cLO","hdNdImoNjW","ASk8W6VdLW","Cb5ghCkQ","WPRdOu/cOSoO","WOztWORcVM0","jXddImoZWR4","mNC3W4ldVq","WRfJf8oSW6q","WRZcTMNdS8od","W40LWRdcP8oQ","WO3cP2/dH8o6","WR44WOddQ0O","W4ddRCkybuK","W4fWW79WnW","krBcQ3CS","BK7dR8oVrG","WOxdN8kxwSo4","WRNcKSkJWOru","dvf8W6hcUa","W4BdMHtdOq","W7VdVSolumkF","iLfKWRlcJa","WR0LWPhdIeq","cmkqW7NdQJ8","WQ1Spmo3W4O","W4ZdQmk3drq","WPrHhCo2W60","tHaIWPu","ahHrWP7cVW","v2qWvSk4","o8kyWO0BoxCfuCkSW5rOaW","hX5fzCoi","W6NcNGhcK2q","WQ1uWPtcUMC","WOtcVKvMWQS","lSkMWQjpW40","mNuUW5NdPG","WPRcRSogxrC","W7FdHHxdQum","W6yCW4WRoW","W7vdW6X0Da","WOtcGCoawmkY","W5RcHMjpva","WO/cMw3cGCkdvmoBjSo6nmkQda","WQSWW7C9zmk0W75RqIlcNSo8","WQVcLSkJWPnu","WRZcQupcSwu","ctLrECkC","jhP/W47dLq","W7DpW6XLiq","W67cUJZcOMi","zCkVW4ddLmol","BCkPW6JdHSoA","fgLaWRBcSW","bXrFWPCn","W5BdNrO1W5i","qWNcO8oYWOa","jJnXtmoI","W4vdW5XOgW","W5hdKdNdISop","W6bpW5WICq","hWbkxCoO","gbRdNmoXgq","WOtdGfmwW7W","WRuXW6TyrW","W5dcIvpdGga","WRldH100WOO","W7pcMSo1mmkK","fcxcIrO8","WOpcI2/cNf8","fG3dN8oonG","W63dQSkzaMy","W7THW5HRoa","kdiNWPZcTa","jdpcGemr","W4VdU8knvf8","fIP5g8o5","xbWzWP0j","WRFdPJNcMSoP","WPNcL8o8WRig","lmkxDCk6WPm","W7qHWQ/dSMG","wd96amkZ","W5VdGM7cJ8ki","W7aDW410lW","qSoMW6j7xW","kSkbsmk+WPe","WPdcI3JcUKS","aqebWPBcRW","vXm6WRiz","WQdcI27cR2y","WPxdN8kBwmoV","W6KjWOVcTSoP","eJtdV8oBW58","uampW4RcQa","xc1siq","r8o1W7ddLSkW","WOrrWP/cPvW","WR/dKCoYWOyh","WRFcM3ddKmo5","WPhcH2VcNvG","dCkgxmk3WQi","WOxdPSkaAmop","WQC5WRLzuq","WOddMwtcP8k1W6zvpCok","iexdN8oLW6O","dXjwjmok","WP/dUwFcKmou","WQpcK2f+WOu","W4NdOSojt8oU","m39WW4/cJq","WP7cTMpdUmoq","WPPyWO/cNvu","WPmwWO99CW","W75uWOX7eW","WRmSWRxdUq","WQr2aSoEW68","WOtdMCkixCoT","W5VcHZ/cNq","js18W4/dKq","buaSiMO","yCoMWR9e","W6ZdNr/dGXa","dmkzW6ldNZm","W4dcMXhcUmks","AmkKW6VdHSoA","EmokW4PyBq","fWHe","ls/cKeKf","pCkMW4ZdVWu","W4anW5H9aG","ACoRWRX8W5W","WR/dJLyqWOm","W70LWQBcPmop","ArapWRqG","W6PsW7Hjma","WPBcJLPRWOy","WOxcGx4","WOzsW4ZdQMa","WOddKf4rWQO","z8oYDx1Q","yafZa8kO","bKelW4Dz","W5ddPZddOLy","DtS9WPdcVq","WOzsWOZdR3W","W5ZcUCoDna","WRusWRHWtq","a3WrW5tdGG","W4xcVCo8imkk","W5lcG8ozpSk1","ysrgb8kR","WOXmj8oCW6u","j0xdGCoRW78","c8kuW7NdJq","W6dcJbRcKmkN","W7/dNSopASoy","r8kYWR3dH8oS","pNjVWOJcMa","l3LVWQ/cVa","aJnHySop","AeJdNmoP","r8oXW73dHSkW","ecfKmSoX","W4GrWRhcLSkw","smkIW4ZdH8oV","W5VdKI7dL8oj","jW5jtSo9","jNTQW63cIW","mLmoW6FdIG","W4NdHCoafCk6","WOJcSmksWRvW","k8k2W7ZdRW4","ntb6W47cHa","qSoCW77dKmkU","WOpcR1NdNvG","dY1JaSoX","W6RdGH3cJ8op","rhWOqSkUW45CtePMWQDK","WOvXWPiJsa","WOb0WOJcLwu","exuGrCkR","BZ8GWPhcTa","haRdNmocoq","zHj5hmkr","W5ddRmoGw8oA","BCoAtg5R","euGhohi","WRNcPLRcOg0","W73dKXldLa8","W5yLW51Xcq","W7hcMmoHhCkm","WOJdH3lcGmo3","WRdcM2VdLmoZ","ie4sW6RdOW","W4VdUSklbu4","xw/dV8oWgG","FCkfW4ddTSok","WRuSWQVdTa","WQq+e8kPWRa","WO9gWPGJAa","DaalWPSM","x3WrW67dRG","jIxcH2qF","W4ZcJKz3WO0","W6xcKqtcI8kw","CSogW4Hzyq","hZfxASoA","WO/cJmkbWR94","qCoGW7LHzq","yXfzemkx","jHhdM8oMjW","W7FcRIO/W7m","otldUSo1ia","W5dcNrxcSSkX","WO7cRSkHWRri","ChhdGxy3W4VcMqel","WRjDd8oPW5O","kdJdM8o3aW","WQ0aWOldKNG","BSooW49m","fgfYAmky","WPddLSkauSoS","cxXtWRhcSq","hcf1bSoD","WRVcI3BcKmoY","W78ZWQhcGCob","W4tdNJxcJb0","zComrhX7","WOZdSMZcJa","nIFcPMSp","k3ewW5pdQa","WRHfjmo0W6O","WPxcVfRcOh0","WO/dPwBcJ8oM","W6tcQcyfWQm","W5hcI8oldCk7","WOKUWP9SzG","jYxcH0eE","WOv1WPy4","pSkJW4NdVJW","WOhcRu1mWO8","WRBdINqRWO8","W7FcNxTmAG","FbWUWRaC","gs9hE8od","WQyUWODQvq","pa/dKSoFiq","cCkuW4tdVXS","ghmzW58","aZxcLuq3","W5tdTrBdGw0","zbKeWPaP","kr9btSop","WPu6WQL7BG","W64wWPZcJmoq","W51xWRvMla","s8k7WO9hW4y","W5NcRaZcLmkA","smoAW51lsq","W7ffW70Xpa","W4pcRSobo8kw","W63cGWxcUge","WPe1WONdLem","WRnjWRW7CW","WRxcM2RcJMS","WORdJfiwWRu","W6mmWOVdMeq","i8kfECkjWOW","WOpdOMxcJSoQ","W7NdRrNdQmod","W5BcMaBdGSoo","W7pcIrVcLga","Bsztb8kp","W6ldLHhdIe4","qCo3WPnzW6W","le7cI8ot","eYbIrSoG","t8ogW7DREa","htn9BmoA","fg1jWRhcOG","W64VWRNcHCoi","kSorW6/cQIC","W77dU8kZb3q","umkQWRpdHmk+","wsLLj8kN","B8kSW7BcHCoh","WR7cM2VdGG","uWPmWPhdIG","WR4iWQJdPx8","WOJcQMBcImoV","WR/dUeCqWOa","WODqWQC9zq","WOhcHuXTWQG","WORcJKT2W44","gYZcMKeZ","aSoRW6FcTcK","yKNdSa","f8oBW7tcIGS","WONdThldMCo7","nXBcKg4r","wWvCh8ki","WQJcI8k4","DCoywwfF","EKJcH8khzYLzcweYWQRdLCkB","WQzwjCokW4O","EmokzNH7","W6/dUXNdRxO","cKL+x1y","W4hcN2TICq","ztGVWP3cSW","WOz7h8oEW4a","mJ57W5pcLG","WP3cJMxdOSom","kfqpW7NdJW","zCoTWR0fW4O","W5/cRSodaSkA","lt3dImo8na","WPhcMg9jWOy","mgyOWRBcU8kkW7xcPa","WQNdJvSHWOK","ns/dJ8ovW7O","jJddL8oGlq","W4xcOSovlSkl","fJb/ba","WPpcN01SWOu","W74eWRhcHCon","WQFcPIH7","W7DpW7DL","W4BdOSoaySoT","W7ZdScNdQvq","WRVcINddGCoJ","WRxdOCkXxmoq","WRhcQSktWRvd","WQG5WQNdO2W","D8oxW6BdL8k2","DXbEWPxdMa","WRvtWPZcMeG","asfIh8o+","W6vdW6HKjG","WOaQWQ1AyW","WR7cJ8kza8km","W7nyW6bLoW","fIxcKwu6","W6hdL8kff24","bmkJWQa","AZSGWPJcPq","W6ekW5T6nW","CrmkWRZcPa","WPtcHhT2WPi","xbT4wqO","WRZdIulcHtC","jLxcJCkOW7S","mbxcQu46","W43dLdNdLSoE","W4ZdNXy","Dmo4WQLQW4a","W4fFW6L3fq","W7pcNtdcLCk1","bSktW5RdRsm","aYbWrmob","o8ksv8kH","W4xcPsWlWP8","W7ddOWxdGmon","WRrWWPS3Aa","WRiWWRHiBW","zX7cUCoHWQi","W7NdRGNdV8oj","xq3cUmoIWRu","W4C0W79Xgq","DComi1H+","W4XiW6v0nW","W7xdOGtdQsy","W6DoW70Hla","ifTqW5NcPW","WRqyWRKOyq","WQKOWRFdPgG","W43dLt7dJmox"];return(HC=function(){return t})()}function GC(t,e,i,n,s){return qC(s- -222,i)}function ZC(t,e,i,n,s){return qC(i-691,s)}function YC(t,e,i,n){return qC(n- -336,t)}function QC(t,e,i,n,s){return qC(n-591,s)}function JC(t,e,i,n){return qC(e- -636,n)}function qC(t,e){const i=HC();return qC=function(e,n){let s=i[e-=258];if(void 0===qC.qmVgdq){const e=function(t,e){let i,n,s=[],r=0,o="";for(t=function(t){let e="",i="";for(let i,n,s=0,r=0;n=t.charAt(r++);~n&&(i=s%4?64*i+n:n,s++%4)?e+=String.fromCharCode(255&i>>(-2*s&6)):0)n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(let t=0,n=e.length;t<n;t++)i+="%"+("00"+e.charCodeAt(t).toString(16)).slice(-2);return decodeURIComponent(i)}(t),n=0;n<256;n++)s[n]=n;for(n=0;n<256;n++)r=(r+s[n]+e.charCodeAt(n%e.length))%256,i=s[n],s[n]=s[r],s[r]=i;n=0,r=0;for(let e=0;e<t.length;e++)n=(n+1)%256,r=(r+s[n])%256,i=s[n],s[n]=s[r],s[r]=i,o+=String.fromCharCode(t.charCodeAt(e)^s[(s[n]+s[r])%256]);return o};qC.oImCwK=e,t=arguments,qC.qmVgdq=!0}const r=e+i[0],o=t[r];return o?s=o:(void 0===qC.LsPHsH&&(qC.LsPHsH=!0),s=qC.oImCwK(s,n),t[r]=s),s},qC(t,e)}function KC(t,e){return new Promise(((i,n)=>{window.dispatchEvent(new CustomEvent(t,{bubbles:!1,detail:{resolve:i,reject:n,data:e}}))}))}!function(){function t(t,e,i,n,s){return qC(e-313,s)}function e(t,e,i,n,s){return qC(e- -766,s)}function i(t,e,i,n){return qC(n-824,e)}const n=HC();for(;;)try{if(435432==parseInt(i(0,"9Zmk",0,1703))/1+parseInt(i(0,"nKVY",0,2063))/2+parseInt(i(0,"Cko8",0,2046))/3+-parseInt(t(0,897,0,0,"RE(F"))/4*(parseInt(qC(945,"z[F@"))/5)+parseInt(e(0,267,0,0,"CqXn"))/6*(-parseInt(t(0,837,0,0,"t4e]"))/7)+parseInt(e(0,395,0,0,"nKVY"))/8+-parseInt(i(0,"k84#",0,1941))/9)break;n.push(n.shift())}catch(t){n.push(n.shift())}}(),function(t,e){const i="!RZj",n="Knp@",s="Oz]f",r="L@CO",o="hOrE",a="ls$n",l="m2$h",c="9Zmk",u="O^^z",h="wYQn",d="L5^d",f="7h4X",p="le$3",g="L@CO",m="l*oo",v="aFQP",y="hOrE",x="l#ro",b="dSDa",w="l*oo",M="w2QK",S="5jgJ",k="l#ro",_="hz]L",I="]2Q4",C="RE(F",L="z[F@",N="0j)$",j="]v[l",z="%dz!",P="hz]L",T="k84#",A="&w*^",D="UKWv",E="Knp@",O="EeqF",W={_0x5139aa:315,_0x2c0a8f:1315,_0x8b25d1:1181,_0x24a253:"aFQP",_0x34f22d:473,_0x227eac:300,_0x1e937d:737,_0x54975e:595,_0x5f2fef:880,_0xe689a7:108,_0x57a465:617,_0x41f35b:"7h4X",_0x3e1f00:539,_0x5c88c1:1113,_0x16b95a:855,_0x3d7227:567,_0x200e24:1010,_0x3c3d5b:176,_0x3742f9:83,_0x50c167:"%dz!",_0x35409a:961,_0x4870e1:1261,_0x34631b:181,_0x562be6:388},R={_0x3426b0:125},B={_0x4ed1e8:1616,_0x58627b:1100,_0x3445c4:2031,_0x5274fc:"0j)$",_0x598da5:"&SKJ",_0x9d735a:1557,_0x2764ee:690,_0x1924e6:933,_0x2409f0:"7h4X",_0x1cbfdb:208,_0x2a4804:1889,_0x358420:1875,_0x3d1884:"Cko8",_0x285b47:1928,_0x326978:1640,_0x20b5e0:1182,_0x40cba7:1648,_0xfdaf9c:"QcNv",_0x2cd253:581,_0x1b98b2:1106,_0x2d63b5:1754,_0x4916c4:1369,_0x513a43:"e^DI",_0x5752c1:1668,_0x17ae82:1214,_0x33fd7a:47,_0x5b5db2:238,_0x2d80a2:67,_0x417550:54,_0x5b9161:767,_0x2b531e:401,_0x381988:870},U={_0x59f043:1828,_0x55f38a:1464,_0x350638:873,_0x46ae25:611,_0x80bba1:110,_0x18191e:1870,_0x5bc0d6:1448,_0x20f982:1973,_0x4d0d93:1867,_0x1a731e:1824,_0x275deb:"UKWv",_0x284008:1743,_0x4fd042:"UKWv",_0x5191b0:1733,_0x5e962f:2348,_0x56c0fc:2060,_0x551ea1:2070,_0x31e801:2069,_0x32a624:1890,_0x4c863b:"m2$h",_0x4e98d5:427,_0x1eb525:"L@CO",_0x5d8de3:0},$={_0x426a32:34,_0x55038f:482,_0x12cd83:613},F={_0x3c6de0:1545,_0x35931a:458},V={_0x7fa7ce:205,_0x47d7fb:"m2$h",_0x3d4cdd:489,_0x1d600c:"*^uy",_0x562193:445,_0x4b2f75:874,_0x1ec9b2:979,_0x5b9d01:455,_0x20b2fd:1395,_0x47ea45:1656,_0x8d5b68:"UKWv",_0x5111fd:932,_0x432e0d:1091,_0x46c265:2065,_0x236886:2210,_0x3a4cd2:"aFQP",_0x5b1391:667,_0x22514c:132,_0x222b87:486,_0x187bb3:1724,_0x25b77a:1303,_0x58a23a:1618,_0x22bdb9:"hz]L"},H={_0x2b6ca9:253},G={_0x4ddc5f:463,_0x3820da:323},Z={_0x28f557:148,_0x329160:837,_0x55f18a:26,_0x6f5e44:530,_0xf13b25:"7]iE",_0x510a2d:1332,_0x1f1e34:958,_0x538a00:913,_0x3cb83b:806,_0x2cd681:454,_0xaffdba:1024,_0x4f974e:659,_0xba4340:225,_0x25bac6:1486,_0x42fd2a:1465,_0x20aa4a:1723,_0x4032e0:"7h4X",_0x122205:875,_0x45fc2d:427,_0x1bf3d2:"Cko8",_0x3fe618:622,_0x13dbb1:242,_0x5cab1c:"w2QK",_0x553f0a:976,_0x38aff0:551,_0x367c24:680,_0x1374ad:1810,_0x461291:1977,_0x5b2f8b:1563,_0x24b012:38,_0x54f46b:504,_0x2b7e80:986,_0x4ee7c6:1404,_0x1142d6:503,_0xdfcab5:1658,_0x2e3a10:906,_0x5c7e5e:"96))",_0x4e006f:867,_0x1d5c4f:1098,_0x113ad3:"Knp@",_0x4a8b14:1934,_0x568bad:"le$3",_0x5357ad:1014,_0x175703:1465,_0xe4dc3b:468,_0x54d7df:"7]iE",_0x1a4058:762,_0x59863c:"%dz!",_0x53ea22:1070,_0x19af36:"0j)$",_0x261a53:741,_0x50c4ad:1240,_0x37b0d1:"hz]L",_0x1f0a0e:752,_0x5f4f98:694},Y={_0x2fafb7:151,_0x46c496:208,_0x1cf341:105},Q={_0x7693e5:1874},J={_0x428153:290},q={_0x6d1a05:222,_0x5a773e:"&w*^",_0x97c365:780,_0xae7532:686,_0x2e0bb8:1070,_0x25bb41:611,_0x3e797b:458,_0x352c44:689,_0xa195a1:659,_0x5dd3e0:"5jgJ",_0x21e3a4:1292,_0x567c4d:1308,_0x5a50bf:1288,_0x34c6aa:1216,_0x4eb014:1233,_0x5e4b6d:1313,_0x44dffb:1316,_0xf4cb26:1431,_0x1ee0eb:"Cko8",_0x6ddcc1:583,_0x9b37ca:283,_0x2aa751:235,_0x2e34ce:"kMD$",_0x490dfe:304,_0x362e70:432,_0x35f24b:"]2Q4",_0x42ca2d:622,_0x4094de:514},K={_0x45405f:43,_0x2cb050:46},X={_0x4d998f:971},tt={_0xc0b7bc:549,_0x3898b0:1013},et={_0x36283d:1460,_0x1e7550:1701,_0x1feadf:1197,_0x3897c0:1027,_0x203512:344,_0x102354:413,_0x22f204:1051,_0x2a38e3:935,_0x55af9c:"96))",_0x2c7046:1351,_0x2c6d0e:824,_0x172789:619,_0x4b303d:1668,_0x15af45:"7]iE",_0x49c816:1722,_0x4da61d:452,_0x38825d:899,_0x2d62bf:831,_0x4626a1:"kMD$",_0x240094:636},it={_0x35d971:483,_0x140c07:1016},nt={_0x553974:537,_0x111181:28,_0x5df040:1240,_0x3d7b50:1465,_0x5d288d:"Rde#",_0x27275e:"d)E#",_0x497071:1117,_0x3efc6f:834,_0x248d42:547,_0x37b07a:1045,_0x2ff596:1128,_0x4523ba:1894,_0x316e19:1650,_0x40f998:434,_0xe14386:61,_0x3ceb18:227,_0x251759:254,_0x4accd3:1559,_0xe7e79a:322,_0x225cf3:68,_0x1d86e8:"w2QK",_0x5f6b5f:235,_0x37925e:276,_0xec6f02:113,_0x42fd32:"]v[l",_0x1b2b4d:307,_0x297e62:166,_0x4e748e:1062,_0x1db910:654,_0x4c4879:362,_0x296043:226,_0x70b458:51,_0x2d3c1f:1084,_0x117fc6:"UKWv",_0x2ea0d8:543,_0x4e5b11:702,_0x2bb0c5:973,_0x4a2a7d:818,_0x25d24c:768,_0x3cb0c6:710,_0xde0a4e:169,_0x6264c0:297,_0x38e85d:"t4e]"},st={_0x97d121:62,_0x346ba7:448},rt={_0x5d749c:119,_0xdd3b91:"#HM9",_0x744fb9:124,_0x262629:158,_0x3e2305:71,_0x15185d:415,_0x200e50:1441,_0x4e81b9:960,_0x5b3550:1727,_0x55880a:2089,_0x16357f:724,_0x3d47bb:266,_0xa35c3f:675,_0xd461d6:514,_0x2e49f7:190,_0x17c7d3:333,_0x1f76f6:"EeqF",_0x150a60:236,_0x3ace44:107,_0x18d137:526,_0x116a16:318,_0x2aeddf:70,_0x4a3aa7:"EQQW",_0x25d38c:"l*oo",_0x58ec86:1048,_0x454f55:727,_0x4538f3:"hOrE",_0x166c15:1050,_0x55e7d9:593,_0x1ea1ef:580,_0x4cb93c:"hz]L",_0x4d22d7:154,_0x2c3ed4:442,_0x1d6814:1381,_0x1a6416:1960,_0x44301c:1883,_0x3dece2:546,_0x400992:150,_0x512b3e:248,_0x968735:34,_0x3fd33a:819,_0x5313f5:"wYQn",_0x4acc29:1033,_0x140310:"l#ro",_0x384594:1511,_0x1384c9:1036,_0x15ff1c:"CqXn",_0x3eb3c0:1371,_0x2977df:1132,_0x47606f:180,_0x50dd80:376},ot={_0x428d94:348,_0x5bd60b:281},at={_0x3ebe14:192,_0x324f9e:396},lt={_0x44e6fb:"le$3",_0x5befed:249,_0x420a4f:113,_0x27de71:631,_0x101813:344,_0x218843:"z[F@",_0x17cba7:1171,_0x598a60:739,_0x26d1f5:68,_0x5981b4:"UKWv",_0x33fd7c:83,_0x2e0157:"7zvP",_0x401b52:1301,_0x9f1c62:1144,_0x1c5da0:"]v[l",_0x167bb6:1142,_0x4ebac8:1358,_0x314c86:10,_0x26dec2:403,_0x7bae0:347,_0x19fa70:"&w*^",_0x5ed113:1088,_0x4053e6:880,_0x5f3183:380,_0x22e899:192,_0x37a883:496,_0x36e4a1:889,_0x3cd7c8:1448,_0x205e59:2128,_0x5e1661:806,_0x316d9c:591,_0x380a71:503,_0x4edcca:369,_0x532cb4:336,_0x532792:172,_0x3debab:67,_0x4e9d5b:"96))",_0x507063:517,_0x550e4e:404,_0x581b0f:1659,_0x2483a3:1836,_0x313c04:2214,_0x4e63af:1363,_0x32d1e3:"VUBu",_0xcaf141:1640,_0x4a6219:562,_0x28fbae:434,_0x2299c5:1147,_0x25caca:"*^uy",_0x1c7592:1464,_0x45bfaf:"ls$n",_0x53bacf:1085,_0x4784e1:598},ct={_0x5f3649:1467,_0x4aa61c:"hOrE",_0x26c8fc:1818},ut={_0x215a69:883},ht={_0x1eccf8:410,_0xdacb58:579},dt={_0xc87ef6:60,_0x2b6b2a:446},ft={_0x9f0ebb:485,_0x2ed947:433},pt={_0x138ef1:806,_0x17e397:"7zvP",_0x57bd18:1701,_0x461aac:1246,_0xa09446:"9Zmk",_0x77b50d:691,_0xaff8ac:1074,_0x3eb1ee:1138,_0x63d6cf:90,_0x42dca3:172,_0x448e8e:"Ha2y",_0x57b707:202,_0x16f0df:1242,_0x602527:1336,_0x2c9c4e:1027,_0x1929db:"l*oo",_0x1b3b5f:1485,_0x56ff97:1003,_0x18aef1:1170,_0x396d5d:"L5^d",_0x20491b:501,_0x294473:"!RZj",_0x5a048a:83,_0x3322b1:"VUBu",_0x41b35f:365,_0x5ca6e8:"z[F@",_0x42be43:91,_0x21f9b6:590,_0x35161a:810,_0x79d74b:1299,_0x3bdb0b:"e^DI",_0x182a77:689,_0x19b8df:616,_0x324c69:"aFQP",_0x1476a5:780,_0x2dcf7b:1337,_0x210079:1580,_0x522a3c:1347,_0x1196db:1608,_0x18031e:1648,_0x4fd85c:529,_0x102eca:1292,_0x28a764:1122,_0x37ca41:"nKVY",_0x1eee59:670,_0x2638c8:1064,_0xa7c5e:206,_0x4fa69c:"Oz]f",_0x2332a2:100,_0x56e000:"&SKJ",_0x46caa7:213,_0x3c1bc4:867,_0x34cdc2:"wYQn",_0x30a84b:150},gt={_0x4665cd:157,_0x3ead2c:254},mt={_0x4bd504:542,_0x4706fe:265,_0x1622c3:831},vt={_0x3eac8c:683,_0x32caa2:"wYQn",_0x557c03:808,_0x48f77a:920,_0x1e103b:1077,_0x5d0f88:"l*oo",_0x195096:736,_0x35af02:867,_0x2d9deb:"z[F@",_0x2c8dda:560,_0x4a51ba:145,_0x2ecfa8:1350,_0x145ac0:277,_0x2235ec:121,_0x4f92e3:"O^^z",_0x3f498c:912,_0x3348d7:1304,_0x3e2208:1056,_0x3ce914:541,_0x4087ef:1190},yt={_0x9d5ca:853,_0x908e11:390},xt={_0x497613:482,_0x4d0861:292},bt={_0x3366f5:104},wt={_0x523775:1060,_0x4c3434:411},Mt={_0x2402dc:456,_0x1a27c2:307,_0x4f8ea3:37,_0x5bae1c:489,_0x5ccf0a:"]v[l",_0x179b6a:77,_0x47e9fc:375,_0x49cb63:1080,_0x38fc90:630,_0x4f395a:610,_0x56c7d0:993,_0x3a833b:52,_0x22be0b:"z[F@",_0x5754e6:36,_0x4519cd:"t4e]",_0x41cb74:283,_0x2b789c:235,_0x37e8db:548,_0x119983:39,_0x38521b:447,_0x5938ca:74,_0x4926f2:"L5^d",_0x2cf2e2:"7zvP",_0x54dacd:640,_0x67d2a7:300,_0xfe10a1:580,_0x4e3531:1513,_0x108f19:1678,_0x4f32a2:2031,_0x23328d:"k84#",_0xe5f8b3:172,_0x1e321f:1086,_0x3bc2ec:504,_0x36b0ac:1042,_0x11070a:178,_0x57be70:203,_0x448934:1859,_0x1c2828:"ls$n",_0x40bcac:2024,_0x2086a5:1755,_0x526eb4:391,_0x14562a:156,_0x2fb766:895,_0x10f098:881,_0x484c7:1411,_0x13e608:137,_0x172e25:"Rde#",_0x84ff04:95,_0x139ebe:97,_0x25d28e:274,_0x1d8a09:"&SKJ",_0x126772:604,_0x154f62:919,_0x2b0849:781,_0x357704:905,_0x8f577b:1076,_0x22c8c9:"L@CO",_0x2e0e13:1307,_0x30766e:632,_0x120f00:1120,_0x5b0c3c:1313,_0x22376d:848,_0x5934dc:1325,_0x9c1d30:370,_0x1be9c6:658,_0x15d89c:2059,_0x14304e:1646,_0x3b0fcf:"SJQ$",_0x1aecfa:289,_0x1245a2:1411,_0xc9e218:"m2$h",_0x9f42b9:2269,_0x5c8201:2156,_0x2eba1d:2652,_0x57f725:"UKWv",_0x2dd422:2100,_0x355cdd:416,_0x3965f3:519,_0x20d667:44,_0x1f764b:357,_0x173407:128,_0x59e362:64,_0x3be64f:1259,_0xad42a4:733,_0xe551fd:925,_0x2cc5ee:1415,_0x276e38:244,_0x1baf8a:152,_0x190595:2188,_0x1577ba:1678,_0x29dd9d:1224,_0x137794:"&w*^",_0xbdf736:1550,_0x4b6de6:"5jgJ",_0x5f5de2:369,_0x2146c9:2,_0x44d4f8:234,_0x115396:514,_0xa12501:218,_0x1f689e:439,_0x320951:784,_0x4498ee:541,_0x3fd8df:2274,_0x252309:"z[F@",_0x5caff1:"Oz]f",_0x201c4f:268,_0x1f1d0e:651,_0x3d3cd9:260,_0xf20117:318,_0x207ea9:126,_0x51e46a:1491,_0x5f1d7b:1163,_0x225a38:"0j)$",_0x26fb4f:2413,_0x4d6ea9:1756,_0x286a6a:49,_0x469c86:915,_0x44a962:56,_0xb0ef89:598,_0x10640b:66,_0x3eb547:"&w*^",_0x37ddd6:1081,_0x878f86:811},St={_0x3c09d6:427,_0x560b20:209},kt={_0x343808:1723},_t={_0x8c9dfc:317,_0x5569a6:483,_0x45123e:168,_0x24d8d5:"hOrE",_0x2ed9e4:"m2$h",_0x522151:258,_0x211350:109,_0x23a906:85,_0x3f32a6:"]2Q4",_0x3c4f95:674,_0x263773:453,_0x2f6828:226,_0xa65815:1365,_0x1ecbb4:1326,_0x18fe4c:"9Zmk",_0x3c9d5f:2170,_0x5b08c8:2143,_0x967c86:"Knp@",_0x5ed855:1692,_0x4e3ec1:1517,_0x2b284a:2207,_0x57de34:"CqXn",_0x31e5f1:1220,_0x2a1752:586,_0x1754c8:917,_0xbb161c:"Ha2y",_0x4f607b:480,_0x561b48:348,_0x3cc382:106,_0x34c1ea:156,_0x8619e8:"L@CO",_0x5050c2:208,_0x3b1675:179,_0x202203:236,_0x29ace8:635,_0x5cbb9d:1024,_0x1a2fb7:299,_0x4b00f1:724,_0xf56b19:536,_0x1b5f71:70,_0x24046c:580,_0xd4791c:177,_0x301db0:166,_0x50b69a:172,_0x530e84:153,_0x190ebf:749,_0x43bbaa:350,_0x57c44d:617,_0x4b3cf1:1606,_0x4cffbc:"*^uy",_0x3cfc01:680,_0x4d5e68:982,_0x5b00a1:1606,_0x465c66:1081,_0x2a6c46:874,_0x6fcd1a:54,_0x5a26a2:436,_0xe6c227:"5jgJ",_0x5375a9:357,_0x7db954:48,_0x5524c8:145,_0x3f7c9f:305,_0x30962c:720,_0x348c38:173,_0x148f6c:3,_0x4b71d6:"7zvP"},It={_0x50ba5c:30},Ct={_0x102ba5:79,_0x22668d:154,_0x107779:843},Lt={_0x5dba41:1569,_0x2de5aa:1603,_0x3e632f:"SJQ$",_0x1a0c37:1601,_0x11c785:987,_0x1590a8:1383,_0x20ab88:"w2QK",_0x272ce1:532,_0x26c3a0:147,_0x384aa2:612,_0x1ff78c:841,_0x336f0d:868,_0x45d91a:571,_0x4d487e:1703,_0x1e81ae:2114,_0x50c2aa:2280,_0x3d75ae:"nKVY",_0xf98d8b:374,_0x2888f3:598,_0xe5abf0:40,_0x55130a:302,_0x2a15e0:107,_0xa93eca:384,_0x2a7468:1035,_0x44cd8e:661,_0x34305e:"Rde#",_0x4e4f59:1230,_0x1241c5:1161,_0x32a0d:1169,_0x363f17:1927,_0x4513ee:2486,_0x71a995:2096,_0x2f3f67:"EeqF",_0x2900d6:173,_0x7d89b8:48,_0x54aa33:"*^uy",_0x4d2588:433,_0xfe8d30:799,_0x2a85a2:908,_0x472395:"d)E#",_0x443c27:779,_0x2abcd2:649,_0x34f0c1:793,_0x3be311:"SJQ$",_0x214395:1314,_0x3c21c8:563,_0x34d821:898,_0x510c49:2073,_0x308551:1824,_0x5ace45:1154,_0x208c12:1921,_0x486af8:1660,_0x1fd9d8:173,_0x1927bf:36,_0x2c899a:84,_0x288d77:494,_0x1317d5:984,_0x52829f:"e^DI",_0x4aa3e3:"0j)$",_0x2963da:"RE(F",_0x312911:431,_0x231133:1301,_0x15137f:"m2$h",_0x418188:1533,_0x9ebbe1:183,_0x68ab52:97,_0x28988e:170,_0x766410:1423,_0x1865e4:1603},Nt={_0x49234c:390},jt={_0x4d8bb7:445,_0x3514cd:202,_0x48dd50:473},zt={_0x10a950:1064,_0x37b070:1700,_0x12fe63:"hz]L",_0x1adf3f:761,_0x2422ec:2059,_0x32deab:372,_0x2d6483:661,_0x4c3e7a:885,_0x5ab09f:1294,_0x1aedc1:1714,_0x590ea0:594,_0xb67698:1215,_0x4345c9:1733,_0x1d59ea:1809,_0x222665:2151,_0x40368c:990,_0x32d09e:1497,_0x26cdee:"UKWv",_0x119106:1472,_0x4bc799:1640,_0x1df20d:1553,_0x54e8dc:1110,_0x4bbb35:1419,_0x437610:692,_0x297a47:658,_0x103757:1122,_0x80c837:1300,_0x500ada:773,_0x18a143:1410,_0x38d2a2:1199,_0x422807:1155,_0x37d50e:1570,_0xed489d:358,_0x4745c4:751,_0x4e50cb:458,_0x1e86c3:1595,_0x5c31af:2120,_0x3a05b9:"l*oo",_0x2fca61:1833,_0x4d62db:0,_0x60fa79:"GiZm",_0x36a6ef:634,_0x20ab92:799,_0x5cc8b0:"]2Q4",_0xfd3896:757,_0x511915:531,_0x16794a:36,_0x5e376f:375,_0xe31fc8:"wYQn",_0x73da3a:262,_0x3ca34a:1359,_0x368c1b:1134,_0x2d22ce:"GiZm",_0x50a524:1123,_0x4cef01:478,_0x2dce21:166,_0x4c6270:968,_0x2375cf:751,_0x32d803:1247,_0x4d1189:810,_0x4f6cbf:"kMD$",_0x2f79c9:150,_0x435d9f:476,_0x50d37b:143,_0x5156d8:63,_0x55dfee:254,_0x5e690f:685,_0x5176f7:139,_0x2fddc4:"7h4X",_0x1713a9:"Cko8",_0x4b5d5c:823,_0x573082:1034,_0x4e51d4:1194,_0xf27940:"SJQ$",_0x5c7ea4:800,_0x391df0:434,_0x52e770:134,_0x1756b6:859,_0x34b934:318,_0x32a45e:1746,_0x243bb1:1523,_0x331bb9:566,_0x3d6070:430,_0x36aac5:1589,_0x527ccc:1335,_0x20aff8:1270,_0x12e826:"d)E#",_0x2866b3:1988,_0x2ff0c7:"hz]L",_0x269bbc:"7]iE",_0x3bd21f:728,_0x33d8cc:283,_0x3e32a5:1156,_0x1ddcd6:743,_0x2ddc87:390,_0x1dc0c1:1071,_0x3d18c3:1501,_0x306c3a:1067,_0x162220:"w2QK",_0xd5f5db:1474,_0x181966:1336,_0x256723:1172,_0x5d3313:"hz]L",_0x3eddd6:868,_0x35f6ec:1195,_0x3d19a9:364,_0x8869a9:736,_0x5f130b:1341,_0x1ebc3f:1106,_0x3103a7:1075,_0x562f74:524,_0x15f179:1140,_0x349408:348,_0x45c8d9:878,_0x404f68:822,_0x3acfe7:"VUBu",_0x428a42:1301,_0x139424:"7]iE",_0x176d28:1588,_0x3c76ed:1112},Pt={_0x5818ae:53,_0xb616b:87,_0xe0e894:778},Tt={_0x210c94:1038,_0x458267:151,_0x374bda:263},At={_0x169157:1251,_0x4082aa:"ls$n",_0x34d10c:1485,_0x32d3f8:964,_0x31cecb:915,_0x727179:"EQQW",_0x47c4ba:1282,_0x212a53:"kMD$",_0x332491:1141,_0x227c7f:820,_0x1ea3a5:98,_0x34d797:339,_0x469641:173,_0x490961:"]2Q4",_0x1ba2e9:1251,_0x341a76:1520,_0x5c103c:239,_0xfac76b:"le$3",_0x1f8761:"d)E#",_0x2fa7ad:46,_0x4f13ca:"l*oo",_0x3cc12c:187,_0x4ca884:7,_0x57c5fd:372,_0x59a963:292,_0x4dbdca:706,_0x392e5f:"L5^d",_0x14d666:17,_0x1ea0bd:137,_0xaa9300:337,_0x25a707:46,_0xc46905:423,_0x1930eb:21,_0x1df17b:63,_0x20da34:193,_0x24d5dc:100,_0x3f04d7:19,_0x592ede:93,_0x5b82e9:661,_0xc9f1bd:184,_0x1c753a:449,_0x4e0de7:"CqXn",_0x13008a:401,_0x2c5693:473,_0x22725b:827,_0x5bc338:433,_0x14fbb4:1210,_0x35e348:1103,_0x438ba1:1533,_0x58731d:203,_0x1c9fac:917,_0x18fa59:"#HM9",_0x80da98:841,_0x5e0464:378,_0x3834be:375,_0x7d0f1:157,_0x3dec7f:587,_0x1c1a2a:"#HM9",_0x5dbc96:995,_0x5372d2:1004,_0xb61b1c:1081,_0x1c28a5:121,_0x10f45d:647,_0x44b0db:"hOrE",_0x2c014f:127,_0x45d4b4:910,_0x1fc463:55,_0xb57c82:334,_0x25b568:503,_0x1cef2c:197,_0x410d45:22,_0x5e3b29:"%dz!",_0x21b74c:149,_0x5b0233:407,_0x4eaa66:796,_0x586792:"Knp@",_0x1dafbc:775,_0x4b4010:485,_0x2543c4:1108,_0x30b7c3:1910,_0x4b524e:"z[F@",_0x4c3480:1510,_0x169be3:1505,_0x275a0b:637,_0x59d6d7:797,_0x5e8af2:429,_0x577a82:"w2QK",_0x11e2ee:86,_0x43f3f7:41,_0x2b5b34:"*^uy",_0x34fd37:226,_0x29b869:207,_0x34b36c:"GiZm",_0x15a913:521,_0x541ead:760,_0x2e8a1b:789,_0xa47e45:953,_0xc07552:1174,_0x3fe758:923,_0x4c26c9:1441,_0x58ec3c:329,_0x46a053:49,_0x3f50e7:478,_0x4ca578:409,_0x2ddd87:"]v[l",_0x311d52:1047,_0x53b54b:605,_0x314ef2:615,_0x3a3a05:"Cko8",_0x105e11:204,_0x2ba9f5:438,_0x27d78c:47,_0x24f8de:307,_0x51c267:618,_0x47ee18:652,_0x761f21:1181,_0xa42f7c:1032,_0x25cec0:957,_0x1d9df5:101,_0x14f202:178,_0x434cb4:282,_0x1c0a7f:"96))",_0x40ff08:502,_0x257909:66,_0x4e45ae:"aFQP",_0x14099e:451,_0x21b257:"VUBu",_0x626189:567,_0x247deb:1088,_0x5a514b:"k84#",_0x4f04f6:813,_0x53e9f1:1139,_0x41f530:939,_0xc1e9d:742,_0x2d27ea:1251,_0x5a9685:693,_0x2b1405:855,_0x5edea1:1421,_0x4159a2:"hz]L",_0x411f24:1335,_0x1afc25:919,_0xd1bb54:1375,_0x3ed5f2:431,_0x2ee4ea:956,_0x5ec40f:1355,_0x3560e8:"L@CO",_0x41a285:1342,_0xd61537:52,_0x109ddd:139,_0x38148c:133},Dt={_0x112000:232,_0x25b5b4:139,_0x251ef5:171},Et={_0x5608f4:139,_0x5b0930:463,_0x209bbd:527},Ot={_0x496f35:1269,_0xb080f2:"wYQn",_0x5415b0:1667,_0x4a41d6:1896,_0x4368ed:1636,_0x990a78:2047,_0x193466:1066,_0x58a527:511,_0x46365e:1132,_0x59f417:925,_0x49674e:"L5^d",_0x2f14ea:973,_0x355c8c:"le$3",_0x58dd9e:2363,_0x6b8711:"*^uy",_0x55f442:2032,_0x3a4046:1120,_0x49f52b:755,_0x71024:939,_0x12632a:"&SKJ",_0x1ab813:893,_0x52dc8c:963,_0x261f1d:926,_0xcd5bd2:1104,_0x44865b:775,_0x1a3c01:1565,_0x1d13c5:"&w*^",_0x3812bb:418,_0x57afd7:930,_0x4b2f50:1205,_0x2a90ea:"O^^z",_0x4230e8:213,_0x57e46f:1686,_0x2af622:1447,_0x2c6ac5:1856,_0x37c222:300,_0x3468ee:288,_0x241dcc:1364,_0x4516f9:1313,_0xb9642d:"]2Q4",_0xdd4001:1024,_0x50d0c7:644,_0x240d90:530,_0x2d0512:587,_0x534cf1:"5jgJ",_0x5251d3:1044,_0x279cbf:1013,_0x4ee11d:1095,_0x19b08a:433,_0x319e03:617,_0x4d5765:"l*oo",_0x353bfa:1245,_0x14c334:300,_0x2aaf4e:446,_0x7686ac:"VUBu",_0x546d55:496,_0x293080:395,_0x1dbc3c:107,_0x21f6f9:89,_0x4d8161:814,_0x4626a3:973,_0x5aa8a0:1155,_0x567b25:"Ha2y",_0x2d7a10:869,_0x54eedd:1407,_0x20b6b2:1674,_0x2fe676:1684,_0x1d466b:114,_0x338151:152,_0x2817cf:612,_0x1d0659:149,_0x1dc2b4:"!RZj",_0x48fddf:284,_0x3fdfa6:104,_0x2e9d1b:"SJQ$",_0x552216:316,_0x150d1c:60,_0x64d032:"7h4X",_0x2211b8:1662,_0x5bdd76:1426,_0x18754e:1992,_0x4979a5:1533,_0x34ea29:1095,_0x40ef6b:615,_0x46e742:696,_0x2171c2:681,_0x1f5314:1221,_0x183c16:1120},Wt={_0x228a63:417,_0x9bfb06:134},Rt={_0x567109:471,_0x1dcdc0:278},Bt={_0x44f893:389},Ut={_0x1c10d9:874,_0x4dca10:769,_0x379c44:474,_0x76c380:667,_0x31f8d3:333,_0x37e037:"EQQW",_0x214bd8:329,_0x1370a4:368,_0x500592:301,_0x39a404:"nKVY",_0x57ef4c:605,_0x188401:159,_0x50bd9e:"]2Q4",_0x2bd885:1396,_0x2bed23:1096,_0x1bedcb:523,_0x3b4abb:329,_0x2a4131:365,_0x451b93:60,_0x5e0907:"!RZj",_0x1bedaa:193,_0x47e9cc:97,_0x44e4ae:415,_0x23aa69:622,_0xf4ac16:244,_0x3b05f6:1851,_0x462427:1572,_0x294565:2003,_0x45c75e:"k84#",_0x44df22:1608,_0x3e967d:1415,_0x332438:1873,_0x5b32a6:174,_0x3064bb:359,_0x2c1c5a:231,_0x90dfb6:"aFQP",_0x3e192f:742,_0x4d442a:289},$t={_0x330e3a:387,_0x1b18b3:346,_0x3f266c:1597},Ft={_0x352538:291,_0x3ad1d5:120,_0x3986b9:285},Vt={_0x1f8da8:156,_0x2a1fb7:332,_0x357752:579},Ht="5jgJ",Gt="dSDa",Zt="&w*^",Yt={_0x509be8:698,_0x357c75:219,_0x86ea90:214,_0x1e4397:"z[F@",_0x10dfc0:64,_0x3e0218:406,_0x496c8e:"l#ro",_0x5757a2:997},Qt={_0x1f3277:"L5^d",_0x2874db:304,_0xeb0042:1490,_0x1bde73:829,_0x5f58e1:1047,_0x4cbdad:1961,_0x134d18:2182,_0x3abc61:2146,_0x510d78:1397,_0x4c6ee3:265,_0x35840d:663,_0x586c72:119,_0x5ae4bc:534,_0x19fa40:"RE(F",_0x3a1680:166,_0x4b0631:534,_0xadc548:"!RZj"},Jt={_0x3f5c0e:233,_0x3075de:397},qt={_0x3af118:833},Kt={_0x57941c:464,_0x2e7cb1:817,_0x4d6771:1132,_0x571358:236,_0x182cb7:"kMD$",_0x3b24f5:356,_0x418aff:802,_0x424e25:905,_0x39dff0:546,_0xbd0ca6:814,_0x1b2157:816,_0x486f24:386,_0x3ae737:424,_0x27c2a1:170,_0x53ba11:440,_0x2ffdc9:210,_0x245470:314,_0x53193f:251,_0x27a917:"%dz!",_0x1c111c:369,_0x48dce4:537,_0x3b0d91:327,_0x587fa7:977,_0x40aa83:"7h4X",_0x328d6e:56,_0x329b96:"l#ro",_0x2bc209:290,_0x46192c:360,_0x4ae1f5:79,_0x5872c0:5,_0x37657b:154,_0x5b9675:93,_0x4a0ca2:578},Xt={_0x4a0f26:924},te={vMDCu:function(t,e){return t(e)},qsGKf:function(t,e){return t===e},hVXUZ:ne("*^uy",0,433),QobgE:function(t,e){return t<e},aGtBk:ne("SJQ$",0,129),ihKdA:de(2068,0,0,i),CjHrP:function(t,e){return t!==e},DCqCX:ve(0,176,0,n),vzWEU:ne("7]iE",0,712),ixwXd:function(t,e){return t!==e},BaaBF:ze(0,0,0,i,1979),zaWjo:ve(0,-377,0,s)+ze(0,0,0,r,1923)+ze(0,0,0,o,1588),yCerA:function(t,e){return t===e},VJrtY:ze(0,0,0,"QcNv",2276),vLYkm:ve(0,-128,0,"VUBu"),Yraxc:function(t){return t()},wqOKk:function(t){return t()},eUZvd:function(t){return t()},qaOrX:function(t,e,i,n,s){return t(e,i,n,s)},NjbTd:ze(0,0,0,a,1362),yTwRq:ve(0,324,0,s),FJDVV:ne("z[F@",0,515),gYSRH:ne(l,0,604),QdLcS:ze(0,0,0,"EeqF",1433),dUmdK:ve(0,-407,0,c)+ze(0,0,0,"5jgJ",1711)+Se(0,0,"le$3",0,1042)+ze(0,0,0,u,1466)+"d",NZymz:function(t,e){return t===e},XxIRA:ne("m2$h",0,1),HTDzz:ne("hOrE",0,117),XMyAA:function(t,e){return t!==e},lcJoH:ne("dSDa",0,-245),TClUo:ze(0,0,0,"hz]L",1847)+ve(0,-334,0,"hOrE")+"re",agZVB:ze(0,0,0,"Rde#",1917)+"ss",KYsEh:function(t){return t()},FiSyO:function(t){return t()},aqvIt:function(t,e,i,n,s){return t(e,i,n,s)},nGuWs:ze(0,0,0,"aFQP",1772),OltAx:Se(0,0,"l#ro",0,771)+ze(0,0,0,h,2224)+de(2115,0,0,"7h4X")+ze(0,0,0,"96))",1332)+ze(0,0,0,"9Zmk",2026)+"p",sdDtM:function(t,e){return t===e},sMvJw:ne("UKWv",0,396),ChQiK:function(t,e){return t*e},yJRlh:function(t,e){return t+e},ATCpG:ve(0,-610,0,"Rde#"),GpPZh:function(t,e){return t!==e},fScgS:ve(0,305,0,d),dtZVy:de(2231,0,0,"l*oo"),tCPZj:ne("]2Q4",0,-167),ZZxcF:function(t,e,i){return t(e,i)},xHSke:function(t,e){return t===e},tVNlv:de(2002,0,0,"&SKJ"),mNYRr:ve(0,92,0,"kMD$"),TyRxb:function(t,e){return t===e},PIKdj:ve(0,-185,0,"7]iE"),ZlicE:function(t,e){return t(e)},rvcOo:function(t,e){return t<e},gTNgd:ne("dSDa",0,191),nHVnf:de(1634,0,0,"kMD$"),yiFZm:function(t,e){return t>e},JufhJ:function(t,e){return t!==e},mCuYd:Se(0,0,"&w*^",0,714),ZpLPO:ne(f,0,370),ICZfV:ze(0,0,0,"Ha2y",1831),LObJZ:function(t,e){return t(e)},oZBWF:ve(0,39,0,p),enQCU:ze(0,0,0,u,2054),whfRU:ze(0,0,0,r,1714),aENrE:de(1660,0,0,"t4e]"),ELAjZ:function(t,e){return t(e)},RJkSy:function(t,e){return t!==e},iqGnQ:ve(0,211,0,g),GMEPx:function(t,e){return t!==e},SRCgZ:Se(0,0,"e^DI",0,1215),zcauO:de(1218,0,0,"*^uy"),qhNGL:function(t,e){return t===e},YrFFD:ne("UKWv",0,667),ncOGG:ve(0,-456,0,m),zOjXs:de(2204,0,0,"UKWv"),vVcLg:de(1954,0,0,"Oz]f"),zYDTe:ne("&SKJ",0,332),xKWzl:function(t,e){return t!==e},DGneZ:ze(0,0,0,"0j)$",1969),wLmrq:ze(0,0,0,"e^DI",1881),ZwkeJ:function(t,e){return t(e)},cWAyP:ne(a,0,681),PmSmW:de(1556,0,0,"Oz]f"),QSmZN:function(t,e){return t!==e},pLDyz:function(t,e){return t!==e},qlWCF:ve(0,277,0,"nKVY"),mMLpI:de(1913,0,0,"L5^d"),JMTgU:function(t,e){return t(e)},andoH:function(t,e){return t(e)},oGSeX:ze(0,0,0,"nKVY",1580)+ne("L5^d",0,451)+ze(0,0,0,v,1348)+"_5",hveYQ:de(2054,0,0,"e^DI")+"56",zhFJk:de(1643,0,0,"GiZm"),mlMoK:de(1626,0,0,"m2$h")+"y",pwPUL:function(t,e){return t%e},aFZPV:function(t,e){return t<<e},OojAI:function(t,e){return t+e},dxCDF:function(t,e){return t*e},KjuoA:function(t,e){return t<e},sRyqX:function(t,e){return t===e},uAPLq:ve(0,-166,0,"Rde#"),TTXRA:ve(0,-254,0,"z[F@"),sAwPh:function(t,e){return t%e},aqcfp:function(t,e){return t+e},RLBaQ:function(t,e){return t!==e},yNKMZ:Se(0,0,"*^uy",0,561),MozLs:ve(0,199,0,"hz]L"),GwWHP:function(t,e){return t!==e},GNUGr:de(1450,0,0,y),sIYVO:function(t,e){return t-e},mBApw:function(t,e){return t||e},oPmbz:function(t,e){return t!==e},lvCXo:function(t,e){return t!==e},rrVZv:ze(0,0,0,"d)E#",1841),CNqWg:function(t,e,i){return t(e,i)},nLnjz:ve(0,-458,0,x)+ne(b,0,698)+de(2116,0,0,"hOrE")+ze(0,0,0,"Rde#",1554)+ze(0,0,0,w,1274)+ve(0,11,0,"aFQP")+"te",rwpWh:function(t,e){return t===e},nywKD:ne("7]iE",0,-116),dQhEm:ne(x,0,311),actyh:function(t,e,i){return t(e,i)},SrzBa:function(t,e){return t(e)},hZgSJ:function(t,e,i){return t(e,i)},zqoBa:function(t,e,i,n){return t(e,i,n)},yeOYv:function(t,e){return t!==e},uxuah:ne(M,0,-7),cdOkp:function(t,e){return t(e)},YLeyO:function(t,e){return t===e},xnqBQ:ne("Oz]f",0,195),bBvJa:function(t,e){return t(e)},VIZRF:function(t,e,i){return t(e,i)},dqLVw:function(t,e){return t>=e},EAMMr:function(t,e){return t!==e},ZRscx:ve(0,-287,0,s),SFnUd:ve(0,-297,0,"*^uy"),faISM:ze(0,0,0,"9Zmk",2050)+ne("Rde#",0,-52)+ne(S,0,-76)+ne("7]iE",0,271),DJXcB:function(t,e){return t===e},XIREa:ne(k,0,-118),NCYxv:function(t,e){return t===e},NHVHG:de(1644,0,0,"nKVY"),QuaYI:function(t,e,i,n){return t(e,i,n)},KOBLm:de(1273,0,0,"l*oo")+"l",LdbPs:ze(0,0,0,"Oz]f",1458)+Se(0,0,"&w*^",0,1388),AczKj:function(t,e){return t===e},uFVqh:ze(0,0,0,d,1765),LlsZQ:function(t,e){return t!==e},NINvP:de(1319,0,0,"%dz!"),EnyRp:Se(0,0,"t4e]",0,786),fhWYI:function(t,e){return t||e},bcxdG:function(t,e){return t===e},NHzsI:ze(0,0,0,"VUBu",2145),vhhIp:ze(0,0,0,_,2191),nrbjj:Se(0,0,"z[F@",0,638),qOjDU:function(t,e){return t===e},iWqgJ:de(1662,0,0,"RE(F"),vqdmq:ne(n,0,204),BGuui:function(t,e){return t!==e},oCEQV:ve(0,-125,0,"#HM9"),TOapC:function(t,e){return t(e)},nmeIY:function(t,e){return t!==e},OyyDK:ne("e^DI",0,661),FoKiJ:ze(0,0,0,"wYQn",2238),fgazX:function(t,e){return t(e)},auCAE:de(1399,0,0,"UKWv")+ne("7]iE",0,552)+Se(0,0,"0j)$",0,542)+ne("7zvP",0,229),aFeNo:function(t){return t()},iOiVx:function(t,e){return t(e)},thOpc:function(t,e){return t(e)},DOqdK:function(t,e){return t>=e},ShKXI:function(t,e){return t(e)},IBSpj:function(t,e){return t>=e},iZsav:function(t,e){return t(e)},oJXDf:function(t){return t()},thkZQ:function(t,e,i){return t(e,i)},bTPxl:function(t,e){return t===e},zzKzD:function(t,e,i){return t(e,i)},euFzG:function(t,e){return t&&e},dIcgr:Se(0,0,"nKVY",0,1234)+Se(0,0,"L@CO",0,753)+ve(0,332,0,"!RZj")+ve(0,319,0,"l#ro")+Se(0,0,"L@CO",0,1230)+de(2031,0,0,"L@CO"),BZpac:function(t){return t()},nVYVF:function(t,e){return t(e)},cYmSI:function(t){return t()},mRpmn:function(t,e){return t(e)},znHao:function(t,e,i){return t(e,i)},HmqGU:function(t,e){return t(e)},rigyW:ze(0,0,0,"w2QK",2029)+de(1445,0,0,l)+Se(0,0,I,0,616)+ve(0,-348,0,"&SKJ")+Se(0,0,"&SKJ",0,579)+ve(0,383,0,C)+ze(0,0,0,"e^DI",2252)+ve(0,430,0,"0j)$")+ze(0,0,0,L,1945)+ze(0,0,0,"wYQn",1266),pohks:function(t,e,i){return t(e,i)},cLfsX:function(t,e){return t(e)},UbiJk:function(t){return t()},SFPPK:function(t,e){return t(e)},VpAIq:function(t,e,i){return t(e,i)},wJqnw:Se(0,0,"m2$h",0,842)+ze(0,0,0,"%dz!",1524)+de(1970,0,0,_)+ze(0,0,0,"EQQW",1720)+de(1304,0,0,o)+ve(0,-386,0,N),HXSvB:function(t,e,i){return t(e,i)},uEDNG:function(t){return t()},iBDIx:function(t,e,i,n){return t(e,i,n)},NZSIn:Se(0,0,"*^uy",0,748)+de(1706,0,0,N),QfquV:ne(j,0,496)+"t",urArB:ve(0,-519,0,v)+"e",FkoPS:Se(0,0,"7]iE",0,855)+ne("dSDa",0,-334)+"to",eTCmT:de(1746,0,0,"5jgJ")+ze(0,0,0,"EeqF",1234),UkZMH:function(t,e){return t*e},IllRT:function(t,e){return t*e},HdJwj:function(t,e){return t*e},ChgdI:ve(0,42,0,"RE(F")+ze(0,0,0,"wYQn",1935)+ne(z,0,66)+"l",pXPNg:de(1863,0,0,"t4e]")+ve(0,-353,0,P)+ve(0,103,0,"96))")+Se(0,0,"QcNv",0,1249)+ze(0,0,0,"aFQP",1544)+ne("7h4X",0,-184)+de(1671,0,0,"L@CO")+Se(0,0,w,0,1301)+ve(0,-427,0,s)+de(1236,0,0,T)+ne(A,0,127)+ve(0,-453,0,"e^DI")+ve(0,-451,0,l)+ze(0,0,0,"EeqF",2183)+ne(S,0,586)+Se(0,0,"GiZm",0,1441)+ne("hOrE",0,-168)+ne("l*oo",0,615)+ve(0,-552,0,p)+ze(0,0,0,P,1343)+de(1943,0,0,"]2Q4")+Se(0,0,"O^^z",0,1362)+de(1392,0,0,"kMD$")+ve(0,-236,0,"*^uy")+Se(0,0,"7]iE",0,1237)+ve(0,165,0,M)+Se(0,0,"&w*^",0,575)+ve(0,345,0,"k84#")+ne(A,0,-244)+ne("Knp@",0,-258)+ve(0,-393,0,"l#ro")+de(1339,0,0,"96))")+de(2142,0,0,T)+ne("aFQP",0,236)+ne("d)E#",0,272)+ze(0,0,0,"EQQW",1529)+ne("QcNv",0,172)+ne("z[F@",0,285)+ne("VUBu",0,141)+ve(0,-602,0,"0j)$")+de(1206,0,0,"ls$n")+de(1561,0,0,"7h4X")+ve(0,-378,0,"!RZj")+de(1995,0,0,"Knp@")+Se(0,0,"Rde#",0,1212)+ve(0,316,0,"96))")+ve(0,-461,0,"wYQn")+ne(y,0,582)+ze(0,0,0,"Cko8",1609)+de(1600,0,0,"O^^z")+ne("m2$h",0,-194)+ze(0,0,0,"EQQW",1254)+Se(0,0,c,0,859)+Se(0,0,"L5^d",0,1262)+ze(0,0,0,"hOrE",1626)+ne("%dz!",0,456)+de(2233,0,0,j)+ze(0,0,0,f,2239)+ne("Cko8",0,691)+de(1581,0,0,"l*oo")+ve(0,-159,0,"k84#")+ne("5jgJ",0,310)+de(1568,0,0,D)+ne("]v[l",0,-8)+ve(0,-77,0,D)+ze(0,0,0,"L@CO",1435)+ze(0,0,0,"l*oo",1722)+ze(0,0,0,"l#ro",1350)+ne("]v[l",0,680)+ne("96))",0,525)+Se(0,0,"0j)$",0,751)+ne("k84#",0,467)+Se(0,0,"SJQ$",0,1302)+Se(0,0,"SJQ$",0,719)+ve(0,-335,0,"kMD$")+ne("CqXn",0,544)+de(1821,0,0,S)+ve(0,-290,0,"Rde#")+"AB",hkYDn:de(1289,0,0,"7]iE")+"o",uqkft:ve(0,-316,0,"hOrE")+ve(0,-573,0,"d)E#")+Se(0,0,"d)E#",0,1293),QdmBe:Se(0,0,"t4e]",0,1096)+de(1779,0,0,"5jgJ")+de(1245,0,0,"z[F@")+Se(0,0,k,0,1417)+Se(0,0,E,0,1433)+de(1603,0,0,"Oz]f")+Se(0,0,"ls$n",0,1386)+ze(0,0,0,"l#ro",1857)+ne("VUBu",0,558)+ze(0,0,0,"m2$h",2127),NTOfR:ne("EeqF",0,608)+ze(0,0,0,"nKVY",1405)+Se(0,0,"t4e]",0,1218)+ne("SJQ$",0,105)+Se(0,0,"e^DI",0,663)+ne("k84#",0,-142)+de(2103,0,0,"7]iE")+ne("Rde#",0,-155)+ne("QcNv",0,-22)+ve(0,139,0,"d)E#"),ZemVI:de(1506,0,0,L)+Se(0,0,"0j)$",0,1051)+de(1797,0,0,"7zvP")+ze(0,0,0,"O^^z",1905)+ve(0,344,0,"z[F@")+ze(0,0,0,"k84#",1593)+Se(0,0,"9Zmk",0,1022)+ne("l*oo",0,-193)+de(1714,0,0,"%dz!")+ne("L@CO",0,444)},ee=te[de(1588,0,0,"d)E#")],ie="v1";function ne(t,e,i){return qC(i- -596,t)}t[te[ve(0,-347,0,"Ha2y")]][te[de(2188,0,0,"O^^z")]](t[te[ze(0,0,0,h,1640)]][te[ve(0,-260,0,b)]]);let se=0;const re=te[ze(0,0,0,"QcNv",2230)](te[ze(0,0,0,"!RZj",2095)](2,3600),1e3),oe=te[Se(0,0,"Cko8",0,831)](365,te[ve(0,-252,0,"d)E#")](te[de(1252,0,0,m)](24,3600),1e3)),ae=t=>JSON[Se(0,0,"w2QK",0,500)+ve(0,-282,0,"VUBu")](t),le=t=>JSON[ne("VUBu",0,471)](t);let ce=0;const ue=new(t[te[de(1185,0,0,I)]])(te[ze(0,0,0,C,1665)]),he=te[ve(0,362,0,"l*oo")];function de(t,e,i,n){return qC(t-Xt._0x4a0f26,n)}const fe=t[te[ve(0,98,0,"t4e]")]][te[ve(0,-37,0,"Ha2y")]](new Uint16Array(1))[0];function pe(e){function i(t,e,i,n){return de(n- -1792,0,0,t)}function n(t,e,i){return Se(0,0,i,0,e- -546)}function s(t,e,i,n){return ze(0,0,0,e,n- -1542)}function r(t,e,i,n){return ve(0,t-743,0,n)}if(te[r(Kt._0x57941c,0,0,"RE(F")](te[r(831,0,0,"7zvP")],te[s(Kt._0x571358,Kt._0x182cb7,Kt._0x3b24f5,-77)])){const o=t[i("wYQn",Kt._0x418aff,0,281)](e),a=new Uint8Array(o[n(Kt._0x424e25,472,"%dz!")+"h"]);for(let t=0;te[n(0,Kt._0xbd0ca6,"EeqF")](t,o[s(0,"UKWv",Kt._0x1b2157,Kt._0x486f24)+"h"]);t++){if(te[i("&SKJ",Kt._0x27c2a1,Kt._0x53ba11,-70)](te[r(259,Kt._0x245470,0,"0j)$")],te[s(Kt._0x53193f,Kt._0x27a917,0,Kt._0x1c111c)]))return te[r(Kt._0x48dce4,Kt._0x3b0d91,Kt._0x587fa7,Kt._0x40aa83)](_0x477b60,_0x3611f8);a[t]=o[n(Kt._0x328d6e,119,Kt._0x329b96,Kt._0x2bc209)+n(Kt._0x46192c,Kt._0x4ae1f5,"Cko8",Kt._0x5872c0)](t)}return a[r(574,Kt._0x5b9675,Kt._0x4a0ca2,"EQQW")+"r"]}return null}function ge(){function e(t,e,i){return de(e- -988,0,0,i)}const i={mjSCe:function(t,e){return te[(qt._0x3af118,qC(693,"7]iE"))](t,e)}};function n(t,e,i){return ze(0,Jt._0x3f5c0e,Jt._0x3075de,t,i- -133)}return te[e(0,422,Qt._0x1f3277)](te[n("nKVY",0,Qt._0xeb0042)],te[e(0,Qt._0x1bde73,"t4e]")])?"_"+t[e(0,906,"le$3")+"o"][(s=Qt._0x4cbdad,ne("l*oo",0,s-1320)+(Qt._0x3abc61,Qt._0x510d78,ze(0,0,0,"RE(F",2116)))]()[e(Qt._0x4c6ee3,Qt._0x35840d,"7]iE")]("-")[e(Qt._0x586c72,Qt._0x5ae4bc,Qt._0x19fa40)](""):i[n(Qt._0xadc548,0,1820)](_0x1ed1af,_0x18ec07);var s}function me(...t){function e(t,e,i,n,s){return de(s- -642,0,0,n)}function i(t,e,i,n,s){return ve(0,n-301,0,s)}if(!te[i(Yt._0x509be8,0,Yt._0x357c75,Yt._0x86ea90,Yt._0x1e4397)](te[i(Yt._0x10dfc0,0,Yt._0x3e0218,211,Yt._0x496c8e)],te[e(Yt._0x5757a2,0,0,"]v[l",1283)]))return new Function(...t);_0x53ba6e=_0x10ce81[e(0,0,0,"z[F@",1164)]()}function ve(t,e,i,n){return qC(e- -883,n)}function ye(){function t(t,e,i){return Se(0,0,e,0,i- -984)}function e(t,e,i){return ve(0,t-25,0,i)}function i(t,e,i,n,s){return Se(0,0,e,0,s-73)}const n={};n[i(0,"nKVY",0,0,1104)]=te[i(0,"Knp@",0,0,735)];const s=n;function r(t,e,i,n,s){return ne(s,0,e-877)}function o(t,e,i,n,s){return de(s- -606,0,0,i)}if(te[i(0,"GiZm",0,0,945)](te[e(20,0,"*^uy")],te[e(121,0,"Ha2y")]))throw new _0x3ce5c5(s[t(0,"k84#",-223)]);{const n=te[r(0,1450,0,0,"QcNv")](ge),s=te[r(0,1462,0,0,"9Zmk")](ge),a=te[t(0,"GiZm",443)](ge),l=e(-10,0,"Ha2y")+i(0,"EeqF",0,0,918)+r(0,972,0,0,"7]iE")+t(0,"l*oo",-253)+"y("+n+","+s+(t(0,"l#ro",203)+e(-39,0,Ht)+o(0,0,"Knp@",0,861)+e(195,0,"e^DI")+o(0,0,"&SKJ",0,1002)+i(0,Gt,0,0,686)+r(0,1051,0,0,"EQQW")+t(0,"QcNv",321)+t(0,"t4e]",-320)+o(0,0,"&w*^",0,1361)+r(0,1266,0,0,"Knp@")+o(0,0,"GiZm",0,988)+t(0,"GiZm",-122)+o(0,0,Zt,0,777)+o(0,0,"t4e]",0,1468)+o(0,0,Gt,0,863)+o(0,0,"]v[l",0,1393)+t(0,"m2$h",-525)+e(460,0,"z[F@")+o(0,0,"dSDa",0,1507)+t(0,"EeqF",0)+e(-166,0,"]v[l")+r(0,1132,0,0,Ht)+e(-407,0,"#HM9")+r(0,1415,0,0,"L@CO")+e(166,0,Zt)+i(0,"kMD$",0,0,705))+a+(e(300,0,"l*oo")+t(0,"Knp@",43));return te[t(0,"d)E#",-27)](me,n,s,a,l)}}async function xe(){function t(t,e,i){return ze(Vt._0x1f8da8,Vt._0x2a1fb7,0,t,i- -Vt._0x357752)}function e(t,e){return Se(0,0,e,0,t- -647)}function i(t,e,i,n){return Se(0,Ft._0x352538,i,Ft._0x3ad1d5,n-Ft._0x3986b9)}function n(t,e,i){return ze(0,0,0,i,e- -1526)}function s(t,e,i,n,s){return ze(0,$t._0x330e3a,$t._0x1b18b3,e,s- -$t._0x3f266c)}if(te[i(Ut._0x1c10d9,Ut._0x4dca10,"le$3",1185)](te[s(Ut._0x379c44,"QcNv",Ut._0x76c380,0,-Ut._0x31f8d3)],te[e(720,"hOrE")]))return!0;{const r=await te[e(28,Ut._0x37e037)](Ce);return r?{name:r[t(Ut._0x50bd9e,0,Ut._0x2bd885)],email:r[e(Ut._0x1bedcb,"t4e]",Ut._0x3b4abb,Ut._0x2a4131)],organization:r[n(Ut._0x451b93,-63,Ut._0x5e0907)+n(0,521,"Cko8")+"on"]||null,expires:r[n(0,Ut._0x23aa69,"hOrE")+t("EQQW",Ut._0x3b05f6,Ut._0x462427)]?new Date(r[t(Ut._0x45c75e,0,Ut._0x44df22)+n(Ut._0x5b32a6,86,"O^^z")]):null,trial:r[s(Ut._0x2c1c5a,Ut._0x90dfb6,0,Ut._0x3e192f,-Ut._0x4d442a)+"al"]}:(te[n(0,Ut._0x1370a4,"7h4X")](te[i(0,0,Ut._0x39a404,778)],te[s(0,"Oz]f",Ut._0x57ef4c,0,Ut._0x188401)]),null)}}let be;async function we(){function e(t,e,i,n){return ne(n,0,e-351)}function i(t,e,i,n,s){return ze(0,0,Bt._0x44f893,n,s- -1079)}function n(t,e,i,n){return ne(n,0,e-801)}function s(t,e){return ze(Rt._0x567109,0,Rt._0x1dcdc0,e,t- -341)}function r(t,e,i,n,s){return ne(t,Wt._0x228a63,s-1084)}if(te[i(0,Ot._0x496f35,0,Ot._0xb080f2,744)](te[s(Ot._0x5415b0,"EQQW")],te[s(Ot._0x4368ed,"&w*^",Ot._0x990a78)]))return!1;{if(be){if(te[e(0,564,0,"w2QK")](te[r("dSDa",0,0,0,754)],te[n(0,709,Ot._0x193466,"Oz]f")])){const t={};return t[i(0,Ot._0x46365e,Ot._0x59f417,Ot._0x49674e,Ot._0x2f14ea)+"s"]=te[s(1931,Ot._0x355c8c)],t[s(1578,Ot._0x6b8711)]=te[i(Ot._0x49f52b,0,Ot._0x71024,Ot._0x12632a,406)],t}return be}const o=await t[r("7h4X",Ot._0x1ab813,Ot._0x52dc8c,0,Ot._0x261f1d)][i(Ot._0xcd5bd2,0,0,"ls$n",Ot._0x44865b)+"e"][s(1359,"L5^d",Ot._0x1a3c01)](),a=await t[r(Ot._0x1d13c5,Ot._0x3812bb,0,Ot._0x57afd7,813)+e(0,699,Ot._0x4b2f50,Ot._0x2a90ea)][r("m2$h",Ot._0x57e46f,0,0,Ot._0x2af622)+r("CqXn",Ot._0x2c6ac5,0,0,1476)+e(0,207,Ot._0x37c222,"5jgJ")][i(0,0,0,"RE(F",163)+n(0,Ot._0x241dcc,Ot._0x4516f9,Ot._0xb9642d)+n(Ot._0xdd4001,Ot._0x50d0c7,Ot._0x240d90,"t4e]")+e(0,1039,Ot._0x2d0512,Ot._0x534cf1)]([te[e(Ot._0x5251d3,Ot._0x279cbf,0,"RE(F")],te[e(0,538,0,"le$3")]]),l={};return l[e(0,Ot._0x19b08a,0,"L@CO")]=o[s(1104,Ot._0x4d5765,Ot._0x353bfa)],l[e(Ot._0x14c334,69,Ot._0x2aaf4e,Ot._0x7686ac)+"l"]=o[e(0,Ot._0x293080,Ot._0x1dbc3c,"SJQ$")+"l"],l[i(Ot._0x4d8161,Ot._0x4626a3,Ot._0x5aa8a0,Ot._0x567b25,Ot._0x2d7a10)+s(Ot._0x54eedd,"O^^z",Ot._0x20b6b2)]=a[e(0,Ot._0x1d466b,Ot._0x338151,"l#ro")+i(Ot._0x2817cf,Ot._0x1d0659,0,Ot._0x1dc2b4,Ot._0x48fddf)],l[e(Ot._0x3fdfa6,77,0,Ot._0x2e9d1b)+i(Ot._0x150d1c,0,0,Ot._0x64d032,303)+"re"]=a[s(Ot._0x2211b8,"9Zmk")+s(1159,"5jgJ",Ot._0x4979a5)+"re"],l[r("k84#",0,Ot._0x40ef6b,0,1045)+"ss"]=a[i(Ot._0x46e742,Ot._0x2171c2,0,"&SKJ",Ot._0x37c222)+"ss"],be=Object[e(Ot._0x1f5314,963,Ot._0x183c16,"le$3")+"e"](l)}}async function Me(e,i,n=5){function s(t,e,i,n,s){return Se(0,Et._0x5608f4,s,Et._0x5b0930,i- -Et._0x209bbd)}function r(t,e){return ne(t,Dt._0x112000,e- -Dt._0x25b5b4)}function o(t,e,i){return ve(0,i-1103,0,e)}function a(t,e){return ne(e,0,t-773)}function l(t,e,i,n){return Se(0,0,n,0,i- -125)}if(te[a(At._0x169157,At._0x4082aa)](te[a(1330,At._0x727179)],te[a(1250,At._0x212a53)]))return-1;{const c=te[l(At._0x227c7f,At._0x1ea3a5,At._0x34d797,"L@CO")];try{if(te[a(1238,At._0x490961,At._0x1ba2e9,At._0x341a76)](te[s(0,At._0x5c103c,285,0,At._0xfac76b)],te[r(At._0x1f8761,At._0x2fa7ad)])){const o=new AbortController,u=t[s(0,0,51,0,At._0x4f13ca)+s(0,At._0x3cc12c,At._0x4ca884,At._0x57c5fd,"L@CO")]((()=>o[a(1161,"&SKJ")]()),te[l(At._0x59a963,At._0x4dbdca,583,At._0x392e5f)](n,1e3)),h=await t[r("kMD$",-At._0x14d666,At._0x1ea0bd,At._0xaa9300,At._0x25a707)](te[l(At._0xc46905,0,779,"Oz]f")](c,e),{method:te[l(0,0,988,"GiZm")],body:te[s(0,At._0x1930eb,At._0x1df17b,At._0x20da34,"O^^z")](ae,i),signal:o[s(0,0,109,At._0x24d5dc,"CqXn")+"l"]});return t[r("m2$h",-At._0x5c103c,At._0x3f04d7,At._0x592ede)+s(0,0,At._0x5b82e9,0,"L@CO")+"ut"](u),await h[s(At._0xc9f1bd,At._0x1c753a,4,0,At._0x4e0de7)]()}{const t=te[r("d)E#",-45,At._0x13008a,At._0x2c5693)](_0x89d123),e=te[s(0,0,At._0x22725b,At._0x5bc338,"#HM9")](_0x31672d),i=te[l(At._0x14fbb4,0,At._0x35e348,"m2$h",At._0x438ba1)](_0x24f827),n=a(520,"w2QK",At._0x58731d,At._0x1c9fac)+o(0,At._0x18fa59,686,At._0x80da98)+r("*^uy",-At._0x5e0464,At._0x3834be,At._0x7d0f1)+a(At._0x3dec7f,At._0x1c1a2a,At._0x5dbc96)+"y("+t+","+e+(o(At._0x5372d2,"CqXn",673,At._0xb61b1c)+l(0,At._0x1c28a5,At._0x10f45d,At._0x44b0db,At._0x2c014f)+l(At._0x45d4b4,At._0x1fc463,442,"]2Q4")+s(At._0xb57c82,At._0x25b568,At._0x1cef2c,At._0x410d45,"7h4X")+r(At._0x5e3b29,182,At._0x21b74c,At._0x5b0233)+a(At._0x4eaa66,At._0x586792)+r("]2Q4",517,At._0x1dafbc,At._0x4b4010)+l(0,At._0x2543c4,1018,"l#ro")+o(At._0x30b7c3,At._0x4b524e,At._0x4c3480,At._0x169be3)+s(At._0x275a0b,At._0x59d6d7,At._0x5e8af2,0,"7zvP")+a(1160,At._0x5e3b29)+r(At._0x577a82,At._0x11e2ee,At._0x43f3f7)+r(At._0x2b5b34,-At._0x34fd37,At._0x29b869)+a(847,At._0x34b36c,At._0x15a913,At._0x541ead,At._0x2e8a1b)+o(At._0xa47e45,"EQQW",At._0xc07552,At._0x3fe758,At._0x4c26c9)+r(At._0x44b0db,179,At._0xc9f1bd,At._0x58ec3c)+r("&SKJ",39,At._0x46a053,At._0x3f50e7)+s(At._0x4ca578,0,690,0,At._0x2ddd87)+s(At._0x311d52,At._0x53b54b,At._0x314ef2,0,At._0x3a3a05)+s(At._0x105e11,At._0x2ba9f5,-At._0x27d78c,At._0x24f8de,"hOrE")+l(0,At._0x51c267,At._0x47ee18,"aFQP")+l(At._0x761f21,0,At._0xa42f7c,"Cko8",At._0x25cec0)+s(At._0x1d9df5,0,At._0x14f202,At._0x434cb4,At._0x1c0a7f)+s(At._0x40ff08,At._0x257909,298,0,At._0x4e45ae)+s(0,0,At._0x14099e,0,"le$3")+r(At._0x21b257,-220)+o(At._0x626189,At._0x4e45ae,705,At._0x247deb))+i+(o(0,"]v[l",564)+s(0,0,272,0,At._0x5a514b));return te[a(At._0x4f04f6,"w2QK",At._0x53e9f1)](_0x3a6724,t,e,i,n)}}catch(t){if(!te[a(At._0x41f530,At._0x4082aa)](te[s(0,0,At._0x5a9685,At._0x2b1405,"9Zmk")],te[o(At._0x5edea1,At._0x4159a2,At._0x411f24)])){const t={};return t[s(At._0x3ed5f2,0,530,0,"EQQW")+"s"]=te[l(0,0,At._0x2ee4ea,"96))")],t[o(At._0x5ec40f,At._0x3560e8,At._0x41a285)]=te[r("z[F@",-105)],t}if(te[o(0,"&SKJ",At._0xd1bb54)](_0x341d70[_0x25b9a0],_0x5892cd[_0xcf0111]))return!1}}}function Se(t,e,i,n,s){return qC(s-192,i)}function ke(){}async function _e(t=0){function e(t,e,i,n){return ze(0,0,0,n,t- -448)}function i(t,e,i,n){return Se(0,0,i,0,n-233)}function n(t,e){return ne(t,0,e-Tt._0x210c94)}function s(t,e,i,n,s){return Se(Pt._0x5818ae,Pt._0xb616b,i,0,s- -Pt._0xe0e894)}function r(t,e,i,n,s){return ze(0,0,0,s,t- -1241)}if(te[e(1265,zt._0x10a950,zt._0x37b070,zt._0x12fe63)](te[e(1816,0,zt._0x2422ec,"*^uy")],te[i(zt._0x32deab,zt._0x2d6483,"Knp@",zt._0x4c3e7a)])){const o=await te[e(zt._0x5ab09f,0,zt._0x1aedc1,"Knp@")](We,"ld",!0),a=await o[i(0,0,"nKVY",928)+"le"]();let l=await a[e(1098,zt._0x590ea0,zt._0xb67698,"d)E#")]();if(!t){if(te[e(zt._0x4345c9,0,zt._0x1d59ea,"w2QK")](te[e(1258,zt._0x40368c,zt._0x32d09e,zt._0x26cdee)],te[n("0j)$",1255)]))return null;t=Date[i(0,zt._0x1df20d,"7h4X",1291)]()}if(!l)if(te[i(0,0,"RE(F",zt._0x54e8dc)](te[r(zt._0x437610,zt._0x297a47,zt._0x103757,0,"l#ro")],te[n("SJQ$",zt._0x80c837)])){l=t[n("ls$n",858)+n("96))",zt._0x37d50e)]();const a={};a[s(zt._0xed489d,zt._0x4745c4,"Oz]f",0,zt._0x4e50cb)+e(zt._0x1e86c3,0,zt._0x5c31af,zt._0x3a05b9)+s(zt._0x4d62db,0,zt._0x60fa79,zt._0x36a6ef,-129)+"a"]=!1;const c=await o[i(0,zt._0x20ab92,zt._0x5cc8b0,zt._0xfd3896)+s(zt._0x16794a,zt._0x5e376f,zt._0xe31fc8,zt._0x73da3a,327)+i(zt._0x3ca34a,zt._0x368c1b,zt._0x2d22ce,1437)](a);await c[s(0,zt._0x4cef01,zt._0x12fe63,0,zt._0x2dce21)](l),await c[r(zt._0x4c6270,0,0,zt._0x437610,"&SKJ")]()}else te[n("VUBu",zt._0x2375cf)](_0x3f2a41,_0x51d15d[e(zt._0x4d1189,0,0,zt._0x4f6cbf)+"ge"]);const c=te[r(-2,0,zt._0x2f79c9,zt._0x435d9f,"t4e]")](parseInt,l);if(te[s(zt._0x50d37b,zt._0x5156d8,"SJQ$",0,zt._0x55dfee)](c,t)){if(!te[r(zt._0x5e376f,0,zt._0x5e690f,zt._0x5176f7,zt._0x2fddc4)](te[n(zt._0x1713a9,zt._0x4b5d5c)],te[e(zt._0x573082,zt._0x4e51d4,0,zt._0xf27940)]))return!1;{const a={};a[r(zt._0x391df0,zt._0x52e770,zt._0x1756b6,zt._0x34b934,"*^uy")+i(0,zt._0x32a45e,"L@CO",1309)+s(zt._0x331bb9,0,"w2QK",zt._0x3d6070,648)+"a"]=!1;const l=await o[e(zt._0x36aac5,zt._0x527ccc,zt._0x20aff8,zt._0x12e826)+r(22,0,0,0,zt._0x2ff0c7)+s(0,0,zt._0x269bbc,zt._0x3bd21f,zt._0x33d8cc)](a);await l[i(0,zt._0x3e32a5,"EeqF",zt._0x1ddcd6)](t[n("UKWv",1342)+i(zt._0x306c3a,0,zt._0x162220,1567)]()),await l[i(zt._0xd5f5db,0,"*^uy",zt._0x181966)]()}}else if(te[n(zt._0x5d3313,zt._0x3eddd6)](c,t))return!!te[i(zt._0x8869a9,zt._0x5f130b,"k84#",zt._0x1ebc3f)](te[n("d)E#",820)],te[s(zt._0x45c8d9,zt._0x404f68,zt._0x3acfe7,0,674)])&&-1;return t}_0x37fa22[_0x1031d5]=_0x391494[e(1648,zt._0x428a42,0,zt._0x139424)+r(1049,zt._0x3c76ed,0,0,zt._0x2d22ce)](_0x8bc48d)}async function Ie(){function t(t,e,i,n,s){return ve(0,n-917,0,s)}function e(t,e,i){return ve(jt._0x4d8bb7,i-jt._0x3514cd,jt._0x48dd50,t)}function i(t,e,i,n,s){return ne(n,0,s- -244)}const n={wMsLo:function(t){return te[qC(1224,"le$3")](t)}};function s(t,e,i,n,s){return ze(0,Nt._0x49234c,0,s,n-11)}function r(t,e,i,n){return de(e- -402,0,0,n)}if(te[s(Lt._0x5dba41,Lt._0x2de5aa,0,1887,Lt._0x3e632f)](te[s(0,Lt._0x1a0c37,Lt._0x11c785,Lt._0x1590a8,Lt._0x20ab88)],te[t(0,0,Lt._0x272ce1,844,"dSDa")]))return te[e("%dz!",0,Lt._0x26c3a0)](_0x43522d,_0x3b1d3a);{const o=await te[i(Lt._0x1ff78c,Lt._0x336f0d,0,"Cko8",-Lt._0x45d91a)](We,"lc");if(te[s(Lt._0x4d487e,Lt._0x1e81ae,Lt._0x50c2aa,2187,Lt._0x3d75ae)](o,null))return te[e("5jgJ",0,-66)](te[i(Lt._0x2888f3,Lt._0xe5abf0,Lt._0x55130a,"d)E#",Lt._0x2a15e0)],te[e("m2$h",0,-Lt._0xa93eca)])?null:n[t(0,0,Lt._0x2a7468,Lt._0x44cd8e,Lt._0x34305e)](_0x368b47);try{if(te[t(Lt._0x4e4f59,Lt._0x1241c5,0,Lt._0x32a0d,Lt._0x34305e)](te[s(Lt._0x363f17,Lt._0x4513ee,0,Lt._0x71a995,"aFQP")],te[e(Lt._0x2f3f67,0,Lt._0x2900d6,Lt._0x7d89b8)])){const e=_0x54b094[t(0,0,0,503,Lt._0x54aa33)](_0x2c294b),n=new _0x5963a2(e[i(0,0,0,"Rde#",Lt._0x4d2588)+"h"]);for(let i=0;te[t(Lt._0xfe8d30,0,0,Lt._0x2a85a2,Lt._0x472395)](i,e[t(Lt._0x443c27,Lt._0x2abcd2,0,Lt._0x34f0c1,Lt._0x3be311)+"h"]);i++)n[i]=e[t(Lt._0x214395,Lt._0x3c21c8,0,Lt._0x34d821,"nKVY")+s(Lt._0x510c49,Lt._0x308551,Lt._0x5ace45,1593,"VUBu")](i);return n[r(Lt._0x208c12,Lt._0x486af8,0,"e^DI")+"r"]}{const i=await(await o[e("Cko8",0,-Lt._0x1fd9d8,Lt._0x1927bf,Lt._0x2c899a)+"le"]())[s(0,0,0,1790,"5jgJ")]();return te[t(Lt._0x288d77,0,Lt._0x1317d5,883,Lt._0x52829f)](le,i)}}catch{if(!te[t(0,0,0,729,Lt._0x4aa3e3)](te[i(0,0,0,Lt._0x2963da,-Lt._0x312911)],te[r(0,1748,Lt._0x231133,Lt._0x15137f)]))return null;te[i(Lt._0x9ebbe1,Lt._0x68ab52,Lt._0x28988e,"Knp@",-228)](_0xcf022a,te[s(Lt._0x766410,0,Lt._0x1865e4,Lt._0x231133,Lt._0x2f3f67)])}}}async function Ce(e){function i(t,e,i,n,s){return Se(0,0,s,0,e- -1042)}function n(t,e){return ze(0,0,0,t,e- -1462)}function s(t,e,i,n){return ze(0,0,0,n,i- -1141)}function r(t,e,i,n,s){return Se(Ct._0x102ba5,Ct._0x22668d,s,0,n- -Ct._0x107779)}function o(t,e,i,n){return ne(n,It._0x50ba5c,e-1526)}if(te[o(0,1680,0,"l*oo")](te[i(_t._0x8c9dfc,397,_t._0x5569a6,_t._0x45123e,_t._0x24d8d5)],te[i(0,-38,0,0,_t._0x2ed9e4)]))throw new _0x1a7aa1(_0x59d248[r(_t._0x522151,0,_t._0x211350,-_t._0x23a906,_t._0x3f32a6)]);{const a=await te[n("7]iE",_t._0x3c4f95)](Ie);if(!a)return te[o(0,_t._0xa65815,_t._0x1ecbb4,_t._0x18fe4c)](te[o(_t._0x3c9d5f,_t._0x5b08c8,0,_t._0x967c86)],te[o(_t._0x5ed855,1822,_t._0x4e3ec1,"l*oo")])?"":null;if(e)if(te[o(0,1190,0,_t._0x57de34)](te[s(_t._0x2a1752,0,_t._0x1754c8,"7zvP")],te[n(_t._0xbb161c,514,_t._0x4f607b)]))te[i(_t._0x561b48,-_t._0x3cc382,_t._0x34c1ea,0,"GiZm")](_0x3d6c35,_0xf2292c);else if(!await te[n(_t._0x8619e8,_t._0x5050c2,_t._0x3b1675)](Le,a))return te[s(_t._0x29ace8,0,1061,"L@CO")](te[r(0,_t._0x1a2fb7,_t._0x4b00f1,-362,"wYQn")],te[i(_t._0xf56b19,-_t._0x1b5f71,_t._0x24046c,0,"kMD$")])?null:te[r(_t._0xd4791c,_t._0x301db0,_t._0x50b69a,-_t._0x530e84,"EeqF")](_0x52c54b,_0x317a04);const l=te[n("kMD$",284)](le,t[r(0,_t._0x43bbaa,_t._0x57c44d,116,"l#ro")](a[0]));if(e){if(te[o(_t._0x4b3cf1,1241,0,_t._0x4cffbc)](te[s(_t._0x3cfc01,0,_t._0x4d5e68,"t4e]")],te[s(0,_t._0x5b00a1,_t._0x465c66,"#HM9")]))return null;if(!await te[i(0,164,_t._0x6fcd1a,_t._0x5a26a2,"5jgJ")](Te,l))return te[n(_t._0xe6c227,61)](te[r(_t._0x5524c8,_t._0x3f7c9f,_t._0x30962c,-284,"&SKJ")],te[r(0,0,_t._0x348c38,_t._0x148f6c,_t._0x4b71d6)])?null:new _0x4f0adc(..._0xafef9a)}return l}}async function Le(e){function i(t,e,i,n){return ze(0,0,0,i,n- -1067)}function n(t,e,i,n){return ve(0,e-kt._0x343808,0,n)}function s(t,e,i,n,s){return Se(0,0,t,0,s- -1157)}function r(t,e,i,n,s){return ve(0,s-537,0,e)}function o(t,e,i,n){return Se(0,St._0x3c09d6,e,St._0x560b20,n- -602)}if(te[o(0,"EeqF",0,747)](te[o(Mt._0x2402dc,"9Zmk",Mt._0x1a27c2,Mt._0x4f8ea3)],te[r(Mt._0x5bae1c,Mt._0x5ccf0a,0,Mt._0x179b6a,556)]))return"_"+_0x5e806d[s("aFQP",0,0,0,-75)+"o"][s("EeqF",0,0,0,-Mt._0x47e9fc)+s("hOrE",Mt._0x49cb63,Mt._0x38fc90,0,-Mt._0x4f395a)]()[i(0,Mt._0x56c7d0,"Cko8",664)]("-")[o(Mt._0x3a833b,Mt._0x22be0b,Mt._0x5754e6,216)]("");{const a=t[s(Mt._0x4519cd,Mt._0x41cb74,Mt._0x2b789c,0,-Mt._0x37e8db)+"o"][o(Mt._0x119983,"l*oo",0,Mt._0x38521b)+"e"];if(te[s(Mt._0x4926f2,0,0,0,-291)](Object[s(Mt._0x2cf2e2,0,Mt._0x54dacd,Mt._0x67d2a7,-Mt._0xfe10a1)+n(0,Mt._0x4e3531,Mt._0x108f19,"l#ro")+o(0,Mt._0x23328d,Mt._0xe5f8b3,97)](a)[r(Mt._0x1e321f,"l#ro",Mt._0x3bc2ec,Mt._0x36b0ac,705)+"y"],a[r(Mt._0x11070a,"kMD$",Mt._0x57be70,0,54)+"y"]))return!te[n(Mt._0x448934,1973,0,Mt._0x1c2828)](te[n(0,Mt._0x40bcac,Mt._0x2086a5,"%dz!")],te[r(Mt._0x526eb4,"Oz]f",Mt._0x14562a,0,73)])&&(_0x470d14=1,te[o(0,"RE(F",Mt._0x2fb766,Mt._0x10f098)](_0x5ccab0,_0x17083c));const l=te[o(Mt._0x13e608,Mt._0x172e25,Mt._0x84ff04,-Mt._0x139ebe)](pe,he),c=te[s("Rde#",0,0,0,123)](pe,e[0]),u=te[i(Mt._0x25d28e,0,Mt._0x1d8a09,677)](pe,e[1]),h={};h[i(0,Mt._0x126772,Mt._0x2cf2e2,Mt._0x154f62)]=te[r(0,"l*oo",0,0,Mt._0x2b0849)],h[n(Mt._0x357704,1435,Mt._0x8f577b,Mt._0x22c8c9)]=te[i(0,Mt._0x30766e,"QcNv",834)];const d=h,f=await a[i(Mt._0x5b0c3c,Mt._0x22376d,"Ha2y",835)+o(Mt._0x9c1d30,"L@CO",0,Mt._0x1be9c6)](te[n(0,Mt._0x15d89c,Mt._0x14304e,"Knp@")],l,d,!1,[te[s(Mt._0x3b0fcf,0,0,Mt._0x1aecfa,307)]]),p=c[n(0,Mt._0x1245a2,0,Mt._0xc9e218)](0);new Uint8Array(p)[te[n(Mt._0x9f42b9,Mt._0x5c8201,Mt._0x2eba1d,Mt._0x57f725)](fe,p[s("nKVY",Mt._0x355cdd,Mt._0x3965f3,Mt._0x20d667,Mt._0x1f764b)+r(0,"m2$h",0,Mt._0x173407,Mt._0x5938ca)])]++;const g=[async()=>!await a[i(0,0,"*^uy",722)+"y"](d,f,u,p),async()=>await a[r(0,"&SKJ",0,0,270)+"y"](d,f,u,c)][r(Mt._0x59e362,"hOrE",0,0,595)+"r"]((t=>null!=t))[i(Mt._0x3be64f,Mt._0xad42a4,"z[F@",Mt._0xe551fd)](Ne),m=te[o(Mt._0x276e38,"d)E#",0,Mt._0x1baf8a)](te[n(Mt._0x190595,2137,0,"CqXn")](te[n(Mt._0x1577ba,Mt._0x29dd9d,0,Mt._0x137794)](te[s(Mt._0x4b6de6,Mt._0x5f5de2,Mt._0x2146c9,Mt._0x44d4f8,137)](Math[o(Mt._0x115396,"L5^d",0,Mt._0xa12501)+"m"](),1e4),fe),0),2);for(let t=0,e=g[r(Mt._0x320951,"d)E#",0,0,Mt._0x4498ee)+"h"];te[n(Mt._0x3fd8df,1917,0,Mt._0x252309)](t,e);t++){if(te[s(Mt._0x5caff1,0,0,0,-Mt._0x201c4f)](te[s("SJQ$",Mt._0x1f1d0e,Mt._0x3d3cd9,Mt._0xf20117,Mt._0x207ea9)],te[n(0,Mt._0x51e46a,Mt._0x5f1d7b,Mt._0x225a38)]))return!1;if(!await g[te[n(Mt._0x26fb4f,2076,Mt._0x4d6ea9,"]v[l")](te[r(Mt._0x286a6a,"&w*^",0,Mt._0x469c86,443)](m,t),e)]())return te[o(Mt._0x44a962,"d)E#",Mt._0xb0ef89,550)](te[r(0,"RE(F",0,Mt._0x10640b,-19)],te[o(0,Mt._0x3eb547,Mt._0x37ddd6,Mt._0x878f86)]),!1}return!0}}function Ne(){function t(t,e,i,n){return de(n- -1035,0,0,i)}return te[t(0,vt._0x3eac8c,vt._0x32caa2,vt._0x557c03)](te[t(0,vt._0x1e103b,vt._0x5d0f88,vt._0x195096)],te[t(vt._0x35af02,0,vt._0x2d9deb,vt._0x2c8dda)])?null:Math[ne("EQQW",0,1341-wt._0x523775)](te[(vt._0x145ac0,e=vt._0x2235ec,i=vt._0x4f92e3,ze(xt._0x497613,xt._0x4d0861,0,i,e- -1134))](Math[(vt._0x3f498c,Se(0,0,"7zvP",0,938-bt._0x3366f5)+"m")](),Math[(vt._0x3e2208,vt._0x3ce914,vt._0x4087ef,de(661- -yt._0x9d5ca,0,0,"EeqF")+"m")]()));var e,i}async function je(t){function e(t,e,i){return ne(t,0,i-179)}function i(t,e,i,n){return ve(0,t-1,0,n)}const n={RGeqq:function(t,e){return te[qC(366,"z[F@")](t,e)},FpvFn:function(t,e){return te[(i=mt._0x4bd504,mt._0x4706fe,qC(i- -733,"*^uy"))](t,e);var i}};function s(t,e,i,n){return ne(t,0,n-gt._0x4665cd)}function r(t,e){return ne(t,0,e-883)}if(te[r("]2Q4",1035)](te[r(pt._0x17e397,1321)],te[r(pt._0xa09446,pt._0x77b50d)])){if(n[i(pt._0x63d6cf,0,0,"&SKJ")](!_0x59a15d,!_0x43eb97))return!1;_0x7eb444??=_0x4013b5[s(pt._0x448e8e,0,0,28)](_0x3cd73f);for(const t of _0x4343b0)if(n[r("7zvP",pt._0x16f0df)](_0x84e7ac[t],_0x19b471[t]))return!1;return!0}{const n={};n[r(pt._0x1929db,pt._0x1b3b5f)]=t;const l=await te[e(pt._0x396d5d,0,232)](Me,te[s(pt._0x294473,0,0,-pt._0x5a048a)],n);return te[s(pt._0x3322b1,0,0,397)](l[s(pt._0x5ca6e8,0,pt._0x42be43,364)+"s"],te[r("!RZj",1050)])?(te[s(pt._0x3bdb0b,pt._0x182a77,0,554)](te[e(pt._0x324c69,0,pt._0x1476a5)],te[r("d)E#",pt._0x2dcf7b)]),!1):(await te[r("!RZj",pt._0x522a3c)](Ue,"lc",te[i(-pt._0x4fd85c,0,0,"7]iE")](ae,l[(pt._0x102eca,o=pt._0x28a764,a=pt._0x37ca41,ne(a,0,o-1084))])),await te[s("0j)$",0,pt._0xa7c5e,-164)](Ue,"lr",Date[e(pt._0x4fa69c,0,-102)]()[s(pt._0x56e000,0,0,390)+i(406,0,pt._0x3c1bc4,pt._0x34cdc2)]()),!0)}var o,a}function ze(t,e,i,n,s){return qC(s-971,n)}async function Pe(t){function e(t,e,i){return ze(0,0,0,t,i- -1160)}function i(t,e,i,n,s){return ne(s,ft._0x9f0ebb,t- -296)}function n(t,e,i,n,s){return Se(dt._0xc87ef6,dt._0x2b6b2a,e,0,s- -971)}function s(t,e,i){return Se(ht._0x1eccf8,0,i,0,e-ht._0xdacb58)}function r(t,e,i,n,s){return de(s- -ut._0x215a69,0,0,e)}const o={xvjUv:function(t){return te[(ct._0x5f3649,e=ct._0x4aa61c,ct._0x26c8fc,qC(1084,e))](t);var e},ZPVDm:function(t,e,i,n){return te[qC(1300,"wYQn")](t,e,i,n)}};if(te[n(0,lt._0x44e6fb,lt._0x5befed,0,-lt._0x420a4f)](te[n(0,"k84#",0,lt._0x27de71,lt._0x101813)],te[r(0,lt._0x218843,lt._0x17cba7,0,782)]))return _0x31da29;if(!await te[e("]2Q4",0,371)](je,t[n(0,lt._0x5981b4,0,lt._0x33fd7c,-18)])){if(te[r(0,lt._0x2e0157,0,lt._0x401b52,lt._0x9f1c62)](te[r(0,lt._0x1c5da0,lt._0x167bb6,0,lt._0x4ebac8)],te[e("96))",lt._0x314c86,lt._0x26dec2)])){const o=Date[e(lt._0x19fa70,lt._0x5ed113,lt._0x4053e6)](),a=te[i(-95,0,lt._0x5f3183,lt._0x22e899,"7]iE")](parseInt,await te[i(-lt._0x37a883,lt._0x36e4a1,0,0,"z[F@")](Be,"lr",o[s(lt._0x3cd7c8,1686,"EQQW")+n(0,"le$3",lt._0x5e1661,lt._0x316d9c,-lt._0x380a71)]()));return te[i(-166,lt._0x4edcca,lt._0x532cb4,lt._0x532792,"Rde#")](te[r(lt._0x3debab,lt._0x4e9d5b,0,lt._0x507063,lt._0x550e4e)](o,a),oe)?(te[s(lt._0x581b0f,lt._0x2483a3,"%dz!",lt._0x313c04)](te[s(0,2014,lt._0x32d1e3)],te[n(0,"#HM9",lt._0x4a6219,0,-lt._0x28fbae)]),null):t}{const t=o[r(lt._0x2299c5,lt._0x25caca,0,lt._0x1c7592,1167)](_0x1471dd);o[r(0,lt._0x45bfaf,0,lt._0x53bacf,979)](t,_0x208bd6,_0x5ad3f8,_0x5b02f9)}}return te[n(0,"l#ro",lt._0x4784e1,0,148)](Ce,!0)}async function Te(t){const e={};function i(t,e){return Se(0,0,e,at._0x3ebe14,t-at._0x324f9e)}function n(t,e,i,n,s){return ne(s,0,t-900)}function s(t,e,i,n){return ve(0,n-442,0,i)}function r(t,e,i){return de(e- -1923,0,0,i)}function o(t,e,i,n,s){return Se(0,ot._0x428d94,s,ot._0x5bd60b,i- -133)}e[s(rt._0x5d749c,0,rt._0xdd3b91,rt._0x744fb9)]=te[s(0,rt._0x3e2305,"nKVY",287)];const a=e;if(te[n(rt._0x200e50,0,0,rt._0x4e81b9,"&w*^")](te[i(rt._0x5b3550,"d)E#",rt._0x55880a)],te[r(rt._0x16357f,-rt._0x3d47bb,"SJQ$")])){const e={};return e[n(rt._0xa35c3f,rt._0xd461d6,rt._0x2e49f7,rt._0x17c7d3,rt._0x1f76f6)]=ee,e[r(rt._0x150a60,rt._0x3ace44,"0j)$")+"on"]=ie,te[r(0,-rt._0x2aeddf,rt._0x4a3aa7)](Ae,t,e)?!!te[r(rt._0x1ea1ef,255,rt._0x4cb93c)](Ae,t[i(1704,"QcNv",rt._0x1d6814,rt._0x1a6416)+"e"],await te[s(0,0,"l#ro",rt._0x3dece2)](we),[te[s(rt._0x400992,0,"#HM9",rt._0x512b3e)],te[o(0,rt._0x3fd33a,338,0,"&SKJ")],te[r(0,-670,rt._0x5313f5)],te[o(0,rt._0x4acc29,1307,0,rt._0x140310)]])||!te[o(0,0,1337,rt._0x384594,"L@CO")](te[s(0,0,"]v[l",745)],te[i(rt._0x1384c9,rt._0x15ff1c,rt._0x3eb3c0,rt._0x2977df)])&&null:(te[r(0,-156,rt._0x25d38c)](te[o(rt._0x58ec86,0,rt._0x454f55,0,rt._0x4538f3)],te[r(rt._0x166c15,-rt._0x55e7d9,"9Zmk")]),!1)}throw new _0x2893d7(a[s(0,0,"d)E#",rt._0x47606f)])}function Ae(t,e,i){function n(t,e,i,n){return ze(0,0,0,n,e- -1103)}function s(t,e,i,n,s){return ze(0,0,0,s,i- -1962)}function r(t,e,i,n){return de(n- -560,0,st._0x97d121,i)}function o(t,e,i,n){return ze(0,0,0,n,i- -1568)}const a={byMdI:function(t,e){return te[qC(1003,"Rde#")](t,e)}};if(te[s(nt._0x553974,0,-nt._0x111181,0,"Rde#")](te[r(nt._0x5df040,nt._0x3d7b50,nt._0x5d288d,1667)],te[r(0,0,nt._0x27275e,nt._0x497071)])){if(te[r(nt._0x3efc6f,0,"L@CO",866)](!t,!e))return!te[r(nt._0x37b07a,0,"Knp@",827)](te[r(nt._0x2ff596,nt._0x4523ba,"le$3",nt._0x316e19)],te[o(nt._0x40f998,nt._0xe14386,nt._0x3ceb18,"!RZj")])&&void(_0x32fade=0);i??=Object[r(0,0,"z[F@",1493)](e);for(const l of i){if(te[o(0,nt._0xe7e79a,nt._0x225cf3,nt._0x1d86e8)](te[s(0,0,-nt._0x37925e,nt._0xec6f02,nt._0x42fd32)],te[o(0,nt._0x1b2b4d,-nt._0x297e62,"&SKJ")]))return a[r(0,nt._0x4e748e,"Oz]f",nt._0x1db910)](_0x322a75,_0x15fb43);if(te[n(nt._0x4c4879,nt._0x296043,0,"7]iE")](t[l],e[l]))return!!te[n(nt._0x2d3c1f,817,0,nt._0x117fc6)](te[n(nt._0x4e5b11,nt._0x2bb0c5,nt._0x4a2a7d,"ls$n")],te[o(nt._0x3cb0c6,nt._0xde0a4e,-nt._0x6264c0,nt._0x38e85d)])&&null}return!0}return!1}async function De(t){function e(t,e,i){return ze(0,0,0,t,i- -1798)}function i(t,e,i,n,s){return ve(0,s-1001,0,e)}function n(t,e,i,n,s){return ve(0,s-1574,0,i)}var s;te[(et._0x36283d,s=et._0x1e7550,ne("7zvP",0,s-1482))](te[(et._0x1feadf,et._0x3897c0,ze(it._0x35d971,0,0,"EQQW",924- -it._0x140c07))],te[e("]2Q4",et._0x203512,-et._0x102354)])?te[n(et._0x22f204,et._0x2a38e3,et._0x55af9c,0,et._0x2c7046)](_0x1cb59d,"lk"):(se=0,await te[i(0,"Cko8",0,et._0x2c6d0e,et._0x172789)](Re,"lc"),te[n(et._0x4b303d,0,et._0x15af45,et._0x49c816,1241)](ke),t&&ue[e("&SKJ",0,et._0x4da61d)+i(0,et._0x4626a1,0,et._0x240094,672)+"e"](""))}async function Ee(e,i,n){function s(t,e,i,n){return ve(0,n-740,0,e)}const r={CKRKC:function(t,e){return te[(tt._0xc0b7bc,i=tt._0x3898b0,qC(i-697,"VUBu"))](t,e);var i},AYgXZ:function(t,e){return te[qC(1119,"t4e]")](t,e)},dawWE:function(t,e,i){return te[(n=X._0x4d998f,qC(n- -262,"Oz]f"))](t,e,i);var n}};if(ce)return te[o(0,"9Zmk",0,0,1152)](te[s(q._0x6d1a05,"L@CO",0,211)],te[a(0,q._0x5a773e,0,0,q._0x97c365)])?te[l(689,0,"96))")](De,e):_0x154e2b[l(q._0x25bb41,q._0x3e797b,"dSDa")](r[o(0,q._0x5dd3e0,q._0x21e3a4,q._0x567c4d,1652)](_0x2455c4[l(q._0x5a50bf,0,"hOrE")+"m"](),_0xe997d4[l(1358,0,"5jgJ")+"m"]()));function o(t,e,i,n,s){return Se(0,K._0x45405f,e,K._0x2cb050,s-360)}function a(t,e,i,n,s){return ve(0,s-343,0,e)}function l(t,e,i){return ve(0,t-995,0,i)}var c,u;await t[(c=q._0x44dffb,q._0xf4cb26,u=q._0x1ee0eb,de(c- -311,0,0,u)+a(0,"l#ro",q._0x6ddcc1,q._0x9b37ca,-q._0x2aa751))][s(q._0x9b37ca,q._0x2e34ce,0,465)][a(q._0x490dfe,"#HM9",0,q._0x362e70,66)+"st"](te[a(0,q._0x35f24b,0,q._0x42ca2d,q._0x4094de)],(async()=>{if(n&&!await r[t(0,491,"e^DI")](je,n))return await r[t(0,758,"l#ro")](De,e);function t(t,e,i){return a(0,i,0,0,e-707)}await r[o(0,"5jgJ",0,0,1847)](Oe,e,i)}))}async function Oe(e,i){const n=await te[s(0,"&SKJ",0,187)](_e);if(te[a("Ha2y",Z._0x329160,0,Z._0x55f18a,Z._0x6f5e44)](n,0))return te[a(Z._0xf13b25,Z._0x510a2d,0,0,Z._0x1f1e34)](De,e);function s(t,e,i,n){return ve(0,n-349,0,e)}const r=await te[a("ls$n",0,Z._0x538a00,Z._0x3cb83b,Z._0x2cd681)](Ie);let o={};function a(t,e,i,n,s){return ze(0,0,0,t,s- -815)}function l(t,e,i,n,s){return ve(0,n-Q._0x7693e5,0,s)}function c(t,e,i,n,s){return de(e- -779,Y._0x2fafb7,Y._0x46c496,s)}se=2,te[a("5jgJ",Z._0x1f0a0e,0,0,Z._0x5f4f98)](ke)}async function We(e,i=!1){function n(t,e,i,n,s){return ne(s,0,n-434)}const s=await t[a(V._0x7fa7ce,V._0x47d7fb,0,0,-68)+a(V._0x3d4cdd,V._0x1d600c,0,V._0x562193,445)][a(0,"L@CO",V._0x4b2f75,V._0x1ec9b2,V._0x5b9d01)+"ge"][l(0,V._0x20b2fd,V._0x47ea45,V._0x8d5b68,1234)+(V._0x5111fd,r=V._0x432e0d,Se(0,G._0x4ddc5f,"7zvP",0,r-G._0x3820da))+"ry"]();var r,o;function a(t,e,i,n,s){return Se(0,0,e,H._0x2b6ca9,s- -551)}function l(t,e,i,n,s){return de(s- -303,0,0,n)}try{const t={};return t[(V._0x46c265,V._0x236886,o=V._0x3a4cd2,ze(0,0,0,o,2286)+"e")]=i,await s[n(V._0x5b1391,0,V._0x22514c,V._0x222b87,"EeqF")+n(0,0,0,179,"Cko8")+l(V._0x187bb3,V._0x25b77a,V._0x58a23a,V._0x22bdb9,1764)](e,t)}catch{return null}}async function Re(e,i=!1){const n=await t[r(1961,U._0x59f043,U._0x55f38a,0,"GiZm")+o(U._0x350638,U._0x46ae25,"UKWv",0,-470)][o(0,U._0x80bba1,"GiZm",0,-U._0x80bba1)+"ge"][(U._0x18191e,s=U._0x5bc0d6,Se(0,$._0x426a32,"*^uy",$._0x55038f,s-$._0x12cd83)+r(1755,0,U._0x4d0d93,U._0x1a731e,U._0x275deb)+"ry")]();var s;function r(t,e,i,n,s){return ve(0,t-F._0x3c6de0,F._0x35931a,s)}function o(t,e,i,n,s){return ze(0,0,0,i,s- -1740)}function a(t,e,i,n){return ne(t,0,n-1424)}try{const t={};t[a("t4e]",0,0,1908,U._0x284008)+a(U._0x4fd042,U._0x5191b0,U._0x5e962f,U._0x56c0fc)]=i,await n[r(1623,U._0x551ea1,U._0x31e801,U._0x32a624,U._0x4c863b)+o(0,U._0x4e98d5,U._0x1eb525,0,U._0x5d8de3)+"y"](e,t)}catch{return!1}return!0}async function Be(t,e){function i(t,e,i,n,s){return de(s- -1395,0,0,e)}const n=await te[l(0,1249,B._0x4ed1e8,"Knp@")](We,t,!0),s=await n[l(0,2288,B._0x3445c4,B._0x5274fc)+"le"]();if(!s[l(0,1993,0,B._0x598da5)]){if(te[(o=B._0x2764ee,B._0x1924e6,a=B._0x2409f0,ve(0,o-1267,0,a))](e,void 0))return"";const t={};t[l(B._0x2a4804,B._0x358420,0,B._0x3d1884)+l(0,B._0x326978,B._0x20b5e0,"*^uy")+(r=B._0xfdaf9c,de(2014,0,0,r))+"a"]=!1;const s=await n[c(B._0x2d63b5,B._0x4916c4,B._0x513a43)+c(0,B._0x17ae82,"EQQW")+i(0,"EQQW",B._0x33fd7a,0,B._0x5b5db2)](t);return await s[i(0,B._0x5274fc,0,B._0x2d80a2,B._0x417550)](e),await s[i(0,"&SKJ",0,0,B._0x5b9161)](),e}var r,o,a;function l(t,e,i,n){return ve(0,e-1867,0,n)}function c(t,e,i){return de(e- -382,0,0,i)}return await s[c(B._0x2b531e,918,B._0x598da5)]()}async function Ue(t,e){const i=await te[n(806,W._0x5139aa,"ls$n")](We,t,!0);function n(t,e,i){return ve(0,t-911,0,i)}await i[n(1339,0,W._0x24a253)+"le"]();const s={};function r(t,e,i,n,s){return ze(0,0,0,s,t- -1610)}s[n(W._0x34f22d,0,"7]iE")+(W._0x54975e,W._0x5f2fef,ze(0,0,0,"z[F@",1301))+r(-W._0xe689a7,0,W._0x57a465,0,W._0x41f35b)+"a"]=!1;const o=await i[r(667,0,0,0,"QcNv")+(W._0x3e1f00,W._0x5c88c1,a=W._0x16b95a,ze(0,R._0x3426b0,0,"w2QK",a- -513))+r(W._0x3d7227,W._0x200e24,W._0x3c3d5b,W._0x3742f9,W._0x50c167)](s);var a,l;await o[n(W._0x35409a,W._0x4870e1,"d)E#")](e),await o[(W._0x34631b,W._0x562be6,l=W._0x41f35b,ve(0,-278,0,l))]()}async function $e(){const t=await te[r(0,0,"Cko8",0,810)](We,"vn",!0),e=await t[r(0,0,"kMD$",0,526)+"le"]();function i(t,e,i,n){return ze(0,0,0,n,t- -1372)}if(e[s(0,"O^^z",0,1525)]&&te[i(534,0,0,"%dz!")](ie,await e[i(610,0,0,"Ha2y")]()))return!0;const n={};function s(t,e,i,n){return de(n- -389,0,0,e)}function r(t,e,i,n,s){return ve(0,s-726,0,i)}n[a(104,0,0,0,"EQQW")+s(0,"#HM9",0,1221)+i(286,0,0,"SJQ$")+"a"]=!1;const o=await t[i(914,0,0,"aFQP")+a(-390,0,0,0,"e^DI")+r(0,0,"EeqF",0,706)](n);function a(t,e,i,n,s){return ne(s,0,t- -201)}return await o[i(-61,0,0,"hOrE")](ie),await o[i(202,0,0,"nKVY")](),!1}async function Fe(t,e,i=20){function n(t,e,i,n){return ze(0,0,0,t,n- -871)}if(te[o(1309,"L@CO")](t,e)&&ce)throw new Error(te[o(2032,"Cko8")]);function s(t,e,i){return de(i- -1361,0,0,e)}function r(t,e,i,n,s){return ze(0,0,0,s,t- -1029)}function o(t,e){return de(t- -106,0,0,e)}const a=await te[s(0,"EeqF",560)](Me,te[o(1212,"7zvP")],{app:ee,version:ie,licenseKey:e,email:t,device:await te[o(1867,"GiZm")](we)},i);if(te[r(822,0,0,0,"hOrE")](a[o(1092,"L@CO")+"s"],te[c(0,0,"RE(F",1349)]))throw new Error(a[o(1464,"l*oo")]);const l=a[c(0,0,"#HM9",1414)];function c(t,e,i,n){return ze(0,0,0,i,n- -257)}if(await te[o(2041,"GiZm")](Ue,"lc",te[r(483,0,0,0,"SJQ$")](ae,l)),await te[c(0,0,"hz]L",1157)](Ee,1,0),!se)throw new Error(te[c(0,0,"7h4X",1096)]);return ue[n("Rde#",0,0,945)+s(0,"UKWv",269)+"e"](""),te[n("l#ro",0,0,588)](xe)}ue[ne(E,0,150)+ve(0,203,0,w)]=async function(){function t(t,e,i){return ne(t,0,i-50)}await te[t("0j)$",0,142)](Ee,0),te[t("ls$n",0,230)](ke)},t[Se(0,0,g,0,1090)+de(2154,0,0,"UKWv")+de(1836,0,0,"VUBu")+"r"](te[de(1511,0,0,"EQQW")],(async function(e){const i={XVlHU:function(t){return te[qC(346,"Rde#")](t)},qUZlL:function(t,e){return te[qC(1242,"le$3")](t,e)},kwawi:function(t,e){return te[qC(1141,"hz]L")](t,e)},iZnND:function(t,e,i){return te[qC(976,"Oz]f")](t,e,i)},DVBSs:function(t,e){return te[qC(458,"7h4X")](t,e)}};function n(t,e){return de(e- -753,0,0,t)}const s=e[r("96))",0,-213)+"l"][o(0,0,0,-299,"%dz!")+"ve"];function r(t,e,i){return de(i- -1621,0,0,t)}function o(t,e,i,n,s){return ve(0,n- -40,0,s)}e[de(2070,0,0,"w2QK")+"l"][n("m2$h",1266)];let a=!0;await t[ve(0,59,0,"l#ro")+o(0,0,0,249,"0j)$")][o(0,0,0,181,"]2Q4")][r("L@CO",0,159)+"st"](te[o(0,0,0,-627,"z[F@")],(async()=>{function e(t,e,i,n,s){return r(s,0,i-1407)}function s(t,e,i,s,r){return n(r,t- -542)}function o(t,e){return r(t,0,e-1662)}function l(t,e,i,n){return r(i,0,n-1651)}if(!await i[o("d)E#",1447)]($e)){const n=await i[l(0,0,"kMD$",1787)](We,"lk");if(n)try{const[r]=i[l(0,0,"GiZm",1726)](le,await(await n[l(0,0,"O^^z",2163)+"le"]())[l(0,0,"e^DI",2224)]()),{email:c,token:u}=i[e(0,0,1818,0,"Rde#")](le,t[e(0,0,1806,0,"O^^z")](r)),h=t[s(645,0,0,0,"&SKJ")](u)[o("Ha2y",2205)](".")[0];await i[s(549,0,0,0,"]v[l")](Fe,c,h),a=!1}catch{}finally{i[e(0,0,2012,0,"UKWv")](Re,"lk")}}})),a&&await te[r("]v[l",0,259)](Ee,1,0),te[n("7]iE",1269)](s,se)})),t[ne(z,0,689)+Se(0,0,"dSDa",0,1054)+Se(0,0,"Cko8",0,725)+"r"](te[ne(n,0,718)],(async function(t){function e(t,e){return ne(t,0,e-137)}function i(t,e,i){return de(i- -892,0,0,e)}const n=t[s("!RZj",0,319)+"l"][e("EQQW",457)+"ve"];function s(t,e,i){return ve(0,i-527,0,t)}function r(t,e,i,n){return de(n- -1307,0,0,t)}const o=t[r("Oz]f",0,0,630)+"l"][i(0,"VUBu",1050)+"t"],[a,l]=t[de(1735,0,0,"l#ro")+"l"][r("QcNv",0,0,-13)];let c;try{c=await te[e("hOrE",692)](Fe,a,l)}catch(t){te[e("z[F@",88)](o,t[r("hz]L",0,0,129)+"ge"])}c?te[i(0,"#HM9",1205)](n,c):te[s("w2QK",0,675)](o,te[s("nKVY",0,936)])})),t[ne("7h4X",0,599)+Se(0,0,"GiZm",0,657)+de(1729,0,0,"&SKJ")+"r"](te[de(1361,0,0,"#HM9")],(async function(t){const e=t[s(0,577,0,0,"9Zmk")+"l"][i(0,0,0,"e^DI",-170)+"ve"];function i(t,e,i,n,s){return ve(0,s-149,0,n)}const n=await te[s(0,1134,0,0,"m2$h")](Ce);function s(t,e,i,n,s){return ze(0,0,0,s,e- -873)}if(!n)return te[i(0,0,0,O,283)](e);await te[s(0,1162,0,0,"Rde#")](De,1);const r={};function o(t,e,i){return de(e- -768,0,0,i)}r[ze(0,0,0,"nKVY",1305)]=n[i(0,0,0,"w2QK",198)],await te[o(0,1124,"96))")](Me,te[o(0,1064,O)],r),te[de(1417,0,0,"5jgJ")](e)})),t[ze(0,0,0,"CqXn",1471)+ze(0,0,0,"w2QK",1384)+Se(0,0,"l*oo",0,1026)+"r"](te[ze(0,0,0,"7h4X",2107)],(async function(t){const e=t[n(0,0,0,"7]iE",-682)+"l"][de(1558,0,0,"nKVY")];function i(t,e,i){return ze(0,0,0,i,t- -1657)}function n(t,e,i,n,s){return Se(0,0,n,0,s- -1176)}const s=t[i(481,0,"%dz!")+"l"][n(0,0,0,"EQQW",-68)+"ve"];e&&await te[i(-237,0,"UKWv")](Ee,1,1),te[n(0,0,0,"L5^d",-273)](s,await te[ve(0,-152,0,"dSDa")](xe))}));const Ve=()=>se;e?.[de(2055,0,0,"nKVY")+"e"](0)?.[ne("5jgJ",0,362)]((function(e){const i=te[n(0,2045,0,0,"z[F@")](ye);function n(t,e,i,n,s){return de(e- -191,0,0,s)}te[n(0,1010,0,0,"L5^d")](i,t,e,Ve)}))}(globalThis,[ZC(0,0,1079,0,"w2QK")+ZC(0,0,1529,0,"RE(F")+JC(0,-329,0,"t4e]")+QC(0,0,0,1874,"RE(F"),YC("kMD$",0,0,487)+ZC(0,0,1242,0,"!RZj")+ZC(0,0,1671,0,"]v[l")+ZC(0,0,1862,0,"9Zmk"),GC(0,0,"7zvP",0,233)+GC(0,0,"Knp@",0,36)+QC(0,0,0,1296,"l#ro")+JC(0,554,0,"7]iE"),QC(0,0,0,1408,"96))")+ZC(0,0,1421,0,"kMD$")+ZC(0,0,1133,0,"QcNv")+ZC(0,0,1803,0,"]2Q4"),GC(0,0,"Knp@",0,324)+ZC(0,0,1064,0,"ls$n")+JC(0,344,0,"]v[l")+ZC(0,0,1566,0,"QcNv"),YC("]v[l",0,0,506)+YC("&SKJ",0,0,-66)+JC(0,-288,0,"aFQP")+ZC(0,0,950,0,"]2Q4"),GC(0,0,"0j)$",0,875)+YC("aFQP",0,0,929)+JC(0,-81,0,"!RZj")+JC(0,625,0,"L5^d"),YC("&w*^",0,0,637)+JC(0,109,0,"hOrE")+GC(0,0,"7]iE",0,56)+ZC(0,0,1962,0,"7zvP"),ZC(0,0,1747,0,"L5^d")+GC(0,0,"]2Q4",0,359)+GC(0,0,"m2$h",0,778)+JC(0,-351,0,"CqXn"),GC(0,0,"t4e]",0,944)+GC(0,0,"e^DI",0,388)+GC(0,0,"EQQW",0,557)+YC("l*oo",0,0,227),GC(0,0,"*^uy",0,910)+QC(0,0,0,1776,"Oz]f")+JC(0,-200,0,"SJQ$")+GC(0,0,"w2QK",0,1076),QC(0,0,0,1408,"96))")+YC("9Zmk",0,0,985)+JC(0,-200,0,"SJQ$")+QC(0,0,0,1169,"0j)$"),JC(0,614,0,"l*oo")+YC("5jgJ",0,0,501)+JC(0,565,0,"]2Q4")+QC(0,0,0,1452,"O^^z"),JC(0,551,0,"!RZj")+JC(0,-55,0,"]2Q4")+YC("EQQW",0,0,443)+GC(0,0,"&w*^",0,196),JC(0,551,0,"!RZj")+ZC(0,0,1430,0,"#HM9")+GC(0,0,"hOrE",0,681)+YC("EeqF",0,0,263),ZC(0,0,1811,0,"VUBu")+ZC(0,0,1617,0,"7zvP")+YC("GiZm",0,0,53)+GC(0,0,"7]iE",0,534),ZC(0,0,1980,0,"Oz]f")+YC("L@CO",0,0,559)+YC("]v[l",0,0,644)+GC(0,0,"e^DI",0,318),GC(0,0,"SJQ$",0,315)+ZC(0,0,1617,0,"7zvP")+ZC(0,0,1127,0,"SJQ$")+GC(0,0,"GiZm",0,42),JC(0,405,0,"hz]L")+QC(0,0,0,1321,"kMD$")+QC(0,0,0,1792,"]2Q4")+JC(0,-119,0,"!RZj"),YC("]2Q4",0,0,763)+ZC(0,0,1301,0,"e^DI")+YC("]2Q4",0,0,865)+QC(0,0,0,1738,"96))"),ZC(0,0,995,0,"aFQP")+YC("&SKJ",0,0,-66)+JC(0,121,0,"*^uy")+JC(0,-108,0,"EeqF"),YC("dSDa",0,0,418)+GC(0,0,"QcNv",0,594)+QC(0,0,0,1618,"VUBu")+JC(0,-319,0,"]v[l"),ZC(0,0,1698,0,"&SKJ")+YC("CqXn",0,0,582)+YC("GiZm",0,0,53)+ZC(0,0,1141,0,"k84#"),YC("*^uy",0,0,796)+GC(0,0,"nKVY",0,113)+YC("5jgJ",0,0,517)+QC(0,0,0,1209,"96))"),YC("Knp@",0,0,210)+ZC(0,0,1634,0,"Cko8")+GC(0,0,"l*oo",0,239)+JC(0,195,0,"hz]L"),JC(0,399,0,"RE(F")+GC(0,0,"RE(F",0,616)+JC(0,-247,0,"GiZm")+YC("]v[l",0,0,617),YC("VUBu",0,0,784)+ZC(0,0,1024,0,"7]iE")+JC(0,130,0,"7h4X")+ZC(0,0,1081,0,"&w*^"),JC(0,-99,0,"SJQ$")+QC(0,0,0,1109,"dSDa")+QC(0,0,0,1490,"#HM9")+JC(0,363,0,"&w*^"),YC("7]iE",0,0,206)+JC(0,453,0,"EQQW")+GC(0,0,"m2$h",0,778)+JC(0,71,0,"hOrE"),JC(0,-289,0,"7h4X")+GC(0,0,"GiZm",0,622)+GC(0,0,"L5^d",0,183)+QC(0,0,0,1709,"Rde#"),QC(0,0,0,1014,"Ha2y")+QC(0,0,0,1429,"RE(F")+GC(0,0,"l*oo",0,239)+GC(0,0,"*^uy",0,439),YC("L5^d",0,0,720)+JC(0,-366,0,"&SKJ")+QC(0,0,0,869,"7]iE")+YC("]v[l",0,0,471),ZC(0,0,1941,0,"l*oo")+JC(0,-118,0,"dSDa")+ZC(0,0,1470,0,"EQQW")+QC(0,0,0,877,"]2Q4"),QC(0,0,0,914,"9Zmk")+JC(0,180,0,"QcNv")+YC("e^DI",0,0,183)+GC(0,0,"%dz!",0,788),YC("]2Q4",0,0,763)+GC(0,0,"RE(F",0,616)+QC(0,0,0,1490,"#HM9")+GC(0,0,"&SKJ",0,714),QC(0,0,0,1161,"hOrE")+GC(0,0,"EQQW",0,867)+JC(0,-243,0,"ls$n")+ZC(0,0,1947,0,"z[F@"),QC(0,0,0,1205,"k84#")+GC(0,0,"kMD$",0,508)+ZC(0,0,1152,0,"l*oo")+GC(0,0,"z[F@",0,780),GC(0,0,"z[F@",0,104)+QC(0,0,0,1142,"!RZj")+GC(0,0,"L5^d",0,183)+GC(0,0,"9Zmk",0,566),ZC(0,0,1261,0,"hOrE")+JC(0,633,0,"l#ro")+JC(0,-81,0,"!RZj")+JC(0,355,0,"L5^d"),YC("UKWv",0,0,153)+JC(0,-118,0,"dSDa")+GC(0,0,"Knp@",0,146)+ZC(0,0,1576,0,"96))"),GC(0,0,"&SKJ",0,785)+YC("ls$n",0,0,37)+ZC(0,0,1168,0,"CqXn")+QC(0,0,0,1794,"le$3"),ZC(0,0,1615,0,"O^^z")+ZC(0,0,1511,0,"Rde#")+JC(0,-175,0,"l*oo")+JC(0,159,0,"VUBu"),QC(0,0,0,979,"w2QK")+GC(0,0,"]2Q4",0,359)+JC(0,-175,0,"l*oo")+ZC(0,0,1965,0,"t4e]"),QC(0,0,0,1585,"l#ro")+GC(0,0,"t4e]",0,687)+GC(0,0,"Ha2y",0,817)+YC("!RZj",0,0,0),ZC(0,0,1562,0,"5jgJ")+JC(0,629,0,"aFQP")+GC(0,0,"7]iE",0,56)+QC(0,0,0,1273,"Cko8"),GC(0,0,"wYQn",0,380)+YC("kMD$",0,0,394)+GC(0,0,"96))",0,403)+ZC(0,0,1259,0,"QcNv"),QC(0,0,0,1325,"Rde#")+GC(0,0,"UKWv",0,941)+QC(0,0,0,951,"7zvP")+YC("d)E#",0,0,536),ZC(0,0,1533,0,"]v[l")+YC("&w*^",0,0,828)+YC("CqXn",0,0,141)+GC(0,0,"m2$h",0,494),QC(0,0,0,1080,"UKWv")+JC(0,201,0,"5jgJ")+YC("7h4X",0,0,430)+GC(0,0,"k84#",0,312),GC(0,0,"QcNv",0,1040)+ZC(0,0,1855,0,"&w*^")+GC(0,0,"Ha2y",0,817)+YC("d)E#",0,0,552)]);let XC=(()=>{let t,e,i,n=Xb,s=[],r=[],o=[],a=[];return class extends n{static{const l="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[fb()],i=[db({type:Boolean,reflect:!0})],ab(this,e={get:cb((function(){return this.#hc}),"#details","get"),set:cb((function(t){this.#hc=t}),"#details","set")},t,{kind:"accessor",name:"#details",static:!1,private:!0,access:{has:t=>#dc in t,get:t=>t.#dc,set:(t,e)=>{t.#dc=e}},metadata:l},s,r),ab(this,null,i,{kind:"accessor",name:"loading",static:!1,private:!1,access:{has:t=>"loading"in t,get:t=>t.loading,set:(t,e)=>{t.loading=e}},metadata:l},o,a),l&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})}#hc=lb(this,s,null);get#dc(){return e.get.call(this)}set#dc(t){return e.set.call(this,t)}#Dl=(lb(this,r),lb(this,o,!1));get loading(){return this.#Dl}set loading(t){this.#Dl=t}#fc=(lb(this,a),null);render(){return Px`
            <img id="image" inert src=${`${jI}/upgrade.png`}>
            <div id="content" class="container">
                ${0!==WebGLBuffAddr0x995a6.valueOf()?this.#pc(this.#dc):this.#gc()}
                <svg id="spinner" class="w" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="45" fill="none" stroke-width="10" stroke-linecap="round" stroke-dasharray="50" stroke-dashoffset="0" pathLength="100" />
                </svg>
            </div>
        `}#gc(){return Px`<div class="container">
                <div class="title">Software activation</div>
                <div id="error">${this.#fc||""}</div>
                <cc-text-input id="email" placeholder="Email" class="w"></cc-text-input>
                <cc-text-input id="license-key" placeholder="License Key" class="w"></cc-text-input>
                <cc-button variant="accent" outline @click=${this.#mc} class="w">Activate</cc-button>
                <div class="link" style="margin-top: 8px" @click=${this.#vc} data-url=${CI}>Manage license keys</div>
                <div style="flex: 1"></div>
                <div class="label">Don't have a license key?</div>
                <cc-button variant="secondary" outline @click=${this.#vc} data-url=${LI} class="w">Start free trial</cc-button>
                <div>No credit card required.</div>
        </div>`}#pc(t){if(!t)return Ax;const e=t.trial;return Px`<div id="details" class="container">
    <div class="title">${e&&t.expires?this.#yc(t.expires):"License info"}</div>
    <div style="flex: 1"></div>
    <div class="label">Registered to</div>
    <div>
        <cc-icon name="workflow:User"></cc-icon> ${t.name}<br>
        <cc-icon name="workflow:Email"></cc-icon> ${t.email}<br>
        ${t.organization?Px`<cc-icon name="workflow:Building"></cc-icon> ${t.organization}`:Ax}
    </div>
    ${t.expires?Px`
        <div class="label">Expires</div>
        <div><cc-icon name="workflow:Clock"></cc-icon> ${t.expires.toLocaleDateString("en",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}</div>
    `:Ax}
    <div class="link" @click=${this.#xc}>Refresh license info</div>
    <div style="flex: 1"></div>
    ${e?Px`<cc-button class="w c" variant="accent" @click=${this.#vc} data-url=${NI}>Buy now</cc-button>
                <cc-button class="w c" variant="secondary" outline @click=${this.#qn}>Continue trial</cc-button>`:Px`<cc-button class="w c" variant="accent" @click=${this.#qn}>Continue working</cc-button>
                <cc-button class="w c" variant="secondary" outline @click=${this.#vc} data-url=${CI}>Manage account</cc-button>`}
    <div class="link m3 c" style="font-weight: bold" @click=${this.#bc}>Unregister this device</div>
    <div class="c" style="font-size: 10px">Only 2 devices can be active concurrently</div>
</div>`}#yc(t){(t=new Date(t)).setHours(0,0,0,0);const e=new Date;e.setHours(0,0,0,0);let i=(t.getTime()-e.getTime())/864e5;return i=i<1?0:Math.ceil(i),`Trial ends ${new Intl.RelativeTimeFormat("en",{localeMatcher:"best fit",numeric:"auto",style:"long"}).format(i,"day")}`}async init(t){this.#fc=null,this.#dc=null,this.dialog.cancelable=!1,0!==WebGLBuffAddr0xdf03f.valueOf()?this.#wc(!1):t&&this.#Mc(t),await this.updateComplete}#qn(){this.dialog.close()}#xc(){this.#wc(!0)}#vc(t){Mt(t.target.dataset.url)}#Sc(t){this.#fc=t,this.requestUpdate()}#Mc(t){let e;try{e=JSON.parse(atob(t))}catch{return}Nt(e)&&4===e.length&&"local"===e[0]&&e[1]===yI&&this.#kc(e[2],e[3])}async#wc(t){this.loading=!0;try{this.#dc=await async function(t){return KC("3042190e8ffa9b7c3800da4b784f45761296ef87bfabb3da",t)}(t)}finally{this.loading=!1,this.requestUpdate()}}async#mc(){const t=this.shadowRoot.querySelector("#email"),e=this.shadowRoot.querySelector("#license-key");this.#fc=null;let i=(t.value||"").trim();if(!i)return t.focus(),this.#Sc("Enter your email address");if(!/^[^@\s]+@[^@\s]+\.[a-z0-9]+$/i.test(i))return t.focus(),this.#Sc("Your email address is not valid");let n=(e.value||"").trim();if(!n)return e.focus(),this.#Sc("Enter your license key");await this.#kc(i,n)}async#kc(t,e){this.dialog.cancelable=!1,this.loading=!0,this.requestUpdate();try{this.#dc=await async function(t,e){return KC("4762c726953d7aebacd32805ce1e12f7ce1ddb0cdc441c01",[t,e])}(t,e)}catch(t){this.#Sc(t.toString())}finally{this.loading=!1,this.requestUpdate()}}async#bc(){this.dialog.cancelable=!1,this.loading=!0,this.requestUpdate(),await async function(){return KC("33bdfd1f15df3a2e7ac63e8f33bbe75e550689d7ef7918de")}(),this.#dc=null,this.loading=!1,this.requestUpdate()}static{this.styles=Jy`
:host {
    width: 720px;
    height: 452px;
    user-select: none;
    display: flex;
    flex-direction: row;
    font-size: 14px;
}

cc-icon {
    vertical-align: middle;
    width: 14px;
    height: 14px;
    margin-right: 4px;
}

#image {
    width: 357px;
    height: 452px;
}

#content {
    flex: 1;
    padding: 24px 0;
}

#details {
    box-sizing: border-box;
    align-items: start;
    height: 100%;
}

.container {
    box-sizing: border-box;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 8px;
}

.title {
    font-size: 24px;
    font-weight: bold;
    align-self: center;
}

.m1 {
    margin-top: 8px;
}
.m2 {
    margin-top: 16px;
}
.m3 {
    margin-top: 24px;
}

.link {
    cursor: pointer;
    text-decoration: underline;
    font-size: 12px;
}

.label {
    font-weight: bold;
}

#error {
    margin: 8px 0;
    height: 16px;
    color: var(--error-color);
}

.w {
    width: 220px;
}

.c {
    align-self: center;
}

:host([loading]) #content #spinner {
    display: block;
}
:host([loading]) #content > :not(#spinner) {
    display: none;
}

#spinner {
    display: none;
    height: 32px;
}


#spinner > circle {
    stroke: var(--accent-color-500);
    animation: 1s spin linear infinite forwards;
}

@keyframes spin {
    to {
        stroke-dashoffset: 100;
    }
}
`}}})();const tL={...lM,min:1};let eL=(()=>{let t,e,i,n=qx,s=[],r=[],o=[],a=[],l=[],c=[];return class extends n{constructor(){super(...arguments),this.#Vn=lb(this,s,""),this.#_c=(lb(this,r),lb(this,o,1920)),this.#Ic=(lb(this,a),lb(this,l,1080)),this.sizes=(lb(this,c),[{title:"Custom",value:null},"YouTube",{title:"YouTube 240p",value:[426,240]},{title:"YouTube 360p",value:[640,360]},{title:"YouTube 480p",value:[854,480]},{title:"YouTube 720p",value:[1280,720]},{title:"YouTube 1080p",value:[1920,1080]},{title:"YouTube 1440p",value:[2560,1440]},{title:"YouTube 2160p",value:[3840,2160]},"Instagram",{title:"Instagram Square (1:1)",value:[1080,1080]},{title:"Instagram Story (9:16)",value:[1080,1920]},{title:"Instagram Reel (9:16)",value:[1080,1920]},{title:"Instagram Feed (4:5)",value:[1080,1350]},"TikTok",{title:"TikTok Square (1:1)",value:[1080,1080]},{title:"TikTok Portrait (9:16)",value:[1080,1920]},{title:"TikTok Landscape (16:9)",value:[1920,1080]},"Twitter",{title:"Twitter Square (1:1)",value:[720,720]},{title:"Twitter Portrait (9:16)",value:[720,1280]},{title:"Twitter Landscape (16:9) ",value:[1280,720]}]),this.#Cc=null}static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[fb()],e=[fb()],i=[fb()],ab(this,null,t,{kind:"accessor",name:"name",static:!1,private:!1,access:{has:t=>"name"in t,get:t=>t.name,set:(t,e)=>{t.name=e}},metadata:u},s,r),ab(this,null,e,{kind:"accessor",name:"width",static:!1,private:!1,access:{has:t=>"width"in t,get:t=>t.width,set:(t,e)=>{t.width=e}},metadata:u},o,a),ab(this,null,i,{kind:"accessor",name:"height",static:!1,private:!1,access:{has:t=>"height"in t,get:t=>t.height,set:(t,e)=>{t.height=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#Vn;get name(){return this.#Vn}set name(t){this.#Vn=t}#_c;get width(){return this.#_c}set width(t){this.#_c=t}#Ic;get height(){return this.#Ic}set height(t){this.#Ic=t}#Cc;render(){const{name:t,width:e,height:i}=this;return Px`
        <cc-flex-col>
            <cc-flex-row>
                <div class="label">Name</div>
                <cc-text-input id="name" placeholder="Project name" .value=${t} @update=${this.#Lc} padded flex></cc-text-input>
            </cc-flex-row>
            <cc-flex-row>
                <div class="label">Preset</div>
                <cc-picker id="size" .value=${this.#Nc(e,i)?.value||null} .items=${this.sizes} @change=${this.#jc} flex></cc-picker>
            </cc-flex-row>
            <cc-flex-row>
                <div class="label">Frame size</div>
                <cc-number-input id="width" .value=${e} .formatter=${tL} @update=${this.#zc} flex>
                    <cc-icon name="expr:w"slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="height" .value=${i} .formatter=${tL} @update=${this.#Pc} flex>
                    <cc-icon name="expr:h"slot="before"></cc-icon>
                </cc-number-input>
            </cc-flex-row>
            ${this.renderSettings()}
        </cc-flex-col>
        `}#Nc(t,e){return this.sizes.find((i=>null!=i&&"string"!=typeof i&&null!=i.value&&i.value[0]===t&&i.value[1]===e&&(!this.#Cc||i.title===this.#Cc)))}#Lc(t){this.name=t.detail}#jc(t){const e=t.detail;e?(this.width=e[0],this.height=e[1],this.#Cc=t.item.title):this.#Cc=null}#zc(t){this.width=t.detail,this.#Cc=null}#Pc(t){this.height=t.detail,this.#Cc=null}reset(){this.name=""}async init(){this.width=1920,this.height=1080,this.title="",await this.updateComplete}static{this.styles=[Jy`
    :host {
        font-size: 12px;
    }
    .label {
        width: 130px;
    }

    `]}}})();const iL=[{title:"Recent projects",value:!1},{title:"Samples",value:!0}];class nL extends Xb{#_l;#Tc;#Ac;#Dc=null;#Ec=!1;async init(t){this.dialog.cancelable=!0,this.#_l=t.open,this.#Tc=t.settings,this.#Ac=t.recent,this.#Dc=t.samples||null,null==this.#Dc||this.#Ac?.length||(this.#Ec=!0),await this.#Tc.init(),this.requestUpdate(),await this.updateComplete}render(){const t=null!=this.#Dc,e=t&&this.#Ec;return Px`
            <div id="recents-panel">
                <div id="expressive-logo"></div>
                ${this.#Oc(t,e)}
                ${e?this.#Wc():this.#Rc()}
                <div style="display: flex">
                    <cc-button @click=${this.#Bc} variant="secondary" outline>Open...</cc-button>
                </div>
            </div>
            <div id="panel-separator"></div>
            <div id="settings-panel">
                <div id="main-title">Create new project</div>
                <div style="flex: 1" class="v-scroll">
                    ${this.#Tc}
                </div>
                <div>
                    <cc-button style="float: right" @click=${this.#Uc} variant="accent">Create project</cc-button>
                </div>
            </div>
        `}#Oc(t,e){return t?Px`<cc-tabs .value=${e} .items=${iL} @change=${this.#$c} justify="fill"></cc-tabs>`:Px`<div id="secondary-title">Recent projects</div>`}#$c(t){this.#Ec=t.detail,this.requestUpdate()}#Wc(){return Px`<div id="samples" class="v-scroll">${Mw(this.#Dc,(t=>t.url),this.#Fc)}</div>`}#Fc=t=>Px`<img class="sample-item" src=${t.img} title=${t.title} @click=${this.#Vc} data-url=${t.url}>`;#Vc(t){const e=t.target.dataset.url;this.dialog.close(e),function(t){DC("AppSampleOpened",{sample_name:t})}(e.split("/").pop())}#Rc(){return Px`<div id="recent" class="v-scroll">${this.#Hc()}</div>`}#Hc(){const t=this.#Ac;return t&&0!==t.length?t.map(((t,e)=>Px`<div class="recent-item" @click=${this.#Gc} data-index=${e}>
                <div class="recent-item-name text-ellipsis">${t.handle.name}</div>
                <small class="recent-item-time">${function(t){let e=(t-new Date)/1e3;for(let t=0;t<=rL.length;t++){const i=rL[t];if(Math.abs(e)<i.amount)return sL.format(Math.round(e),i.name);e/=i.amount}return""}(t.date)}</small>
            </div>`)):Px`<small>No recent projects</small>`}async#Gc(t){const e=this.#Ac[+t.target.dataset.index];e?.handle&&await async function(t){const e={mode:"readwrite"};return"granted"===await t.queryPermission(e)||"granted"===await t.requestPermission(e)}(e.handle)&&this.dialog.close(e.handle)}async#Bc(){const t=await this.#_l();t&&this.dialog.close(t)}#Uc(){const t=this.#Tc.createProject();t&&(this.dialog.close(t),this.#Tc.reset(),function(t=0){DC("AppProjectCreated",{recent_count:t})}(this.#Ac?.length||0))}static{this.styles=[zC,_b(".v-scroll"),Cb,Jy`
:host {
    display: flex;
    flex-direction: row;
    width: 640px;
    height: 480px;
    padding: 16px;
    gap: 8px;
    user-select: none;
}

#recents-panel, #settings-panel {
    height: 100%;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

#recents-panel {
    width: 0;
    flex: 3;
}

#settings-panel {
    flex: 4;
}

#panel-separator {
    width: 1px;
    height: 100%;
    background: var(--separator-color);
}

#samples, #recent {
    flex: 1;
    scrollbar-gutter: stable;
    font-size: 12px;
}

#samples {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-auto-rows: min-content;
    gap: 5px;
    place-items: center;
}

.sample-item {
    cursor: pointer;
    border-radius: 8px;
    aspect-ratio: 1;
    width: 100%;
}

#recent {
    display: flex;
    flex-direction: column;
}

.recent-item {
    cursor: pointer;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    padding: 4px 2px;
    border-radius: 2px;
    gap: 2px;
}

.recent-item:hover {
    background: var(--surface-hover-color);
}

.recent-item-name {
    pointer-events: none;
}
.recent-item-time {
    white-space: nowrap;
    pointer-events: none;
}

#main-title {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 24px;
    text-transform: uppercase;
}

#secondary-title {
    margin-top: 8px;
    font-size: 12px;
    text-transform: uppercase;
    opacity: 0.45;
}
`]}}const sL=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"}),rL=[{amount:60,name:"seconds"},{amount:60,name:"minutes"},{amount:24,name:"hours"},{amount:7,name:"days"},{amount:4.34524,name:"weeks"},{amount:12,name:"months"},{amount:Number.POSITIVE_INFINITY,name:"years"}];class oL extends qx{constructor(){super(...arguments),this.tool=null}}const aL=[{title:"Create clip path",icon:"expr:clip-path",shortcut:["ctrl","m"],action:W_,get disabled(){return!function(){const t=oh();return!(!t||!t.isElement)&&(1!==lh()||t.parent instanceof mg&&$m(t))}()}},{title:"Create clip mask",icon:"workflow:Preset",shortcut:["alt","ctrl","m"],action:O_,get disabled(){return!function(){const t=oh();return!(!t||!t.isElement)&&(1!==lh()||t.parent instanceof mg&&t.isRenderable)}()}},null,{title:"Draw inside",icon:"workflow:EditInLight",shortcut:["shift","ctrl","m"],action:R_,get disabled(){return!function(){const t=oh();if(!t||!t.isElement)return!1;for(const t of rh())if($m(t))return!0;return!1}()}}];function lL(t,e){return{title:dC(t=`filter:${t}`),icon:fC(t),action:()=>$I((()=>new e))}}const cL={title:"Add effect",icon:"workflow:Effects",get disabled(){const t=oh();return!(t&&(t.isFilterContainer||t.isFilter||t.supportsFilters&&(t.isLayer||t.isElement)))},children:[lL("color-adjust",nm),lL("blur",im),lL("drop-shadow",sm)]},uL={title:"Arrange",children:[{title:"Bring forward",shortcut:["ctrl","]"],icon:"expr:bring-forward",action:Yk},{title:"Bring to front",shortcut:["shift","ctrl","]"],icon:"expr:bring-front",action:Qk},{title:"Send backward",shortcut:["ctrl","["],icon:"expr:send-backward",action:Jk},{title:"Send to back",shortcut:["shift","ctrl","["],icon:"expr:send-back",action:qk}],get disabled(){return ch()}},hL={title:"Select",children:[{title:"Select all",shortcut:["ctrl","a"],action:Fk},{title:"Select none",shortcut:["shift","ctrl","a"],action:Vk}]};function dL(t,e){return{title:t,selectable:!0,get value(){return $y()===e},action(){Uy(e)}}}const fL=[{title:"New project",shortcut:["ctrl","p"],icon:"workflow:Document",action(){DI()}},null,{title:"Open",shortcut:["ctrl","o"],icon:"workflow:FolderOpen",action(){EI()}},{title:"Save",shortcut:["ctrl","s"],icon:"workflow:SaveFloppy",action(){RI(!1)}},{title:"Save as...",shortcut:["shift","ctrl","s"],icon:"expr:save-as",action(){RI(!0)}},null,{title:"Import",shortcut:["ctrl","i"],icon:"workflow:AssetsAdded",action(){BI()}},{title:"Export",shortcut:["ctrl","e"],icon:"workflow:AssetsDownloaded",action(){nC()}},null,{title:"Theme",icon:"workflow:ColorPalette",children:[dL("System","auto"),dL("Light","light"),dL("Dark","dark")]},{title:"License info",icon:"workflow:Login",action(){rC()}},{title:"About",shortcut:["f1"],icon:"workflow:InfoOutline",action(){aC()}}];fL.splice(1,0,{title:"New window",shortcut:["ctrl","n"],icon:"workflow:LinkOut",action(){AI()}});class pL extends qx{render(){return Px`<cc-action-button title="Clip & Mask" @click=${this.#cs}>
            <cc-icon name="workflow:Preset"></cc-icon>
        </cc-action-button>`}async#cs(t){await ky(aL,t.target,"bottom-right")}}let gL=0,mL=null;function vL(t,e){mL=t,S_(1===gL||1===lh()?Dk():Wh(),t.value,e?.altKey)}function yL(t,e){mL=t,k_(t.value,e?.altKey)}function xL(t){return!oh()?.isElement||lh()<t}function bL(t,e,i){return{title:t,icon:e,value:i,action:vL,get disabled(){return xL(1)},preventClose:!0}}function wL(t,e,i){return{title:t,icon:e,value:i,action:yL,get disabled(){return xL(3)},preventClose:!0}}const ML=["Align horizontally",bL("Left","workflow:AlignLeft",{x:1,y:0}),bL("Center","workflow:AlignCenter",{x:2,y:0}),bL("Right","workflow:AlignRight",{x:3,y:0}),"Align vertically",bL("Top","workflow:AlignTop",{x:0,y:1}),bL("Middle","workflow:AlignMiddle",{x:0,y:2}),bL("Bottom","workflow:AlignBottom",{x:0,y:3}),"Distribute",wL("Horizontally","workflow:DistributeHorizontally",!1),wL("Vertically","workflow:DistributeVertically",!0),"Options",{title:"Align to selection",selectable:!0,get value(){return 0===gL},action(){gL=0},preventClose:!0},{title:"Align to document",selectable:!0,get value(){return 1===gL},action(){gL=1},preventClose:!0}];class SL extends qx{#Zc;#Yc;#ja=ML[1];constructor(){super(),IC(this,[[eo,this.#Qc],[Qc,this.#Qc]])}render(){return Px`<cc-action-group compact>
                <cc-action-button id="action" @click=${this.#cs}>
                    <cc-icon id="icon"></cc-icon>
                </cc-action-button>
                <cc-action-button @click=${this.#Jc}>
                    <cc-css-icon name="ChevronDown"></cc-css-icon>
                </cc-action-button>
            </cc-action-group>`}firstUpdated(){this.#Zc=this.shadowRoot.getElementById("action"),this.#Yc=this.shadowRoot.getElementById("icon"),this.#qc()}#Qc=()=>{this.#Zc.disabled=this.#ja.disabled};#qc(){const t=this.#Zc,e=this.#ja;t.disabled=e.disabled,t.title=e.title,this.#Yc.name=e.icon}#cs(){const t=this.#ja;t.action(t)}async#Jc(t){await ky(ML,t.target,"bottom-right"),mL&&this.#ja!==mL&&(this.#ja=mL,this.#qc())}}function kL(t){return(e,i,n,s)=>({title:n,selectable:!0,preventClose:!0,shortcut:s,get value(){return e()[i]},action(){const n=e();n[i]=!n[i],t()}})}function _L(t){return(e,i)=>{const n=e();n[i]=!n[i],t()}}async function IL(){let t="/license.html";const e=document.querySelector('meta[name="expressive:license"]');return e&&(t=e.getAttribute("content")),await(await fetch(t)).text()}const CL="model-snapping";function LL(t){return pa(CL,t)}let NL,jL;function zL(t,e){if(!t.hidden&&!function(t){return LS.has(t)}(t)){if(t.supportsChildren&&t.hasChildren&&function(t){return t.isLayer||t instanceof Qp}(t))for(const i of t.children(!0))zL(i,e);(function(t){return t instanceof ig||!(!t.isRenderable||t.isLayer||t instanceof Qp)})(t)&&(e.bounds&&GS(t.globalBounds),e.points&&function(t){t instanceof tg||t instanceof qp?HS(t.points,t.globalMatrix):(t instanceof Jp||t instanceof ig)&&function(t,e,i){if(e&&!e.isIdentity)for(const n of t)VS(e.point(n.point.x,n.point.y),i);else for(const e of t)VS(e.point,i)}(t.path.nodes,t.globalMatrix)}(t))}}function PL(){return Bc(Kl().matrix.lineScale/Xa)}function TL(){const t=Kl();return t.save(),t.multiplyMatrix(Ya),PL(),t}function AL(t,e=!0){return e?(e,i)=>{const n=TL();t(e,i),n.restore()}:(e,i)=>{const n=Kl();n.save(),n.multiplyMatrix(Ya),t(e,i),n.restore()}}function DL(t,e){const i=Kl();if(t.isIdentity)return void e(i);i.save(),i.multiplyMatrix(t);const n=t.lineScale;if(1===n)e(i);else{const t=Nc;Bc(t*n),e(i),Bc(t)}i.restore()}function EL(t,e){if(!t||!e)return;const i=function(...t){return Ve.fromTransformedPoints(Ya,...t)}(t,e);i.isVisible&&Kl().drawRect(i,Ec("selection-area"))}function OL(t,e){if(!t?.isElement)return;const i=Kl(),n=Oc("element-outline");t instanceof Uh?i.drawPath(t.globalPath,n):t instanceof ig?i.drawPathTransformed(t.path,t.globalMatrix,n):t instanceof mg?i.drawPathTransformed(t.clipPath,t.globalMatrix,n):e?i.drawRect(t.globalBounds.bounds,n):i.drawQuad(t.globalBounds,n)}function WL(t,e,i){if(!t?.isElement)return;const n=Kl(),s=t.globalBounds;n.drawQuad(s,Oc("tool")),e&&(i&&!t.isResizable?UL(s.middle,null,!1):BL(s,!1))}function RL(t,e,i){Kl().drawBox(t,Oc("tool")),e?BL(t,i):i&&UL(t.middle,null,!0)}function BL(t,e){const i=Wc("tool-handle-radius"),n=Kl();e&&n.drawCircle(t.middle,i,Ec("tool-handle-filled"));const s=Ec("tool-handle"),r=Oc("tool");for(const e of t.sidePoints())n.drawCircle(e,i,s),n.drawCircle(e,i,r)}function UL(t,e,i){e&&!e.isIdentity&&(t=e.point(t.x,t.y));const n=Kl(),s=Wc("tool-handle-radius");i?n.drawCircle(t,s,Ec("tool-handle-filled")):(n.drawCircle(t,s,Ec("tool-handle")),n.drawCircle(t,s,Oc("tool")))}function $L(t,e){Kl().drawPolyLine(e&&!e.isIdentity?e.transformPointArray(t):t,Oc("path-line"))}function FL(t,e){const i=Oc("path-line"),n=Kl();e?n.drawPathTransformed(t,e,i):n.drawPath(t,i)}function VL(t,e,i,n){i&&!i.isIdentity&&(t=i.point(t.x,t.y),e=i.point(e.x,e.y)),Kl().drawLine(t,e,n??Oc("path-line"))}function HL(){if(jL)return jL;const t=new Skia.SkPath;return t.isVolatile=!0,t.fillType=Skia.SkPathFillType.Winding,jL=t}function GL(t,e,i){const n=t.length;if(!n)return;i&&i.isIdentity&&(i=null);const s=Kl(),r=Wc("path-node-radius"),o=Oc("path-line"),a=Ec("path-node-unselected");let l;const c=HL();if(!e?.size){for(let e=0;e<n;e++)l=i?i.point(t[e].x,t[e].y):t[e],c.addCircle(l.x,l.y,r);return s.drawPathDirect(c,a),s.drawPathDirect(c,o),void c.rewind()}for(let s=0;s<n;s++)e.has(s)||(l=i?i.point(t[s].x,t[s].y):t[s],c.addCircle(l.x,l.y,r));c.isEmpty||(s.drawPathDirect(c,a),s.drawPathDirect(c,o),c.rewind());const u=Ec("path-node-selected");for(let n of e)t[n]&&(l=i?i.point(t[n].x,t[n].y):t[n],c.addCircle(l.x,l.y,r));c.isEmpty||(s.drawPathDirect(c,u),c.rewind())}function ZL(t,e){e&&e.isIdentity&&(e=null);const i=Wc("path-node-radius"),n=Oc("path-line"),s=Ec("path-node-unselected"),r=Math.max(t.length-1,1),o=HL();if(e&&!e.isIdentity){let n;for(let s=0;s<r;s++)n=e.point(t[s].x,t[s].y),o.addCircle(n.x,n.y,i)}else for(let e=0;e<r;e++)o.addCircle(t[e].x,t[e].y,i);if(!o.isEmpty){const t=Kl();t.drawPathDirect(o,s),t.drawPathDirect(o,n),o.rewind()}}function YL(t,e,i){if(!e?.size)return;i&&i.isIdentity&&(i=null);const n=Kl(),s=Oc("path-handle"),r=Wc("path-handle-radius");let o,a,l;for(const c of e)o=t[c],o&&Ei(o)&&(a=i?i.point(o.point.x,o.point.y):o.point,null!=o.handleIn&&(l=i?i.point(o.handleIn.x,o.handleIn.y):o.handleIn,n.drawLine(a,l,s),n.drawCircle(l,r,s.brush)),null!=o.handleOut&&(l=i?i.point(o.handleOut.x,o.handleOut.y):o.handleOut,n.drawLine(a,l,s),n.drawCircle(l,r,s.brush)))}function QL(t,e){if(!Ei(t))return;null!=e&&e.isIdentity&&(e=null);const i=Oc("path-handle"),n=Wc("path-handle-radius"),s=e?e.point(t.point.x,t.point.y):t.point;let r;const o=Kl();t.handleIn&&(r=e?e.point(t.handleIn.x,t.handleIn.y):t.handleIn,o.drawLine(s,r,i),o.drawCircle(r,n,i.brush)),t.handleOut&&(r=e?e.point(t.handleOut.x,t.handleOut.y):t.handleOut,o.drawLine(s,r,i),o.drawCircle(r,n,i.brush))}function JL(t,e,i){const n=Kl(),s=Oc("path-line");if(t instanceof Jp)return n.drawPath(t.globalPath,s),YL(t.path.nodes,e,t.globalMatrix),GL(t.path.nodes,e,t.globalMatrix),!0;if(t instanceof tg)return!i&&(n.drawPath(t.globalPath,s),GL(t.points,e,t.globalMatrix),!0);if(t instanceof qp)return n.drawPath(t.globalPath,s),GL(t.points,e,t.globalMatrix),!0;if(t instanceof ig){const i=t.globalMatrix;if(null==i||i.isIdentity)n.drawPath(t.path,s),YL(t.path.nodes,e),GL(t.path.nodes,e);else{const r=new es(zn(t.nodes,i));n.drawPath(r,s),YL(r.nodes,e),GL(r.nodes,e),r.dispose()}return!0}return!1}Tc("element-outline",1,"red"),Tc("selection-wrapper",1,"gray"),Ac("selection-area","#00F4"),Tc("tool",1,"blue"),Ac("tool-handle","white"),Ac("tool-handle-filled","blue"),Dc("tool-handle-radius",4),Tc("text-baseline",1,"magenta"),Tc("path-line",2,"green"),Ac("path-node-selected","green"),Ac("path-node-unselected","white"),Dc("path-node-radius",4),Tc("path-handle",1,"green"),Dc("path-handle-radius",2.5),Tc("guide",1),Tc("guide-hover",1);const qL={seeThrough:!1,wireframe:!1};function KL(t,e){"boolean"==typeof e&&(qL.seeThrough=e,e=qL);for(let i of Gu(!0))if(i=i.getElementAt(t,e))return i;return null}function XL(t,e){return!t||t.globalMatrix.isIdentity?e:t.globalMatrix.inversePoint(e.x,e.y)}function tN(t){return Ve.merge(eN(t))}function*eN(t){for(const e of t)e instanceof Qp?yield*eN(e.children()):yield e.globalBounds.bounds}function iN(t,e=ce.ZERO,i=!1,s=!0){aa();const r=Vu(!0),o=t(e,r);return function(t,e,i){if(!t.isTransformable)return!1;if(!e||e.isIdentity)return!!i&&(t.position=i,!0);const n=e.decompose();t.rotate=n.rotate,t.skewAngle=n.skew,t.scale=n.scale,i&&(t.position=e.point(i.x,i.y))}(o,r,e),s&&($v.decorate(o),i&&o instanceof Bh&&o.isStrokeVisible&&(o.strokeLineWidth=n(10*Xa/Ka,.1,500))),function(t){if(Au())if(Nu()){const e=Tu();e.parent.insertAfter(t,e),Uu(t)}else Pu().appendChild(t);else uh().appendChild(t);nv(t)&&Um()}(o),ph(o),la(),o}function nN(t){return t instanceof Jp?t.shape:t instanceof ig?t.path:null}function sN(t,e,i,n,s){if(ch())return null;let r=null,o=Number.POSITIVE_INFINITY;for(const l of Th(_m)){const c=rN(l,t,e?vm(l):null,i,n,s);if(null!=c&&c.distance<o&&(o=c.distance,r=c,a(o,0)))break}return r}function rN(t,e,i,n,s,r){let o=Number.POSITIVE_INFINITY,a=null,l=null,c=null,u=null,h=null,d=null;t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e));const f=Rc("path-node-radius",t.globalMatrix);if(t instanceof qp){const i=t.shape?.getPositionInfo(e,f,n?f:null);null!=i&&(l=i.index,o=i.distance,c=i.node,d=i.percent,a=null==d?0:2,u=h=null)}else if(t instanceof tg){if(s)return null;const i=t.shape?.getPositionInfo(e,f);null!=i&&(l=i.index,o=i.distance,c=i.node,d=null,a=0,u=h=null)}else{const n=r||!i?.size?null:Rc("path-handle-radius",t.globalMatrix),s=nN(t)?.getPositionInfo(e,f,n,f);null!=s&&(null==s.handle||null!=i&&i.has(s.index))&&(l=s.index,o=s.distance,c=s.node,d=s.percent,h=s.handle,null!=h?(u=Hi(s.node,h),a=1):(u=null,a=null==d?0:2))}return null==l?null:{element:t,type:a,index:l,node:c,distance:o,percent:d,handle:u,handleType:h}}class oN extends Lc{static{this.dblClick=null}get handleMoveByArrows(){return!1}deactivate(){super.deactivate(),OS()}onStateChanged(){RS(),Bl()}onIsolationContextChanged(){RS(),Rl()}onSelectionChanged(){Bl()}onDocumentTreeChanged(){Bl()}onFocus(){}onBlur(){}onMouseEnter(t){}onMouseLeave(t){}onMouseHover(t){}onContextMenu(t){}onKeyboardStatusChange(t,e){}render(t){this.isPanning||(this.draw(t),function(t){if(!bS)return;t.save(),t.multiplyMatrix(Ya);const e=t.matrix.lineScale/Xa,i=Pc.get("guide").original,n=Ec("guide");if(lS.length){SS.width=i/e,SS.brush=n;for(const e of lS)t.drawLine(e[0],e[1],SS)}if(uS.size){kS.brush=n,kS.width=i/e,kS.dashes=[2/e,4/e];for(const e of uS)t.drawBox(e,kS)}if(cS.size){const i=3/e;for(const e of cS)t.drawCircle(e,i,n)}t.restore()}(Kl()))}onDblClick(t){const e=KL(t.position,Ra);null==e?Ua?Ou(null):Ru():oN.dblClick?.(e,t)||Ou(e)}onKeyDown(t){return!(!this.isWorking&&("Escape"===t.code?(this.#Kc(),0):"Enter"===t.code?(this.#Xc(),0):!this.handleMoveByArrows||"ArrowRight"!==t.key&&"ArrowLeft"!==t.key&&"ArrowUp"!==t.key&&"ArrowDown"!==t.key||(this.onMoveByArrows(t,"ArrowLeft"===t.key?-1:"ArrowRight"===t.key?1:0,"ArrowUp"===t.key?-1:"ArrowDown"===t.key?1:0),0)))}onKeyUp(t){return!!this.isWorking||!(!this.handleMoveByArrows||"ArrowRight"!==t.key&&"ArrowLeft"!==t.key&&"ArrowUp"!==t.key&&"ArrowDown"!==t.key)&&(this.onMoveByArrowsFinish(t),!0)}#Kc(){Ba?Ru():Ou(null)}#Xc(){const t=oh();t&&Ou(t,!1)}onMoveByArrows(t,e,i){const n=Ra,s=t.shiftKey?10:1,r=new ce(e*s,i*s);Gg(zh(),r,n)}onMoveByArrowsFinish(t){}}class aN extends oN{#kl=[null,null];#tu=new Map;#eu;#iu;#nu=null;#su=null;constructor(t,e){super(),this.#eu=new Map(t),this.#eu.has(null)&&(this.defaultCanvasCursor=this.#eu.get(null)),this.#iu=e?new Map(e):null}addAction(t,e){this.#tu.set(t,e)}getAction(t){return this.#tu.get(t)}get hover(){return this.#kl}activate(){super.activate(),this.update()}deactivate(){this.#kl[0]=this.#kl[1]=null,this.#nu=this.#su=null,super.deactivate()}onStateChanged(){super.onStateChanged(),this.update()}onIsolationContextChanged(){!this.isWorking&&this.update(),super.onIsolationContextChanged()}onSelectionChanged(){!this.isWorking&&this.update(),super.onSelectionChanged()}onMouseLeave(t){!this.isWorking&&this.update(t.position)}update(t){this.#ru(t??_l())&&(this.updateCursor(),Bl())}updateCursor(){zl(this.getHoverCursor(this.#kl[0],this.#kl[1]))}#ru(t){const e=this.#kl,[i,n]=this.getHoverInfo(t),s=i===e[0]&&(n===e[1]||this.#iu?.get(i)?.(n,e[1]));return e[0]=i,e[1]=n,!s}sameHoverInfo(t,e,i){return e===i||this.#iu?.get(t)?.(e,i)}getHoverCursor(t,e){const i=this.#eu?.get(t);return"function"==typeof i?i(e):i??this.defaultCanvasCursor}draw(t){if(this.isWorking){const e=this.#nu;if(e?.draw)return void e.draw(this.#su,t)}this.drawTool(t)}onMouseLeftButtonDown(t){this.isWorking=!0;const e=this.#tu.get(this.#kl[0]);"function"==typeof e?[this.#nu,this.#su]=e(t,this.#kl[1]):(this.#nu=e,this.#su=e?.down?.(t,this.#kl[1]))}onMouseLeftButtonUp(t){const e=this.#nu?.up?.(t,this.#su);this.#nu=this.#su=null,this.isWorking=!1,this.update(t.position),e&&(oa()?ra():Jo())}onMouseLeftButtonMove(t,e){this.#nu?.move?.(t,this.#su,e)}onMouseHover(t){this.update(t.position)}}class lN extends oN{constructor(){super(),this.element=null,this.useGradientUpdater=!0,this.startPoint=null,this.currentPoint=null,this.drawSelectionWhenWorking=!0,this.useSnapping=!0,this.scaleStrokeWithZoom=!1,this.#ou=null,this.#au=null,this.dblClickDelta=-1,this.defaultCanvasCursor="target"}get allowGuideCreation(){return!0}activate(){super.activate(),ch()||$v.update(oh()),wl&&!this.startPoint&&this.useSnapping&&ES()}deactivate(){this.disposeBuilder(),super.deactivate()}onStateChanged(){super.onStateChanged(),this.element=null,this.startPoint=this.currentPoint=null}onMouseEnter(t){!this.startPoint&&this.useSnapping&&ES()}onMouseLeave(t){this.startPoint||OS()}draw(){if(ch())return;const t=TL();if(!this.isWorking||this.drawSelectionWhenWorking)for(const t of Ph())t!==this.element&&this.drawSelectedElement(t);this.element&&this.drawElement(this.element),t.restore()}drawSelectedElement(t){WL(t)}drawElement(t){WL(t)}get shouldMoveOriginToMiddle(){return!0}onKeyboardStatusChange(t){this.element?(this.updateElement(this.element,this.startPoint,this.currentPoint),this.applyGradients(),Rl(),Cd([1,4])):Bl()}saveElement(){this.element&&(this.shouldMoveOriginToMiddle&&Rg(this.element,!0),Jo(),this.element=null)}onMouseHover(t){this.element?this.onMouseLeftButtonMove(t):this.useSnapping&&(qS(t.position),Bl())}onMouseLeftButtonDown(t){this.element?this.onMouseLeftButtonMove(t):(zo(),this.isWorking=!0,this.startPoint=this.currentPoint=this.useSnapping?qS(t.position):t.position,$v.update(oh()),Mh())}snapMouseMovePoint(t){return this.useSnapping?qS(t):t}onMouseLeftButtonMove(t){const e=this.snapMouseMovePoint(t.position);this.currentPoint&&e.equals(this.currentPoint)||(this.currentPoint=e,this.element?(this.updateElement(this.element,this.startPoint,this.currentPoint),this.applyGradients(),Cd([1,4])):this.createBuilder(),Rl())}onMouseLeftButtonUp(t){this.saveElement(),this.disposeBuilder(),this.useSnapping&&ES(),Rl(),this.isWorking=!1}#ou;#au;saveGradients(){if(!this.useGradientUpdater)return;const t=$v.fill,e=$v.strokeBrush,i=$v.brushBounds;t instanceof _i&&(this.#ou=t.toRelative(i)),e instanceof _i&&(this.#au=e.toRelative(i))}clearGradients(){this.#ou=this.#au=null}applyGradients(){if(!this.useGradientUpdater)return;const t=this.element;t&&(this.#ou&&(t.fill=this.#ou.toAbsolute(t.localBounds)),this.#au&&(t.strokeBrush=this.#au.toAbsolute(t.localBounds)))}createBuilder(){this.element||(this.saveGradients(),this.element=iN(this.createElement.bind(this),this.startPoint,this.scaleStrokeWithZoom,!0))}disposeBuilder(){const t=this.element;this.element=null,t&&(bh(t),Zm(t)),OS(),this.startPoint=this.currentPoint=null,this.clearGradients()}}const cN=[null,null];function uN(t=null,e,i,n){return{draw:fN,move:hN,down:e=>[e.position,e.position,t,i,!n],up:e?(t,i)=>(e(t,i[0])?Bl():dN(t,i),!1):dN}}function hN(t,e){e[1].equals(t.position)||(e[1]=t.position,Bl())}function dN(t,e){return vh(Ve.fromPoints(e[0],t.position),e[2]??Ra,e[3],Ba),Bl(),!1}function fN(t){if(t[4]&&!ch()){const t=TL();for(const t of Ph())WL(t,!1);t.restore()}EL(t[0],t[1])}const pN=new hi;function gN(t,e){const i=pN.toIdentity();i.multiply(t.globalMatrix);const n=e.matrix;return n&&i.multiply(n),i}function mN(t,e,i,n){let s=t.y;const r=n.matrix;return r&&(s=r.transformInversePoint(t).y),s=Math.abs(e.y-s),n.scale*s/i}function vN(t){return t instanceof Ii?wN:t instanceof Ci?SN:t instanceof Li?_N:t instanceof Ni?CN:null}function yN(t){return t instanceof Ii?bN:t instanceof Ci?MN:t instanceof Li?kN:t instanceof Ni?IN:null}function xN(t){switch(t[2]){case 0:case 2:case 1:return"gradient-move"}return"gradient-resize"}function bN(t,e){let{start:i,end:n}=e;const s=gN(t,e);s.isIdentity||(i=s.point(i.x,i.y),n=s.point(n.x,n.y)),VL(i,n,null,Oc("tool")),UL(ce.center(i,n),null,!0),UL(i),UL(n)}function wN(t,e,i,n){const s=gN(e,i),r=Ra;if(Ba&&2!==t){const e=r?i.center:0===t?i.end:i.start;n=s.isIdentity?XS(e,n):XS(s.point(e.x,e.y),n)}else n=qS(n);s.isIdentity||(n=s.inversePoint(n.x,n.y));const o=i.matrix;if(2===t)return o&&(n=o.transformPoint(n)),i.withCenter(n);if(r)return 0===t?i.withPosition(n,n.mirror(i.center)):i.withPosition(n.mirror(i.center),n);let{start:a,end:l,transform:c}=i;if(0===t?a=n:l=n,o&&(a=o.transformPoint(a),l=o.transformPoint(l)),c&&!c.isIdentity){const t=c.computeMatrix(ce.center(a,l));a=t.transformInversePoint(a),l=t.transformInversePoint(l)}return i.withPosition(a,l)}function MN(t,e){let i,n,s=e.center;const r=gN(t,e);r.isIdentity?(i=s.shifted(e.radius,0),n=s.shifted(0,-e.radius)):(i=r.point(s.x+e.radius,s.y),n=r.point(s.x,s.y-e.radius),s=r.point(s.x,s.y)),DL(r,(t=>{const i=Oc("tool");t.drawCircle(e.center,e.radius,i),t.drawLine(e.center,e.center.shifted(e.radius,0),i),t.drawLine(e.center,e.center.shifted(0,-e.radius),i)})),UL(s,null,!0),UL(n),UL(i)}function SN(t,e,i,n){n=qS(n);const s=e.globalMatrix;return s.isIdentity||(n=s.inversePoint(n.x,n.y)),2===t?i.withCenter(n):3===t?i.withRadius(i.center.distanceTo(n)):i.withScale(mN(n,i.center,i.radius,i))}function kN(t,e){let i,n,s,{start:r,end:o}=e;const a=gN(t,e);a.isIdentity?(i=r.shifted(0,e.startRadius),n=o.shifted(e.endRadius,0),s=o.shifted(0,-e.endRadius)):(i=a.point(r.x,r.y+e.startRadius),n=a.point(o.x+e.endRadius,o.y),s=a.point(o.x,o.y-e.endRadius),r=a.point(r.x,r.y),o=a.point(o.x,o.y)),DL(a,(t=>{const i=Oc("tool");t.drawCircle(e.start,e.startRadius,i),t.drawLine(e.start,e.start.shifted(0,e.startRadius),i),t.drawCircle(e.end,e.endRadius,i),t.drawLine(e.end,e.end.shifted(e.endRadius,0),i),t.drawLine(e.end,e.end.shifted(0,-e.endRadius),i)})),UL(r,null,!0),UL(i),UL(o,null,!0),UL(s),UL(n)}function _N(t,e,i,n){n=qS(n);const s=e.globalMatrix;s.isIdentity||(n=s.inversePoint(n.x,n.y));const r=Ba,o=i.matrix;switch(t){case 1:if(r){if(o){let{start:t}=i;return t=o.transformPoint(t),t=i.transform.computeMatrix(n).transformInversePoint(t),i.withPosition(t,n)}return i.withEndCenter(n,Ua)}return i.moveBy(n.sub(i.end));case 6:return i.withEndRadius(n.distanceTo(i.end),!r);case 4:return i.withScale(mN(n,i.end,i.endRadius,i));case 0:if(r){let t=i.start;return o&&(t=o.transformPoint(t)),i.moveBy(n.sub(t))}return o&&(n=o.transformInversePoint(n)),i.withStartCenter(n,Ua);case 5:{let t=i.startRadius;if(0===t)return i.withStartRadius(n.distanceTo(i.start),!1);const e=mN(n,i.start,t,i)/i.scale;return i.withStartRadius(t*e,r)}}return i}function IN(t,e){const i=gN(t,e),n=i.isIdentity?e.center:i.point(e.center.x,e.center.y);DL(i,(i=>{const n=Oc("tool"),s=t.localBounds.diagonal/2;let r=e.arcLength;r%90==0||s===r*Math.SQRT1_2?r+=.1:r<=0&&(r=.1),i.drawArc(Ve.fromCircle(e.center,s),e.startAngle,r,!0,n)})),UL(n,null,!0)}function CN(t,e,i,n){n=qS(n);const s=e.globalMatrix;return s.isIdentity||(n=s.inversePoint(n.x,n.y)),i.withCircle(n)}function LN(t,e){for(const i of e.runs)for(let e=0;e<i.indexes.length;e++)if(i.indexes[e]>=t)return i.positions[e];return e.left}function NN(t,e){if(t<=e[0].end)return e[0];const i=e.length-1;if(t>=e[i].start)return e[i];for(let n=1;n<i;n++)if(t>=e[n].start&&t<=e[n].end)return e[n];return e[i]}function jN(t,e){if(t<=e.left)return e.start;if(t>=e.right)return e.end;for(const i of e.runs)for(let e=1;e<i.positions.length;e++)if(t>=i.positions[e-1]&&t<=i.positions[e])return Math.abs(i.positions[e]-t)<=Math.abs(t-i.positions[e-1])?i.indexes[e]:i.indexes[e-1];return e.start}class zN{#lu;#cu;#uu;#hu;#du;#fu;#pu;constructor(t){this.isFocused=!0,this.#lu=new Map,this.#cu=new Map,this.#uu=null,this.#hu=null,this.#du=null,this.#fu=!0,this.#gu=!1,this.element=t,this.#pu=t.paragraph}get range(){return om}dispose(){this.element=null,this.#pu=null,this.#lu.clear(),this.#cu.clear(),this.#uu=this.#du=null,this.#lu=this.#cu=null}rangeChanged(){$v.update(this.element),this.#uu=null,this.#du=null}#mu(){this.#gu=!0,this.element.invalidateParagraph(),this.invalidate()}invalidate(){this.#fu=!0,this.#uu=this.#du=null,this.#hu=null,this.rangeChanged()}#vu(){this.#fu&&(this.#fu=!1,function(t,e,i){t.clear(),e.clear();for(const n of i)for(const i of n.runs)for(let n=0;n<i.indexes.length-1;n++){const s=i.indexes[n],r=i.indexes[n+1];r-s!=1&&(t.set(s,r),e.set(r,s))}}(this.#lu,this.#cu,this.#pu.lines))}#gu;get hasChanged(){return this.#gu}set hasChanged(t){this.#gu=t}get baselines(){return this.#hu??=function(t){const e=[];for(const i of t)if(i.runs)for(const t of i.runs)e.push(new ce(t.positions[0],t.baseline)),e.push(new ce(t.positions[t.positions.length-1],t.baseline));return e}(this.#pu.lines)}get selectionRects(){return this.#uu??=function(t,e,i){if(e===i)return[];i<e&&([e,i]=[i,e]);const n=[];for(const s of t){if(s.start>i)break;s.end<e||(s.start<e?s.end>i?n.push(Ve.fromLTRB(LN(e,s),s.top,LN(i,s),s.bottom)):n.push(Ve.fromLTRB(LN(e,s),s.top,s.right,s.bottom)):s.end<=i?n.push(Ve.fromLTRBObject(s)):n.push(Ve.fromLTRB(s.left,s.top,LN(i,s),s.bottom)))}return n}(this.#pu.lines,om.start,om.end)}get cursorLine(){return this.#du??=function(t,e){const i=NN(t,e),n=LN(t,i);return[new ce(n,i.bottom),new ce(n,i.top)]}(om.end,this.#pu.lines)}#yu(t){const e=this.element.globalMatrix;e&&!e.isIdentity&&(t=e.inversePoint(t.x,t.y));const i=this.element.paragraph.matrix;return i&&(t=i.inversePoint(t.x,t.y)),t}getIndexAtPoint(t,e){return e&&(t=this.#yu(t)),function(t,e){return jN(t.x,function(t,e){let i,n=Number.POSITIVE_INFINITY;for(let s=e.length-1;s>=0;s--){const r=Math.abs(t-(e[s].top+e[s].bottom)/2);r<n&&(n=r,i=e[s])}return i}(t.y,e))}(t,this.#pu.lines)}#xu(t){return function(t,e,i){if(t<=0)return 0;if(t>=i)return i;const n=NN(t,e);for(const e of n.runs){const i=e.indexes;for(let e=1;e<i.length;e++){if(t===i[e-1]||t===i[e])return t;if(t>i[e-1]&&t<i[e])return i[e-1]}}return n.end}(t,this.#pu.lines,this.#pu.source.length)}refreshRange(){return this.setRange(om.start,om.end)}setRange(t,e){return null!=t&&null!=e&&lm(t=this.#xu(t),e=this.#xu(e))}setPosition(t,e){if(null==t)return!1;const i=om;return e?t===i.end?this.setRange(i.start,t):this.setRange(i.end,t):lm(t=this.#xu(t),t)}#bu(t){return this.#vu(),function(t,e){return t<=1?0:e.has(t)?e.get(t):t-1}(t,this.#cu)}#wu(t){return this.#vu(),function(t,e,i){return t>=i?i:e.has(t)?e.get(t):t+1}(t,this.#lu,this.#pu.source.length)}deleteLeft(){return this.#Mu(-1)}deleteRight(){return this.#Mu(1)}clearSelection(){return this.setPosition(om.end,!1)}selectAll(){return this.setRange(0,this.#pu.source.length)}moveTo(t,e,i){return this.setPosition(this.getIndexAtPoint(t,i),e)}moveLeft(t){const e=om;return t?this.setRange(e.start,this.#bu(e.end)):e.start>e.end?this.setPosition(e.end,!1):e.start<e.end?this.setPosition(e.start,!1):this.setPosition(this.#bu(e.end),!1)}moveRight(t){const e=om;return t?this.setRange(e.start,this.#wu(e.end)):e.start<e.end?this.setPosition(e.end,!1):e.start>e.end?this.setPosition(e.start,!1):this.setPosition(this.#wu(e.end),!1)}moveUp(t){return this.#Su(function(t,e){if(t<=0)return 0;const i=NN(t,e);return i===e[0]?t:jN(LN(t,i),e[e.indexOf(i)-1])}(om.end,this.#pu.lines),t)}moveDown(t){return this.#Su(function(t,e){const i=NN(t,e);return i===e[e.length-1]?t:jN(LN(t,i),e[e.indexOf(i)+1])}(om.end,this.#pu.lines),t)}#Su(t,e){return e?this.setRange(om.start,t):this.setPosition(t,!1)}moveStart(t){const e=function(t,e){return NN(t,e).start}(om.end,this.#pu.lines);return t?this.setRange(om.start,e):this.setPosition(e)}moveEnd(t){const e=function(t,e){return NN(t,e).end}(om.end,this.#pu.lines);return t?this.setRange(om.start,e):this.setPosition(e)}insertText(t){const e=om;if(!this.#pu.insertText(t,e.end,e.start))return!1;const i=Math.min(e.start,e.end)+t.length;return lm(i,i),this.#mu(),!0}#Mu(t){const e=om;if(e.end===e.start){this.#vu();const i=this.#bu(e.end);return!!this.#pu.removeText(e.end,1===t?this.#wu(e.end):i)&&(-1===t&&lm(i,i),this.#mu(),!0)}if(!this.#pu.removeText(e.end,e.start))return!1;const i=Math.min(e.end,e.start);return lm(i,i),this.#mu(),!0}async cut(){return!!await this.copy()&&this.#Mu(-1)}async copy(){const t=this.#pu.source.getRange(om.start,om.end);return""!==t&&async function(t){try{return await navigator.clipboard.writeText(t),!0}catch(t){return console.error(t),!1}}(t)}async paste(){const t=await async function(){return await At()?navigator.clipboard.readText():null}();return null!=t&&""!==t&&null!=this.element&&this.insertText(t)}async onKeydown(t){const e=t.shiftKey;switch(t.code){case"ArrowLeft":return this.moveLeft(e)?1:0;case"ArrowRight":return this.moveRight(e)?1:0;case"ArrowUp":return this.moveUp(e)?1:0;case"ArrowDown":return this.moveDown(e)?1:0;case"Home":return this.moveStart(e)?1:0;case"End":return this.moveEnd(e)?1:0;case"Clear":return this.clearSelection()?1:0;case"Backspace":return this.deleteLeft()?2:0;case"Delete":return this.deleteRight()?2:0;case"Enter":return this.insertText("\n")?2:0;case"Space":return this.insertText(" ")?2:0;case"Cut":return await this.cut()?2:0;case"Copy":return await this.copy()?1:0;case"Paste":return await this.paste()?2:0}if(t.ctrlKey||t.metaKey)switch(va(t)){case"X":return await this.cut()?2:0;case"C":return await this.copy()?1:0;case"V":return await this.paste()?2:0;case"A":return this.selectAll()?1:0}else if(i=t.key,!(Aa.has(i)||Da.test(i)||Ea.test(i)))return this.insertText(t.key)?2:0;var i;return 0}}const PN=[0,null],TN=[2,null],AN=[3,null];class DN extends aN{#ku=null;#_u=!1;constructor(t=!1){super([[null,"text-add"],[2,"caret"],[1,"caret"],[3,"text-add"],[0,"text-add"]]),this.#_u=t,this.addAction(0,{draw:this.#Iu,down:this.#Cu,move:this.#Lu,up:this.#Nu}),this.addAction(3,{draw:this.#Iu,down:this.#ju,move:this.#Lu,up:this.#Nu}),this.addAction(2,{down:this.#zu,move:this.#Pu,up:this.#Tu}),this.addAction(1,{down:this.#Au,move:this.#Pu,up:this.#Tu})}get name(){return"text"}get allowSpaceBarPan(){return!this.#ku||!this.#ku.isFocused}activate(){super.activate(),Yr(qc,this.#Du)}deactivate(){Qr(qc,this.#Du),this.#Eu(),super.deactivate()}#Du=()=>{this.#Ou();const t=this.#ku;t&&(t.rangeChanged(),Bl())};#Ou(){this.#ku&&(hh(this.#ku.element)&&this.#ku.element.document||this.#Eu())}onStateChanged(){this.#Eu(),super.onStateChanged()}onIsolationContextChanged(){this.#Eu(),super.onIsolationContextChanged()}onSelectionChanged(){this.#Ou(),super.onSelectionChanged()}onDocumentTreeChanged(){this.#Ou(),super.onDocumentTreeChanged()}onFocus(){this.#ku&&(this.#ku.isFocused=!0,this.#Wu(),Bl())}onBlur(){this.#ku&&(this.#Ru(),this.#ku.isFocused=!1,this.#ku.hasChanged&&(this.#ku.hasChanged=!1,Jo()),Bl())}get isEditorFocused(){return!!this.#ku&&this.#ku.isFocused}refreshEditor(){this.#ku?.invalidate(),Bl()}#Bu(t,e,i){const n=$v;i=i||"Lorem ipsum";const s=new Ss;s.width=t||0,s.height=e||0;const r=hl(1);s.autoWidth=s.width<=r,s.autoHeight=s.height<=r,$v.decorateParagraphStyle(s);const o=n.decorateTextStyle(hr.CreateDefault()),a=new Js(o,0,i.length);let l;l=this.#_u?new Ig(new fr(i,s,a)):new kg(new dr(i,s,[a]));let c=!1,u=n.fill;const h=n.strokeBrush;return u instanceof _i&&(o.fill=u.toRelative(n.brushBounds).toAbsolute(l.localBounds),c=!0),h instanceof _i&&(o.strokeBrush=h.toRelative(n.brushBounds).toAbsolute(l.localBounds),c=!0),c&&l.invalidate(),l}#Uu(t){const e=KL(t,!0);return e instanceof Sg?e:null}getHoverInfo(t){const e=this.#Uu(t);return e?e===this.#ku?.element?TN:[1,e]:this.#ku?AN:PN}drawTool(){const t=this.hover[1],e=this.#ku;if(!t&&!e&&(ch()||!oh().isElement))return;const i=TL();if(e)this.#$u(e),t&&t!==e.element&&OL(t);else{for(const e of Ph())e!==t&&WL(e,!1,!1);t&&OL(t)}i.restore()}#$u(t){const e=Kl(),i=this.#ku.element,n=i.paragraph.matrix;var s;e.save(),e.multiplyMatrix(i.globalMatrix),n&&e.multiplyMatrix(n),PL(),RL(i.paragraph.bounds,!1,!1),function(t){if(!t.length)return;const e=Kl(),i=Oc("text-baseline");for(let n=0;n<t.length;n+=2)e.drawLine(t[n],t[n+1],i)}(t.baselines),function(t){if(!t?.length)return;const e=Kl(),i=Ec("selection-area");for(const n of t)n.isVisible&&e.drawRect(n,i)}(t.selectionRects),this.#Fu&&VL((s=t.cursorLine)[0],s[1],void 0),e.restore(),PL()}#ju=t=>{let e=!0;return this.#ku&&(this.#Eu(),e=!1),{start:t.position,end:t.position,allowAuto:e}};#Iu=t=>{EL(t.start,t.end)};#Cu=t=>({start:t.position,end:t.position,allowAuto:!0});#Lu=(t,e)=>{e.end=t.position,Bl()};#Nu=(t,e)=>{if(!e.allowAuto&&e.start.distanceTo(e.end)<=2*Math.SQRT2)return!1;if(Ua&&e.start.equals(e.end)){const i=KL(t.position,!0);i&&(e.start=i.globalBounds.topLeft,e.start=i.globalBounds.bottomRight)}const i=Ve.fromPoints(e.start,e.end),n=iN((()=>this.#Bu(i.width,i.height)),i.topLeft,!1,!1);return this.#Vu(n).setRange(0,n.paragraph.source.length),!0};#Au=(t,e)=>(this.#ku?.element!==e&&(ph(e,!1),this.#Vu(e)),this.#zu(t));#zu=t=>{this.#Ru();const e=this.#ku;return e.moveTo(t.position,Ba,!0),Bl(),{position:e.range.end}};#Pu=(t,e)=>{const i=this.#ku,n=i.getIndexAtPoint(t.position,!0);i.setRange(e.position,n)};#Tu=()=>(this.#Wu(),!1);onKeyDown(t){return!!this.isWorking||(this.#ku?!!this.#ku.isFocused&&(t.preventDefault(),t.stopPropagation(),"Escape"===t.code?(this.#Eu(),Rl()):this.#ku.onKeydown(t).then(this.#Hu),!0):super.onKeyDown(t))}onKeyUp(){return this.#ku&&this.#ku.isFocused&&this.#Wu(),!1}#Hu=t=>{this.#Ru(),1===t&&Bl()};#Gu=0;#Fu=!0;#Zu=()=>{this.#Fu=!this.#Fu,Bl()};#Wu(){this.#Gu||(this.#Gu=setInterval(this.#Zu,490),this.#Fu=!0)}#Ru(){this.#Gu&&(clearInterval(this.#Gu),this.#Gu=0),this.#Fu=!0}startEdit(t){this.#Vu(t).selectAll()}#Vu(t){return this.#ku?.element===t||(this.#Eu(!1),this.#ku=new zN(t),t.paragraph.isEditMode=!0,t.invalidateParagraph(),$v.update(t),this.#Wu()),this.#ku}#Eu(t=!0){if(this.#Ru(),!this.#ku)return!1;const e=this.#ku.element;e&&e.paragraph&&(e.paragraph.isEditMode=!1,e.invalidateParagraph());const i=this.#ku.hasChanged;return this.#ku.dispose(),this.#ku=null,t&&this.update(),i&&Jo(),i}}const EN=[0,null];function ON(t){switch(t.type){case 1:return Ua?"node-sub":"node-move";case 2:return Ua?"node-add":"node-mold";case 0:return Ua&&!Tv(t.element)?"node-sub":"node-move"}return"node"}function WN(t,e){return t?!!e&&t.element===e.element&&t.type===e.type&&t.index===e.index&&t.handle==e.handle&&t.handleType==e.handleType:!e}class RN extends oN{#Yu;#Qu;#$e;#Ma;constructor(){super(),this.#Yu=null,this.#Qu=null,this.#$e=null,this.#Ma=new Ti,this.horizontal=!1,this.isWorking=!0,this.dblClickDelta=-1}get name(){return"guide"}activate(){super.activate(),zl(this.horizontal?"resize-v":"resize-h"),this.#Ma.brush=Ec("guide")}deactivate(){super.deactivate(),this.#Yu=null,this.#Qu=null,this.#$e=null,this.restore=null}draw(){Kl().drawLine(this.#Yu,this.#Qu,this.#Ma)}onMouseLeftButtonDown(t){ES(),this.onMouseLeftButtonMove(t)}onMouseLeftButtonMove(t){let e=Ba?t.position.rounded():t.position;e=qS(e,this.horizontal?"x":"y"),this.#$e=e,e=Ya.transformPoint(e),this.horizontal?(this.#Yu=new ce(0,e.y),this.#Qu=new ce(Ja.width,e.y)):(this.#Yu=new ce(e.x,0),this.#Qu=new ce(e.x,Ja.height)),Bl()}onMouseLeftButtonUp(t){const e=this.horizontal,i=e?this.#$e.y:this.#$e.x;if(e?t.canvasPosition.y>0:t.canvasPosition.x>0){const t=_k();t.exists(i,e)||(t.add(new bk(i,e)),Jo())}OS(),this.restore?.(),this.restore=null}}let BN;function UN(t,e){return BN??=new RN,BN.horizontal=t,BN.restore=e,BN}const $N="render";function FN(t){return pa($N,t)}function VN(t){const e=FN();if(e.transparency||t.clear(bl.background),t.save(),t.multiplyMatrix(Ya),e.transparency){const e=t.paint;e.isAntiAlias=!0,e.shader=(i=hl(15),YN||(YN=new Skia.SkRuntimeShaderBuilder(Skia.SkRuntimeEffect.MakeForShader("\nuniform float size;\nhalf4 main(vec2 coord) {\n    vec2 uv = fract(coord / size);\n    uv -= 0.5;\n    return mix(.8, 1, step(uv.x * uv.y, 0)).rrr1;\n}"))),i!==JN?(JN=i,QN?.delete(),YN.float("size",i),QN=YN.makeShader()):QN),e.style=Skia.SkPaintStyle.Fill;const n=tl(),s=el();t.canvas.drawRect(n.x,n.y,s.x,s.y,e),e.reset()}var i;const n=jk,s=n.isSingle;if(e.transparency||(s?t.fillRect(n.bounds,bl.board,-.35/Ka):t.fillPath(n.path,bl.board)),Tk||e.transparency){const e=zk.bounds,i=t.paint;i.isAntiAlias=!0,i.color=se.black.code,i.style=Skia.SkPaintStyle.Stroke,i.strokeWidth=hl(1),t.canvas.drawRect(e,i),i.reset()}const r=yk();if(r.enabled&&!r.front&&vk().render(),e.clip&&(t.save(),s?t.clipRect(n.bounds):t.clipPath(n.path)),e.wireframe)!function(t){if(Au()){t.drawColor(bl.overlay);for(const e of zu()){if(!e.isRenderable||e.isInvisible)continue;const i=e.parent?.globalMatrix,n=i&&!i.isIdentity;n&&(t.save(),t.multiplyMatrix(i)),e.drawWireframe(t),n&&t.restore()}}else for(const e of $c.children())e.drawWireframe(t)}(t);else if(e.pixelate&&Ka>=.9){const e=t.matrix.clone();t.matrix=t.matrix.toIdentity();const i=Skia.SkImageFilter.MakeMatrixTransform(e,null,ZN??=Skia.SkSamplingOptions.MakeFilterMipmap(Skia.SkFilterMode.Nearest,Skia.SkMipmapMode.None));t.saveFilter(i),HN(t),t.restore(),i.delete(),t.matrix=e}else HN(t);e.clip&&t.restore(),function(t){if(!Au()||Nu())return;const e=Pu(),i=e.isolationContour;i&&(t.save(),t.multiplyMatrix(e.globalMatrix),GN.width=2*t.getLineScale(Xa),GN.brush=GN.brush.withColor(bl.contour),i instanceof Ve?t.drawRect(i,GN):t.drawPath(i,GN),t.restore())}(t),r.enabled&&r.front&&vk().render(),Ik().enabled&&Sk?.render(),t.restore()}function HN(t){t.drawPicture($c.picture,oe.NormalIsolatedComposition),Au()&&(t.drawColor(bl.overlay),function(t){t.saveLayer(oe.NormalIsolatedComposition);for(const e of zu()){if(e.isInvisibleDrawing)continue;const i=e.parent?.globalMatrix,n=i&&!i.isIdentity;n&&(t.save(),t.multiplyMatrix(i)),e.draw(t),n&&t.restore()}t.restore()}(t))}ga($N,(t=>({ruler:t?.engine?.showRuler??!1,clip:t?.engine?.clipDocument??!1,wireframe:t?.engine?.wireframe??!1,pixelate:t?.engine?.pixelate??!1,transparency:!1})));const GN=new Ti;let ZN,YN,QN,JN;const qN={has:function(t){return mM.has(t)},read:async(t,e,i)=>MM(await t.arrayBuffer(),i,{position:e?.position,zoom:!e?.isShift&&e?.isAlt})},KN={};function XN(t){let e=t.length;for(;--e>=0;)t[e]=0}KN.G={concat:function(t,e){for(var i=0;i<e.cmds.length;i++)t.cmds.push(e.cmds[i]);for(i=0;i<e.crds.length;i++)t.crds.push(e.crds[i])},getBB:function(t){for(var e=1e99,i=1e99,n=-e,s=-i,r=0;r<t.length;r+=2){var o=t[r],a=t[r+1];o<e&&(e=o),o>n&&(n=o),a<i&&(i=a),a>s&&(s=a)}return[e,i,n,s]},rectToPath:function(t){return{cmds:["M","L","L","L","Z"],crds:[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]]}},insideBox:function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&t[2]<=e[2]&&t[3]<=e[3]},isBox:function(t,e){var i=function(t,e){for(var i=0;i<8;i+=2){for(var n=!0,s=0;s<8;s++)if(Math.abs(e[s]-t[s+i&7])>=2){n=!1;break}if(n)return!0}return!1};if(t.cmds.length>10)return!1;var n=t.cmds.join(""),s=t.crds,r=!1;if("MLLLZ"==n&&8==s.length||"MLLLLZ"==n&&10==s.length){if(10==s.length&&(s=s.slice(0,8)),null==e){e=[s[0],s[1],s[0],s[1]];for(var o=0;o<s.length;o+=2){var a=s[o],l=s[o+1];a<e[0]&&(e[0]=a),l<e[1]&&(e[1]=l),e[2]<a&&(e[2]=a),e[3]<l&&(e[3]=l)}}var c=e[0],u=e[1],h=e[2],d=e[3];r||(r=i(s,[c,u,h,u,h,d,c,d])),r||(r=i(s,[c,d,h,d,h,u,c,u]))}return r},boxArea:function(t){return(t[2]-t[0])*(t[3]-t[1])},newPath:function(t){t.pth={cmds:[],crds:[]}},moveTo:function(t,e,i){var n=KN.M.multPoint(t.ctm,[e,i]),s=t.pth,r=s.cmds.length;0!=r&&"M"==s.cmds[r-1]&&(s.cmds.pop(),s.crds.pop(),s.crds.pop()),t.pth.cmds.push("M"),t.pth.crds.push(n[0],n[1]),t.cpos=n},lineTo:function(t,e,i){var n=KN.M.multPoint(t.ctm,[e,i]);t.cpos[0]==n[0]&&t.cpos[1]==n[1]||(t.pth.cmds.push("L"),t.pth.crds.push(n[0],n[1]),t.cpos=n)},curveTo:function(t,e,i,n,s,r,o){var a;0==t.pth.cmds.length&&KN.G.moveTo(t,0,0),e=(a=KN.M.multPoint(t.ctm,[e,i]))[0],i=a[1],n=(a=KN.M.multPoint(t.ctm,[n,s]))[0],s=a[1],r=(a=KN.M.multPoint(t.ctm,[r,o]))[0],o=a[1],t.cpos=a,t.pth.cmds.push("C"),t.pth.crds.push(e,i,n,s,r,o)},closePath:function(t){t.pth.cmds.push("Z")},arc:function(t,e,i,n,s,r,o){if(o)for(;r>s;)r-=2*Math.PI;else for(;r<s;)r+=2*Math.PI;for(var a=(r-s)/4,l=Math.cos(a/2),c=-Math.sin(a/2),u=(4-l)/3,h=0==c?c:(1-l)*(3-l)/(3*c),d=[u,h],f=[u,-h],p=[l,-c],g={cmds:[0==t.pth.cmds.length?"M":"L"],crds:[l,c]},m=[1,0,0,1,0,0],v=0;v<4;v++)d=KN.M.multPoint(m,d),f=KN.M.multPoint(m,f),p=KN.M.multPoint(m,p),g.crds.push(d[0],d[1],f[0],f[1],p[0],p[1]),g.cmds.push("C"),0==v&&KN.M.rotate(m,-a);var y=[n,0,0,n,e,i];KN.M.rotate(m,a/2-s),KN.M.concat(m,y),KN.M.multArray(m,g.crds),KN.M.multArray(t.ctm,g.crds),KN.G.concat(t.pth,g),i=g.crds.pop(),e=g.crds.pop(),t.cpos=[e,i]},drawRect:function(t,e,i,n,s){KN.G.moveTo(t,e,i),KN.G.lineTo(t,e+n,i),KN.G.lineTo(t,e+n,i+s),KN.G.lineTo(t,e,i+s),KN.G.closePath(t)},toPoly:function(t){if("M"!=t.cmds[0]||"Z"!=t.cmds[t.cmds.length-1])return null;for(var e=1;e<t.cmds.length-1;e++)if("L"!=t.cmds[e])return null;var i=[],n=t.crds.length;for(t.crds[0]==t.crds[n-2]&&t.crds[1]==t.crds[n-1]&&(n-=2),e=0;e<n;e+=2)i.push([t.crds[e],t.crds[e+1]]);return KN.G.polyArea(t.crds)<0&&i.reverse(),i},fromPoly:function(t){for(var e={cmds:[],crds:[]},i=0;i<t.length;i++)e.crds.push(t[i][0],t[i][1]),e.cmds.push(0==i?"M":"L");return e.cmds.push("Z"),e},polyArea:function(t){if(t.length<6)return 0;for(var e=t.length-2,i=(t[0]-t[e])*(t[e+1]+t[1]),n=0;n<e;n+=2)i+=(t[n+2]-t[n])*(t[n+1]+t[n+3]);return.5*-i},polyClip:function(t,e){var i,n,s=function(t){return(a[0]-i[0])*(t[1]-i[1])>(a[1]-i[1])*(t[0]-i[0])},r=function(){var t=[i[0]-a[0],i[1]-a[1]],e=[n[0]-c[0],n[1]-c[1]],s=i[0]*a[1]-i[1]*a[0],r=n[0]*c[1]-n[1]*c[0],o=1/(t[0]*e[1]-t[1]*e[0]);return[(s*e[0]-r*t[0])*o,(s*e[1]-r*t[1])*o]},o=t;i=e[e.length-1];for(let t in e){var a=e[t],l=o;o=[],n=l[l.length-1];for(let t in l){var c;s(c=l[t])?(s(n)||o.push(r()),o.push(c)):s(n)&&o.push(r()),n=c}i=a}return o}},KN.M={getScale:function(t){return Math.sqrt(Math.abs(t[0]*t[3]-t[1]*t[2]))},translate:function(t,e,i){KN.M.concat(t,[1,0,0,1,e,i])},rotate:function(t,e){KN.M.concat(t,[Math.cos(e),-Math.sin(e),Math.sin(e),Math.cos(e),0,0])},scale:function(t,e,i){KN.M.concat(t,[e,0,0,i,0,0])},concat:function(t,e){var i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],a=t[5];t[0]=i*e[0]+n*e[2],t[1]=i*e[1]+n*e[3],t[2]=s*e[0]+r*e[2],t[3]=s*e[1]+r*e[3],t[4]=o*e[0]+a*e[2]+e[4],t[5]=o*e[1]+a*e[3]+e[5]},invert:function(t){var e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],a=e*s-i*n;t[0]=s/a,t[1]=-i/a,t[2]=-n/a,t[3]=e/a,t[4]=(n*o-s*r)/a,t[5]=(i*r-e*o)/a},multPoint:function(t,e){var i=e[0],n=e[1];return[i*t[0]+n*t[2]+t[4],i*t[1]+n*t[3]+t[5]]},multArray:function(t,e){for(var i=0;i<e.length;i+=2){var n=e[i],s=e[i+1];e[i]=n*t[0]+s*t[2]+t[4],e[i+1]=n*t[1]+s*t[3]+t[5]}}},KN.C={srgbGamma:function(t){return t<.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055},cmykToRgb:function(t){var e=t[0],i=t[1],n=t[2],s=t[3],r=255+e*(-4.387332384609988*e+54.48615194189176*i+18.82290502165302*n+212.25662451639585*s-285.2331026137004)+i*(1.7149763477362134*i-5.6096736904047315*n+-17.873870861415444*s-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*s+17.5119270841813)+s*(-21.86122147463605*s-189.48180835922747),o=255+e*(8.841041422036149*e+60.118027045597366*i+6.871425592049007*n+31.159100130055922*s-79.2970844816548)+i*(-15.310361306967817*i+17.575251261109482*n+131.35250912493976*s-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*s-24.86741582555878)+s*(-20.737325471181034*s-187.80453709719578),a=255+e*(.8842522430003296*e+8.078677503112928*i+30.89978309703729*n-.23883238689178934*s-14.183576799673286)+i*(10.49593273432072*i+63.02378494754052*n+50.606957656360734*s-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*s-193.58209356861505)+s*(-22.33816807309886*s-180.12613974708367);return[Math.max(0,Math.min(1,r/255)),Math.max(0,Math.min(1,o/255)),Math.max(0,Math.min(1,a/255))]},labToRgb:function(t){for(var e=903.3,i=.008856,n=t[0],s=t[1],r=(n+16)/116,o=r*r*r,a=r-t[2]/200,l=a*a*a,c=s/500+r,u=c*c*c,h=[96.72*(u>i?u:(116*c-16)/e)/100,100*(o>i?o:(116*r-16)/e)/100,81.427*(l>i?l:(116*a-16)/e)/100],d=[3.1338561,-1.6168667,-.4906146,-.9787684,1.9161415,.033454,.0719453,-.2289914,1.4052427],f=[d[0]*h[0]+d[1]*h[1]+d[2]*h[2],d[3]*h[0]+d[4]*h[1]+d[5]*h[2],d[6]*h[0]+d[7]*h[1]+d[8]*h[2]],p=0;p<3;p++)f[p]=Math.max(0,Math.min(1,KN.C.srgbGamma(f[p])));return f}},KN.getState=function(t){return{font:KN.getFont(),dd:{flat:1},ca:1,colr:[0,0,0],space:"/DeviceGray",CA:1,COLR:[0,0,0],sspace:"/DeviceGray",bmode:"/Normal",SA:!1,OPM:0,AIS:!1,OP:!1,op:!1,SMask:"/None",lwidth:1,lcap:0,ljoin:0,mlimit:10,SM:.1,doff:0,dash:[],ctm:[1,0,0,1,0,0],cpos:[0,0],pth:{cmds:[],crds:[]},cpth:t?KN.G.rectToPath(t):null,cpstack:[]}},KN.getFont=function(){return{Tc:0,Tw:0,Th:100,Tl:0,Tf:"Helvetica-Bold",Tfs:1,Tmode:0,Trise:0,Tk:0,Tal:0,Tun:0,Tm:[1,0,0,1,0,0],Tlm:[1,0,0,1,0,0],Trm:[1,0,0,1,0,0]}};const tj=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ej=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ij=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),nj=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sj=new Array(576);XN(sj);const rj=new Array(60);XN(rj);const oj=new Array(512);XN(oj);const aj=new Array(256);XN(aj);const lj=new Array(29);XN(lj);const cj=new Array(30);function uj(t,e,i,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=s,this.has_stree=t&&t.length}let hj,dj,fj;function pj(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}XN(cj);const gj=t=>t<256?oj[t]:oj[256+(t>>>7)],mj=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},vj=(t,e,i)=>{t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,mj(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)},yj=(t,e,i)=>{vj(t,i[2*e],i[2*e+1])},xj=(t,e)=>{let i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1},bj=(t,e,i)=>{const n=new Array(16);let s,r,o=0;for(s=1;s<=15;s++)o=o+i[s-1]<<1,n[s]=o;for(r=0;r<=e;r++){let e=t[2*r+1];0!==e&&(t[2*r]=xj(n[e]++,e))}},wj=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Mj=t=>{t.bi_valid>8?mj(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Sj=(t,e,i,n)=>{const s=2*e,r=2*i;return t[s]<t[r]||t[s]===t[r]&&n[e]<=n[i]},kj=(t,e,i)=>{const n=t.heap[i];let s=i<<1;for(;s<=t.heap_len&&(s<t.heap_len&&Sj(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!Sj(e,n,t.heap[s],t.depth));)t.heap[i]=t.heap[s],i=s,s<<=1;t.heap[i]=n},_j=(t,e,i)=>{let n,s,r,o,a=0;if(0!==t.sym_next)do{n=255&t.pending_buf[t.sym_buf+a++],n+=(255&t.pending_buf[t.sym_buf+a++])<<8,s=t.pending_buf[t.sym_buf+a++],0===n?yj(t,s,e):(r=aj[s],yj(t,r+256+1,e),o=tj[r],0!==o&&(s-=lj[r],vj(t,s,o)),n--,r=gj(n),yj(t,r,i),o=ej[r],0!==o&&(n-=cj[r],vj(t,n,o)))}while(a<t.sym_next);yj(t,256,e)},Ij=(t,e)=>{const i=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.elems;let o,a,l,c=-1;for(t.heap_len=0,t.heap_max=573,o=0;o<r;o++)0!==i[2*o]?(t.heap[++t.heap_len]=c=o,t.depth[o]=0):i[2*o+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=c<2?++c:0,i[2*l]=1,t.depth[l]=0,t.opt_len--,s&&(t.static_len-=n[2*l+1]);for(e.max_code=c,o=t.heap_len>>1;o>=1;o--)kj(t,i,o);l=r;do{o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],kj(t,i,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,i[2*l]=i[2*o]+i[2*a],t.depth[l]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,i[2*o+1]=i[2*a+1]=l,t.heap[1]=l++,kj(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const i=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,r=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length;let c,u,h,d,f,p,g=0;for(d=0;d<=15;d++)t.bl_count[d]=0;for(i[2*t.heap[t.heap_max]+1]=0,c=t.heap_max+1;c<573;c++)u=t.heap[c],d=i[2*i[2*u+1]+1]+1,d>l&&(d=l,g++),i[2*u+1]=d,u>n||(t.bl_count[d]++,f=0,u>=a&&(f=o[u-a]),p=i[2*u],t.opt_len+=p*(d+f),r&&(t.static_len+=p*(s[2*u+1]+f)));if(0!==g){do{for(d=l-1;0===t.bl_count[d];)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[l]--,g-=2}while(g>0);for(d=l;0!==d;d--)for(u=t.bl_count[d];0!==u;)h=t.heap[--c],h>n||(i[2*h+1]!==d&&(t.opt_len+=(d-i[2*h+1])*i[2*h],i[2*h+1]=d),u--)}})(t,e),bj(i,c,t.bl_count)},Cj=(t,e,i)=>{let n,s,r=-1,o=e[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)s=o,o=e[2*(n+1)+1],++a<l&&s===o||(a<c?t.bl_tree[2*s]+=a:0!==s?(s!==r&&t.bl_tree[2*s]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,r=s,0===o?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},Lj=(t,e,i)=>{let n,s,r=-1,o=e[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),n=0;n<=i;n++)if(s=o,o=e[2*(n+1)+1],!(++a<l&&s===o)){if(a<c)do{yj(t,s,t.bl_tree)}while(0!=--a);else 0!==s?(s!==r&&(yj(t,s,t.bl_tree),a--),yj(t,16,t.bl_tree),vj(t,a-3,2)):a<=10?(yj(t,17,t.bl_tree),vj(t,a-3,3)):(yj(t,18,t.bl_tree),vj(t,a-11,7));a=0,r=s,0===o?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}};let Nj=!1;const jj=(t,e,i,n)=>{vj(t,0+(n?1:0),3),Mj(t),mj(t,i),mj(t,~i),i&&t.pending_buf.set(t.window.subarray(e,e+i),t.pending),t.pending+=i};var zj={_tr_init:t=>{Nj||((()=>{let t,e,i,n,s;const r=new Array(16);for(i=0,n=0;n<28;n++)for(lj[n]=i,t=0;t<1<<tj[n];t++)aj[i++]=n;for(aj[i-1]=n,s=0,n=0;n<16;n++)for(cj[n]=s,t=0;t<1<<ej[n];t++)oj[s++]=n;for(s>>=7;n<30;n++)for(cj[n]=s<<7,t=0;t<1<<ej[n]-7;t++)oj[256+s++]=n;for(e=0;e<=15;e++)r[e]=0;for(t=0;t<=143;)sj[2*t+1]=8,t++,r[8]++;for(;t<=255;)sj[2*t+1]=9,t++,r[9]++;for(;t<=279;)sj[2*t+1]=7,t++,r[7]++;for(;t<=287;)sj[2*t+1]=8,t++,r[8]++;for(bj(sj,287,r),t=0;t<30;t++)rj[2*t+1]=5,rj[2*t]=xj(t,5);hj=new uj(sj,tj,257,286,15),dj=new uj(rj,ej,0,30,15),fj=new uj(new Array(0),ij,0,19,7)})(),Nj=!0),t.l_desc=new pj(t.dyn_ltree,hj),t.d_desc=new pj(t.dyn_dtree,dj),t.bl_desc=new pj(t.bl_tree,fj),t.bi_buf=0,t.bi_valid=0,wj(t)},_tr_stored_block:jj,_tr_flush_block:(t,e,i,n)=>{let s,r,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),Ij(t,t.l_desc),Ij(t,t.d_desc),o=(t=>{let e;for(Cj(t,t.dyn_ltree,t.l_desc.max_code),Cj(t,t.dyn_dtree,t.d_desc.max_code),Ij(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*nj[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),s=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=s&&(s=r)):s=r=i+5,i+4<=s&&-1!==e?jj(t,e,i,n):4===t.strategy||r===s?(vj(t,2+(n?1:0),3),_j(t,sj,rj)):(vj(t,4+(n?1:0),3),((t,e,i,n)=>{let s;for(vj(t,e-257,5),vj(t,i-1,5),vj(t,n-4,4),s=0;s<n;s++)vj(t,t.bl_tree[2*nj[s]+1],3);Lj(t,t.dyn_ltree,e-1),Lj(t,t.dyn_dtree,i-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),_j(t,t.dyn_ltree,t.dyn_dtree)),wj(t),n&&Mj(t)},_tr_tally:(t,e,i)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=i,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(aj[i]+256+1)]++,t.dyn_dtree[2*gj(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{vj(t,2,3),yj(t,256,sj),(t=>{16===t.bi_valid?(mj(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},Pj=(t,e,i,n)=>{let s=65535&t,r=t>>>16&65535,o=0;for(;0!==i;){o=i>2e3?2e3:i,i-=o;do{s=s+e[n++]|0,r=r+s|0}while(--o);s%=65521,r%=65521}return s|r<<16};const Tj=new Uint32Array((()=>{let t,e=[];for(var i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e})());var Aj=(t,e,i,n)=>{const s=Tj,r=n+i;t^=-1;for(let i=n;i<r;i++)t=t>>>8^s[255&(t^e[i])];return~t},Dj={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ej={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Oj,_tr_stored_block:Wj,_tr_flush_block:Rj,_tr_tally:Bj,_tr_align:Uj}=zj,{Z_NO_FLUSH:$j,Z_PARTIAL_FLUSH:Fj,Z_FULL_FLUSH:Vj,Z_FINISH:Hj,Z_BLOCK:Gj,Z_OK:Zj,Z_STREAM_END:Yj,Z_STREAM_ERROR:Qj,Z_DATA_ERROR:Jj,Z_BUF_ERROR:qj,Z_DEFAULT_COMPRESSION:Kj,Z_FILTERED:Xj,Z_HUFFMAN_ONLY:tz,Z_RLE:ez,Z_FIXED:iz,Z_DEFAULT_STRATEGY:nz,Z_UNKNOWN:sz,Z_DEFLATED:rz}=Ej,oz=258,az=262,lz=42,cz=113,uz=666,hz=(t,e)=>(t.msg=Dj[e],e),dz=t=>2*t-(t>4?9:0),fz=t=>{let e=t.length;for(;--e>=0;)t[e]=0},pz=t=>{let e,i,n,s=t.w_size;e=t.hash_size,n=e;do{i=t.head[--n],t.head[n]=i>=s?i-s:0}while(--e);e=s,n=e;do{i=t.prev[--n],t.prev[n]=i>=s?i-s:0}while(--e)};let gz=(t,e,i)=>(e<<t.hash_shift^i)&t.hash_mask;const mz=t=>{const e=t.state;let i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+i),t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))},vz=(t,e)=>{Rj(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,mz(t.strm)},yz=(t,e)=>{t.pending_buf[t.pending++]=e},xz=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},bz=(t,e,i,n)=>{let s=t.avail_in;return s>n&&(s=n),0===s?0:(t.avail_in-=s,e.set(t.input.subarray(t.next_in,t.next_in+s),i),1===t.state.wrap?t.adler=Pj(t.adler,e,s,i):2===t.state.wrap&&(t.adler=Aj(t.adler,e,s,i)),t.next_in+=s,t.total_in+=s,s)},wz=(t,e)=>{let i,n,s=t.max_chain_length,r=t.strstart,o=t.prev_length,a=t.nice_match;const l=t.strstart>t.w_size-az?t.strstart-(t.w_size-az):0,c=t.window,u=t.w_mask,h=t.prev,d=t.strstart+oz;let f=c[r+o-1],p=c[r+o];t.prev_length>=t.good_match&&(s>>=2),a>t.lookahead&&(a=t.lookahead);do{if(i=e,c[i+o]===p&&c[i+o-1]===f&&c[i]===c[r]&&c[++i]===c[r+1]){r+=2,i++;do{}while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<d);if(n=oz-(d-r),r=d-oz,n>o){if(t.match_start=e,o=n,n>=a)break;f=c[r+o-1],p=c[r+o]}}}while((e=h[e&u])>l&&0!=--s);return o<=t.lookahead?o:t.lookahead},Mz=t=>{const e=t.w_size;let i,n,s;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-az)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),pz(t),n+=e),0===t.strm.avail_in)break;if(i=bz(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=i,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=gz(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=gz(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<az&&0!==t.strm.avail_in)},Sz=(t,e)=>{let i,n,s,r=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,o=0,a=t.strm.avail_in;do{if(i=65535,s=t.bi_valid+42>>3,t.strm.avail_out<s)break;if(s=t.strm.avail_out-s,n=t.strstart-t.block_start,i>n+t.strm.avail_in&&(i=n+t.strm.avail_in),i>s&&(i=s),i<r&&(0===i&&e!==Hj||e===$j||i!==n+t.strm.avail_in))break;o=e===Hj&&i===n+t.strm.avail_in?1:0,Wj(t,0,0,o),t.pending_buf[t.pending-4]=i,t.pending_buf[t.pending-3]=i>>8,t.pending_buf[t.pending-2]=~i,t.pending_buf[t.pending-1]=~i>>8,mz(t.strm),n&&(n>i&&(n=i),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+n),t.strm.next_out),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n,t.block_start+=n,i-=n),i&&(bz(t.strm,t.strm.output,t.strm.next_out,i),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i)}while(0===o);return a-=t.strm.avail_in,a&&(a>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=a&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-a,t.strm.next_in),t.strstart),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?4:e!==$j&&e!==Hj&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(s=t.window_size-t.strstart,t.strm.avail_in>s&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,s+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),s>t.strm.avail_in&&(s=t.strm.avail_in),s&&(bz(t.strm,t.window,t.strstart,s),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.high_water<t.strstart&&(t.high_water=t.strstart),s=t.bi_valid+42>>3,s=t.pending_buf_size-s>65535?65535:t.pending_buf_size-s,r=s>t.w_size?t.w_size:s,n=t.strstart-t.block_start,(n>=r||(n||e===Hj)&&e!==$j&&0===t.strm.avail_in&&n<=s)&&(i=n>s?s:n,o=e===Hj&&0===t.strm.avail_in&&i===n?1:0,Wj(t,t.block_start,i,o),t.block_start+=i,mz(t.strm)),o?3:1)},kz=(t,e)=>{let i,n;for(;;){if(t.lookahead<az){if(Mz(t),t.lookahead<az&&e===$j)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=gz(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-az&&(t.match_length=wz(t,i)),t.match_length>=3)if(n=Bj(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=gz(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=gz(t,t.ins_h,t.window[t.strstart+1]);else n=Bj(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(vz(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===Hj?(vz(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(vz(t,!1),0===t.strm.avail_out)?1:2},_z=(t,e)=>{let i,n,s;for(;;){if(t.lookahead<az){if(Mz(t),t.lookahead<az&&e===$j)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=gz(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-az&&(t.match_length=wz(t,i),t.match_length<=5&&(t.strategy===Xj||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,n=Bj(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=gz(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(vz(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=Bj(t,0,t.window[t.strstart-1]),n&&vz(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Bj(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===Hj?(vz(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(vz(t,!1),0===t.strm.avail_out)?1:2};function Iz(t,e,i,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=s}const Cz=[new Iz(0,0,0,0,Sz),new Iz(4,4,8,4,kz),new Iz(4,5,16,8,kz),new Iz(4,6,32,32,kz),new Iz(4,4,16,16,_z),new Iz(8,16,32,32,_z),new Iz(8,16,128,128,_z),new Iz(8,32,128,256,_z),new Iz(32,128,258,1024,_z),new Iz(32,258,258,4096,_z)];function Lz(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=rz,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),fz(this.dyn_ltree),fz(this.dyn_dtree),fz(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),fz(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),fz(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Nz=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==lz&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==cz&&e.status!==uz?1:0},jz=t=>{if(Nz(t))return hz(t,Qj);t.total_in=t.total_out=0,t.data_type=sz;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?lz:cz,t.adler=2===e.wrap?0:1,e.last_flush=-2,Oj(e),Zj},zz=t=>{const e=jz(t);return e===Zj&&(t=>{t.window_size=2*t.w_size,fz(t.head),t.max_lazy_match=Cz[t.level].max_lazy,t.good_match=Cz[t.level].good_length,t.nice_match=Cz[t.level].nice_length,t.max_chain_length=Cz[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0})(t.state),e},Pz=(t,e,i,n,s,r)=>{if(!t)return Qj;let o=1;if(e===Kj&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>9||i!==rz||n<8||n>15||e<0||e>9||r<0||r>iz||8===n&&1!==o)return hz(t,Qj);8===n&&(n=9);const a=new Lz;return t.state=a,a.strm=t,a.status=lz,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=e,a.strategy=r,a.method=i,zz(t)};var Tz={deflateInit:(t,e)=>Pz(t,e,rz,15,8,nz),deflateInit2:Pz,deflateReset:zz,deflateResetKeep:jz,deflateSetHeader:(t,e)=>Nz(t)||2!==t.state.wrap?Qj:(t.state.gzhead=e,Zj),deflate:(t,e)=>{if(Nz(t)||e>Gj||e<0)return t?hz(t,Qj):Qj;const i=t.state;if(!t.output||0!==t.avail_in&&!t.input||i.status===uz&&e!==Hj)return hz(t,0===t.avail_out?qj:Qj);const n=i.last_flush;if(i.last_flush=e,0!==i.pending){if(mz(t),0===t.avail_out)return i.last_flush=-1,Zj}else if(0===t.avail_in&&dz(e)<=dz(n)&&e!==Hj)return hz(t,qj);if(i.status===uz&&0!==t.avail_in)return hz(t,qj);if(i.status===lz&&0===i.wrap&&(i.status=cz),i.status===lz){let e=rz+(i.w_bits-8<<4)<<8,n=-1;if(n=i.strategy>=tz||i.level<2?0:i.level<6?1:6===i.level?2:3,e|=n<<6,0!==i.strstart&&(e|=32),e+=31-e%31,xz(i,e),0!==i.strstart&&(xz(i,t.adler>>>16),xz(i,65535&t.adler)),t.adler=1,i.status=cz,mz(t),0!==i.pending)return i.last_flush=-1,Zj}if(57===i.status)if(t.adler=0,yz(i,31),yz(i,139),yz(i,8),i.gzhead)yz(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),yz(i,255&i.gzhead.time),yz(i,i.gzhead.time>>8&255),yz(i,i.gzhead.time>>16&255),yz(i,i.gzhead.time>>24&255),yz(i,9===i.level?2:i.strategy>=tz||i.level<2?4:0),yz(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(yz(i,255&i.gzhead.extra.length),yz(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=Aj(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(yz(i,0),yz(i,0),yz(i,0),yz(i,0),yz(i,0),yz(i,9===i.level?2:i.strategy>=tz||i.level<2?4:0),yz(i,3),i.status=cz,mz(t),0!==i.pending)return i.last_flush=-1,Zj;if(69===i.status){if(i.gzhead.extra){let e=i.pending,n=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+n>i.pending_buf_size;){let s=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+s),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>e&&(t.adler=Aj(t.adler,i.pending_buf,i.pending-e,e)),i.gzindex+=s,mz(t),0!==i.pending)return i.last_flush=-1,Zj;e=0,n-=s}let s=new Uint8Array(i.gzhead.extra);i.pending_buf.set(s.subarray(i.gzindex,i.gzindex+n),i.pending),i.pending+=n,i.gzhead.hcrc&&i.pending>e&&(t.adler=Aj(t.adler,i.pending_buf,i.pending-e,e)),i.gzindex=0}i.status=73}if(73===i.status){if(i.gzhead.name){let e,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(t.adler=Aj(t.adler,i.pending_buf,i.pending-n,n)),mz(t),0!==i.pending)return i.last_flush=-1,Zj;n=0}e=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,yz(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>n&&(t.adler=Aj(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex=0}i.status=91}if(91===i.status){if(i.gzhead.comment){let e,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(t.adler=Aj(t.adler,i.pending_buf,i.pending-n,n)),mz(t),0!==i.pending)return i.last_flush=-1,Zj;n=0}e=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,yz(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>n&&(t.adler=Aj(t.adler,i.pending_buf,i.pending-n,n))}i.status=103}if(103===i.status){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(mz(t),0!==i.pending))return i.last_flush=-1,Zj;yz(i,255&t.adler),yz(i,t.adler>>8&255),t.adler=0}if(i.status=cz,mz(t),0!==i.pending)return i.last_flush=-1,Zj}if(0!==t.avail_in||0!==i.lookahead||e!==$j&&i.status!==uz){let n=0===i.level?Sz(i,e):i.strategy===tz?((t,e)=>{let i;for(;;){if(0===t.lookahead&&(Mz(t),0===t.lookahead)){if(e===$j)return 1;break}if(t.match_length=0,i=Bj(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(vz(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Hj?(vz(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(vz(t,!1),0===t.strm.avail_out)?1:2})(i,e):i.strategy===ez?((t,e)=>{let i,n,s,r;const o=t.window;for(;;){if(t.lookahead<=oz){if(Mz(t),t.lookahead<=oz&&e===$j)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(s=t.strstart-1,n=o[s],n===o[++s]&&n===o[++s]&&n===o[++s])){r=t.strstart+oz;do{}while(n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&s<r);t.match_length=oz-(r-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=Bj(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=Bj(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(vz(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Hj?(vz(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(vz(t,!1),0===t.strm.avail_out)?1:2})(i,e):Cz[i.level].func(i,e);if(3!==n&&4!==n||(i.status=uz),1===n||3===n)return 0===t.avail_out&&(i.last_flush=-1),Zj;if(2===n&&(e===Fj?Uj(i):e!==Gj&&(Wj(i,0,0,!1),e===Vj&&(fz(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),mz(t),0===t.avail_out))return i.last_flush=-1,Zj}return e!==Hj?Zj:i.wrap<=0?Yj:(2===i.wrap?(yz(i,255&t.adler),yz(i,t.adler>>8&255),yz(i,t.adler>>16&255),yz(i,t.adler>>24&255),yz(i,255&t.total_in),yz(i,t.total_in>>8&255),yz(i,t.total_in>>16&255),yz(i,t.total_in>>24&255)):(xz(i,t.adler>>>16),xz(i,65535&t.adler)),mz(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?Zj:Yj)},deflateEnd:t=>{if(Nz(t))return Qj;const e=t.state.status;return t.state=null,e===cz?hz(t,Jj):Zj},deflateSetDictionary:(t,e)=>{let i=e.length;if(Nz(t))return Qj;const n=t.state,s=n.wrap;if(2===s||1===s&&n.status!==lz||n.lookahead)return Qj;if(1===s&&(t.adler=Pj(t.adler,e,i,0)),n.wrap=0,i>=n.w_size){0===s&&(fz(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(i-n.w_size,i),0),e=t,i=n.w_size}const r=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=i,t.next_in=0,t.input=e,Mz(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=gz(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,Mz(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=o,t.input=a,t.avail_in=r,n.wrap=s,Zj},deflateInfo:"pako deflate (from Nodeca project)"};const Az=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Dz={assign:function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const e in i)Az(i,e)&&(t[e]=i[e])}}return t},flattenChunks:t=>{let e=0;for(let i=0,n=t.length;i<n;i++)e+=t[i].length;const i=new Uint8Array(e);for(let e=0,n=0,s=t.length;e<s;e++){let s=t[e];i.set(s,n),n+=s.length}return i}};let Ez=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Ez=!1}const Oz=new Uint8Array(256);for(let t=0;t<256;t++)Oz[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Oz[254]=Oz[254]=1;var Wz={string2buf:t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,i,n,s,r,o=t.length,a=0;for(s=0;s<o;s++)i=t.charCodeAt(s),55296==(64512&i)&&s+1<o&&(n=t.charCodeAt(s+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),s++)),a+=i<128?1:i<2048?2:i<65536?3:4;for(e=new Uint8Array(a),r=0,s=0;r<a;s++)i=t.charCodeAt(s),55296==(64512&i)&&s+1<o&&(n=t.charCodeAt(s+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),s++)),i<128?e[r++]=i:i<2048?(e[r++]=192|i>>>6,e[r++]=128|63&i):i<65536?(e[r++]=224|i>>>12,e[r++]=128|i>>>6&63,e[r++]=128|63&i):(e[r++]=240|i>>>18,e[r++]=128|i>>>12&63,e[r++]=128|i>>>6&63,e[r++]=128|63&i);return e},buf2string:(t,e)=>{const i=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let n,s;const r=new Array(2*i);for(s=0,n=0;n<i;){let e=t[n++];if(e<128){r[s++]=e;continue}let o=Oz[e];if(o>4)r[s++]=65533,n+=o-1;else{for(e&=2===o?31:3===o?15:7;o>1&&n<i;)e=e<<6|63&t[n++],o--;o>1?r[s++]=65533:e<65536?r[s++]=e:(e-=65536,r[s++]=55296|e>>10&1023,r[s++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Ez)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let i="";for(let n=0;n<e;n++)i+=String.fromCharCode(t[n]);return i})(r,s)},utf8border:(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let i=e-1;for(;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?e:i+Oz[t[i]]>e?i:e}},Rz=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Bz=Object.prototype.toString,{Z_NO_FLUSH:Uz,Z_SYNC_FLUSH:$z,Z_FULL_FLUSH:Fz,Z_FINISH:Vz,Z_OK:Hz,Z_STREAM_END:Gz,Z_DEFAULT_COMPRESSION:Zz,Z_DEFAULT_STRATEGY:Yz,Z_DEFLATED:Qz}=Ej;function Jz(t){this.options=Dz.assign({level:Zz,method:Qz,chunkSize:16384,windowBits:15,memLevel:8,strategy:Yz},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Rz,this.strm.avail_out=0;let i=Tz.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==Hz)throw new Error(Dj[i]);if(e.header&&Tz.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Wz.string2buf(e.dictionary):"[object ArrayBuffer]"===Bz.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,i=Tz.deflateSetDictionary(this.strm,t),i!==Hz)throw new Error(Dj[i]);this._dict_set=!0}}function qz(t,e){const i=new Jz(e);if(i.push(t,!0),i.err)throw i.msg||Dj[i.err];return i.result}Jz.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize;let s,r;if(this.ended)return!1;for(r=e===~~e?e:!0===e?Vz:Uz,"string"==typeof t?i.input=Wz.string2buf(t):"[object ArrayBuffer]"===Bz.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),(r===$z||r===Fz)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(s=Tz.deflate(i,r),s===Gz)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),s=Tz.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===Hz;if(0!==i.avail_out){if(r>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},Jz.prototype.onData=function(t){this.chunks.push(t)},Jz.prototype.onEnd=function(t){t===Hz&&(this.result=Dz.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Kz={Deflate:Jz,deflate:qz,deflateRaw:function(t,e){return(e=e||{}).raw=!0,qz(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,qz(t,e)},constants:Ej};const Xz=16209;var tP=function(t,e){let i,n,s,r,o,a,l,c,u,h,d,f,p,g,m,v,y,x,b,w,M,S,k,_;const I=t.state;i=t.next_in,k=t.input,n=i+(t.avail_in-5),s=t.next_out,_=t.output,r=s-(e-t.avail_out),o=s+(t.avail_out-257),a=I.dmax,l=I.wsize,c=I.whave,u=I.wnext,h=I.window,d=I.hold,f=I.bits,p=I.lencode,g=I.distcode,m=(1<<I.lenbits)-1,v=(1<<I.distbits)-1;t:do{f<15&&(d+=k[i++]<<f,f+=8,d+=k[i++]<<f,f+=8),y=p[d&m];e:for(;;){if(x=y>>>24,d>>>=x,f-=x,x=y>>>16&255,0===x)_[s++]=65535&y;else{if(!(16&x)){if(64&x){if(32&x){I.mode=16191;break t}t.msg="invalid literal/length code",I.mode=Xz;break t}y=p[(65535&y)+(d&(1<<x)-1)];continue e}for(b=65535&y,x&=15,x&&(f<x&&(d+=k[i++]<<f,f+=8),b+=d&(1<<x)-1,d>>>=x,f-=x),f<15&&(d+=k[i++]<<f,f+=8,d+=k[i++]<<f,f+=8),y=g[d&v];;){if(x=y>>>24,d>>>=x,f-=x,x=y>>>16&255,16&x){if(w=65535&y,x&=15,f<x&&(d+=k[i++]<<f,f+=8,f<x&&(d+=k[i++]<<f,f+=8)),w+=d&(1<<x)-1,w>a){t.msg="invalid distance too far back",I.mode=Xz;break t}if(d>>>=x,f-=x,x=s-r,w>x){if(x=w-x,x>c&&I.sane){t.msg="invalid distance too far back",I.mode=Xz;break t}if(M=0,S=h,0===u){if(M+=l-x,x<b){b-=x;do{_[s++]=h[M++]}while(--x);M=s-w,S=_}}else if(u<x){if(M+=l+u-x,x-=u,x<b){b-=x;do{_[s++]=h[M++]}while(--x);if(M=0,u<b){x=u,b-=x;do{_[s++]=h[M++]}while(--x);M=s-w,S=_}}}else if(M+=u-x,x<b){b-=x;do{_[s++]=h[M++]}while(--x);M=s-w,S=_}for(;b>2;)_[s++]=S[M++],_[s++]=S[M++],_[s++]=S[M++],b-=3;b&&(_[s++]=S[M++],b>1&&(_[s++]=S[M++]))}else{M=s-w;do{_[s++]=_[M++],_[s++]=_[M++],_[s++]=_[M++],b-=3}while(b>2);b&&(_[s++]=_[M++],b>1&&(_[s++]=_[M++]))}break}if(64&x){t.msg="invalid distance code",I.mode=Xz;break t}y=g[(65535&y)+(d&(1<<x)-1)]}}break}}while(i<n&&s<o);b=f>>3,i-=b,f-=b<<3,d&=(1<<f)-1,t.next_in=i,t.next_out=s,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=s<o?o-s+257:257-(s-o),I.hold=d,I.bits=f};const eP=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),iP=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),nP=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),sP=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var rP=(t,e,i,n,s,r,o,a)=>{const l=a.bits;let c,u,h,d,f,p,g=0,m=0,v=0,y=0,x=0,b=0,w=0,M=0,S=0,k=0,_=null;const I=new Uint16Array(16),C=new Uint16Array(16);let L,N,j,z=null;for(g=0;g<=15;g++)I[g]=0;for(m=0;m<n;m++)I[e[i+m]]++;for(x=l,y=15;y>=1&&0===I[y];y--);if(x>y&&(x=y),0===y)return s[r++]=20971520,s[r++]=20971520,a.bits=1,0;for(v=1;v<y&&0===I[v];v++);for(x<v&&(x=v),M=1,g=1;g<=15;g++)if(M<<=1,M-=I[g],M<0)return-1;if(M>0&&(0===t||1!==y))return-1;for(C[1]=0,g=1;g<15;g++)C[g+1]=C[g]+I[g];for(m=0;m<n;m++)0!==e[i+m]&&(o[C[e[i+m]]++]=m);if(0===t?(_=z=o,p=20):1===t?(_=eP,z=iP,p=257):(_=nP,z=sP,p=0),k=0,m=0,g=v,f=r,b=x,w=0,h=-1,S=1<<x,d=S-1,1===t&&S>852||2===t&&S>592)return 1;for(;;){L=g-w,o[m]+1<p?(N=0,j=o[m]):o[m]>=p?(N=z[o[m]-p],j=_[o[m]-p]):(N=96,j=0),c=1<<g-w,u=1<<b,v=u;do{u-=c,s[f+(k>>w)+u]=L<<24|N<<16|j}while(0!==u);for(c=1<<g-1;k&c;)c>>=1;if(0!==c?(k&=c-1,k+=c):k=0,m++,0==--I[g]){if(g===y)break;g=e[i+o[m]]}if(g>x&&(k&d)!==h){for(0===w&&(w=x),f+=v,b=g-w,M=1<<b;b+w<y&&(M-=I[b+w],!(M<=0));)b++,M<<=1;if(S+=1<<b,1===t&&S>852||2===t&&S>592)return 1;h=k&d,s[h]=x<<24|b<<16|f-r}}return 0!==k&&(s[f+k]=g-w<<24|64<<16),a.bits=x,0};const{Z_FINISH:oP,Z_BLOCK:aP,Z_TREES:lP,Z_OK:cP,Z_STREAM_END:uP,Z_NEED_DICT:hP,Z_STREAM_ERROR:dP,Z_DATA_ERROR:fP,Z_MEM_ERROR:pP,Z_BUF_ERROR:gP,Z_DEFLATED:mP}=Ej,vP=16180,yP=16190,xP=16191,bP=16192,wP=16194,MP=16199,SP=16200,kP=16206,_P=16209,IP=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function CP(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const LP=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<vP||e.mode>16211?1:0},NP=t=>{if(LP(t))return dP;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=vP,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,cP},jP=t=>{if(LP(t))return dP;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,NP(t)},zP=(t,e)=>{let i;if(LP(t))return dP;const n=t.state;return e<0?(i=0,e=-e):(i=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?dP:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,jP(t))},PP=(t,e)=>{if(!t)return dP;const i=new CP;t.state=i,i.strm=t,i.window=null,i.mode=vP;const n=zP(t,e);return n!==cP&&(t.state=null),n};let TP,AP,DP=!0;const EP=t=>{if(DP){TP=new Int32Array(512),AP=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(rP(1,t.lens,0,288,TP,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;rP(2,t.lens,0,32,AP,0,t.work,{bits:5}),DP=!1}t.lencode=TP,t.lenbits=9,t.distcode=AP,t.distbits=5},OP=(t,e,i,n)=>{let s;const r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(e.subarray(i-r.wsize,i),0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),r.window.set(e.subarray(i-n,i-n+s),r.wnext),(n-=s)?(r.window.set(e.subarray(i-n,i),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0};var WP={inflateReset:jP,inflateReset2:zP,inflateResetKeep:NP,inflateInit:t=>PP(t,15),inflateInit2:PP,inflate:(t,e)=>{let i,n,s,r,o,a,l,c,u,h,d,f,p,g,m,v,y,x,b,w,M,S,k=0;const _=new Uint8Array(4);let I,C;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(LP(t)||!t.output||!t.input&&0!==t.avail_in)return dP;i=t.state,i.mode===xP&&(i.mode=bP),o=t.next_out,s=t.output,l=t.avail_out,r=t.next_in,n=t.input,a=t.avail_in,c=i.hold,u=i.bits,h=a,d=l,S=cP;t:for(;;)switch(i.mode){case vP:if(0===i.wrap){i.mode=bP;break}for(;u<16;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(2&i.wrap&&35615===c){0===i.wbits&&(i.wbits=15),i.check=0,_[0]=255&c,_[1]=c>>>8&255,i.check=Aj(i.check,_,2,0),c=0,u=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",i.mode=_P;break}if((15&c)!==mP){t.msg="unknown compression method",i.mode=_P;break}if(c>>>=4,u-=4,M=8+(15&c),0===i.wbits&&(i.wbits=M),M>15||M>i.wbits){t.msg="invalid window size",i.mode=_P;break}i.dmax=1<<i.wbits,i.flags=0,t.adler=i.check=1,i.mode=512&c?16189:xP,c=0,u=0;break;case 16181:for(;u<16;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(i.flags=c,(255&i.flags)!==mP){t.msg="unknown compression method",i.mode=_P;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=_P;break}i.head&&(i.head.text=c>>8&1),512&i.flags&&4&i.wrap&&(_[0]=255&c,_[1]=c>>>8&255,i.check=Aj(i.check,_,2,0)),c=0,u=0,i.mode=16182;case 16182:for(;u<32;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}i.head&&(i.head.time=c),512&i.flags&&4&i.wrap&&(_[0]=255&c,_[1]=c>>>8&255,_[2]=c>>>16&255,_[3]=c>>>24&255,i.check=Aj(i.check,_,4,0)),c=0,u=0,i.mode=16183;case 16183:for(;u<16;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}i.head&&(i.head.xflags=255&c,i.head.os=c>>8),512&i.flags&&4&i.wrap&&(_[0]=255&c,_[1]=c>>>8&255,i.check=Aj(i.check,_,2,0)),c=0,u=0,i.mode=16184;case 16184:if(1024&i.flags){for(;u<16;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}i.length=c,i.head&&(i.head.extra_len=c),512&i.flags&&4&i.wrap&&(_[0]=255&c,_[1]=c>>>8&255,i.check=Aj(i.check,_,2,0)),c=0,u=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&i.flags&&(f=i.length,f>a&&(f=a),f&&(i.head&&(M=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(r,r+f),M)),512&i.flags&&4&i.wrap&&(i.check=Aj(i.check,n,f,r)),a-=f,r+=f,i.length-=f),i.length))break t;i.length=0,i.mode=16186;case 16186:if(2048&i.flags){if(0===a)break t;f=0;do{M=n[r+f++],i.head&&M&&i.length<65536&&(i.head.name+=String.fromCharCode(M))}while(M&&f<a);if(512&i.flags&&4&i.wrap&&(i.check=Aj(i.check,n,f,r)),a-=f,r+=f,M)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&i.flags){if(0===a)break t;f=0;do{M=n[r+f++],i.head&&M&&i.length<65536&&(i.head.comment+=String.fromCharCode(M))}while(M&&f<a);if(512&i.flags&&4&i.wrap&&(i.check=Aj(i.check,n,f,r)),a-=f,r+=f,M)break t}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&i.flags){for(;u<16;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(4&i.wrap&&c!==(65535&i.check)){t.msg="header crc mismatch",i.mode=_P;break}c=0,u=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=xP;break;case 16189:for(;u<32;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}t.adler=i.check=IP(c),c=0,u=0,i.mode=yP;case yP:if(0===i.havedict)return t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=a,i.hold=c,i.bits=u,hP;t.adler=i.check=1,i.mode=xP;case xP:if(e===aP||e===lP)break t;case bP:if(i.last){c>>>=7&u,u-=7&u,i.mode=kP;break}for(;u<3;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}switch(i.last=1&c,c>>>=1,u-=1,3&c){case 0:i.mode=16193;break;case 1:if(EP(i),i.mode=MP,e===lP){c>>>=2,u-=2;break t}break;case 2:i.mode=16196;break;case 3:t.msg="invalid block type",i.mode=_P}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",i.mode=_P;break}if(i.length=65535&c,c=0,u=0,i.mode=wP,e===lP)break t;case wP:i.mode=16195;case 16195:if(f=i.length,f){if(f>a&&(f=a),f>l&&(f=l),0===f)break t;s.set(n.subarray(r,r+f),o),a-=f,r+=f,l-=f,o+=f,i.length-=f;break}i.mode=xP;break;case 16196:for(;u<14;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(i.nlen=257+(31&c),c>>>=5,u-=5,i.ndist=1+(31&c),c>>>=5,u-=5,i.ncode=4+(15&c),c>>>=4,u-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=_P;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;u<3;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}i.lens[L[i.have++]]=7&c,c>>>=3,u-=3}for(;i.have<19;)i.lens[L[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,I={bits:i.lenbits},S=rP(0,i.lens,0,19,i.lencode,0,i.work,I),i.lenbits=I.bits,S){t.msg="invalid code lengths set",i.mode=_P;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;k=i.lencode[c&(1<<i.lenbits)-1],m=k>>>24,v=k>>>16&255,y=65535&k,!(m<=u);){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(y<16)c>>>=m,u-=m,i.lens[i.have++]=y;else{if(16===y){for(C=m+2;u<C;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(c>>>=m,u-=m,0===i.have){t.msg="invalid bit length repeat",i.mode=_P;break}M=i.lens[i.have-1],f=3+(3&c),c>>>=2,u-=2}else if(17===y){for(C=m+3;u<C;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}c>>>=m,u-=m,M=0,f=3+(7&c),c>>>=3,u-=3}else{for(C=m+7;u<C;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}c>>>=m,u-=m,M=0,f=11+(127&c),c>>>=7,u-=7}if(i.have+f>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=_P;break}for(;f--;)i.lens[i.have++]=M}}if(i.mode===_P)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=_P;break}if(i.lenbits=9,I={bits:i.lenbits},S=rP(1,i.lens,0,i.nlen,i.lencode,0,i.work,I),i.lenbits=I.bits,S){t.msg="invalid literal/lengths set",i.mode=_P;break}if(i.distbits=6,i.distcode=i.distdyn,I={bits:i.distbits},S=rP(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,I),i.distbits=I.bits,S){t.msg="invalid distances set",i.mode=_P;break}if(i.mode=MP,e===lP)break t;case MP:i.mode=SP;case SP:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=a,i.hold=c,i.bits=u,tP(t,d),o=t.next_out,s=t.output,l=t.avail_out,r=t.next_in,n=t.input,a=t.avail_in,c=i.hold,u=i.bits,i.mode===xP&&(i.back=-1);break}for(i.back=0;k=i.lencode[c&(1<<i.lenbits)-1],m=k>>>24,v=k>>>16&255,y=65535&k,!(m<=u);){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(v&&!(240&v)){for(x=m,b=v,w=y;k=i.lencode[w+((c&(1<<x+b)-1)>>x)],m=k>>>24,v=k>>>16&255,y=65535&k,!(x+m<=u);){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}c>>>=x,u-=x,i.back+=x}if(c>>>=m,u-=m,i.back+=m,i.length=y,0===v){i.mode=16205;break}if(32&v){i.back=-1,i.mode=xP;break}if(64&v){t.msg="invalid literal/length code",i.mode=_P;break}i.extra=15&v,i.mode=16201;case 16201:if(i.extra){for(C=i.extra;u<C;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}i.length+=c&(1<<i.extra)-1,c>>>=i.extra,u-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;k=i.distcode[c&(1<<i.distbits)-1],m=k>>>24,v=k>>>16&255,y=65535&k,!(m<=u);){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(!(240&v)){for(x=m,b=v,w=y;k=i.distcode[w+((c&(1<<x+b)-1)>>x)],m=k>>>24,v=k>>>16&255,y=65535&k,!(x+m<=u);){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}c>>>=x,u-=x,i.back+=x}if(c>>>=m,u-=m,i.back+=m,64&v){t.msg="invalid distance code",i.mode=_P;break}i.offset=y,i.extra=15&v,i.mode=16203;case 16203:if(i.extra){for(C=i.extra;u<C;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}i.offset+=c&(1<<i.extra)-1,c>>>=i.extra,u-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=_P;break}i.mode=16204;case 16204:if(0===l)break t;if(f=d-l,i.offset>f){if(f=i.offset-f,f>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=_P;break}f>i.wnext?(f-=i.wnext,p=i.wsize-f):p=i.wnext-f,f>i.length&&(f=i.length),g=i.window}else g=s,p=o-i.offset,f=i.length;f>l&&(f=l),l-=f,i.length-=f;do{s[o++]=g[p++]}while(--f);0===i.length&&(i.mode=SP);break;case 16205:if(0===l)break t;s[o++]=i.length,l--,i.mode=SP;break;case kP:if(i.wrap){for(;u<32;){if(0===a)break t;a--,c|=n[r++]<<u,u+=8}if(d-=l,t.total_out+=d,i.total+=d,4&i.wrap&&d&&(t.adler=i.check=i.flags?Aj(i.check,s,d,o-d):Pj(i.check,s,d,o-d)),d=l,4&i.wrap&&(i.flags?c:IP(c))!==i.check){t.msg="incorrect data check",i.mode=_P;break}c=0,u=0}i.mode=16207;case 16207:if(i.wrap&&i.flags){for(;u<32;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(4&i.wrap&&c!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=_P;break}c=0,u=0}i.mode=16208;case 16208:S=uP;break t;case _P:S=fP;break t;case 16210:return pP;default:return dP}return t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=a,i.hold=c,i.bits=u,(i.wsize||d!==t.avail_out&&i.mode<_P&&(i.mode<kP||e!==oP))&&OP(t,t.output,t.next_out,d-t.avail_out),h-=t.avail_in,d-=t.avail_out,t.total_in+=h,t.total_out+=d,i.total+=d,4&i.wrap&&d&&(t.adler=i.check=i.flags?Aj(i.check,s,d,t.next_out-d):Pj(i.check,s,d,t.next_out-d)),t.data_type=i.bits+(i.last?64:0)+(i.mode===xP?128:0)+(i.mode===MP||i.mode===wP?256:0),(0===h&&0===d||e===oP)&&S===cP&&(S=gP),S},inflateEnd:t=>{if(LP(t))return dP;let e=t.state;return e.window&&(e.window=null),t.state=null,cP},inflateGetHeader:(t,e)=>{if(LP(t))return dP;const i=t.state;return 2&i.wrap?(i.head=e,e.done=!1,cP):dP},inflateSetDictionary:(t,e)=>{const i=e.length;let n,s,r;return LP(t)?dP:(n=t.state,0!==n.wrap&&n.mode!==yP?dP:n.mode===yP&&(s=1,s=Pj(s,e,i,0),s!==n.check)?fP:(r=OP(t,e,i,i),r?(n.mode=16210,pP):(n.havedict=1,cP)))},inflateInfo:"pako inflate (from Nodeca project)"},RP=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const BP=Object.prototype.toString,{Z_NO_FLUSH:UP,Z_FINISH:$P,Z_OK:FP,Z_STREAM_END:VP,Z_NEED_DICT:HP,Z_STREAM_ERROR:GP,Z_DATA_ERROR:ZP,Z_MEM_ERROR:YP}=Ej;function QP(t){this.options=Dz.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Rz,this.strm.avail_out=0;let i=WP.inflateInit2(this.strm,e.windowBits);if(i!==FP)throw new Error(Dj[i]);if(this.header=new RP,WP.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Wz.string2buf(e.dictionary):"[object ArrayBuffer]"===BP.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=WP.inflateSetDictionary(this.strm,e.dictionary),i!==FP)))throw new Error(Dj[i])}function JP(t,e){const i=new QP(e);if(i.push(t),i.err)throw i.msg||Dj[i.err];return i.result}QP.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let r,o,a;if(this.ended)return!1;for(o=e===~~e?e:!0===e?$P:UP,"[object ArrayBuffer]"===BP.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),r=WP.inflate(i,o),r===HP&&s&&(r=WP.inflateSetDictionary(i,s),r===FP?r=WP.inflate(i,o):r===ZP&&(r=HP));i.avail_in>0&&r===VP&&i.state.wrap>0&&0!==t[i.next_in];)WP.inflateReset(i),r=WP.inflate(i,o);switch(r){case GP:case ZP:case HP:case YP:return this.onEnd(r),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||r===VP))if("string"===this.options.to){let t=Wz.utf8border(i.output,i.next_out),e=i.next_out-t,s=Wz.buf2string(i.output,t);i.next_out=e,i.avail_out=n-e,e&&i.output.set(i.output.subarray(t,t+e),0),this.onData(s)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==FP||0!==a){if(r===VP)return r=WP.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},QP.prototype.onData=function(t){this.chunks.push(t)},QP.prototype.onEnd=function(t){t===FP&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Dz.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var qP={Inflate:QP,inflate:JP,inflateRaw:function(t,e){return(e=e||{}).raw=!0,JP(t,e)},ungzip:JP,constants:Ej};const{Deflate:KP,deflate:XP,deflateRaw:tT,gzip:eT}=Kz,{Inflate:iT,inflate:nT,inflateRaw:sT,ungzip:rT}=qP;var oT,aT={Deflate:KP,deflate:XP,deflateRaw:tT,gzip:eT,Inflate:iT,inflate:nT,inflateRaw:sT,ungzip:rT,constants:Ej};function lT(){}function cT(){}lT.Parse=function(t,e){t=new Uint8Array(t);for(var i=0;37!=t[i]||33!=t[i+1];)i++;for(var n=lT.B.readASCII(t,i,t.length-i).split(/[\n\r]+/),s=null,r=null,o=0;o<n.length;o++){var a=n[o].trim();if("%"==a.charAt(0)){for(;"%"==a.charAt(0);)a=a.slice(1);var l=a.split(":");"BoundingBox"==l[0]&&(s=l[1].trim().split(/[ ]+/).map(parseFloat)),-1!=a.indexOf("!PS-Adobe-3.0 EPSF-3.0")&&(r=a)}}null!=r&&null!=s||(s=[0,0,595,842]);for(var c=[],u=lT._getDictStack([],{}),h=[{typ:"file",val:{buff:t,off:i}}],d=[],f=lT._getEnv(s),p=Date.now(),g=!0;g;)g=lT.step(c,u,h,d,f,e);f.pgOpen&&e.ShowPage(),e.Done(),console.log(Date.now()-p)},lT._getDictStack=function(t,e){for(var i=["def","begin","end","currentfile","currentdict","known","version","currentpacking","setpacking","currentoverprint","setoverprint","currentglobal","setglobal","currentsystemparams","setsystemparams","currentuserparams","setuserparams","currentpagedevice","setpagedevice","currentflat","currentlinewidth","currentpoint","currentscreen","setscreen","currenthalftone","currentblackgeneration","currentundercolorremoval","currentcolortransfer","internaldict","dict","string","readstring","readhexstring","readline","getinterval","putinterval","token","array","aload","astore","length","maxlength","matrix","mark","counttomark","cleartomark","dictstack","countdictstack","makefont","scalefont","stringwidth","setfont","setgray","currentgray","setrgbcolor","currentrgbcolor","sethsbcolor","setlinewidth","setstrokeadjust","setflat","setlinecap","setlinejoin","setmiterlimit","setdash","clip","eoclip","clippath","pathbbox","newpath","stroke","fill","eofill","closepath","flattenpath","showpage","print","moveto","lineto","curveto","arc","arcn","show","ashow","xshow","yshow","xyshow","widthshow","awidthshow","charpath","cshow","rmoveto","rlineto","rcurveto","translate","rotate","scale","concat","concatmatrix","invertmatrix","currentmatrix","defaultmatrix","setmatrix","save","restore","gsave","grestore","grestoreall","usertime","readtime","save","restore","flush","flushfile","readonly","executeonly","findresource","defineresource","undefineresource","image","imagemask","colorimage","xcheck","status","cachestatus","setcachelimit","type","if","ifelse","exec","stopped","dup","exch","copy","roll","index","pop","put","get","load","where","store","repeat","for","forall","loop","exit","bind","cvi","cvr","cvs","cvx","cvn","cvlit","add","sub","mul","div","idiv","bitshift","mod","exp","atan","neg","abs","floor","round","truncate","sqrt","ln","sin","cos","srand","rand","==","transform","itransform","dtransform","idtransform","eq","ge","gt","le","lt","ne","and","or","not","filter","begincmap","endcmap","begincodespacerange","endcodespacerange","beginbfrange","endbfrange","beginbfchar","endbfchar"].concat(t),n=["image","colorimage","repeat","for","forall","loop"],s=0;s<n.length;s++)i.push(n[s]+"---");var r=lT.makeProcs({findfont:"/Font findresource",definefont:"/Font defineresource",undefinefont:"/Font undefineresource"});for(var o in e)r[o]=e[o];var a={},l={},c={};for(a.systemdict={typ:"dict",val:a},a.globaldict={typ:"dict",val:l},a.userdict={typ:"dict",val:c},a.statusdict={typ:"dict",val:{}},a.$error={typ:"dict",val:{}},a.errordict={typ:"dict",val:lT.makeProcs({handleerror:""})},a.null={typ:"null",val:null},s=0;s<i.length;s++)a[i[s]]={typ:"operator",val:i[s]};for(var o in r)a[o]=r[o];return[a,l,c]},lT._getEnv=function(t){return{bb:t,gst:KN.getState(t),packing:!1,overprint:!1,global:!1,systemparams:{MaxPatternCache:5e3},userparams:{},pagedevice:{},cmnum:0,fnt:null,res:{},pgOpen:!1,funs:lT.makeProcs({blackgeneration:"",undercolorremoval:"pop 0"})}},lT.makeProcs=function(t){var e={};for(var i in t){var n=t[i].replace(/  +/g," ").split(" ");e[i]={typ:"procedure",val:[]};for(var s=0;s<n.length;s++)e[i].val.push({typ:"name",val:n[s]})}return e},lT.addProc=function(t,e){0!=t.val.length&&(null!=t.off&&t.off!=t.val.length?e.push({typ:"procedure",val:t.val,off:0}):(t.off=0,e.push(t)))},lT._f32=new Float32Array(1),lT.step=function(t,e,i,n,s,r,o){var a=Date.now(),l=lT._f32,c=lT.getToken,u=s.gst;if(null==(A=c(i,e)))return!1;var h=A.typ,d=A.val;if(-1!=["integer","real","dict","boolean","string","array","procedure","null"].indexOf(h))return t.push(A),!0;if("name"!=h&&"operator"!=h)throw"e";if("/"==d.charAt(0)){if("/"==d.charAt(1))throw"e";t.push(A)}else if("{"==d){for(var f=[],p={typ:"procedure",val:[]},g=c(i,e);;){if("{"==g.val){var m={typ:"procedure",val:[]};p.val.push(m),f.push(p),p=m}else if("}"==g.val){if(0==f.length)break;p=f.pop()}else p.val.push(g);g=c(i,e)}t.push(p)}else if("["==d||"<<"==d)t.push({typ:"mark"});else if("]"==d||">>"==d){for(var v=[];0!=t.length&&"mark"!=(Ht=t.pop()).typ;)v.push(Ht);if(v.reverse(),"]"==d)t.push({typ:"array",val:v});else{for(var y={},x=0;x<v.length;x+=2)y[v[x].val.slice(1)]=v[x+1];t.push({typ:"dict",val:y})}}else{if(null==(re=lT.getFromStacks(d,e)))throw console.log("unknown operator",d,t,e),"e";if("procedure"==re.typ)lT.addProc(re,i);else if(-1!=["array","string","dict","null","integer","real","boolean","state","font","name"].indexOf(re.typ))t.push(re);else if("operator"==re.typ){var b=re.val;if("def"==b){var w=t.pop(),M=t.pop();M=M.val.slice(1),e[e.length-1][M]=w}else if("internaldict"==b){var S=t.pop().val;t.push({typ:"dict",val:{}})}else if("dict"==b)S=t.pop().val,t.push({typ:"dict",val:{},maxl:S});else if("string"==b)S=t.pop().val,t.push({typ:"string",val:new Array(S)});else if("readstring"==b||"readhexstring"==b){S=(_=t.pop()).val.length;var k=t.pop().val;if("readstring"==b){for(x=0;x<S;x++)_.val[x]=k.buff[k.off+x];k.off+=S}else for(w=lT.readHex(k,S),x=0;x<w.length;x++)_.val[x]=w[x];t.push(_,{typ:"boolean",val:!0})}else if("readline"==b){var _=t.pop();for(k=t.pop().val,x=0,lT.isEOL(k.buff[k.off])&&k.off++;;){var I=k.buff[k.off];if(k.off++,lT.isEOL(I))break;_.val[x]=I,x++}x<_.val.length&&null!=_.val[x]&&(_.val[x]=null),t.push(_,{typ:"boolean",val:!0})}else if("getinterval"==b){var C=t.pop().val,L=t.pop().val,N=[];if("string"!=(j=t.pop()).typ)throw"e";for(x=0;x<C;x++)N.push(j.val[L+x]);t.push({typ:j.typ,val:N})}else if("putinterval"==b){var j=t.pop(),z=(L=t.pop().val,t.pop());if(L+j.val.length>=z.val.length);else{if("string"!=j.typ)throw"e";for(x=0;x<j.val.length;x++)z.val[L+x]=j.val[x]}}else if("token"==b){if("string"!=(j=t.pop()).typ)throw"e";for(v=[],x=0;x<j.val.length;x++){var P=j.val[x];if(null==P)break;v.push(P)}var T={buff:new Uint8Array(v),off:0},A=c([{typ:"file",val:T}],e),D=[];for(x=T.off;x<v.length;x++)D.push(v[x]);t.push({typ:"string",val:D},A,{typ:"boolean",val:!0})}else if("array"==b)S=t.pop().val,t.push({typ:"array",val:new Array(S)});else if("aload"==b){for(v=(Ht=t.pop()).val,x=0;x<v.length;x++)t.push(v[x]);t.push(Ht)}else if("astore"==b){for(v=(Ht=t.pop()).val,x=0;x<v.length;x++)v[v.length-1-x]=t.pop();t.push(Ht)}else if("length"==b){if(S=0,"array"==(h=(Ht=t.pop()).typ))S=Ht.val.length;else if("procedure"==h)S=Ht.val.length;else if("dict"==h)S=Object.keys(Ht.val).length;else{if("string"!=h)throw console.log(Ht),"e";S=Ht.val.length}t.push({typ:"integer",val:S})}else if("maxlength"==b){var E=t.pop();t.push({typ:"integer",val:E.maxl})}else if("matrix"==b)t.push({typ:"array",val:lT.makeArr([1,0,0,1,0,0],"real")});else if("mark"==b)t.push({typ:"mark"});else if("counttomark"==b||"cleartomark"==b){for(var O=0;O<t.length&&"mark"!=t[t.length-1-O].typ;)O++;if("cleartomark"==b)for(x=0;x<O+1;x++)t.pop();else t.push({typ:"integer",val:O})}else if("dictstack"==b){for(v=t.pop(),x=0;x<e.length;x++)v.val[x]={typ:"dict",val:e[x]};t.push(v)}else if("countdictstack"==b){var W=0;for(x=0;x<t.length;x++)"dict"==t[x].typ&&W++;t.push({typ:"integer",val:W})}else if("begin"==b){if(null==(B=(Ht=t.pop()).val)||"dict"!=Ht.typ)throw console.log(Ht,e),"e";e.push(B)}else if("end"==b)e.pop();else if("currentfile"==b){var R;for(x=i.length-1;x>=0;x--)"file"==i[x].typ&&(R=i[x]);t.push(R)}else if("currentdict"==b){var B=e[e.length-1];t.push({typ:"dict",val:B})}else if("known"==b){var U=t.pop().val.slice(1);B=t.pop().val,t.push({typ:"boolean",val:null!=B[U]})}else if("version"==b)t.push({typ:"string",val:[51]});else if(-1!=["currentpacking","currentoverprint","currentglobal","currentsystemparams","currentuserparams","currentpagedevice"].indexOf(b))w=s[b.slice(7)],t.push({typ:"boolean"==typeof w?"boolean":"dict",val:w});else if(-1!=["setpacking","setoverprint","setglobal","setsystemparams","setuserparams","setpagedevice"].indexOf(b))s[b.slice(3)]=t.pop().val;else if("currentflat"==b)t.push({typ:"real",val:1});else if("currentlinewidth"==b)t.push({typ:"real",val:u.lwidth});else if("currentpoint"==b){var $=u.ctm.slice(0);KN.M.invert($);var F=KN.M.multPoint($,u.cpos);t.push({typ:"real",val:F[0]},{typ:"real",val:F[1]})}else if("currentscreen"==b)t.push({typ:"int",val:60},{typ:"real",val:0},{typ:"real",val:0});else if("setscreen"==b)t.pop(),t.pop(),t.pop();else if("currenthalftone"==b)t.push({typ:"dict",val:{}});else if("currentblackgeneration"==b||"currentundercolorremoval"==b)t.push(s.funs[b.slice(7)]);else if("currentcolortransfer"==b)for(x=0;x<4;x++)t.push(s.funs.blackgeneration);else if("findresource"==b){var V,H=t.pop().val.slice(1);if(U=t.pop().val.slice(1),"Font"==H)(V={typ:"font",val:KN.getFont()}).val.Tf=U;else if("ProcSet"==H)V={typ:"dict",val:{}};else{if("Category"!=H)throw"Unknown resource category: "+H+","+U;V={typ:"dict",val:{}}}t.push(V)}else if("defineresource"==b){H=t.pop().val.slice(1);var G=t.pop().val;U=t.pop().val.slice(1),null==s.res[H]&&(s.res[H]={}),s.res[H][U]=G,t.push(G)}else if("undefineresource"==b)H=t.pop().val.slice(1),U=t.pop().val.slice(1),null!=s.res[H]&&delete s.res[H];else if("image"==b||"colorimage"==b){var Z=1,Y=!1;"colorimage"==b&&(Z=t.pop().val,Y=t.pop().val),Y?(st=t.pop(),nt=t.pop(),it=t.pop()):it=t.pop();var Q=lT.readArr(t.pop().val),J=t.pop().val,q=t.pop().val,K=t.pop().val;if(3!=Z)throw"unsupported number of channels "+Z;if(8!=J)throw"unsupported bits per channel: "+J;var X=new Uint8Array(K*q*4);for(x=0;x<X.length;x++)X[x]=255;i.push({typ:"name",val:b+"---",ctx:[K,q,J,Q,Z,Y,X,0,it,nt,st]}),lT.addProc(it,i),Y&&(lT.addProc(nt,i),lT.addProc(st,i))}else if("image---"==b||"colorimage---"==b){var tt=A.ctx,et=(K=tt[0],q=tt[1],J=tt[2],Q=tt[3],Z=tt[4],Y=tt[5],X=tt[6],tt[7]),it=tt[8],nt=tt[9],st=tt[10],rt=0;if(Y)for(x=0;x<3;x++){rt=(at=t.pop().val).length;for(var ot=0;ot<rt;ot++)X[4*(et+ot)+2-x]=at[ot]}else{var at=t.pop().val;if(rt=Math.floor(at.length/3),null==at[0])throw console.log(e),"e";for(ot=0;ot<rt;ot++){var lt=3*ot,ct=4*(et+ot);X[ct+0]=at[lt+0],X[ct+1]=at[lt+1],X[ct+2]=at[lt+2]}}et+=rt,lT.checkPageStarted(s,r),et==K*q?r.PutImage(u,X,K,q):(tt[7]=et,i.push(A),lT.addProc(it,i),Y&&(lT.addProc(nt,i),lT.addProc(st,i)))}else if("makefont"==b){var ut=lT.readArr(t.pop().val),ht=JSON.parse(JSON.stringify(t.pop()));KN.M.concat(ht.val.Tm,ut),t.push(ht)}else if("scalefont"==b){var dt=t.pop().val;(ht=t.pop()).val.Tfs*=dt,t.push(ht)}else if("stringwidth"==b)_=t.pop().val,dt=KN.M.getScale(u.font.Tm)/KN.M.getScale(u.ctm),t.push({typ:"real",val:.6*dt*_.length},{typ:"real",val:dt});else if("setfont"==b)u.font=t.pop().val;else if("setlinewidth"==b)u.lwidth=t.pop().val;else if("setstrokeadjust"==b)u.SA=t.pop().val;else if("setlinecap"==b)u.lcap=t.pop().val;else if("setlinejoin"==b)u.ljoin=t.pop().val;else if("setmiterlimit"==b)u.mlimit=t.pop().val;else if("setflat"==b)u.dd.flat=t.pop();else if("setdash"==b)u.doff=t.pop().val,u.dash=lT.readArr(t.pop().val);else if("show"==b||"ashow"==b||"xshow"==b||"yshow"==b||"xyshow"==b||"widthshow"==b||"awidthshow"==b||"charpath"==b){"charpath"!=b&&"xshow"!=b&&"xyshow"!=b&&"yshow"!=b||t.pop();var ft=t.pop().val;_=lT.readStr(ft),"awidthshow"==b&&(t.pop(),t.pop(),t.pop(),t.pop()),"widthshow"==b&&(t.pop(),t.pop(),t.pop()),"ashow"==b&&(t.pop(),t.pop());var pt=u.ctm;u.ctm=pt.slice(0),u.ctm[4]=u.cpos[0],u.ctm[5]=u.cpos[1],lT.checkPageStarted(s,r),r.PutText(u,_,.55*_.length),u.cpos[0]+=_.length*KN.M.getScale(pt)*u.font.Tfs*.55,u.ctm=pt}else if("cshow"==b)t.pop(),t.pop();else if("setgray"==b){var gt=lT.nrm(t.pop().val);u.colr=u.COLR=[gt,gt,gt]}else if("currentgray"==b)t.push({typ:"real",val:(u.colr[0]+u.colr[1]+u.colr[2])/3});else if("setrgbcolor"==b){var mt=t.pop().val,vt=(gt=t.pop().val,t.pop().val);u.colr=u.COLR=[lT.nrm(vt),lT.nrm(gt),lT.nrm(mt)]}else if("currentrgbcolor"==b)for(x=0;x<3;x++)t.push({typ:"real",val:u.colr[x]});else if("sethsbcolor"==b){var yt,xt,bt,wt=t.pop().val,Mt=t.pop().val;switch(F=wt*(1-Mt),xt=wt*(1-(yt=6*(q=t.pop().val)-(x=Math.floor(6*q)))*Mt),bt=wt*(1-(1-yt)*Mt),x%6){case 0:vt=wt,gt=bt,mt=F;break;case 1:vt=xt,gt=wt,mt=F;break;case 2:vt=F,gt=wt,mt=bt;break;case 3:vt=F,gt=xt,mt=wt;break;case 4:vt=bt,gt=F,mt=wt;break;case 5:vt=wt,gt=F,mt=xt}u.colr=u.COLR=[lT.nrm(vt),lT.nrm(gt),lT.nrm(mt)]}else if("clip"==b||"eoclip"==b){var St=KN.G.getBB(u.pth.crds),kt=KN.G.getBB(u.cpth.crds);if(KN.G.isBox(u.pth,St)&&KN.G.insideBox(kt,St));else if(KN.G.isBox(u.cpth,kt)&&KN.G.insideBox(St,kt))u.cpth=JSON.parse(JSON.stringify(u.pth));else{var _t=KN.G.toPoly(u.pth),It=KN.G.toPoly(u.cpth);_t&&It?0!=(F=KN.G.polyClip(_t,It)).length?u.cpth=KN.G.fromPoly(F):console.log("strange intersection of polygons"):u.cpth=JSON.parse(JSON.stringify(u.pth))}}else if("clippath"==b)u.pth=JSON.parse(JSON.stringify(u.cpth));else if("pathbbox"==b){var Ct=u.pth.crds,Lt=KN.G.getBB(Ct);Ct=[Lt[0],Lt[1],Lt[2],Lt[1],Lt[0],Lt[3],Lt[2],Lt[3]],$=u.ctm.slice(0),KN.M.invert($),KN.M.multArray($,Ct),Lt=KN.G.getBB(Ct),l[0]=Lt[0],Lt[0]=l[0],l[0]=Lt[1],Lt[1]=l[0],l[0]=Lt[2],Lt[2]=l[0],l[0]=Lt[3],Lt[3]=l[0],Lt=lT.makeArr(Lt,"real"),t.push(Lt[0],Lt[1],Lt[2],Lt[3])}else if("newpath"==b)KN.G.newPath(u);else if("stroke"==b)lT.checkPageStarted(s,r),r.Stroke(u),KN.G.newPath(u);else if("fill"==b||"eofill"==b)lT.checkPageStarted(s,r),r.Fill(u,"eofill"==b),KN.G.newPath(u);else if("closepath"==b)KN.G.closePath(u);else if("flattenpath"==b);else if("showpage"==b){lT.checkPageStarted(s,r),r.ShowPage();var Nt=u.font;(u=s.gst=KN.getState(s.bb)).font=Nt,s.pgOpen=!1}else if("print"==b)ft=t.pop().val,_=lT.readStr(ft),r.Print(_);else if("moveto"==b||"lineto"==b){var jt=t.pop().val,zt=t.pop().val;"moveto"==b?KN.G.moveTo(u,zt,jt):KN.G.lineTo(u,zt,jt)}else if("rmoveto"==b||"rlineto"==b)jt=t.pop().val,zt=t.pop().val,$=u.ctm.slice(0),KN.M.invert($),jt+=(F=KN.M.multPoint($,u.cpos))[1],zt+=F[0],"rmoveto"==b?KN.G.moveTo(u,zt,jt):KN.G.lineTo(u,zt,jt);else if("curveto"==b){var Pt=t.pop().val,Tt=t.pop().val,At=t.pop().val,Dt=t.pop().val,Et=t.pop().val,Ot=t.pop().val;KN.G.curveTo(u,Ot,Et,Dt,At,Tt,Pt)}else if("arc"==b||"arcn"==b){var Wt=t.pop().val,Rt=t.pop().val;vt=t.pop().val,jt=t.pop().val,zt=t.pop().val,KN.G.arc(u,zt,jt,vt,Rt*Math.PI/180,Wt*Math.PI/180,"arcn"==b)}else if(-1!=["translate","scale","rotate","concat"].indexOf(b))"array"==(wt=t.pop()).typ?(Ut=lT.readArr(wt.val),jt=t.pop().val):(Ut=[1,0,0,1,0,0],jt=wt.val),"translate"!=b&&"scale"!=b||(zt=t.pop().val),"translate"==b&&KN.M.translate(Ut,zt,jt),"scale"==b&&KN.M.scale(Ut,zt,jt),"rotate"==b&&KN.M.rotate(Ut,-jt*Math.PI/180),"concat"==b&&KN.M.concat(Ut,jt),"array"==wt.typ?t.push({typ:"array",val:lT.makeArr(Ut,"real")}):(KN.M.concat(Ut,u.ctm),u.ctm=Ut);else if("concatmatrix"==b){($t=lT.readArr)(t.pop().val);var Bt=$t(t.pop().val),Ut=$t(t.pop().val).slice(0);KN.M.concat(Ut,Bt),Ut=lT.makeArr(Ut,"real"),t.push({typ:"array",val:Ut})}else if("invertmatrix"==b){var $t;Bt=($t=lT.readArr)(t.pop().val),Ut=$t(t.pop().val).slice(0),KN.M.invert(Ut),Ut=lT.makeArr(Ut,"real"),t.push({typ:"array",val:Ut})}else if("currentmatrix"==b||"defaultmatrix"==b){Ut=t.pop();var Ft=lT.makeArr("currentmatrix"==b?u.ctm:[1,0,0,1,0,0],"real");for(x=0;x<6;x++)Ut.val[x]=Ft[x];t.push(Ut)}else if("setmatrix"==b)u.ctm=lT.readArr(t.pop().val);else if("cvi"==b){if(wt=(Ht=t.pop()).val,N=0,"real"==Ht.typ)N=Math.round(wt);else{if("integer"!=Ht.typ)throw"unknown type "+Ht.typ;N=wt}t.push({typ:"integer",val:N})}else if("cvr"==b){if(wt=(Ht=t.pop()).val,N=0,"real"==Ht.typ)N=wt;else if("integer"==Ht.typ)N=wt;else{if("string"!=Ht.typ)throw"unknown type "+Ht.typ;N=parseFloat(lT.readStr(wt))}t.push({typ:"real",val:N})}else if("cvs"==b){_=t.pop();var Vt=t.pop();if(w="",_.val=[],t.push(_),"real"!=Vt.typ&&"integer"!=Vt.typ)throw"unknown var type: "+Vt.typ;for(w=Math.abs(Math.round(Vt.val)-Vt.val)<1e-6?Math.round(Vt.val)+".0":(Math.round(1e6*Vt.val)/1e6).toString(),x=0;x<w.length;x++)_.val[x]=w.charCodeAt(x)}else if("cvx"==b){var Ht=t.pop();t.push(Ht)}else if("cvn"==b)t.push({typ:"name",val:lT.readStr(t.pop().val)});else if("cvlit"==b);else if(-1!=["add","sub","mul","div","idiv","bitshift","mod","exp","atan"].indexOf(b)){var Gt=t.pop(),Zt=(Jt=t.pop()).val,Yt=Gt.val,Qt=(N=0,"");"add"==b||"sub"==b||"mul"==b?Qt="real"==Jt.typ||"real"==Gt.typ?"real":"integer":"div"==b||"atan"==b||"exp"==b?Qt="real":"mod"!=b&&"idiv"!=b&&"bitshift"!=b||(Qt="integer"),"real"==Jt.typ&&(l[0]=Zt,Zt=l[0]),"real"==Gt.typ&&(l[0]=Yt,Yt=l[0]),"add"==b&&(N=Zt+Yt),"sub"==b&&(N=Zt-Yt),"mul"==b&&(N=Zt*Yt),"div"==b&&(N=Zt/Yt),"idiv"==b&&(N=~~(Zt/Yt)),"bitshift"==b&&(N=Yt>0?Zt<<Yt:Zt>>>-Yt),"mod"==b&&(N=Zt%Yt),"exp"==b&&(N=Math.pow(Zt,Yt)),"atan"==b&&(N=180*Math.atan2(Zt,Yt)/Math.PI),"real"==Qt&&(l[0]=N,N=l[0]),t.push({typ:Qt,val:N})}else if(-1!=["neg","abs","floor","round","truncate","sqrt","ln","sin","cos"].indexOf(b)){if(Zt=(Jt=t.pop()).val,N=0,Qt="","neg"==b||"abs"==b||"truncate"==b?Qt=Jt.typ:"round"==b||"floor"==b?Qt="integer":"sqrt"!=b&&"sin"!=b&&"cos"!=b&&"ln"!=b||(Qt="real"),"real"==Jt.typ&&(l[0]=Zt,Zt=l[0]),"neg"==b&&(N=-Zt),"abs"==b&&(N=Math.abs(Zt)),"floor"==b&&(N=Math.floor(Zt)),"round"==b&&(N=Math.round(Zt)),"truncate"==b&&(N=Math.trunc(Zt)),"sqrt"==b&&(N=Math.sqrt(Zt)),"ln"==b&&(N=Math.log(Zt)),"sin"==b&&(N=Math.sin(Zt*Math.PI/180)),"cos"==b&&(N=Math.cos(Zt*Math.PI/180)),"ln"==b&&Zt<=0)throw"e";"real"==Qt&&(l[0]=N,N=l[0]),t.push({typ:Qt,val:N})}else if(-1!=["eq","ge","gt","le","lt","ne"].indexOf(b)){var Jt;Gt=t.pop(),Zt=(Jt=t.pop()).val,Yt=Gt.val,N=!1,"eq"==b&&(N=Zt==Yt),"ge"==b&&(N=Zt>=Yt),"gt"==b&&(N=Zt>Yt),"le"==b&&(N=Zt<=Yt),"lt"==b&&(N=Zt<Yt),"ne"==b&&(N=Zt!=Yt),t.push({typ:"boolean",val:N})}else if(-1!=["and","or"].indexOf(b)){var qt=t.pop(),Kt=t.pop(),Xt=(Yt=Kt.val,qt.val),te="integer"==Kt.typ;"and"==b&&(N=te?Yt&Xt:Yt&&Xt),"or"==b&&(N=te?Yt|Xt:Yt||Xt),t.push({typ:te?"integer":"boolean",val:N})}else if("not"==b)wt=(mt=t.pop()).val,N=(te="integer"==mt.typ)?~wt:!wt,t.push({typ:te?"integer":"boolean",val:N});else if("if"==b){var ee=t.pop();(se=t.pop().val)&&lT.addProc(ee,i)}else if("ifelse"==b){var ie=t.pop(),ne=t.pop(),se=t.pop().val;lT.addProc(se?ne:ie,i)}else if("exec"==b||"stopped"==b){var re=t.pop();if("stopped"==b&&lT.addProc({typ:"procedure",val:[{typ:"boolean",val:!1}]},i),"procedure"==re.typ)lT.addProc(re,i);else{if("name"!=re.typ&&"operator"!=re.typ&&"real"!=re.typ&&"array"!=re.typ)throw console.log(re),"unknown executable type: "+re.typ;lT.addProc({typ:"procedure",val:[re]},i)}}else if("dup"==b)wt=t.pop(),t.push(wt,wt);else if("exch"==b)t.push(t.pop(),t.pop());else if("copy"==b)if("integer"==(W=t.pop()).typ){var oe=[];for(x=0;x<W.val;x++)oe[W.val-1-x]=t.pop();for(x=0;x<W.val;x++)t.push(oe[x]);for(x=0;x<W.val;x++)t.push(oe[x])}else if("array"==W.typ){for(Ut=t.pop().val,x=0;x<Ut.length;x++)if(W.val[x]=Ut[x],null==Ut[x].val)throw console.log(e),"e";t.push(W)}else{if("dict"!=W.typ)throw"e";for(var ae in Ut=t.pop().val)W.val[ae]=Ut[ae];t.push(W)}else if("roll"==b){for(ot=t.pop().val,W=t.pop().val,oe=[],x=0;x<W;x++)oe.push(t.pop());for(oe.reverse(),ot=(W+ot)%W,x=0;x<ot;x++)oe.unshift(oe.pop());for(x=0;x<W;x++)t.push(oe[x])}else if("index"==b)W=t.pop().val,t.push(t[t.length-1-W]);else if("transform"==b||"itransform"==b||"dtransform"==b||"idtransform"==b){jt=0,zt=0,"array"==(Ut=t.pop()).typ?(Ut=lT.readArr(Ut.val),jt=t.pop().val):(jt=Ut.val,Ut=u.ctm.slice(0)),"itransform"!=b&&"idtransform"!=b||KN.M.invert(Ut),zt=t.pop().val;var le=KN.M.multPoint(Ut,[zt,jt]);"dtransform"!=b&&"idtransform"!=b||(le[0]-=Ut[4],le[1]-=Ut[5]),t.push({typ:"real",val:le[0]},{typ:"real",val:le[1]})}else if("pop"==b||"srand"==b||"=="==b)t.pop();else if("rand"==b)t.push({typ:"integer",val:Math.floor(2147483647*Math.random())});else if("put"==b)if(d=t.pop(),Ht=t.pop(),"array"==(Qt=(re=t.pop()).typ))re.val[Ht.val]=d;else if("dict"==Qt)re.val[Ht.val.slice(1)]=d;else{if("string"!=Qt)throw Qt+" e";re.val[Ht.val]=d.val}else if("get"==b)if(Ht=t.pop(),"string"==(Qt=(re=t.pop()).typ))t.push({typ:"integer",val:re.val[Ht.val]});else if("array"==Qt)t.push(re.val[Ht.val]);else{if("dict"!=Qt)throw"getting from unknown type "+re.typ;wt=re.val[Ht.val.slice(1)],t.push(wt)}else if("load"==b){if(U=t.pop().val.slice(1),null==(d=lT.getFromStacks(U,e)))throw console.log(U,e),"e";t.push(d)}else if("where"==b)U=t.pop().val.slice(1),null!=(B=lT.where(U,e))&&t.push({typ:"dict",val:B}),t.push({typ:"boolean",val:null!=B});else if("store"==b)d=t.pop(),U=t.pop().val.slice(1),null==(B=lT.where(U,e))&&(B=e[e.length-1]),B[U]=d;else if("repeat"==b){ee=t.pop();var ce=t.pop().val;i.push({typ:"name",val:b+"---",ctx:{proc:ee,cur:0,cnt:ce}})}else if("repeat---"==b)(pe=A.ctx).cur<pe.cnt&&(i.push(A),lT.addProc(pe.proc,i),pe.cur++);else if("for"==b){ee=t.pop();var ue=t.pop(),he=t.pop(),de=t.pop();i.push({typ:"name",val:b+"---",ctx:{proc:ee,isInt:"integer"==de.typ&&"integer"==he.typ,init:de.val,inc:he.val,limit:ue.val}})}else if("for---"==b)if((pe=A.ctx).isInt)(pe.inc>0&&pe.init<=pe.limit||pe.inc<0&&pe.init>=pe.limit)&&(i.push(A),lT.addProc(pe.proc,i),t.push({typ:"integer",val:pe.init}),pe.init+=pe.inc);else{var fe=new Float32Array(1);fe[0]=pe.limit,pe.limit=fe[0],fe[0]=pe.inc,pe.inc=fe[0],fe[0]=pe.init,(pe.inc>0&&fe[0]<=pe.limit||pe.inc<0&&fe[0]>=pe.limit)&&(i.push(A),lT.addProc(pe.proc,i),t.push({typ:"real",val:fe[0]}),fe[0]+=pe.inc,pe.init=fe[0])}else if("loop"==b)ee=t.pop(),i.push({typ:"name",val:b+"---",ctx:{proc:ee}});else if("loop---"==b){var pe=A.ctx;lT.addProc(pe.proc,i)}else if("forall"==b)ee=t.pop(),re=t.pop(),i.push({typ:"name",val:b+"---",ctx:[ee,re,0]});else if("forall---"==b)if(ee=(pe=A.ctx)[0],re=pe[1],x=pe[2],"dict"==re.typ){var ge=Object.keys(re.val);x<ge.length&&(i.push(A),lT.addProc(ee,i),t.push({typ:"name",val:"/"+ge[x]}),t.push(re.val[ge[x]]),pe[2]++)}else{if("procedure"!=re.typ&&"array"!=re.typ)throw console.log(ee,re),"forall: unknown type: "+re.typ;x<re.val.length&&(i.push(A),lT.addProc(ee,i),t.push(re.val[x]),pe[2]++)}else if("exit"==b){for(x=i.length-1;0!=x&&("name"!=i[x].typ||!i[x].val.endsWith("---"));)x--;if(0!=x)for(;i.length>x;)i.pop()}else if("bind"==b);else if("xcheck"==b)h=(re=t.pop()).typ,t.push({typ:"boolean",val:"procedure"==h});else if("status"==b)_=t.pop(),t.push({typ:"boolean",val:!1});else if("cachestatus"==b)for(x=0;x<7;x++)t.push({typ:"integer",val:5e3});else if("setcachelimit"==b)t.pop();else if("type"==b){var me={name:"nametype",dict:"dicttype",boolean:"booleantype",procedure:"operatortype",string:"stringtype",null:"nulltype",integer:"integertype",array:"arraytype",operator:"operatortype",real:"realtype"};if(null==me[(Ht=t.pop()).typ])throw console.log(Ht),Ht.typ;t.push({typ:"name",val:"/"+me[Ht.typ]})}else if("save"==b)t.push({typ:"state",val:JSON.parse(JSON.stringify(u))});else if("restore"==b)u=s.gst=t.pop().val;else if("gsave"==b)n.push(JSON.parse(JSON.stringify(u)));else if("grestore"==b)u=s.gst=n.pop();else if("grestoreall"==b)for(;0!=n.length;)u=s.gst=n.pop();else if("usertime"==b||"realtime"==b)t.push({typ:"integer",val:"usertime"==b?Date.now()-a:Date.now()});else if("flush"==b||"readonly"==b||"executeonly"==b);else if("flushfile"==b)t.pop();else if("filter"==b){var ve,ye=t.pop().val.slice(1);if("ASCII85Decode"==ye){var xe=t.pop().val;ve=lT.F.ASCII85Decode(xe)}else if("RunLengthDecode"==ye)xe=t.pop().val,ve=lT.F.RunLengthDecode(xe);else{if("SubFileDecode"!=ye)throw console.log(t),ye;xe=t.pop().val,ve=new Uint8Array(xe)}t.push({typ:"file",val:{buff:ve,off:0,stk:[],env:{pckn:!1}}})}else if("begincmap"==b||"endcmap"==b);else if("begincodespacerange"==b||"beginbfrange"==b||"beginbfchar"==b)s.cmnum=t.pop().val;else if("endcodespacerange"==b||"endbfrange"==b||"endbfchar"==b){var be="endbfrange"==b?3:2,we=b.slice(3);for(J=0,null==(B=e[e.length-1])[we]&&(B[we]=[]),x=0;x<s.cmnum;x++){var Me=[];for(ot=be-1;ot>=0;ot--){var Se=t.pop(),ke=Se.val;if("string"==Se.typ)w=lT.strToInt(ke),0==ot&&(J=ke.length);else{w=[];for(var _e=0;_e<ke.length;_e++)w.push(lT.strToInt(ke[_e].val))}Me[ot]=w}B[we]=B[we].concat(Me)}"endcodespacerange"!=b&&(B.bpc=J)}else{if(!o)throw console.log(d,b),console.log(e,t),"e";o(b,t,e,i,n,s,r)}}}return!0},lT.strToInt=function(t){for(var e=0,i=0;i<t.length;i++)e=e<<8|t[i];return e},lT.checkPageStarted=function(t,e){t.pgOpen||(e.StartPage(t.bb[0],t.bb[1],t.bb[2],t.bb[3]),t.pgOpen=!0)},lT.F={HexDecode:function(t){function e(t){if(48<=t&&t<=57)return t-48;if(65<=t&&t<=70)return 10+t-65;if(97<=t&&t<=102)return 10+t-97;throw"e"}for(var i=[],n=t.off;62!=t.buff[n];){for(;lT.isWhite(t.buff[n]);)n++;var s=e(t.buff[n]);if(n++,62==t.buff[n]){i.push(s<<4);break}for(;lT.isWhite(t.buff[n]);)n++;var r=e(t.buff[n]);n++,i.push((s<<4)+r)}return new Uint8Array(i)},ASCII85Decode:function(t){for(var e=[52200625,614125,7225,85,1],i=[],n=0,s=0,r=t.off;;){if(r>=t.buff.length)throw"e";var o=t.buff[r];if(r++,!lT.isWhite(o)){if(126==o){if(0!=n){3==n&&i.push(s>>>24&255),4==n&&i.push(s>>>24&255,s>>>16&255);var a=5-n<<3,l=s>>>a&255;0!=(s&=(1<<a)-1)&&l++,i.push(l)}return t.off=r+1,new Uint8Array(i)}if(122!=o){if(o<33||o-33>84)throw"e";s+=(o-33)*e[n],5==++n&&(i.push(s>>>24&255),i.push(s>>>16&255),i.push(s>>>8&255),i.push(s>>>0&255),n=0,s=0)}else i.push(0,0,0,0)}}},RunLengthDecode:function(t){for(var e=[],i=t.off;;){if(i>=t.buff.length)throw console.log(e),"e";var n=t.buff[i];if(i++,128==n)return t.off=i,new Uint8Array(e);if(n<128){for(var s=0;s<n+1;s++)e.push(t.buff[i+s]);i+=n+1}else{for(s=0;s<257-n;s++)e.push(t.buff[i]);i++}}},FlateDecode:function(t){var e=t.buff,i=new Uint8Array(e.buffer,t.off,e.length);return aT.inflate(i)}},lT.B={readUshort:function(t,e){return t[e]<<8|t[e+1]},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},readASCII:function(t,e,i){for(var n="",s=0;s<i;s++)n+=String.fromCharCode(t[e+s]);return n}},lT.nrm=function(t){return Math.max(0,Math.min(1,t))},lT.makeArr=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push({typ:e,val:t[n]});return i},lT.readArr=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].val);return e},lT.readStr=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},lT.getFromStacks=function(t,e){for(var i=e.length-1;i>=0;){if(null!=e[i][t])return e[i][t];i--}return null},lT.where=function(t,e){for(var i=e.length-1;i>=0;){if(null!=e[i][t])return e[i];i--}return null},lT.skipWhite=function(t){for(var e=t.off,i=t.buff,n=lT.isWhite;n(i[e])||37==i[e];){for(;n(i[e]);)e++;if(37==i[e]){for(;e<i.length&&!lT.isEOL(i[e]);)e++;e++}}t.off=e},lT.getToken=function(t,e){if(0==t.length)return null;var i=t[t.length-1];if("procedure"==i.typ){var n=i.val[i.off];return i.off++,i.off==i.val.length&&t.pop(),n}if("name"==i.typ)return t.pop(),i;var s=lT.getFToken(i.val,e);return null==s&&(t.pop(),0!=t.length&&(s=lT.getFToken(t[t.length-1].val,e))),s},lT.getFToken=function(t,e){lT.skipWhite(t);var i=lT.isWhite,n=lT.isSpecl,s=t.off,r=t.buff,o=null;if(s>=r.length)return null;var a=r[s],l=String.fromCharCode(a);if(s++,"("==l){for(var c=0,u=s;41!=r[u]||0!=c;)40==r[u]&&c++,41==r[u]&&c--,92==r[u]&&u++,u++;for(var h=[],d=0;d<u-s;d++)h.push(r[s+d]);s=u+1,o={typ:"string",val:h=lT.getString(h)}}else if("{"==l||"}"==l||"["==l||"]"==l)o={typ:"name",val:l};else if("<"==l&&60==r[s]||">"==l&&62==r[s])o={typ:"name",val:"<"==l?"<<":">>"},s++;else if("<"==l){for(u=s;62!=r[u];)u++;o={typ:"string",val:h=lT.readHex({buff:r,off:s},u-s>>>1)},s=u+1}else{for(u=s;u<r.length&&!i(r[u])&&(!n(r[u])||47==r[u]&&47==r[u-1]&&u==s);)u++;var f=lT.B.readASCII(r,s-1,u-s+1);s=u;var p=parseFloat(f);if("true"==f||"false"==f)o={typ:"boolean",val:"true"==f};else if(isNaN(p))if("//"==f.slice(0,2)){var g=f.slice(2),m=lT.getFromStacks(g,e);if(null==m)throw"e";o=m}else o={typ:"name",val:f};else{var v=new Float32Array(1);v[0]=p,p=v[0],o={typ:-1==f.indexOf(".")?"integer":"real",val:p}}}return t.off=s,o},lT.isSpecl=function(t){return-1!=[40,41,60,62,91,93,123,125,37,47].indexOf(t)},lT.isWhite=function(t){return 9==t||10==t||12==t||13==t||32==t},lT.isEOL=function(t){return 10==t||13==t},lT.getString=function(t){for(var e=[],i=["n","r","t","b","f","\\","(",")"," ","/"],n=["\n","\r","\t","\b","\f","\\","(",")"," ","/"],s=0;s<t.length;s++){var r=t[s];if("\\"==String.fromCharCode(r)){var o=String.fromCharCode(t[s+1]);if(s++,"\r"==o||"\n"==o)continue;var a=i.indexOf(o);if(-1!=a)e.push(n[a].charCodeAt(0));else{var l=o+String.fromCharCode(t[s+1])+String.fromCharCode(t[s+2]);s+=2,e.push(parseInt(l,8))}}else e.push(r)}return e},lT.makeString=function(t){for(var e=["n","r","t","b","f","\\","(",")"],i=["\n","\r","\t","\b","\f","\\","(",")"],n=[],s=0;s<t.length;s++){var r=t[s],o=i.indexOf(String.fromCharCode(r));-1==o?n.push(r):n.push(92,e[o].charCodeAt(0))}return n},lT.readHex=function(t,e){for(var i=0,n=-1,s=[];;){var r=t.buff[t.off];t.off++;var o=0;if(47<r&&r<58)o=r-48;else if(96<r&&r<103)o=10+r-97;else{if(!(64<r&&r<71))continue;o=10+r-65}if(-1==n)n=o;else if(s[i]=n<<4|o,n=-1,++i==e)break}return s},cT.Parse=function(t,e){t=new Uint8Array(t);for(var i=0;32==t[i];)i++;0!=i&&(t=new Uint8Array(t.buffer,i,t.length-i));for(var n=t.length-3;"%%E"!=lT.B.readASCII(t,n,3);)n--;var s=n;for(n--;lT.isEOL(t[n]);)n--;for(;!lT.isEOL(t[n]);)n--;var r=parseInt(lT.B.readASCII(t,n+1,s-n-1));if(isNaN(r))throw"no xref";var o=[],a=cT.readXrefTrail(t,r,o),l={buff:t,off:0},c=a["/Root"];"ref"==c.typ&&(a["/Root"]=cT.getIndirect(c.ind,c.gen,l,o));var u=a["/Root"]["/Pages"];"ref"==u.typ&&(a["/Root"]["/Pages"]=cT.getIndirect(u.ind,u.gen,l,o));for(var h=[a["/Root"]["/Pages"]];0!=h.length;){var d=h.pop();if("/Pages"==d["/Type"])for(var f=d["/Kids"],p=0;p<f.length;p++)"ref"==f[p].typ&&(f[p]=cT.getIndirect(f[p].ind,f[p].gen,l,o)),h.push(f[p])}cT.render(a["/Root"],e,a),e.Done()},cT.render=function(t,e,i){var n=["CS","cs","SCN","scn","SC","sc","sh","Do","gs","ID","EI","re","cm","y","v","B","B*","BT","ET","Tj","TJ","Tf","Tm","Td","T*","Tc","Tw","Tz","TL","Tr","Ts","MP","DP","BMC","BDC","EMC","BX","EX","ri"],s={J:"setlinecap",j:"setlinejoin",w:"setlinewidth",d:"setdash",M:"setmiterlimit",i:"setflat",q:"gsave",Q:"grestore",m:"moveto",l:"lineto",c:"curveto",h:"closepath",W:"clip","W*":"eoclip",f:"fill",F:"fill","f*":"eofill",S:"stroke",b:"h B","b*":"h B*",n:"newpath",RG:"/DeviceRGB  CS SCN",rg:"/DeviceRGB  cs scn",G:"/DeviceGray CS SCN",g:"/DeviceGray cs scn",K:"/DeviceCMYK CS SCN",k:"/DeviceCMYK cs scn",TD:"dup neg TL Td",'"':"exch Tc exch Tw '","'":"T* Tj",s:"h S",BI:"/BI"};s=lT.makeProcs(s);for(var r=[t["/Pages"]],o=0;0!=r.length;){var a=r.pop();if("/Pages"!=a["/Type"]){o++;var l=a["/Contents"];null==l.length&&(l=[l]);var c=a["/MediaBox"];null==c&&(c=t["/Pages"]["/MediaBox"]);var u=lT._getEnv(c);u.pgOpen=!0;var h=[],d=[],f=lT._getDictStack(n,s),p=[];if(e.StartPage(c[0],c[1],c[2],c[3]),i["/Encrypt"])0==r.length&&alert("Encrypted PDF is not supported yet.");else for(var g=0;g<l.length;g++){for(var m=cT.GS(l[g]),v=m.length-1;0==m[v];)v--;m=new Uint8Array(m.buffer,0,v+1),p.push({typ:"file",val:{buff:m,off:0,extra:a}});for(var y=!0;y;)y=lT.step(d,f,p,h,u,e,cT.operator)}if(e.ShowPage(),o>=e.maxPages)break}else for(var x=a["/Kids"],b=x.length-1;b>=0;b--)r.push(x[b])}},cT.operator=function(t,e,i,n,s,r,o){for(var a=r.gst,l=n.length-1;"file"!=n[l].typ;)l--;var c=n[l].val,u=c.extra["/Resources"];if("Do"==t){var h=e.pop().val,d=u["/XObject"][h],f=d["/Subtype"],p=cT.GS(d);if("/Form"==f)n.push({typ:"file",val:{buff:p,off:0,extra:d}});else if("/Image"==f){var g=null;d["/SMask"]&&(g=cT.getImage(d["/SMask"],a));var m=d["/Width"],v=d["/Height"],y=d["/ColorSpace"],x=cT.getImage(d,a);if(1==d["/ImageMask"]){g=x,x=new Uint8Array(m*v*4);for(var b=255*a.colr[0],w=255*a.colr[1],M=255*a.colr[2],S=0;S<m*v*4;S+=4)x[S]=b,x[S+1]=w,x[S+2]=M,x[S+3]=255}o.PutImage(a,x,m,v,g)}}else if("gs"==t){var k=e.pop().val,_=u["/ExtGState"][k];for(var I in _){var C=_[I];"/Type"!=I&&("/CA"==I?a.CA=C:"/ca"==I?a.ca=C:"/BM"==I?a.bmode=C:"/LC"==I?a.lcap=C:"/LJ"==I?a.ljoin=C:"/LW"==I?a.lwidth=C:"/ML"==I?a.mlimit=C:"/SA"==I?a.SA=C:"/OPM"==I?a.OPM=C:"/AIS"==I?a.AIS=C:"/OP"==I?a.OP=C:"/op"==I?a.op=C:"/SMask"==I?a.SMask="":"/SM"==I&&(a.SM=C))}}else if("ID"==t){for(var L={};"/BI"!=(C=e.pop().val);)L[e.pop().val]=C;c.off++,m=L["/W"],v=L["/H"],x=new Uint8Array(m*v*4),y=L["/CS"];for(var N=L["/BPC"],j=c.off;!lT.isWhite(c.buff[j])||69!=c.buff[j+1]||73!=c.buff[j+2];)j++;p=c.buff.slice(c.off,j),c.off+=p.length,"/Fl"==L["/F"]&&(p=lT.F.FlateDecode({buff:p,off:0}),delete L["/F"]),"/G"==y&&null==L["/F"]?cT.plteImage(p,0,x,null,m,v,N):null!=y[0].typ?cT.plteImage(p,0,x,y[3].val,m,v,N):x=p,o.PutImage(a,x,m,v)}else if("n"==t||"BT"==t||"EI"==t);else if("ET"==t)a.font.Tm=[1,0,0,1,0,0],a.font.Tlm=a.font.Tm.slice(0);else if("re"==t){v=e.pop().val,m=e.pop().val;var z=e.pop().val,P=e.pop().val;KN.G.moveTo(a,P,z),KN.G.lineTo(a,P+m,z),KN.G.lineTo(a,P+m,z+v),KN.G.lineTo(a,P,z+v),KN.G.closePath(a)}else if("y"==t||"v"==t){var T=a.ctm.slice(0);KN.M.invert(T),I=KN.M.multPoint(T,a.cpos);var A=e.pop().val,D=e.pop().val,E=e.pop().val,O=e.pop().val;"y"==t?KN.G.curveTo(a,O,E,D,A,D,A):KN.G.curveTo(a,I[0],I[1],O,E,D,A)}else if("B"==t||"B*"==t)o.FillAndStroke(a,"B*"==t),KN.G.newPath(a);else if("cm"==t||"Tm"==t){var W=[];for(S=0;S<6;S++)W.push(e.pop().val);W.reverse(),"cm"==t?(KN.M.concat(W,a.ctm),a.ctm=W):(a.font.Tm=W,a.font.Tlm=W.slice(0))}else if("Td"==t||"T*"==t){P=0,z=0,"T*"==t?(P=0,z=-a.font.Tl):(z=e.pop().val,P=e.pop().val);var R=[1,0,0,1,P,z];KN.M.concat(R,a.font.Tlm),a.font.Tm=R,a.font.Tlm=R.slice(0)}else if("Tf"==t){var B=e.pop().val,U=e.pop().val;a.font.Tf=U,a.font.Tfs=B}else if("Tj"==t||"TJ"==t){var $=e.pop();$="string"==$.typ?[$]:$.val,u["/Font"][U];var F=a.font.Tf,V=(U=u["/Font"][F],KN.M.getScale(a.font.Tm)*a.font.Tfs/1e3);for(S=0;S<$.length;S++)if("string"==$[S].typ){var H=cT.getString($[S].val,U);if($[S+1]&&"string"!=$[S+1].typ){var G=$[S+1].val;H[1]+=-G,-900<G&&G<-100&&(H[0]+=" ")}a.font.Tf=H[2],o.PutText(a,H[0],H[1]/1e3),a.font.Tf=F,a.font.Tm[4]+=V*H[1]}else 0==S&&(a.font.Tm[4]+=-V*$[S].val)}else if("Tc"==t)a.font.Tc=e.pop().val;else if("Tw"==t)a.font.Tw=e.pop().val;else if("Tz"==t)a.font.Th=e.pop().val;else if("TL"==t)a.font.Tl=e.pop().val;else if("Tr"==t)a.font.Tmode=e.pop().val;else if("Ts"==t)a.font.Trise=e.pop().val;else if("CS"==t||"cs"==t)y=e.pop().val,"CS"==t?a.sspace=y:a.space=y;else if("SCN"==t||"scn"==t||"SC"==t||"sc"==t){var Z="SCN"==t||"SC"==t,Y=Z?a.sspace:a.space,Q=null,J=u?u["/ColorSpace"]:null;if("/Lab"==(y=null!=J&&null!=J[Y]?J[Y][1]&&J[Y][1]["/Alternate"]?J[Y][1]["/Alternate"]:"string"==typeof J[Y]?J[Y]:J[Y][0]:Y)||"/DeviceRGB"==y||"/DeviceN"==y||"/ICCBased"==y&&3==J[Y][1]["/N"])(Q=[e.pop().val,e.pop().val,e.pop().val]).reverse();else if("/DeviceCMYK"==y||"/ICCBased"==y&&4==J[Y][1]["/N"]){var q=[e.pop().val,e.pop().val,e.pop().val,e.pop().val];q.reverse(),Q=KN.C.cmykToRgb(q)}else if("/DeviceGray"==y||"/CalGray"==y){var K=lT.nrm(e.pop().val);Q=[K,K,K]}else{if("/Separation"!=y){if("/Pattern"==y){var X=u["/Pattern"][e.pop().val];if(1==X["/PatternType"])return;return void cT.setShadingFill(X["/Shading"],X["/Matrix"],Z,a)}throw console.log(Y,y,e,J,u),"e"}var tt=cT.Func(J[Y][3],[e.pop().val]);Q=J&&J[Y]&&"/DeviceCMYK"==J[Y][2]?KN.C.cmykToRgb(tt):KN.C.labToRgb(tt)}Z?a.COLR=Q:a.colr=Q}else if("sh"==t){var et=u["/Shading"][e.pop().val],it=a.colr,nt=a.pth;a.pth=a.cpth,a.cpth=KN.G.rectToPath(r.bb),cT.setShadingFill(et,a.ctm.slice(0),!1,a),o.Fill(a),a.colr=it,a.pth=nt}else if("MP"==t||"BMC"==t||"ri"==t)e.pop();else if("DP"==t||"BDC"==t)e.pop(),e.pop();else if("EMC"!=t&&"BX"!=t&&"EX"!=t)throw t},cT.setShadingFill=function(t,e,i,n){var s=t["/ShadingType"],r=t["/ColorSpace"],o="";if(2==s)o="lin";else{if(3!=s)return void console.log("Unknown shading type",s);o="rad"}var a={typ:o,mat:e,grad:cT.getGrad(t["/Function"],r),crds:t["/Coords"]};i?n.COLR=a:n.colr=a},cT.getGrad=function(t,e){var i=cT._normColor,n=t["/Functions"],s=t["/FunctionType"],r=t["/Bounds"],o=t["/Encode"];if(0==s||2==s)return[[0,i(t,[0],e)],[1,i(t,[1],e)]];var a=o[0],l=[];(0==r.length||r[0]>0)&&l.push([0,i(n[0],[a],e)]);for(var c=0;c<r.length;c++)l.push([r[c],i(n[c],[a],e)]);return(0==r.length||r[r.length-1]<1)&&l.push([1,i(n[n.length-1],[1-a],e)]),l},cT._clrSamp=function(t,e){return[t[e]/255,t[e+1]/255,t[e+2]/255]},cT._normColor=function(t,e,i){var n=cT.Func(t,e);if(i[3]&&i[3]["/Length"]){if(n=cT.Func(i[3],n),"/DeviceCMYK"!=i[2]&&4!=n.length)throw console.log(n,i),"unknown color profile";n=KN.C.cmykToRgb(n)}else(i[1]&&4==i[1]["/N"]||"/DeviceCMYK"==i)&&(n=KN.C.cmykToRgb(n));return n},cT.getImage=function(t){var e=t["/Width"],i=t["/Height"],n=e*i,s=cT.GS(t),r=t["/Filter"],o=t["/ColorSpace"],a=t["/BitsPerComponent"],l=t["/Matte"],c=t.image;if(null==c){var u=t["/Mask"];if(o&&"/Indexed"==o[0]){if(null!=o[3].length){var h=o[3];p=new Uint8Array(768);for(var d=0;d<h.length;d++)p[d]=h.charCodeAt(d)}else p=cT.GS(o[3]);if("/DeviceCMYK"==o[1]||o[1]&&o[1][1]&&4==o[1][1]["/N"]){var f=p,p=new Uint8Array(768);for(d=0;d<256;d++){var g=(x=d<<2)-d,m=KN.C.cmykToRgb([f[x]/255,f[x+1]/255,f[x+2]/255,f[x+3]/255]);p[g]=255*m[0],p[g+1]=255*m[1],p[g+2]=255*m[2]}}var v=new Uint8Array(4*n);cT.plteImage(s,0,v,p,e,i,a,u),c=v}else if(null==r&&o&&"/DeviceGray"==o)p=[0,0,0,255,255,255],v=new Uint8Array(4*n),t["/Decode"]&&1==t["/Decode"][0]&&p.reverse(),1==t["/ImageMask"]&&p.reverse(),cT.plteImage(s,0,v,1==a?p:null,e,i,a,u),c=v;else if(null==r&&o&&"/ICCBased"==o[0]&&o[1]&&4==o[1]["/N"]){v=new Uint8Array(4*n);var y=[0,0,0,0];for(d=0;d<n;d++){var x=4*d;y[0]=s[x]*(1/255),y[1]=s[x+1]*(1/255),y[2]=s[x+2]*(1/255),y[3]=s[x+3]*(1/255),m=KN.C.cmykToRgb(y),v[x]=~~(255*m[0]+.5),v[x+1]=~~(255*m[1]+.5),v[x+2]=~~(255*m[2]+.5),v[x+3]=255}c=v}else if(e*i*3<=s.length){for(var b=Math.ceil(3*e*a/8),w=(v=new Uint8Array(4*n),0);w<i;w++)for(var M=b*w,S=0;S<e;S++){var k=3*S;v[x=4*(w*e+S)]=cT.getBitNum(s,M,k,a),v[x+1]=cT.getBitNum(s,M,k+1,a),v[x+2]=cT.getBitNum(s,M,k+2,a),v[x+3]=255}c=v}else c=s;if(l&&"000"!=l.join("")){var _=Math.round(255*l[0]),I=Math.round(255*l[1]),C=Math.round(255*l[2]);for(d=0;d<c.length;d+=4)c[d]=Math.max(c[d],_),c[d+1]=Math.max(c[d+1],I),c[d+2]=Math.max(c[d+2],C)}t.image=c}return c},cT.plteImage=function(t,e,i,n,s,r,o,a){for(var l=Math.round(255/((1<<o)-1)),c=Math.ceil(s*o/8),u=0;u<r;u++)for(var h=e+c*u,d=0;d<s;d++){var f=cT.getBitNum(t,h,d,o),p=u*s+d<<2;if(n){var g=3*f;i[p]=n[g],i[p+1]=n[g+1],i[p+2]=n[g+2]}else{var m=f*l;i[p]=m,i[p+1]=m,i[p+2]=m}i[p+3]=255,a&&a[0]<=f&&f<=a[1]&&(i[p+3]=0)}},cT.getBitNum=function(t,e,i,n){var s=0;return 8==n?s=t[e+i]:4==n?s=t[e+(i>>1)]>>(1-(1&i)<<2)&15:2==n?s=t[e+(i>>2)]>>(3-(3&i)<<1)&3:1==n&&(s=t[e+(i>>3)]>>7-(7&i)&1),s},cT.Func=function(t,e){for(var i=t["/Domain"],n=t["/Range"],s=t["/FunctionType"],r=[],o=0;o<e.length;o++)e[o]=Math.max(i[2*o],Math.min(i[2*o+1],e[o]));if(0==s){var a=t["/Encode"],l=t["/Size"],c=t["/Decode"],u=n.length/2;for(null==a&&(a=[0,l[0]-1]),null==c&&(c=n),o=0;o<e.length;o++){var h=cT.intp(e[o],i[2*o],i[2*o+1],a[2*o],a[2*o+1]);e[o]=Math.max(0,Math.min(l[o]-1,h))}for(var d=0;d<u;d++){var f=Math.round(e[0]),p=cT.GS(t)[u*f+d];p=cT.intp(p,0,255,c[2*d],c[2*d+1]),r.push(p)}}else if(2==s){var g=t["/C0"],m=t["/C1"],v=t["/N"];for(f=e[0],o=0;o<g.length;o++)r[o]=g[o]+Math.pow(f,v)*(m[o]-g[o])}else if(4==s){var y=lT._getEnv([0,0,0,0]);y.pgOpen=!0;var x=[],b=[],w=lT._getDictStack([],{}),M=[];M.push({typ:"file",val:{buff:cT.GS(t),off:0}});for(var S=!0;S;)S=lT.step(b,w,M,x,y,{},cT.operator);var k=b.pop();for(k.off=0,M.push(k),o=0;o<e.length;o++)b.push({typ:"real",val:e[o]});for(S=!0;S;)S=lT.step(b,w,M,x,y,{},cT.operator);for(o=0;o<b.length;o++)r.push(b[o].val)}if(n)for(o=0;o<r.length;o++)r[o]=Math.max(n[2*o],Math.min(n[2*o+1],r[o]));return r},cT.intp=function(t,e,i,n,s){return n+(t-e)*(s-n)/(i-e)},cT.getString=function(t,e){var i=e["/Subtype"],n="",s=0,r=null,o=e["/ToUnicode"],a=e["/Encoding"],l=e;if("/Type0"==i&&(l=e["/DescendantFonts"][0]),null!=o)n=cT.toUnicode(t,o);else if("/WinAnsiEncoding"==a)n=cT.encFromMap(t,cT._win1252);else if("/MacRomanEncoding"==a)n=cT.encFromMap(t,cT._macRoman);else if("/Type0"==i){var c=0;"/Identity-H"==a&&(c=31);for(var u=0;u<t.length;u+=2){var h=t[u]<<8|t[u+1];n+=String.fromCharCode(h+c)}}else if(null!=a&&"/Encoding"==a["/Type"]){var d=a["/Differences"],f=a["/BaseEncoding"],p=null;if("/WinAnsiEncoding"==f&&(p=cT._win1252),"/MacRomanEncoding"==f&&(p=cT._macRoman),d){n="";for(var g=0;g<t.length;g++){var m=t[g],v=-5,y=!1;for(u=0;u<d.length;u++)if("string"==typeof d[u]){if(m==v){n+=cT.fromCName(d[u].slice(1)),y=!0;break}v++}else v=d[u];if(!y&&null!=p){var x=p.indexOf(m);-1!=x&&(m=String.fromCharCode(p[x+1])),n+=String.fromCharCode(m)}}}}else n=lT.readStr(t);if("/Type0"==i)if(null==(k=l["/W"]))s=1e3*n.length*.4;else for(g=0;g<t.length;g+=2){var b=t[g]<<8|t[g+1],w=!1;for(u=0;u<k.length;u+=2){var M=k[u],S=k[u+1];S.length?0<=b-M&&b-M<S.length&&(s+=S[b-M],w=!0):(M<=b&&b<=S&&(s+=k[u+2],w=!0),u++)}w||(s+=k[1][0])}else{if("/Type1"!=i&&"/Type3"!=i&&"/TrueType"!=i)throw"unknown font type";var k,_=e["/FirstChar"];if(k=e["/Widths"])for(g=0;g<t.length;g++)s+=k[t[g]-_];else s=1e3*n.length*.4,console.log("approximating word width")}var I=l["/FontDescriptor"];if(I)if(I.psName)r=I.psName;else{var C,L=["","2","3"];for(g=0;g<3;g++)I["/FontFile"+L[g]]&&(C="/FontFile"+L[g]);if(C){var N=cT.GS(I[C]);null!=C&&N&&65536==lT.B.readUint(N,0)&&(r=I.psName=cT._psName(N))}}return null==r&&e["/BaseFont"]&&(r=e["/BaseFont"].slice(1)),null==r&&(r="DejaVuSans"),[n,s,r.split("+").pop()]},cT._psName=function(t){for(var e=lT.B.readUshort,i=e(t,4),n=0,s=0;s<i;s++){var r=lT.B.readASCII(t,12+16*s,4),o=lT.B.readUint(t,12+16*s+8);if("name"==r){n=o;break}}if(0==n)return null;var a=e(t,n+2),l=n+6,c=n+6;for(s=0;s<a;s++){e(t,c);var u=e(t,c+2);e(t,c+4);var h,d=e(t,c+6),f=e(t,c+8),p=e(t,c+10);c+=12;var g=l+12*a+p;if(1==u||10==u||3==u){h="";for(var m=1;m<f;m+=2)h+=String.fromCharCode(t[g+m])}if(0!=u&&2!=u||(h=lT.B.readASCII(t,g,f)),6==d&&null!=h&&"OTS"!=h.slice(0,3))return h.replace(/\s/g,"")}return null},cT.encFromMap=function(t,e){for(var i="",n=0;n<t.length;n++){var s=t[n],r=e.indexOf(s);-1!=r&&(s=e[r+1]),i+=String.fromCharCode(s)}return i},cT._win1252=[128,8364,130,8218,131,402,132,8222,133,8230,134,8224,135,8225,136,710,137,8240,138,352,139,8249,140,338,142,381,145,8216,146,8217,147,8220,148,8221,149,8226,150,8211,151,8212,152,732,153,8482,154,353,155,8250,156,339,158,382,159,376],cT._macRoman=[128,196,129,197,130,199,131,201,132,209,133,214,134,220,135,225,136,224,137,226,138,228,139,227,140,229,141,231,142,233,143,232,144,234,145,235,146,237,147,236,148,238,149,239,150,241,151,243,152,242,153,244,154,246,155,245,156,250,157,249,158,251,159,252,160,8224,161,176,162,162,163,163,164,167,165,8226,166,182,167,223,168,174,169,169,170,8482,171,180,172,168,173,9824,174,198,175,216,176,8734,177,177,178,8804,179,8805,180,165,181,181,182,8706,183,8721,184,8719,185,960,186,8747,187,170,188,186,189,937,190,230,191,248,192,191,193,161,194,172,195,8730,196,402,197,8776,198,8710,199,171,200,187,201,8230,202,160,203,192,204,195,205,213,206,338,207,339,208,8211,209,8212,210,8220,211,8221,212,8216,213,8217,214,247,215,9674,216,255,217,376,218,8260,219,8364,220,8249,221,8250,222,64257,223,64258,224,8225,225,183,226,8218,227,8222,228,8240,229,194,230,202,231,193,232,203,233,200,234,205,235,206,236,207,237,204,238,211,239,212,240,63743,241,210,242,218,243,219,244,217,245,305,246,710,247,732,248,175,249,728,250,729,251,730,252,184,253,733,254,731,255,711],cT.fromCName=function(t){if(1==t.length)return t;if("uni"==t.slice(0,3))return String.fromCharCode(parseInt(t.slice(3),16));var e={space:32,exclam:33,quotedbl:34,numbersign:35,dollar:36,percent:37,parenleft:40,parenright:41,asterisk:42,plus:43,comma:44,hyphen:45,period:46,slash:47,zero:48,one:49,two:50,three:51,four:52,five:53,six:54,seven:55,eight:56,nine:57,colon:58,semicolon:59,less:60,equal:61,at:64,bracketleft:91,bracketright:93,underscore:95,braceleft:123,braceright:125,dieresis:168,circlecopyrt:169,Eacute:201,dotlessi:305,tcaron:357,alpha:945,phi:966,endash:8211,emdash:8212,asteriskmath:8727,quoteright:8217,quotedblleft:8220,quotedblright:8221,bullet:8226,minus:8706,fi:64257,fl:64258}[t];return null==e?("g"!=t.charAt(0)&&console.log("unknown character "+t),t):String.fromCharCode(e)},cT.toUnicode=function(t,e){var i=e.cmap,n="";if(null==i){var s={buff:cT.GS(e),off:0},r=[],o=lT._getDictStack({}),a=[{typ:"file",val:s}],l=[],c=lT._getEnv([0,0,1,1]);c.pgOpen=!0;for(var u=!0;u;)u=lT.step(r,o,a,l,c,null,cT.operator);i=c.res.CMap,e.cmap=i}for(var h in i){i=i[h];break}for(var d=i.bfrange,f=i.bfchar,p=i.bpc,g=0;g<t.length;g+=p){var m=t[g];2==p&&(m=m<<8|t[g+1]);var v=!1;if(!v&&d)for(var y=0;y<d.length;y+=3){var x=d[y],b=d[y+1],w=d[y+2];if(x<=m&&m<=b){null==w.length?m+=w-x:m=w[m-x],v=!0;break}}if(!v&&f)for(y=0;y<f.length;y+=2)if(f[y]==m){m=f[y+1],v=!0;break}n+=String.fromCharCode(m)}return n},cT.readXrefTrail=function(t,e,i){if("xref"==lT.B.readASCII(t,e,4)){for(13==t[u=e+4]&&u++,10==t[u]&&u++;;){if("trailer"==lT.B.readASCII(t,u,7)){u+=8;break}for(var n=u;!lT.isEOL(t[u]);)u++;var s=lT.B.readASCII(t,n,u-n);s=s.split(" ");var r=parseInt(s[1]);13==t[u]&&u++,10==t[u]&&u++;for(var o=0;o<r;o++){var a=parseInt(s[0])+o;null==i[a]&&(i[a]={off:parseInt(lT.B.readASCII(t,u,10)),gen:parseInt(lT.B.readASCII(t,u+11,5)),chr:lT.B.readASCII(t,u+17,1),val:null,opn:!1}),u+=20}}var l={buff:t,off:u},c=cT.readObject(l,l,i);return c["/Prev"]&&cT.readXrefTrail(t,c["/Prev"],i),c}for(var u=e;!lT.isEOL(t[u]);)u++;u++;for(var h=cT.readObject({buff:t,off:u},l,null),d=0,f=cT.GS(h),p=h["/W"],g=h["/Index"]?h["/Index"][0]:0;d<f.length;){var m=cT.getInt(f,d,p[0]);d+=p[0];var v=cT.getInt(f,d,p[1]);d+=p[1];var y=cT.getInt(f,d,p[2]);d+=p[2],u=0;var x=0,b="n";0==m&&(u=v,x=y,b="f"),1==m&&(u=v,x=y,b="n"),2==m&&(u=v,x=y,b="s"),i[g]={off:u,gen:x,chr:b,val:null,opn:!1},g++}h["/Prev"]&&cT.readXrefTrail(t,h["/Prev"],i);var w={buff:t,off:0},M=["/Root","/Info"];for(o=0;o<M.length;o++){var S=M[o],k=h[S];k&&"ref"==k.typ&&(h[S]=cT.getIndirect(k.ind,k.gen,w,i))}return h},cT.getInt=function(t,e,i){if(0==i)return 0;if(1==i)return t[e];if(2==i)return t[e]<<8|t[e+1];if(3==i)return t[e]<<16|t[e+1]<<8|t[e+2];throw"e"},cT.getIndirect=function(t,e,i,n){var s=n[t];if("f"==s.chr)return null;if(null!=s.val)return s.val;if(s.opn)return{typ:"ref",ind:t,gen:e};s.opn=!0;var r,o=i.off;if("s"==s.chr){for(var a=cT.getIndirect(s.off,s.gen,i,n),l={buff:cT.GS(a),off:0},c=0,u=0;c!=t;)c=lT.getFToken(l).val,u=lT.getFToken(l).val;l.off=u+a["/First"],r=cT.readObject(l,i,n)}else i.off=s.off,lT.getFToken(i),lT.getFToken(i),lT.getFToken(i),r=cT.readObject(i,i,n);return s.val=r,i.off=o,s.opn=!1,r},cT.readObject=function(t,e,i){var n=lT.getFToken(t);if("integer"==n.typ){var s=t.off,r=lT.getFToken(t);if("integer"==r.typ&&(lT.skipWhite(t),82==t.buff[t.off]))return t.off++,i&&i[n.val]?cT.getIndirect(n.val,r.val,e,i):{typ:"ref",ind:n.val,gen:r.val};t.off=s}if("<<"==n.val)return cT.readDict(t,e,i);if("["==n.val)return cT.readArra(t,e,i);if("string"==n.typ){for(var o="",a=0;a<n.val.length;a++)o+=String.fromCharCode(n.val[a]);return o}return n.val},cT.readDict=function(t,e,i){for(var n={};;){var s=t.off,r=lT.getFToken(t);if("name"==r.typ&&">>"==r.val)break;t.off=s;var o=cT.readObject(t,e,i),a=cT.readObject(t,e,i);n[o]=a}if(null!=n["/Length"]){var l=n["/Length"];lT.getFToken(t),13==t.buff[t.off]&&t.off++,10==t.buff[t.off]&&t.off++,n.buff=t.buff.slice(t.off,t.off+l),t.off+=l,lT.getFToken(t)}return n},cT.GS=function(t){if(null==t.stream){var e=t.buff;delete t.buff;var i=t["/Filter"],n=t["/DecodeParms"];if(null!=i){for(var s="string"==typeof i?[i]:i,r=!1,o=0;o<s.length;o++){var a=s[o],l={buff:e,off:0};if("/FlateDecode"==a)e=lT.F.FlateDecode(l);else if("/ASCIIHexDecode"==a)e=lT.F.HexDecode(l);else if("/ASCII85Decode"==a)e=lT.F.ASCII85Decode(l);else{if("/DCTDecode"!=a&&"/CCITTFaxDecode"!=a&&"/JPXDecode"!=a&&"/JBIG2Decode"!=a)throw console.log(a,e),"e";r=!0}}r||delete t["/Filter"]}if(null!=n&&(n instanceof Array&&(n=n[0]),null!=n["/Predictor"]&&1!=n["/Predictor"])){var c=n["/Columns"],u=n["/Colors"]?n["/Colors"]:1,h=u*c,d=e.length/(h+1);cT._filterZero(e,0,c,d,u),e=e.slice(0,d*h)}t.stream=e}return t.stream},cT.readArra=function(t,e,i){for(var n=[];;){var s=t.off,r=lT.getFToken(t);if("name"==r.typ&&"]"==r.val)return n;t.off=s;var o=cT.readObject(t,e,i);n.push(o)}},cT._filterZero=function(t,e,i,n,s){for(var r=s*i,o=cT._paeth,a=0;a<n;a++){var l=e+a*r,c=l+a+1,u=t[c-1];if(0==u)for(var h=0;h<r;h++)t[l+h]=t[c+h];else if(1==u){for(h=0;h<s;h++)t[l+h]=t[c+h];for(h=s;h<r;h++)t[l+h]=t[c+h]+t[l+h-s]&255}else if(0==a){for(h=0;h<s;h++)t[l+h]=t[c+h];if(2==u)for(h=s;h<r;h++)t[l+h]=255&t[c+h];if(3==u)for(h=s;h<r;h++)t[l+h]=t[c+h]+(t[l+h-s]>>1)&255;if(4==u)for(h=s;h<r;h++)t[l+h]=t[c+h]+o(t[l+h-s],0,0)&255}else{if(2==u)for(h=0;h<r;h++)t[l+h]=t[c+h]+t[l+h-r]&255;if(3==u){for(h=0;h<s;h++)t[l+h]=t[c+h]+(t[l+h-r]>>1)&255;for(h=s;h<r;h++)t[l+h]=t[c+h]+(t[l+h-r]+t[l+h-s]>>1)&255}if(4==u){for(h=0;h<s;h++)t[l+h]=t[c+h]+o(0,t[l+h-r],0)&255;for(h=s;h<r;h++)t[l+h]=t[c+h]+o(t[l+h-s],t[l+h-r],t[l+h-s-r])&255}}}return t},cT._paeth=function(t,e,i){var n=t+e-i,s=Math.abs(n-t),r=Math.abs(n-e),o=Math.abs(n-i);return s<=r&&s<=o?t:r<=o?e:i};class uT{#gi=0;#Ju=null;#ms=null;#qu=new Map;#Ku=new Map;#Xu=[];#e=[];#th;constructor(t){this.#th=t}destroy(){this.#th=null,this.#ms?.dispose(),this.#ms=this.#Ju=null,this.#qu.clear(),this.#Ku.clear(),this.#e.splice(0);for(const t of this.#Xu.splice(0))t.dispose()}#eh(t){return new Jp(t)}#ih(t){const e=new mg;return e.appendChild(new ng(t)),e}#nh(t,e){if(!e||e.bounds.containsRect(this.#Ju)||t.localBounds.isVisible&&e.bounds.containsRect(t.localBounds)||t.globalBounds.isVisible&&e.bounds.containsQuad(t.globalBounds))return e?.dispose(),t;const i=this.#ih(e);return i.appendChild(t),i}StartPage(t,e,i,n){this.#Ju=new Ve(t,e,i,n),this.#ms=new Qp}ShowPage(){this.#sh(this.#ms);const t=this.#Ju,e=this.#ms;if(this.#ms=this.#Ju=null,!e.hasChildren)return void e.dispose();const i=(new hi).translate(-t.x,t.height-t.y).scale(1,-1);e.absorbMatrix(i),this.#Xu.push(e),this.#e.push(t),this.#gi++}Done(){this.#th&&this.#th({pages:this.#Xu.splice(0),images:new Map(this.#Ku),bounds:this.#e.splice(0)}),this.destroy()}#sh(t){for(let e=t.lastChild;null!=e;e=e.previousSibling){if(!(e instanceof mg&&e.nextSibling instanceof mg))continue;const t=e.nextSibling;if(e.clipPath.equals(t.clipPath)){for(const i of[...t.children()])i.remove(),i instanceof ng?i.dispose():e.appendChild(i);t.remove(),t.dispose()}}}#rh(t){return new se(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2]))}#oh(t){if(Array.isArray(t))return new gi(this.#rh(t));const e=this.#ah(t.mat),i=[];for(const e of t.grad)i.push({offset:e[0],color:this.#rh(e[1])});const n=new mi(i);return"lin"===t.typ?new Ii(new ce(t.crds[0],t.crds[1]),new ce(t.crds[2],t.crds[3]),n).withTransformedCoords(e):"rad"===t.typ?kt(t.crds.slice(0,3),t.crds.slice(3,6))?new Ci(new ce(t.crds[0],t.crds[1]),t.crds[2],n).withTransformedCoords(e):new Li(new ce(t.crds[0],t.crds[1]),t.crds[2],new ce(t.crds[3],t.crds[4]),t.crds[5],n).withTransformedCoords(e):pi.INSTANCE}#lh(t){return BM(t.toLowerCase().substring(1))}#ch(t,e){if(null==t||0===t.cmds.length)return null;const i=[];let n=0;for(const e of t.cmds){i.push(e);let s=0;switch(e){case"M":case"L":s=2;break;case"Q":s=4;break;case"C":s=6}s>0&&(i.push(t.crds.slice(n,n+s)),n+=s)}const s=es.fromString(i.join(" "));return null==e||e.isIdentity||s.setNodes(zn(s.nodes,e)),s}#ah(t){return hi.Create(t)}Fill(t,e,i){const n=!i;i||(i=this.#eh(this.#ch(t.pth))),i.fillRule=e?1:0,i.strokeBrush=pi.INSTANCE,i.fill=this.#oh(t.colr),i.fillOpacity=t.ca??1,i.blend=this.#lh(t.bmode),n&&this.#ms.appendChild(this.#nh(i,this.#ch(t.cpth)))}Stroke(t,e){const i=!e,n=this.#ah(t.ctm).lineScale;e||((e=this.#eh(this.#ch(t.pth))).fill=pi.INSTANCE),e.strokeOpacity=t.CA??1,e.strokeBrush=this.#oh(t.COLR),e.blend=this.#lh(t.bmode),e.strokeLineCap=[0,1,2][t.lcap],e.strokeLineJoin=[0,1,2][t.ljoin],e.strokeMiterLimit=n*(t.mlimit??10),e.strokeLineWidth=n*t.lwidth,e.strokeDashOffset=n*(t.doff||0),e.strokeDashArray=(Array.isArray(t.dash)?t.dash:[]).map((t=>n*t)),i&&this.#ms.appendChild(this.#nh(e,this.#ch(t.cpth)))}FillAndStroke(t,e){const i=this.#eh(this.#ch(t.pth));this.Fill(t,e,i),this.Stroke(t,i),this.#ms.appendChild(this.#nh(i,this.#ch(t.cpth)))}PutText(t,e){}#uh(t,e,i,n){const s=t.length;if(s!==e*i*4)return null;if(null!=n&&n.length===s)return null;if(this.#qu.has(t))return this.#qu.get(t);const r=new Uint8ClampedArray(t.length);for(let n=0;n<i;n++){const s=n*e*4,o=(i-n-1)*e*4;for(let i=0;i<e;i++){const e=4*i;r[s+e]=t[o+e],r[s+e+1]=t[o+e+1],r[s+e+2]=t[o+e+2],r[s+e+3]=t[o+e+3]}}return{width:e,height:i,data:r}}PutImage(t,e,i,n,s){const r=this.#uh(e,i,n,s);if(null==r)return;const o=new gg(null);o.width=i,o.height=n,this.#Ku.set(o,r);const a=new hi(1/i,0,0,1/n,0,0);a.preMultiply(this.#ah(t.ctm)),o.setTransformMatrix(a),this.#ms.appendChild(this.#nh(o,this.#ch(t.cpth)))}}async function hT(t){let e=Skia.SkImage.MakeFromPixels(t.data,t.width,t.height);if(!e)return null;const i=e.encodeToData();if(e.delete(),!i)return null;const n=i.getBytes();if(!n||!n.byteLength)return i.delete(),null;const s=await ug.idFromData(n);return e=Skia.SkImage.MakeFromEncoded(i),i.delete(),e?new ug(e,s):null}class dT{#en=null;#hh=new JM;#dh=[];#fh=new Map;#es;constructor(t){this.#es=t}dispose(){this.#fh?.clear(),this.#fh=null,this.#en=null,this.#hh?.dispose(),this.#hh=null,this.#es=null}async#ph(t){return t instanceof File?t.text():new Blob([t],{type:"image/svg+xml"}).text()}async import(t){const e=new Cg;let i;try{i=await this.#gh("string"==typeof t?t:await this.#ph(t),e)}catch{return e.dispose(),!1}const n=new qg;return n.appendChild(e),this.#es.content.board=new Ve(0,0,i.width,i.height),this.#es.content.document=n,!0}async#gh(t,e){const i=function(t){const e=(new DOMParser).parseFromString(t,"image/svg+xml");if(e.querySelector("parsererror"))throw new Error("Invalid SVG");if(e.querySelectorAll("script, foreignObject, link, switch, animate, animateTransform, animateColor, animateMotion").forEach((t=>{t.remove()})),e.querySelectorAll("image").forEach((t=>{const e=t.href?.baseVal;e&&/^data:image\/(png|jpe?g|webp)/.test(e.substring(0,20))||t.remove()})),!(e.documentElement instanceof SVGSVGElement))throw new Error("Invalid SVG");return e.documentElement}(t);t=null;const n=document.createElement("div");n.style.position="absolute",n.style.top="200vh",n.style.left="200vw",n.style.zIndex="-100",n.appendChild(i),document.body.appendChild(n);const s=Array.isArray(e)?t=>e.push(t):t=>e.appendChild(t);let r;try{r=await this.#mh(i,s)}finally{n.parentNode.removeChild(n)}return r}#vh(t){if(t.id){if(this.#dh.includes(t.id))return!1;this.#dh.push(t.id)}return!0}#yh(){return this.#dh.pop()}async#mh(t,e){if(!this.#vh(t))return console.warn("Inf. recursion"),null;const i=this.#en,n=this.#hh.getViewBox(t),s=n.topLeft;this.#en=new HM(n);try{if(s.isZero)for(const i of this.#xh(t))e(i);else for(const i of this.#xh(t))i.anchor=i.anchor.add(s),e(i)}finally{this.#yh(),this.#en=i}return await this.#bh(),n}async#bh(){function t(t){for(const e of t)e.remove(),e.dispose()}const e=dg(this.#es.global);for(let[i,n]of this.#fh)try{let t=await xt(i);if(i=null,t){const i=await t.arrayBuffer(),s=await ug.idFromData(i);if(!e.has(s)){const t=await ug.fromRawData(i,s);if(!t)throw new Error("Cannot decode image");e.add(t)}t=null;for(const t of n)t.parent?t.imageId=s:t.dispose()}}catch(e){t(n)}this.#fh.clear()}*#xh(t){for(let e=t.firstElementChild;null!=e;e=e.nextElementSibling)if(e instanceof SVGElement&&this.#vh(e))try{const t=this.#wh(e);t&&(yield t)}finally{this.#yh()}}#Mh(t){switch(t.localName){case"path":return this.#Sh(t);case"rect":return this.#kh(t);case"circle":return this.#_h(t);case"ellipse":return this.#Ih(t);case"line":return this.#Ch(t);case"polyline":return this.#Lh(t,!1);case"polygon":return this.#Lh(t,!0);case"text":return this.#Nh(t);case"textPath":return this.#jh(t)}return null}#zh(t){switch(t.localName){case"g":case"a":return this.#Ph(t);case"image":return this.#Th(t);case"use":return this.#Ah(t);case"svg":return this.#Dh(t)}return this.#Mh(t)}#wh(t){let e=this.#zh(t);if(!e)return null;if(e.skipPropertiesAndChildren)return e.element;let i=e.element;const n=e.position,s=this.#Eh(t);this.#en.concat(s),i instanceof Bh&&this.#Oh(t,i,n);try{if(i.supportsChildren)for(const e of this.#xh(t))i.appendChild(e)}finally{this.#en.pop()}const r=this.#Wh(t,i.localBounds,n);return r&&(r.appendChild(i),i=r),this.#Yo(t,i),n&&s.translate(n.x,n.y),i.setTransformMatrix(s),i}#Yo(t,e){const i=this.#hh;e.blend=i.getBlendMode(t),e.isolate=e.supportsChildren&&i.getIsolate(t),e.opacity=i.getOpacity(t),e.hidden=i.getHidden(t),e.title=i.getTitle(t)}#Oh(t,e,i){const n=e.localBounds;e.stroke=this.#Rh(t,n,i);const s=this.#hh;e.strokeOpacity=s.getStrokeOpacity(t),e.fill=this.#oh(t,s.getFill(t),n,i),e.fillOpacity=s.getFillOpacity(t),e.fillRule=s.getFillRule(t),e.paintOrder=s.getPaintOrder(t)}#Eh(t,e){const i=this.#hh.getTransform(t);return e&&!e.isZero&&i.translate(e.x,e.y),i}#_h(t){const e=this.#en.viewBox,i=this.#hh,n=i.getAxisSize(t,"cx",e,"x",0),s=i.getAxisSize(t,"cy",e,"y",0),r=2*i.getAxisSize(t,"r",e,null,0);return{position:n||s?new ce(n,s):ce.ZERO,element:new Zp(new ms(r,r))}}#Ih(t){const e=this.#en.viewBox,i=this.#hh,n=i.getAxisSize(t,"cx",e,"x",0),s=i.getAxisSize(t,"cy",e,"y",0),r=2*i.getAxisSize(t,"rx",e,"x",0),o=2*i.getAxisSize(t,"ry",e,"y",0);return{position:n||s?new ce(n,s):ce.ZERO,element:new Zp(new ms(r,o))}}#kh(t){const e=this.#en.viewBox,i=this.#hh;let n=i.getAxisSize(t,"x",e,"x",0),s=i.getAxisSize(t,"y",e,"y",0);const r=i.getAxisSize(t,"width",e,"x",0),o=i.getAxisSize(t,"height",e,"y",0),a=new Ve(n,s,r,o);let l,c=i.getAxisSize(t,"rx",a,"x",null),u=i.getAxisSize(t,"ry",a,"y",null);if(null==c?c=u??(u=0):null==u&&(u=c),0!==c&&0!==u||(c=u=0),c>=r/2&&u>=o/2)l=new Zp(new ms(r,o)),n+=r/2,s+=o/2;else if(c!==u){const t=new Skia.SkPath;t.addRoundRect(Ve.fromWH(r,o),c,u),l=new Jp(es.fromSkPath(t,!0))}else l=new Kp(new xs(r,o,new ys(c)));return{position:n||s?new ce(n,s):ce.ZERO,element:l}}#Sh(t){if(!t.hasAttribute("d"))return null;const e=es.fromString(t.getAttribute("d"));return e?{position:ce.ZERO,element:new Jp(e)}:null}#Lh(t,e){const i=[...t.points].map((t=>new ce(t.x,t.y)));return i.length?(1===i.length&&i.push(i[0]),{position:ce.ZERO,element:new qp(new vs(i,e))}):null}#Ch(t){const e=this.#en.viewBox,i=this.#hh,n=new ce(i.getSVGLength(t.x1,e,"x"),i.getSVGLength(t.y1,e,"y")),s=new ce(i.getSVGLength(t.x2,e,"x"),i.getSVGLength(t.y2,e,"y"));return{position:ce.ZERO,element:new tg(new Ms(n,s))}}#Ph(t){return t.firstElementChild?{position:ce.ZERO,element:new Qp}:null}#Th(t){const e=this.#hh,i=e.getSVGHref(t);if(!i||!i.startsWith("data:image/"))return null;this.#fh.has(i)||this.#fh.set(i,[]);const n=new gg(null);this.#fh.get(i).push(n);const s=this.#en.viewBox;return n.width=e.getAxisSize(t,"width",s,"x",0),n.height=e.getAxisSize(t,"height",s,"y",0),{position:new ce(e.getAxisSize(t,"x",s,"x",0),e.getAxisSize(t,"y",s,"y",0)),element:n}}#Dh(t){const e=this.#hh,i=this.#en.viewBox,n=new Ve(e.getSVGLength(t.x,i,"x"),e.getSVGLength(t.y,i,"y"),e.getSVGLength(t.width,i,"x"),e.getSVGLength(t.height,i,"y")),s=e.getViewBox(t,n),r=e.getViewBoxAlign(t),o=e.getViewBoxSlice(t);let a=new Qp;a.setTransformMatrix(function(t,e,i,n){let s=0===e.width?0:t.width/e.width,r=0===e.height?0:t.height/e.height;i&&(s=r=n?Math.max(s,r):Math.min(s,r));let o=t.x-e.x*s,a=t.y-e.y*r;if(i){let n=0,l=0;switch(i.x){case 2:n=.5;break;case 3:n=1}switch(i.y){case 2:l=.5;break;case 3:l=1}o+=n*(t.width-e.width*s),a+=l*(t.height-e.height*r)}return(new hi).translate(o,a).scale(s,r)}(n,s,r,o)),this.#Yo(t,a),this.#en.concat(a.localMatrix,n);try{for(const e of this.#xh(t))a.appendChild(e)}finally{this.#en.pop()}if(!a.hasChildren)return a.dispose(),null;a=this.#Bh(a);const l=e.getTransform(t);if("visible"!==e.getString(t,"overflow")||o&&n.width/s.width!=n.height/s.height){const t=new mg;t.appendChild(a),t.appendChild(new ng(es.fromRect(n))),t.setTransformMatrix(l),a=t}else l&&!l.isIdentity&&a.setTransformMatrix(l.multiply(a.localMatrix));return{element:a,skipPropertiesAndChildren:!0}}#Uh=["rect","circle","ellipse","line","polyline","polygon","path","text","textPath","g","a","image","svg","symbol"];#$h=["id","x","y","width","height","href","xlink:href"];#Ah(t){const e=this.#hh.resolveHref(t);if(!e)return null;if(!this.#Uh.includes(e.localName))return null;if(!this.#vh(e))return console.log("<use> inf. recursion"),null;try{return e instanceof SVGSymbolElement?this.#Fh(t,e):e instanceof SVGSVGElement?this.#Vh(t,e):this.#Hh(t,e)}finally{this.#yh()}}#Gh(t){const e=t.ownerDocument.createElementNS(GM,"g");for(const i of t.getAttributeNames())this.#$h.includes(i)||e.setAttribute(i,t.getAttribute(i));return e}#Zh(t,e){let i;try{i=this.#Gh(t),i.appendChild(e),t.parentNode.insertBefore(i,t.nextSibling||null);let n=this.#wh(i);if(n){if(!n.hasChildren)return n.dispose(),null;const e=this.#hh,s=this.#en.viewBox;return n.setTransformMatrix(this.#Eh(i,new ce(e.getAxisSize(t,"x",s,"x",0),e.getAxisSize(t,"y",s,"y",0)))),n=this.#Bh(n),{element:n,skipPropertiesAndChildren:!0}}}finally{i&&i.parentNode?.removeChild(i)}return null}#Hh(t,e){const i=e.cloneNode(!0);return i.removeAttribute("id"),this.#Zh(t,i)}#Bh(t){if(t.firstChild!==t.lastChild)return t;const e=t.firstChild;return e.setTransformMatrix(e.globalMatrix),t.hidden&&(e.hidden=!0),t.title&&(e.title=t.title),11!==t.blend&&(e.blend=t.blend),1!==t.opacity&&(e.opacity*=t.opacity),e.remove(),t.dispose(),e}#Fh(t,e){const i=t.ownerDocument.createElementNS(GM,"svg");["x","y","width","height","viewBox","preserveAspectRatio"].forEach((n=>{"width"!==n&&"height"!==n||!function(e){return t.hasAttribute(e)&&"auto"!==t.getAttribute(e)}(n)?e.hasAttribute(n)&&i.setAttribute(n,e.getAttribute(n)):i.setAttribute(n,t.getAttribute(n))}));for(let t=e.firstElementChild;null!=t;t=t.nextElementSibling)i.appendChild(t.cloneNode(!0));return this.#Zh(t,i)}#Vh(t,e){const i=this.#hh,n=this.#en.viewBox;function s(e){return t.hasAttribute(e)&&"auto"!==t.getAttribute(e)}const r=e.cloneNode(!0);return r.removeAttribute("id"),s("x")&&r.setAttribute("x",i.getSVGLength(t.x,n,"x").toString()),s("y")&&r.setAttribute("y",i.getSVGLength(t.y,n,"y").toString()),s("width")&&r.setAttribute("width",i.getSVGLength(t.width,n,"x").toString()),s("height")&&r.setAttribute("height",i.getSVGLength(t.height,n,"y").toString()),this.#Zh(t,r)}#Nh(t){return null}#jh(t){return null}#Yh(t,e,i){const n=this.#hh;let s=n.getString(t,"clip-path");if(!s||"none"===s)return null;if(s=n.getSVGRefId(s),!s)return null;const r=n.resolveElementId(t,s);if(!(r&&r instanceof SVGClipPathElement))return null;const o="objectBoundingBox"==r.getAttribute("clipPathUnits"),a=n.subUnitAsPercent;o&&(n.subUnitAsPercent=!0,this.#en.push(e));const l=[];for(let t=r.firstElementChild;null!=t;t=t.nextElementSibling){let s;if(t instanceof SVGUseElement){if(s=this.#Ah(t),!s)continue;if(!(s.element instanceof Bh)){s.element.dispose();continue}}else if(s=this.#Mh(t),!s)continue;const r=s.element,a=new hi;let c;if(o?a.translate(e.x,e.y):i&&a.translate(-i.x,-i.y),a.multiply(this.#Eh(t,s.position)),c=r instanceof Uh?r.shape.convertToPath():r.localPath?.copy(),r.dispose(),!c||c.isEmpty){c?.delete();continue}const u=new ng(es.fromSkPath(c,!0));u.setTransformMatrix(a),t.hasAttribute("clip-rule")&&(u.fillRule=n.getClipRule(t)),l.push(u)}return o&&(n.subUnitAsPercent=a,this.#en.pop()),l.length?l:null}#Qh(t,e,i){const n=this.#hh;let s=n.getString(t,"mask");if(!s||"none"===s)return null;if(s=n.getSVGRefId(s),!s)return null;const r=n.resolveElementId(t,s);if(!(r&&r instanceof SVGMaskElement))return null;const o="alpha"===n.getString(r,"mask-type"),a="objectBoundingBox"==r.getAttribute("maskContentUnits"),l=n.subUnitAsPercent;a&&(n.subUnitAsPercent=!0,this.#en.push(e));const c=new ag;for(const t of this.#xh(r))c.appendChild(t);return a?(c.position=e.topLeft,n.subUnitAsPercent=l,this.#en.pop()):i&&(c.anchor=i),c.hasChildren?[c,o]:(c.dispose(),null)}#Wh(t,e,i){if(!e||!e.isVisible)return null;const n=this.#Yh(t,e,i),s=this.#Qh(t,e,i);if(!n&&!s)return null;const r=new mg;if(n)for(const t of n)r.appendChild(t);return s&&(r.appendChild(s[0]),r.isAlphaMask=s[1]),r.hasChildren?r:(r.dispose(),null)}#Rh(t,e,i){const n=new Ti,s=this.#hh,r=this.#en.viewBox;return n.brush=this.#oh(t,s.getStroke(t),e,i),n.width=s.getStrokeWidth(t,r),"non-scaling-stroke"===s.getVectorEffect(t)&&(n.width/=this.#en.matrix.lineScale),n.lineJoin=s.getStrokeJoin(t),n.lineCap=s.getStrokeCap(t),n.miterLimit=s.getStrokeMiterLimit(t),n.dashes=s.getStrokeDashArray(t,r),n.offset=s.getStrokeDashOffset(t,r),n.dashPathLength=s.getPathLength(t),n}#oh(t,e,i,n){if(!e||"none"===e)return pi.INSTANCE;const s=this.#hh.getSVGRefId(e);if(s){const e=t.ownerSVGElement.getElementById(s);return e?e instanceof SVGLinearGradientElement?this.#Jh(e,this.#en.viewBox,i,n):e instanceof SVGRadialGradientElement?this.#qh(e,this.#en.viewBox,i,n):pi.INSTANCE:pi.INSTANCE}return gi.fromColor(e)}#Kh(t,e,i){if(!e)return t;const n=this.#en.matrix?.clone()||new hi;return i&&!i.isZero&&n.translate(i.x,i.y),t.preMultiplyInverse(n)}#Xh(t){const e=t.length;if(!e)return pi.INSTANCE;const i=t[0].color;for(let n=1;n<e;n++)if(!i.equals(t[n].color))return null;return 0===i.a?pi.INSTANCE:gi.fromColor(i)}#Jh(t,e,i,n){let{fixed:s,properties:r,matrix:o,spread:a,stops:l}=this.#hh.resolveLinearGradient(t,e,i);const c=this.#Xh(l);if(c)return c;s&&n&&!n.isZero&&(r.x1-=n.x,r.y1-=n.y,r.x2-=n.x,r.y2-=n.y,o.isIdentity||o.preTranslate(-n.x,-n.y).translate(n.x,n.y));const u=new Ii(new ce(r.x1,r.y1),new ce(r.x2,r.y2),new mi(l),a);return o.isIdentity?u:u.withTransformedCoords(o)}#qh(t,e,i,n){let{fixed:s,properties:r,matrix:o,spread:a,stops:l}=this.#hh.resolveRadialGradient(t,e,i);const c=this.#Xh(l);if(c)return c;s&&n&&!n.isZero&&(r.cx-=n.x,r.cy-=n.y,r.fx-=n.x,r.fy-=n.y,o.isIdentity||o.preTranslate(-n.x,-n.y).translate(n.x,n.y));const u=new ce(r.cx,r.cy),h=new ce(r.fx,r.fy),d=r.r,f=r.fr;let p;return p=f<0||d===f&&u.equals(h)?new Ci(u,d,new mi(l),a):new Li(h,f,u,d,new mi(l),a),o.isIdentity?p:p.withTransformedCoords(o)}}async function fT(t,e){const i=new dT(t);try{return await i.import(e)}finally{i.dispose()}}async function pT(t){return t instanceof File?t.text():ft(t)}function gT(t){return/^.*<svg[^>]*\sxmlns\s*\=.*/gim.test(t)?t:t.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"')}async function mT(t,e){"string"!=typeof e&&(e=await pT(e));const i=es.fromString(e);if(!i||i.isEmpty)return i?.dispose(),!1;const n=new Jp(i);$v.decorate(n);const s=new qg;return s.appendChild(new Cg),s.firstChild.appendChild(n),t.content.document=s,t.content.board=i.bounds,!0}uk(),kk||(kk=!0,J([bk,"Guide"],[wk,"GuideList"]),ga(Mk,(t=>({enabled:t?.engine?.showGuides??!0,locked:t?.engine?.lockGuides??!1,snap:t?.snapping?.guides??!0}))),Mo({id:Mk,copy:null,delete:null,update(t){Sk=t},serialization:Bo(11,(()=>Sk))}),uk(),dk((function(){if(!Sk)return;const t=Ik();if(t.enabled&&t.snap)for(const t of Sk)t.isHorizontal?(e=t.position,void 0,AS.y.add(e)):FS(t.position);var e}))),gk||(gk=!0,J([iS,"AutomaticGrid"],[eS,"FixedGrid"],[sS,"IsometricGrid"],[oS,"PixelGrid"]),ga(fk,(t=>({enabled:t?.engine?.showGrid??!1,front:t?.engine?.showGridToBack??!1,snap:t?.snapping?.grid??!1}))),Mo({id:fk,copy:null,delete:null,update(t){pk=t},serialization:Bo(10,(()=>pk))}),uk(),oT={get enabled(){if(!pk)return!1;const t=yk();return t.enabled&&t.snap},snap:t=>pk.snap(t)},CS=oT),NL||(NL=!0,uk(),dk((function(){let t=LL();if(t.bounds||t.points)for(const e of Gu(!0))zL(e,t)})),ga(CL,(t=>({bounds:t?.snapping?.bounds??!0,points:t?.snapping?.points??!0})))),vM(".ecf","application/vnd.expressive.canvas"),vM(".eaf","application/vnd.expressive.animator"),bM=async function(t,e){const i=t.content.document;let n=dl(i.pictureBounds,Vu(!1),e?.position,e?.align,e?.zoom);n?.isIdentity&&(n=null);const s=[];for(const t of i.children())for(const e of t.children())n&&e.absorbMatrix(n),s.push(e);return Gm(s)?(dg().import(dg(t.global)),s):null},ay=qN,vM(".jpeg","image/jpeg"),vM(".jpg","image/jpeg"),vM(".png","image/png"),vM(".webp","image/webp"),xM((async function(t,e){const i=await async function(t,e){const i=await ug.idFromData(t);if(!e.has(i)){const n=await ug.fromRawData(t,i);if(!n)return null;e.add(n)}const n=new gg(i),s=e.get(i);return n.width=s.width,n.height=s.height,n}(await async function(t){return t instanceof FileSystemFileHandle?(await t.getFile()).arrayBuffer():t instanceof File||t instanceof Blob?t.arrayBuffer():t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:null}(e),dg(t.global));if(!i)return!1;e instanceof File&&(i.title=e.name);const n=new qg;return n.appendChild(new Cg),n.firstChild.appendChild(i),t.content.document=n,t.content.board=new Ve(0,0,i.width,i.height),!0}),"image/png","image/jpeg","image/webp"),vM(".pdf","application/pdf"),vM(".ai","application/pdf"),xM((async function(t,e){let i=null;e instanceof File&&(i=e.name,e=await e.arrayBuffer());const n=function(t){let e=null;const i=new uT((t=>{e=t}));try{cT.Parse(t,i)}catch{i.destroy()}return e}(e);if(!n)return!1;n.images.size&&await async function(t,e){for(const[i,n]of t){let t=!1;const s=await hT(n);s?(e.has(s.id)?s.dispose():e.add(s),i.imageId=s.id):t=!0,t&&(s?.dispose(),i.remove(),i.dispose())}}(n.images,dg(t.global));const s=new Cg;for(const t of n.pages)t.hasChildren?t.firstChild!==t.lastChild?s.appendChild(t):(s.appendChild(t.firstChild),t.remove(),t.dispose()):(t.remove(),t.dispose());if(!s.hasChildren)return s.dispose(),!1;const r=new qg;return r.title=i,r.appendChild(s),t.content.document=r,t.content.board=Ve.merge(n.bounds),!0}),"application/pdf","application/postscript"),vM(".svg","image/svg+xml"),xM(fT,"image/svg+xml"),xM((async function(t,e){let i=await pT(e);return!!i&&(function(t){return/^([MLVHAQCSTZ]\s*(-?[0-9.,]+\s*)*)+$/gim.test(t)}(i)?mT(t,i):!!function(t){return/^.*<svg(\s|>).*<\/svg>\s*$/gs.test(t)}(i)&&fT(t,await new Blob([gT(i)],{type:"image/svg+xml"}).arrayBuffer()))}),"text/plain"),xM(mT,"web expressive/path"),Yr(ro,(()=>{var t;oN.dblClick=(t=Cl("text"),e=>e instanceof Sg&&(Nl(t),t.isEditorFocused||t.startEdit(e),!0)),Hl=Rk,wc=UN,Dl=VN})),Yr(eo,(t=>{0===t&&kc(FN().ruler)})),Yr(Xc,(()=>{Rl()})),Yr(Yc,(()=>{Ll.onIsolationContextChanged()})),Yr(Qc,(()=>{Ll.onSelectionChanged()})),Yr(Vc,(()=>{Ll.onDocumentTreeChanged()}));const vT=Symbol();function yT(){kc(FN().ruler),Rl(),Zr(vT)}const xT=kL(yT),bT=[xT(FN,"ruler","View ruler",["ctrl","R"]),"Grid",xT(yk,"enabled","Show grid",["ctrl","'"]),xT(yk,"front","Front grid",["alt","ctrl","'"]),xT(FN,"transparency","Transparency grid"),"Guides",xT(Ik,"enabled","Show guides",["ctrl",";"]),xT(Ik,"locked","Lock guides",["alt","ctrl",";"]),"Rendering",xT(FN,"clip","Clip document"),xT(FN,"pixelate","Pixel preview"),xT(FN,"wireframe","Wireframe")];class wT extends qx{#td;#ed;constructor(){super(),IC(this,[[eo,this.#qc],[vT,this.#qc]])}render(){return Px`
            <cc-action-group compact emphasized>
                <cc-action-button id="clip-document" title="Clip document" @click=${this.#id}>
                    <cc-icon name="workflow:RectSelect"></cc-icon>
                </cc-action-button>
                <cc-action-button id="ruler" title="Ruler" @click=${this.#nd}>
                    <cc-icon name="expr:rulergrid"></cc-icon>
                </cc-action-button>
                <cc-action-button @click=${this.#Jc}>
                    <cc-css-icon name="ChevronDown"></cc-css-icon>
                </cc-action-button>
            </cc-action-group>
        `}firstUpdated(){this.#td=this.shadowRoot.getElementById("clip-document"),this.#ed=this.shadowRoot.getElementById("ruler")}#id(){const t=FN();t.clip=!t.clip,Rl(),this.#qc()}#nd(){const t=FN();t.ruler=!t.ruler,kc(t.ruler),this.#qc()}#qc=()=>{const t=FN();this.#td&&(this.#td.selected=t.clip),this.#ed&&(this.#ed.selected=t.ruler)};#Jc(t){ky(bT,t.target,"bottom-right")}}const MT=[{title:"Straight",icon:"expr:anchor-straight",value:1},{title:"Disconnected",icon:"expr:anchor-disconnected",value:0},{title:"Mirrored",icon:"expr:anchor-mirrored",value:2},{title:"Asymmetric",icon:"expr:anchor-asymmetric",value:3}];class ST extends oL{#Yt=[!0,null];render(){const t=this.#Yt;return t[0]=!0,t[1]=null,this.refresh(t),Px`<cc-icon-switch .disabled=${t[0]} .value=${t[1]} .items=${MT} @change=${this.onChange} quiet size="m" gapless emphasized></cc-icon-switch>`}static{this.styles=[Ib]}}class kT extends ST{constructor(){super(),IC(this,[eo,io,Jc])}connectedCallback(){super.connectedCallback(),this.isConnected&&this.requestUpdate()}refresh(t){if(!mm())for(const e of gm.keys())if(Im(e)){t[0]=!1;for(const i of Lm(e))if(null!==t[1]){if(t[1]!==i.joint)return void(t[1]=null)}else t[1]=i.joint}}onChange(t){V_(t.detail)}}let _T=(()=>{let t,e,i,n,s,r,o=qx,a=[],l=[],c=[],u=[],h=[],d=[];return class extends o{static{const f="function"==typeof Symbol&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;t=[fb()],i=[fb()],s=[fb()],ab(this,e={get:cb((function(){return this.#sd}),"#canSetStart","get"),set:cb((function(t){this.#sd=t}),"#canSetStart","set")},t,{kind:"accessor",name:"#canSetStart",static:!1,private:!0,access:{has:t=>#rd in t,get:t=>t.#rd,set:(t,e)=>{t.#rd=e}},metadata:f},a,l),ab(this,n={get:cb((function(){return this.#od}),"#canReverse","get"),set:cb((function(t){this.#od=t}),"#canReverse","set")},i,{kind:"accessor",name:"#canReverse",static:!1,private:!0,access:{has:t=>#ad in t,get:t=>t.#ad,set:(t,e)=>{t.#ad=e}},metadata:f},c,u),ab(this,r={get:cb((function(){return this.#ld}),"#index","get"),set:cb((function(t){this.#ld=t}),"#index","set")},s,{kind:"accessor",name:"#index",static:!1,private:!0,access:{has:t=>#gi in t,get:t=>t.#gi,set:(t,e)=>{t.#gi=e}},metadata:f},h,d),f&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f})}#sd=lb(this,a,!1);get#rd(){return e.get.call(this)}set#rd(t){return e.set.call(this,t)}#od=(lb(this,l),lb(this,c,!1));get#ad(){return n.get.call(this)}set#ad(t){return n.set.call(this,t)}#ld=(lb(this,u),lb(this,h,null));get#gi(){return r.get.call(this)}set#gi(t){return r.set.call(this,t)}constructor(){super(),IC(this,[[eo,this.#cd],[io,this.#cd],[Jc,this.#cd]])}#ud(){this.#rd=!1}#cd=(lb(this,d),()=>{const t=lh();if(this.#ad=t>0&&kh(IT),1!==t)return this.#ud();const e=oh();if(!e||!gv(e))return this.#ud();const i=vm(e);if(1!==i?.size)return this.#ud();[this.#gi]=i,this.#rd=function(t,e){if(t.length<=1||1===t[e]?.type)return!1;const i=bn(t,e);return 3===t[i].type||t[xn(t,e)].point.equals(t[i].point)}(e.nodes,this.#gi)});render(){return Px`<cc-action-group quiet size="m" gapless emphasized>
            <cc-action-button .disabled=${!this.#rd} title="Set start point" @click=${this.#hd}>
                    <cc-icon name="workflow:Flag"></cc-icon>
            </cc-action-button>
            <cc-action-button .disabled=${!this.#ad} title="Reverse path" @click=${this.#dd}>
                    <cc-icon name="workflow:Sync"></cc-icon>
            </cc-action-button>
        </cc-action-group>`}connectedCallback(){super.connectedCallback(),this.isConnected&&this.#cd()}#dd(){m_()}#hd(){g_(oh(),this.#gi)}}})();function IT(t){return gv(t)||Pv(t)||Tv(t)}const CT={vectors:0,paths:0,maxContours:0};async function LT(t,e){const i=!e?.altKey,n=e?.metaKey||e?.ctrlKey;if("string"!=typeof t.value)return c_(t.value,n,i);switch(t.value){case"split":return p_();case"merge":return d_(n,i);case"outline":return h_(!i);case"divide":return u_(n,i);case"simplify":return f_();case"reverse":return m_()}return!1}function NT(t,e,i,n,s,r=0){return{title:t,icon:e,value:i,action:LT,get disabled(){return CT.vectors<n||CT.paths<s||CT.maxContours<r}}}const jT=[NT("Unite","workflow:AddTo",0,2,0),NT("Subtract Front","workflow:SubtractFrontPath",4,2,0),NT("Subtract Back","workflow:SubtractBackPath",3,2,0),NT("Intersect","workflow:IntersectOverlap",1,2,0),NT("Exclude","workflow:ExcludeOverlap",2,2,0),null,NT("Merge","expr:path-merge","merge",2,0),NT("Split","expr:path-split","split",1,1,2),NT("Divide","workflow:DividePath","divide",1,0),NT("Outline","workflow:OutlinePath","outline",1,0)];class zT extends qx{#ir;constructor(){super(),this.#ir=document.createElement("es-action-menu"),this.#ir.items=jT,IC(this,[[eo,this.#fd],[Qc,this.#fd]])}render(){return this.#ir}firstUpdated(){this.#fd()}#fd=()=>{(function(){const{vectors:t,paths:e,maxContours:i}=CT;CT.vectors=CT.paths=CT.maxContours=0;for(const t of Th($m))CT.vectors++,t instanceof Jp&&(CT.paths++,CT.maxContours=Math.max(CT.maxContours,t.path?.contoursLength||0));return CT.vectors!==t||CT.paths!==e||CT.maxContours!==i})()&&this.#ir.requestUpdate()}}const PT=Symbol();function TT(){RS(),Zr(PT)}class AT extends qx{#pd;constructor(){super(),IC(this,[[eo,this.#qc],[PT,this.#qc]])}render(){return Px`
            <cc-action-group compact emphasized>
                <cc-action-button id="selected" title="Snapping" @click=${this.#gd}>
                    <cc-icon name="expr:snap"></cc-icon>
                </cc-action-button>
                <cc-action-button @click=${this.#Jc}>
                    <cc-css-icon name="ChevronDown"></cc-css-icon>
                </cc-action-button>
            </cc-action-group>
        `}firstUpdated(){this.#pd=this.shadowRoot.getElementById("selected"),this.#qc()}#qc=()=>{const t=this.#pd;t&&(t.selected=lk().enabled)};#gd(){const t=lk();t.enabled=!t.enabled,RS(),this.#qc()}#Jc(t){ky(this.items,t.target,"bottom-right")}}function DT(t){if(!i(t))return;if(t>0)return e=t,void al(Ja.middle,e/Ka);var e;let n=null;switch(t){case-2:n=oh()?.globalBounds.bounds;break;case-1:n=Wh();break;case 0:n=Dk()}ol(n)}function ET(t){DT(t.value)}function OT(t,e,i=0,n){const s={title:t,value:e,shortcut:n,action:ET};return i>0&&Object.defineProperty(s,"disabled",{get:()=>lh()<i}),s}const WT=["Fit",OT("Document",0,0,["ctrl","0"]),OT("Selection",-1,1,["ctrl","9"]),OT("Element",-2,1,["ctrl","8"]),"Level",OT("25%",.25),OT("50%",.5),OT("75%",.75),OT("100%",1),OT("200%",2),OT("400%",4)],RT={min:1,max:1e4,step:1,digits:0,unit:"%"};class BT extends qx{#md;constructor(){super(),IC(this,[[pl,this.#vd]])}firstUpdated(){this.#md=this.shadowRoot.getElementById("zoom")}#vd=t=>{this.#md.value=Math.round(100*t)};render(){return Px`
            <cc-action-group compact>
                <cc-number-input style="width: 72px" id="zoom" .formatter=${RT} value="100" @update=${this.#Sr} text-center></cc-number-input>
                <cc-action-button @click=${this.#Jc}>
                    <cc-css-icon name="ChevronDown"></cc-css-icon>
                </cc-action-button>
            </cc-action-group>
        `}#Sr(t){DT(t.detail/100)}#Jc(t){ky(WT,t.target,"bottom-right")}static{this.styles=Jy`:host{display: contents}`}}let UT=(()=>{let t,e=qx,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[db({type:Object,reflect:!1})],ab(this,null,t,{kind:"accessor",name:"menu",static:!1,private:!1,access:{has:t=>"menu"in t,get:t=>t.menu,set:(t,e)=>{t.menu=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}static{this.styles=[Mb]}#yd=lb(this,i,void 0);get menu(){return this.#yd}set menu(t){this.#yd=t}constructor(){super(),lb(this,n),IC(this,[eo,io,no])}render(){return Px`<cc-action-group gapless quiet size="m">
            <cc-action-button title="Menu" @click=${this.#xd}>
                <cc-icon name="workflow:ShowMenu"></cc-icon>
            </cc-action-button>
            <cc-action-button title="Open" @click=${this.#Bc}>
                <cc-icon name="workflow:FolderOpen"></cc-icon>
            </cc-action-button>
            <cc-action-button title="Save" .disabled=${Qo()} @click=${this.#bd}>
                <cc-icon name="workflow:SaveFloppy"></cc-icon>
            </cc-action-button>
            <cc-action-button title="Undo" .disabled=${!Zo()} @click=${FI}>
                <cc-icon name="workflow:Undo"></cc-icon>
            </cc-action-button>
            <cc-action-button title="Redo" .disabled=${!Yo()} @click=${VI}>
                <cc-icon name="workflow:Redo"></cc-icon>
            </cc-action-button>
        </cc-action-group>`}#xd(t){ky(this.menu,t.target,"bottom-left")}#bd(t){RI(t.altKey)}#Bc(){EI()}}})();class $T extends qx{#wd=null;#Md;#Sd=new Map;constructor(){super();const t=this.#kd();t.id="divider",this.#Md=[t,document.createElement("slot")],IC(this,[[gl,this.#_d]])}#kd(){const t=document.createElement("cc-divider");return t.vertical=!0,t}#_d=t=>{if(!t){if(!this.#wd)return;return this.#wd=null,void this.requestUpdate()}const e=t.name;if(!this.#Sd.has(e))if(this.ctx?.has(e)){const i=[];for(const n of this.ctx.get(e)){if(!n){i.push(this.#kd());continue}let e;"string"==typeof n?e=document.createElement(n):"function"==typeof n&&(e=n()),e&&(e.tool=t,i.push(e))}this.#Sd.set(e,i.length>0?i:null)}else this.#Sd.set(e,null);const i=this.#Sd.get(e);this.#wd!==i&&(this.#wd=i,this.requestUpdate())};render(){return this.#wd?[this.#wd,this.#Md]:this.#Md}static{this.styles=[Mb,Jy`
        :host {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 8px;
            padding: 0 8px;
        }

        cc-divider {
            height: 32px;
            margin: 0 auto;
        }

        #divider:first-child {
            display: none;
        }
    `]}}let FT=(()=>{let t,e=qx,i=[];return class extends e{static{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[db({type:Object,reflect:!1,noAccessor:!0})],ab(this,null,t,{kind:"setter",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,set:(t,e)=>{t.value=e}},metadata:n},null,i),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}static{this.styles=[Mb,Jy`:host{contain: strict}`]}#tr=lb(this,i);#Id;constructor(t){super(),this.#Id=t}get value(){return this.#tr}set value(t){const e=this.#Id?this.#Id(t):t;if(this.#tr!==e){const t=this.#tr;this.#tr=e,this.onChange(e,t)}}find(t){return this.shadowRoot.querySelector(t)}}})();class VT{#Cd;constructor(t,e){this.updaters=[];for(let e of t)e instanceof $h&&(e=new HT(e)),this.updaters.push(e);this.#Cd=e}beforeUpdate(t){this.#Cd?.beforeUpdate(t)}afterUpdate(t,e){this.#Cd?.afterUpdate(t,e)}isValidTarget(t){for(const e of this.updaters)if(!e.isValidTarget(t))return!1;return!0}getValue(t){const e=[];for(const i of this.updaters)e.push(i.getValue(t));return e}setValue(t,e){const i=this.updaters,n=i.length;let s=!1;for(let r=0;r<n;r++)i[r].setValue(t,e[r])&&(s=!0);return s}sameValue(t,e){const i=this.updaters,n=i.length;for(let s=0;s<n;s++)if(!i[s].sameValue(t,e[s]))return!1;return!0}}class HT{#Cd;constructor(t,e){this.property=t,this.#Cd=e}beforeUpdate(t){this.#Cd?.beforeUpdate(t)}afterUpdate(t,e){this.#Cd?.afterUpdate(t,e)}isValidTarget(t){return t instanceof Vp?t.hasValue(this.property):bd(t,this.property)}getValue(t){return t instanceof Vp?t.getValue(this.property):this.property.getValue(t)}setValue(t,e){return t instanceof Vp?(t.setValue(this.property,e),!1):jd(t,this.property,e)}sameValue(t,e){return t instanceof Vp?this.property.handler.sameValue(t.getValue(this.property),e):this.property.sameValue(t,e)}}let GT=!1,ZT=-1,YT=1,QT=null,JT=null;const qT=new Map;let KT;function XT(t){return ch()?iA([$v],t):iA(ah(),t)}function tA(t,e){return ch()?eA([$v],t,e):eA(ah(),t,e)}function eA(t,e,i){nA();const n=function(t){return t instanceof $h?(oA.property=t,oA):"function"==typeof t?{isValidTarget:aA,setValue:t}:t}(e);if(!n)return!1;let s=!1;ZT=YT++,JT=t,n.beforeUpdate?.(i);for(const t of JT)n.isValidTarget(t)&&n.setValue(t,i)&&(s=!0);return n.afterUpdate?.(s,i),JT=null,ZT=-1,!!s&&(rA(),!0)}function iA(t,e){if(nA(),!t||!t.length)return 0;const i=function(t){return t instanceof $h?(oA.property=t,oA):t}(e);return i&&function(t,e){if(!e.isValidTarget(t[0]))return!1;qT.clear(),qT.set(t[0],e.getValue(t[0]));for(let i=1;i<t.length;i++)e.isValidTarget(t[i])?qT.set(t[i],e.getValue(t[i])):(t.splice(i,1),i--);return JT=t,QT=e,!0}(t,i)?ZT=YT++:0}function nA(t){if(ZT<0||t&&t!==ZT)return!1;let e=KT?.hasChanged();return!e&&GT&&(e=!function(){for(const[t,e]of qT)if(!QT.sameValue(t,e))return!1;return!0}()),qT.clear(),JT=QT=null,GT=!1,ZT=-1,!!e&&(rA(),!0)}function sA(t,e){if(ZT<0||e&&e!==ZT)return!1;let i=!1;const n=QT;n.beforeUpdate?.(t);for(const e of JT)n.setValue(e,t)&&(i=!0,GT=!0);return n.afterUpdate?.(i,t),i}function rA(){$v.update(oh()),Jo()}const oA=new HT(null);function aA(){return!0}const lA=Fb(class extends Vb{constructor(t){if(super(t),6!==t.type)throw new Error("editStream directive can be used only on elements!")}#Ld=null;#Nd=null;#jd=null;#zd=null;#fe=null;update(t,[e,i,n]){return this.#Ld&&this.#Ld===t.element?e==this.#Nd&&kt(this.#jd,i)&&n==this.#zd||(this.#Nd=e,this.#jd=i,this.#zd=n,this.#Pd()):(this.#Td(this.#Ld),this.#Ld=t.element,this.#Ad(this.#Ld),this.#Nd=e,this.#jd=i,this.#zd=n),Tx}render(t,e=null,i=null){return Tx}#Ad(t){t&&(t.addEventListener("start",this.#Dd),t.addEventListener("update",this.#vo),t.addEventListener("end",this.#Ed))}#Td(t){t&&(t.removeEventListener("start",this.#Dd),t.removeEventListener("update",this.#vo),t.removeEventListener("end",this.#Ed),this.#Pd())}#Pd(){nA(this.#fe),this.#fe=null}#Dd=t=>{if(t.stopPropagation(),this.#jd){let t;t="function"==typeof this.#jd?this.#jd():this.#jd,this.#fe=iA(Nt(t)?t:[t],this.#Nd)}else this.#fe=XT(this.#Nd)};#Ed=t=>{t.stopPropagation(),this.#Pd()};#vo=t=>{t.stopPropagation(),sA(this.#zd?this.#zd(t.detail):t.detail,this.#fe)}});function cA(t,e){return"string"==typeof t?e.querySelector(t):t}function uA(t,e){const i=cA(t.link,e);if(!i)return!1;let n=null;function s(){nA(n),n=null}let r=null;i.addEventListener("change",(function(){r=null,s()}));const o=Symbol();let a=null;const l=[];function c(e){e.stopPropagation(),r=e.detail,n=i.checked?t.resolver?iA(t.resolver(),a):XT(a):t.resolver?iA(t.resolver(),e.target[o]):XT(e.target[o])}function u(t){t.stopPropagation();const e=t.detail;if(!i.checked)return void sA(e,n);const s=new Array(l.length);if(0===e||0===r){const t=0===e?0:e;s.fill(t);for(const e of l)e.value=t}else{const i=r?e/r:1;for(let n=0;n<l.length;n++){const r=l[n];r===t.target?s[n]=e:(r.value*=i,s[n]=r.value)}}r=e,sA(s,n)}function h(t){t.stopPropagation(),r=null,s()}const d=[];for(const i of t.properties){const n=i[0]instanceof $h?new HT(i[0],t.hooks):i[0],s=cA(i[1],e);s[o]=n,s.addEventListener("start",c),s.addEventListener("update",u),s.addEventListener("end",h),d.push(n),l.push(s)}return a=new VT(d,t.hooks),!0}function hA(t,e){const i=cA(t.x,e),n=cA(t.y,e);if(!i||!n)return!1;let s=null,r=null;function o(){nA(r),r=null}let a=t.link?cA(t.link,e):null;function l(e){e.stopPropagation(),s=e.detail,r=t.resolver?iA(t.resolver(),t.property):XT(t.property)}function c(t){t.stopPropagation();const e=t.detail;if(a?.checked){const r="x"==(t.target===i?"x":"y")?n:i;0===e?r.value=0:0===s?r.value=e:r.value*=e/(s||1),s=e}sA(new ce(i.value,n.value),r)}function u(t){t.stopPropagation(),s=null,o()}return a&&a.addEventListener("change",(()=>{s=null,o()})),i.addEventListener("start",l),i.addEventListener("update",c),i.addEventListener("end",u),n.addEventListener("start",l),n.addEventListener("update",c),n.addEventListener("end",u),!0}class dA extends FT{#Od;#Wd=null;constructor(t){super(),this.#Od=t,IC(this,[[Md,this.#Rd]])}get isGlobal(){return this.value instanceof Vp}#Rd=t=>{if(!this.#gr)return;if(Array.isArray(this.#Od)){let e=!1;for(const i of this.#Od)if(t.has(i)){e=!0;break}if(!e)return}else if(!t.has(this.#Od))return;const e=this.value;e instanceof Vp?this.onGlobal(e):this.onValue(e)};#gr=!1;firstUpdated(){this.#gr||(this.init(),this.#gr=!0,this.onChange(this.value))}addLinkedProperties(t){if(!this.#gr)for(const e of t)"detached"===e.mode?uA(e,this.shadowRoot):"point"===e.mode&&hA(e,this.shadowRoot)}connectedCallback(){super.connectedCallback(),this.onChange(this.value)}onChange(t){if(this.#gr&&null!=t){const e=t instanceof Vp;this.#Wd!==e&&(this.#Wd=e,this.onGlobalStatusChanged(e)),e?this.onGlobal(t):this.onValue(t)}}}class fA extends dA{constructor(){super(6)}onGlobal(t){}onGlobalStatusChanged(t){}}function pA(...t){return Jy`${Qy(t.join("\n"))}`}function gA(t,e){return`:host-context([kf~="${e}"]) ${t} {color: var(--kf-active-color)}`}function mA(t,e){return`:host-context([kf~="${e}"]) :not([disabled]) > ${t} {color: var(--kf-active-color)}`}const vA=Ep,yA={min:0,max:2,step:.01};class xA extends fA{#Vi;#Hi;#Gi;#Zi;#Yi;#Qi;#Ji;init(){this.#Vi=this.find("#brightness"),this.#Hi=this.find("#contrast"),this.#Gi=this.find("#saturate"),this.#Zi=this.find("#hue-rotate"),this.#Yi=this.find("#invert"),this.#Qi=this.find("#grayscale"),this.#Ji=this.find("#sepia")}render(){return Px`
<cc-flex-col>
    <cc-slider-input id="brightness" .constraint=${yA} .formatter=${rM} pivot="1" ${lA(vA.brightness)} flex filled>
        Brightness
    </cc-slider-input>
    <cc-slider-input id="contrast" .constraint=${yA} .formatter=${rM} pivot="1" ${lA(vA.contrast)} flex filled>
        Contrast
    </cc-slider-input>
    <cc-slider-input id="saturate" .constraint=${yA} .formatter=${rM} pivot="1" ${lA(vA.saturate)} flex filled>
        Saturate
    </cc-slider-input>
    <cc-slider-input id="hue-rotate" .constraint=${{min:-360,max:360,step:1}} .formatter=${cM} pivot="0" ${lA(vA.hueRotate)} flex filled>
        Hue rotate
    </cc-slider-input>
    <cc-slider-input id="invert" .constraint=${nM} .formatter=${oM} ${lA(vA.invert)} flex filled>
        Invert
    </cc-slider-input>
    <cc-slider-input id="grayscale" .constraint=${nM} .formatter=${oM} ${lA(vA.grayscale)} flex filled>
        Grayscale
    </cc-slider-input>
    <cc-slider-input id="sepia" .constraint=${nM} .formatter=${oM} ${lA(vA.sepia)} flex filled>
        Sepia
    </cc-slider-input>
</cc-flex-col>`}onValue(t){this.#Vi.value=t.brightness,this.#Hi.value=t.contrast,this.#Gi.value=t.saturate,this.#Zi.value=t.hueRotate,this.#Yi.value=t.invert,this.#Qi.value=t.grayscale,this.#Ji.value=t.sepia}static get styles(){return[...super.styles,pA(gA("#brightness",vA.brightness.id),gA("#contrast",vA.contrast.id),gA("#saturate",vA.saturate.id),gA("#hue-rotate",vA.hueRotate.id),gA("#invert",vA.invert.id),gA("#grayscale",vA.grayscale.id),gA("#sepia",vA.sepia.id))]}}const bA=Lp,wA={...aM,max:1e3};class MA extends fA{#qi;init(){this.#qi=this.find("#blur")}render(){return Px`
        <cc-flex-col>
            <cc-flex-row>
                <cc-icon name="workflow:Blur" class="is-radius" padded right-gap></cc-icon>
                <cc-number-input id="blur" title="Blur amount" ${lA(bA.radius)} .formatter=${wA} padded flex></cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>`}onValue(t){this.#qi.value=t.radius}static get styles(){return[...super.styles,pA((t=bA.radius.id,`:host-context([kf~="${t}"]) .is-radius:not([disabled]) {color: var(--kf-active-color)}`))];var t}}const SA=Bp,kA={...aM,max:100};class _A extends fA{#Bd;#Ud;#qi;#Ki;init(){this.#Bd=this.find("#offset-x"),this.#Ud=this.find("#offset-y"),this.#qi=this.find("#blur"),this.#Ki=this.find("#color"),this.addLinkedProperties([{mode:"point",x:this.#Bd,y:this.#Ud,property:SA.offset,link:this.find("#link-offset")}])}render(){return Px`
        <cc-flex-col>
            <cc-flex-row>
                <es-color-control
                    id="color"
                    text
                    thumbnail
                    .eyeDropper=${!1}
                    ${lA(SA.color)}
                    flex
                ></es-color-control>
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="workflow:Move" class="is-offset" padded right-gap></cc-icon>
                <cc-number-input id="offset-x" title="Offset X" flex>
                    <cc-icon name="expr:x" class="is-offset" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="offset-y" title="Offset Y" flex>
                    <cc-icon name="expr:y" class="is-offset" slot="before"></cc-icon>
                </cc-number-input>
                <cc-icon-toggle id="link-offset" title="Keep proportions" left-gap quiet emphasized></cc-icon-toggle>
            </cc-flex-row>
            <cc-flex-row>
                <div fixed-32></div>
                <cc-number-input id="blur" title="Blur amount" ${lA(SA.blur)} .formatter=${kA} flex>
                    <cc-icon name="workflow:Blur" class="is-blur" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>`}onValue(t){this.#Bd.value=t.offset.x,this.#Ud.value=t.offset.y,this.#qi.value=t.blur,this.#Ki.value=t.color}static get styles(){return[...super.styles,pA(gA(".is-offset",SA.offset.id),gA(".is-blur",SA.blur.id))]}}const IA=[{title:"Normal",value:11},null,{title:"Color",value:0},{title:"Color burn",value:1},{title:"Color dodge",value:2},null,{title:"Darken",value:3},{title:"Lighten",value:8},null,{title:"Difference",value:4},{title:"Exclusion",value:5},{title:"Multiply",value:10},null,{title:"Soft light",value:15},{title:"Hard light",value:6},null,{title:"Hue",value:7},{title:"Saturation",value:13},{title:"Luminosity",value:9},null,{title:"Overlay",value:12},{title:"Screen",value:14}],CA=Dd;class LA extends dA{constructor(){super(5)}#Zt;#$d;#Re;init(){this.#Zt=this.find("#opacity"),this.#$d=this.find("#blend"),this.#Re=this.find("#isolate")}render(){return Px`<cc-flex-col>
    <cc-flex-row>
        <cc-icon name="workflow:Transparency" right-gap padded></cc-icon>
        <cc-slider-input id="opacity" ${lA(CA.opacity)} .constraint=${nM} .formatter=${nM} flex filled inline hide-label></cc-slider-input>
    </cc-flex-row>
    <cc-flex-row>
        <cc-icon name="workflow:Looks" right-gap padded></cc-icon>
        <cc-picker id="blend" title="Blend mode" .items=${IA} @change=${this.#Fd} flex></cc-picker>
        <cc-action-button id="isolate" title="Isolate" left-gap quiet emphasized @click=${this.#Vd}>
            <cc-icon name="workflow:Individual"></cc-icon>
        </cc-action-button>
    </cc-flex-row>
</cc-flex-col>`}#Vd(){const t=this.#Re;t.selected=!t.selected,tA(CA.isolate,t.selected)}#Fd(t){tA(CA.blend,t.detail)}onGlobal(t){this.#Hd(t,!1)}onGlobalStatusChanged(t){}onValue(t){this.#Hd(t,t.supportsChildren)}#Hd(t,e){this.#Zt.value=t.opacity,this.#$d.value=t.blend;const i=this.#Re;i.disabled=!e,i.selected=1==e&&t.isolate}static get styles(){return[...super.styles,pA(gA("#opacity",CA.opacity.id))]}}class NA extends qx{static{this.styles=[Mb,Jy`:host{contain: strict}`]}#di;setup(t){this.#di=new Map(t)}#gr=!1;firstUpdated(){this.init(),this.#gr=!0,Qv(this.#di)}connectedCallback(){super.connectedCallback(),this.#gr&&Qv(this.#di)}disconnectedCallback(){this.#gr&&function(t){let e=!1;for(const[i,n]of t){if(!Hv.has(i))continue;const t=Hv.get(i);t.delete(n),t.size||(Yv.delete(i),Hv.delete(i),Gv.delete(i),e=!0)}if(e){Zv.clear();for(const t of Hv.keys())for(const e of t.groups)Zv.add(e)}}(this.#di),super.disconnectedCallback()}find(t){return this.shadowRoot.querySelector(t)}}const jA=[{title:"Normal",value:11},null,{title:"Color",value:0},{title:"Color burn",value:1},{title:"Color dodge",value:2},null,{title:"Darken",value:3},{title:"Lighten",value:8},null,{title:"Difference",value:4},{title:"Exclusion",value:5},{title:"Multiply",value:10},null,{title:"Soft light",value:15},{title:"Hard light",value:6},null,{title:"Hue",value:7},{title:"Saturation",value:13},{title:"Luminosity",value:9},null,{title:"Overlay",value:12},{title:"Screen",value:14}],zA=Dd;class PA extends NA{constructor(){super(),this.setup([[zA.blend,this.#Gd],[zA.isolate,this.#Zd],[zA.opacity,this.#Yd]])}#Zt;#$d;#Re;init(){this.#Zt=this.find("#opacity"),this.#$d=this.find("#blend"),this.#Re=this.find("#isolate")}#Yd=(t,e)=>{this.#Zt.indeterminate=e,this.#Zt.value=t};#Gd=t=>{this.#$d.value=t};#Zd=(t,e,i)=>{this.#Re.disabled=i,this.#Re.selected=!e&&t};render(){return Px`<cc-flex-col>
    <cc-flex-row>
        <cc-icon name="workflow:Transparency" right-gap padded></cc-icon>
        <cc-slider-input id="opacity" ${lA(zA.opacity)} .constraint=${nM} .formatter=${nM} flex filled inline hide-label></cc-slider-input>
    </cc-flex-row>
    <cc-flex-row>
        <cc-icon name="workflow:Looks" right-gap padded></cc-icon>
        <cc-picker id="blend" title="Blend mode" .items=${jA} @change=${this.#Fd} flex></cc-picker>
        <cc-action-button id="isolate" title="Isolate" left-gap quiet emphasized @click=${this.#Vd}>
            <cc-icon name="workflow:Individual"></cc-icon>
        </cc-action-button>
    </cc-flex-row>
</cc-flex-col>`}#Vd(){const t=this.#Re;t.selected=!t.selected,tA(zA.isolate,t.selected)}#Fd(t){tA(zA.blend,t.detail)}static get styles(){return[...super.styles,pA(gA("#opacity",zA.opacity.id))]}}let TA=(()=>{let t,e=qx,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[db({type:Object})],ab(this,null,t,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#is=lb(this,i,void 0);get value(){return this.#is}set value(t){this.#is=t}render(){return this.value?.render?.()??Ax}constructor(){super(...arguments),lb(this,n)}}})();const AA=[{title:"Cap: Butt",icon:"expr:cap-butt",value:0},{title:"Cap: Square",icon:"expr:cap-square",value:2},{title:"Cap: Round",icon:"expr:cap-round",value:1}],DA=[{title:"Join: Miter",icon:"expr:join-miter",value:0},{title:"Join: Bevel",icon:"expr:join-bevel",value:2},{title:"Join: Round",icon:"expr:join-round",value:1}],EA=[{title:"Stroke on top",icon:"expr:stroke-ontop",value:0},{title:"Stroke below fill",icon:"expr:stroke-below",value:2}],OA=ff,WA={min:0,max:1e6,step:.1,stepScale:10,digits:1,unit:""},RA={step:.01,stepScale:100,digits:2,unit:""},BA={parse:t=>t?u(t):[],format:t=>t?.length?t.map((t=>h(t<0?-t:t))).join(", "):"",equals:kt};class UA extends dA{constructor(){super(3)}#Qd;#z;#P;#ei;#T;#Jd;#qd;#Kd;init(){this.#Qd=this.find("#line-width"),this.#z=this.find("#line-cap"),this.#P=this.find("#line-join"),this.#ei=this.find("#paint-order"),this.#T=this.find("#miter-limit"),this.#Jd=this.find("#dash-array"),this.#qd=this.find("#dash-offset"),this.#Kd=this.find("#dash-len")}render(){return Px`<cc-flex-col>
    <cc-flex-row spaced>
        <cc-number-input id="line-width" title="Line width" ${lA(OA.lineWidth)} .formatter=${WA} style="width: calc((100% - 6 * var(--flex-gap)) / 2);">
            <cc-icon class="is-line-width" slot="before" name="workflow:StrokeWidth"></cc-icon>
        </cc-number-input>
        <cc-icon-switch id="paint-order" .items=${EA} @change=${this.#Xd} compact emphasized></cc-icon-switch>
    </cc-flex-row>
    <cc-flex-row>
        <cc-text-input id="dash-array" title="Dash array" placeholder="dash, gap, ..." .formatter=${BA} @change=${this.#tf} flex>
            <cc-icon class="is-dash-array" slot="before" name="expr:dash-gap"></cc-icon>
        </cc-text-input>
    </cc-flex-row>
    <cc-flex-row>
        <cc-number-input id="dash-offset" title="Dash offset" ${lA(OA.dashOffset)} .formatter=${RA} flex>
            <cc-icon class="is-dash-offset" slot="before" name="expr:dash-offset"></cc-icon>
        </cc-number-input>
        <cc-number-input id="dash-len" title="Path length" ${lA(OA.dashPathLength)} .formatter=${WA} flex>
            <cc-icon slot="before" name="expr:ruler"></cc-icon>
        </cc-number-input>
        <cc-icon style="cursor: pointer; pointer-events: all" name="workflow:HelpOutline" title="Simplify your dash calculations by using a custom path length.
For example, set it to 100 and use percents for dash array and dash offset, or set it to 360 and use degrees.
A value of 0 disables the custom path length and the original path length is used instead.
You cannot use a custom path length on text elements." padded left-gap></cc-icon>
    </cc-flex-row>
    <cc-flex-row>
        <cc-icon-switch id="line-cap" .items=${AA} @change=${this.#ef} compact emphasized></cc-icon-switch>
        <cc-icon-switch id="line-join" .items=${DA} @change=${this.#if} compact emphasized></cc-icon-switch>
        <cc-number-input id="miter-limit" title="Miter limit" ${lA(OA.miterLimit)} .formatter=${WA} flex>
            <cc-icon slot="before" name="expr:miter"></cc-icon>
        </cc-number-input>
        <div fixed-32></div>
    </cc-flex-row>
</cc-flex-col>`}#ef(t){tA(OA.lineCap,t.detail)}#if(t){tA(OA.lineJoin,t.detail)}#Xd(t){tA(OA.paintOrder,t.detail)}#tf(t){tA(OA.dashArray,t.detail)}onGlobal(t){this.#Hd(t)}onValue(t){this.#Hd(t)}#Hd(t){this.#Qd.value=t.strokeLineWidth,this.#T.value=t.strokeMiterLimit,this.#P.value=t.strokeLineJoin,this.#z.value=t.strokeLineCap,this.#ei.value=t.paintOrder,this.#qd.value=t.strokeDashOffset,this.#Kd.value=t.strokeDashPathLength,this.#Kd.disabled=t instanceof Sg||t instanceof _g,this.#Jd.value=t.strokeDashArray??[]}onGlobalStatusChanged(t){}static get styles(){return[...super.styles,pA(mA(".is-line-width",OA.lineWidth.id),mA(".is-dash-array",OA.dashArray.id),mA(".is-dash-offset",OA.dashOffset.id))]}}class $A{#nf=null;beforeUpdate(t){if(this.#nf=null,!ch()){const t=Ll;t instanceof DN&&(this.#nf=t)}}afterUpdate(t){t&&this.#nf&&this.#nf.refreshEditor()}}class FA extends HT{constructor(t){super(t,new $A)}}class VA extends VT{constructor(t){super(t,new $A)}}const HA=Df,GA=Jy`
#font-family {
    justify-content: space-between;
    padding-left: 7px;
}
#font-family-value {
    flex: 1;
}
#font-family.not-found {
    color: var(--error-color);
    border: 1px solid var(--error-color);
}
`,ZA={min:1,max:1e4,step:.1,stepScale:10,digits:1,unit:""},YA={min:.1,max:1e4,step:.1,stepScale:10,digits:1,unit:""},QA=[];class JA extends dA{constructor(){super(7)}#sf=new FA(HA.fontId);#rf;#of;#af;#lf;#cf;#uf;#hf;#Yn;#df=null;init(){this.#rf=this.find("#font-family"),this.#of=this.find("#font-family-value"),this.#af=this.find("#font-style"),this.#lf=this.find("#font-size"),this.#cf=this.find("#letter-spacing"),this.#uf=this.find("#line-height"),this.#hf=this.find("#baseline-shift"),this.#Yn=this.find("#popover")}render(){return Px`
        <cc-flex-col>
            <cc-flex-row>
                <cc-action-button id="font-family" title="Font family" @click=${this.#ff} input-face flex>
                    <div id="font-family-value" class="text-ellipsis">-</div>
                    <cc-css-icon name="ChevronDown"></cc-css-icon>
                </cc-action-button>
            </cc-flex-row>
            <cc-flex-row>
                <cc-number-input id="font-size" title="Font size" ${lA(new FA(HA.fontSize))} .formatter=${ZA} fluid-3>
                    <cc-icon class="is-font-size" slot="before" name="workflow:TextSize"></cc-icon>
                </cc-number-input>
                <cc-picker id="font-style" title="Font style" @change=${this.#pf} lazy flex></cc-picker>
            </cc-flex-row>
            <cc-flex-row>
                <cc-number-input id="letter-spacing" title="Letter spacing" ${lA(new FA(HA.letterSpacing))} .formatter=${aM} flex>
                    <cc-icon class="is-letter-spacing" slot="before" name="workflow:TextTracking"></cc-icon>
                </cc-number-input>
                <cc-number-input id="baseline-shift" title="Baseline shift" ${lA(new FA(HA.baselineShift))} flex>
                    <cc-icon class="is-baseline-shift" slot="before" name="workflow:TextBaselineShift"></cc-icon>
                </cc-number-input>
                <cc-number-input id="line-height" title="Line height" ${lA(new FA(HA.lineHeight))} .formatter=${YA} flex>
                    <cc-icon class="is-line-height" slot="before" name="workflow:LineHeight"></cc-icon>
                </cc-number-input>
            </cc-flex-row>
        </cc-flex-col>
        <cc-popover id="popover"></cc-popover>
`}async#ff(t){this.#df||(this.#df=document.createElement("es-font-select"));const e=this.value.fontId;this.#df.value=Gs(e)?.postscriptName||null,this.#Yn.appendChild(this.#df);const i=await this.#Yn.open(this.#rf,0,.5,-1,0,-12,0);this.#df.remove(),null!=i&&e!==$s(i)&&(await this.#gf(i)||Sy("Failed to load font data","error"))}async#pf(t){await this.#gf(t.detail)||Sy("Failed to load font data","error")}#mf=new Map;#vf(t){const e=Gs(t)?.family;if(!e)return QA;const i=this.#mf;if(i.has(e))return i.get(e);const n=function(t){if(Bs.has(t))return Bs.get(t).slice();const e=[];t=t.toLowerCase();for(const i of As.values())i.family.toLowerCase()===t&&e.push(i);return e}(e);if(!n?.length)return i.set(e,QA),QA;const s=n.map((t=>({title:t.style,value:t.postscriptName})));return i.set(e,s),s}async#gf(t){return!(await Zs(t)).includes(t)&&(this.#yf(t),tA(this.#sf,$s(t)),!0)}#yf(t){const e=this.#af;if(t){const i=Gs(t);if(i){this.#rf.classList.remove("not-found"),this.#of.textContent=i.family;const e=this.#vf(t);this.#af.items=e,this.#af.value=i.postscriptName,this.#af.disabled=e.length<2}else this.#rf.classList.add("not-found"),this.#of.textContent=t,e.items=QA,e.value=void 0,e.disabled=!0}else this.#rf.classList.add("not-found"),this.#of.textContent="-",e.items=QA,e.value=void 0,e.disabled=!0}#Hd(t){this.#yf(t.fontId),this.#lf.value=t.fontSize,this.#cf.value=t.letterSpacing,this.#uf.value=t.lineHeight,this.#hf.value=t.baselineShift}onGlobal(t){this.#Hd(t)}onGlobalStatusChanged(t){}onValue(t){this.#Hd(t)}static get styles(){return[...super.styles,GA,Cb,pA(gA(".is-letter-spacing",HA.letterSpacing.id),gA(".is-word-spacing",HA.wordSpacing.id),gA(".is-line-height",HA.lineHeight.id),gA(".is-baseline-shift",HA.baselineShift.id))]}}const qA=Mf,KA=[{title:"Align: Start",icon:"workflow:TextAlignLeft",value:0},{title:"Align: Center",icon:"workflow:TextAlignCenter",value:2},{title:"Align: End",icon:"workflow:TextAlignRight",value:1}],XA=[!0,!0],tD=[!1,!0],eD=[!0,!1],iD=[!1,!1],nD=[{title:"Auto size",icon:"expr:textbox-auto-size",value:XA},{title:"Fixed width",icon:"expr:textbox-auto-height",value:tD},{title:"Fixed height",icon:"expr:textbox-auto-width",value:eD},{title:"Fixed size",icon:"expr:textbox-fixed-size",value:iD}];class sD extends dA{constructor(){super(4)}#xf;#j;#X;#gs;#E;#bf=new VA([qA.autoWidth,qA.autoHeight]);#wf=new FA(qA.align);#Mf=new FA(qA.valign);init(){this.#j=this.find("#width"),this.#X=this.find("#height"),this.#xf=this.find("#link-size"),this.#gs=this.find("#box"),this.#E=this.find("#align"),this.addLinkedProperties([{mode:"detached",properties:[[qA.width,this.#j],[qA.height,this.#X]],link:this.#xf,hooks:new $A}])}render(){return Px`<cc-flex-col>
            <cc-flex-row>
                <cc-icon name="expr:textbox" padded></cc-icon>
                <cc-number-input id="width" title="Width" .formatter=${aM} flex>
                    <cc-icon name="expr:w" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="height" title="Height" .formatter=${aM} flex>
                    <cc-icon name="expr:h" slot="before"></cc-icon>
                </cc-number-input>
                <cc-icon-toggle id="link-size" title="Keep proportions" quiet emphasized></cc-icon-toggle>
            </cc-flex-row>
            <cc-flex-row>
                <div fixed-24></div>
                <cc-icon-switch id="box" @change=${this.#Sf} .items=${nD} compact emphasized></cc-icon-switch>
                <cc-icon-switch id="align" @change=${this.#kf} .items=${KA} compact emphasized></cc-icon-switch>
            </cc-flex-row>
    </cc-flex-col>`}#Sf(t){tA(this.#bf,t.detail)&&this.onChange(this.value)}#_f(t){tA(this.#Mf,t.detail)}#kf(t){tA(this.#wf,t.detail)}onValue(t){const e=this.#j;e.value=t.width,e.disabled=t.autoWidth,e.indeterminate=t.autoWidth;const i=this.#X;var n,s;i.value=t.height,i.disabled=t.autoHeight,i.indeterminate=t.autoHeight,this.#gs.value=(n=t.autoWidth,s=t.autoHeight,n?s?XA:eD:s?tD:iD),t.autoWidth||t.autoHeight?(this.#xf.disabled=!0,this.#xf.checked=!1):this.#xf.disabled=!1,this.#E.value=t.align}onGlobalStatusChanged(t){this.#gs.disabled=t;const e=this.#j,i=this.#X;e.indeterminate=i.indeterminate=t,e.disabled=i.disabled=t,this.#xf.disabled=!0}onGlobal(t){this.#E.value=t.paragraphAlign}}const rD=Bf,oD=[{title:"Luminance",value:!1},{title:"Alpha",value:!0}];class aD extends dA{constructor(){super(0)}#If;init(){this.#If=this.find("#mask-type")}render(){return Px`<cc-flex-col>
        <cc-flex-row>
            <cc-icon name="workflow:RangeMask" right-gap padded></cc-icon>
            <cc-picker id="mask-type" title="Mask type" .items=${oD} @change=${this.#Cf} flex></cc-picker>
        </cc-flex-row>
</cc-flex-col>`}#Cf(t){tA(rD.isAlphaMask,t.detail)}onGlobal(){}onGlobalStatusChanged(){}onValue(t){this.#If.value=t.isAlphaMask}}const lD=new Map([[iS,"auto"],[eS,"fixed"],[sS,"isometric"],[oS,"pixel"]]),cD=[{title:"Automatic",value:"auto"},{title:"Fixed",value:"fixed"},{title:"Pixel",value:"pixel"},{title:"Isometric",value:"isometric"}],uD=new Map([["auto",function(t){return new iS(t instanceof tS?t.divisions:{x:10,y:10},t?.color)}],["fixed",function(t){return new eS(new di(100,100),t instanceof tS?t.divisions:{x:5,y:5},t?.color)}],["isometric",function(t){return new sS(t instanceof eS?t.width:100,null,!0,t?.color)}],["pixel",function(t){return new oS(t?.color)}]]),hD={min:1,max:25,step:1,digits:0,unit:""},dD={...aM,min:1},fD={...cM,min:5,max:85};class pD extends Cw{#Yl;#Lf;#Nf;#jf;#j;#X;#xa;#ot;#ba;#Ki;#cd=new Map;#zf=gD("color",XM);#Pf=gD("divX",tS);#Tf=gD("divY",tS);#Af=gD("width",eS);#Df=gD("height",eS);#Ef=gD("width",sS);#Of=gD("angle",sS);#Wf=gD("complex",sS);constructor(){super();const t=this.#cd;t.set("auto",this.#Rf),t.set("fixed",this.#Bf),t.set("isometric",this.#Uf)}firstUpdated(){this.#Yl=this.find("#container"),this.#Lf=this.find("#type"),this.#j=this.find("#width"),this.#X=this.find("#height"),this.#Nf=this.find("#div-x"),this.#jf=this.find("#div-y"),this.#xa=this.find("#size"),this.#ot=this.find("#angle"),this.#ba=this.find("#complex"),this.#Ki=this.find("#color"),super.firstUpdated()}refresh(){const t=vk(),e=lD.get(t.constructor);this.#Lf.value=e,this.#Yl.dataset.type=e,this.#Ki.value=t.color,this.#cd.get(e)?.(t)}#Rf=t=>{this.#$f(t)};#Bf=t=>{const e=t.size;this.#j.value=e.width,this.#X.value=e.height,this.#$f(t)};#$f=t=>{this.#Nf.value=t.divisions.x,this.#jf.value=t.divisions.y};#Uf=t=>{this.#xa.value=t.width,this.#ot.value=t.angle,this.#ba.checked=t.complex};render(){return Px`<cc-flex-col id="container" data-type=${"auto"}>
            <cc-flex-row>
                <es-color-control
                    id="color" title="Grid color"
                    ${lA(this.#zf,vk)}
                    .value=${se.gray} .alpha=${!1}
                    .formatter=${!1} .eyeDropper=${!1}
                    text thumbnail flex></es-color-control>
            </cc-flex-row>
            <cc-flex-row>
                <cc-picker id="type" .items=${cD} .value=${"auto"} @change=${this.#Ff} flex></cc-picker>
            </cc-flex-row>
            <cc-flex-row data-show=${"fixed"}>
                <cc-icon name="expr:size" right-gap padded></cc-icon>
                <cc-number-input id="width" title="Width" ${lA(this.#Af,vk)} .formatter=${dD} flex>
                    <cc-icon name="expr:w" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="height" title="Height" ${lA(this.#Df,vk)} .formatter=${dD} flex>
                    <cc-icon name="expr:h" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
            <cc-flex-row data-show=${"auto fixed"}>
                <cc-icon name="expr:grid-toggle" right-gap padded></cc-icon>
                <cc-number-input id="div-x" title="X divisions" ${lA(this.#Pf,vk)} .formatter=${hD} flex>
                    <cc-icon name="expr:x" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="div-y" title="Y divisions" ${lA(this.#Tf,vk)} .formatter=${hD} flex>
                    <cc-icon name="expr:y" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
            <cc-flex-row data-show=${"isometric"}>
                <cc-icon-toggle id="complex" title="Show lines" @change=${this.#Vf} on-icon="expr:guidelines-toggle" off-icon="expr:guidelines-toggle" .cssIcon=${!1} right-gap quiet emphasized></cc-icon-toggle>
                <cc-number-input id="size" title="Size" ${lA(this.#Ef,vk)} .formatter=${dD} flex>
                    <cc-icon name="expr:size" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="angle" title="Angle" ${lA(this.#Of,vk)} .formatter=${fD} flex>
                    <cc-icon name="expr:angle" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>`}#Ff(t){uC(uD.get(t.detail)(pk))}#Vf(t){eA([vk()],this.#Wf,t.detail)}static{this.styles=Jy`
[data-type="auto"] [data-show]:not([data-show~="auto"]),
[data-type="fixed"] [data-show]:not([data-show~="fixed"]),
[data-type="pixel"] [data-show]:not([data-show~="pixel"]),
[data-type="isometric"] [data-show]:not([data-show~="isometric"]) {display: none}
`}}function gD(t,e,i){const n=function(t,e,i){return{getValue:e=>e[t],isValidTarget:t=>t instanceof e,setValue:(e,n)=>!(i?i(e[t],n):e[t]===n)&&(e[t]=n,!0),sameValue:(e,n)=>i?i(e[t],n):e[t]===n}}(t,e,i?kt:null);return n.afterUpdate=mD,n}function mD(t){t&&xk()&&Rl()}function vD(t){const e=new Map;return function(i){if(e.has(i))return e.get(i);let n=null;if(t.has(i)){const e=t.get(i);n="string"==typeof e?document.createElement(e):e(i)}return e.set(i,n),n}}function yD(t){return"string"==typeof t?document.createElement(t):t()}function xD(t,e="es-brush-input"){return new class extends Iw{constructor(){super("paint")}isVisible(t){return ID(t)||t instanceof _g}getLabel(){return"Paint"}createElement(){const i=document.createElement(e);return i.brushes=t,i}}}function bD(t="es-text-control"){return new class extends Iw{constructor(){super("text")}isVisible(t){return t instanceof Sg||t instanceof _g}getLabel(){return"Text"}createElement(){return yD(t)}}}function wD(t="es-paragraph-control"){return new class extends Iw{constructor(){super("paragraph")}isVisible(t){return t instanceof Sg}getLabel(){return"Paragraph"}createElement(){return yD(t)}}}function MD(t="es-stroke-settings"){return new class extends Iw{constructor(){super("stroke")}isVisible(t){return ID(t)||t instanceof _g}getLabel(){return"Stroke"}createElement(){return yD(t)}}}function SD(t="es-compositing-settings"){return new class extends Iw{constructor(){super("compositing")}isVisible(t){return t instanceof Vp||t.providesPicture}getLabel(){return"Compositing"}createElement(){return yD(t)}}}function kD(t){t??=new Map([["filter:blur","es-fx-blur"],["filter:drop-shadow","es-fx-drop-shadow"],["filter:color-adjust","es-fx-color-adjust"]]);const e=vD(t);return new class extends Iw{constructor(){super("filter")}isVisible(e){return e instanceof Kg&&t.has(e.type)}createElement(){return null}getElement(t){const i=e(t.type);return i&&(i.value=t),i}getLabel(t){return t instanceof Kg?dC(t.type):"Filter"}}}function _D(t="es-clip-group-control"){return new class extends Iw{constructor(){super("clip-group")}isVisible(t){return t instanceof mg}getLabel(){return"Clip group"}createElement(){return yD(t)}}}function ID(t){return t instanceof Vp||$m(t)}function CD(t,e,i,n){i??=new Map([["rect","rect"],["ellipse","ellipse"],["regular-polygon","regular-polygon"],["star","star"],["poly","poly"],["line","line"],["pen","path"]]),n??=new Map;const s=vD(t);return new class extends Iw{constructor(){super("shape")}createElement(){return null}#Hf(t){if(t instanceof Vp){const t=Ll?.name;return t?i.get(t):null}return t.type}getLabel(t){const e=this.#Hf(t);if(null==e)return"";const i=n.has(e)?n.get(e):dC(e);return t instanceof Vp?i+" - Tool":i}isVisible(i){if(e&&lh()>e)return!1;const n=this.#Hf(i);return null!=n&&t.has(n)}getElement(e){const i=this.#Hf(e);if(null==i||!t.has(i))return null;const n=s(i);return n&&(n.value=e),n}}}class LD extends sb{constructor(){super(...arguments),this.dimensions={height:30,paddingTop:2,indentSize:16,margin:8,iconSize:18,iconMargin:4,textMargin:8,baselineShift:2,minTextWidth:10,smallIconScale:.75,maxIndent:10},this.font="14px -expressive-sans"}updateInternalValues(){super.updateInternalValues(),this.text=this.getColor("text"),this.background=this.getColor("face"),this.backgroundHover=this.getColor("face-hover"),this.selectedBorder=this.getColor("border")}}class ND extends rb{#Il;#Nl;#Ll;#kl;get#Gf(){return this.#kl.item?.element}get info(){return this.#Nl??=this.#jl()}get search(){return this.#Ll}set search(t){t&&(t=t.trim()),t||(t=null),this.#Ll!==t&&(this.#Ll=t,this.refresh(!0))}#Sl;constructor(){const t=new p;super(t),this.#Nl=null,this.#Ll=null,this.#kl={type:0,item:null,indicator:0,mode:null},this.reverse=!0,this.autoScroll=!0,this.#Zf=()=>this.refresh(!0),this.#Yf=()=>{!this.#Qf&&this.autoScroll&&this.#Jf(oh())||this.renderFrame()},this.#Qf=!1,this.#qf=!1,this.#Kf=!1,this.#Xf=new Set,this.#tp=t=>{switch(t.preventDefault(),t.stopPropagation(),t.code){case"ArrowUp":this.#Il.scrollBy(-1,1)&&this.renderFrame();break;case"ArrowDown":this.#Il.scrollBy(1,1)&&this.renderFrame();break;case"Space":case"Enter":Rm(this.#Gf)}},this.#ep=null,this.#Il=t,this.#Sl=new kC([[eo,this.#Zf],[Kc,this.#Zf],[Qc,this.#Yf],[Vc,this.#Zf],[Yc,this.#Zf]])}activate(){this.#Sl.on(),super.activate()}deactivate(){this.#Sl.off(),super.deactivate()}#Zf;#Yf;#Jf(t){if(!t)return!1;let e=!1;!this.#Ll&&function(t){const e=Om();let i=!1,n=t.parent;for(;n&&!n.isDocument;){const t=n.id;e.has(t)||(e.add(t),i=!0),n=n.parent}return i}(t)&&(e=!0,this.refresh(!0));const i=this.info.find((e=>e.element===t));return i&&this.#Il.scrollLineInView(i.top)?(e||this.renderFrame(),!0):e}createTheme(t){return new LD(t)}get contentHeight(){return(this.info?.length||0)*this.lineHeight+this.theme.dimensions.paddingTop}#Qf;#ip;#qf;#Kf;#Xf;#np(t){t&&Sh(t);let e,i=!1;if(lh()>1){let t=oh().parent;i=!0;for(let e of rh())if(e.parent!==t){i=!1;break}}if(i&&lh()>1){if(e=yu([...Th((t=>t.supportsContext))],!1,!0),0===e.length)return}else if(e=oh(),!e.supportsContext)return;var n;Nt(n=e)?n.length?1===n.length?Ou(n[0]):Wu(n):Ou(null):Ou(n)}#sp(t,e,i){t?i?wh(t,!0):!e||this.#Ll||ch()?ph(t,!1):mh(oh(),t):Mh()}handleDblClick(t){const e=this.#Gf;t.altKey?this.#np(e):e&&setTimeout((async()=>{let i=await new Promise((i=>{this.canvas.dispatchEvent(new CustomEvent("edit-title",{composed:!0,bubbles:!0,detail:{title:pC(e),position:{x:t.clientX,y:t.clientY},response:i}}))}));null!=i&&(i=i.trim(),""===i&&(i=null),e.title!==i&&(e.title=i,Jo(),this.renderFrame()))}),100)}#rp;handleMouseDown(t){this.#rp=t.clientY,this.#qf=this.#Kf=!1;const e=this.#Gf;if(e){switch(this.#kl.indicator){case 1:return void Rm(e);case 2:return e.hidden=!e.hidden,Jo(),void this.renderFrame();case 3:return void((e.isLayer||e.isElement)&&(e.locked=!e.locked,Jo(),this.renderFrame()))}t.shiftKey||t.ctrlKey||t.metaKey?this.#sp(e,t.shiftKey,t.ctrlKey||t.metaKey):hh(e)?(Sh(e),this.#Kf=lh()>1):this.#sp(e),this.#qf=!this.#Ll&&!ch()}else this.#sp(null)}handleMouseMove(t){if(this.#qf){if(Math.abs(t.clientY-this.#rp)<3)return;return this.#qf=!1,this.#Kf=!1,void this.#op(t)}this.updateHoverInfo()&&this.renderFrame()}handleMouseUp(t){if(this.#qf=!1,!this.#Qf)return void(this.#Kf&&(this.#Kf=!1,oh()&&ph(oh(),!1)));this.#Kf=!1,k("keydown"),this.#Qf=!1,this.#Xf.clear();let e=this.#kl.mode;const i=this.#Gf;null!=e&&i&&(this.reverse&&("before"===e?e="after":"after"===e&&(e="before")),A_(i,e)),this.#ip=null,this.refresh(!0),this.#Jf(oh())}#op(t){const e=oh();if(!e||e.isFragment&&lh()>1)return;S("keydown",this.#tp,!0),t.altKey&&!e.isFragment&&P_()&&this.refresh(!0);const i=this.#Xf;function n(t){if(i.add(t),t.hasFragments)for(const e of t.fragments)n(e);if(t.hasChildren)for(const e of t.children())n(e)}i.clear(),this.#ip=e.nodeType;for(const t of rh())n(t);this.setCursor("move"),this.#Qf=!0,this.renderFrame()}#tp;invalidate(){this.#Nl=null}updateHoverInfo(){const t=this.info;if(!t.length)return this.clearHoverInfo();const e=this.mousePosition,i=this.theme,n=this.#Il.offset,s=e.y+n,r=Math.floor(s/i.lineHeight);if(r<0||r>=t.length)return this.clearHoverInfo();const o=t[r];let a=null,l=0;if(this.#Qf){if(this.#ap){const t=i.dimensions,e=t.paddingTop,n=t.height,r=(s-o.top*(e+n)-e)/n;a=this.#lp(o.element,r)}}else l=this.#cp(o,e.x,s);return this.#zl(1,o,l,a)}clearHoverInfo(){return this.#zl(0,null,0,null)}get#ap(){const t=this.mousePosition;if(t.x<0||t.y<0)return!1;const e=this.size.bounds;return!(t.x>e.width||t.y>e.height)}#zl(t,e,i,n){this.#Qf?this.setCursor(null===n?"not-allowed":"copy"):this.setCursor(null!=e&&0!==i?"pointer":"default");const s=this.#kl;return(s.type!==t||s.item!==e||s.indicator!==i||s.mode!==n)&&(s.type=t,s.item=e,s.indicator=i,s.mode=n,!0)}#up(t){return t.isElement||t.isLayer}#lp(t,e){if(this.#Xf.has(t))return null;let i=!1,n=!1;const s=oh();switch(this.#ip){case 1:n=t.isLayer;break;case 2:i=t.supportsChildren&&(t.isLayer||t.isElement)&&t.acceptsChild(s)&&s.acceptsParent(t),n=t.isElement&&t.parent&&t.parent.acceptsChild(s)&&s.acceptsParent(t.parent);break;case 3:i=t.supportsFilters&&(t.isElement||t.isLayer)&&null==t.filters&&1===lh();break;case 4:if(n=t.isFilter,t.isFilterContainer||t.isFilter)i=t.supportsChildren;else{if(!t.isLayer&&!t.isElement)return null;i=t.supportsFilters}break;default:return null}return i?n?Wm(t)&&(t.hasChildren||t.hasFragments)?e<.5?"before":"append":e<.25?"before":e>.75?"after":"append":"append":n?e<.5?"before":"after":null}#cp(t,e,i){const n=this.theme.dimensions;if(t.left>n.maxIndent)return 0;let s=n.margin+t.left*n.indentSize,r=this.size.bounds.width-n.margin;if(e<=s||e>=r)return 0;s+=n.iconMargin+n.iconSize/2;const o={x:e,y:i},a={x:s,y:t.top*(n.height+n.paddingTop)+n.paddingTop+n.height/2},l=n.iconSize/2;if(!this.#Ll&&Bm(t.element)&&ce.distance(o,a)<=l)return 1;const c=n.iconMargin+n.smallIconScale*n.iconSize/2;return r-=c,a.x=r,ce.distance(o,a)<=l?2:(r-=2*c,a.x=r,this.#up(t.element)&&ce.distance(o,a)<=l?3:0)}#hp(t,e,i,n){if(t.push({element:e,top:i,left:n}),i++,!Wm(e))return i;if(n++,e.isLayer||e.isElement){const s=e.filters;s&&(i=this.#hp(t,s,i,n))}if(e.supportsChildren&&e.hasChildren)for(const s of e.children(this.reverse))i=this.#hp(t,s,i,n);return i}#dp(t,e){return pC(t).toLowerCase().includes(e)}#fp(t,e,i,n){if(this.#dp(e,n)&&(t.push({element:e,top:i,left:0}),i++),e.isLayer||e.isElement){const s=e.filters;s&&(i=this.#fp(t,s,i,n))}if(e.supportsChildren&&e.hasChildren)for(const s of e.children(this.reverse))i=this.#fp(t,s,i,n);return i}#jl(){const t=[];let e=0,i=this.#Ll;if(i){i=i.toLowerCase();for(const n of Gu(this.reverse))e=this.#fp(t,n,e,i)}else for(const i of Gu(this.reverse))e=this.#hp(t,i,e,0);return t}render(t,e,i){const n=this.theme;t.fillStyle=n.background,t.fillRect(0,0,e,i);const s=this.info,r=s?.length;if(!r)return;const o=this.#Il.offset,a=n.dimensions,l=a.height+a.paddingTop,c=Math.trunc(o/l);if(c>=r)return;const u=Math.min(c+Math.ceil(i/l),r-1);if(u<c)return;t.save(),t.textRendering="optimizeLegibility",t.textBaseline="middle",t.font=n.font,t.fillStyle=n.text,t.lineWidth=1,t.translate(0,-o);const h=this.#Qf,d=e-2*a.margin,f=this.#Gf,p=this.#kl.mode;for(let i=c;i<=u;i++){const n=s[i],r=a.margin+n.left*a.indentSize,o=e-a.margin;if(t.save(),t.translate(0,n.top*l+a.paddingTop),h){if(this.#Xf.has(n.element))t.globalAlpha=.25;else if(null!=p&&f===n.element)if("append"==p||"prepend"===p)this.#pp(t,a.margin,0,d,a.height);else{let e=r;if(n.element.supportsChildren||(e+=a.iconMargin+a.iconSize),"before"===p){let r=1;s[i-1]&&s[i-1].left===n.left&&(r=0),this.#gp(t,e,-a.paddingTop/2,d-e,a.height/2,r)}else{let r=-1;s[i+1]&&s[i+1].left===n.left&&(r=0),this.#gp(t,e,a.height+a.paddingTop/2,d-e,a.height/2,r)}}}else hh(n.element)?this.#pp(t,a.margin,0,d,a.height):f===n.element&&this.#mp(t,a.margin,0,d,a.height);t.translate(r,0),this.#vp(t,n,0,o-r),t.restore()}t.restore()}#gp(t,e,i,n,s,r=0,o=1){t.save(),t.strokeStyle=this.theme.selectedBorder,t.lineWidth=o,t.lineJoin="round",t.lineCap="round",t.beginPath(),0===r?(t.moveTo(e,i-s),t.lineTo(e,i+s),t.moveTo(e,i)):(t.moveTo(e,i+r*s),t.lineTo(e,i)),t.lineTo(e+n,i),t.stroke(),t.restore()}#pp(t,e,i,n,s,r=1){t.save(),t.strokeStyle=t.fillStyle=this.theme.selectedBorder,t.lineWidth=r,t.globalAlpha=.15,t.beginPath(),t.roundRect(e,i,n,s,3),t.fill(),t.globalAlpha=1,t.beginPath(),t.roundRect(e,i+r,n,s-r,3),t.stroke(),t.restore()}#mp(t,e,i,n,s){n<1||(t.save(),t.fillStyle=this.theme.backgroundHover,t.beginPath(),t.roundRect(e,i,n,s,3),t.fill(),t.restore())}#vp(t,e,i,n){const s=this.theme.dimensions,r=s.height/2;if(e.left>s.maxIndent)return void t.fillText("...",n-this.#yp(t),r);const o=s.iconMargin+s.iconSize/2;i+=o,!this.#Ll&&Bm(e.element)&&this.renderIcon(t,Wm(e.element)?"workflow:ChevronDown":"workflow:ChevronRight",s.iconSize,i,r),i+=o,i+=o;const a=gC(e.element);if(this.renderIcon(t,a||"expr:unknown",s.iconSize,i,r),i+=o,i+=s.textMargin,!this.#Qf){const i=this.#Gf===e.element,o=e.element.hidden,a=this.#up(e.element),l=!!a&&e.element.locked,c=s.iconMargin+s.smallIconScale*s.iconSize/2;(i||o||l)&&(n-=c,(i||o)&&this.renderIcon(t,"workflow:VisibilityOff",s.iconSize,n,r,o?1:.5,s.smallIconScale),n-=c,n-=c,a&&(i||l)&&this.renderIcon(t,"workflow:LockClosed",s.iconSize,n,r,l?1:.5,s.smallIconScale),n-=c),n-=s.textMargin}n-i>s.minTextWidth&&(t.beginPath(),t.rect(i,0,n-i,s.height),t.clip(),t.fillText(pC(e.element),i,r+s.baselineShift))}#ep;#yp(t){return this.#ep??=t.measureText("...").width}}class jD extends qx{#xp=new ND;constructor(){super(),IC(this,[eo,Vc,Yc,hI,[vI,this.#bp]])}#fr=0;connectedCallback(){super.connectedCallback(),this.#xp.activate(),this.addEventListener("contextmenu",this.#wp),this.addEventListener("edit-title",this.#Mp),this.#fr++&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),this.#xp.deactivate(),this.removeEventListener("contextmenu",this.#wp),this.removeEventListener("edit-title",this.#Mp)}#wp(t){t.preventDefault(),t.stopPropagation(),_||ky(this.ctxMenu,{x:t.clientX,y:t.clientY},"bottom-left")}render(){return $c?Px`
            <div id="context" class="dbl" @dblclick=${this.#Sp}>
                ${vI.value?yC(this.#kp()):yC(this.#_p($c))}
            </div>
            ${this.#xp.canvas}
            <cc-popover id="popover">
                <cc-text-input title="Edit title" id="title-input" @popover-visible=${this.#Ip} placeholder="Title" @change=${this.#Cp}>
                    <cc-icon name="workflow:ProjectNameEdit" slot="before"></cc-icon>
                </cc-text-input>
            </cc-popover>
        `:Ax}#_p(t){let e,i,n;if(Au()){n=!1;const t=Pu();Nu()?(i="Isolation context",e=gC(t)):(i=pC(t),e=gC(t))}else n=!0,e="workflow:DocumentFragment",i=t.title||"Document";return Px`
<cc-icon .name=${e} class="dbl"></cc-icon>
<span class="dbl text-ellipsis">${i}</span>
<div style="flex: 1" class="dbl"></div>
<cc-action-group id="context-wrapper" quiet size="m">
    <cc-action-button .hidden=${n} @click=${this.#Lp} title="Back">
        <cc-icon name="workflow:Back"></cc-icon>
    </cc-action-button>
    <cc-action-button .hidden=${n} @click=${this.#Kc} title="Exit isolation">
        <cc-icon name="workflow:CloseCircle"></cc-icon>
    </cc-action-button>
    <cc-action-button @click=${this.#Np} title="Add...">
        <cc-icon name="workflow:Add"></cc-icon>
    </cc-action-button>
</cc-action-group>
`}#Sp(t){vI.value||t.target.classList.contains("dbl")&&vI.change(!0)}#kp(){return Px`
<cc-action-group id="search-wrapper" compact size="m">
    <cc-text-input id="search" @update=${this.#jp} .value=${this.#xp?.search||""}>
        <cc-icon name="expr:zoom-tool" slot="before"></cc-icon>
    </cc-text-input>
    <cc-action-button @click=${this.#zp} title="Exit search">
        <cc-icon name="workflow:CloseCircle"></cc-icon>
    </cc-action-button>
</cc-action-group>
`}#jp(t){this.#xp.search=t.detail}#zp(){this.#xp.search=null,vI.change(!1)}#Pp(){return this.shadowRoot.querySelector("#search")}#bp=async t=>{this.#xp.search=null,this.requestUpdate(),t&&await this.updateComplete;const e=this.#Pp();e&&(e.value="",t&&e.focus())};get#Yn(){return this.shadowRoot.getElementById("popover")}get#Tp(){return this.shadowRoot.getElementById("title-input")}#Cp(t){t.stopPropagation(),this.#Yn.close(t.detail)}async#Ip(){const t=this.#Tp;await t.updateComplete,t.focus(),t.selectAll()}#Mp=async t=>{t.stopPropagation();const{title:e,position:i,response:n}=t.detail;this.#Tp.value=e||"";const s=this.getBoundingClientRect();i.x=(s.left+s.right)/2,n(await this.#Yn.open(i,.5,1,0,-1,0,4))};#Np(t){ky(this.menu,t.target,"bottom-left")}#Lp(){Ru()}#Kc(){Ou(null,!1)}static{this.styles=[Mb,Cb,Jy`
* {pointer-events: var(--cc-pointer-events, auto)}

:host {
    display: flex;
    flex-direction: column;
    overflow: hidden !important;
    user-select: none;
}

#context {
    height: 48px;
    flex-shrink: 0;
    padding: 0 8px;
    gap: 8px;
    display: flex;
    flex-direction: row;
    align-items: center;
    border-bottom: var(--border-size) solid var(--separator-color);
}

#context cc-action-button[hidden] {
    display: none;
}

#context-wrapper {
    gap: 4px;
}
#context-wrapper, #context > cc-icon {
    flex-shrink: 0;
}

#title-input {
    width: 220px;
    border: none !important;
}

#search-wrapper, #search {
    flex: 1;
}

#canvas {
    flex: 1;
    display: block;
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
    border: none;
    outline: none;
    touch-action: none;
    contain: strict;
    --cc-canvas-line-height: 32;
    --cc-canvas-scroll-size: var(--scrollbar-size);
    --cc-canvas-scroll-color: var(--scrollbar-color);
    --cc-canvas-text: var(--text-color-default);
    --cc-canvas-face: var(--surface-color);
    --cc-canvas-face-hover: var(--surface-hover-color);
    --cc-canvas-border: var(--accent-color-500);
}


    `]}}!function(t,e=0){Array.isArray(e)||(e=[e]);for(const i of e)ba.has(i)||ba.set(i,new Set),ba.get(i).add(t)}((t=>{const e="keydown"===t.type;if(!e||"AltLeft"!==t.code&&"AltRight"!==t.code||t.preventDefault(),Pb.length>0){if(!e)return!1;const i=function(t){if(za(t.target))return t.target;const e=t.composedPath()[0];return za(e)?e:null}(t),n="Escape"===t.code;if(i)n?(t.preventDefault(),t.stopPropagation(),i.blur()):PD(t)&&t.preventDefault();else if(n){t.preventDefault(),t.stopPropagation();const e=document.activeElement;e instanceof HTMLElement&&Pb.at(-1)?.contains(e)?e.blur():Pb.at(-1)?.dispatchEvent(new Event("cancel",Eb))}else t.preventDefault();return!1}return Ta(t)?(PD(t)&&t.preventDefault(),!1):!_&&!oa()||(t.preventDefault(),!1)}));const zD=new Set(["KeyC","KeyX","KeyV","KeyA","KeyZ","KeyY"]);function PD(t){return(t.ctrlKey||t.metaKey)&&!zD.has(t.code)}let TD=null,AD=!1;window.addEventListener("beforeinstallprompt",(t=>{t.preventDefault()})),window.addEventListener("appinstalled",(()=>{AD||(AD=!0,DC("PWAInstalled"))}));const DD=Fb(class extends Vb{constructor(t){if(super(t),3!==t.type&&1!==t.type&&4!==t.type)throw Error("The `live` directive is not allowed on child or event bindings");if(!(t=>void 0===t.strings)(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===Tx||e===Ax)return e;const i=t.element,n=t.name;if(3===t.type){if(e===i[n])return Tx}else if(4===t.type){if(!!e===i.hasAttribute(n))return Tx}else if(1===t.type&&i.getAttribute(n)===e+"")return Tx;return yw(t),e}});let ED=(()=>{let t,e,i,n=qx,s=[],r=[],o=[],a=[],l=[],c=[];return class extends n{constructor(){super(...arguments),this.#Ap=lb(this,s,!1),this.#is=(lb(this,r),lb(this,o,void 0)),this.#Dp=(lb(this,a),lb(this,l,null)),this.updateCallback=(lb(this,c),null),this.updateId=null}static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!1})],e=[db({type:Object,reflect:!1,attribute:!1})],i=[db({type:Object,reflect:!1,attribute:!1})],ab(this,null,t,{kind:"accessor",name:"readonly",static:!1,private:!1,access:{has:t=>"readonly"in t,get:t=>t.readonly,set:(t,e)=>{t.readonly=e}},metadata:u},s,r),ab(this,null,e,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:u},o,a),ab(this,null,i,{kind:"accessor",name:"bounds",static:!1,private:!1,access:{has:t=>"bounds"in t,get:t=>t.bounds,set:(t,e)=>{t.bounds=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#Ap;get readonly(){return this.#Ap}set readonly(t){this.#Ap=t}#is;get value(){return this.#is}set value(t){this.#is=t}#Dp;get bounds(){return this.#Dp}set bounds(t){this.#Dp=t}get colorFormat(){return fI.value}#Ep;get property(){return this.#Ep}set property(t){this.#Ep!==t&&(this.#Ep=t,this.stopUpdate())}get propertyUpdater(){return this.#Ep}stopUpdate(){nA(this.updateId),this.updateId=null}onStart(t){t.stopPropagation(),this.updateId=XT(this.propertyUpdater)}onEnd(t){t.stopPropagation(),this.stopUpdate()}doUpdate(t,e){this.value=t,this.updateCallback?.(t),e?(this.stopUpdate(),tA(this.propertyUpdater,t)):sA(t,this.updateId)}onColorFormat(t){fI.change(t.detail)}}})();const OD=new class extends HT{constructor(){super(null)}#Op=!1;#ts=null;init(t,e){return this.property=t,this.#Op=e,this}beforeUpdate(t){const e=oh();this.#ts=e&&this.isValidTarget(e)?Pg(e,t,!this.#Op):null}afterUpdate(){this.#ts=null}setValue(t,e){return this.#ts&&(e=this.#ts(t)),super.setValue(t,e)}},WD=[{title:"Pad",value:0},{title:"Reflect",value:2},{title:"Repeat",value:1}];let RD=(()=>{let t,e,i=ED,n=[],s=[],r=[],o=[];return class extends i{static{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;t=[gb("#slider")],e=[gb("#color")],ab(this,null,t,{kind:"accessor",name:"slider",static:!1,private:!1,access:{has:t=>"slider"in t,get:t=>t.slider,set:(t,e)=>{t.slider=e}},metadata:a},n,s),ab(this,null,e,{kind:"accessor",name:"color",static:!1,private:!1,access:{has:t=>"color"in t,get:t=>t.color,set:(t,e)=>{t.color=e}},metadata:a},r,o),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}#Wp=lb(this,n,void 0);get slider(){return this.#Wp}set slider(t){this.#Wp=t}#Fr=(lb(this,s),lb(this,r,void 0));get color(){return this.#Fr}set color(t){this.#Fr=t}constructor(){super(),lb(this,o),IC(this,[pI,gI])}get isPinned(){return pI.value}render(){return this.#Ba(this.#Rp(),this.#Bp())}get propertyUpdater(){return OD.init(this.property,this.isPinned)}#Ba(...t){return Px`<es-color-control
            id="color"
            .value=${DD(this.slider?.color||this.value.stopColors.getColorAt(0))}
            ?readonly=${this.readonly}
            .format=${this.colorFormat}
            .addSlot=${!0}
            @start=${this.onStart}
            @end=${this.onEnd}
            @update=${this.#Ha}
            @color-format=${this.onColorFormat}
            >${yC(t)}</es-color-control>`}onEnd(t){super.onEnd(t),this.slider.edit=!1}#Rp(){return Px`<es-gradient-slider
            id="slider"
            small
            .value=${DD(this.value.stopColors)}
            ?readonly=${this.readonly}
            @edit=${this.#Up}
            @select=${this.#$p}
            @add=${this.#$p}
            @remove=${this.#$p}
            @value=${this.#$p}
            @update=${this.#Fp}
        ></es-gradient-slider>`}#$p(t){t.stopPropagation(),this.color.value=this.slider.color}#Up(t){t.stopPropagation(),t.detail?(this.updateId=XT(this.propertyUpdater),this.color.value=this.slider.color):this.stopUpdate()}#Fp(t){t.stopPropagation(),this.doUpdate(this.value.withStopColorList(t.detail))}#Ha(t){t.stopPropagation(),this.color.value=this.slider.color=t.detail}#Bp(){const t=this.bounds,e=null==t,i=gI.value,n=this.isPinned;return Px`
            <cc-action-group id="gradient-buttons" quiet>
                <cc-action-button
                        title="Gradient settings"
                        .disabled=${e}
                        .selected=${DD(!e&&i)}
                        @click=${this.#Vp}
                        emphasized
                        >
                    <cc-icon name="workflow:Settings"></cc-icon>
                </cc-action-button>
                <cc-icon-toggle on-icon="workflow:PinOn" off-icon="workflow:PinOff" .cssIcon=${!1} .checked=${n} @change=${this.#Hp} quiet emphasized left-gap></cc-icon-toggle>
                <cc-action-button
                    title="Reverse color stops"
                    @click=${this.#Gp}
                >
                    <cc-icon name="expr:switch-horizontal"></cc-icon>
                </cc-action-button>
                <cc-action-button
                    title="Delete color stop"
                    @click=${this.#Zp}
                    ?disabled=${this.value.stopColors.length<=2}
                >
                    <cc-icon name="workflow:Delete"></cc-icon>
                </cc-action-button>
                <div style="flex: 1"></div>
                ${this.#Yp()}
            </cc-action-group>
            ${i&&!e?this.#Qp(n,t):Ax}
            `}#Yp(){return Px`<cc-picker
            id="spread-method"
            title="Spread method"
            .items=${WD}
            @change=${this.#Jp}
            .value=${DD(this.value.spread)}
        ></cc-picker>`}#Qp(t,e){return Px`<cc-flex-col id="settings">${this.renderSettings(t,e)}${this.#qp()}</cc-flex-col>`}#qp(){const t=this.value;return Px`
        <cc-flex-row>
            <cc-icon name="expr:rotate" padded right-gap></cc-icon>
            <cc-number-input title="Rotate" .value=${t.rotate} .formatter=${cM} @start=${this.onStart} @end=${this.onEnd} @update=${this.#Kp} flex>
                <cc-icon name="expr:angle" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="Aspect ratio" .value=${t.scale} .formatter=${rM} @start=${this.onStart} @end=${this.onEnd} @update=${this.#Xp} flex>
                <cc-icon name="expr:size" slot="before"></cc-icon>
            </cc-number-input>
            <div fixed-32></div>
        </cc-flex-row>`}#Kp(t){this.doUpdate(this.value.withRotate(t.detail))}#Xp(t){this.doUpdate(this.value.withScale(t.detail))}#Jp(t){t.stopPropagation(),this.doUpdate(this.value.withSpreadMethod(t.detail),!0)}#Hp(t){pI.change(t.detail)}#Gp(t){this.slider.reverseStops(t.altKey)}#Zp(){this.slider.removeCurrentHandle()}#Vp(){gI.toggle()}getSidePoint(t,e){const i=this.bounds;if(!i)return null;const n=i.getPointAtPosition(t.x,t.y);return n&&e&&n.equals(e)?null:n}static{this.styles=Jy`
        #slider {
            width: auto;
            flex: 1;
        }

        #spread-method {
            width: 72px;
        }
    `}}})();class BD{#Hn=null;constructor(t,e,i){this.title=t,this.icon=e,this.type=i}get element(){return null==this.#Hn&&(this.#Hn=this.createElement()),this.#Hn}render(t,e,i,n){const s=this.element;return s.value=t,s.property=e,s.bounds=i,s.updateCallback=n,s}}const UD=new Map;function $D(t){UD.set(t.type,t)}function FD(t){return`<stop offset="${Math.round(100*t.offset)}%" stop-color="${t.color.rgba}" />`}$D(new class extends BD{createElement(){const t=document.createElement("p");return t.innerText="No paint",t.style.textAlign="center",t}getBackground(){return"linear-gradient(-45deg, transparent 0%, transparent 47.5%, #f00 47.5%, #f00 52.5%, transparent 52.5%, transparent 100%)"}render(){return this.element}}("None","expr:fill-none",0)),$D(new class extends BD{createElement(){return document.createElement("es-brush-control-solid")}getBackground(t){return t.color.rgba}}("Solid","expr:fill-solid",1)),$D(new class extends BD{createElement(){return document.createElement("es-brush-control-linear-gradient")}getBackground(t){return`linear-gradient(${t.start.getPositiveAngleTo(t.end)+90}deg, ${t.stopColors.toString()})`}}("Linear gradient","expr:fill-linear-gradient",2)),$D(new class extends BD{createElement(){return document.createElement("es-brush-control-radial-gradient")}getBackground(t){return`radial-gradient(${t.stopColors.toString()})`}}("Radial gradient","expr:fill-radial-gradient",3)),$D(new class extends BD{createElement(){return document.createElement("es-brush-control-sweep-gradient")}getBackground(t){let e=t.startAngle;if(0===e&&360===t.arcLength)return`conic-gradient(from 90deg, ${t.stopColors.toString()})`;const i=e+t.arcLength,n=e>0?`${t.stopColors.list[0].color.rgba} 0deg ${t.startAngle}deg, `:"",s=i<360?`, ${t.stopColors.list[t.stopColors.list.length-1].color.rgba} ${i}deg 360deg`:"";return`conic-gradient(from 90deg, ${n}${t.stopColors.list.map((i=>`${i.color.rgba} ${e+i.offset*t.arcLength}deg`))}${s})`}}("Sweep gradient","expr:fill-conical-gradient",5)),$D(new class extends BD{createElement(){return document.createElement("es-brush-control-radial-focal-gradient")}getBackground(t){let e=0,i=0,n=0,s=0;const r=t.start.sub(t.end),o=2*Math.max(t.startRadius,t.endRadius,Math.abs(r.x),Math.abs(r.y))/100;0!==o&&(e=t.endRadius/o,i=r.x/o,n=r.y/o,s=t.startRadius/o);const a=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">\n<radialGradient id="gradient" cx="50%" cy="50%" r="${e}%" fx="${50+i}%" fy="${50+n}%" fr="${s}%">\n${t.stopColors.list.map(FD).join("")}\n</radialGradient>\n<rect width="100%" height="100%" fill="url(#gradient)" />\n</svg>`;return`url("data:image/svg+xml;base64,${window.btoa(a)}")`}}("Radial gradient with focal point","expr:fill-radial-focal-gradient",4));let VD=(()=>{let t,e,i,n,s,r=qx,o=[],a=[],l=[],c=[],u=[],h=[],d=[],f=[],p=[],g=[];return class extends r{static{const m="function"==typeof Symbol&&Symbol.metadata?Object.create(r[Symbol.metadata]??null):void 0;t=[db({type:Boolean,reflect:!1})],e=[db({type:Object,attribute:!1})],i=[db({type:Number,attribute:!1})],n=[db({type:Object,attribute:!1})],s=[db({type:Number,attribute:!1})],ab(this,null,t,{kind:"accessor",name:"isFillSelected",static:!1,private:!1,access:{has:t=>"isFillSelected"in t,get:t=>t.isFillSelected,set:(t,e)=>{t.isFillSelected=e}},metadata:m},o,a),ab(this,null,e,{kind:"accessor",name:"fill",static:!1,private:!1,access:{has:t=>"fill"in t,get:t=>t.fill,set:(t,e)=>{t.fill=e}},metadata:m},l,c),ab(this,null,i,{kind:"accessor",name:"fillOpacity",static:!1,private:!1,access:{has:t=>"fillOpacity"in t,get:t=>t.fillOpacity,set:(t,e)=>{t.fillOpacity=e}},metadata:m},u,h),ab(this,null,n,{kind:"accessor",name:"stroke",static:!1,private:!1,access:{has:t=>"stroke"in t,get:t=>t.stroke,set:(t,e)=>{t.stroke=e}},metadata:m},d,f),ab(this,null,s,{kind:"accessor",name:"strokeOpacity",static:!1,private:!1,access:{has:t=>"strokeOpacity"in t,get:t=>t.strokeOpacity,set:(t,e)=>{t.strokeOpacity=e}},metadata:m},p,g),m&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})}#tg=lb(this,o,!1);get isFillSelected(){return this.#tg}set isFillSelected(t){this.#tg=t}#eg=(lb(this,a),lb(this,l,void 0));get fill(){return this.#eg}set fill(t){this.#eg=t}#ig=(lb(this,c),lb(this,u,1));get fillOpacity(){return this.#ig}set fillOpacity(t){this.#ig=t}#ng=(lb(this,h),lb(this,d,void 0));get stroke(){return this.#ng}set stroke(t){this.#ng=t}#sg=(lb(this,f),lb(this,p,1));get strokeOpacity(){return this.#sg}set strokeOpacity(t){this.#sg=t}#rg=(lb(this,g),[null,null]);#og=[null,null];#ag(t,e){return null==t?"transparent":t===e[0]&&null!=e[1]?e[1]:(e[0]=t,e[1]=UD.get(t.type).getBackground(t))}render(){const{isFillSelected:t,fill:e,stroke:i}=this;return Px`
            <div id="copy" @click=${this.#lg} title=${t?"Copy stroke":"Copy fill"}>
                <cc-css-icon .name=${t?"SwapArrowUpLeft":"SwapArrowDownRight"}></cc-css-icon>
            </div>
            <div id="swap" title="Swap fill & stroke" @click=${this.#cg}>
                <cc-css-icon  name="SwapArrows"></cc-css-icon>
            </div>
            <cc-brush-thumb id="fill" title="Fill" .indeterminate=${null==e} .paint=${this.#ag(e,this.#rg)} .opacity=${this.fillOpacity??1} .selected=${t} @click=${this.#ug}></cc-brush-thumb>
            <cc-brush-thumb id="stroke" title="Stroke" .indeterminate=${null==i} .paint=${this.#ag(i,this.#og)} .opacity=${this.strokeOpacity??1} .selected=${!t} @click=${this.#hg} cut></cc-brush-thumb>
        `}#hg(){this.#dg("toggle",!1)}#ug(){this.#dg("toggle",!0)}#lg(t){this.#dg("copy-brush",t.altKey)}#cg(t){this.#dg("swap-brush",t.altKey)}#dg(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}static{this.styles=Jy`
:host {
    width: 48px;
    height: 48px;
    contain: strict;
}
:host > * {position: absolute}
#fill {top: 0; left: 0}
#fill[selected] {z-index: 1}
#fill:not([selected]) {clip-path: polygon(-5% -5%, 105% -5%, 105% 55%, 55% 55%, 55% 105%, -5% 105%)}
#stroke {bottom: 0; right: 0}
#swap {top: 0;right: 0}
#copy {bottom: 0;left: 0}
#swap, #copy {
    display: flex;
    cursor: pointer;
    pointer-events: bounding-box;
}
    `}}})();const HD=pf;let GD=(()=>{let t,e,i,n,s,r=qx,o=[],a=[],l=[],c=[],u=[],h=[],d=[],f=[];return class extends r{static{const p="function"==typeof Symbol&&Symbol.metadata?Object.create(r[Symbol.metadata]??null):void 0;t=[db({type:Boolean})],e=[db({type:Array,attribute:!1})],i=[db({type:Object})],n=[gb("#brush-switch")],ab(this,null,t,{kind:"accessor",name:"readonly",static:!1,private:!1,access:{has:t=>"readonly"in t,get:t=>t.readonly,set:(t,e)=>{t.readonly=e}},metadata:p},o,a),ab(this,null,e,{kind:"accessor",name:"brushes",static:!1,private:!1,access:{has:t=>"brushes"in t,get:t=>t.brushes,set:(t,e)=>{t.brushes=e}},metadata:p},l,c),ab(this,null,i,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:p},u,h),ab(this,s={get:cb((function(){return this.#fg}),"#brushSwitch","get"),set:cb((function(t){this.#fg=t}),"#brushSwitch","set")},n,{kind:"accessor",name:"#brushSwitch",static:!1,private:!0,access:{has:t=>#pg in t,get:t=>t.#pg,set:(t,e)=>{t.#pg=e}},metadata:p},d,f),p&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:p})}#Ap=lb(this,o,!1);get readonly(){return this.#Ap}set readonly(t){this.#Ap=t}#gg=(lb(this,a),lb(this,l,void 0));get brushes(){return this.#gg}set brushes(t){this.#gg=t}#is=(lb(this,c),lb(this,u,void 0));get value(){return this.#is}set value(t){this.#is=t}#fg=(lb(this,h),lb(this,d,void 0));get#pg(){return s.get.call(this)}set#pg(t){return s.set.call(this,t)}constructor(){super(),IC(this,[[Md,this.#mg],dI])}get#vg(){return dI.value}#mg=(lb(this,f),t=>{if(t.has(2)||t.has(3))this.requestUpdate();else if(t.has(4)){let t;if(t=this.#vg?this.value.fill:this.value.strokeBrush,t instanceof _i)return void this.requestUpdate()}});render(){const t=this.#vg;return[this.#yg(t),this.#xg(t),this.#bg(t)]}#yg(t){const e=this.value;return Px`
            <div id="brush-switch-wrapper">
                <es-brush-switch
                    id="brush-switch"
                    .isFillSelected=${t}
                    .fill=${e.fill}
                    .fillOpacity=${DD(e.fillOpacity)}
                    .stroke=${e.strokeBrush}
                    .strokeOpacity=${DD(e.strokeOpacity)}
                    @toggle=${this.#wg}
                    @copy-brush=${this.#Mg}
                    @swap-brush=${this.#Sg}
                ></es-brush-switch>
                <cc-slider-input
                    id="opacity"
                    data-name=${t?"fill":"stroke"}
                    .constraint=${nM}
                    .formatter=${nM}
                    .value=${DD(t?e.fillOpacity:e.strokeOpacity)}
                    ${lA(t?HD.fill.opacity:HD.stroke.opacity,null,this.#kg)}
                    filled
                >
                    <span>${t?"Fill opacity":"Stroke opacity"}</span>
                </cc-slider-input>
            </div>
        `}#kg=t=>(this.#vg?this.#pg.fillOpacity=t:this.#pg.strokeOpacity=t,t);#wg(t){dI.change(t.detail)}#Mg(t){let e;const i=t.detail;e=this.#vg?t_(i):Xk(i),e&&this.requestUpdate()}#Sg(t){Kk(t.detail)&&this.requestUpdate()}#xg(t){return Px`<cc-icon-toolbar
            .value=${DD(t?this.value.fill.type:this.value.strokeBrush.type)}
            .items=${this.brushes}
            @change=${this.#_g}
            emphasized compact size="m" justify="center"></cc-icon-toolbar>`}#_g(t){let e;e=this.#vg?i_(t.detail):e_(t.detail),e?this.requestUpdate():t.preventDefault()}#bg(t){const e=this.value,i=t?e.fill:e.strokeBrush;return UD.get(i.type).render(i,t?HD.fill.brush:HD.stroke.brush,e?.localBounds,this.#Ig)}#Ig=t=>{this.#vg?this.#pg.fill=t:this.#pg.stroke=t};static get styles(){const t=[Jy`
            * {pointer-events: var(--cc-pointer-events, auto)}
            :host {
                display: flex;
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
            }

            #brush-switch-wrapper {
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: 8px;
            }

            #brush-switch {flex-shrink: 0}
        `];return t.push(pA(gA('#opacity[data-name="fill"]',HD.fill.opacity.id),gA('#opacity[data-name="stroke"]',HD.stroke.opacity.id))),t}}})();class ZD extends ED{render(){return yC(Px`<es-color-control
            .value=${DD(this.value.color)}
            .format=${DD(this.colorFormat)}
            ?readonly=${this.readonly}
            @color-format=${this.onColorFormat}
            @start=${this.onStart}
            @end=${this.onEnd}
            @update=${this.onUpdate}
        ></es-color-control>`)}onUpdate(t){this.doUpdate(this.value.withColor(t.detail))}}class YD extends RD{renderSettings(t,e){let{start:i,end:n}=this.value,s=hM;return t||(i=e.getRelativePoint(i.x,i.y),n=e.getRelativePoint(n.x,n.y),s=sM),Px`
        <cc-flex-row>
            <cc-icon name="expr:fill-linear-gradient" padded right-gap></cc-icon>
            <cc-number-input title="From X" .formatter=${s} .value=${i.x} data-name="start" data-axis="x" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Cg} flex>
                <cc-icon name="expr:x1" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="From Y" .formatter=${s} .value=${i.y} data-name="start" data-axis="y" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Cg} flex>
                <cc-icon name="expr:y1" slot="before"></cc-icon>
            </cc-number-input>
            <cc-pin-point-button .valueMap=${ds} @change=${this.#Lg} data-name="start" left-gap quiet>
                <cc-icon name="expr:center-object-origin"></cc-icon>
            </cc-pin-point-button>
        </cc-flex-row>
        <cc-flex-row>
            <div fixed-32></div>
            <cc-number-input title="To X" .formatter=${s} .value=${n.x} data-name="end" data-axis="x" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Cg} flex>
                <cc-icon name="expr:x2" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="To Y" .formatter=${s} .value=${n.y} data-name="end" data-axis="y" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Cg} flex>
                <cc-icon name="expr:y2" slot="before"></cc-icon>
            </cc-number-input>
            <cc-pin-point-button .valueMap=${ds} @change=${this.#Lg} data-name="end" left-gap quiet>
                <cc-icon name="expr:center-object-origin"></cc-icon>
            </cc-pin-point-button>
        </cc-flex-row>`}#Lg(t){t.stopPropagation();let{start:e,end:i}=this.value;const n="start"===t.target.dataset.name,s=this.getSidePoint(t.detail,n?e:i);s&&(n?e=s:i=s,this.doUpdate(this.value.withPosition(e,i),!0))}#Cg(t){t.stopPropagation();const e=t.target.dataset,i=this.value;let{start:n,end:s}=i,r=t.detail;const o=this.bounds;o&&!this.isPinned&&(r="x"===e.axis?o.x+r*o.width:o.y*r*o.height),"start"===e.name?n="x"===e.axis?new ce(r,n.y):new ce(n.x,r):s="x"===e.axis?new ce(r,s.y):new ce(s.x,r),this.doUpdate(i.withPosition(n,s))}}class QD extends RD{renderSettings(t,e){let{center:i,radius:n}=this.value,s=hM,r=dM;return t||(i=e.getRelativePoint(i.x,i.y),n=e.getRelativeRadius(n),s=sM,r=rM),Px`
        <cc-flex-row>
            <cc-icon name="expr:fill-radial-gradient" padded right-gap></cc-icon>
            <cc-number-input title="Center X" .formatter=${s} .value=${i.x} data-axis="x" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Ng} flex>
                <cc-icon name="expr:x" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="Center Y" .formatter=${s} .value=${i.y} data-axis="y" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Ng} flex>
                <cc-icon name="expr:y" slot="before"></cc-icon>
            </cc-number-input>
            <cc-pin-point-button .valueMap=${ds} @change=${this.#Lg} left-gap quiet>
                <cc-icon name="expr:center-object-origin"></cc-icon>
            </cc-pin-point-button>
        </cc-flex-row>
        <cc-flex-row>
            <div fixed-32></div>
            <cc-number-input title="Radius" .formatter=${r} .value=${n} @start=${this.onStart} @end=${this.onEnd} @update=${this.#jg} fluid>
                <cc-icon name="expr:radius" slot="before"></cc-icon>
            </cc-number-input>
            <div flex></div>
            <div fixed-32></div>
        </cc-flex-row>`}#Lg(t){t.stopPropagation();const e=this.value,i=this.getSidePoint(t.detail,e.center);i&&this.doUpdate(e.withCenter(i),!0)}#Ng(t){t.stopPropagation();const e=t.target.dataset,i=this.value;let n=t.detail;const s=this.bounds;let r;s&&!this.isPinned&&(n="x"===e.axis?s.x+n*s.width:s.y+n*s.height),r="x"===e.axis?new ce(n,i.center.y):new ce(i.center.x,n),this.doUpdate(i.withCenter(r))}#jg(t){let e=t.detail;const i=this.bounds;i&&!this.isPinned&&(e=i.getAbsoluteRadius(e)),this.doUpdate(this.value.withRadius(e))}}class JD extends RD{renderSettings(t,e){let{start:i,end:n,startRadius:s,endRadius:r}=this.value,o=hM,a=dM;return t||(i=e.getRelativePoint(i.x,i.y),s=e.getRelativeRadius(s),n=e.getRelativePoint(n.x,n.y),r=e.getRelativeRadius(r),o=sM,a=rM),Px`
        <cc-flex-row>
            <cc-icon name="expr:fill-radial-focal-gradient" padded right-gap></cc-icon>
            <cc-number-input title="Start X" .formatter=${o} .value=${n.x} data-name="end" data-axis="x" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Ng} flex>
                <cc-icon name="expr:x1" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="Start Y" .formatter=${o} .value=${n.y} data-name="end" data-axis="y" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Ng} flex>
                <cc-icon name="expr:y1" slot="before"></cc-icon>
            </cc-number-input>
            <cc-pin-point-button .valueMap=${ds} @change=${this.#Lg} data-name="end" left-gap quiet>
                <cc-icon name="expr:center-object-origin"></cc-icon>
            </cc-pin-point-button>
        </cc-flex-row>
        <cc-flex-row>
            <div fixed-32></div>
            <cc-number-input title="End X" .formatter=${o} .value=${i.x} data-name="start" data-axis="x" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Ng} flex>
                <cc-icon name="expr:x2" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="End Y" .formatter=${o} .value=${i.y} data-name="start" data-axis="y" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Ng} flex>
                <cc-icon name="expr:y2" slot="before"></cc-icon>
            </cc-number-input>
            <cc-pin-point-button .valueMap=${ds} @change=${this.#Lg} data-name="start" left-gap quiet>
                <cc-icon name="expr:center-object-origin"></cc-icon>
            </cc-pin-point-button>
        </cc-flex-row>
        <cc-flex-row>
            <cc-icon name="expr:radius" padded right-gap></cc-icon>
            <cc-number-input title="Start radius" .formatter=${a} .value=${r} @start=${this.onStart} @end=${this.onEnd} @update=${this.#jg} data-name="end" flex>
                <cc-icon name="expr:r1" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="End radius" .formatter=${a} .value=${s} @start=${this.onStart} @end=${this.onEnd} @update=${this.#jg} data-name="start" flex>
                <cc-icon name="expr:r2" slot="before"></cc-icon>
            </cc-number-input>
            <div fixed-32></div>
        </cc-flex-row>
`}#Lg(t){t.stopPropagation();const e="start"===t.target.dataset.name,i=this.value,n=this.getSidePoint(t.detail,e?i.start:i.end);n&&(e?this.doUpdate(i.withStart(n),!0):this.doUpdate(i.withEnd(n),!0))}#Ng(t){t.stopPropagation();const e=t.target.dataset,i=this.value;let{start:n,end:s}=i,r=t.detail;const o=this.bounds;o&&!this.isPinned&&(r="x"===e.axis?o.x+r*o.width:o.y*r*o.height),"start"===e.name?n="x"===e.axis?new ce(r,n.y):new ce(n.x,r):s="x"===e.axis?new ce(r,s.y):new ce(s.x,r),this.doUpdate(i.withPosition(n,s))}#jg(t){let e=t.detail;const i=this.bounds;i&&!this.isPinned&&(e=i.getAbsoluteRadius(e));const n=this.value,s="start"===t.target.dataset.name;let{startRadius:r,endRadius:o}=n;s?r=e:o=e,this.doUpdate(n.withRadius(r,o))}}class qD extends RD{renderSettings(t,e){let{center:i,startAngle:n,arcLength:s}=this.value,r=hM;return t||(i=e.getRelativePoint(i.x,i.y),r=sM),Px`
        <cc-flex-row>
            <cc-icon name="expr:fill-conical-gradient" padded right-gap></cc-icon>
            <cc-number-input title="Center X" .formatter=${r} .value=${i.x} data-axis="x" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Ng} flex>
                <cc-icon name="expr:x" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="Center Y" .formatter=${r} .value=${i.y} data-axis="y" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Ng} flex>
                <cc-icon name="expr:y" slot="before"></cc-icon>
            </cc-number-input>
            <cc-pin-point-button .valueMap=${ds} @change=${this.#Lg} left-gap quiet>
                <cc-icon name="expr:center-object-origin"></cc-icon>
            </cc-pin-point-button>
        </cc-flex-row>
        <cc-flex-row>
            <cc-icon name="expr:radius" padded right-gap></cc-icon>
            <cc-number-input title="Start angle" .formatter=${uM} .value=${n} @start=${this.onStart} @end=${this.onEnd} @update=${this.#zg} data-name="start" flex>
                <cc-icon name="expr:angle" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="Arc length" .formatter=${uM} .value=${s} @start=${this.onStart} @end=${this.onEnd} @update=${this.#zg} data-name="length" flex>
                <cc-icon name="expr:roundness" slot="before"></cc-icon>
            </cc-number-input>
            <div fixed-32></div>
        </cc-flex-row>`}#Lg(t){t.stopPropagation();const e=this.value,i=this.getSidePoint(t.detail,e.center);i&&this.doUpdate(e.withCircle(i),!0)}#Ng(t){t.stopPropagation();const e=t.target.dataset,i=this.value;let n=t.detail;const s=this.bounds;let r;s&&!this.isPinned&&(n="x"===e.axis?s.x+n*s.width:s.y*n*s.height),r="x"===e.axis?new ce(n,i.center.y):new ce(i.center.x,n),this.doUpdate(i.withCircle(r))}#zg(t){let e=t.detail;"start"===t.target.dataset.name?this.doUpdate(this.value.withCircle(null,e,null)):this.doUpdate(this.value.withCircle(null,null,e))}}async function KD(t,e=""){const i=[];for(const[n,s]of Object.entries(t)){const t=e+n;customElements.define(t,s),i.push(customElements.whenDefined(t))}await Promise.all(i)}function XD(t){t??="",(t=t.trim())||(t=xI),function(t){t=(t??"").trim(),document.title!==t&&(document.title=t,by&&xy.setTitle(t))}(t)}function tE(t){return!Ll?.isWorkingOrPanning&&Nl(Cl(t))}function eE(t){return t.preventDefault(),t.returnValue=""}const iE={capture:!0};function nE(t){t?window.removeEventListener("beforeunload",eE,iE):window.addEventListener("beforeunload",eE,iE)}class sE{equals(t){return this.type===t.type}toJSON(){return this.id?this.id:{type:this.type,data:this.toJSONData()}}clone(t){if(this.id&&!t)return this;const e=this.cloneSelf();return e.#t=this.#t,e}#t;get path(){return this.#t??=this.computePath()}computePath(){const t=new Path2D;t.moveTo(0,0);for(let e=1;e<=990;e++){const i=e/1e3;t.lineTo(i,this.eval(i))}return t.lineTo(1,1),t}invalidate(){this.#t=void 0}}function rE(t){return new ce(1-t.x,1-t.y)}function oE(t){const e=[];for(let i=t.length-1;i>=0;i--)e.push(rE(t[i]));return e}function aE(t,e){return t.x-e.x}function lE(t){t.sort(aE);let e,i,n=t.length-1,s=ce.ZERO;for(let r=1;r<=n;r++)e=t[r-1],i=t[r],s.x===e.x&&e.x===i.x||s.y===e.y&&e.y===i.y?(t.splice(r-1,1),r--,n--):s=e;return n&&(e=t[n],(1===s.x&&1===e.x||1===s.y&&1===e.y)&&(t.splice(n,1),n--)),n&&t[0].isZero&&(t.shift(),n--),n&&1===t[n].x&&1===t[n].y&&(t.pop(),n--),t}function*cE(t,e){const i=(e+=1.0001)**t,n=1/((1-i)/(1-e)+i/2);let s=1/i;for(let i=1;i<=t;i++){const t=n*((1-e**i)/(1-e));yield[t,s],s*=e}}class uE extends sE{#Pg;#Tg;constructor(t,e){super(),this.h1=t,this.h2=e}get isLinear(){return a(this.h1.x,this.h1.y)&&a(this.h2.x,this.h2.y)}get inverse(){return new uE(rE(this.h2),rE(this.h1))}get type(){return 0}getTitle(t){return"Cubic-Bezier "+(t?"out":"in")}eval(t){return 0===t||1===t?t:(null==this.#Tg&&([this.#Pg,this.#Tg]=function(t,e,i,n){if(a(t,e)&&a(i,n))return[null,hE];const s=[{x:1+3*(t-i),y:1+3*(e-n)},{x:3*(i-2*t),y:3*(n-2*e)},{x:3*t,y:3*e}];return a(s[1].x,0)&&a(s[2].x,0)?[s,dE]:[s,fE]}(this.h1.x,this.h1.y,this.h2.x,this.h2.y)),this.#Tg(t,this.#Pg))}cloneSelf(){const t=new uE(this.h1,this.h2);return t.#Pg=this.#Pg,t.#Tg=this.#Tg,t}toJSONData(){return[this.h1,this.h2]}computePath(){const t=new Path2D;return t.moveTo(0,0),t.bezierCurveTo(this.h1.x,this.h1.y,this.h2.x,this.h2.y,1,1),t}invalidate(){super.invalidate(),this.#Pg=this.#Tg=void 0}equals(t){return super.equals(t)&&this.h1.equals(t.h1)&&this.h2.equals(t.h2)}}function hE(t){return t}function dE(t,e){const i=(t/e[0].x)**(1/3);return((e[0].y*i+e[1].y)*i+e[2].y)*i}function fE(t,e){const i=e[0].x,n=e[1].x,s=e[2].x;let r=t;for(let e=0;e<8;e++){const e=i*r*r*r+n*r*r+s*r-t;if(Math.abs(e)<=5e-5)break;const o=3*i*r*r+2*n*r+s;r-=2*e*o/(2*o*o-e*(6*i*r+2*n))}return((e[0].y*r+e[1].y)*r+e[2].y)*r}class pE extends sE{constructor(t){super(),this.steps=t}get type(){return 1}getTitle(t){return`${this.steps} steps ${t?"out":"in"}`}eval(t){return Math.ceil(t*this.steps)/this.steps}toJSONData(){return this.steps}cloneSelf(){return new pE(this.steps)}computePath(){return function(t){const e=new Path2D;let i=0,n=0;const s=1/t;e.moveTo(0,0);for(let r=0;r<t-1;r++)n+=s,e.lineTo(i,n),i+=s,e.lineTo(i,n);return e.lineTo(i,1),e.lineTo(1,1),e}(this.steps)}equals(t){return super.equals(t)&&this.steps===t.steps}}class gE extends sE{constructor(t=3,e=3){super(),this.oscillations=t,this.stiffness=e}get type(){return 3}getTitle(t){return`Elastic ${this.oscillations} ${t?"out":"in"}`}eval(t){return(0===this.stiffness?t:(Math.exp(this.stiffness*t)-1)/(Math.exp(this.stiffness)-1))*Math.sin(2*t*Math.PI*(this.oscillations+.25))}toJSONData(){return[this.oscillations,this.stiffness]}cloneSelf(){return new gE(this.oscillations,this.stiffness)}equals(t){return super.equals(t)&&this.oscillations===t.oscillations&&this.stiffness===t.stiffness}}class mE extends sE{constructor(t=3){super(),this.oscillations=t}get type(){return 5}getTitle(t){return`Sinc ${this.oscillations} ${t?"out":"in"}`}eval(t){return 0===t||1===t?t:(t=2*Math.PI*this.oscillations*(t-1),Math.sin(t)/t)}toJSONData(){return this.oscillations}cloneSelf(){return new mE(this.oscillations)}equals(t){return super.equals(t)&&this.oscillations===t.oscillations}}class vE extends sE{constructor(t=1.7){super(),this.amplitude=t}get type(){return 4}getTitle(t){return(1.7===this.amplitude?"Back ":`Back ${this.amplitude} `)+(t?"out":" in")}eval(t){return t*t*(t+this.amplitude*(t-1))}toJSONData(){return this.amplitude}cloneSelf(){return new vE(this.amplitude)}equals(t){return super.equals(t)&&this.amplitude===t.amplitude}}class yE extends sE{constructor(t=3,e=2){super(),this.bounces=t,this.stiffness=e}get type(){return 2}getTitle(t){return`Bounce ${this.bounces} ${t?"out":"in"}`}eval(t){const e=this.stiffness+1.0001,i=1-(1+e)*e**this.bounces/2,n=Math.floor(Math.log(1-t*i)/Math.log(e));return(1-(2*(t*i-1)/((1-e)*e**n)+(e+1)/(1-e))**2)/e**(this.bounces-n)}computePath(){return function(t,e){const i=new Path2D;i.moveTo(0,0);let n=0;for(const[s,r]of cE(t,e)){const t=(n+s)/2;i.quadraticCurveTo(t,2*r,s,0),n=s}return i.quadraticCurveTo((n+1)/2,1,1,1),i}(this.bounces,this.stiffness)}toJSONData(){return[this.bounces,this.stiffness]}cloneSelf(){return new yE(this.bounces,this.stiffness)}equals(t){return super.equals(t)&&this.bounces===t.bounces&&this.stiffness===t.stiffness}}class xE extends sE{constructor(t){super(),this.points=t}get type(){return 6}getTitle(t){return"Points "+(t?"out":" in")}get inverse(){return new xE(oE(this.points))}eval(t){if(t<0)return 0;let e=ce.ZERO;for(const i of this.points){if(t===i.x)return i.y;if(t<i.x)return e.y+(i.y-e.y)*(t-e.x)/(i.x-e.x);e=i}return t>=1?1:e.y+(1-e.y)*(t-e.x)/(1-e.x)}toJSONData(){return this.points}cloneSelf(){return new xE(this.points.slice())}equals(t){return super.equals(t)&&kt(this.points,t.points)}computePath(){return function(t){const e=new Path2D;e.moveTo(0,0);for(const i of t)e.lineTo(i.x,i.y);return e.lineTo(1,1),e}(this.points)}}const bE=new class extends uE{constructor(){super(new ce(.42,0),new ce(1,1)),this.id="ease"}getTitle(t){return"Ease "+(t?"out":"in")}},wE=new class extends uE{constructor(){super(new ce(.42,0),new ce(.58,1)),this.id="ease-both"}getTitle(t){return"Ease both"}},ME=new class extends pE{constructor(){super(1),this.id="step"}getTitle(t){return t?"Hold":"Jump"}eval(t){return 0===t?0:1}},SE=new Map;function kE(t){return SE.get(t)||null}function _E(t){for(const e of SE.values())if(t.equals(e))return e;return null}function IE(t){if("string"==typeof t)return kE(t);switch(t.type){case 0:return new uE(t.data[0],t.data[1]);case 1:return new pE(t.data);case 2:return new yE(t.data[0],t.data[1]);case 3:return new gE(t.data[0],t.data[1]);case 4:return new vE(t.data);case 5:return new mE(t.data);case 6:return new xE(t.data)}return null}SE.set(bE.id,bE),SE.set(wE.id,wE),SE.set(ME.id,ME);class CE{constructor(t,e){this.func=t,this.inverted=!!e}get title(){return this.func.getTitle(this.inverted)}get inverse(){return new CE(this.func,!this.inverted)}eval(t){return this.inverted?1-this.func.eval(1-t):this.func.eval(t)}clone(t){return new CE(this.func.clone(t),this.inverted)}toJSON(){return this.inverted?[this.func,1]:[this.func]}equals(t){return!!t&&this.inverted===t.inverted&&this.func.equals(t.func)}static fromJSON([t,e]){let i;return 2===e?(i=kE("ease-both"),e=0):(i=IE(t),i&&(i=_E(i)||i)),i?new CE(i,!!e):null}}const LE=new Set;function*NE(t){jE(LE,t.h1.x,t.h2.x),jE(LE,t.h1.y,t.h2.y),yield*LE,LE.clear()}function jE(t,e,i){const n=Oe(0,e,i,1);if(n)if("number"==typeof n)t.add(n);else for(const e of n)t.add(e)}const zE=new Map([[0,function(t){if(t.isLinear)return null;let e=0,i=1;for(const n of NE(t)){const s=De(0,t.h1.y,t.h2.y,1,n);e=Math.min(e,s),i=Math.max(i,s)}return 0===e&&1===i?null:[e,i]}],[3,function(t){const e=TE(2*t.oscillations-1,t.oscillations),i=TE(2*t.oscillations,t.oscillations)-e;let n=0;for(let s=1;s<100;s++)n=Math.min(n,t.eval(e+s*i/100));return n<0?[n,1]:null}],[4,function(t){return t.amplitude<=0?null:[-4/27*t.amplitude**3/(t.amplitude+1)**2,1]}],[5,function(){return[-.217234,1]}],[6,function(t){let e=0,i=1;for(const n of t.points)e=Math.min(e,n.y),i=Math.max(i,n.y);return e<0||i>1?[e,i]:null}]]);function PE(t){if(!t||!zE.has(t.func.type))return null;const e=zE.get(t.func.type)(t.func);if(!e)return null;if(t.inverted){const t=e[0];e[0]=1-e[1],e[1]=1-t}return e}function TE(t,e){return 2*t/(4*e+1)}function AE(t){return new CE(new pE(1),t)}function*DE(t,e){if(!t)return;const{func:i,inverted:n}=t;i instanceof pE?yield*function*(t,e,i){if(i===e){yield 0;for(let i=1;i<t;i++){const n=i/t;yield e?1-n:n}}}(i.steps,n,e):i instanceof xE&&(yield*function*(t,e,i){const n=i?"y":"x";let s=ce.ZERO;for(const i of e?oE(t):t)i[n]===s[n]&&(yield e?1-s.x:s.x),s=i;1===s[n]&&(yield e?1-s.x:s.x)}(i.points,n,e))}const EE=new Map([[0,function*(t){if(!t.isLinear)for(const e of NE(t)){const i=De(0,t.h1.y,t.h2.y,1,e);(i<=0||i>=1)&&(yield e)}}],[1,function*(t){const e=t.steps;for(let t=1;t<e;t++)yield t/e,yield t/e}],[4,function*(t){const e=t.amplitude/(t.amplitude+1);yield 1/3*e,yield 2/3*e,yield e}],[2,function*(t){let e=0;for(const[i]of cE(t.bounces,t.stiffness))yield(e+i)/2,yield i,e=i}],[3,function*(t){const e=2*t.oscillations;let i=0;for(let n=1;n<=e;n++){const e=TE(n,t.oscillations),s=i+(e-i)*RE;a(t.eval(s),0)||(yield s),yield e,i=e}}],[5,function*(t){const e=2*t.oscillations,i=e-1;let n=0;for(let s=1;s<=i;s++){const i=s/e,r=n+(i-n)*RE;a(t.eval(r),0)||(yield r),yield i,n=i}yield(n+1)/2}],[6,function*(t){for(const e of t.points)yield e.x}]]);function OE(t){return t?[...WE(t.func,t.inverted)]:[]}function*WE(t,e){if(EE.has(t.type))for(let i of EE.get(t.type)(t))0!==i&&1!==i&&(yield e?1-i:i)}const RE=.5+Math.E/100;function BE(t,e){return t?t.func instanceof xE?t.inverted?new CE(t.func.inverse):t:new CE(new xE($E(t.func,t.inverted,e))):null}const UE=new Map([[0,function(t,e){return t.isLinear?[ce.ZERO,ce.UNIT]:HE(t,e)}],[1,function({steps:t}){if(1===t)return[ce.ZERO,FE];const e=1/t;let i=0;const n=[ce.ZERO];for(let s=1;s<t;s++){const t=e*s;n.push(new ce(i,t),new ce(t,t)),i=t}return n.push(new ce(i,1)),n}],[6,function(t){return t.points}]]);function $E(t,e,i){const n=UE.has(t.type)?UE.get(t.type)(t,i):HE(t,i);return e?oE(n):n}const FE=new ce(0,1),VE=new Set;function HE(t,e){const i=e?100:5,n=[ce.ZERO];for(const e of function*(t,e){for(let e=1;e<t;e++){const i=e/t;VE.add(i),yield i}if(e)for(const t of e)!VE.has(t)&&t>0&&t<1&&(yield t);VE.clear()}(i,WE(t)))n.push(new ce(e,t.eval(e)));return n.push(ce.UNIT),lE(function(t,e){return t.length<=2?t:(e??=1,[...Ir(t=[...kr(t,e*=e)],e)])}(n.sort(aE),.01))}const GE=new Map([[0,function(t,e,i){if(t.isLinear)return"linear";e&&(t=t.inverse);const n=[t.h1.x,t.h1.y,t.h2.x,t.h2.y];for(const[t,e]of YE)if(kt(n,e))return t;return`cubic-bezier(${n.map((t=>f(t,i))).join(",")})`}],[1,function(t,e){return 1===t.steps?e?"step-end":"step-start":`steps(${t.steps},${e?"start":"end"})`}],[6,function(t,e,i){const n=[],s=e?oE(t.points):[...t.points];s.push(ce.UNIT);const r=s.length-1,o=[0];let a=ce.ZERO;for(let t=0;t<=r;t++){if(s[t].y!==a.y){const t=f(a.y,i);if(o.length){const e=o.map((t=>f(100*t,i,"%"))).join(" ");n.push(`${t} ${e}`),o.splice(0)}else n.push(`${t}`)}a=s[t],o.push(a.x)}return n.push("1 100%"),`linear(${n.join(",")})`}]]);function ZE(t,e=2){return t?(GE.has(t.func.type)||(t=BE(t,!0)),GE.get(t.func.type)(t.func,t.inverted,e)):"linear"}const YE=new Map([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]]]);class QE{constructor(t,e,i,n){this.animations=[],this.target=t,this.animations=e||[],this.in=i??null,this.out=n??null}dispose(){this.target=this.animations=null}get hasInOut(){return null!=this.in&&null!=this.out}setInOut(t,e){return(t!==this.in||e!==this.out)&&(t>e&&([t,e]=[e,t]),this.in=t,this.out=e,!0)}toJSON(){return{id:this.target.id,in:this.in,out:this.out,animations:this.animations}}copy(t,e){return new QE(t,this.animations.map(e?JE:qE),this.in,this.out)}getAnimationIndex(t){const e=this.animations;for(let i=0;i<e.length;i++)if(e[i].animator.id===t)return i;return-1}hasAnimation(t){return this.getAnimationIndex(t)>=0}getAnimation(t){const e=this.getAnimationIndex(t);return e>=0?this.animations[e]:null}addAnimation(t,e){const i=this.getAnimationIndex(t.animator.id),n=this.animations;return i>=0?n[i]!==t&&(n[i]=t,!0):(e?n.unshift(t):n.push(t),!0)}removeAllAnimations(){if(0===this.animations.length)return!1;const t=this.target,e=this.animations.splice(0);for(const i of e)i.animator.onAnimationRemoved(t,i);return!0}removeAnimation(t){const e=this.getAnimationIndex(t);if(-1===e)return!1;const i=this.animations[e];return this.animations.splice(e,1),i.animator.onAnimationRemoved(this.target,i),!0}removeAnimations(t){let e=!1;for(const i of t)this.removeAnimation(i)&&(e=!0);return e}moveAnimation(t,e){return rt(this.animations,this.getAnimationIndex(t),e)}moveAnimationIndex(t,e){return rt(this.animations,t,e)}eval(t){let e=!1;const i=this.target;i.visible!==this.isInOutVisible(t)&&(i.visible=!i.visible,e=!0);for(const i of this.animations)this.evalAnimation(i,t)&&(e=!0);return e}evalVisibility(t){const e=this.target;return e.visible!==this.isInOutVisible(t)&&(e.visible=!e.visible,!0)}evalAnimation(t,e){const i=this.target,n=t.animator;if(t.disabled)return!!n.onAnimationRemoved(i,t);const s=t.getValueAtOffset(e);if(null===s)return!!n.onAnimationRemoved(i,t);let r=!1;return n.setTargetValue(i,s)&&(r=!0),n.onAnimationUpdated(i,t)&&(r=!0),r}isInOutVisible(t){return t>=(this.in??0)&&t<(this.out??Number.POSITIVE_INFINITY)}countKeyframes(t){let e=0;for(const i of this.animations)!t&&i.disabled||(e+=i.keyframes.length);return e}fixKeyframes(t){let e=!1;for(const i of this.animations)i.fixKeyframes(t)&&(e=!0);return e}get isRemovable(){return 0===this.animations.length&&null==this.in&&null==this.out}clean(){let t=!1;const{target:e,animations:i}=this;for(let n=0;n<i.length;n++){const s=i[n];0===s.keyframes.length&&(i.splice(n,1),n--,t=!0,s.animator.onAnimationRemoved(e,s))}return t}}function JE(t){return t.clone(!0)}function qE(t){return t.clone(!1)}class KE{constructor(t,e=0,i=null,n){this.value=t,this.offset=e,this.easing=i,this.id=n||Ct()}clone(t){return new KE(this.value,this.offset,this.easing,t?null:this.id)}static fromJSON(t){return new KE(t.value,t.offset,t.easing)}withOffset(t,e){return new KE(this.value,t,this.easing,e?null:this.id)}withValue(t,e){return new KE(t,this.offset,this.easing,e?null:this.id)}withEasing(t,e){return new KE(this.value,this.offset,t,e?null:this.id)}toJSON(){return{value:this.value,offset:this.offset,easing:this.easing}}}function XE(t,e){const i=e.indexOf(t);return i<0||i+1>=e.length?null:e[i+1]}function tO(t,e){return t.offset-e.offset}function eO(t,e=!0){if(t.length<2)return!1;e&&t.sort(tO);const i=t.length-1,n=[],s=[];for(let e=i;e>0;e--)n.push(t[e].value),s.push(t[e-1].easing?.inverse||null);n.push(t[0].value),s.push(t[i].easing);for(let e=0;e<=i;e++)t[e].value=n[e],t[e].easing=s[e];return!0}class iO{constructor(t,e,i){this.disabled=!1,this.animator=t,this.keyframes=e??[],this.disabled=!!i}get minOffset(){return 0===this.keyframes.length?0:this.keyframes[0].offset}get maxOffset(){const t=this.keyframes.length-1;return t<0?0:this.keyframes[t].offset}sortKeyframes(t){null==t?this.keyframes.sort(tO):function(t,e){t.sort(((t,i)=>t.offset===i.offset?e.has(i)?e.has(t)?0:-1:e.has(t)?1:0:t.offset>i.offset?1:-1))}(this.keyframes,t)}reverseKeyframes(t,e){return eO(t??this.keyframes,e)}clone(t){const e=[];for(const i of this.keyframes)e.push(this.cloneKeyframe(i,t));return new this.constructor(this.animator,e,this.disabled)}cloneKeyframe(t,e){return new KE(this.animator.valueHandler.cloneValue(t.value),t.offset,t.easing,e?null:t.id)}toJSON(){return{animator:this.animator.id,keyframes:this.keyframes,disabled:this.disabled}}get length(){return this.keyframes.length}get isAnimated(){return!this.disabled&&this.keyframes.length>1}get hasKeyframes(){return this.keyframes.length>0}setKeyframeValue(t,e){t.value=this.animator.valueHandler.cloneValue(e)}setKeyframeEasing(t,e,i){return function(t,e,i){return e?t.easing?!e.equals(t.easing)&&(t.easing=i?e.clone():e,!0):(t.easing=i?e.clone():e,!0):!!t.easing&&(t.easing=null,!0)}(t,e,i)}getKeyframeAtIndex(t){return this.keyframes[t]||null}removeKeyframeAtIndex(t){const e=this.keyframes.splice(t,1);return e.length>0?e[0]:null}addKeyframe(t){return function(t,e){const i=t.offset,n=e.length;for(let s=0;s<n;s++){const n=e[s];if(i===n.offset)return e[s]=t;if(i<n.offset)return e.splice(s,0,t),t}return e.push(t),t}(t,this.keyframes)}removeKeyframe(t){const e=this.keyframes.indexOf(t);return-1!==e&&(this.keyframes.splice(e,1),!0)}removeKeyframes(t){return function(t,e){if(!e.length)return!1;let i,n=!1;for(const s of t)if(i=e.indexOf(s),-1!==i&&(e.splice(i,1),n=!0,!e.length))return!0;return n}(t,this.keyframes)}getKeyframeAtOffset(t){return function(t,e){const i=e.length;for(let n=0;n<i;n++){const i=e[n];if(t===i.offset)return i;if(i.offset>t)return null}return null}(t,this.keyframes)}fixKeyframes(t){return function(t,e){let i=t.length;if(0===i)return!1;let n,s=t[0],r=!1;for(let o=1;o<i;o++)n=t[o],s.offset===n.offset?(e.has(s)&&!e.has(n)?t.splice(o,1):(t.splice(o-1,1),s=n,o--),i--,r=!0):s=n;return r}(this.keyframes,t)}getIndexOfKeyframe(t){return this.keyframes.indexOf(t)}addKeyframeAtOffset(t,e,i=null){let n=this.getKeyframeAtOffset(t);return null!=n?(null!=e&&this.setKeyframeValue(n,e),null!=i&&(n.easing=i),n):null==e?this.addKeyframe(new KE(this.getValueAtOffset(t),t,i)):this.addKeyframe(this.createKeyframe(e,t,i))}getValueAtOffset(t){return function(t,e,i){let n=e.length-1;if(-1===n)return null;if(0===n||i<e[0].offset)return t.cloneValue(e[0].value);if(i>=e[n].offset)return t.cloneValue(e[n].value);for(;i<e[n].offset;)n--;if(e[n].offset===i)return t.cloneValue(e[n].value);let s=r(i,e[n].offset,e[n+1].offset);return e[n].easing&&(s=e[n].easing.eval(s)),t.interpolate(e[n].value,e[n+1].value,s)}(this.animator.valueHandler,this.keyframes,t)}createKeyframe(t,e,i=null){return new KE(this.animator.valueHandler.cloneValue(t),e,i)}*[Symbol.iterator](){yield*this.keyframes}}class nO{constructor(t,e,i,n){this.group=t,this.title=e,this.property=i,this.icon=n}get id(){return this.property.id}get valueHandler(){return this.property.handler}setTargetValue(t,e){return this.property.setValue(t,e)}createAnimation(t,e){return new iO(this,t,e)}onAnimationAdded(t,e){return!1}onAnimationRemoved(t,e){return!1}onAnimationUpdated(t,e){return!1}}const sO=new Map;function rO(t){return sO.get(t)||null}function oO(t,e){if(!sO.has(t))return null;const i=function(t,e){return md.get(t?.constructor)?.get(e)||null}(e,t);return i&&sO.get(i.id)||null}const aO=new Map;function lO(t){const e=t?.constructor;if(!e)return!1;if(aO.has(e))return aO.get(e);for(const i of sO.values())if(bd(t,i.property))return aO.set(e,!0),!0;return aO.set(e,!1),!1}function cO(t){sO.set(t.id,t)}function uO(t,e,i,n){cO(new nO(t,e,i,n))}function hO(t,e){for(const[i,n,s]of e)uO(t,i,n,s)}const dO=1e-4,fO=new Map;function pO(t,e){return a(t,e,dO)}function gO(t,e){return pO(t.x,e.x)&&pO(t.y,e.y)}function mO(t,e){if(t){if(!e)return!1}else if(!e)return!0;return pO(t.x,e.x)&&pO(t.y,e.y)}function vO(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!gO(t[i],e[i]))return!1;return!0}function yO(t,e){return t.type===e.type&&t.joint===e.joint&&gO(t.point,e.point)&&mO(t.handleIn,e.handleIn)&&mO(t.handleOut,e.handleOut)}function xO(t,e){if(!e)return t;for(const i of t)i.offset+=e;return t}function bO(t,e,i){return t.map(((t,n)=>(t=t.clone(),i&&(t.easing=null),t.value=e(t.value,n),t)))}function wO(t){return t.clone()}function MO(t,e){e??=kt;let i=t.length-1;for(let n=2;n<=i;n++){const s=t[n-2],r=t[n-1],o=t[n];e(s.value,r.value)?(s.easing=null,e(r.value,o.value)&&(t.splice(n-1,1),n--,i--)):SO(s,r)}if(i>0){const n=t[i-1],s=t[i];e(n.value,s.value)?(t.pop(),i--):SO(n,s)}return t[i].easing=null,t}function SO(t,e){if(t.offset===e.offset)return void(t.easing=null);const i=t.easing?.func;i instanceof uE&&(i.isLinear?t.easing=null:t.easing.inverted&&(t.easing=new CE(i.inverse,!1)))}function kO(t,e){let i=t.length-1;const n=(s=e,fO.has(s)?fO.get(s):s.sameValue);var s;for(let s=2;s<=i;s++){const r=t[s-2],o=t[s-1];if(r.easing||o.easing)continue;const a=t[s],l=(o.offset-r.offset)/(a.offset-r.offset);n(o.value,e.interpolate(r.value,a.value,l))&&(t.splice(s-1,1),s--,i--)}return t}function*_O(t,e,i,n,s){if(!n)if(e){const t=1e3/e;n=e=>P(e,t)}else n=Math.round;const r=[],o=new Map;let a=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(let i=0;i<t.length;i++)if(t[i]instanceof iO){if(r[i]=null,o.set(i,t[i]),e){const e=t[i].keyframes;a=Math.min(a,e[0].offset),l=Math.max(l,e[e.length-1].offset)}}else r[i]=t[i];if(o.size)if(e)for(const t of function(t,e,i,n){const s=new Set;s.add(t);const r=1e3/i,o=Math.ceil((e-t)/r);for(let e=1;e<o;e++)s.add(n(t+e*r));return s.add(e),s}(a,l,e,n)){for(const[e,i]of o)r[e]=i.getValueAtOffset(t);yield new KE(i(r),t)}else{const t=new Set,e=new Set,a=function(t,e,i,n,s){const r=[];s&&r.push(...s);for(const s of t)r.push(...IO(s,e,i,n));return new Set(r.sort(ot))}(o.values(),t,e,n,s);let l;for(const n of a){if(t.has(n)){for(const[t,e]of o)r[t]=e.getValueAtOffset(n-.001);yield new KE(i(r),n)}if(e.has(n)){for(const[t,e]of o)r[t]=e.getValueAtOffset(l+.001);yield new KE(i(r),l)}for(const[t,e]of o)r[t]=e.getValueAtOffset(n);yield new KE(i(r),n),l=n}}else yield new KE(i(r),0)}function*IO(t,e,i,n){const s=t.keyframes;let r,o,a=s[0];for(let t=1;t<s.length;t++){yield a.offset;const l=s[t],c=a.easing;if(!c){a=l;continue}const u=l.offset-a.offset;for(const t of OE(c))yield n(a.offset+t*u);o=!1;for(const t of DE(c,!0))r=n(a.offset+t*u),yield r,o?e.add(r):o=!0;o&&e.add(l.offset),o=!1;for(const t of DE(c,!1))r=n(a.offset+t*u),yield r,o?i.add(r):o=!0;o&&i.add(l.offset),a=l}yield a.offset}function*CO(t,e,i,n,s,r,o){o??=Math.round,yield new KE(t,i);for(const a of r)(a.x!==a.y||0!==a.x&&1!==a.x)&&(yield new KE(s.interpolate(t,e,a.y),o(i+a.x*n)))}fO.set(Zh,pO),fO.set(Yh,pO),fO.set(Qh,pO),fO.set(Jh,pO),fO.set(ld,(function(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!pO(t[i],e[i]))return!1;return!0})),fO.set(qh,gO),fO.set(rd,gO),fO.set(Xh,gO),fO.set(td,(function(t,e){return pO(t.angle,e.angle)&&gO(t,e)})),fO.set(Kh,vO),fO.set(ed,vO),fO.set(id,(function(t,e){return pO(t.r,e.r)&&pO(t.g,e.g)&&pO(t.b,e.b)&&pO(t.a,e.a)})),fO.set(cd,(function(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!yO(t[i],e[i]))return!1;return!0}));const LO=new uE(new ce(.33,1),new ce(.83,1)),NO=LO.inverse;function*jO(t,e,i,n,s,r,o,a,l){if(l??=Math.round,a){yield new KE(t,i,new CE(NO.clone()));let a=[...cE(r,o)].reverse();for(const t of a)t[0]=1-t[0],t[1]=1-t[1];a.push([1,1]);let[c,u]=a.shift();for(const[r,o]of a){const a=(c+r)/2;yield new KE(s.cloneValue(e),l(i+n*c),new CE(LO.clone())),yield new KE(s.interpolate(t,e,u),l(i+n*a),new CE(NO.clone())),c=r,u=o}}else{yield new KE(t,i,new CE(LO.clone()));let a=0;for(const[c,u]of cE(r,o)){const r=(a+c)/2;yield new KE(s.interpolate(t,e,u),l(i+n*r),new CE(NO.clone())),yield new KE(s.cloneValue(t),l(i+n*c),new CE(LO.clone())),a=c}}}function zO(t,e,i=50){let n=!1;const s=t.keyframes;if(s[0].offset<0)if(s[0].offset>-i)s[0].offset=0;else{const e=[];for(const i of TO(s[0],s[1],0,s[1].offset))i<s[1].offset&&e.push(new KE(t.getValueAtOffset(i),i));s.shift(),s.unshift(...e),n=!0}const r=s.length-1;if(s[r].offset>e)if(s[r].offset-e<i)s[r].offset=e;else{const i=[];for(const n of TO(s[r-1],s[r],s[r-1].offset,e))n>s[r-1].offset&&i.push(new KE(t.getValueAtOffset(n),n));s[r-1].easing=null,s.pop(),s.push(...i),n=!0}return s[s.length-1].easing=null,n}function PO(t,e,i,n){const s=t.keyframes;return xO(s,-e),zO(t,i-e,n),xO(s,e),t}function*TO(t,e,i,n,s){if(yield i,!t.easing)return void(yield n);s??=Math.round;const r=e.offset-t.offset,o=$E(t.easing.func,t.easing.inverted);for(const e of o){const o=s(t.offset+e.x*r);o===i?0!==e.y&&(yield o):o===n?1!==e.y&&(yield o):o>i&&o<n&&(yield o)}yield n}class AO extends iO{#Ag=null;#Dg=null;#Eg=null;#ot=0;get nodes(){return this.#Ag??=this.#Og()}get sizes(){return this.#Dg??=this.#Wg()}get lastAngle(){return this.#ot}#Og(){const t=this.keyframes,e=t.length,i=new Array(e);for(let n=0;n<e;n++)i[n]=t[n].value;return i}#Wg(){const t=this.nodes;return Fn(t,[0,t.length-1])[0]}#Rg(t){const e=this.keyframes;if(t>=e.length-1)return null;const i=this.#Eg??=new Map;if(i.has(t))return i.get(t);const n=function(t,e,i=64,n){return 1!==t.joint&&t.handleOut?1!==e.joint&&e.handleIn?function(t,e,i,n,s,r){r??=$e(t,e,i,n,1);const o=[];let a;for(let r=1;r<s;r++)a=r/s,o.push($e(t,e,i,n,a),a);return o.push(r,1),o}(t.point,t.handleOut,e.handleIn,e.point,i,n):Te(t.point,t.handleOut,e.point,i,n):1!==e.joint&&e.handleIn?Te(t.point,e.handleIn,e.point,i,n):null}(e[t].value,e[t+1].value,64,this.#Dg?.[t+1]);return i.set(t,n),n}invalidate(){this.#Eg?.clear(),this.#Ag=this.#Dg=null}clone(t){const e=super.clone(t);return e.#Ag=this.#Ag,e.#Dg=this.#Dg,e.#ot=this.#ot,this.#Eg&&(e.#Eg=new Map(this.#Eg)),e}reverseKeyframes(t,e){if(super.reverseKeyframes(t,e)){t??=this.keyframes;for(const e of t)(e.value.handleIn||e.value.handleOut)&&(e.value=Ki(e.value,e.value.handleOut,e.value.handleIn));return this.invalidate(),!0}return!1}removeKeyframe(t){return!!super.removeKeyframe(t)&&(this.invalidate(),!0)}removeKeyframes(t){return!!super.removeKeyframes(t)&&(this.invalidate(),!0)}removeKeyframeAtIndex(t){const e=super.removeKeyframeAtIndex(t);return e&&this.invalidate(),e}addKeyframe(t){if(this.keyframes.includes(t))return t;const e=super.addKeyframe(t);return this.invalidate(),e}fixKeyframes(t){return!!super.fixKeyframes(t)&&(this.invalidate(),!0)}setKeyframeValue(t,e){super.setKeyframeValue(t,this.#Bg(e,t.value)),this.invalidate()}setKeyframeEasing(t,e,i){return!!super.setKeyframeEasing(t,e,i)&&(this.invalidate(),!0)}sortKeyframes(t){const e=this.keyframes,i=e.slice();super.sortKeyframes(t);for(let t=0;t<i.length;t++)if(i[t]!==e[t])return void this.invalidate()}#Ug(t,e=!0){const i=this.keyframes;let n=i.length-1;if(-1===n)return null;if(0===n||t<i[0].offset)return 0;if(t>=i[n].offset)return n;for(;t<i[n].offset;)n--;if(i[n].offset===t)return n;let s=r(t,i[n].offset,i[n+1].offset);if(e&&i[n].easing&&(s=i[n].easing.eval(s)),0===s||1===s)return n+s;const o=this.sizes;let a=o[n+1]-o[n],l=s*a;if(s<0){const t=o[n]+l;if(0===t)return 0;if(t<0)return 0===o[1]?0:[0,t/o[1],!1];for(;--n>=0&&o[n]>t;);if(o[n]===t)return n;a=o[n+1]-o[n],l=t-o[n]}else if(s>1){const t=o[n]+l,e=i.length-1;if(t===o[e])return e;if(t>o[e])return o[e]===o[e-1]?e:[e-1,(t-o[e-1])/(o[e]-o[e-1]),!1];for(;++n<=e&&o[n]<t;);if(o[n]===t)return n;n--,a=o[n+1]-o[n],l=t-o[n]}if(a<=0)return[n,0,!0];const c=this.#Rg(n);return[n,c?Bi(c,l):l/a,!1]}getValueAtOffset(t){const e=this.#Ug(t,!0);if(null===e)return this.#ot=0,null;const i=this.keyframes;if("number"==typeof e)return this.#ot=this.#$g(e),i[e].value;if(e[2])return this.#ot=0,i[e[0]].value.point;if(e[1]<0){const t=Fi(i[0].value,i[1].value,-e[1]*this.sizes[1],!0);return this.#ot=t[1]*Et,t[0]}if(e[1]>1){const t=i.length-1,n=this.sizes,s=Fi(i[t-1].value,i[t].value,(e[1]-1)*(n[t]-n[t-1]),!1);return this.#ot=s[1]*Et,s[0]}const{x:n,y:s,angle:r}=(o=i[e[0]].value,a=i[e[0]+1].value,l=e[1],1!==o.joint&&o.handleOut?1!==a.joint&&a.handleIn?function(t,e,i,n,s){return{x:De(t.x,e.x,i.x,n.x,s),y:De(t.y,e.y,i.y,n.y,s),angle:Be(t,e,i,n,s)*Et}}(o.point,o.handleOut,a.handleIn,a.point,l):Le(o.point,o.handleOut,a.point,l):1!==a.joint&&a.handleIn?Le(o.point,a.handleIn,a.point,l):function(t,e,i){return{x:he(t.x,e.x,i),y:he(t.y,e.y,i),angle:de(t,e)*Et}}(o.point,a.point,l));var o,a,l;return this.#ot=r,new ce(n,s)}#$g(t,e){const i=this.keyframes,n=i.length-1;return n<=0?0:(t>=n&&(t=n-1,e=1),s=i[t].value,r=i[t+1].value,o=e??0,(1!==s.joint&&s.handleOut?1!==r.joint&&r.handleIn?Be(s.point,s.handleOut,r.handleIn,r.point,o):Ie(s.point,s.handleOut,r.point,o):1!==r.joint&&r.handleIn?Ie(s.point,r.handleIn,r.point,o):de(s.point,r.point))*Et);var s,r,o}getOrientationAtOffset(t){const e=this.#Ug(t,!0);return null==e?0:"number"==typeof e?this.#$g(e):e[2]?0:this.#$g(e[0],e[1])}addKeyframeAtOffset(t,e=null,i=null){if(null==e||e instanceof ce){const n=this.getKeyframeAtOffset(t);if(n)return null==e||(n.value=un(n.value,e.x,e.y),null!=i&&(n.easing=i),this.invalidate()),n;const s=this.keyframes,r=s.length-1;if(r<0)return null==e?null:this.addKeyframe(new KE(this.#Bg(e),t,i));if(t<s[0].offset)return this.addKeyframe(new KE(this.#Bg(e||s[0].value.point),t,i));if(t>s[r].offset)return this.addKeyframe(new KE(this.#Bg(e||s[r].value.point),t,i));const[o,a]=this.#Ug(t,!1),l=Vi(s[o].value,s[o+1].value,a);s[o].value=l[0];const c=e?un(l[1],e.x,e.y):l[1];return s[o+1].value=l[2],this.addKeyframe(new KE(c,t,i))}return super.addKeyframeAtOffset(t,e,i)}createKeyframe(t,e,i=null){return t instanceof ce&&(t=this.#Bg(t)),super.createKeyframe(t,e,i)}#Bg(t,e){return t instanceof Di?t:e?un(e,t.x,t.y):new Di(t,0,0,null,null)}}class DO extends nO{createAnimation(t,e){return new AO(this,t,e)}onAnimationUpdated(t,e){return t.setAutoOrientAngle(e.lastAngle)}onAnimationRemoved(t,e){return t.setAutoOrientAngle(0)}}class EO{[Symbol.iterator](){return this.map.values()}constructor(t){this.fps=60,this.duration=1e3,this.map=new Map,this.id=t||Ct()}isAnimated(t){return this.map.has(t)}getEntry(t){return this.map.get(t)||null}addEntry(t){if(this.map.has(t))return this.map.get(t);const e=new QE(t);return this.map.set(t,e),e}removeEntry(t){const e=this.map.get(t);return!!e&&(this.map.delete(t),e.removeAllAnimations(),e.dispose(),!0)}getAnimation(t,e){return this.map.get(t)?.getAnimation(e)}createAnimation(t,e){const i=oO(e,t);return i?i.createAnimation():null}addAnimation(t,e){if(!this.map.has(t)){const i=new QE(t,[e]);return this.map.set(t,i),!0}return this.map.get(t).animations.push(e),!0}removeAnimation(t,...e){const i=this.map.get(t);if(!i)return!1;if(0===e.length){if(!i.removeAllAnimations())return!1}else if(!i.removeAnimations(e))return!1;return i.isRemovable&&(this.map.delete(t),i.dispose()),!0}updateTarget(t,e,i){const n=this.map.get(t);if(!n)return!1;const s=n.getAnimation(e);return!!s&&n.evalAnimation(s,i)}eval(t){if(!this.map.size)return!1;let e=!1;for(const i of this.map.values())i.eval(t)&&(e=!0);return e}copy(t,e){const i=new EO(this.id);i.title=this.title,i.fps=this.fps,i.duration=this.duration;for(const n of this.map.values()){const s=t.find(n.target.id);s&&i.map.set(s,n.copy(s,e))}return i}targets(){return this.map.keys()}toJSON(){return{id:this.id,title:this.title||void 0,fps:this.fps,duration:this.duration,animated:this.map.size?[...this.map.values()]:void 0}}applyJSON(t,e){const i=t.startTime||0,n=t.endTime??i+3e3;this.title=t.title,this.duration=t.duration||n-i,this.fps=t.fps||60,WO(t.animated,this.map,e,null,-i)}dispose(){if(this.map){for(const t of this.map.values())t.dispose();this.map.clear(),this.map=this.title=null}}}const OO=new Map;function WO(t,e,i,n,s){if(!t?.length)return!1;let r=!1;for(const o of t){if(!o)continue;let t=o.id;if(n&&(t=n.get(t)),!t)continue;const a=i.find(t);if(!a||e.has(a)||!lO(a))continue;const l=[],c=o.animations;if(c?.length)for(const t of c){const e=t.keyframes;if(!e?.length)continue;if(s)for(const t of e)t.offset+=s;let i=t.animator;if(OO.has(i)){const e=OO.get(i);if(i=e[0],l.find((t=>t.animator.id===i)))continue;if(e[1])for(const i of t.keyframes)i.value=e[1](i.value)}const n=oO(i,a);if(!n)continue;const r=n.createAnimation(e,t.disabled);r&&l.push(r)}const u=new QE(a,l,o.in,o.out);u.isRemovable?u.dispose():(e.set(a,u),r=!0)}return r}class RO extends lg{constructor(){super(...arguments),this.main=null}copy(t){const e=new RO;e.main=this.main;for(const i of this.all())e.add(i.copy(t,!1));return e}toJSON(){if(this.size)return{main:this.main,list:[...this.all()]}}static fromJSON(t,e){const i=new this(function*(t,e){if(t?.length)for(const i of t){const t=new EO(i.id);t.applyJSON(i,e),yield t}}(t?.list,e.content.document));return i.main=t?.main||null,i}}const BO=Symbol(),UO=Symbol(),$O=Symbol(),FO=Symbol(),VO=Symbol(),HO=Symbol(),GO=Symbol(),ZO=Symbol();let YO=null,QO=null;function JO(t){t.title??="Main";const e=new RO;return e.add(t),e.main=t.id,e}Mo({id:"timeline",deps:["document"],priority:100,init:t=>(t||(t=new EO),t instanceof EO?JO(t):t),copy:(t,e)=>t.copy(e),delete:null,update(t){YO=t},serialization:Bo(100,(()=>YO),((t,e)=>t?t instanceof EO?JO(t):t instanceof RO?t:RO.fromJSON(t,e):JO(new EO)))}),So({id:"selected-timeline",priority:100,get:()=>QO?.id||null,set(t){t??=YO?.main,QO=t&&YO?.has(t)?YO.get(t):null}});class qO{#Fg=0;start(){this.#Fg=this.#Vg()}hasChanged(){return this.#Fg!==this.#Vg()}#Vg(){if(!QO)return 0;let t=0;for(const e of QO)t+=e.countKeyframes();return t}}const KO=ha(UO),XO=new Set;function tW(){return!XO.size}function eW(){return!!XO.size&&(XO.clear(),KO(),!0)}function iW(t){return XO.has(t)}function nW(t){return!!XO.has(t)&&(XO.delete(t),KO(),!0)}function sW(t){if(!XO.size)return!1;let e=XO.size,i=!1;for(const n of t)if(XO.delete(n)&&(i=!0,0==--e))break;return!!i&&(KO(),!0)}function rW(t){if(!XO.size)return!1;let e=XO.size,i=!1;for(const n of t)for(const t of n.keyframes)if(XO.delete(t)&&(i=!0,0==--e))return!0;return!!i&&(KO(),!0)}function oW(t,e){let i=!1;!e&&XO.size>0&&(XO.clear(),i=!0);for(const e of t)XO.has(e)||(XO.add(e),i=!0);return!!i&&(KO(),!0)}function aW(t,e){const i=XO.has(t);return e?!i&&(XO.add(t),KO(),!0):!(i&&1===XO.size||(XO.clear(),XO.add(t),KO(),0))}function lW(t){return t.id}So({id:"keyframe-selection",priority:200,get:function(){return XO.size?[...XO].map(lW):null},set:function(t){if(XO.clear(),!t?.length)return;const e=new Set(t);for(const t of QO)for(const i of t.animations)if(!i.disabled)for(const t of i.keyframes)if(e.has(t.id)&&(XO.add(t),e.delete(t.id),!e.size))return}}),Yr(BO,eW),Yr(FO,(([t,e])=>{t===QO&&rW(e)})),Yr(Yc,(()=>{XO.size&&Au()&&rW(function*(){for(const[t,e]of QO.map.entries())Hu(t)||(yield*e.animations)}())}));let cW=0,uW=!1,hW=!0,dW=!1,fW=1;const pW=[0,0];let gW=!1;const mW=new Set;function vW(t,e){if(mW.has(e))return!1;mW.add(e);try{return e.eval(t)}finally{mW.delete(e)}}function yW(t){return t=gW?n(t,pW[0],pW[1]):n(t,0,QO.duration),QO?function(t){return P(t,1e3/QO.fps)}(t):t}function xW(t,e){t??=cW,e&&(t=yW(t)),t!==cW&&(cW=t,Zr($O,cW)),QO&&vW(cW,QO)&&IW()}function bW(t,e){e<t&&([t,e]=[e,t]),t<0&&(t=0),e>QO?.duration&&(e=QO.duration),pW[0]=t,pW[1]=e,gW=t!==e}function wW(){pW[0]=pW[1]=0,gW=!1}function MW(){return gW?pW:[0,QO.duration]}Yr(eo,(t=>{let e=0;0===t?(wW(),dW=!1,fW=1,hW=!0):(gW&&bW(pW[0],pW[1]),e=yW(cW)),xW(e,!1)})),Yr(BO,(()=>{wW()}));let SW=0;function kW(){if(uW)return;uW=!0,Zr(ZO,!0),jl(!0);let t=cW;const[e,i]=MW(),n=1e3/QO.fps;(t<e||t>=P(i-n,n))&&(t=e,xW(t,!1));let s=null,r=null;SW=requestAnimationFrame((function o(a){r??=a;let l=P(t+(a-r)*fW,n);if(l>=i){if(!hW){const t=P(i-n,n);return t!==cW&&xW(t,!1),_W()}l=e,r=null,t=e}l!==s&&(s=l,l!==cW&&xW(l,!1)),SW=requestAnimationFrame(o)}))}function _W(){uW&&(SW&&(cancelAnimationFrame(SW),SW=0),jl(!1),uW=!1,Zr(ZO,!1),IW())}function IW(){Cd(Up)}const CW=new es([]),LW=new Set;let NW=null,jW=null;function zW(){let t=oh();if(t?.isTransformable||(t=null),t===NW){const e=DW(t);return e!==jW&&(jW=e,EW(),!0)}return NW=t,jW=DW(t),EW(),!0}function PW(){if(LW.clear(),jW)for(let t=0,e=jW.keyframes.length;t<e;t++)iW(jW.keyframes[t])&&LW.add(t)}function TW(){if(!jW)return null;const t=[];for(const e of jW.keyframes)iW(e)&&t.push(e);return t}function AW(){if(!jW)return;const t=jW.getKeyframeAtOffset(cW);t&&aW(t,!1)}function DW(t){if(!t)return null;const e=QO.getAnimation(t,Ed.id);return!e||e.disabled?null:e}function EW(t){t&&!jW&&NW&&(jW=DW(NW));const e=CW.nodes;if(!jW)return LW.clear(),void(e.length&&(e.splice(0),CW.invalidate()));let i=!1;const n=jW.keyframes;if(n.length!==e.length){e.splice(0);for(let t=0,i=n.length;t<i;t++)e.push(n[t].value);i=!0}else for(let t=0,s=e.length;t<s;t++)e[t].equals(n[t].value)||(e[t]=n[t].value,i=!0);i&&(CW.invalidate(),PW())}const OW=[0,null];function WW(t){return null!=t.percent?Ua?"node-add":"node-mold":null!=t.handle?Ua?"node-sub":"node-move":Ua&&!Ra?"node-sub":"node-move"}function RW(t,e){return t.element===e.element&&t.index===e.index&&t.handle===e.handle&&!(!t.node||!e.node)&&t.node.equals(e.node)}function BW(){if(CW.isEmpty)return;const t=Mu(NW);FL(CW.path,t),YL(CW.nodes,LW,t),GL(CW.nodes,LW,t)}function UW(t,e){return a(t,e)?1:a(t,0)||a(e,0)?t>e?1:-1:t/e}function $W(t,e,i){return ce.fromDirection(t.getDirectionTo(e),t.distanceTo(e)+i,t)}function FW(t){const e=Mu(t);return e?e.transformPoint(t.position):t.position}function VW(t,e){const i=Wc("transform-origin-radius"),n=Oc("transform-origin"),s=FW(e);let r=null;const o=e.totalRotate%360*Math.sign(e.globalMatrix.a*e.globalMatrix.d);o&&(r=(new hi).translate(s.x,s.y).rotate(o).translate(-s.x,-s.y));const a=1.5*i,l=Ze.fromPoints([{x:s.x,y:s.y-a},{x:s.x+a,y:s.y},{x:s.x,y:s.y+a},{x:s.x-a,y:s.y}],r);t.drawCircle(s,1.1*i,Ec("transform-origin-bg")),t.drawCircle(s,i,n),t.drawLine(l.points[0],l.points[2],n),t.drawLine(l.points[1],l.points[3],n)}class HW extends og{#Hg=0;get seek(){return this.#Hg}set seek(t){this.#Hg!==t&&(this.#Hg=t,this.invalidate())}getReferencePictureOptions(){return{time:this.#Hg,relative:!0}}cloneProperties(t){super.cloneProperties(t),t.#Hg=this.#Hg}applyJSON(t){this.#Hg=t.seek||0,super.applyJSON(t)}toJSON(){const t=super.toJSON();return this.#Hg&&(t.seek=this.#Hg),t}}const GW="timeline-folding",ZW=ha(GO);function YW(t){return t??=Oo,t[GW]??=new Set}function QW(t){return!YW().has(t.id)}function JW(t,e,i){if(!t.size)return!1;let n=!1;i&&t.has(e.id)&&(t.delete(e.id),n=!0);let s=e.parent;for(;s&&!s.isDocument;)t.has(s.id)&&(t.delete(s.id),n=!0),s=s.parent;return n}function qW(t){if(!t)return function(){const t=YW();return!!t.size&&(t.clear(),ZW(),!0)}();const e=YW(),i=e.size;for(const t of rh())JW(e,t,!0);return i!==e.size&&(ZW(),!0)}function KW(t){const e=YW(),i=e.size;if(!t){for(const t of QO.targets())e.has(t.id)||e.add(t.id);for(const t of $c.children())e.has(t.id)||e.add(t.id)}for(const t of rh())e.has(t.id)||e.add(t.id);return i!==e.size&&(ZW(),!0)}xo({id:GW,serialization:Bo(101,(function(){!function(){const t=YW();for(const e of t)$c.find(e)||t.delete(e)}();const t=YW();return t.size?t:null}))});const XW=new Map([[Kp,[function(t,[,,e]){return[Vd.getValue(t),e instanceof iO||!e.isZero]},function([t,e,i],[n,s]){const r=function(t,e,i){return t.isZero?ce.ZERO:new ce(-t.x*e,-t.y*i)}(n,t,e);return Jn(r.x,r.y,t,e,i.value,!s)},[$f,Ff,Vf]]],[Zp,[function(t){return Vd.getValue(t)},function([t,e],i){const n=function(t,e,i){return gs(t)?ce.ZERO:new ce(e*(.5-t.x),i*(.5-t.y))}(i,t,e);return function(t,e,i,n){const s=i/2,r=n/2,o=s*Gn,a=r*Gn;return[Qi(1,new ce(t+s,e),new ce(t+s,e-a),new ce(t+s,e+a)),Qi(0,new ce(t,e+r),new ce(t+o,e+r),new ce(t-o,e+r)),Qi(0,new ce(t-s,e),new ce(t-s,e+a),new ce(t-s,e-a)),Qi(3,new ce(t,e-r),new ce(t-o,e-r),new ce(t+o,e-r))]}(n.x,n.y,t,e)},[Gf,Zf]]],[qp,[null,function([t,e]){return qn(t,e)},[ep,ip]]],[tg,[null,function([t]){return qn(t,!1)},[Xf]]],[Xp,[function(t,[,,,e]){return[Vd.getValue(t),e instanceof iO||0!=e]},function([t,e,i,n],[s,r]){return nR(Xn(t,i,n,e,!r),s)},[rp,lp,op,ap]]],[eg,[function(t,[,,,,,,e,i]){return[Vd.getValue(t),e instanceof iO||0!=e||i instanceof iO||0!=i]},function([t,e,i,n,s,r,o,a],[l,c]){return nR(Kn(t,i,n,o,a,s,r,e,!c),l)},[up,vp,dp,hp,mp,gp,pp,fp]]]]);function tR(t){return XW.has(t.constructor)?XW.get(t.constructor)[2]:null}function eR(t,e,i){if(!XW.has(t.constructor))return null;const[n,s]=XW.get(t.constructor);return iR(e,s,n?.(t,e),i)}function iR(t,e,i,n){n??=60;const s=[..._O(t,n,(t=>e(t,i)),It)];s.length>1&&(MO(s),kO(s,cd));const r=1e3/n;for(const t of s)t.offset=P(t.offset,r);return MO(s),s}function nR(t,e){if(gs(e))return t;const i=ps(e,function(t){return Ve.fromIterablePoints(function*(t){let e=null,i=null;for(const n of t)e&&1!==n.type?(yield*Wi(e,n),3===n.type&&(yield*Wi(n,i)),e=n):i=e=n}(t),void 0)}(t));return i.isZero?t:mn(t,i.x,i.y)}function sR(t,e=!1){return rO(Hd.id).createAnimation(t,e)}const rR=new Map([[Hd.id,function(t,e){if(t.length!==e.length)return!1;for(let i=0,n=t.length;i<n;i++)if(!Yi(t[i],e[i]))return!1;return!0}],[ep.id,vs.canInterpolatePoints]]),oR=new Map([[Ed.id,(t,e)=>{if(!t)return null;let i=e.parent?.globalMatrix;return!i||i.isIdentity?null:(i=i.clone().inverse(),t=>{let e=t.value;e=e instanceof Di?Ji(e,i):i.point(e.x,e.y),t.value=e})}]]);function aR(t,e=null,i=!1,n){if(!QO||tW())return;let s=XO.size;for(const r of QO){const o=n?[...r.animations]:r.animations;for(const n of o){if(n.disabled)continue;let o=null;for(const t of n.keyframes)if(iW(t)&&((o??=[]).push(i?t.clone():t),0==--s))break;if(o?.length){if(o.sort(tO),null!=e){const t=e-o[0].offset;if(0!==t)for(const e of o)e.offset+=t}if(!1===t(r,n,o))return}if(s<=0)return}}}function lR(){if(tW())return!1;zo();let t=null,e=!1;if(aR(((i,n,s)=>{n.removeKeyframes(s)&&(e=!0),n.hasKeyframes?i.evalAnimation(n,cW):(i.removeAnimation(n.animator.id),i.isRemovable&&(t??=[]).push(i),e=!0)}),null,!1,!0),eW(),t?.length)for(const e of t)QO.map.delete(e.target),e.dispose();return e&&Zr(VO),!0}function cR(t){if(tW())return!1;zo();let e=!1;return aR(t?(i,n,s)=>{if(0===s.length)return;let r=!1;for(const e of s)uR(n,e)&&n.setKeyframeEasing(e,t,!0)&&(r=!0);r&&(e=!0,i.evalAnimation(n,cW))}:(t,i,n)=>{if(0===n.length)return;let s=!1;for(const t of n)uR(i,t)&&i.setKeyframeEasing(t,null)&&(s=!0);s&&(e=!0,t.evalAnimation(i,cW))},null,!1),e&&Zr(VO),e}function uR(t,e){const i=function(t,e){const i=e.indexOf(t);return i<=0?null:e[i-1]}(e,t.keyframes);if(!i)return!0;const n=XE(e,t.keyframes);return n&&iW(n)||!iW(i)}function hR(t,e,i){const n=t.map;if(!n.has(e)||n.has(i)||!lO(i))return!1;const s=[],r=n.get(e);for(const t of r.animations)a=i,(o=t.animator)===oO(o.id,a)&&s.push(t.clone(!0));var o,a;return!(0===s.length&&!r.hasInOut||(n.set(i,new QE(i,s,r.in,r.out)),0))}function dR(t,e,i){const n=t.getEntry(e);if(!n||!oO(Hd.id,i))return!1;const s=function(t,e,i){if(t instanceof qp||t instanceof tg)return function(t,e){if(!e)return null;let i,n=!1;t instanceof qp?(i=ep,n=t.isClosed):i=Xf;const s=e.getAnimation(i.id);if(!s)return null;const r=sR(s.keyframes.map((t=>new KE(qn(t.value,n),t.offset,t.easing?.clone()))),s.disabled);return e.removeAnimation(i.id),r}(t,e);if(!XW.has(t.constructor))return null;const[n,s,r]=XW.get(t.constructor),o=function(t,e,i,n,s,r){const o=[];for(const n of i){const i=e?.getAnimation(n.id);i&&!i.disabled?1===i.length?o.push(i.keyframes[0].value):o.push(i):o.push(n.getValue(t))}return iR(o,s,n?.(t,o),r)}(t,e,r,n,s,i);if(!o)return null;if(e)for(const t of r)e.removeAnimation(t.id);return sR(o,!1)}(e,n,t.fps);return!!s&&(1===s.keyframes.length?Hd.setValue(i,s.keyframes[0].value):t.addAnimation(i,s))}function fR(t,e,i){if(function(t,e,i){const n=t.map;!n.has(e)||e===i||e.type!==i.type||n.has(i)||n.set(i,n.get(e).copy(i,!0))}(t,e,i),e.supportsFilters&&e.filters&&fR(t,e.filters,i.filters),!e.supportsChildren||!e.hasChildren)return;const n=[...i.children()];for(const i of e.children())fR(t,i,n.shift())}function pR(t,e){t.isAnimated(e)&&gR(t,e);for(const i of[...t.targets()])e.contains(i)&&gR(t,i)}function gR(t,e){const i=t.getEntry(e);i&&(t===QO&&rW(i.animations),t.removeEntry(e))}function mR(t,e,i){let n=!1;for(const s of i){const i=t.getAnimation(e,s);i&&(sW(i.keyframes),t.removeAnimation(e,s),n=!0)}return n}function vR(t,e,i){if(!t.isAnimated(e))return;let n=0;for(const s of i){hR(t,e,s);const i=t.getAnimation(s,Hd.id);if(i){const t=s.nodes.length;for(const e of i.keyframes)e.value=e.value.slice(n,n+t);n+=t}}}const yR=new Map([["opacity",[Pd]],["position",[Ed]],["anchor",[Od]],["scale",[Wd]],["rotate",[Rd]],["skewAngle",[Bd]],["skewAxis",[Ud]],["fill",[qd]],["fillOpacity",[Jd]],["strokeBrush",[tf]],["strokeOpacity",[Xd]],["strokeLineWidth",[ef]],["strokeDashArray",[of]],["strokeDashOffset",[af]],["nodes",[Hd]],["points",[Xf,ep]],["width",[Gf,$f,Jf]],["height",[Zf,Ff,qf]],["radius",[Vf,op]],["sides",[rp,up]],["angle",[lp,vp]],["cornerRadius",[ap]],["outerRadius",[hp]],["innerRadius",[dp]],["outerCornerRadius",[fp]],["innerCornerRadius",[pp]],["outerRotate",[gp]],["innerRotate",[mp]]]);function xR(t,e){if(!yR.has(t))return null;for(const i of yR.get(t))if(bd(e,i))return rO(i.id);return null}function bR(t,e=!1){return function(){return CE.fromJSON([t,e])}}function wR(t){return function(e){const i=e.shape;if(!i.isDistorted)return t.fromJSON(e);const n=es.fromSkPath(i.convertToPath(),!0);return i.dispose(),e.shape=n,Jp.fromJSON(e)}}function MR(t,e){const i=qg.fromJSON(t);let n;if(t.timeline){n=new EO,n.applyJSON(t.timeline,i);const s=t.timeline.collapsed;s&&(e.global["timeline-folding"]=s)}else t.animationMap&&(n=new EO,function(t,e,i){const n=i.startTime||0,s=i.endTime||n+3e3;t.duration=s-n,t.fps=30;const r=i.animations;if(!r)return;const o=t.map;for(const[t,i]of Object.entries(r)){if(!i?.length)continue;const n=e.find(t);if(!n||!lO(n)||o.has(n))continue;const s=[];for(const t of i){const e=t?.keyframes;if(!e?.length)continue;const i=xR(t.property,n);if(!i)continue;const r=i.createAnimation(e,t.disabled);r&&s.push(r)}s.length>0&&o.set(n,new QE(n,s))}}(n,i,t.animationMap));if(t.grid&&(e.content.grid=t.grid),t.guides&&(e.content.guides=t.guides),t.artboards){const i=t.artboards;e.content.board=i.first.bounds,i.dispose(),delete t.artboards}else t.board&&(e.content.board=t.board);return n&&(e.content.timeline=n),i}J([CE,"Easing"],[KE,"Keyframe"]),K(HW,null,null,"SymbolElement",!0),Q("ConicalGradientBrush",(function(){return gi.BLACK})),Q("StyledTextElement",(function(t){if(t.children){for(const e of t.children)e.dispose();delete t.children}return Ig.fromJSON(t)})),Q("TextElement",(function(t){const e=t.paragraph,i=e.blocks.shift(),n=e.source,s=e.matrix;t.paragraph=new fr(n,e.style,i),e.dispose();const r=Ig.fromJSON(t);return s&&!s.isIdentity&&r.setTransformMatrix(s.preMultiply(r.localMatrix)),r})),Q("RectElement",wR(Kp)),Q("EllipseElement",wR(Zp)),Q("RegularPolygonElement",wR(Xp)),Q("StarElement",wR(eg)),Q("Document",MR),Q("AnimationDocument",MR),Q("SingleBoardDocument",MR),Q("AnimatedSymbolElement",(t=>HW.fromJSON(t))),Q("LinearEasing",(()=>null)),Q("StepStartEasing",bR("step")),Q("StepEndEasing",bR("step",!0)),Q("CubicEaseIn",bR("ease")),Q("CubicEaseOut",bR("ease",!0)),Q("CubicEaseInOut",bR("ease-both")),Yr(VO,(()=>{uW||Cd(Up)})),Yr(Hc,(t=>{for(const e of YO)pR(e,t)})),Yr(Zc,(function([t,e]){for(const i of YO)fR(i,t,e)})),Yr(Gc,(function([t,e]){for(const i of YO)hR(i,t,e),dR(i,t,e)}));const SR=[Hd.id];Yr(a_,(function(t){for(const e of YO)mR(e,t,SR)}));const kR=Object.values(Fd).map((t=>t.id));var _R,IR;function CR(t){return!t.disabled&&t.animator.id.startsWith("node.transform.")}Yr(r_,(function(t){for(const e of YO)mR(e,t,kR)})),Yr(o_,(function([t,e]){for(const i of YO)vR(i,t,e)})),Yr(fM,(t=>{const e=t.content?.document;e&&Fg(e)})),Yr(pM,(t=>{for(const e of t)Fg(e);gh(t)})),_R=function(t,e,i){const n=cW;let s=QO?.getAnimation(t,e.id),r=!1;if(s){if(s.disabled)return e.setValue(t,i)}else{if(!dW||!lO(t))return e.setValue(t,i);if(s=QO.createAnimation(t,e.id),!s||!QO.addAnimation(t,s))return e.setValue(t,i);0!==n&&(s.addKeyframeAtOffset(0,e.getValue(t)),r=!0)}let o=s.getKeyframeAtOffset(n);if(o){if(e.handler.sameValue(o.value,i)){const e=s.animator.setTargetValue(t,i);return r&&Zr(VO),e}s.setKeyframeValue(o,i)}else s.addKeyframeAtOffset(n,i),r=!0;return s.animator.setTargetValue(t,i),s.animator.onAnimationUpdated(t,s),r&&Zr(VO),!0},Ld=_R,IR=function(t,e){if(!t.isTransformable)return!1;const i=QO.getEntry(t);if(!i||!i.animations.find(CR))return t.setTransformMatrix(e);let{translate:n,rotate:s,scale:r,skew:o}=e.decompose();const a=e.transformInversePoint(n.sub(t.position).negate(),!1);s-=t.autoOrientAngle;let l=!1;return jd(t,Rd,s)&&(l=!0),jd(t,Bd,o)&&(l=!0),jd(t,Ud,0)&&(l=!0),jd(t,Wd,r)&&(l=!0),jd(t,Od,a)&&(l=!0),l},jg=IR,Yr(so,(()=>{uO("node.compositing","Opacity",Pd,"workflow:Transparency"),cO(new DO("node.transform","Position",Ed,"workflow:Crosshairs")),hO("node.transform",[["Anchor",Od,"workflow:Anchor"],["Rotate",Rd,"expr:rotate"],["Scale",Wd,"expr:size"],["Skew Angle",Bd,"expr:skew"],["Skew Axis",Ud,"expr:guidelines-toggle"]]),hO("Motion",[["Travel",Yd],["OrientedPoint",Qd]]),hO("vector.fill",[["Fill Color",qd,"workflow:ColorFill"],["Fill Opacity",Jd,"workflow:Transparency"]]),hO("vector.stroke",[["Stroke Color",tf,"workflow:ColorFill"],["Stroke Opacity",Xd,"workflow:Transparency"],["Stroke Width",ef,"workflow:StrokeWidth"],["Dash Offset",af,"expr:dash-offset"],["Dash Array",of,"expr:dash-gap"]]),hO("element",[["Morph",Hd,"expr:path"],["Seek",Of],["Width",Gf,"workflow:MoveLeftRight"],["Height",Zf,"workflow:MoveUpDown"],["Width",Jf,"workflow:MoveLeftRight"],["Height",qf,"workflow:MoveUpDown"],["Points",Xf,"expr:line-tool"],["Points",ep,"expr:polyline-tool"],["Width",$f,"workflow:MoveLeftRight"],["Height",Ff,"workflow:MoveUpDown"],["Radius",Vf,"expr:roundness"],["Radius",op,"expr:radius"],["Roundness",ap,"expr:roundness"],["Angle",lp,"expr:angle"],["Outer Radius",hp,"expr:radius"],["Inner Radius",dp,"expr:radius"],["Outer Roundness",fp,"expr:roundness"],["Inner Roundness",pp,"expr:roundness"],["Outer Rotate",gp,"expr:rotate-star"],["Inner Rotate",mp,"expr:rotate-star"],["Angle",vp,"expr:angle"]]),hO("filter",[["Blur",Cp,"workflow:Blur"],["Brightness",Np],["Contrast",jp],["Saturate",zp],["Hue rotate",Pp],["Invert",Tp],["Grayscale",Ap],["Sepia",Dp],["Offset",Wp,"workflow:Move"],["Blur",Op,"workflow:Blur"],["Color",Rp,"workflow:ColorFill"]])}));const LR=ua((function(t){if(tW())return!1;const e=oh();if(!e||!e.isTransformable)return!1;const i=QO.getAnimation(e,Ed.id);if(!i||i.disabled)return!1;let n=!1;for(const e of i)iW(e)&&e.value.joint!==t&&(n||(zo(),n=!0),e.value=en(e.value,t));if(n){i.invalidate();const t=QO.getEntry(e);t.isInOutVisible(cW)&&t.evalAnimation(i,cW)}return n})),NR=ua(cR),jR=ua((()=>cR(null))),zR=ua(lR),PR=ua((function(t){if(tW())return!1;zo();const e=[],i=1e3/QO.fps;return aR(((n,s,r)=>{t&&eO(r,!1);for(let t of r)t.offset=P(t.offset,i),t=s.addKeyframe(t),e.push(t);n.evalAnimation(s,cW)}),cW,!0),0!==e.length&&(Zr(VO),oW(e),!0)})),TR=ua((function(){if(tW())return!1;zo();let t=!1;return aR(((e,i,n)=>{i.reverseKeyframes(n,!1)&&(e.evalAnimation(i,cW),t=!0)}),null,!1),t&&Zr(VO),t})),AR=ua((function(t,e){if(ch()||!QO)return!1;zo();let i=!1;for(const n of Th(lO)){if(null!=QO.getAnimation(n,t.id))continue;const s=QO.createAnimation(n,t.id);s&&(s.addKeyframeAtOffset(e,t.property.getValue(n)),QO.addAnimation(n,s)&&(oW(s.keyframes,i),i=!0))}return i&&Zr(VO),i})),DR=ua((function(t,e,i,n){if(e.disabled)return!1;zo();let s=e.getKeyframeAtOffset(i);return s?(aW(s,!1),!1):(s=e.addKeyframeAtOffset(i,null),t.evalAnimation(e,i),aW(s),n&&ph(t.target,!1),!0)})),ER=ua((function(t,e,i){const n=QO.createAnimation(t,e.id);return!!n&&(n.addKeyframeAtOffset(i,e.property.getValue(t)),!!QO.addAnimation(t,n)&&(zo(),Zr(VO),ph(t,!1),oW(n.keyframes,!1),!0))})),OR=ua((function(t){let e=QO.getEntry(t);if(e){if(e?.hasInOut)return!1}else{if(!lO(t))return!1;e=QO.addEntry(t)}return!!e.setInOut(0,QO.duration)&&(zo(),e.evalVisibility(cW),Zr(VO),ph(e.target),!0)})),WR=ua((function(t){const e=QO.getEntry(t);return!(!e||!e.hasInOut||!e.setInOut(null,null)||(e.evalVisibility(cW),e.isRemovable&&QO.removeEntry(t),Zr(VO),0))})),RR=ua((function(t,e){const i=QO.getEntry(t);if(!i)return!1;const n=i.getAnimation(e);return!!n&&(n.disabled=!n.disabled,n.disabled&&sW(n.keyframes),i.evalAnimation(n,cW),Zr(VO),!0)})),BR=ua((async()=>cy("web expressive/keyframes"))),UR=ua((async()=>uy("web expressive/keyframes"))),$R=ua((async t=>cy("web expressive/easing",t))),FR=ua((async()=>{const t=function(t,e,i){const n=ov(oh(),!0);if(!n)return null;const s=es.fromSkPath(n,!0);e??=QO.duration,i??=QO.fps;const r=1e3/i,o=s.nodes,a=s.contours,l=s.contoursDimensions;let c=l.at(-1).at(-1);const u=[0];for(let t=2;t<a.length;t+=2){const e=o[a[t-1]].point.distanceTo(o[a[t]].point);u.push(e),c+=e}const h=Math.round(e/r)*r/c,d=[];let f=0,p=0;for(let t=0;t<a.length;t+=2){const e=t>>1,i=a[t],n=a[t+1],s=l[e];let c=!1;if(u[e]>0){const t=d.at(-1);t.easing=new CE(kE("step"),!0),t.value=Xi(t.value,1),c=!0,p+=u[e]}for(let t=i;t<=n;t++){const e=t-i;if(e>0&&s[e]===s[e-1]){const e=d.at(-1);e.value=tn(e.value,o[t].handleOut,1);continue}f=P((s[e]+p)*h,r);let n=nn(o[t],0);c&&(c=!1,n=Xi(n,0)),d.push(new KE(n,f))}s[n-i+1]!==s[n-i]&&(f=P((s[n-i+1]+p)*h,r),d.push(new KE(nn(o[i],0),f)))}return s.dispose(),new Map([[Ed.id,{list:d,meta:!0}]])}();t&&cy("web expressive/keyframes",t)})),VR=ua((function(t){return QO.duration!==t&&(QO.duration=t,Zr(HO),xW(cW,!0),!0)})),HR=ua((function(t){return QO.fps!==t&&(QO.fps=t,Zr(HO),xW(cW,!0),!0)})),GR=new nI(!1),ZR=new nI(!0),YR=new nI(!0),QR=new nI(!1);let JR,qR="",KR=!1;const XR=new Set;function tB(){if(tW())return void(""!==qR&&(qR="",JR.setAttribute("kf","")));XR.clear(),aR(((t,e)=>{XR.add(e.animator.id)}));const t=[...XR].sort().join(" ");t!==qR&&(qR=t,JR.setAttribute("kf",t))}const eB=fL,iB=[{title:"None",icon:"expr:fill-none",value:0},{title:"None",icon:"expr:fill-solid",value:1},{title:"Linear gradient",icon:"expr:fill-linear-gradient",value:2},{title:"Radial gradient",icon:"expr:fill-radial-gradient",value:3},{title:"Two point radial gradient",icon:"expr:fill-radial-focal-gradient",value:4}],nB=()=>{return function(t,e,i){const n=document.createElement("es-active-element-accordion");if(i&&i(n),n.items=t,e){let t=null;t=document.createElement("p"),t.style.textAlign="center",t.innerText=e,n.appendChild(t)}return n}([xD(iB),MD(),bD(),wD(),_D(),SD(),kD(),CD(new Map([["ellipse","es-ellipse-properties"],["rect","es-rectangle-properties"],["image","es-image-properties"],["regular-polygon","es-polygon-properties"],["star","es-star-properties"],["line","es-line-properties"],["poly","es-polyline-properties"],["path","es-path-properties"],["clip-path","es-path-properties"]])),new class extends Iw{constructor(){super("transform")}getLabel(){return"Transform"}isVisible(t){return t instanceof Rh&&t.isTransformable}createElement(){return yD("es-transform-properties")}},(t="es-global-coords",new class extends Iw{constructor(){super("global-coords")}getLabel(){return"Global Coords"}isVisible(t){return t instanceof Rh}createElement(){return yD(t)}})],"No properties to show",(t=>{Yr(gl,(()=>t.isConnected&&t.requestUpdate()))}));var t};function sB(t,e,i){return Object.defineProperty(t,i?"hidden":"disabled",{get:e}),t}const rB=[sB({title:"Cut",shortcut:["ctrl","x"],icon:"workflow:Cut",action:Ek},ch),sB({title:"Copy",shortcut:["ctrl","c"],icon:"workflow:Copy",action:Ok},ch),{title:"Copy as...",children:[sB({title:"Motion path keyframes",icon:"expr:auto-rotate",action:FR},ch),{title:"Image",icon:"workflow:Image",action:Bk},{title:"SVG",icon:"workflow:Code",action:$k},sB({title:"SVG path",icon:"expr:path",action:Uk},ch)]},{title:"Paste",shortcut:["ctrl","v"],icon:"workflow:Paste",action:()=>Wk()},sB({title:"Duplicate",shortcut:["ctrl","d"],icon:"workflow:Duplicate",action:P_},ch),sB({title:"Delete",shortcut:[ya?"backspace":"delete"],icon:"workflow:Delete",action:T_},ch),null,sB({title:"Group",shortcut:["ctrl","g"],icon:"workflow:Group",action:D_},ch),sB({title:"Ungroup",shortcut:["shift","ctrl","g"],icon:"workflow:Ungroup",action:E_},ch),null,sB({title:"Convert to path",icon:"expr:path",shortcut:["ctrl","k"],action:l_},(function(){const t=oh();return!t||!$m(t)}),!0),sB({title:"Split text into chars",icon:"workflow:ABC",shortcut:["ctrl","h"],action:v_},(function(){const t=oh();return!t||!Vm(t)}),!0),cL,sB({title:"Clipping",icon:"workflow:Preset",children:aL},ch),uL,hL],oB=[sB({title:"Cut",shortcut:["ctrl","x"],icon:"workflow:Cut",action:UR},tW),sB({title:"Copy",shortcut:["ctrl","c"],icon:"workflow:Copy",action:BR},tW),{title:"Paste",shortcut:["ctrl","v"],icon:"workflow:Paste",action:()=>Wk()},sB({title:"Duplicate",shortcut:["ctrl","d"],icon:"workflow:Duplicate",action(t,e){PR(e?.altKey)}},tW),sB({title:"Delete",shortcut:[ya?"backspace":"delete"],icon:"workflow:Delete",action:zR},tW),null,sB({title:"Reverse",shortcut:["ctrl","r"],icon:"workflow:Sync",action:TR},tW)],aB=[{title:"Add layer",icon:"expr:layer",get disabled(){return Au()},action:()=>UI()},cL],lB=[{title:"Settings",icon:"workflow:Settings",value:"settings",content:()=>function(...t){const e=new ow;return e.appendChild(function(...t){const e=new Nw;return IC(e,[eo,io]),e.items=t.map((t=>new Lw(t.id,t.title,"string"==typeof t.control?document.createElement(t.control):t.control()))),e}(...t)),e}({id:"document",title:"Composition",control:"es-document-properties"},{id:"animation",title:"Animation",control:"es-animation-properties"},{id:"grid",title:"Grid",control:"es-grid-properties"})},{title:"Layers",icon:"workflow:Layers",value:"layers",content:()=>{const t=document.createElement("es-tree-view-control");return t.menu=aB,t.ctxMenu=rB,t}}],cB=[{value:"transform",icon:"expr:selection-tool",title:"Selection tool",shortcut:["V"]},{value:"path",icon:"expr:direct-selection-tool",title:"Node tool",shortcut:["A"]},[{value:"pen",icon:"expr:pen-tool",title:"Pen tool",shortcut:["P"]},{value:"pencil",icon:"workflow:Draw",title:"Pencil tool",shortcut:["N"]},{value:"poly",icon:"expr:polyline-tool",title:"Polyline tool",shortcut:["W"]}],[{value:"rect",icon:"expr:rectangle-tool",title:"Rectangle tool",shortcut:["R"]},{value:"ellipse",icon:"expr:ellipse-tool",title:"Ellipse tool",shortcut:["E"]},{value:"regular-polygon",icon:"expr:polygon-tool",title:"Polygon tool",shortcut:["O"]},{value:"star",icon:"expr:star-tool",title:"Star tool",shortcut:["S"]},{value:"line",icon:"expr:line-tool",title:"Line tool",shortcut:["L"]}],{value:"gradient",icon:"expr:gradient-tool",title:"Gradient tool",shortcut:["G"]},{value:"color-picker",icon:"expr:colorpicker-tool",title:"Eyedropper tool",shortcut:["I"]},{value:"text",icon:"expr:text-tool",title:"Text tool",shortcut:["T"]},{value:"pan",icon:"expr:pan-tool",title:"Hand tool",shortcut:["H"]},{value:"zoom",icon:"expr:zoom-tool",title:"Zoom tool",shortcut:["Z"]}],uB=new Map([["transform",["es-mpath-joint-tool-ctx",null,"es-transform-tool-ctx"]],["path",["es-path-contour-control",null,"es-path-joint-control"]]]),hB=kL(TT),dB=[hB(lk,"enabled","Enable snapping",["shift","S"]),"Snap to...",hB(lk,"pixel","Pixel",["shift","ctrl",","]),hB(yk,"snap","Grid",["shift","ctrl","'"]),null,hB(Ik,"snap","Guides",["shift","ctrl",";"]),hB(LL,"points","Object points",["shift","ctrl","."]),hB(LL,"bounds","Object bounds",["shift","ctrl","/"]),hB(Ak,"snap","Document",["shift","ctrl","\\"]),null,hB(lk,"view","If in viewport")];class fB extends qx{#Vt;#Gg;#Zg;#Yg;#Qg;#Jg;#qg;constructor(){super(),this.#qg=this.#Kg(),this.#Vt=this.#Xg(),this.#Jg=nB(),IC(this,[[mI,this.#tm],[gl,t=>{this.#Qg.value=t?.name}],[QR,t=>{t?this.#Yg.classList.add("highlight-button"):this.#Yg.classList.remove("highlight-button")}],[GR,t=>{t?this.#Yg.classList.add("flip-y"):this.#Yg.classList.remove("flip-y")}],[ZO,My]])}firstUpdated(){this.#Gg=this.shadowRoot.getElementById("drawer"),this.#Zg=this.shadowRoot.getElementById("drawer-buttons"),this.#Yg=this.shadowRoot.getElementById("timeline-collapsed"),this.#Qg=this.shadowRoot.getElementById("tools");const t=this.shadowRoot.getElementById("sidebar");t.style.setProperty("--kf-active-color","var(--accent-color-500)"),function(t){JR=t}(t),KR||(KR=!0,Yr(UO,tB),tB())}#Kg(){const t=document.createElement("es-timeline-control");return t.id="timeline",t.ctxMenu=oB,t}#Xg(){const t=xl;return t.id="engine",t.addEventListener("contextmenu",this.#em),t}connectedCallback(){super.connectedCallback(),Fy(this.#im,!0),window.addEventListener("contextmenu",this.#nm)}disconnectedCallback(){super.disconnectedCallback(),Fy(this.#im,!1),window.removeEventListener("contextmenu",this.#nm)}#tm=t=>{this.#Zg.value=t,this.#Gg.value=t,null==t?this.classList.remove("has-drawer"):this.classList.add("has-drawer")};#im=()=>{requestAnimationFrame((()=>bl.update()))};render(){return Px`
            <div id="logo"></div>
            <div id="menubar">
                <es-file-bar .menu=${eB}></es-file-bar>
                <es-menubar-controls .ctx=${uB}>
                    <es-mask-control></es-mask-control>
                    <es-path-op-control></es-path-op-control>
                    <es-align-control></es-align-control>
                    <es-snapping-control .items=${dB}></es-snapping-control>
                    <es-canvas-control></es-canvas-control>
                    <es-zoom-control></es-zoom-control>
                </es-menubar-controls>
            </div>
            <div id="toolbar">
                <cc-icon-toolbar id="tools" vertical quiet size="m" emphasized .value=${Ll?.name} .items=${cB} @change=${this.#sm}></cc-icon-toolbar>
                <div style="flex: 1"></div>
                <cc-icon-toolbar id="drawer-buttons" vertical quiet size="m" emphasized unselectable .items=${lB} @change=${this.#rm}></cc-icon-toolbar>
                <cc-action-button id="timeline-collapsed" size="m" quiet @click=${this.#om} title="Collapse timeline">
                    <cc-css-icon name="ChevronDown"></cc-css-icon>
                </cc-action-button>
            </div>
            <cc-dynamic-container id="drawer" .items=${lB}></cc-dynamic-container>
            ${this.#Vt}
            ${this.#qg}
            <cc-scroll-container id="sidebar">
                ${this.#Jg}
            </cc-scroll-container>
        `}#sm=t=>{tE(t.detail)||t.preventDefault()};#rm(t){mI.change(t.detail)}#om(){GR.toggle()}#em=t=>{t.stopPropagation(),t.preventDefault(),Ll?.isWorkingOrPanning||ky(rB,{x:t.clientX,y:t.clientY},"bottom-left")};#nm(t){Ta(t)||t.preventDefault()}dispose(){xl&&(cancelAnimationFrame(Ul),Gl=0,Ll?.deactivate(),Ll=null,tc(),dc(xl.canvas),xl.remove(),xl.ruler.dispose(),xl.canvas.remove(),xl=null,bl=null),this.#Vt=null}static{this.styles=[Jy`
        :host {
            margin: 0;
            padding: 0;
            box-sizing: border-box;

            --toolbar-size: calc(48px + var(--border-size));
            --sidebar-size: calc(286px + var(--border-size));
            --drawer-size: 280px;

            display: grid;
            grid-gap: 0;
            grid-template-areas:
                "logo menubar menubar sidebar"
                "toolbar drawer engine sidebar"
                "toolbar timeline timeline sidebar";
            grid-template-rows: var(--toolbar-size) 1fr auto;
            grid-template-columns: var(--toolbar-size) var(--drawer-size) minmax(var(--sidebar-size), 1fr) var(--sidebar-size);
        }

        :host(:not(.has-drawer)) {
            --drawer-size: 0;
        }

        :host(:not(.has-drawer)) #drawer {
            display: none;
        }

        :host > * {
            box-sizing: border-box;
        }

        #toolbar {
            grid-area: toolbar;
            display: flex;
            flex-direction: column;
            justify-content: start;
            align-items: center;
            user-select: none;
            border-right: var(--border-size) solid var(--separator-color);
            padding: 8px 0;
            pointer-events: var(--cc-pointer-events, auto);
        }

        #logo {
            grid-area: logo;
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            user-select: none;
            border-bottom: var(--border-size) solid var(--separator-color);

            background-image: var(--expressive-app-logo);
            background-repeat: no-repeat;
            background-position: center;
            background-size: 32px;
        }

        #menubar {
            grid-area: menubar;
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            user-select: none;
            overflow: clip;
            border-bottom: var(--border-size) solid var(--separator-color);
            pointer-events: var(--cc-pointer-events, auto);
        }

        #sidebar {
            grid-area: sidebar;
            user-select: none;
            box-sizing: border-box;
            border-left: var(--border-size) solid var(--separator-color);
        }

        :host-context([titlebar]) #sidebar {
            border-image: linear-gradient(to bottom, transparent, transparent var(--toolbar-size), var(--separator-color) var(--toolbar-size), var(--separator-color) 100%) 1 100%;
            border-left-color: transparent;
        }

        #drawer {
            grid-area: drawer;
            box-sizing: border-box;
            border-right: var(--border-size) solid var(--separator-color);
            pointer-events: var(--cc-pointer-events, auto);
        }

        #engine {
            grid-area: engine;
            touch-action: none;
            outline: none !important;
            border: none;
            box-sizing: border-box;
            overflow: hidden;
            min-height: 100px;
            min-width: auto;
            background: var(--separator-color);
            --render-engine-background-color: var(--canvas-color);
            --render-engine-rulerIndicator-color: var(--accent-color-500);
            --render-engine-rulerBackground-color: var(--surface-color);
            --render-engine-rulerText-color: var(--text-color-default);
        }

        /*
        @container --theme-provider style(--theme: dark) {
            #engine {
                --render-engine-background-color: var(--gray-800);
            }
        }

        @container --theme-provider style(--theme: light) {
            #engine {
                --render-engine-background-color: var(--gray-50);
            }
        }
        */

        #timeline {
            grid-area: timeline;
        }

        #timeline-collapsed {
            margin-top: 8px;
        }

        .highlight-button {
            color: var(--accent-color-400);
        }
        .flip-y {
            transform: scaleY(-1);
        }
    `]}}class pB extends VC{renderLeft(){return this.renderFormats()}renderRight(){return Ax}static{this.styles=[...super.styles,Jy`
#left-panel {
    flex: 1;
}
#right-panel {
    flex: 3;
}
#rich-list {
    flex: 1;
    flex-direction: column;
}
    `]}}const gB={...lM,min:1,max:2e4},mB={...lM,min:1,max:1e3},vB=[{title:" 8 fps",value:8},{title:"12 fps",value:12},{title:"15 fps",value:15},{title:"24 fps",value:24},{title:"25 fps",value:25},{title:"30 fps",value:30},{title:"50 fps",value:50},{title:"60 fps",value:60}],yB=[{title:"3x",value:3},{title:"2x",value:2},{title:"1.75x",value:1.75},{title:"1.50x",value:1.5},{title:"1.25x",value:1.25},null,{title:"1x",value:1},null,{title:"0.75x",value:.75},{title:"0.50x",value:.5},{title:"0.25x",value:.25}],xB=[{title:"PNG",value:"png"},{title:"WEBP",value:"webp"}],bB=[{title:"Indefinitely",value:!0},{title:"Count",value:!1}],wB=[{title:"Forward",value:!1},{title:"Backward",value:!0}],MB=[{title:"No",value:!1},{title:"Yes",value:!0}];class SB extends FC{#am;#di;#lm;constructor(t){super(),this.#di=new Map,this.#lm=[],this.common={format:0,bounds:null,size:{width:0,height:0},background:se.transparent,startTime:0,duration:1,speed:1,fps:60,repeat:0,reverse:!1,alternate:!1,imageFormat:"png"};const e=this.#di,i=this.#lm;for(const n of t)e.set(n.value,n),i.push({title:n.title,value:n.value});this.common.format=t[0].value}get item(){return this.#di.get(this.common.format)}get lastExecutedType(){return this.item.id}async getFile(){const t=this.item;try{const e=t.dir;if(e)return await this.getDirHandle(e);const i=t.file;return await this.getFileHandle({...i,suggestedName:this.getSuggestedName($c.title,t.extension)})}catch{return null}}initialize(){const t=Dk(),e=this.common;e.bounds=t,e.size.width=t.width,e.size.height=t.height,e.fps=QO.fps,e.speed=1,e.repeat=0,e.reverse=!1,e.alternate=!1;const[i,n]=MW();e.startTime=i,e.duration=n-i,this.#am=t.width/t.height,this.applyConstraints(),this.requestUpdate()}applyConstraints(){const t=this.common;t.repeat||this.allowRepeatIndefinite?t.repeat&&!this.allowRepeatCount&&(t.repeat=0):t.repeat=1,t.background.a<1&&!this.allowAlphaBackground&&(t.background=t.background.withOpacity(1)),t.alternate&&!this.allowRepeatAlternate&&(t.alternate=!1),t.reverse&&!this.allowDirection&&(t.reverse=!1),1===t.speed||this.allowSpeed||(t.speed=1)}get allowRepeatItems(){return!(2&this.item.deny)}get allowRepeatAlternate(){const t=this.item.deny;return!(4&t||!this.common.repeat&&32&t)}get allowRepeatIndefinite(){return!(8&this.item.deny)}get allowRepeatCount(){return!(16&this.item.deny)}get allowFps(){return!(1024&this.item.deny)}get allowSpeed(){return!(512&this.item.deny)}get allowAlphaBackground(){return!(1&this.item.deny)}get allowDirection(){return!(64&this.item.deny)}renderCommonSettings(){const t=this.common,e=this.allowFps,i=this.allowRepeatIndefinite,n=this.allowRepeatCount,s=!n||0===t.repeat;s&&!i&&(t.repeat=1);const r=this.allowAlphaBackground;return r||(t.background=t.background.withOpacity(1)),Px`
<cc-flex-row class="heading">Composition settings</cc-flex-row>
<cc-flex-row>
    <div class="label">Frame</div>
    <cc-number-input title="Width" .value=${t.size.width} @update=${this.#zc} .formatter=${gB} flex>
        <cc-icon name="expr:w" slot="before"></cc-icon>
    </cc-number-input>
    <cc-number-input title="Height" .value=${t.size.height} @update=${this.#Pc} .formatter=${gB} flex>
        <cc-icon name="expr:h" slot="before"></cc-icon>
    </cc-number-input>
    <es-color-control title="Background color" .value=${t.background} .alpha=${r} @update=${this.#cm} text thumbnail .formatter=${!1} .eyeDropper=${!1} fluid-4></es-color-control>
</cc-flex-row>
<cc-flex-row>
    <div class="label">Time</div>
    <cc-flex-col class="input-group" flex>
        <div>Duration</div>
        <cc-time-input title="Duration" min="1" .value=${t.duration} .fps=${t.fps} @change=${this.#um} padded></cc-time-input>
    </cc-flex-col>
    <cc-flex-col class="input-group" flex>
        <div>Start time</div>
        <cc-time-input title="Start time" .value=${t.startTime} .fps=${t.fps} @change=${this.#hm} padded></cc-time-input>
    </cc-flex-col>
    <cc-flex-col class="input-group" flex>
        <div>End time</div>
        <cc-time-input title="End time" .min=${t.startTime+1} .value=${t.startTime+t.duration} .fps=${t.fps} @change=${this.#dm} padded></cc-time-input>
    </cc-flex-col>
</cc-flex-row>
<cc-flex-row>
    <div class="label">Animation</div>
    <cc-flex-col class="input-group" flex>
        <div>Frame rate</div>
        <cc-picker title="Frames per second" placeholder="Auto" .disabled=${!e} .value=${e?t.fps:null} .items=${vB} @change=${this.#fm}></cc-picker>
    </cc-flex-col>
    <cc-flex-col class="input-group" flex>
        <div>Speed</div>
        <cc-picker title="Playback speed" .disabled=${!this.allowSpeed} .value=${t.speed} .items=${yB} @change=${this.#pm}></cc-picker>
    </cc-flex-col>
</cc-flex-row>
${this.#gm(!n||i,n,s)}
`}renderFormat(){return Px`<cc-picker id="format" .value=${this.common.format} .items=${this.#lm} @change=${this.#sl} flex></cc-picker>`}renderImageFormat(){return Px`<cc-picker id="image-format" .value=${this.common.imageFormat} .items=${xB} @change=${this.#mm} flex></cc-picker>`}#mm(t){this.common.imageFormat=t.detail}getCommonSettings(){const t=this.common;return{startTime:t.startTime,duration:t.duration,size:{...t.size},fps:t.fps,speed:t.speed,repeat:t.repeat,alternate:t.alternate,reverse:t.reverse}}#sl(t){this.common.format=t.detail,this.onFormatChanged(t.detail),this.applyConstraints(),this.requestUpdate()}#gm(t,e,i){if(!this.allowRepeatItems)return Ax;i=i&&t;const n=this.common;return Px`
<cc-flex-row>
    <div class="label"></div>
    <cc-flex-col class="input-group" flex>
        <div>Repeat</div>
        <cc-picker title="Repeat mode" .disabled=${!t||!e} .value=${i} .items=${bB} @change=${this.#vm}></cc-picker>
    </cc-flex-col>
    <cc-flex-col class="input-group" flex>
        <div>Iterations</div>
        <cc-number-input title="Repetitions" placeholder=${i?"∞":""} .indeterminate=${i} .disabled=${0===n.repeat} .value=${n.repeat} @update=${this.#ym} .formatter=${mB} padded></cc-number-input>
    </cc-flex-col>
    <cc-flex-col class="input-group" flex>
        <div>Direction</div>
        <cc-picker title="Direction" .disabled=${!this.allowDirection} .value=${n.reverse} .items=${wB} @change=${this.#xm}></cc-picker>
    </cc-flex-col>
    <cc-flex-col class="input-group" flex>
        <div>Alternate</div>
        <cc-picker title="On iteration end" .disabled=${!this.allowRepeatAlternate} .value=${n.alternate} .items=${MB} @change=${this.#bm}></cc-picker>
    </cc-flex-col>
</cc-flex-row>`}#hm(t){this.common.startTime=t.detail,this.requestUpdate()}#dm(t){const e=this.common;let i=t.detail;e.duration=Math.abs(i-e.startTime),i<e.startTime&&(e.startTime=i),this.requestUpdate()}#um(t){this.common.duration=t.detail,this.requestUpdate()}#zc(t){this.common.size.width=t.detail,this.common.size.height=Math.round(t.detail/this.#am),this.requestUpdate()}#Pc(t){this.common.size.height=t.detail,this.common.size.width=Math.round(t.detail*this.#am),this.requestUpdate()}#fm(t){this.common.fps=t.detail,this.applyConstraints(),this.requestUpdate()}#pm(t){this.common.speed=t.detail,this.applyConstraints(),this.requestUpdate()}#vm(t){this.common.repeat=t.detail?0:1,this.applyConstraints(),this.requestUpdate()}#ym(t){this.common.repeat=t.detail,this.applyConstraints(),this.requestUpdate()}#xm(t){this.common.reverse=t.detail,this.applyConstraints(),this.requestUpdate()}#bm(t){this.common.alternate=t.detail,this.applyConstraints(),this.requestUpdate()}#cm(t){this.common.background=t.detail,this.applyConstraints(),this.requestUpdate()}}class kB extends SB{#wm;async abort(){return this.#wm?.abort(),!0}async execute(t){const e=await this.getFile();if(!e)return 1;const i=this.common,n=this.#wm=await this.getClient({region:i.bounds,size:new di(i.size.width,i.size.height),background:i.background});n.file=e;try{const s=await n.export(t);switch(s.type){case"ok":return await this.onSuccess(e,i.size.width,i.size.height),0;case"aborted":return 1;case"error":throw new Error(s.message)}}catch(t){return BC(t),2}finally{n.dispose(),this.#wm=null}}}class _B{#Mm;#Sm;#km;#ko;constructor(t){this.#Sm=t}#_m(t){this.#km?.reject(t),this.#km=null}#Im(t){this.#km?.resolve(t),this.#km=null}#Cm(){const t=this.#Mm=new Worker(this.#Sm,{type:"module"});t.addEventListener("error",this.#Lm),t.addEventListener("messageerror",this.#Nm),t.addEventListener("message",this.#jm)}#zm(){const t=this.#Mm;t&&(this.#Mm=null,t.removeEventListener("error",this.#Lm),t.removeEventListener("messageerror",this.#Nm),t.removeEventListener("message",this.#jm),t.terminate())}#Lm=t=>{this.#zm(),this.#_m(t)};#Nm=t=>{this.#zm(),this.#_m(t)};#jm=async t=>{const[e,i]=t.data;switch(e){case 0:{const t=this.file;return void(IB(t)?this.#Mm.postMessage([0,[await this.getInit(),t]],[t]):this.#Mm.postMessage([0,[await this.getInit(),t]]))}case 1:{const t=await this.getData(i);return void(ArrayBuffer.isView(t)?this.#Mm.postMessage([1,t],[t.buffer]):IB(t)?this.#Mm.postMessage([1,t],[t]):this.#Mm.postMessage([1,t]))}case 2:{const[t,e]=i;return void this.#ko(t,e)}case 3:return this.#zm(),void this.#Im(i)}};async export(t){this.#ko=t;const e=new Promise(((t,e)=>{this.#km={resolve:t,reject:e}}));await this.before();try{return this.#Cm(),await e}finally{this.#km=null,this.#zm(),this.#ko=null,await this.after()}}abort(){this.#ko?.(-1,"Aborting..."),this.#Mm?.postMessage([2])}dispose(){this.#km=this.#ko=this.file=null,this.#Mm?.terminate(),this.#Mm=null}}function IB(t){return t instanceof ArrayBuffer||t instanceof ImageBitmap||t instanceof VideoFrame||t instanceof OffscreenCanvas||t instanceof ReadableStream||t instanceof WritableStream||t instanceof TransformStream||t instanceof MessagePort}class CB extends _B{#Tc;#qg;#Pm=!1;constructor(t,e,i){super(i),this.#Tc=t,this.#qg=e||QO}setTime(t){return vW(t,this.#qg)}#Tm;#en;before(){this.#Tm=cW,this.#en=function(){if(!ju.length)return null;if(1===ju.length&&!Lu){const t=ju.pop();return t.invalidate(!0),t}return Du(ju.splice(0))}(),Yl(),Rl()}after(){var t;t=this.#en,ju.length&&ju.splice(0),t?Nt(t)?(Lu=!0,ju.push(...t),Du(t)):(Lu=!1,ju.push(t),t.invalidate(!0)):Lu=!1,xW(this.#Tm),Zl(),this.#Tm=this.#en=null}getInit(){return this.#Tc}dispose(){this.#Tc=this.#qg=null,super.dispose()}async getData(t){if(!this.setTime(t)&&this.#Pm)return;const e=await this.getDocumentData(t);return null!=e&&(this.#Pm=!0),e}}class LB extends CB{#Am;#Dm;#xa;constructor(t,e,i,n){super(t,i,n),this.#Am=new KM,this.#Am.background=e?.background??se.transparent,this.#Dm=e?.region||Dk(),this.#xa=e?.size||this.#Dm}before(){super.before(),this.#Am.createSurface(this.#xa)}after(){this.#Am.deleteCurrentSurface(),super.after()}getDocumentData(){return this.#Am.drawPicture($c.picture,this.#Dm,this.#xa),this.#Am.bitmap}dispose(){this.#Dm=this.#xa=this.#Am=null,super.dispose()}}class NB extends CB{#$n;#Vs;constructor(t,e,i,n){super(t,i,n),this.#Vs=e,this.#$n=new qM}dispose(){super.dispose(),this.#$n?.dispose(),this.#$n=null}async getDocumentData(){return(await this.#$n.exportDocument($c,this.#Vs.region,this.#Vs.size,this.#Vs.background)).arrayBuffer()}}const jB=[{id:"image:apng",title:"APNG",value:0,deny:4,extension:"png",file:{startIn:"pictures",types:[{description:"Animated PNG files",accept:{"image/png":[".png"]}}]}},{id:"image:gif",title:"GIF",value:1,deny:5,extension:"gif",file:{startIn:"pictures",types:[{description:"GIF files",accept:{"image/gif":[".gif"]}}]}}],zB=[{id:"seq:png",title:"PNG",value:0,deny:8,extension:"png",dir:"pictures",image:{type:"image/png",quality:1}},{id:"seq:jpg",title:"JPEG",value:1,deny:9,extension:"jpg",dir:"pictures",image:{type:"image/jpeg",quality:1}},{id:"seq:avif",title:"AVIF",value:2,deny:8,extension:"avif",dir:"pictures",image:{type:"image/avif",quality:1}},{id:"seq:webp",title:"WEBP",value:3,deny:8,extension:"webp",dir:"pictures",image:{type:"image/webp",quality:1}},{id:"seq:gif",title:"GIF",value:4,deny:8,extension:"gif",dir:"pictures",image:{type:"image/gif",quality:1}},{id:"seq:svg",title:"SVG",value:5,deny:8,extension:"svg",dir:"pictures"}];class PB{#di=new Map;has(t){return this.#di.has(t)}get(t){return this.#di.has(t)||this.#di.set(t,this.#di.size),this.#di.get(t)}keys(){return[...this.#di.keys()]}clear(){this.#di.clear()}}class TB{constructor(t,e){this.target=t,this.hasOwnVisibility=e,this.start=0,this.end=0,this.properties=new Map,this.animations=new Map,this.children=[],this.filterContainer=null,this.motionPath=null}value(t){return this.properties.has(t)?this.properties.get(t):t.cloneValue(this.target)}animation(t){return this.animations.get(t)}pair(t){return[this.value(t),this.animation(t)]}eq(t,e){return this.match(t,(t=>kt(t,e)))}match(t,e){const i=this.animation(t);if(!i)return e(this.value(t));for(const t of i.keyframes)if(!e(t.value))return!1;return!0}dispose(){this.filterContainer?.dispose(),this.children?.length&&this.children.forEach((t=>t.dispose())),this.properties?.clear(),this.animations?.clear(),this.target=this.properties=this.animations=this.filterContainer=this.children=null}}class AB{#Em;#Om=new Map;#Wm;#qg;#Rm=!1;#Bm;#Um;#$m;constructor(t=0,e,i){this.#Em=t;const n=this.#Om;if(n.set(qd,OB),n.set(tf,OB),n.set(of,EB),32&t){const e=!(2&t);n.set(Cp,RB(0,e)),n.set(Op,RB(0,e)),n.set(Wp,RB(ce.ZERO,e)),n.set(Rp,RB(se.transparent,e)),n.set(Np,RB(1,e)),n.set(jp,RB(1,e)),n.set(zp,RB(1,e)),n.set(Pp,RB(0,e)),n.set(Tp,RB(0,e)),n.set(Ap,RB(0,e)),n.set(Dp,RB(0,e))}if(e)for(const[t,i]of e)n.set(t,i);this.#Wm=i??new Map,this.#Wm.has(Ed)||this.#Wm.set(Ed,DB)}export(t,e,i,n,s){this.#qg=e,i??=0,n??=e.duration,i>n&&([n,i]=[i,n]),this.#Rm=!!s,this.#Bm=i,this.#Um=n-i,this.#$m=0;const r=[];return this.#Jo(t,r,i,n),this.#qg=null,this.#Bm=this.#Um=0,[r.filter((t=>t.children.length>0)),n-i]}#Fm(t,e,i){if(t.hidden)return null;const n=this.#qg.getEntry(t);let s=n&&n.hasInOut&&(n.in>e||n.out<i);if(s){if(e=Math.max(e,n.in),(i=Math.min(i,n.out))<=e)return null;this.#$m++}const r=new TB(t,s);if(n){const t=this.#Bm,s=e-t,o=i-t;for(let e of n.animations)this.#Wm.has(e.animator.property)&&(e=this.#Wm.get(e.animator.property)(r,e),!e)||!e.disabled&&e.keyframes.length&&(e=e.clone(!0),xO(e.keyframes,-t),(e=this.#Vm(n.target,e,r.properties,s,o))&&r.animations.set(e.animator.property,e))}if(r.start=e-this.#Bm,r.end=i-this.#Bm,this.#Jo(t,r.children,e,i),t.supportsFilters&&t.filters&&t.filters.hasChildren){const n=this.#Fm(t.filters,e,i);n&&n.children.length>0&&(r.filterContainer=n)}return s&&this.#$m--,r}#Jo(t,e,i,n){if(t.supportsChildren&&t.hasChildren)for(const s of t.children()){const t=this.#Fm(s,i,n);t&&e.push(t)}}#Vm(t,e,i,n,s){MO(e.keyframes);const r=e.animator.property;if(!e.isAnimated)return i.set(r,e.keyframes[0].value),null;const o=function(t,e,i){const n=t.length;if(0===n)return null;if(i<e&&([e,i]=[i,e]),1===n)return t[0].offset>=e&&t[0].offset<=i?[t[0]]:null;let s=null;for(let i=0;i<n;i++){if(t[i].offset===e){s=i;break}if(t[i].offset>e){s=Math.max(i-1,0);break}}if(null===s)return null;if(s+1===n||t[s].offset>=i)return[t[s]];let r=s;for(;++r<n&&!(t[r].offset>=i););return t.slice(s,r+1)}(e.keyframes,n,s);if(!o)return i.set(r,e.getValueAtOffset(this.#Rm?s:n)),null;if(1===o.length)return i.set(r,o[0].value),null;e.keyframes.splice(0,e.keyframes.length,...o);const a=this.#Om.get(r);return a&&MO((e=a(e,t,n,s,this.#Um)).keyframes),e.keyframes.length>1&&this.#Hm(e,n,s)&&MO(e.keyframes),i.set(r,e.getValueAtOffset(this.#Rm?s:n)),e.keyframes.length>1?e:null}#Hm(t,e,i){let n=!1;const s=!!(8&this.#Em);if(function(t,e,i,n,s){const r=t.keyframes;let o=r.length-1,a=null!=r[o].easing;r[o].easing=null;for(let c=0;c<o;c++){const u=r[c];if(!u.easing)continue;const h=r[c+1].offset-u.offset;if(!h){u.easing=null,a=!0;continue}let d=null,f=!1;if(u.easing.func instanceof uE){if(u.easing.func.isLinear){u.easing=null,a=!0;continue}if(u.easing.inverted&&(u.easing=new CE(u.easing.func.inverse,!1),a=!0),!e)continue;if(!((l=u.easing.func).h1.x<0||l.h1.x>1||l.h1.y<0||l.h1.y>1||l.h2.x<0||l.h2.x>1||l.h2.y<0||l.h2.y>1))continue;f=!0}else if(u.easing.func instanceof pE){if(!i)continue;f=!0}else if(u.easing.func instanceof yE){if(!i)continue;d=[...jO(u.value,r[c+1].value,u.offset,h,t.animator.valueHandler,u.easing.func.bounces,u.easing.func.stiffness,u.easing.inverted)]}else n&&(f=!0);if(f&&(u.easing=BE(u.easing,!0),a=!0),u.easing.func instanceof xE&&(u.easing.inverted&&(u.easing=new CE(u.easing.func.inverse,!1)),s&&(d=[...CO(u.value,r[c+1].value,u.offset,h,t.animator.valueHandler,u.easing.func.points)])),d){t.keyframes.splice(c,1,...d);const e=d.length-1;c+=e,o+=e,a=!0}}var l;return a}(t,s,!!(2&this.#Em),!!(1&this.#Em),!!(4&this.#Em))&&(n=!0),16&this.#Em){const s=t.keyframes,r=s.length-1;(s[0].offset<0||s[r].offset>this.#Um||!this.#$m&&(s[0].offset<e||s[r].offset>i))&&zO(t,i)&&(n=!0)}return s&&t.animator.property===Yd&&function(t){let e=!1;for(const i of t)i.value<0?(i.value=0,e=!0):i.value>1&&(i.value=1,e=!0);e&&MO(t)}(t.keyframes),n}}function DB(t,e){if(t.properties.set(Yd,0),!t.target.isTransformable||!e||!e.isAnimated)return null;const i=function(t){const e=t.sizes,i=e[e.length-1];if(i<=0)return null;const n=t.keyframes;let s=0,r=i;for(let t=1;t<n.length;t++){const i=PE(n[t-1].easing);if(!i)continue;const o=e[t]-e[t-1];i[0]<0&&(s=Math.min(s,e[t-1]+o*i[0])),i[1]>1&&(r=Math.max(r,e[t-1]+o*i[1]))}let o=0,a=i;const l=t.nodes.slice();let c=!1,u=!1;if(s<0)if(e[0]===e[1])c=!0;else{const[t]=Fi(l[0],l[1],Math.ceil(-s),!0);o=t.distanceTo(l[0].point),a+=o,l[0]=Qi(0,l[0].point,null,l[0].handleOut),l.unshift(Qi(1,t))}if(r>i){const t=n.length-1;if(e[t]===e[t-1])u=!0;else{const t=l.length-1,[e]=Fi(l[t-1],l[t],Math.ceil(r)-i,!1);a+=e.distanceTo(l[t].point),l[t]=Qi(0,l[t].point,l[t].handleIn,null),l.push(Qi(2,e))}}const h=n.map(((t,i)=>{let n=(o+e[i])/a;return c&&n<0&&(n=0),u&&n>1&&(n=1),new KE(n,t.offset,t.easing?t.easing.clone():null)}));return[l,h]}(e);if(!i)return null;const[n,s]=i;return t.motionPath=n,new iO(rO(Yd.id),s)}function EB(t){return function(t){const e=t.reduce(((t,e)=>E(t,e.value?.length||1)),1);for(const i of t)null!=i.value&&0!==i.value.length?i.value.length!==e&&(i.value=new Array(Math.trunc(e/i.value.length)).fill(i.value).flat()):i.value=new Array(e).fill(0)}(t.keyframes),t}function OB(t){return function(t){let e=0;for(const i of t)i.value instanceof _i?e=Math.max(e,i.value.stopColors.length):i.value instanceof gi||(i.value=new gi(se.transparent));if(0===e)return;let i,n=!1;for(const s of t){if(!(s.value instanceof _i)){n=!0;continue}const t=s.value;if(t.stopColors.length===e){i||(i=t);continue}const r=t.stopColors.clone(),o=r.list[r.list.length-1];for(;r.list.length<e;)r.list.push({color:o.color,offset:o.offset});s.value=t.withStopColorList(r),i||(i=s.value)}if(!n)return;let s=t.length-1,r=i;for(let e=0;e<=s;e++){const i=t[e];if(!(i.value instanceof gi)){r=i.value;continue}let n;for(let i=e+1;i<=s;i++)if(t[i].value instanceof _i){n=t[i].value;break}n||(n=r);const o=i.value.color;i.value=WB(r,o),r.type!==n.type&&(t.splice(e+1,0,new KE(WB(n,o),i.offset,i.easing)),i.easing=null,e++,s++)}}(t.keyframes),t}function WB(t,e){return t.withStopColorList(t.stopColors.allWithColor(e))}function RB(t,e){return(i,n,s,r,o)=>{PO(i,s,r);const a=i.keyframes;let l=a[0];l.offset>s&&(l=l.clone(!0),l.offset=s,l.easing=null,a.unshift(l)),l.offset>0&&(e?a.unshift(new KE(t,0,AE(!0))):a.unshift(new KE(t,0),new KE(t,l.offset)));let c=a.at(-1);return c.offset<r&&(c.easing=null,c=c.clone(!0),c.offset=r,a.push(c)),c.offset<o&&(e?(c.easing=AE(!1),a.push(new KE(t,o))):a.push(new KE(t,c.offset),new KE(t,o))),i}}function BB(t,e){return JSON.stringify(t,UB,e)}function UB(t,e){return"number"!=typeof e||Number.isInteger(e)?e:Math.round(1e4*e)/1e4}function $B(t){switch(t){case"webp":return Skia.SkEncodedImageFormat.WEBP;case"jpeg":return Skia.SkEncodedImageFormat.JPEG;default:return Skia.SkEncodedImageFormat.PNG}}let FB,VB,HB=null;const GB=new Map([[Cg,_U],[Qp,_U],[mg,function(t){if(!t.children.length)return null;const e=[],i=[],n=[];for(const s of t.children)s.target instanceof ng?e.push(s):s.target instanceof ag?i.push(s):n.push(s);if(!e.length&&!i.length||!n.length)return null;const s=function(t){const e=ZM("mask");return rU(e,t)?e:qB(e)}(i),r=function(t){const e=ZM("clipPath");return rU(e,t)?e:qB(e)}(e);if(!r&&!s)return null;let o=ZM("g");return r&&JB(o,r),s&&(t.target.isAlphaMask&&(s.style.maskType="alpha"),JB(o,s)),rU(o,n)?(o=dU(o,t),o?(r&&(o.setAttribute("clip-path",tU(iU(r))),HB.defs.appendChild(r)),s&&(o.setAttribute("mask",tU(iU(s))),HB.defs.appendChild(s)),o):null):qB(o)}],[ng,function(t){const e=ZM("path");return wU(e,t,"d",6,Hd),MU(e,t,"clip-rule",Gd,$M,0),dU(e,t,!1)}],[ag,_U],[gg,function(t){const[e,i]=t.pair(Jf),[n,s]=t.pair(qf);if(!e&&!i||!n&&!s)return null;const r=ZM("use");let o=r;const a=t.target.imageResource,l=function(t){if(!t)return null;const e=HB.images;if(e.has(t.id))return e.get(t.id);let i;try{i=t.data.encodeToDataURI(HB.imageFormat,100)}catch{return e.set(t.id,null),null}const n=LU(t.data.width),s=LU(t.data.height),r=ZM("image");r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("width",n),r.setAttribute("height",s),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("href",i),i=null;const o=ZM("symbol");o.setAttribute("width",n),o.setAttribute("height",s),o.setAttribute("viewBox",`0 0 ${n} ${s}`),o.setAttribute("preserveAspectRatio","none"),o.appendChild(r);const a=iU(o);return e.set(t.id,a),HB.defs.appendChild(o),a}(a);if(null==l)return qB(o);r.setAttribute("href",eU(l));const c=t.target.pin;if(2===HB.engine&&(i||s)){const t=a.width,r=a.height;o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("width",LU(e)),o.setAttribute("height",LU(n)),sU(o).set("transform",[3,[c,0,t,r,i??e,s??n]]),o=xU(o)}else c.isZero||(wU(o,t,"x",1,Jf,0,(t=>-c.x*t)),wU(o,t,"y",1,qf,0,(t=>-c.y*t))),wU(o,t,"width",2,Jf),wU(o,t,"height",2,qf);return dU(o,t)}],[Ig,function(t){const e=[];for(const[i]of t.target.paragraph.pathsWithStyle()){const t=i.toString();t&&e.push(t)}if(!e.length)return null;const i=ZM("path");return i.setAttribute("d",e.join("")),e.splice(0),fU(i,t)?(i.removeAttribute("fill-rule"),dU(i,t)):qB(i)}],[Jp,function(t){const e=ZM("path");return fU(e,t)?(wU(e,t,"d",6,Hd),dU(e,t)):qB(e)}],[qp,function(t){const[e,i]=t.pair(ep),n=IU(e,i?.keyframes,t.target.isClosed);return fU(n,t)?dU(n,t):qB(n)}],[tg,function(t){const[e,i]=t.pair(Xf),n=IU(e,i?.keyframes,!1);return fU(n,t)?dU(n,t):qB(n)}],[Zp,function(t){let e=ZM("ellipse");if(!fU(e,t))return qB(e);const i=t.target.pin;return gs(i)||(wU(e,t,"cx",1,Gf,0,(t=>t*(.5-i.x))),wU(e,t,"cy",1,Zf,0,(t=>t*(.5-i.y)))),wU(e,t,"rx",2,Gf,null,(t=>t/2)),wU(e,t,"ry",2,Zf,null,(t=>t/2)),dU(e,t)}],[Kp,function(t){let e,[i,n]=t.pair(Vf),s=i.isSimple,r=0;if(s&&(r=i.simpleValue,n))for(const t of n.keyframes){if(!t.value.isSimple){s=!1;break}r=Math.max(r,t.value.simpleValue)}const[o,a]=t.pair($f),[l,c]=t.pair(Ff);let u=!1;if(s)if(0===r)u=!0;else{let t=Math.min(o,l);if(a)for(const e of a.keyframes)t=Math.min(t,e.value);if(c)for(const e of c.keyframes)t=Math.min(t,e.value);r<=t/2?u=!0:!n&&r<=t&&(u=!0,i=new ys(t/2))}if(u){if(e=ZM("rect"),!fU(e,t))return qB(e);const s=t.target.pin;s.isZero||(wU(e,t,"x",1,$f,0,(t=>-s.x*t)),wU(e,t,"y",1,Ff,0,(t=>-s.y*t))),wU(e,t,"width",2,$f),wU(e,t,"height",2,Ff),SU(e,"rx",2,n?.keyframes,i,CU,(t=>t.simpleValue))}else{if(e=ZM("path"),!fU(e,t))return qB(e);if(0===HB.engine)e.setAttribute("d",EU(Jn(0,0,o,l,i?.value,!0))),sU(e).set("d",[5,[a??o,c??l,n??i]]),e=yU(e,t.target.pin,0);else if(!bU(e,t))return qB(e)}return dU(e,t)}],[Xp,function(t){let e=ZM("path");if(!fU(e,t))return qB(e);const[i,n]=t.pair(rp),[s,r]=t.pair(op),[o,a]=t.pair(ap),[l,c]=t.pair(lp);if(n||c||r||a){if(0===HB.engine)e.setAttribute("d",EU(Xn(i,s,o,l,!0))),sU(e).set("d",[6,[n??i,r??s,a??o,c??l]]),e=yU(e,t.target.pin,.5);else if(!bU(e,t))return qB(e)}else e.setAttribute("d",EU(nR(Xn(i,s,o,l,!0),t.target.pin)));return dU(e,t)}],[eg,function(t){let e=ZM("path");if(!fU(e,t))return qB(e);const[i,n]=t.pair(up),[s,r]=t.pair(dp),[o,a]=t.pair(hp),[l,c]=t.pair(pp),[u,h]=t.pair(fp),[d,f]=t.pair(mp),[p,g]=t.pair(gp),[m,v]=t.pair(vp);if(n||r||a||c||h||f||g||v){if(0===HB.engine)e.setAttribute("d",EU(Kn(i,s,o,l,u,d,p,m,!0))),sU(e).set("d",[7,[n??i,r??s,a??o,c??l,h??u,f??d,g??p,v??m]]),e=yU(e,t.target.pin,.5);else if(!bU(e,t))return qB(e)}else e.setAttribute("d",EU(nR(Kn(i,s,o,l,u,d,p,m,!0),t.target.pin)));return dU(e,t)}]]),ZB=new Map([[0,tU],[1,LU],[2,LU],[3,LU],[4,zU],[5,function(t){return t.map(TU).join(" ")}],[6,EU],[7,AU],[8,UM],[9,zU],[21,function(t){return t.isShiftedIdentity?t.tx?t.ty?`translate(${jU(t.tx)},${jU(t.ty)})`:`translateX(${jU(t.tx)})`:t.ty?`translateY(${jU(t.ty)})`:"none":`matrix(${t.value.map(LU).join(",")})`}],[22,function(t){return`path("${EU(t)}")`}],[20,jU],[23,t=>t.join(" ")],[13,function(t){return LU(100*t)+"%"}],[10,t=>`translate(${jU(t.x)},${jU(t.y)})`],[11,t=>`translateX(${jU(t)})`],[12,t=>`translateY(${jU(t)})`],[14,t=>`rotate(${NU(t)})`],[15,t=>`scale(${TU(t)})`],[16,t=>`scaleX(${LU(t)})`],[17,t=>`scaleY(${LU(t)})`],[18,t=>`skewX(${NU(t)})`],[19,([t,e])=>{const i=NU(-e);if(!t)return`rotate(0) skewX(${i}) rotate(0)`;const n=NU(t);return`rotate(-${n}) skewX(${i}) rotate(${n})`}]]);function YB(t){return 1===t?"Min":3===t?"Max":"Mid"}async function QB(t,e,i,n,s){let r=new AB(s);const o=n.startTime??0,a=o+(n.duration??i.duration),[l,c]=r.export(e,i,o,a,n.reverse);r=null;const u=n.bounds,h=ZM("svg"),d=ZM("defs");h.appendChild(d),h.setAttribute("xmlns",GM),n.background&&n.background.a>0&&(h.style.backgroundColor=AU(n.background));const f=n.size;f&&(h.setAttribute("width",f.width.toString()),h.setAttribute("height",f.height.toString())),h.setAttribute("viewBox",`${u.x} ${u.y} ${u.width} ${u.height}`),h.setAttribute("overflow","hidden");const p=n.scale??0;h.setAttribute("preserveAspectRatio",3===p?"none":`x${YB(n.align?.x)}Y${YB(n.align?.y)} ${2===p?"slice":"meet"}`),FB=n.decimals||4,VB=10**FB;const g=HB,m=`eaf-${(Date.now()%1e5).toString(16)}`,v=HB={id:0,prefix:m,separator:n.separator??":",engine:n.engine||0,duration:c,root:h,defs:d,useLast:!!n.reverse,useTitle:!1,useFilterFuncs:!!n.filterFuncs,useDisplayVisibility:!!n.display,useCssFuncs:!!n.cssFilterFuncs,useCssComposition:!0,animations:new Map,visibility:new Map,idMap:new Map,refMap:new Map,images:new Map,imageFormat:$B(n.imageFormat)};if(iU(h),0===p){const t=ZM("g");t.style.isolation="isolate",t.setAttribute("clip-path",tU(function(t){const e=ZM("clipPath"),i=ZM("rect");return i.setAttribute("x",LU(t.x)),i.setAttribute("y",LU(t.y)),i.setAttribute("width",LU(t.width)),i.setAttribute("height",LU(t.height)),e.appendChild(i),HB.defs.appendChild(e),iU(e)}(u))),h.appendChild(t),rU(t,l)}else h.style.isolation="isolate",rU(h,l);for(const t of v.images.values()){const e=`${v.prefix}: ${t}`;h.querySelector(`*[href='#${e}']`)||h.getElementById(e)?.remove()}const y=await t(v);d.hasChildNodes()||d.remove(),v.animations.clear(),v.visibility.clear(),v.idMap.clear(),v.refMap.clear();for(const t of l)t.dispose();return HB=g,y}function JB(t,e){const i=HB.refMap;i.has(t)||i.set(t,new Set),i.get(t).add(e)}function qB(t){HB.animations.delete(t),HB.visibility.delete(t),HB.idMap.delete(t);const e=HB.refMap.get(t);if(e){HB.refMap.delete(t);for(const t of e)qB(t);e.clear()}for(const e of Array.from(t.children))qB(e);return t.remove(),null}function KB(t){return ZB.get(t)}function XB(t){return`${HB.prefix}${HB.separator}${t}`}function tU(t){return t?`url('#${XB(t)}')`:"none"}function eU(t){return t?`#${XB(t)}`:"none"}function iU(t){if(!HB.idMap.has(t)){const e=HB.id++;return HB.idMap.set(t,e),t.setAttribute("id",XB(e)),e}return HB.idMap.get(t)}function nU(t){return HB.useLast?t[t.length-1]:t[0]}function sU(t){const e=HB.animations;return e.has(t)||e.set(t,new Map),e.get(t)}function rU(t,e){for(const i of e){const e=GB.get(i.target.constructor)?.(i);if(e)if(Array.isArray(e))for(const i of e)t.appendChild(i);else t.appendChild(e)}return t.hasChildNodes()}const oU=new Map([[im,function(t,e){const[i,n]=t.pair(Cp);if(!n&&!i)return null;let s=!0;return e||(s=null!=n),[s?[0,[n??i],e]:null,i>0?`blur(${LU(i)}px)`:null]}],[sm,function(t,e,i){const[n,s]=t.pair(Rp),[r,o]=t.pair(Wp),[a,l]=t.pair(Op);let c=!0;e||(c=null!=(s||o||l));let u=null;return n.a>0&&(u=i?`drop-shadow(${LU(r.x)}px ${LU(r.y)}px ${LU(a)}px ${AU(n)})`:`drop-shadow(${AU(n)} ${LU(r.x)} ${LU(r.y)} ${LU(a)})`),[c?[2,[s??n,o??r,l??a],e]:null,u]}],[nm,function(t,e){const[i,n]=t.pair(Np),[s,r]=t.pair(jp),[o,a]=t.pair(zp),[l,c]=t.pair(Pp),[u,h]=t.pair(Tp),[d,f]=t.pair(Ap),[p,g]=t.pair(Dp),m=[];1!==i&&m.push(`brightness(${LU(i)})`),1!==s&&m.push(`contrast(${LU(s)})`),1!==o&&m.push(`saturate(${LU(o)})`),l%360!=0&&m.push(`hue-rotate(${LU(l%360)}deg)`),0!==u&&m.push(`invert(${LU(u)})`),0!==d&&m.push(`grayscale(${LU(d)})`),0!==p&&m.push(`sepia(${LU(p)})`);let v=!0;return e||(v=null!=(n||r||a||c||h||f||g)),[v?[1,[n??i,r??s,a??o,c??l,h??u,f??d,g??p],e]:null,m.length?m.join(" "):null]}]]),aU=new Map([[im,function(t){const e=ZM("feGaussianBlur");return wU(e,t,"stdDeviation",2,Cp,0,null,cU(t,0))?e:qB(e)}],[sm,function(t){const e=ZM("feDropShadow");e.setAttribute("color-interpolation-filters","sRGB");const i=wU(e,t,"dx",1,Wp,ce.ZERO,(t=>t.x),cU(t,0)),n=wU(e,t,"dy",1,Wp,ce.ZERO,(t=>t.y),cU(t,0)),s=wU(e,t,"stdDeviation",2,Op,0,null,cU(t,0)),r=wU(e,t,"flood-color",7,Rp,null,null,cU(t,se.transparent));return i||n||s||r?e:qB(e)}],[nm,function(t){const e=ZM("feColorMatrix");e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("type","matrix");const[i,n]=t.pair(Np),[s,r]=t.pair(jp),[o,a]=t.pair(zp),[l,c]=t.pair(Pp),[u,h]=t.pair(Tp),[d,f]=t.pair(Ap),[p,g]=t.pair(Dp),m=null!=(n||r||a||c||h||f||g),v=cU(t),y=new mr;if(uU(v)&&y.brightness(i).contrast(s).saturate(o).hueRotate(l).invert(u).grayscale(d).sepia(p),!m){if(y.isIdentity)return qB(e);if(!v)return e.setAttribute("values",zU([...y.value])),e}const x=[n??i,r??s,a??o,c??l,h??u,f??d,g??p];if(0===HB.engine)e.setAttribute("values",zU([...y.value])),sU(e).set("values",[8,x,v]);else{const t=[...y.value],i=[..._O(x,60,(([t,e,i,n,s,r,o])=>(y.reset().brightness(t).contrast(e).saturate(i).hueRotate(n).invert(s).grayscale(r).sepia(o),[...y.value])))];if(MO(i),!SU(e,"values",9,i,t,[...y.reset().value]))return qB(e)}return e}]]);function lU(t,e){if(!e.hasOwnVisibility)return;const i=e.start>0,n=e.end<HB.duration;(i||n)&&(HB.visibility.set(t,[e.start,e.end]),(HB.useLast?n:i)&&(HB.useDisplayVisibility?t.style.display="none":t.setAttribute("visibility","hidden")))}function cU(t,e){return t.start>0||t.end<HB.duration?null!=e?[t.start,t.end,e]:[t.start,t.end]:null}function uU(t){return!t||(HB.useLast?t[1]>=HB.duration:t[0]<=0)}function hU(t){let e;const i=t.value($d),[s,r]=t.pair(Yd);let[o,a]=t.pair(Rd);const[l,c]=t.pair(Wd),[u,h]=t.pair(Bd),[d,f]=t.pair(Ud),[p,g]=t.pair(Od);if(!c&&(0===l.x||0===l.y))return null;let m=!1,v=0;if(t.motionPath?.length>1){const o=t.motionPath[0].point,l=En(t.motionPath),c=s?l.length:0,u=l.getPosTanAtLength(n(s*c,0,c))||{px:o.x,py:o.y,tx:0,ty:0};l.delete(),e=new ce(u.px,u.py),r&&(m=!0),0!==i&&(v=Math.atan2(u.ty,u.tx)*Et,-1===i&&(v+=180),v%=360,v&&a&&!m&&a.keyframes.forEach((t=>t.value+=v)))}else e=t.target.position;const y=(new hi).translate(e.x,e.y).rotate(o+v).skewAxis(u,d).scale(l.x,l.y).translate(-p.x,-p.y),x=m||null!=(a||c||h||f||g);return[m?t.motionPath:null,r,i,e,a,o%360,c,l,h,u%360,f,d%360,g,p,y,x]}function dU(t,e,i=!0){return function(t,e){if(!e.target.isElement||!e.target.isTransformable)return!0;const i=hU(e);if(!i)return!1;const[n,s,r,o,a,l,c,u,h,d,f,p,g,m,v,y]=i;return function(t,e){e.isIdentity||t.setAttribute("transform",PU(e))}(t,v),!y||(sU(t).set("transform",[1,[n,s,r,o,a??l,c??u,h??d,f??p,g??m]]),!0)}(t,e)?i?function(t,e){if(e.eq(Pd,0))return qB(t);const i=e.target;return e.filterContainer&&(t=HB.useFilterFuncs?function(t,e,i){const n=[],s=[];let r=!0;const o=e.filterContainer.hasOwnVisibility;for(const t of e.filterContainer.children){const e=oU.get(t.target.constructor);if(!e)continue;const a=o||t.hasOwnVisibility?cU(t):null,l=e(t,a,i);if(!l)continue;!r||t.target instanceof nm||(r=!1);const[c,u]=l;c&&n.push(c),u&&(a&&!(HB.useLast?a[1]>=HB.duration:a[0]<=0)||s.push(u))}if(!s.length&&!n.length)return t;if(!r){const e=ZM("g");e.appendChild(t),t=e}return s.length&&(i?t.style.filter=s.join(" "):t.setAttribute("filter",s.join(" "))),n.length&&sU(t).set("filter",[4,n,cU(e)]),t}(t,e,HB.useCssFuncs):function(t,e){const i=ZM("filter");let n=!0;for(const t of e.filterContainer.children){const e=aU.get(t.target.constructor);if(!e)continue;const s=e(t);s&&(i.appendChild(s),!n||s instanceof SVGFEColorMatrixElement||(n=!1))}if(!i.hasChildNodes())return qB(i),t;if(!n){i.setAttribute("x","-100%"),i.setAttribute("y","-100%"),i.setAttribute("width","300%"),i.setAttribute("height","300%");const e=ZM("g");e.appendChild(t),t=e}const s=iU(i);return HB.defs.appendChild(i),JB(t,i),t.setAttribute("filter",tU(s)),t}(t,e)),t?(HB.useTitle&&i.title&&t.setAttribute("title",i.title),wU(t,e,"opacity",3,Pd,1),11!==i.blend&&(t.style.mixBlendMode=RM(i.blend)),i.isolate&&i.supportsChildren&&(t.style.isolation="isolate"),lU(t,e),t):null}(t,e):(lU(t,e),t):qB(t)}function fU(t,e){const i=function(t,e){return e.eq(Jd,0)?(t.setAttribute("fill","none"),!1):gU(t,e,"fill",qd)?(wU(t,e,"fill-opacity",3,Jd,1),pU.has(t.constructor)||MU(t,e,"fill-rule",Gd,$M,0),!0):(t.setAttribute("fill","none"),!1)}(t,e),n=function(t,e){return!(e.eq(Xd,0)||e.eq(ef,0)||!gU(t,e,"stroke",tf)||(wU(t,e,"stroke-opacity",3,Xd,1),wU(t,e,"stroke-width",2,ef,1),MU(t,e,"stroke-linecap",sf,OM,0),MU(t,e,"stroke-linejoin",nf,WM,0)||MU(t,e,"stroke-miterlimit",rf,LU,4),wU(t,e,"stroke-dasharray",4,of,[])&&(wU(t,e,"stroke-dashoffset",1,af,0),MU(t,e,"pathLength",lf,LU,0)),0))}(t,e);return!(!i&&!n||(MU(t,e,"paint-order",cf,EM,0),0))}const pU=new Set([SVGRectElement,SVGEllipseElement,SVGCircleElement,SVGLineElement]);function gU(t,e,i,n){const s=e.animation(n);if(!s){const s=e.value(n);return!!s.isVisible&&(s instanceof gi?(t.setAttribute(i,AU(s.color)),!0):mU(t,i,[new KE(s,0)]))}return s.keyframes[0].value instanceof gi?function(t,e,i){return!!i.find((t=>t.value.isVisible))&&kU(t,e,7,i,(t=>t.color))}(t,i,s.keyframes):mU(t,i,s.keyframes)}function mU(t,e,i){if(!i.find((t=>t.value.stopColors.isVisible)))return!1;const[n,s]=function(t){const e=nU(t).value,i=ZM(e instanceof Ii?"linearGradient":"radialGradient");i.setAttribute("gradientUnits","userSpaceOnUse"),kU(i,"spreadMethod",8,t,(t=>t.spread),0,!0);const n=e.stopColors.length;for(let e=0;e<n;e++){const n=ZM("stop");kU(n,"stop-color",7,t,(t=>t.stopColors.getColorAt(e))),kU(n,"offset",3,t,(t=>t.stopColors.getOffsetAt(e))),i.appendChild(n)}let s=t[0].value.type;const r=[],o=bO(t,((t,e)=>(t.type!==s&&(r.push(e),s=t.type),t instanceof Li?t.end:t.center)));let a=0;for(let t of r){t+=a,o[t-1].easing=null;const e=o[t-1].clone(),i=o[t].clone();i.easing=null,e.offset=i.offset=(e.offset+i.offset)/2,o.splice(t,0,e,i),a+=2}MO(o);const l=MO(bO(t,(t=>t.rotate))),c=MO(bO(t,(t=>t.scale))),u=function(t,e,i){return(new hi).translate(t.x,t.y).rotate(e).scale(1,i).translate(-t.x,-t.y)}(nU(o).value,nU(l).value,nU(c).value);if(u.isIdentity||i.setAttribute("gradientTransform",PU(u)),1===l.length&&1===c.length){if(1===o.length)return[i,r];if(0===r.length)return[i,r]}return sU(i).set("gradientTransform",[2,[o,l,c]]),[i,r]}(i);if(!s.length){const s=vU(i,n),r=iU(s);return HB.defs.appendChild(s),JB(t,s),t.setAttribute(e,tU(r)),!0}HB.defs.appendChild(n),JB(t,n);const r=eU(iU(n)),o=[];for(const e of function*(t,e){let i=0;for(const n of e){const e=t.slice(i,n);0!==e.length&&(yield e.map(wO),i=n)}const n=t.slice(i);n.length>0&&(yield n.map(wO))}(i,s)){const i=vU(e),n=iU(i);i.setAttribute("href",r),HB.defs.appendChild(i),JB(t,i),o.push(new KE(n,e[0].offset)),e.length>1&&o.push(new KE(n,e[e.length-1].offset))}return MO(o),SU(t,e,0,o),!0}function vU(t,e){const i=t[0].value;return i instanceof Ii?function(t,e){return kU(t,"x1",1,e,(t=>t.start.x)),kU(t,"y1",1,e,(t=>t.start.y)),kU(t,"x2",1,e,(t=>t.end.x)),kU(t,"y2",1,e,(t=>t.end.y)),t}(e||ZM("linearGradient"),t):i instanceof Ci?function(t,e){return kU(t,"cx",1,e,(t=>t.center.x)),kU(t,"cy",1,e,(t=>t.center.y)),kU(t,"r",2,e,(t=>t.radius)),t}(e||ZM("radialGradient"),t):i instanceof Li?function(t,e){return kU(t,"cx",1,e,(t=>t.end.x)),kU(t,"cy",1,e,(t=>t.end.y)),kU(t,"r",2,e,(t=>t.endRadius)),kU(t,"fx",1,e,(t=>t.start.x)),kU(t,"fy",1,e,(t=>t.start.y)),kU(t,"fr",2,e,(t=>t.startRadius)),t}(e||ZM("radialGradient"),t):e}function yU(t,e,i){return e.x===i&&e.y===i?t:(t.style.transformBox="fill-box",t.style.transformOrigin=`${OU(e.x)}% ${OU(e.y)}%`,t.style.transform=`translate(${OU(i-e.x)}%, ${OU(i-e.y)}%)`,xU(t))}function xU(t){const e=ZM("g");return e.appendChild(t),e}function bU(t,e){const i=tR(e.target);if(!i)return!1;const n=[];for(const t of i){const[i,s]=e.pair(t);n.push(s||i),e.animations.delete(t)}const s=eR(e.target,n);if(!s)return!1;if(e.properties.set(Hd,nU(s).value),s.length>1){const t=rO(Hd.id);e.animations.set(Hd,t.createAnimation(s))}return wU(t,e,"d",6,Hd)}function wU(t,e,i,n,s,r,o,a,l){return SU(t,i,n,e.animation(s)?.keyframes,e.value(s),r,o,a,l)}function MU(t,e,i,n,s,r){const o=e.value(n);return!kt(o,r)&&(t.setAttribute(i,s(o)),!0)}function SU(t,e,i,n,s,r,o,a,l){const c=KB(i),u=s;if(uU(a)){if(null==s){if(!n?.length)return!1;s=nU(n).value}1===n?.length&&(s=n[0].value,n=null)}else s=a[2];const h=!kt(s,r);if(h){const i=c(o?o(s):s);l?t.style[e]=i:t.setAttribute(e,i)}if(!n?.length){if(!a||null==a[2])return h;n=[new KE(u,0)]}return sU(t).set(e,[0,i,o?bO(n,o):n,a]),!0}function kU(t,e,i,n,s,r,o,a){const l=MO(bO(n,s,o));return SU(t,e,i,l,nU(l).value,r,null,null,a)}function _U(t){if(!t.children.length)return null;const e=ZM("g");return rU(e,t.children)?dU(e,t):qB(e)}function IU(t,e,i){let n;return 2!==t.length||e||i?e&&2===HB.engine?(n=ZM("path"),SU(n,"d",6,e,null,null,(t=>qn(t,i)))):(n=ZM(i?"polygon":"polyline"),SU(n,"points",5,e,t)):(n=ZM("line"),n.setAttribute("x1",LU(t[0].x)),n.setAttribute("y1",LU(t[0].y)),n.setAttribute("x2",LU(t[1].x)),n.setAttribute("y2",LU(t[1].y))),n}const CU=new ys;function LU(t){return f(function(t,e=1e4){return Math.round(t*e)/e}(t,VB),FB)}function NU(t){return t?`${LU(t)}deg`:"0"}function jU(t){return t?`${LU(t)}px`:"0"}function zU(t){return t.map(LU).join(" ")}function PU(t){return t.isShiftedIdentity?`translate(${LU(t.tx)} ${LU(t.ty)})`:`matrix(${t.value.map(LU).join(" ")})`}function TU(t){return`${LU(t.x)},${LU(t.y)}`}function AU(t){return x(t.r,t.g,t.b,t.a)}const DU=/\s*([a-z])\s*/gi;function EU(t){return function(t,e,i,n){const s=t.length;if(0===s)return"";const r=n??Dn,o=[],a=(t,e)=>{const i=t.point;1!==e.joint&&e.handleIn?1!==t.joint&&t.handleOut?o.push("c",r(t.handleOut.x-i.x),r(t.handleOut.y-i.y),r(e.handleIn.x-i.x),r(e.handleIn.y-i.y),r(e.point.x-i.x),r(e.point.y-i.y)):o.push("q",r(e.handleIn.x-i.x),r(e.handleIn.y-i.y),r(e.point.x-i.x),r(e.point.y-i.y)):1!==t.joint&&t.handleOut?o.push("q",r(t.handleOut.x-i.x),r(t.handleOut.y-i.y),r(e.point.x-i.x),r(e.point.y-i.y)):o.push("l",r(e.point.x-i.x),r(e.point.y-i.y))};let l,c=null,u=null;!i&&(i=t[0].point);for(let e=0;e<s;e++)l=t[e],null!=c&&1!==l.type?(a(u,l),u=l,2===l.type?c=null:3===l.type&&(a(l,c),o.push("z"),u=c,c=null)):(null==u?o.push("m",r(i.x),r(i.y)):o.push("m",r(l.point.x-u.point.x),r(l.point.y-u.point.y)),c=u=l);return o.join(" ")}(t,0,null,LU).replace(DU,"$1")}function OU(t){return Math.round(100*t)}let WU,RU;async function BU(t,e,i){i.display=!0,i.engine=0,i.separator=":";const[n,s,r,o,a]=await QB(UU,t,e,i,0);if(s?.length){const t={prefix:o,duration:a,speed:(i.speed||1)*(i.reverse?-1:1),alternate:i.alternate?1:void 0,repeat:i.repeat||void 0,load:i.load||0,actions:i.actions||void 0},e="ExpressiveAnimatorPlayer";let l;if(3===i.load){t.load=0,t.alternate=1;const e=n.ownerDocument.createComment("expressive="+BB([t,s,r]));n.prepend(e)}else l=`${await(await fetch("/assets/animator/player.js")).text()}\nwindow["${e}"](\n${BB(t)},\n${BB(s)},\n${BB(r)}\n);`;if(l){const t=ZM("script");t.textContent=l,n.appendChild(t)}}return n}function UU(t){WU=t,RU=new PB;try{const e=[...c$(t.root)],i=RU.keys();return[t.root,e,i,t.prefix,t.duration]}finally{RU.clear(),RU=null,WU=null}}const $U="*";function FU(t,e){return t.map((t=>function(t,e){const i=[t.offset,e?e(t.value):t.value],n=function(t){if(!t)return null;const e=_E(t.func);if(e){switch(e.id){case"ease":return t.inverted?2:1;case"ease-both":return 3;case"step":return t.inverted?5:4}return null}const i=t.func,n=2*i.type+(t.inverted?1:0);if(i instanceof uE)return[n,i.h1.x,i.h1.y,i.h2.x,i.h2.y];if(i instanceof pE)return[n,i.steps];if(i instanceof yE)return[n,i.bounces,i.stiffness];if(i instanceof gE)return[n,i.oscillations,i.stiffness];if(i instanceof vE)return[n,i.amplitude];if(i instanceof mE)return[n,i.oscillations];if(i instanceof xE){const t=ZU(i.points);return t.unshift(n),t}return null}(t.easing);return null!=n&&i.push(n),i}(t,e)))}function VU(t,e){return t instanceof iO?FU(t.keyframes,e):[[0,e?e(t):t]]}function HU(t,e){const i=t[0].value[e];for(let n=1;n<t.length;n++)if(t[n].value[e]!==i)return!1;return!0}function GU(t){return[t.x,t.y]}function ZU(t){const e=[];for(const i of t)e.push(i.x,i.y);return e}function YU(t,e){return 1!==e.joint&&e.handleIn?1!==t.joint&&t.handleOut?[t.handleOut.x,t.handleOut.y,e.handleIn.x,e.handleIn.y,e.point.x,e.point.y]:[e.handleIn.x,e.handleIn.y,e.point.x,e.point.y]:1!==t.joint&&t.handleOut?[t.handleOut.x,t.handleOut.y,e.point.x,e.point.y]:[e.point.x,e.point.y]}function QU(t,e){return!(1!==t.joint&&null!=t.handleOut||1!==e.joint&&null!=e.handleIn)}function JU(t){const e=[];let i,n;for(const s of t)i&&1!=s.type?(e.push(...YU(n,s)),n=s,2===s.type?i=null:3===s.type&&(QU(s,i)||e.push(...YU(s,i)),n=i,i=null)):(e.push(s.point.x,s.point.y),i=n=s);return e}function qU(t,e){const i=[];for(let n=0;n<t.length;n++)e.includes(n)?i.push(LU(t[n])):i.push($U);return i.join(" ")}function KU(t,e){const i=[];for(let n=0;n<t.length;n+=2)e.includes(n)?i.push(LU(t[n])):i.push($U),i.push(","),e.includes(n+1)?i.push(LU(t[n+1])):i.push($U);return i.join(" ")}function XU(t,e,i){const n=[];let s=0;function r(i){for(let r=0;r<i;r++)e.includes(s+r)?n.push(LU(t[s+r])):n.push($U);s+=i}const o=(t,e)=>e?1!==e.joint&&e.handleIn?1!==t.joint&&t.handleOut?(n.push("C"),void r(6)):(n.push("Q"),void r(4)):1!==t.joint&&t.handleOut?(n.push("Q"),void r(4)):(n.push("L"),void r(2)):(n.push("M"),void r(2));let a,l;for(const t of i)a&&1!=t.type?(o(l,t),l=t,2===t.type?a=null:3===t.type&&(QU(t,a)||o(t,a),n.push("Z"),l=a,a=null)):(o(t,null),a=l=t);return n.join(" ").replace(/\s*([MLQCZ])\s+/gi,"$1")}function t$(t){return t[0]}const e$=[[0,3,8],[1,4,9],[2,5,8]];function i$(t,e,i,n){const s=t[0].value;if(e)for(const i of t)i.value=e(i.value);const r=function(t){const e=[];for(let i=t[0].value.length-1;i>=0;i--)HU(t,i)&&e.push(i);return e}(t),o=t[0].value,a=i(o,r,s);if(r.length>0)for(const e of r)for(const i of t)i.value.splice(e,1);const l=e$[n];return 1===o.length?a===$U?[l[0],FU(t,t$)]:[l[1],FU(t,t$),RU.get(a)]:[l[2],FU(t),RU.get(a)]}function n$(t){const e=[Math.round(t.r),Math.round(t.g),Math.round(t.b)];return 1!==t.a&&e.push(Math.round(1e4*t.a)/1e4),e}function s$(t,e){const i=ZB.get(t);return FU(e,(t=>RU.get(i(t))))}function r$(t,e,i){return e&&(null!=i&&(e=[e[0],e[1],i]),2===t.length&&t.push(0),t.push(e)),t}const o$=new Map([[0,function*([t],e){yield[4,VU(t),RU.get("blur(*px)"),e]}],[1,function*(t,e){for(let i=0;i<a$.length;i++){const[n,s,r]=a$[i];(t[i]instanceof iO||t[i]!==n)&&(yield[s,VU(t[i]),RU.get(r),e])}}],[2,function*([t,e,i],n){yield[16,[[10,VU(t,n$)],[6,VU(e,GU)],[1,VU(i)]],RU.get("drop-shadow(* * *px)"),n]}]]),a$=[[1,4,"brightness(*)"],[1,4,"contrast(*)"],[1,4,"saturate(*)"],[0,3,"hue-rotate(*deg)"],[0,4,"invert(*)"],[0,4,"grayscale(*)"],[0,4,"sepia(*)"]],l$=new Map([[0,function(t,e,i){switch(t){case 1:return r$([0,FU(e)],i);case 2:return r$([1,FU(e)],i);case 3:return r$([2,FU(e)],i);case 7:return r$([10,FU(e,n$)],function(t,e){if(t)return null!=t[2]&&(t[2]=e(t[2])),t}(i,n$));case 4:return i$(e,null,qU,1);case 5:return i$(e,ZU,KU,0);case 6:return i$(e,JU,XU,0);case 0:return r$([11,FU(e),void 0,i],i)}return r$([12,s$(t,e)],i)}],[1,function([t,e,i,n,s,r,o,a,l]){let c;return c=t?[EU(t),1===i?1:-1===i?-1:0]:n.isZero?void 0:[n.x,n.y],[13,[[0,VU(e||0)],[0,VU(s)],[6,VU(r,GU)],[0,VU(o)],[0,VU(a)],[6,VU(l,GU)]],c]}],[2,function([t,e,i]){return[14,[[6,FU(t,GU)],[0,FU(e)],[0,FU(i)]]]}],[4,function(t,e){const i=[];for(const[e,n,s]of t)o$.has(e)&&i.push(...o$.get(e)(n,s||void 0));return i.length?[15,i,e||void 0]:null}],[5,function([t,e,i]){return[17,[[1,VU(t)],[1,VU(e)],[7,VU(i,(t=>t.isSimple?[t.value,t.value,t.value,t.value]:t.value))]]]}],[6,function([t,e,i,n]){return[18,[[1,VU(t)],[1,VU(e)],[0,VU(i)],[0,VU(n)]]]}],[7,function([t,e,i,n,s,r,o,a]){return[19,[[1,VU(t)],[1,VU(e)],[1,VU(i)],[0,VU(n)],[0,VU(s)],[0,VU(r)],[0,VU(o)],[0,VU(a)]]]}],[8,function([t,e,i,n,s,r,o],a){return[20,[r$([1,VU(t)],a,1),r$([1,VU(e)],a,1),r$([1,VU(i)],a,1),r$([0,VU(n)],a,0),r$([2,VU(s)],a,0),r$([2,VU(r)],a,0),r$([2,VU(o)],a,0)]]}]]);function*c$(t){for(let e=t.firstElementChild;null!=e;e=e.nextElementSibling)yield*u$(e)}function*u$(t){const e=function(t){return WU.visibility.get(t)}(t),i=function(t){const e=WU.animations.get(t);if(!e)return null;const i=[];for(const[t,n]of e){const e=l$.get(n.shift());if(!e)continue;const s=e(...n);s&&(s.unshift(RU.get(t)),i.push(s))}return i.length?i:null}(t);if(!e&&!i)return yield*c$(t);let n=Array.from(c$(t));n.length||(n=null);const s=[iU(t),i||0,n||0,e||0];for(;0===s[s.length-1];)s.pop();yield s}let h$,d$,f$=0,p$=0,g$=!1,m$=1,v$=1;async function y$(t,e,i){return m$=i.speed||1,f$=i.repeat||0,p$=i.repeatDur||0,g$=!!i.freeze,i.engine=1,i.separator="-",i.filterFuncs=!1,QB(x$,t,e,i,63)}function x$(t){h$=t,v$=t.duration,d$=`${LU(v$/m$)}ms`;try{return b$(t.root,[0,t.duration]),t.root}finally{h$=null,v$=0,d$=null}}function b$(t,e){let i,n;for(let s=t.firstElementChild;null!=s;s=s.nextElementSibling){let t=h$.visibility.get(s);if(t&&(t[0]>e[0]||t[1]<e[1])){if(t=[Math.max(t[0],e[0]),Math.min(t[1],e[1])],t[1]<=t[0]){n??=[],n.push(s);continue}i=t}else t=null,i=e;s.firstElementChild&&b$(s,i);const r=h$.animations.get(s);if(r?.size)for(const[t,e]of r)w$.get(e.shift())?.(s,t,...e);t?T$(s,t):s.querySelector(":scope > animate[attributeName=visibility]")||s.removeAttribute("visibility")}if(n?.length)for(const t of n)t.remove()}const w$=new Map([[0,function(t,e,i,n){t.appendChild(A$(n,KB(i),e))}],[1,function(t,e,i){M$(t,function*([t,e,i,n,s,r,o,a,l],c){t?(yield E$("translate","0 0",c),yield function(t,e,i,n="transform"){const s=A$(i,LU,n,"animateMotion","keyPoints");return s.setAttribute("path",t),0!==e&&s.setAttribute("rotate",-1===e?"auto-reverse":"auto"),s}(EU(t),i,e.keyframes,c)):L$(n)||(yield E$("translate",N$(n),c)),s instanceof iO?yield D$("rotate",s.keyframes,LU,c):s%360&&(yield E$("rotate",LU(s),c)),o instanceof iO?a instanceof iO?(yield D$("rotate",a.keyframes,z$,c),yield D$("skewX",o.keyframes,z$,c),yield D$("rotate",a.keyframes,LU,c)):a%360?(yield E$("rotate",z$(a),c),yield D$("skewX",o.keyframes,z$,c),yield E$("rotate",LU(a),c)):yield D$("skewX",o.keyframes,z$,c):o&&(a instanceof iO?(yield D$("rotate",a.keyframes,z$,c),yield E$("skewX",z$(o),c),yield D$("rotate",a.keyframes,LU,c)):a%360?(yield E$("rotate",z$(a),c),yield E$("skewX",z$(o),c),yield E$("rotate",LU(a),c)):yield E$("skewX",z$(o),c)),r instanceof iO?yield D$("scale",r.keyframes,N$,c):1===r.x&&1===r.y||(yield E$("scale",N$(r),c)),l instanceof iO?yield D$("translate",l.keyframes,j$,c):L$(l)||(yield E$("translate",j$(l),c))}(i,e))}],[2,function(t,e,i){M$(t,function*([t,e,i],n){t.length>1?yield D$("translate",t,N$,n):L$(t[0].value)||(yield E$("translate",N$(t[0].value),n)),e.length>1?yield D$("rotate",e,LU,n):e[0].value%360&&(yield E$("translate",LU(e[0].value),n)),i.length>1?yield D$("scale",i,C$,n):1!==i[0].value&&(yield E$("scale",C$(i[0].value),n)),t.length>1?yield D$("translate",t,j$,n):L$(t[0].value)||(yield E$("translate",j$(t[0].value),n))}(i,e))}],[4,function(t,e,i){M$(t,function*(t,e,i){for(let[n,s,r]of t)S$.has(n)&&(r&&r[0]<=0&&r[1]>=v$&&(r=null),yield*S$.get(n)(s,r,e,i))}(i,e,h$.useCssFuncs))}]]);function M$(t,e){let i=!1;for(const n of e)n&&(i&&n.setAttribute("additive","sum"),t.appendChild(n),i=!0)}const S$=new Map([[0,function*([t],e,i,n){yield R$(t,e,"blur(*px)",0,i,n)}],[1,function*(t,e,i,n){let s=0;for(const r of t){const[t,o]=k$[s++];yield R$(r,e,o,t,i,n)}}],[2,function*(t,e,i,n){const s=[..._O(t,0,(t=>[...t]))];if(MO(s),!s.length)return;const r=n?I$:_$;if(1===s.length){const t=s[0].value;t[0].a&&(yield O$(s[0].value,r,[t[0],ce.ZERO,0],e,i,n))}else yield W$(s,r,i,n)}]]),k$=[[1,"brightness(*)"],[1,"contrast(*)"],[1,"saturate(*)"],[0,"hue-rotate(*deg)"],[0,"invert(*)"],[0,"grayscale(*)"],[0,"sepia(*)"]];function _$([t,e,i]){return`drop-shadow(${AU(t)} ${LU(e.x)} ${LU(e.y)} ${LU(i)})`}function I$([t,e,i]){return`drop-shadow(${LU(e.x)}px ${LU(e.y)}px ${LU(i)}px ${AU(t)})`}function C$(t){return`1 ${LU(t)}`}function L$(t){return a(t.x,0)&&a(t.y,0)}function N$(t){return`${LU(t.x)} ${LU(t.y)}`}function j$(t){return`${LU(-t.x)} ${LU(-t.y)}`}function z$(t){return LU(-t)}function P$(t){return t?"visible":"hidden"}function T$(t,e){let i;e[0]>0?(i=[],i.push(new KE(0,0)),i.push(new KE(0,e[0])),i.push(new KE(1,e[0])),e[1]<v$?(i.push(new KE(1,e[1])),i.push(new KE(0,e[1])),i.push(new KE(0,v$))):i.push(new KE(1,v$))):e[1]<v$&&(i=[],i.push(new KE(1,0)),i.push(new KE(1,e[1])),i.push(new KE(0,e[1])),i.push(new KE(0,v$))),i&&t.appendChild(A$(i,P$,"visibility"))}function A$(t,e,i,n="animate",s="values"){return function(t,e,i,n,s="values"){return n&&t.setAttribute("attributeName",n),t.setAttribute(s??"values",e.map((t=>i(t.value))).join(";")),t}(function(t,e="animate"){const i=t[0];i.offset>0&&t.unshift(new KE(i.value,0));const n=t[t.length-1];n.offset<v$&&(n.easing=null,t.push(new KE(n.value,v$)));const s=ZM(e),[r,o]=function(t){let e=!0;const i=[],n=[],s=t[0].offset,r=t[t.length-1].offset-s;for(const o of t)if(i.push(LU((o.offset-s)/r)),o.easing){e=!1;const t=o.easing.func;n.push(`${LU(t.h1.x)} ${LU(t.h1.y)} ${LU(t.h2.x)} ${LU(t.h2.y)}`)}else n.push("0 0 1 1");return n.pop(),[i.join(";"),e?null:n.join(";")]}(t);return s.setAttribute("keyTimes",r),o?(s.setAttribute("calcMode","spline"),s.setAttribute("keySplines",o)):s.setAttribute("calcMode","linear"),B$(s)}(t,n),t,e,i,s)}function D$(t,e,i,n="transform"){const s=A$(e,i,n,"animateTransform","values");return s.setAttribute("type",t),s}function E$(t,e,i="transform"){const n=ZM("animateTransform");return n.setAttribute("attributeName",i),n.setAttribute("type",t),n.setAttribute("from",e),n.setAttribute("to",e),n.setAttribute("calcMode","discrete"),B$(n)}function O$(t,e,i,n,s,r){if(t===i)return null;const o=[new KE(t,0)];return n&&(n[0]>0?o[0].offset=n[0]:n[1]<v$&&(o[0].offset=n[1])),W$(o,e,s,r)}function W$(t,e,i,n){const s=A$(t,e,i);return n&&s.setAttribute("attributeType","CSS"),s}function R$(t,e,i,n,s,r){const o=t=>i.replace("*",LU(t));return t instanceof iO?W$(t.keyframes,o,s,r):O$(t,o,n,e,s,r)}function B$(t){return t.setAttribute("dur",d$),1!==f$&&(t.setAttribute("repeatCount",f$?f$.toString():"indefinite"),!f$&&p$&&t.setAttribute("repeatDur",`${p$}ms`)),g$&&f$&&t.setAttribute("fill","freeze"),t}const U$="";let $$,F$,V$,H$,G$,Z$,Y$=0,Q$=!1,J$=!1,q$=!1;const K$=new Map,X$=new Map;async function tF(t,e,i){return i.engine=2,i.filterFuncs=i.cssFilterFuncs=!0,i.separator="-",i.display=!1,V$=i.speed||1,H$=i.repeat||0,Q$=i.reverse,J$=i.alternate,q$=i.freeze,G$=i.start??0,Z$=i.onHover,QB(eF,t,e,i,49)}function eF(t){$$=t,Y$=t.duration,F$=t.prefix+t.separator;try{return lF(t.root,[0,t.duration]),function(t,e){if(!X$.size)return;const i=ZM("style");(function(t){for(const[e,i]of X$){if(!i.size)continue;const n=[],s=[];for(const[e,r]of i)n.push(`${t}${e}`),s.push(r);e.style.animationName=n.join(",");let r=null;const o=s.length-1,a=Math.ceil(o/2);for(let t=1;t<=a;t++){let e=!0;for(let i=t;i<=o;i++)if(s[i]!==s[i%t]){e=!1;break}if(e){r=t;break}}null!=r?(1!==r||s[0]||(r=0),s.splice(r)):0!==o||s[0]||s.splice(0),s.length&&(e.style.animationComposition=s.map((t=>t?"add":"replace")).join(","))}})(F$),i.textContent=[iF(t),sF(F$).join(U$)].join(U$),e.appendChild(i)}(t.root,t.defs),t.root}finally{$$=null,Y$=0,K$.clear(),X$.clear()}}function iF(t){let e=`${LU(Y$/V$)}ms`,i=H$||"infinite";const n=nF(Q$,J$),s=`#${XB(iU(t))}`;let r=q$?"both":"none",o="running";const a=[];if(2===G$)o="var(--animation-play-state, paused)",r="both",e=`var(--animation-duration, ${e})`,a.push(`${s} * {animation-delay: calc(-1 * var(--animation-progress, 0) * ${e})}`);else if(1===G$)o="paused",a.push(`${s}:hover * {animation-play-state:running}`),q$||a.push(`${s}:not(:hover) * {animation-name: none !important; offset-path: none !important}`);else switch(Z$){case 1:a.push(`${s}:hover * {animation-play-state:paused}`);break;case 2:a.push(`${s}:hover * {animation-direction:${nF(!Q$,J$)}}`)}return a.unshift(`${s} * {animation: ${e} linear ${i} ${n} ${r} ${o};offset-rotate:0deg}`),a.join(U$)}function nF(t,e){return t?e?"alternate-reverse":"reverse":e?"alternate":"normal"}function sF(t){const e=[];for(const[i,n]of K$)e.push(`@keyframes ${t}${n}{${i}}`);return e}function rF(t){if(K$.has(t))return K$.get(t);const e=$$.id++;return K$.set(t,e),e}function oF(t,e,i){X$.has(t)||X$.set(t,new Map),X$.get(t).set(e,i)}const aF=new Map([[0,function(t,e,i,n){for(const[i,n]of hF)if(t instanceof i&&n.includes(e))return;6===i?i=22:dF.has(e)&&(i=20),SF(t,e,i,n,!1)}],[2,function(t,e,[i,n,s]){e="transform";const r=!0,o=new hi,a=()=>{o.isIdentity||(MF(t,e,21,o,r),o.reset())};i.length>1?SF(t,e,10,i,r):o.translate(i[0].value.x,i[0].value.y),n.length>1?(a(),SF(t,e,14,n,r)):o.rotate(n[0].value),s.length>1?(a(),SF(t,e,17,s,r)):o.scale(1,s[0].value),i.length>1?(a(),SF(t,e,10,i,r,(t=>t.negate()))):o.translate(-i[0].value.x,-i[0].value.y),a()}],[4,function(t,e,i){wF(t,e,"none");for(let[n,s,r]of i)fF.has(n)&&(r&&r[0]<=0&&r[1]>=Y$&&(r=null),fF.get(n)(t,s,r,e));gF(t,e)}],[1,function(t,e,[i,n,s,r,o,a,l,c,u]){let h=!1;const d=new hi,f=()=>{d.isIdentity||(MF(t,e,21,d,h),d.reset(),h=!0)};n?(0!==s&&(t.style.offsetRotate=-1===s?"reverse":"auto"),wF(t,e,`none;offset-path:path("${EU(i)}")`,h),h=!0,SF(t,"offset-distance",13,n.keyframes,h)):r.isZero||d.translate(r.x,r.y),o instanceof iO?(f(),SF(t,e,14,o.keyframes,h),h=!0):o&&d.rotate(o),l instanceof iO?(f(),c instanceof iO?(SF(t,e,14,c.keyframes,h,xF),SF(t,e,18,l.keyframes,h,xF),SF(t,e,14,c.keyframes,h)):c?SF(t,e,19,l.keyframes,h,(t=>[c,t])):SF(t,e,18,l.keyframes,h,xF),h=!0):l&&(c instanceof iO?(f(),SF(t,e,19,c.keyframes,h,(t=>[t,l])),h=!0):c?d.skewAxis(l,c):d.skew(-l,0)),a instanceof iO?(f(),SF(t,e,15,a.keyframes,h),h=!0):d.scale(a.x,a.y),u instanceof iO?(f(),SF(t,e,10,u.keyframes,h,(t=>t.negate())),h=!0):u.isZero||d.translate(-u.x,-u.y),f()}],[3,function(t,e,[i,n,s,r,o,a]){let l=!1;const c=new hi,u=()=>{c.isIdentity||(MF(t,e,21,c,l),c.reset(),l=!0)};if(i.x!==n){const s=n-i.x;o instanceof iO?(u(),SF(t,e,11,o.keyframes,l,(t=>s*t)),l=!0):c.translate(s*o,0)}if(i.y!==n){const s=n-i.y;a instanceof iO?(u(),SF(t,e,12,a.keyframes,l,(t=>s*t)),l=!0):c.translate(s*a,0)}o instanceof iO?(u(),SF(t,e,16,o.keyframes,l,(t=>t/s)),l=!0):o!==s&&c.scale(o/s,1),a instanceof iO?(u(),SF(t,e,17,a.keyframes,l,(t=>t/r)),l=!0):a!==r&&c.scale(1,a/r),u()}]]);function lF(t,e){let i;for(let n=t.firstElementChild;null!=n;n=n.nextElementSibling){let t=$$.visibility.get(n);if(t&&(t[0]>e[0]||t[1]<e[1])){if(t=[Math.max(t[0],e[0]),Math.min(t[1],e[1])],t[1]<=t[0])continue;i=t}else t=null,i=e;n.firstElementChild&&lF(n,i);const s=$$.animations.get(n);if(s?.size)for(const[t,e]of s)aF.get(e.shift())?.(n,t,...e);t&&uF(n,t)}}function cF(t,e,i,n,s,r){let o;const a=`{${i}:${n};animation-timing-function:step-end}`,l=`{${i}:${s};animation-timing-function:step-end}`;if(e[0]>0){o=[];const t=LU(_F(e[0]));if(e[1]<Y$){const t=LU(_F(e[1]));o.push(`0%,${t}%,100%${l}`)}else o.push(`0%,100%${l}`);o.push(`${t}%${a}`)}else{if(!(e[1]<Y$))return!1;{o=[];const t=LU(_F(e[1]));o.push(`0%${a}`),o.push(`${t}%,100%${l}`)}}return oF(t,rF(o.join(U$)),r),!0}function uF(t,e){cF(t,e,"visibility","visible","hidden",!1)}const hF=new Map([[SVGStopElement,["offset"]],[SVGGradientElement,["spreadMethod"]],[SVGLinearGradientElement,["x1","x2","y1","y2"]],[SVGRadialGradientElement,["cx","cy","r","fx","fy","fr"]]]),dF=new Set(["x","y","width","height","cx","cy","r","rx","ry"]),fF=new Map([[0,function(t,[e],i,n){yF(t,e,0,"blur(*px)",i,n)}],[1,function(t,[e,i,n,s,r,o,a],l,c){yF(t,e,1,"brightness(*)",l,c),yF(t,i,1,"contrast(*)",l,c),yF(t,n,1,"saturate(*)",l,c),yF(t,s,0,"hue-rotate(*deg)",l,c),yF(t,r,0,"invert(*)",l,c),yF(t,o,0,"grayscale(*)",l,c),yF(t,a,0,"sepia(*)",l,c)}],[2,function(t,e,i,n){const s=[..._O(e,0,(t=>[...t]))];if(s.length){if(function(t,e){e??=kt;let i=t.length-1;for(let n=2;n<=i;n++){const s=t[n-2],r=t[n-1],o=t[n];a(r.offset,o.offset)&&(r.easing=null,!s.easing&&e(s.value,r.value))?(s.easing=new CE(new pE(1),!0),t.splice(n-1,1),n--,i--):a(s.offset,r.offset)&&(s.easing=null,!r.easing&&e(r.value,o.value))&&(s.easing=new CE(new pE(1),!1),t.splice(n-1,1),n--,i--)}}(s),MO(s),1===s.length){const e=s[0].value;if(!e[0].a)return;return i?(gF(t,n),void cF(t,i,n,mF(e),mF([e[0].withOpacity(0),ce.ZERO,0]),!0)):void pF.push(mF(e))}gF(t,n),oF(t,kF(s,mF,n),!0)}}]]),pF=[];function gF(t,e,i=!0){pF.length&&(MF(t,e,23,pF,i),pF.splice(0))}function mF([t,e,i]){return`drop-shadow(${jU(e.x)} ${jU(e.y)} ${jU(i)} ${AU(t)})`}function vF(t,e){return t.replace("*",LU(e))}function yF(t,e,i,n,s,r){if(!(e instanceof iO)){if(e===i)return;return s?(gF(t,r),void cF(t,s,r,vF(n,e),vF(n,i),!0)):void pF.push(vF(n,e))}gF(t,r),oF(t,kF(e.keyframes,(t=>vF(n,t)),r),!0)}function xF(t){return-t}function bF(t){return t?ZE(t,2):null}function wF(t,e,i,n=!1){oF(t,rF(`0%,100%{${e}:${i}}`),n)}function MF(t,e,i,n,s){oF(t,rF(`0%,100%{${e}:${KB(i)(n)}}`),s)}function SF(t,e,i,n,s,r){r&&(n=bO(n,r)),oF(t,kF(n,KB(i),e),s)}function kF(t,e,i){const n=[],s=t.length-1;for(let r=0;r<=s;r++){const o=_F(t[r].offset);let a=`${LU(o)}%`,l=null;0===r&&o>0?t[r].easing?n.push("0%{animation-timing-function:step-start}"):a=`0%,${a}`:r===s&&o<100&&(a=`${a},100%`),l=bF(t[r].easing),n.push(`${a}{${i}:${e(t[r].value)}${l?`;animation-timing-function:${l}`:""}}`)}return rF(n.join(U$))}function _F(t){return Math.round(100*t/Y$*100)/100}const IF=15,CF=573,LF=-2;function NF(t){return jF(t.map((([t,e])=>new Array(t).fill(e,0,t))))}function jF(t){return t.reduce(((t,e)=>t.concat(Array.isArray(e)?jF(e):e)),[])}const zF=[0,1,2,3].concat(...NF([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function PF(){const t=this;function e(t,e){let i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}t.build_tree=function(i){const n=t.dyn_tree,s=t.stat_desc.static_tree,r=t.stat_desc.elems;let o,a,l,c=-1;for(i.heap_len=0,i.heap_max=CF,o=0;o<r;o++)0!==n[2*o]?(i.heap[++i.heap_len]=c=o,i.depth[o]=0):n[2*o+1]=0;for(;i.heap_len<2;)l=i.heap[++i.heap_len]=c<2?++c:0,n[2*l]=1,i.depth[l]=0,i.opt_len--,s&&(i.static_len-=s[2*l+1]);for(t.max_code=c,o=Math.floor(i.heap_len/2);o>=1;o--)i.pqdownheap(n,o);l=r;do{o=i.heap[1],i.heap[1]=i.heap[i.heap_len--],i.pqdownheap(n,1),a=i.heap[1],i.heap[--i.heap_max]=o,i.heap[--i.heap_max]=a,n[2*l]=n[2*o]+n[2*a],i.depth[l]=Math.max(i.depth[o],i.depth[a])+1,n[2*o+1]=n[2*a+1]=l,i.heap[1]=l++,i.pqdownheap(n,1)}while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],function(e){const i=t.dyn_tree,n=t.stat_desc.static_tree,s=t.stat_desc.extra_bits,r=t.stat_desc.extra_base,o=t.stat_desc.max_length;let a,l,c,u,h,d,f=0;for(u=0;u<=IF;u++)e.bl_count[u]=0;for(i[2*e.heap[e.heap_max]+1]=0,a=e.heap_max+1;a<CF;a++)l=e.heap[a],u=i[2*i[2*l+1]+1]+1,u>o&&(u=o,f++),i[2*l+1]=u,l>t.max_code||(e.bl_count[u]++,h=0,l>=r&&(h=s[l-r]),d=i[2*l],e.opt_len+=d*(u+h),n&&(e.static_len+=d*(n[2*l+1]+h)));if(0!==f){do{for(u=o-1;0===e.bl_count[u];)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[o]--,f-=2}while(f>0);for(u=o;0!==u;u--)for(l=e.bl_count[u];0!==l;)c=e.heap[--a],c>t.max_code||(i[2*c+1]!=u&&(e.opt_len+=(u-i[2*c+1])*i[2*c],i[2*c+1]=u),l--)}}(i),function(t,i,n){const s=[];let r,o,a,l=0;for(r=1;r<=IF;r++)s[r]=l=l+n[r-1]<<1;for(o=0;o<=i;o++)a=t[2*o+1],0!==a&&(t[2*o]=e(s[a]++,a))}(n,t.max_code,i.bl_count)}}function TF(t,e,i,n,s){const r=this;r.static_tree=t,r.extra_bits=e,r.extra_base=i,r.elems=n,r.max_length=s}PF._length_code=[0,1,2,3,4,5,6,7].concat(...NF([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),PF.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],PF.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],PF.d_code=function(t){return t<256?zF[t]:zF[256+(t>>>7)]},PF.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],PF.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],PF.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],PF.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const AF=NF([[144,8],[112,9],[24,7],[8,8]]);TF.static_ltree=jF([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map(((t,e)=>[t,AF[e]])));const DF=NF([[30,5]]);function EF(t,e,i,n,s){const r=this;r.good_length=t,r.max_lazy=e,r.nice_length=i,r.max_chain=n,r.func=s}TF.static_dtree=jF([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map(((t,e)=>[t,DF[e]]))),TF.static_l_desc=new TF(TF.static_ltree,PF.extra_lbits,257,286,IF),TF.static_d_desc=new TF(TF.static_dtree,PF.extra_dbits,0,30,IF),TF.static_bl_desc=new TF(null,PF.extra_blbits,0,19,7);const OF=[new EF(0,0,0,0,0),new EF(4,4,8,4,1),new EF(4,5,16,8,1),new EF(4,6,32,32,1),new EF(4,4,16,16,2),new EF(8,16,32,32,2),new EF(8,16,128,128,2),new EF(8,32,128,256,2),new EF(32,128,258,1024,2),new EF(32,258,258,4096,2)],WF=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],RF=113,BF=666,UF=262;function $F(t,e,i,n){const s=t[2*e],r=t[2*i];return s<r||s==r&&n[e]<=n[i]}function FF(){const t=this;let e,i,n,s,r,o,a,l,c,u,h,d,f,p,g,m,v,y,x,b,w,M,S,k,_,I,C,L,N,j,z,P,T;const A=new PF,D=new PF,E=new PF;let O,W,R,B,U,$;function F(){let e;for(e=0;e<286;e++)z[2*e]=0;for(e=0;e<30;e++)P[2*e]=0;for(e=0;e<19;e++)T[2*e]=0;z[512]=1,t.opt_len=t.static_len=0,W=R=0}function V(t,e){let i,n=-1,s=t[1],r=0,o=7,a=4;0===s&&(o=138,a=3),t[2*(e+1)+1]=65535;for(let l=0;l<=e;l++)i=s,s=t[2*(l+1)+1],++r<o&&i==s||(r<a?T[2*i]+=r:0!==i?(i!=n&&T[2*i]++,T[32]++):r<=10?T[34]++:T[36]++,r=0,n=i,0===s?(o=138,a=3):i==s?(o=6,a=3):(o=7,a=4))}function H(e){t.pending_buf[t.pending++]=e}function G(t){H(255&t),H(t>>>8&255)}function Z(t,e){let i;const n=e;$>16-n?(i=t,U|=i<<$&65535,G(U),U=i>>>16-$,$+=n-16):(U|=t<<$&65535,$+=n)}function Y(t,e){const i=2*t;Z(65535&e[i],65535&e[i+1])}function Q(t,e){let i,n,s=-1,r=t[1],o=0,a=7,l=4;for(0===r&&(a=138,l=3),i=0;i<=e;i++)if(n=r,r=t[2*(i+1)+1],!(++o<a&&n==r)){if(o<l)do{Y(n,T)}while(0!=--o);else 0!==n?(n!=s&&(Y(n,T),o--),Y(16,T),Z(o-3,2)):o<=10?(Y(17,T),Z(o-3,3)):(Y(18,T),Z(o-11,7));o=0,s=n,0===r?(a=138,l=3):n==r?(a=6,l=3):(a=7,l=4)}}function J(){16==$?(G(U),U=0,$=0):$>=8&&(H(255&U),U>>>=8,$-=8)}function q(e,i){let n,s,r;if(t.dist_buf[W]=e,t.lc_buf[W]=255&i,W++,0===e?z[2*i]++:(R++,e--,z[2*(PF._length_code[i]+256+1)]++,P[2*PF.d_code(e)]++),!(8191&W)&&C>2){for(n=8*W,s=w-v,r=0;r<30;r++)n+=P[2*r]*(5+PF.extra_dbits[r]);if(n>>>=3,R<Math.floor(W/2)&&n<Math.floor(s/2))return!0}return W==O-1}function K(e,i){let n,s,r,o,a=0;if(0!==W)do{n=t.dist_buf[a],s=t.lc_buf[a],a++,0===n?Y(s,e):(r=PF._length_code[s],Y(r+256+1,e),o=PF.extra_lbits[r],0!==o&&(s-=PF.base_length[r],Z(s,o)),n--,r=PF.d_code(n),Y(r,i),o=PF.extra_dbits[r],0!==o&&(n-=PF.base_dist[r],Z(n,o)))}while(a<W);Y(256,e),B=e[513]}function X(){$>8?G(U):$>0&&H(255&U),U=0,$=0}function tt(e,i,n){Z(0+(n?1:0),3),function(e,i){X(),B=8,G(i),G(~i),t.pending_buf.set(l.subarray(e,e+i),t.pending),t.pending+=i}(e,i)}function et(i){(function(e,i,n){let s,r,o=0;C>0?(A.build_tree(t),D.build_tree(t),o=function(){let e;for(V(z,A.max_code),V(P,D.max_code),E.build_tree(t),e=18;e>=3&&0===T[2*PF.bl_order[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(),s=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=s&&(s=r)):s=r=i+5,i+4<=s&&-1!=e?tt(e,i,n):r==s?(Z(2+(n?1:0),3),K(TF.static_ltree,TF.static_dtree)):(Z(4+(n?1:0),3),function(t,e,i){let n;for(Z(t-257,5),Z(e-1,5),Z(i-4,4),n=0;n<i;n++)Z(T[2*PF.bl_order[n]+1],3);Q(z,t-1),Q(P,e-1)}(A.max_code+1,D.max_code+1,o+1),K(z,P)),F(),n&&X()})(v>=0?v:-1,w-v,i),v=w,e.flush_pending()}function it(){let t,i,n,s;do{if(s=c-S-w,0===s&&0===w&&0===S)s=r;else if(-1==s)s--;else if(w>=r+r-UF){l.set(l.subarray(r,r+r),0),M-=r,w-=r,v-=r,t=f,n=t;do{i=65535&h[--n],h[n]=i>=r?i-r:0}while(0!=--t);t=r,n=t;do{i=65535&u[--n],u[n]=i>=r?i-r:0}while(0!=--t);s+=r}if(0===e.avail_in)return;t=e.read_buf(l,w+S,s),S+=t,S>=3&&(d=255&l[w],d=(d<<m^255&l[w+1])&g)}while(S<UF&&0!==e.avail_in)}function nt(t){let e,i,n=_,s=w,o=k;const c=w>r-UF?w-(r-UF):0;let h=j;const d=a,f=w+258;let p=l[s+o-1],g=l[s+o];k>=N&&(n>>=2),h>S&&(h=S);do{if(e=t,l[e+o]==g&&l[e+o-1]==p&&l[e]==l[s]&&l[++e]==l[s+1]){s+=2,e++;do{}while(l[++s]==l[++e]&&l[++s]==l[++e]&&l[++s]==l[++e]&&l[++s]==l[++e]&&l[++s]==l[++e]&&l[++s]==l[++e]&&l[++s]==l[++e]&&l[++s]==l[++e]&&s<f);if(i=258-(f-s),s=f-258,i>o){if(M=t,o=i,i>=h)break;p=l[s+o-1],g=l[s+o]}}}while((t=65535&u[t&d])>c&&0!=--n);return o<=S?o:S}t.depth=[],t.bl_count=[],t.heap=[],z=[],P=[],T=[],t.pqdownheap=function(e,i){const n=t.heap,s=n[i];let r=i<<1;for(;r<=t.heap_len&&(r<t.heap_len&&$F(e,n[r+1],n[r],t.depth)&&r++,!$F(e,s,n[r],t.depth));)n[i]=n[r],i=r,r<<=1;n[i]=s},t.deflateInit=function(e,x,M,W,R,V){return W||(W=8),R||(R=8),V||(V=0),e.msg=null,-1==x&&(x=6),R<1||R>9||8!=W||M<9||M>15||x<0||x>9||V<0||V>2?LF:(e.dstate=t,o=M,r=1<<o,a=r-1,p=R+7,f=1<<p,g=f-1,m=Math.floor((p+3-1)/3),l=new Uint8Array(2*r),u=[],h=[],O=1<<R+6,t.pending_buf=new Uint8Array(4*O),n=4*O,t.dist_buf=new Uint16Array(O),t.lc_buf=new Uint8Array(O),C=x,L=V,function(e){return e.total_in=e.total_out=0,e.msg=null,t.pending=0,t.pending_out=0,i=RF,s=0,A.dyn_tree=z,A.stat_desc=TF.static_l_desc,D.dyn_tree=P,D.stat_desc=TF.static_d_desc,E.dyn_tree=T,E.stat_desc=TF.static_bl_desc,U=0,$=0,B=8,F(),function(){c=2*r,h[f-1]=0;for(let t=0;t<f-1;t++)h[t]=0;I=OF[C].max_lazy,N=OF[C].good_length,j=OF[C].nice_length,_=OF[C].max_chain,w=0,v=0,S=0,y=k=2,b=0,d=0}(),0}(e))},t.deflateEnd=function(){return 42!=i&&i!=RF&&i!=BF?LF:(t.lc_buf=null,t.dist_buf=null,t.pending_buf=null,h=null,u=null,l=null,t.dstate=null,i==RF?-3:0)},t.deflateParams=function(t,e,i){let n=0;return-1==e&&(e=6),e<0||e>9||i<0||i>2?LF:(OF[C].func!=OF[e].func&&0!==t.total_in&&(n=t.deflate(1)),C!=e&&(C=e,I=OF[C].max_lazy,N=OF[C].good_length,j=OF[C].nice_length,_=OF[C].max_chain),L=i,n)},t.deflateSetDictionary=function(t,e,n){let s,o=n,c=0;if(!e||42!=i)return LF;if(o<3)return 0;for(o>r-UF&&(o=r-UF,c=n-o),l.set(e.subarray(c,c+o),0),w=o,v=o,d=255&l[0],d=(d<<m^255&l[1])&g,s=0;s<=o-3;s++)d=(d<<m^255&l[s+2])&g,u[s&a]=h[d],h[d]=s;return 0},t.deflate=function(c,p){let _,N,j,z,P;if(p>4||p<0)return LF;if(!c.next_out||!c.next_in&&0!==c.avail_in||i==BF&&4!=p)return c.msg=WF[4],LF;if(0===c.avail_out)return c.msg=WF[7],-5;if(e=c,z=s,s=p,42==i&&(N=8+(o-8<<4)<<8,j=(C-1&255)>>1,j>3&&(j=3),N|=j<<6,0!==w&&(N|=32),N+=31-N%31,i=RF,function(t){H(t>>8&255),H(255&t)}(N)),0!==t.pending){if(e.flush_pending(),0===e.avail_out)return s=-1,0}else if(0===e.avail_in&&p<=z&&4!=p)return e.msg=WF[7],-5;if(i==BF&&0!==e.avail_in)return c.msg=WF[7],-5;if(0!==e.avail_in||0!==S||0!=p&&i!=BF){switch(P=-1,OF[C].func){case 0:P=function(t){let i,s=65535;for(s>n-5&&(s=n-5);;){if(S<=1){if(it(),0===S&&0==t)return 0;if(0===S)break}if(w+=S,S=0,i=v+s,(0===w||w>=i)&&(S=w-i,w=i,et(!1),0===e.avail_out))return 0;if(w-v>=r-UF&&(et(!1),0===e.avail_out))return 0}return et(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(p);break;case 1:P=function(t){let i,n=0;for(;;){if(S<UF){if(it(),S<UF&&0==t)return 0;if(0===S)break}if(S>=3&&(d=(d<<m^255&l[w+2])&g,n=65535&h[d],u[w&a]=h[d],h[d]=w),0!==n&&(w-n&65535)<=r-UF&&2!=L&&(y=nt(n)),y>=3)if(i=q(w-M,y-3),S-=y,y<=I&&S>=3){y--;do{w++,d=(d<<m^255&l[w+2])&g,n=65535&h[d],u[w&a]=h[d],h[d]=w}while(0!=--y);w++}else w+=y,y=0,d=255&l[w],d=(d<<m^255&l[w+1])&g;else i=q(0,255&l[w]),S--,w++;if(i&&(et(!1),0===e.avail_out))return 0}return et(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(p);break;case 2:P=function(t){let i,n,s=0;for(;;){if(S<UF){if(it(),S<UF&&0==t)return 0;if(0===S)break}if(S>=3&&(d=(d<<m^255&l[w+2])&g,s=65535&h[d],u[w&a]=h[d],h[d]=w),k=y,x=M,y=2,0!==s&&k<I&&(w-s&65535)<=r-UF&&(2!=L&&(y=nt(s)),y<=5&&(1==L||3==y&&w-M>4096)&&(y=2)),k>=3&&y<=k){n=w+S-3,i=q(w-1-x,k-3),S-=k-1,k-=2;do{++w<=n&&(d=(d<<m^255&l[w+2])&g,s=65535&h[d],u[w&a]=h[d],h[d]=w)}while(0!=--k);if(b=0,y=2,w++,i&&(et(!1),0===e.avail_out))return 0}else if(0!==b){if(i=q(0,255&l[w-1]),i&&et(!1),w++,S--,0===e.avail_out)return 0}else b=1,w++,S--}return 0!==b&&(i=q(0,255&l[w-1]),b=0),et(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(p)}if(2!=P&&3!=P||(i=BF),0==P||2==P)return 0===e.avail_out&&(s=-1),0;if(1==P){if(1==p)Z(2,3),Y(256,TF.static_ltree),J(),1+B+10-$<9&&(Z(2,3),Y(256,TF.static_ltree),J()),B=7;else if(tt(0,0,!1),3==p)for(_=0;_<f;_++)h[_]=0;if(e.flush_pending(),0===e.avail_out)return s=-1,0}}return 4!=p?0:1}}function VF(){const t=this;t.next_in_index=0,t.next_out_index=0,t.avail_in=0,t.total_in=0,t.avail_out=0,t.total_out=0}VF.prototype={deflateInit(t,e){const i=this;return i.dstate=new FF,e||(e=IF),i.dstate.deflateInit(i,t,e)},deflate(t){const e=this;return e.dstate?e.dstate.deflate(e,t):LF},deflateEnd(){const t=this;if(!t.dstate)return LF;const e=t.dstate.deflateEnd();return t.dstate=null,e},deflateParams(t,e){const i=this;return i.dstate?i.dstate.deflateParams(i,t,e):LF},deflateSetDictionary(t,e){const i=this;return i.dstate?i.dstate.deflateSetDictionary(i,t,e):LF},read_buf(t,e,i){const n=this;let s=n.avail_in;return s>i&&(s=i),0===s?0:(n.avail_in-=s,t.set(n.next_in.subarray(n.next_in_index,n.next_in_index+s),e),n.next_in_index+=s,n.total_in+=s,s)},flush_pending(){const t=this;let e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&&(t.dstate.pending_out=0))}};const HF=4294967295,GF=65535,ZF=new Date(2107,11,31),YF=new Date(1980,0,1),QF=void 0,JF="undefined",qF="function";class KF{constructor(t){return class extends TransformStream{constructor(e,i){const n=new t(i);super({transform(t,e){e.enqueue(n.append(t))},flush(t){const e=n.flush();e&&t.enqueue(e)}})}}}}let XF=2;try{typeof navigator!=JF&&navigator.hardwareConcurrency&&(XF=navigator.hardwareConcurrency)}catch(t){}const tV={chunkSize:524288,maxWorkers:XF,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:QF,CompressionStreamNative:typeof CompressionStream!=JF&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=JF&&DecompressionStream},eV=Object.assign({},tV);function iV(t){const{baseURL:e,chunkSize:i,maxWorkers:n,terminateWorkerTimeout:s,useCompressionStream:r,useWebWorkers:o,Deflate:a,Inflate:l,CompressionStream:c,DecompressionStream:u,workerScripts:h}=t;if(nV("baseURL",e),nV("chunkSize",i),nV("maxWorkers",n),nV("terminateWorkerTimeout",s),nV("useCompressionStream",r),nV("useWebWorkers",o),a&&(eV.CompressionStream=new KF(a)),l&&(eV.DecompressionStream=new KF(l)),nV("CompressionStream",c),nV("DecompressionStream",u),h!==QF){const{deflate:t,inflate:e}=h;if((t||e)&&(eV.workerScripts||(eV.workerScripts={})),t){if(!Array.isArray(t))throw new Error("workerScripts.deflate must be an array");eV.workerScripts.deflate=t}if(e){if(!Array.isArray(e))throw new Error("workerScripts.inflate must be an array");eV.workerScripts.inflate=e}}}function nV(t,e){e!==QF&&(eV[t]=e)}const sV=[];for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)1&e?e=e>>>1^3988292384:e>>>=1;sV[t]=e}class rV{constructor(t){this.crc=t||-1}append(t){let e=0|this.crc;for(let i=0,n=0|t.length;i<n;i++)e=e>>>8^sV[255&(e^t[i])];this.crc=e}get(){return~this.crc}}class oV extends TransformStream{constructor(){let t;const e=new rV;super({transform(t,i){e.append(t),i.enqueue(t)},flush(){const i=new Uint8Array(4);new DataView(i.buffer).setUint32(0,e.get()),t.value=i}}),t=this}}function aV(t){if(typeof TextEncoder==JF){t=unescape(encodeURIComponent(t));const e=new Uint8Array(t.length);for(let i=0;i<e.length;i++)e[i]=t.charCodeAt(i);return e}return(new TextEncoder).encode(t)}const lV={concat(t,e){if(0===t.length||0===e.length)return t.concat(e);const i=t[t.length-1],n=lV.getPartial(i);return 32===n?t.concat(e):lV._shiftRight(e,n,0|i,t.slice(0,t.length-1))},bitLength(t){const e=t.length;if(0===e)return 0;const i=t[e-1];return 32*(e-1)+lV.getPartial(i)},clamp(t,e){if(32*t.length<e)return t;const i=(t=t.slice(0,Math.ceil(e/32))).length;return e&=31,i>0&&e&&(t[i-1]=lV.partial(e,t[i-1]&2147483648>>e-1,1)),t},partial:(t,e,i)=>32===t?e:(i?0|e:e<<32-t)+1099511627776*t,getPartial:t=>Math.round(t/1099511627776)||32,_shiftRight(t,e,i,n){for(void 0===n&&(n=[]);e>=32;e-=32)n.push(i),i=0;if(0===e)return n.concat(t);for(let s=0;s<t.length;s++)n.push(i|t[s]>>>e),i=t[s]<<32-e;const s=t.length?t[t.length-1]:0,r=lV.getPartial(s);return n.push(lV.partial(e+r&31,e+r>32?i:n.pop(),1)),n}},cV={bytes:{fromBits(t){const e=lV.bitLength(t)/8,i=new Uint8Array(e);let n;for(let s=0;s<e;s++)3&s||(n=t[s/4]),i[s]=n>>>24,n<<=8;return i},toBits(t){const e=[];let i,n=0;for(i=0;i<t.length;i++)n=n<<8|t[i],3&~i||(e.push(n),n=0);return 3&i&&e.push(lV.partial(8*(3&i),n)),e}}},uV=class{constructor(t){const e=this;e.blockSize=512,e._init=[1732584193,4023233417,2562383102,271733878,3285377520],e._key=[1518500249,1859775393,2400959708,3395469782],t?(e._h=t._h.slice(0),e._buffer=t._buffer.slice(0),e._length=t._length):e.reset()}reset(){const t=this;return t._h=t._init.slice(0),t._buffer=[],t._length=0,t}update(t){const e=this;"string"==typeof t&&(t=cV.utf8String.toBits(t));const i=e._buffer=lV.concat(e._buffer,t),n=e._length,s=e._length=n+lV.bitLength(t);if(s>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const r=new Uint32Array(i);let o=0;for(let t=e.blockSize+n-(e.blockSize+n&e.blockSize-1);t<=s;t+=e.blockSize)e._block(r.subarray(16*o,16*(o+1))),o+=1;return i.splice(0,16*o),e}finalize(){const t=this;let e=t._buffer;const i=t._h;e=lV.concat(e,[lV.partial(1,1)]);for(let t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(t._length/4294967296)),e.push(0|t._length);e.length;)t._block(e.splice(0,16));return t.reset(),i}_f(t,e,i,n){return t<=19?e&i|~e&n:t<=39?e^i^n:t<=59?e&i|e&n|i&n:t<=79?e^i^n:void 0}_S(t,e){return e<<t|e>>>32-t}_block(t){const e=this,i=e._h,n=Array(80);for(let e=0;e<16;e++)n[e]=t[e];let s=i[0],r=i[1],o=i[2],a=i[3],l=i[4];for(let t=0;t<=79;t++){t>=16&&(n[t]=e._S(1,n[t-3]^n[t-8]^n[t-14]^n[t-16]));const i=e._S(5,s)+e._f(t,r,o,a)+l+n[t]+e._key[Math.floor(t/20)]|0;l=a,a=o,o=e._S(30,r),r=s,s=i}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+l|0}},hV={getRandomValues(t){const e=new Uint32Array(t.buffer),i=t=>{let e=987654321;const i=4294967295;return function(){return e=36969*(65535&e)+(e>>16)&i,(((e<<16)+(t=18e3*(65535&t)+(t>>16)&i)&i)/4294967296+.5)*(Math.random()>.5?1:-1)}};for(let n,s=0;s<t.length;s+=4){const t=i(4294967296*(n||Math.random()));n=987654071*t(),e[s/4]=4294967296*t()|0}return t}},dV={importKey:t=>new dV.hmacSha1(cV.bytes.toBits(t)),pbkdf2(t,e,i,n){if(i=i||1e4,n<0||i<0)throw new Error("invalid params to pbkdf2");const s=1+(n>>5)<<2;let r,o,a,l,c;const u=new ArrayBuffer(s),h=new DataView(u);let d=0;const f=lV;for(e=cV.bytes.toBits(e),c=1;d<(s||1);c++){for(r=o=t.encrypt(f.concat(e,[c])),a=1;a<i;a++)for(o=t.encrypt(o),l=0;l<o.length;l++)r[l]^=o[l];for(a=0;d<(s||1)&&a<r.length;a++)h.setInt32(d,r[a]),d+=4}return u.slice(0,n/8)},hmacSha1:class{constructor(t){const e=this,i=e._hash=uV,n=[[],[]];e._baseHash=[new i,new i];const s=e._baseHash[0].blockSize/32;t.length>s&&(t=(new i).update(t).finalize());for(let e=0;e<s;e++)n[0][e]=909522486^t[e],n[1][e]=1549556828^t[e];e._baseHash[0].update(n[0]),e._baseHash[1].update(n[1]),e._resultHash=new i(e._baseHash[0])}reset(){const t=this;t._resultHash=new t._hash(t._baseHash[0]),t._updated=!1}update(t){this._updated=!0,this._resultHash.update(t)}digest(){const t=this,e=t._resultHash.finalize(),i=new t._hash(t._baseHash[1]).update(e).finalize();return t.reset(),i}encrypt(t){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(t),this.digest(t)}}},fV=typeof crypto!=JF&&typeof crypto.getRandomValues==qF,pV="Invalid password",gV="Invalid signature",mV="zipjs-abort-check-password";function vV(t){return fV?crypto.getRandomValues(t):hV.getRandomValues(t)}const yV=16,xV={name:"PBKDF2"},bV=Object.assign({hash:{name:"HMAC"}},xV),wV=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},xV),MV=["deriveBits"],SV=[8,12,16],kV=[16,24,32],_V=10,IV=[0,0,0,0],CV=typeof crypto!=JF,LV=CV&&crypto.subtle,NV=CV&&typeof LV!=JF,jV=cV.bytes,zV=class{constructor(t){const e=this;e._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],e._tables[0][0][0]||e._precompute();const i=e._tables[0][4],n=e._tables[1],s=t.length;let r,o,a,l=1;if(4!==s&&6!==s&&8!==s)throw new Error("invalid aes key size");for(e._key=[o=t.slice(0),a=[]],r=s;r<4*s+28;r++){let t=o[r-1];(r%s==0||8===s&&r%s==4)&&(t=i[t>>>24]<<24^i[t>>16&255]<<16^i[t>>8&255]<<8^i[255&t],r%s==0&&(t=t<<8^t>>>24^l<<24,l=l<<1^283*(l>>7))),o[r]=o[r-s]^t}for(let t=0;r;t++,r--){const e=o[3&t?r:r-4];a[t]=r<=4||t<4?e:n[0][i[e>>>24]]^n[1][i[e>>16&255]]^n[2][i[e>>8&255]]^n[3][i[255&e]]}}encrypt(t){return this._crypt(t,0)}decrypt(t){return this._crypt(t,1)}_precompute(){const t=this._tables[0],e=this._tables[1],i=t[4],n=e[4],s=[],r=[];let o,a,l,c;for(let t=0;t<256;t++)r[(s[t]=t<<1^283*(t>>7))^t]=t;for(let u=o=0;!i[u];u^=a||1,o=r[o]||1){let r=o^o<<1^o<<2^o<<3^o<<4;r=r>>8^255&r^99,i[u]=r,n[r]=u,c=s[l=s[a=s[u]]];let h=16843009*c^65537*l^257*a^16843008*u,d=257*s[r]^16843008*r;for(let i=0;i<4;i++)t[i][u]=d=d<<24^d>>>8,e[i][r]=h=h<<24^h>>>8}for(let i=0;i<5;i++)t[i]=t[i].slice(0),e[i]=e[i].slice(0)}_crypt(t,e){if(4!==t.length)throw new Error("invalid aes block size");const i=this._key[e],n=i.length/4-2,s=[0,0,0,0],r=this._tables[e],o=r[0],a=r[1],l=r[2],c=r[3],u=r[4];let h,d,f,p=t[0]^i[0],g=t[e?3:1]^i[1],m=t[2]^i[2],v=t[e?1:3]^i[3],y=4;for(let t=0;t<n;t++)h=o[p>>>24]^a[g>>16&255]^l[m>>8&255]^c[255&v]^i[y],d=o[g>>>24]^a[m>>16&255]^l[v>>8&255]^c[255&p]^i[y+1],f=o[m>>>24]^a[v>>16&255]^l[p>>8&255]^c[255&g]^i[y+2],v=o[v>>>24]^a[p>>16&255]^l[g>>8&255]^c[255&m]^i[y+3],y+=4,p=h,g=d,m=f;for(let t=0;t<4;t++)s[e?3&-t:t]=u[p>>>24]<<24^u[g>>16&255]<<16^u[m>>8&255]<<8^u[255&v]^i[y++],h=p,p=g,g=m,m=v,v=h;return s}},PV=class{constructor(t,e){this._prf=t,this._initIv=e,this._iv=e}reset(){this._iv=this._initIv}update(t){return this.calculate(this._prf,t,this._iv)}incWord(t){if(255&~(t>>24))t+=1<<24;else{let e=t>>16&255,i=t>>8&255,n=255&t;255===e?(e=0,255===i?(i=0,255===n?n=0:++n):++i):++e,t=0,t+=e<<16,t+=i<<8,t+=n}return t}incCounter(t){0===(t[0]=this.incWord(t[0]))&&(t[1]=this.incWord(t[1]))}calculate(t,e,i){let n;if(!(n=e.length))return[];const s=lV.bitLength(e);for(let s=0;s<n;s+=4){this.incCounter(i);const n=t.encrypt(i);e[s]^=n[0],e[s+1]^=n[1],e[s+2]^=n[2],e[s+3]^=n[3]}return lV.clamp(e,s)}},TV=dV.hmacSha1;let AV=CV&&NV&&typeof LV.importKey==qF,DV=CV&&NV&&typeof LV.deriveBits==qF;class EV extends TransformStream{constructor({password:t,rawPassword:e,signed:i,encryptionStrength:n,checkPasswordOnly:s}){super({start(){Object.assign(this,{ready:new Promise((t=>this.resolveReady=t)),password:BV(t,e),signed:i,strength:n-1,pending:new Uint8Array})},async transform(t,e){const i=this,{password:n,strength:r,resolveReady:o,ready:a}=i;n?(await async function(t,e,i,n){const s=await RV(t,e,i,$V(n,0,SV[e])),r=$V(n,SV[e]);if(s[0]!=r[0]||s[1]!=r[1])throw new Error(pV)}(i,r,n,$V(t,0,SV[r]+2)),t=$V(t,SV[r]+2),s?e.error(new Error(mV)):o()):await a;const l=new Uint8Array(t.length-_V-(t.length-_V)%yV);e.enqueue(WV(i,t,l,0,_V,!0))},async flush(t){const{signed:e,ctr:i,hmac:n,pending:s,ready:r}=this;if(n&&i){await r;const o=$V(s,0,s.length-_V),a=$V(s,s.length-_V);let l=new Uint8Array;if(o.length){const t=VV(jV,o);n.update(t);const e=i.update(t);l=FV(jV,e)}if(e){const t=$V(FV(jV,n.digest()),0,_V);for(let e=0;e<_V;e++)if(t[e]!=a[e])throw new Error(gV)}t.enqueue(l)}}})}}class OV extends TransformStream{constructor({password:t,rawPassword:e,encryptionStrength:i}){let n;super({start(){Object.assign(this,{ready:new Promise((t=>this.resolveReady=t)),password:BV(t,e),strength:i-1,pending:new Uint8Array})},async transform(t,e){const i=this,{password:n,strength:s,resolveReady:r,ready:o}=i;let a=new Uint8Array;n?(a=await async function(t,e,i){const n=vV(new Uint8Array(SV[e]));return UV(n,await RV(t,e,i,n))}(i,s,n),r()):await o;const l=new Uint8Array(a.length+t.length-t.length%yV);l.set(a,0),e.enqueue(WV(i,t,l,a.length,0))},async flush(t){const{ctr:e,hmac:i,pending:s,ready:r}=this;if(i&&e){await r;let o=new Uint8Array;if(s.length){const t=e.update(VV(jV,s));i.update(t),o=FV(jV,t)}n.signature=FV(jV,i.digest()).slice(0,_V),t.enqueue(UV(o,n.signature))}}}),n=this}}function WV(t,e,i,n,s,r){const{ctr:o,hmac:a,pending:l}=t,c=e.length-s;let u;for(l.length&&(e=UV(l,e),i=function(t,e){if(e&&e>t.length){const i=t;(t=new Uint8Array(e)).set(i,0)}return t}(i,c-c%yV)),u=0;u<=c-yV;u+=yV){const t=VV(jV,$V(e,u,u+yV));r&&a.update(t);const s=o.update(t);r||a.update(s),i.set(FV(jV,s),u+n)}return t.pending=$V(e,u),i}async function RV(t,e,i,n){t.password=null;const s=await async function(t,e,i,n,s){if(!AV)return dV.importKey(e);try{return await LV.importKey("raw",e,i,!1,s)}catch(t){return AV=!1,dV.importKey(e)}}(0,i,bV,0,MV),r=await async function(t,e,i){if(!DV)return dV.pbkdf2(e,t.salt,wV.iterations,i);try{return await LV.deriveBits(t,e,i)}catch(n){return DV=!1,dV.pbkdf2(e,t.salt,wV.iterations,i)}}(Object.assign({salt:n},wV),s,8*(2*kV[e]+2)),o=new Uint8Array(r),a=VV(jV,$V(o,0,kV[e])),l=VV(jV,$V(o,kV[e],2*kV[e])),c=$V(o,2*kV[e]);return Object.assign(t,{keys:{key:a,authentication:l,passwordVerification:c},ctr:new PV(new zV(a),Array.from(IV)),hmac:new TV(l)}),c}function BV(t,e){return e===QF?aV(t):e}function UV(t,e){let i=t;return t.length+e.length&&(i=new Uint8Array(t.length+e.length),i.set(t,0),i.set(e,t.length)),i}function $V(t,e,i){return t.subarray(e,i)}function FV(t,e){return t.fromBits(e)}function VV(t,e){return t.toBits(e)}class HV extends TransformStream{constructor({password:t,passwordVerification:e,checkPasswordOnly:i}){super({start(){Object.assign(this,{password:t,passwordVerification:e}),QV(this,t)},transform(t,e){const n=this;if(n.password){const e=ZV(n,t.subarray(0,12));if(n.password=null,e[11]!=n.passwordVerification)throw new Error(pV);t=t.subarray(12)}i?e.error(new Error(mV)):e.enqueue(ZV(n,t))}})}}class GV extends TransformStream{constructor({password:t,passwordVerification:e}){super({start(){Object.assign(this,{password:t,passwordVerification:e}),QV(this,t)},transform(t,e){const i=this;let n,s;if(i.password){i.password=null;const e=vV(new Uint8Array(12));e[11]=i.passwordVerification,n=new Uint8Array(t.length+e.length),n.set(YV(i,e),0),s=12}else n=new Uint8Array(t.length),s=0;n.set(YV(i,t),s),e.enqueue(n)}})}}function ZV(t,e){const i=new Uint8Array(e.length);for(let n=0;n<e.length;n++)i[n]=qV(t)^e[n],JV(t,i[n]);return i}function YV(t,e){const i=new Uint8Array(e.length);for(let n=0;n<e.length;n++)i[n]=qV(t)^e[n],JV(t,e[n]);return i}function QV(t,e){const i=[305419896,591751049,878082192];Object.assign(t,{keys:i,crcKey0:new rV(i[0]),crcKey2:new rV(i[2])});for(let i=0;i<e.length;i++)JV(t,e.charCodeAt(i))}function JV(t,e){let[i,n,s]=t.keys;t.crcKey0.append([e]),i=~t.crcKey0.get(),n=XV(Math.imul(XV(n+KV(i)),134775813)+1),t.crcKey2.append([n>>>24]),s=~t.crcKey2.get(),t.keys=[i,n,s]}function qV(t){const e=2|t.keys[2];return KV(Math.imul(e,1^e)>>>8)}function KV(t){return 255&t}function XV(t){return 4294967295&t}const tH="deflate-raw";class eH extends TransformStream{constructor(t,{chunkSize:e,CompressionStream:i,CompressionStreamNative:n}){super({});const{compressed:s,encrypted:r,useCompressionStream:o,zipCrypto:a,signed:l,level:c}=t,u=this;let h,d,f=nH(super.readable);r&&!a||!l||(h=new oV,f=oH(f,h)),s&&(f=rH(f,o,{level:c,chunkSize:e},n,i)),r&&(a?f=oH(f,new GV(t)):(d=new OV(t),f=oH(f,d))),sH(u,f,(()=>{let t;r&&!a&&(t=d.signature),r&&!a||!l||(t=new DataView(h.value.buffer).getUint32(0)),u.signature=t}))}}class iH extends TransformStream{constructor(t,{chunkSize:e,DecompressionStream:i,DecompressionStreamNative:n}){super({});const{zipCrypto:s,encrypted:r,signed:o,signature:a,compressed:l,useCompressionStream:c}=t;let u,h,d=nH(super.readable);r&&(s?d=oH(d,new HV(t)):(h=new EV(t),d=oH(d,h))),l&&(d=rH(d,c,{chunkSize:e},n,i)),r&&!s||!o||(u=new oV,d=oH(d,u)),sH(this,d,(()=>{if((!r||s)&&o){const t=new DataView(u.value.buffer);if(a!=t.getUint32(0,!1))throw new Error(gV)}}))}}function nH(t){return oH(t,new TransformStream({transform(t,e){t&&t.length&&e.enqueue(t)}}))}function sH(t,e,i){e=oH(e,new TransformStream({flush:i})),Object.defineProperty(t,"readable",{get:()=>e})}function rH(t,e,i,n,s){try{t=oH(t,new(e&&n?n:s)(tH,i))}catch(n){if(!e)return t;try{t=oH(t,new s(tH,i))}catch(e){return t}}return t}function oH(t,e){return t.pipeThrough(e)}const aH="data",lH="close",cH="deflate";class uH extends TransformStream{constructor(t,e){super({});const i=this,{codecType:n}=t;let s;n.startsWith(cH)?s=eH:n.startsWith("inflate")&&(s=iH);let r=0,o=0;const a=new s(t,e),l=super.readable,c=new TransformStream({transform(t,e){t&&t.length&&(o+=t.length,e.enqueue(t))},flush(){Object.assign(i,{inputSize:o})}}),u=new TransformStream({transform(t,e){t&&t.length&&(r+=t.length,e.enqueue(t))},flush(){const{signature:t}=a;Object.assign(i,{signature:t,outputSize:r,inputSize:o})}});Object.defineProperty(i,"readable",{get:()=>l.pipeThrough(c).pipeThrough(a).pipeThrough(u)})}}class hH extends TransformStream{constructor(t){let e;super({transform:function i(n,s){if(e){const t=new Uint8Array(e.length+n.length);t.set(e),t.set(n,e.length),n=t,e=null}n.length>t?(s.enqueue(n.slice(0,t)),i(n.slice(t),s)):e=n},flush(t){e&&e.length&&t.enqueue(e)}})}}let dH=typeof Worker!=JF;class fH{constructor(t,{readable:e,writable:i},{options:n,config:s,streamOptions:r,useWebWorkers:o,transferStreams:a,scripts:l},c){const{signal:u}=r;return Object.assign(t,{busy:!0,readable:e.pipeThrough(new hH(s.chunkSize)).pipeThrough(new pH(e,r),{signal:u}),writable:i,options:Object.assign({},n),scripts:l,transferStreams:a,terminate:()=>new Promise((e=>{const{worker:i,busy:n}=t;i?(n?t.resolveTerminated=e:(i.terminate(),e()),t.interface=null):e()})),onTaskFinished(){const{resolveTerminated:e}=t;e&&(t.resolveTerminated=null,t.terminated=!0,t.worker.terminate(),e()),t.busy=!1,c(t)}}),(o&&dH?vH:mH)(t,s)}}class pH extends TransformStream{constructor(t,{onstart:e,onprogress:i,size:n,onend:s}){let r=0;super({async start(){e&&await gH(e,n)},async transform(t,e){r+=t.length,i&&await gH(i,r,n),e.enqueue(t)},async flush(){t.size=r,s&&await gH(s,r)}})}}async function gH(t,...e){try{await t(...e)}catch(t){}}function mH(t,e){return{run:()=>async function({options:t,readable:e,writable:i,onTaskFinished:n},s){try{const n=new uH(t,s);await e.pipeThrough(n).pipeTo(i,{preventClose:!0,preventAbort:!0});const{signature:r,inputSize:o,outputSize:a}=n;return{signature:r,inputSize:o,outputSize:a}}finally{n()}}(t,e)}}function vH(t,e){const{baseURL:i,chunkSize:n}=e;if(!t.interface){let s;try{s=function(t,e,i){const n={type:"module"};let s,r;typeof t==qF&&(t=t());try{s=new URL(t,e)}catch(e){s=t}if(yH)try{r=new Worker(s)}catch(t){yH=!1,r=new Worker(s,n)}else r=new Worker(s,n);return r.addEventListener("message",(t=>async function({data:t},e){const{type:i,value:n,messageId:s,result:r,error:o}=t,{reader:a,writer:l,resolveResult:c,rejectResult:u,onTaskFinished:h}=e;try{if(o){const{message:t,stack:e,code:i,name:n}=o,s=new Error(t);Object.assign(s,{stack:e,code:i,name:n}),d(s)}else{if("pull"==i){const{value:t,done:i}=await a.read();bH({type:aH,value:t,done:i,messageId:s},e)}i==aH&&(await l.ready,await l.write(new Uint8Array(n)),bH({type:"ack",messageId:s},e)),i==lH&&d(null,r)}}catch(o){bH({type:lH,messageId:s},e),d(o)}function d(t,e){t?u(t):c(e),l&&l.releaseLock(),h()}}(t,i))),r}(t.scripts[0],i,t)}catch(i){return dH=!1,mH(t,e)}Object.assign(t,{worker:s,interface:{run:()=>async function(t,e){let i,n;const s=new Promise(((t,e)=>{i=t,n=e}));Object.assign(t,{reader:null,writer:null,resolveResult:i,rejectResult:n,result:s});const{readable:r,options:o,scripts:a}=t,{writable:l,closed:c}=function(t){let e;const i=new Promise((t=>e=t));return{writable:new WritableStream({async write(e){const i=t.getWriter();await i.ready,await i.write(e),i.releaseLock()},close(){e()},abort:e=>t.getWriter().abort(e)}),closed:i}}(t.writable),u=bH({type:"start",scripts:a.slice(1),options:o,config:e,readable:r,writable:l},t);u||Object.assign(t,{reader:r.getReader(),writer:l.getWriter()});const h=await s;return u||await l.getWriter().close(),await c,h}(t,{chunkSize:n})}})}return t.interface}let yH=!0,xH=!0;function bH(t,{worker:e,writer:i,onTaskFinished:n,transferStreams:s}){try{let{value:i,readable:n,writable:r}=t;const o=[];if(i&&(i.byteLength<i.buffer.byteLength?t.value=i.buffer.slice(0,i.byteLength):t.value=i.buffer,o.push(t.value)),s&&xH?(n&&o.push(n),r&&o.push(r)):t.readable=t.writable=null,o.length)try{return e.postMessage(t,o),!0}catch(i){xH=!1,t.readable=t.writable=null,e.postMessage(t)}else e.postMessage(t)}catch(t){throw i&&i.releaseLock(),n(),t}}let wH=[];const MH=[];let SH=0;function kH(t){const{terminateTimeout:e}=t;e&&(clearTimeout(e),t.terminateTimeout=null)}const _H=65536;class IH{constructor(){this.size=0}init(){this.initialized=!0}}class CH extends IH{get readable(){const t=this,{chunkSize:e=_H}=t,i=new ReadableStream({start(){this.chunkOffset=0},async pull(n){const{offset:s=0,size:r,diskNumberStart:o}=i,{chunkOffset:a}=this;n.enqueue(await zH(t,s+a,Math.min(e,r-a),o)),a+e>r?n.close():this.chunkOffset+=e}});return i}}class LH extends CH{constructor(t){super(),this.readers=t}async init(){const t=this,{readers:e}=t;t.lastDiskNumber=0,t.lastDiskOffset=0,await Promise.all(e.map((async(i,n)=>{await i.init(),n!=e.length-1&&(t.lastDiskOffset+=i.size),t.size+=i.size}))),super.init()}async readUint8Array(t,e,i=0){const n=this,{readers:s}=this;let r,o=i;-1==o&&(o=s.length-1);let a=t;for(;a>=s[o].size;)a-=s[o].size,o++;const l=s[o],c=l.size;if(a+e<=c)r=await zH(l,a,e);else{const s=c-a;r=new Uint8Array(e),r.set(await zH(l,a,s)),r.set(await n.readUint8Array(t+s,e-s,i),s)}return n.lastDiskNumber=Math.max(o,n.lastDiskNumber),r}}class NH extends IH{constructor(t,e=4294967295){super();const i=this;let n,s,r;Object.assign(i,{diskNumber:0,diskOffset:0,size:0,maxSize:e,availableSize:e});const o=new WritableStream({async write(e){const{availableSize:o}=i;if(r)e.length>=o?(await a(e.slice(0,o)),await l(),i.diskOffset+=n.size,i.diskNumber++,r=null,await this.write(e.slice(o))):await a(e);else{const{value:o,done:a}=await t.next();if(a&&!o)throw new Error("Writer iterator completed too soon");n=o,n.size=0,n.maxSize&&(i.maxSize=n.maxSize),i.availableSize=i.maxSize,await jH(n),s=o.writable,r=s.getWriter(),await this.write(e)}},async close(){await r.ready,await l()}});async function a(t){const e=t.length;e&&(await r.ready,await r.write(t),n.size+=e,i.size+=e,i.availableSize-=e)}async function l(){s.size=n.size,await r.close()}Object.defineProperty(i,"writable",{get:()=>o})}}async function jH(t,e){if(!t.init||t.initialized)return Promise.resolve();await t.init(e)}function zH(t,e,i,n){return t.readUint8Array(e,i,n)}const PH="diskNumberStart",TH="lastModDate",AH="lastAccessDate",DH="creationDate",EH="internalFileAttribute",OH="externalFileAttribute",WH="msDosCompatible",RH="zip64",BH=["filename","rawFilename","compressedSize","uncompressedSize",TH,"rawLastModDate","comment","rawComment",AH,DH,"offset",PH,PH,EH,OH,WH,RH,"directory","bitFlag","encrypted","signature","filenameUTF8","commentUTF8","compressionMethod","version","versionMadeBy","extraField","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"];class UH{constructor(t){BH.forEach((e=>this[e]=t[e]))}}const $H="Version exceeds 65535",FH="Zip64 is not supported (make sure 'keepOrder' is set to 'true')",VH=new Uint8Array([7,0,2,0,65,69,3,0,0]);let HH=0;const GH=[];class ZH{constructor(t,e={}){const i=(t=function(t){t.writable===QF&&typeof t.next==qF&&(t=new NH(t)),t instanceof WritableStream&&(t={writable:t});const{writable:e}=t;return e.size===QF&&(e.size=0),t instanceof NH||Object.assign(t,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),t}(t)).availableSize!==QF&&t.availableSize>0&&t.availableSize!==1/0&&t.maxSize!==QF&&t.maxSize>0&&t.maxSize!==1/0;Object.assign(this,{writer:t,addSplitZipSignature:i,options:e,config:eV,files:new Map,filenames:new Set,offset:t.writable.size,pendingEntriesSize:0,pendingAddFileCalls:new Set,bufferedWrites:0})}async add(t="",e,i={}){const n=this,{pendingAddFileCalls:s,config:r}=n;let o;HH<r.maxWorkers?HH++:await new Promise((t=>GH.push(t)));try{if(t=t.trim(),n.filenames.has(t))throw new Error("File already exists");return n.filenames.add(t),o=async function(t,e,i,n){e=e.trim(),n.directory&&!e.endsWith("/")?e+="/":n.directory=e.endsWith("/");const s=qH(t,n,"encodeText",aV),r=s(e);if(sG(r)>GF)throw new Error("File entry name exceeds 64KB");const o=n.comment||"",a=s(o);if(sG(a)>GF)throw new Error("File entry comment exceeds 64KB");const l=qH(t,n,"version",20);if(l>GF)throw new Error($H);const c=qH(t,n,"versionMadeBy",20);if(c>GF)throw new Error($H);const u=qH(t,n,TH,new Date),h=qH(t,n,AH),d=qH(t,n,DH),f=qH(t,n,WH,!0),p=qH(t,n,EH,0),g=qH(t,n,OH,0),m=qH(t,n,"password"),v=qH(t,n,"rawPassword"),y=qH(t,n,"encryptionStrength",3),x=qH(t,n,"zipCrypto"),b=qH(t,n,"extendedTimestamp",!0),w=qH(t,n,"keepOrder",!0),M=qH(t,n,"level"),S=qH(t,n,"useWebWorkers"),k=qH(t,n,"bufferedWrite"),_=qH(t,n,"dataDescriptorSignature",!1),I=qH(t,n,"signal"),C=qH(t,n,"useCompressionStream");let L=qH(t,n,"dataDescriptor",!0),N=qH(t,n,RH);if(m!==QF&&y!==QF&&(y<1||y>3))throw new Error("The strength must equal 1, 2, or 3");let j=new Uint8Array;const{extraField:z}=n;if(z){let t=0,e=0;z.forEach((e=>t+=4+sG(e))),j=new Uint8Array(t),z.forEach(((t,i)=>{if(i>GF)throw new Error("Extra field type exceeds 65535");if(sG(t)>GF)throw new Error("Extra field data exceeds 64KB");iG(j,new Uint16Array([i]),e),iG(j,new Uint16Array([sG(t)]),e+2),iG(j,t,e+4),e+=4+sG(t)}))}let P=0,T=0,A=0;const D=!0===N;i&&(i=function(t){return Array.isArray(t)&&(t=new LH(t)),t instanceof ReadableStream&&(t={readable:t}),t}(i),await jH(i),i.size===QF?(L=!0,(N||N===QF)&&(N=!0,A=P=HF)):(A=i.size,P=function(t){return t+5*(Math.floor(t/16383)+1)}(A)));const{diskOffset:E,diskNumber:O,maxSize:W}=t.writer,R=D||A>=HF,B=D||P>=HF,U=D||t.offset+t.pendingEntriesSize-E>=HF,$=qH(t,n,"supportZip64SplitFile",!0)&&D||O+Math.ceil(t.pendingEntriesSize/W)>=GF;if(U||R||B||$){if(!1===N||!w)throw new Error(FH);N=!0}N=N||!1;const F=function(t){const{rawFilename:e,lastModDate:i,lastAccessDate:n,creationDate:s,rawPassword:r,password:o,level:a,zip64:l,zipCrypto:c,dataDescriptor:u,directory:h,rawExtraField:d,encryptionStrength:f,extendedTimestamp:p}=t,g=0!==a&&!h,m=Boolean(o&&sG(o)||r&&sG(r));let v,y,x,b,w=t.version;if(m&&!c){v=new Uint8Array(sG(VH)+2);const t=nG(v);XH(t,0,39169),iG(v,VH,2),KH(t,8,f)}else v=new Uint8Array;if(p){x=new Uint8Array(9+(n?4:0)+(s?4:0));const t=nG(x);XH(t,0,21589),XH(t,2,sG(x)-4),b=1+(n?2:0)+(s?4:0),KH(t,4,b);let e=5;tG(t,e,Math.floor(i.getTime()/1e3)),e+=4,n&&(tG(t,e,Math.floor(n.getTime()/1e3)),e+=4),s&&tG(t,e,Math.floor(s.getTime()/1e3));try{y=new Uint8Array(36);const t=nG(y),e=JH(i);XH(t,0,10),XH(t,2,32),XH(t,8,1),XH(t,10,24),eG(t,12,e),eG(t,20,JH(n)||e),eG(t,28,JH(s)||e)}catch(t){y=new Uint8Array}}else y=x=new Uint8Array;let M=2048;u&&(M|=8);let S=0;g&&(S=8),l&&(w=w>45?w:45),m&&(M|=1,c||(w=w>51?w:51,S=99,g&&(v[9]=8)));const k=new Uint8Array(26),_=nG(k);XH(_,0,w),XH(_,2,M),XH(_,4,S);const I=new Uint32Array(1),C=nG(I);let L;L=i<YF?YF:i>ZF?ZF:i,XH(C,0,(L.getHours()<<6|L.getMinutes())<<5|L.getSeconds()/2),XH(C,2,(L.getFullYear()-1980<<4|L.getMonth()+1)<<5|L.getDate());const N=I[0];tG(_,6,N),XH(_,22,sG(e));const j=sG(v,x,y,d);XH(_,24,j);const z=new Uint8Array(30+sG(e)+j);return tG(nG(z),0,67324752),iG(z,k,4),iG(z,e,30),iG(z,v,30+sG(e)),iG(z,x,30+sG(e,v)),iG(z,y,30+sG(e,v,x)),iG(z,d,30+sG(e,v,x,y)),{localHeaderArray:z,headerArray:k,headerView:_,lastModDate:i,rawLastModDate:N,encrypted:m,compressed:g,version:w,compressionMethod:S,extraFieldExtendedTimestampFlag:b,rawExtraFieldExtendedTimestamp:x,rawExtraFieldNTFS:y,rawExtraFieldAES:v,extraFieldLength:j}}(n=Object.assign({},n,{rawFilename:r,rawComment:a,version:l,versionMadeBy:c,lastModDate:u,lastAccessDate:h,creationDate:d,rawExtraField:j,zip64:N,zip64UncompressedSize:R,zip64CompressedSize:B,zip64Offset:U,zip64DiskNumberStart:$,password:m,rawPassword:v,level:C||t.config.CompressionStream!==QF?M:0,useWebWorkers:S,encryptionStrength:y,extendedTimestamp:b,zipCrypto:x,bufferedWrite:k,keepOrder:w,dataDescriptor:L,dataDescriptorSignature:_,signal:I,msDosCompatible:f,internalFileAttribute:p,externalFileAttribute:g,useCompressionStream:C})),V=function(t){const{zip64:e,dataDescriptor:i,dataDescriptorSignature:n}=t;let s,r=new Uint8Array,o=0;return i&&(r=new Uint8Array(e?n?24:20:n?16:12),s=nG(r),n&&(o=4,tG(s,0,134695760))),{dataDescriptorArray:r,dataDescriptorView:s,dataDescriptorOffset:o}}(n),H=sG(F.localHeaderArray,V.dataDescriptorArray);let G;T=H+P,t.options.usdz&&(T+=T+64),t.pendingEntriesSize+=T;try{G=await async function(t,e,i,n,s){const{files:r,writer:o}=t,{keepOrder:a,dataDescriptor:l,signal:c}=s,{headerInfo:u}=n,{usdz:h}=t.options,d=Array.from(r.values()).pop();let f,p,g,m,v,y,x,b={};r.set(e,b);try{let u;a&&(u=d&&d.lock,b.lock=new Promise((t=>g=t))),!(s.bufferedWrite||t.writerLocked||t.bufferedWrites&&a)&&l||h?(y=o,await w()):(y=new TransformStream,x=new Response(y.readable).blob(),y.writable.size=0,f=!0,t.bufferedWrites++,await jH(o)),await jH(y);const{writable:p}=o;let{diskOffset:S}=o;if(t.addSplitZipSignature){delete t.addSplitZipSignature;const e=new Uint8Array(4);tG(nG(e),0,134695760),await QH(p,e),t.offset+=4}h&&function(t,e){const{headerInfo:i}=t;let{localHeaderArray:n,extraFieldLength:s}=i,r=nG(n),o=64-(e+sG(n))%64;o<4&&(o+=64);const a=new Uint8Array(o),l=nG(a);XH(l,0,6534),XH(l,2,o-2);const c=n;i.localHeaderArray=n=new Uint8Array(sG(c)+o),iG(n,c),iG(n,a,sG(c)),r=nG(n),XH(r,28,s+o),t.metadataSize+=o}(n,t.offset-S),f||(await u,await M(p));const{diskNumber:k}=o;if(v=!0,b.diskNumberStart=k,b=await async function(t,e,{diskNumberStart:i,lock:n},s,r,o){const{headerInfo:a,dataDescriptorInfo:l,metadataSize:c}=s,{localHeaderArray:u,headerArray:h,lastModDate:d,rawLastModDate:f,encrypted:p,compressed:g,version:m,compressionMethod:v,rawExtraFieldExtendedTimestamp:y,extraFieldExtendedTimestampFlag:x,rawExtraFieldNTFS:b,rawExtraFieldAES:w}=a,{dataDescriptorArray:M}=l,{rawFilename:S,lastAccessDate:k,creationDate:_,password:I,rawPassword:C,level:L,zip64:N,zip64UncompressedSize:j,zip64CompressedSize:z,zip64Offset:P,zip64DiskNumberStart:T,zipCrypto:A,dataDescriptor:D,directory:E,versionMadeBy:O,rawComment:W,rawExtraField:R,useWebWorkers:B,onstart:U,onprogress:$,onend:F,signal:V,encryptionStrength:H,extendedTimestamp:G,msDosCompatible:Z,internalFileAttribute:Y,externalFileAttribute:Q,useCompressionStream:J}=o,q={lock:n,versionMadeBy:O,zip64:N,directory:Boolean(E),filenameUTF8:!0,rawFilename:S,commentUTF8:!0,rawComment:W,rawExtraFieldExtendedTimestamp:y,rawExtraFieldNTFS:b,rawExtraFieldAES:w,rawExtraField:R,extendedTimestamp:G,msDosCompatible:Z,internalFileAttribute:Y,externalFileAttribute:Q,diskNumberStart:i};let K,X=0,tt=0;const{writable:et}=e;if(t){t.chunkSize=function(t){return Math.max(t.chunkSize,64)}(r),await QH(et,u);const e=t.readable,i=e.size=t.size,n={options:{codecType:cH,level:L,rawPassword:C,password:I,encryptionStrength:H,zipCrypto:p&&A,passwordVerification:p&&A&&f>>8&255,signed:!0,compressed:g,encrypted:p,useWebWorkers:B,useCompressionStream:J,transferStreams:!1},config:r,streamOptions:{signal:V,size:i,onstart:U,onprogress:$,onend:F}},s=await async function(t,e){const{options:i,config:n}=e,{transferStreams:s,useWebWorkers:r,useCompressionStream:o,codecType:a,compressed:l,signed:c,encrypted:u}=i,{workerScripts:h,maxWorkers:d}=n;e.transferStreams=s||s===QF;const f=!(l||c||u||e.transferStreams);return e.useWebWorkers=!f&&(r||r===QF&&n.useWebWorkers),e.scripts=e.useWebWorkers&&h?h[a]:[],i.useCompressionStream=o||o===QF&&n.useCompressionStream,(await async function(){const i=wH.find((t=>!t.busy));if(i)return kH(i),new fH(i,t,e,p);if(wH.length<d){const i={indexWorker:SH};return SH++,wH.push(i),new fH(i,t,e,p)}return new Promise((i=>MH.push({resolve:i,stream:t,workerOptions:e})))}()).run();function p(t){if(MH.length){const[{resolve:e,stream:i,workerOptions:n}]=MH.splice(0,1);e(new fH(t,i,n,p))}else t.worker?(kH(t),function(t,e){const{config:i}=e,{terminateWorkerTimeout:n}=i;Number.isFinite(n)&&n>=0&&(t.terminated?t.terminated=!1:t.terminateTimeout=setTimeout((async()=>{wH=wH.filter((e=>e!=t));try{await t.terminate()}catch(t){}}),n))}(t,e)):wH=wH.filter((e=>e!=t))}}({readable:e,writable:et},n);tt=s.inputSize,X=s.outputSize,K=s.signature,et.size+=tt}else await QH(et,u);let it;if(N){let t=4;j&&(t+=8),z&&(t+=8),P&&(t+=8),T&&(t+=4),it=new Uint8Array(t)}else it=new Uint8Array;return function(t,e){const{signature:i,rawExtraFieldZip64:n,compressedSize:s,uncompressedSize:r,headerInfo:o,dataDescriptorInfo:a}=t,{headerView:l,encrypted:c}=o,{dataDescriptorView:u,dataDescriptorOffset:h}=a,{zip64:d,zip64UncompressedSize:f,zip64CompressedSize:p,zipCrypto:g,dataDescriptor:m}=e;if(c&&!g||i===QF||(tG(l,10,i),m&&tG(u,h,i)),d){const t=nG(n);XH(t,0,1),XH(t,2,sG(n)-4);let e=4;f&&(tG(l,18,HF),eG(t,e,BigInt(r)),e+=8),p&&(tG(l,14,HF),eG(t,e,BigInt(s))),m&&(eG(u,h+4,BigInt(s)),eG(u,h+12,BigInt(r)))}else tG(l,14,s),tG(l,18,r),m&&(tG(u,h+4,s),tG(u,h+8,r))}({signature:K,rawExtraFieldZip64:it,compressedSize:X,uncompressedSize:tt,headerInfo:a,dataDescriptorInfo:l},o),D&&await QH(et,M),Object.assign(q,{uncompressedSize:tt,compressedSize:X,lastModDate:d,rawLastModDate:f,creationDate:_,lastAccessDate:k,encrypted:p,size:c+X,compressionMethod:v,version:m,headerArray:h,signature:K,rawExtraFieldZip64:it,extraFieldExtendedTimestampFlag:x,zip64UncompressedSize:j,zip64CompressedSize:z,zip64Offset:P,zip64DiskNumberStart:T}),q}(i,y,b,n,t.config,s),v=!1,r.set(e,b),b.filename=e,f){await y.writable.getWriter().close();let t=await x;await u,await w(),m=!0,l||(t=await async function(t,e,i,{zipCrypto:n}){let s;s=await e.slice(0,26).arrayBuffer(),26!=s.byteLength&&(s=s.slice(0,26));const r=new DataView(s);return t.encrypted&&!n||tG(r,14,t.signature),t.zip64?(tG(r,18,HF),tG(r,22,HF)):(tG(r,18,t.compressedSize),tG(r,22,t.uncompressedSize)),await QH(i,new Uint8Array(s)),e.slice(s.byteLength)}(b,t,p,s)),await M(p),b.diskNumberStart=o.diskNumber,S=o.diskOffset,await t.stream().pipeTo(p,{preventClose:!0,preventAbort:!0,signal:c}),p.size+=t.size,m=!1}if(b.offset=t.offset-S,b.zip64)!function(t,e){const{rawExtraFieldZip64:i,offset:n,diskNumberStart:s}=t,{zip64UncompressedSize:r,zip64CompressedSize:o,zip64Offset:a,zip64DiskNumberStart:l}=e,c=nG(i);let u=4;r&&(u+=8),o&&(u+=8),a&&(eG(c,u,BigInt(n)),u+=8),l&&tG(c,u,s)}(b,s);else if(b.offset>=HF)throw new Error(FH);return t.offset+=b.size,b}catch(i){if(f&&m||!f&&v){if(t.hasCorruptedEntries=!0,i)try{i.corruptedEntry=!0}catch(t){}f?t.offset+=y.writable.size:t.offset=y.writable.size}throw r.delete(e),i}finally{f&&t.bufferedWrites--,g&&g(),p&&p()}async function w(){t.writerLocked=!0;const{lockWriter:e}=t;t.lockWriter=new Promise((e=>p=()=>{t.writerLocked=!1,e()})),await e}async function M(t){sG(u.localHeaderArray)>o.availableSize&&(o.availableSize=0,await QH(t,new Uint8Array))}}(t,e,i,{headerInfo:F,dataDescriptorInfo:V,metadataSize:H},n)}finally{t.pendingEntriesSize-=T}return Object.assign(G,{name:e,comment:o,extraField:z}),new UH(G)}(n,t,e,i),s.add(o),await o}catch(e){throw n.filenames.delete(t),e}finally{s.delete(o);const t=GH.shift();t?t():HH--}}async close(t=new Uint8Array,e={}){const{pendingAddFileCalls:i,writer:n}=this,{writable:s}=n;for(;i.size;)await Promise.allSettled(Array.from(i));return await async function(t,e,i){const{files:n,writer:s}=t,{diskOffset:r,writable:o}=s;let{diskNumber:a}=s,l=0,c=0,u=t.offset-r,h=n.size;for(const[,t]of n){const{rawFilename:e,rawExtraFieldZip64:i,rawExtraFieldAES:n,rawComment:s,rawExtraFieldNTFS:r,rawExtraField:o,extendedTimestamp:a,extraFieldExtendedTimestampFlag:l,lastModDate:u}=t;let h;if(a){h=new Uint8Array(9);const t=nG(h);XH(t,0,21589),XH(t,2,5),KH(t,4,l),tG(t,5,Math.floor(u.getTime()/1e3))}else h=new Uint8Array;t.rawExtraFieldCDExtendedTimestamp=h,c+=46+sG(e,s,i,n,r,h,o)}const d=new Uint8Array(c),f=nG(d);await jH(s);let p=0;for(const[t,e]of Array.from(n.values()).entries()){const{offset:r,rawFilename:a,rawExtraFieldZip64:c,rawExtraFieldAES:u,rawExtraFieldCDExtendedTimestamp:h,rawExtraFieldNTFS:g,rawExtraField:m,rawComment:v,versionMadeBy:y,headerArray:x,directory:b,zip64:w,zip64UncompressedSize:M,zip64CompressedSize:S,zip64DiskNumberStart:k,zip64Offset:_,msDosCompatible:I,internalFileAttribute:C,externalFileAttribute:L,diskNumberStart:N,uncompressedSize:j,compressedSize:z}=e,P=sG(c,u,h,g,m);tG(f,l,33639248),XH(f,l+4,y);const T=nG(x);M||tG(T,18,j),S||tG(T,14,z),iG(d,x,l+6),XH(f,l+30,P),XH(f,l+32,sG(v)),XH(f,l+34,w&&k?GF:N),XH(f,l+36,C),L?tG(f,l+38,L):b&&I&&KH(f,l+38,16),tG(f,l+42,w&&_?HF:r),iG(d,a,l+46),iG(d,c,l+46+sG(a)),iG(d,u,l+46+sG(a,c)),iG(d,h,l+46+sG(a,c,u)),iG(d,g,l+46+sG(a,c,u,h)),iG(d,m,l+46+sG(a,c,u,h,g)),iG(d,v,l+46+sG(a)+P);const A=46+sG(a,v)+P;if(l-p>s.availableSize&&(s.availableSize=0,await QH(o,d.slice(p,l)),p=l),l+=A,i.onprogress)try{await i.onprogress(t+1,n.size,new UH(e))}catch(t){}}await QH(o,p?d.slice(p):d);let g=s.diskNumber;const{availableSize:m}=s;m<22&&g++;let v=qH(t,i,"zip64");if(u>=HF||c>=HF||h>=GF||g>=GF){if(!1===v)throw new Error(FH);v=!0}const y=new Uint8Array(v?98:22),x=nG(y);l=0,v&&(tG(x,0,101075792),eG(x,4,BigInt(44)),XH(x,12,45),XH(x,14,45),tG(x,16,g),tG(x,20,a),eG(x,24,BigInt(h)),eG(x,32,BigInt(h)),eG(x,40,BigInt(c)),eG(x,48,BigInt(u)),tG(x,56,117853008),eG(x,64,BigInt(u)+BigInt(c)),tG(x,72,g+1),qH(t,i,"supportZip64SplitFile",!0)&&(g=GF,a=GF),h=GF,u=HF,c=HF,l+=76),tG(x,l,101010256),XH(x,l+4,g),XH(x,l+6,a),XH(x,l+8,h),XH(x,l+10,h),tG(x,l+12,c),tG(x,l+16,u);const b=sG(e);if(b){if(!(b<=GF))throw new Error("Zip file comment exceeds 64KB");XH(x,l+20,b)}await QH(o,y),b&&await QH(o,e)}(this,t,e),qH(this,e,"preventClose")||await s.getWriter().close(),n.getData?n.getData():s}}class YH{constructor(t={}){const{readable:e,writable:i}=new TransformStream;this.readable=e,this.zipWriter=new ZH(i,t)}transform(t){const{readable:e,writable:i}=new TransformStream({flush:()=>{this.zipWriter.close()}});return this.zipWriter.add(t,e),{readable:this.readable,writable:i}}writable(t){const{readable:e,writable:i}=new TransformStream;return this.zipWriter.add(t,e),i}close(t,e={}){return this.zipWriter.close(t,e)}}async function QH(t,e){const i=t.getWriter();try{await i.ready,t.size+=sG(e),await i.write(e)}finally{i.releaseLock()}}function JH(t){if(t)return(BigInt(t.getTime())+BigInt(116444736e5))*BigInt(1e4)}function qH(t,e,i,n){const s=e[i]===QF?t.options[i]:e[i];return s===QF?n:s}function KH(t,e,i){t.setUint8(e,i)}function XH(t,e,i){t.setUint16(e,i,!0)}function tG(t,e,i){t.setUint32(e,i,!0)}function eG(t,e,i){t.setBigUint64(e,i,!0)}function iG(t,e,i){t.set(e,i)}function nG(t){return new DataView(t.buffer)}function sG(...t){let e=0;return t.forEach((t=>t&&(e+=t.length))),e}iV({Deflate:function(t){const e=new VF,i=(n=t&&t.chunkSize?t.chunkSize:65536)+5*(Math.floor(n/16383)+1);var n;const s=new Uint8Array(i);let r=t?t.level:-1;void 0===r&&(r=-1),e.deflateInit(r),e.next_out=s,this.append=function(t,n){let r,o,a=0,l=0,c=0;const u=[];if(t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=i,r=e.deflate(0),0!=r)throw new Error("deflating: "+e.msg);e.next_out_index&&(e.next_out_index==i?u.push(new Uint8Array(s)):u.push(s.subarray(0,e.next_out_index))),c+=e.next_out_index,n&&e.next_in_index>0&&e.next_in_index!=a&&(n(e.next_in_index),a=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return u.length>1?(o=new Uint8Array(c),u.forEach((function(t){o.set(t,l),l+=t.length}))):o=u[0]?new Uint8Array(u[0]):new Uint8Array,o}},this.flush=function(){let t,n,r=0,o=0;const a=[];do{if(e.next_out_index=0,e.avail_out=i,t=e.deflate(4),1!=t&&0!=t)throw new Error("deflating: "+e.msg);i-e.avail_out>0&&a.push(s.slice(0,e.next_out_index)),o+=e.next_out_index}while(e.avail_in>0||0===e.avail_out);return e.deflateEnd(),n=new Uint8Array(o),a.forEach((function(t){n.set(t,r),r+=t.length})),n}}}),iV({useWebWorkers:!1});const rG=1e6,oG=1e6;let aG,lG,cG,uG,hG,dG;const fG=new Map;let pG,gG=null;const mG=[];function vG(t){return Math.round(t/lG)}async function yG(t,e,i,n){let s=i.startTime??0,r=s+(i.duration??e.duration);aG=i.fps??e.fps,lG=1e3/aG,cG=i.bounds.width,uG=i.bounds.height,pG=i.imageFormat||"png",dG=0,gG=n;let o,a=new AB(63,null,new Map([[Ed,hZ]]));[o,hG]=a.export(t,e,s,r,!1),a=null;const l=i.size?.width||cG,c=i.size?.height||uG,u=vG(hG),h=function(t,e,i){const n=[];for(const e of t)n.push(...jG(e,!0)),e.dispose();if(e===cG&&i===uG)return n;const s={s:{a:0,k:[mZ(e/cG),mZ(i/uG)]}};let r=!0;for(const t of n)if(null!=t.ks&&Object.keys(t.ks).length>0){r=!1;break}if(r){for(const t of n)t.ks=s;return n}const o="p"+dG++;return mG.push({id:o,fr:aG,layers:n}),[{ty:0,refId:o,w:e,h:i,ip:0,op:vG(hG),st:0,ks:s}]}(o.reverse(),l,c),d={v:"5.0.0",meta:{g:"Expressive Animator (https://expressive.app)"},fr:aG,ip:0,op:u,w:l,h:c,ddd:0,layers:h,assets:mG.length?mG.splice(0):void 0};if(fG.clear(),gG=null,i.background&&i.background.a){const t=i.background;d.layers.push({ty:1,ip:0,op:u,st:0,sw:l,sh:c,sc:x(t.r,t.g,t.b,1,!0),ks:{o:{a:0,k:mZ(t.a)}}})}return new Blob([BB(d,0)],{type:"application/json"})}async function xG(t,e,i,n){const s=await yG(e,i,n,null);await s.stream().pipeTo(t)}async function bG(t,e,i,n){const s=new YH({zip64:!1,level:5,msDosCompatible:!0});s.readable.pipeTo(t);const r=new Map,o=await yG(e,i,n,r);(function(t){return new Blob([JSON.stringify(t)],lt).stream()})({version:"1.0",revision:1,author:xI,description:`${xI} (https://expressive.app)`,generator:`${xI} v${bI}`,keywords:xI,animations:[{id:"main",direction:n?.reverse?-1:1,speed:n?.speed||1,playMode:n?.reverse?"bounce":"normal",loop:0===(n?.repeat||0)||1!==n.repeat&&n.repeat,autoplay:!1,hover:!1,intermission:0}]}).pipeTo(s.writable("manifest.json")),o.stream().pipeTo(s.writable("animations/main.json"));const a=`image/${pG}`,l=$B(pG);for(const[t,e]of r){const i=t.data.encodeToData(l,100),n=i.getBlob(a);i.delete(),n.stream().pipeTo(s.writable(`images/${e}`))}r.clear(),await s.close()}function*wG(t){$m(t.target)?yield function(t){const e=function(t){if(t.target instanceof Jp){const[e,i]=t.pair(Hd);return kG(i??e)}if(t.target instanceof Sg){const e=[];for(const[i]of t.target.paragraph.pathsWithStyle())e.push(...SG(Wn(i)));return[e,MG]}const e=tR(t.target);if(!e)return null;const i=[];for(const n of e){const[e,s]=t.pair(n);i.push(s||e)}const n=eR(t.target,i,aG);return kG(dZ(Hd,n))}(t);if(!e)return null;const[i,n]=e;if(!i?.length)return null;const s=i.length;return i.push(...function*(t,e){0===t.value(cf)?(yield*KG(t,e),yield*qG(t)):(yield*qG(t),yield*KG(t,e))}(t,n)),i.length===s?null:EG(t)?zG(t,i):PG(t,i)}(t):t.target instanceof Qp?yield*jG(t):t.target instanceof gg?yield function(t){const e=t.target.imageResource,i=function(t){if(!t)return null;if(fG.has(t.id))return fG.get(t.id);let e;try{gG?(e=`${gG.size}.${pG}`,gG.set(t,e)):e=t.data.encodeToDataURI($B(pG),100)}catch{return fG.set(t.id,null),null}const i="i"+dG++;return mG.push({id:i,w:t.width,h:t.height,e:1,u:"",p:e}),fG.set(t.id,i),i}(e);if(!i)return null;const n=e.width,s=e.height,r=t.value(Vd),[o,a]=t.pair(Jf),[l,c]=t.pair(qf);if(null!=(a||l)||o!==n||l!==s||!r.isZero){const e=[a??o,c??l];let u;r.isZero||(u=[..._O(e,aG,(([t,e])=>new ce(-r.x*t,-r.y*e)))],MO(u),kO(u,qh));const h=[..._O(e,aG,(([t,e])=>new ce(t/n,e/s)))];MO(h),kO(h,qh);const d=0,f=vG(t.start),p=vG(t.end),[g,m]=lZ(t),v=[];let y=0;return cZ(g)||(v.push(CG(g,y,f,p)),y++),v.push(CG({p:u?HG(u,vZ):void 0,s:HG(h,yZ)},y,f,p,y?y-1:void 0)),v.push({ty:2,refId:i,st:d,ip:f,op:p,parent:y,ks:{}}),AG(t,v,m)}return{ty:2,refId:i,...DG(t)}}(t):t.target instanceof mg&&(yield function(t){const e=[],i=[],n=[];for(const s of t.children)s.target instanceof ag?i.push(s):s.target instanceof ng?n.push(s):e.push(s);if(!e.length)return null;const s=vG(t.start),r=vG(t.end);let o=[];for(const t of i)o.push(...jG(t,!0));for(const t of n)o.push(LG(t));if(o=o.filter(_t),!o.length)return null;const[a]=NG(e,s,r,!0);if(!a?.length)return null;let l,c;l=1===o.length?o[0]:TG(o,s,r),l.td=1,l.ind=1,c=1===a.length?a[0]:TG(a,s,r),c.tp=1,c.tt=t.target.isAlphaMask?1:3;let u=[l,c];const[h,d]=lZ(t);return cZ(h)||(u.unshift(CG(h,0,s,r)),l.parent=c.parent=0),AG(t,u,d)}(t))}function MG(){return 0}function SG(t){if(!(t instanceof iO))return Un(t).map((t=>({ty:"sh",ks:GG(t,IG)})));const e=Bn(t.keyframes[0].value),i=bO(t.keyframes,(t=>Un(t,e))),n=[],s=e.length/2;for(let t=0;t<s;t++)n.push({ty:"sh",ks:HG(bO(i,(e=>e[t])),IG)});return n}function kG(t){if(!(t instanceof iO)){let e;return[SG(t),()=>e??=An(t)]}let e;return[SG(t),i=>{if(e??=new Map,e.has(i))return e.get(i);const n=An(t.getValueAtOffset(i));return e.set(i,n),n}]}const _G=[0,0];function IG(t){const e=[],i=[],n=[],s=3===t[t.length-1].type;for(const s of t)e.push(vZ(s.point)),1===s.joint?(i.push(_G),n.push(_G)):(s.handleIn?i.push(vZ(s.handleIn.sub(s.point))):i.push(_G),s.handleOut?n.push(vZ(s.handleOut.sub(s.point))):n.push(_G));return{c:s,v:e,i,o:n}}function CG(t,e,i,n,s){return{ty:3,st:0,ip:i,op:n,ind:e,parent:s,ks:t}}function LG(t){const[e,i]=t.pair(Hd),n=SG(i??e);return n?.length?(n.push({ty:"fl",o:GG(1,mZ),c:GG(se.white,pZ),r:YG.get(t.value(Gd))}),zG(t,n)):null}function NG(t,e,i,n){let s=null,r=null;for(const n of function*(t){for(let e=t.length-1;e>=0;e--)yield*wG(t[e])}(t))n&&("string"!=typeof n.ty?(r??=[],s?.length&&(r.push({ty:4,shapes:[...s],ip:e,op:i,st:0,ks:{}}),s.splice(0)),r.push(n)):(s??=[],s.push(n)));return n&&!r&&s?.length&&(r=[]),r&&(s?.length&&r.push({ty:4,shapes:s,ip:e,op:i,st:0,ks:{}}),s=null),[r,s]}function*jG(t,e){const i=vG(t.start),n=vG(t.end);let[s,r]=NG(t.children,i,n);if(!s){if(!r?.length)return;if(e||EG(t))yield zG(t,r);else{const e=aZ(t);cZ(e)?yield*r:yield PG(t,r,e)}return}const o=aZ(t),a=!cZ(o);if(!a&&!EG(t)){if(!e)return void(yield*s);if(1===s.length&&0===s[0].ty)return s[0].bm||(s[0].bm=BG(t)),void(yield s[0])}yield AG(t,s,a?o:null)}function zG(t,e){return{ty:4,shapes:e,...DG(t)}}function PG(t,e,i){return i??=aZ(t),i&&e.push({ty:"tr",...i}),{ty:"gr",bm:BG(t)||void 0,nm:void 0,it:e}}function TG(t,e,i,n){const s="p"+dG++;return mG.push({id:s,fr:aG,layers:t}),{ty:0,refId:s,w:rG,h:oG,st:0,ip:e,op:i,ks:n||{}}}function AG(t,e,i){const n="p"+dG++;return mG.push({id:n,fr:aG,layers:e}),{ty:0,refId:n,w:rG,h:oG,...DG(t,i)}}function DG(t,e){void 0===e&&(e=aZ(t));const i=!cZ(e);return{st:0,nm:void 0,ip:vG(t.start),op:vG(t.end),bm:BG(t)||void 0,ks:i?e:{},ef:WG(t.filterContainer)||void 0}}function EG(t){return null!=t.filterContainer||t.value(Ad)||t.hasOwnVisibility&&(t.start>0||t.end<hG)}const OG=new Map([[im,function(t){return{ty:29,en:1,ef:[{ty:0,v:UG(t,Cp,(t=>t/.3))},{ty:0,v:{a:0,k:1}},{ty:4,v:{a:0,k:0}}]}}],[sm,function(t){const[e,i]=t.pair(Wp);let n,s,r,o,a,l,c,[u,h]=t.pair(Rp);if(h?(l=bO(h.keyframes,(t=>t.a)),MO(l),kO(l,Jh),c=bO(h.keyframes,(t=>t.withOpacity(1))),MO(c),kO(c,id)):(r=u.a,u=u.withOpacity(1)),i){const t=[..._O([i],aG,(([t])=>[t.length,(t.angle+90+360)%360]))];o=bO(t,(t=>t[0])),MO(o),kO(o,Qh),a=bO(t,(t=>t[1])),MO(a),kO(a,Zh)}else n=e.length,s=(e.angle+90+360)%360;return{ty:25,en:1,ef:[{ty:2,v:c?HG(c,pZ):GG(u,pZ)},{ty:0,v:l?HG(l,v):GG(r,v)},{ty:1,v:a?HG(a,It):GG(s,It)},{ty:0,v:o?HG(o,It):GG(n,It)},{ty:0,v:UG(t,Op,(t=>4*t))}]}}]]);function WG(t){if(!t||!t.children.length)return null;const e=[];for(const i of t.children)if(OG.has(i.target.constructor)){const t=OG.get(i.target.constructor)(i);t&&e.push(t)}return e.length?e:null}const RG=new Map([[11,0],[10,1],[14,2],[12,3],[3,4],[8,5],[2,6],[1,7],[6,8],[15,9],[4,10],[5,11],[7,12],[13,13],[0,14],[9,15]]);function BG(t){return RG.get(t.value(Td))}function UG(t,e,i){const[n,s]=t.pair(e);return $G(s??n,i)}function $G(t,e){return t instanceof iO?HG(t.keyframes,e):GG(t,e)}const FG={x:1,y:1},VG={x:0,y:0};function HG(t,e){if(1===t.length)return GG(t[0].value,e);const i=[],n=t.length-1;for(let s=1;s<=n;s++){const n=t[s-1];if(n.offset===t[s].offset||kt(n.value,t[s].value))i.push({t:vG(n.offset),s:ZG(e(n.value)),h:1});else if(n.easing?.func instanceof uE){let t=n.easing.func;n.easing.inverted&&(t=t.inverse),i.push({t:vG(n.offset),s:ZG(e(n.value)),o:{x:t.h1.x,y:t.h1.y},i:{x:t.h2.x,y:t.h2.y}})}else i.push({t:vG(n.offset),s:ZG(e(n.value)),i:FG,o:VG})}return i.push({t:vG(t[n].offset),s:ZG(e(t[n].value)),h:1}),{a:1,k:i}}function GG(t,e){return{a:0,k:e(t)}}function ZG(t){return Nt(t)?t:[t]}const YG=new Map([[0,1],[1,2]]),QG=new Map([[0,1],[1,2],[2,3]]),JG=new Map([[0,1],[1,2],[2,3]]);function*qG(t){const e=YG.get(t.value(Gd));yield*tZ(t,qd,Jd,{ty:"fl",r:e},{ty:"gf",r:e})}function*KG(t,e){if(t.eq(ef,0))return;const i={lc:QG.get(t.value(sf)),lj:JG.get(t.value(nf)),ml:t.value(rf),w:UG(t,ef,It),d:XG(t,e)};yield*tZ(t,tf,Xd,{ty:"st",...i},{ty:"gs",...i})}function XG(t,e){let[i,n]=t.pair(of),[s,r]=t.pair(af);const o=t.value(lf);if(o&&e){const t=e(0)/o;if(n)for(const t of n.keyframes){const i=e(t.offset)/o;for(let e=0;e<t.value.length;e++)t.value[e]*=i}else for(let e=0;e<i.length;e++)i[e]*=t;if(r)for(const t of r.keyframes)t.value*=e(t.offset)/o;else s*=t}const a=[];if(n){const t=n.keyframes[0].value.length;if(!t)return;for(let e=0;e<t;e++)a.push({n:e%2==0?"d":"g",nm:`d${e}`,v:$G(n,(t=>t[e]))})}else{if(!i.length)return;{const t=i.length;for(let e=0;e<t;e++)a.push({n:e%2==0?"d":"g",nm:`d${e}`,v:GG(i,(t=>t[e]))})}}return a.length&&(r||s)&&a.push({n:"o",nm:"o",v:$G(r??s,It)}),a}function*tZ(t,e,i,n,s){if(t.eq(i,0))return;if(t.match(e,(t=>!t.isVisible)))return;let[r,o]=t.pair(e),[a,l]=t.pair(i);if(!o)return r instanceof gi?(a*=r.color.a,l&&sZ(l.keyframes,r.color.a),void(yield{...n,o:$G(l??a,mZ),c:GG(r,gZ)})):void(yield{...s,...oZ(r),o:$G(l??a,mZ)});if(r instanceof gi){let t=r.color.a,e=!1;for(const i of o.keyframes)if(i.value.color.a!==t){e=!0;break}if(e){const t=dZ(i,bO(o.keyframes,(t=>t.color.a)));if(l){const e=[..._O([l??a,t],aG,(([t,e])=>t*e))];l=dZ(Jd,e)}else sZ(t.keyframes,a),l=t;MO(l.keyframes)}return void(yield{...n,c:$G(o,gZ),o:$G(l??a,mZ)})}const c=[],u=o.keyframes;let h,d=u[0].value.type;for(let t=1;t<u.length;t++)u[t].value.type!==d&&(c.push(t),d=u[t].value.type);if(!c.length)return void(yield{...s,...oZ(o),o:$G(l??a,mZ)});let f,p=0;for(h of c){f=(u[h-1].offset+u[h].offset)/2;const t=PO(o.clone(),p,f-.01,0);t.keyframes.length&&nZ(t.keyframes)?(l?yield{...s,...oZ(t),o:$G(iZ(l,p,f),mZ)}:yield{...s,...oZ(t),o:HG(eZ(a,p,f),mZ)},p=f):p=f}if(f=t.end,p>=f)return;const g=PO(o.clone(),p+.01,f);g.keyframes.length&&nZ(g.keyframes)&&(l?yield{...s,...oZ(g),o:$G(iZ(l,p,f),mZ)}:yield{...s,...oZ(g),o:HG(eZ(a,p,f),mZ)})}function eZ(t,e,i){const n=AE(!0),s=[new KE(t,e,n)];return e>0&&s.unshift(new KE(0,0,n)),i<hG&&s.push(new KE(0,i,n)),s}function iZ(t,e,i){const n=AE(!0);return(t=PO(t.clone(),e,i)).keyframes.length||t.keyframes.push(new KE(1,e,n)),e>0&&t.keyframes.unshift(new KE(0,0,n)),i<hG&&t.keyframes.push(new KE(0,t.keyframes.at(-1).offset,n)),t}function nZ(t){for(const e of t)if(e.value.isVisible)return!0;return!1}function sZ(t,e){if(1===e)return t;for(const i of t)i.value*=e;return t}function rZ(t){let e;return e=t instanceof iO?t.keyframes[0].value:t,{p:e.stopColors.length,k:$G(t,fZ)}}function oZ(t){let e;return t instanceof iO?(e=t.keyframes[0].value instanceof Ii,1===t.keyframes.length&&(t=t.keyframes[0].value)):e=t instanceof Ii,e?function(t){const e=[..._O([t],aG,(([t])=>{const e=t.matrix;return e&&!e.isIdentity?[e.transformPoint(t.start),e.transformPoint(t.end)]:[t.start,t.end]}))],i=bO(e,(t=>t[0])),n=bO(e,(t=>t[1]));return{t:1,g:rZ(t),s:HG(MO(i),vZ),e:HG(MO(n),vZ)}}(t):function(t){const e=[..._O([t],aG,(([t])=>{const e=t.matrix;let i,n,s;return t instanceof Ci?(n=t.center,i=t.center.shifted(t.radius,0),s=0):(n=t.end,i=t.start,s=t.start.distanceTo(t.end)/t.endRadius),e&&!e.isIdentity&&(n=e.transformPoint(n),i=e.transformPoint(i)),[n,i,s]}))],i=bO(e,(t=>t[0])),n=bO(e,(t=>t[1])),s=bO(e,(t=>t[2]));MO(s);const r=s.length>1||0!=s[0]?.value,o={t:2,g:rZ(t),s:HG(MO(i),vZ),e:HG(MO(n),vZ),h:void 0,a:void 0};return r&&(o.h=HG(s,mZ),o.a=GG(0,It)),o}(t)}function aZ(t){if(!t.target.isTransformable)return{o:UG(t,Pd,mZ)};const[e,i,n,s,r,o,a,l,c,u,h,d]=uZ(t);return{p:$G(e??i,vZ),r:$G(n??s,It),s:$G(r??o,yZ),sk:$G(a??l,ri),sa:$G(c??u,It),a:$G(h??d,vZ),o:UG(t,Pd,mZ)}}function lZ(t){return function(t){if(!t)return[null,null];let e=null;return t.o&&(e={o:t.o},delete t.o),Object.keys(t).length||(t=null),[t,e]}(aZ(t))}function cZ(t){if(!t)return!0;if(t.o&&(t.o.a||100!==t.o.k))return!1;if(t.r?.a||t.sk?.a||t.sa?.a||t.s?.a||t.a?.a)return!1;const e=new hi;return t.p?.k&&e.translate(t.p.k[0],t.p.k[1]),t.r?.k&&e.rotate(t.r.k),(t.sk?.k||t.sa?.k)&&e.skewAxis(t.sk?.k||0,t.sa?.k||0),t.s?.k&&e.scale(t.s.k[0]/100,t.s.k[1]/100),t.a?.k&&e.translate(-t.a.k[0],-t.a.k[1]),e.isIdentity}function uZ(t){const e=t.value($d);let i=t.value(Ed),n=t.animation(Qd),[s,r]=t.pair(Rd);const[o,a]=t.pair(Bd),[l,c]=t.pair(Ud),[u,h]=t.pair(Od),[d,f]=t.pair(Wd);let p=0;if(n)if(0===e){const t=n.keyframes;MO(t),kO(t,qh)}else{const t=n.keyframes;if(p=-1===e?180:0,1===t.length)p+=t[0].value.angle||0,n=null;else{const e=dZ(Rd,bO(t,(t=>t.angle||0)));r?r=dZ(Rd,[..._O([r,e],aG,(([t,e])=>t+e))]):(r=e,s%=360,s&&r.keyframes.forEach((t=>t.value+=s))),MO(r.keyframes),function(t){t&&kO(t.keyframes,t.animator.valueHandler)}(r);const i=bO(t,(t=>ce.fromObject(t)));MO(i),kO(i,qh),t.splice(0),t.push(...i)}}return p%=360,p&&(s+=p,r&&r.keyframes.forEach((t=>t.value+=p))),[n,i,r,s%360,f,d,a,o%360,c,l%360,h,u]}function hZ(t,e){if(!t.target.isTransformable||!e||!e.isAnimated)return null;const i=0!==t.target.orientation,n=function(t,e,i=!0){return[..._O([t],aG,(([e])=>{const n=e instanceof Di?e.point:e;return i?new le(n.x,n.y,t.lastAngle):n}))]}(e.clone(),0,i);return t.properties.set(Ed,ce.fromObject(n[0].value)),dZ(Qd,n)}function dZ(t,e){return rO(t.id).createAnimation(e)}function fZ(t){const e=[],i=[];let n=!1;for(const s of t.stopColors)e.push(s.offset,...pZ(s.color)),i.push(s.offset,s.color.a),1!==s.color.a&&(n=!0);return n&&e.push(...i),e}function pZ(t){return[t.r/255,t.g/255,t.b/255]}function gZ(t){return pZ(t.color)}function mZ(t){return 100*t}function vZ(t){return[t.x,t.y]}function yZ(t){return[100*t.x,100*t.y]}const xZ={startIn:"documents",types:[{description:"SVG files",accept:{"image/svg+xml":[".svg"]}}]},bZ=[{title:"Nothing",value:0},{title:"Play",value:1},{title:"Pause",value:2},{title:"Stop",value:3},{title:"Reverse",value:4},{title:"Restart",value:5},{title:"Toggle play/pause",value:6}],wZ=[{title:"when composition is visible on page",value:2},{title:"on page load, even if composition is not visible",value:1},{title:"using mouse interaction",value:0}],MZ=[{title:"on load",value:0},{title:"on mouse over",value:1},{title:"programmatically",value:2}],SZ=[{title:"nothing",value:0},{title:"pause",value:1},{title:"reverse",value:2}],kZ=[{title:"freeze",value:!0},{title:"revert",value:!1}],_Z=[{id:"svg:smil",title:"SMIL",value:2,deny:1092,extension:"svg",file:xZ},{id:"svg:css",title:"CSS",value:1,deny:1024,extension:"svg",file:xZ},{id:"svg:js",title:"JavaScript player",value:0,deny:1024,extension:"svg",file:xZ}],IZ={...lM,min:1,max:2e4},CZ=[{title:"Best",value:1},{title:"High",value:.75},{title:"Medium",value:.5},{title:"Low",value:.25}],LZ=[{title:"Auto",value:0},{title:"Every half-second",value:1},{title:"Every second",value:2},{title:"Custom",value:3}],NZ=[{id:"video:webm",title:"WebM",value:1,deny:8,codecs:[{title:"VP9",value:2},{title:"VP8",value:1}],extension:"webm",file:{startIn:"videos",types:[{description:"WebM files",accept:{"video/webm":[".webm"]}}]}},{id:"video:mp4",title:"MP4",value:0,deny:9,codecs:[{title:"AVC/H.264",value:100}],extension:"mp4",file:{startIn:"videos",types:[{description:"MP4 files",accept:{"video/mp4":[".mp4"]}}]}}],jZ=[{id:"lottie:json",title:"JSON",value:0,deny:514,extension:"json",file:{startIn:"documents",types:[{description:"JSON files",accept:{"application/json":[".json"]}},{description:"Text files",accept:{"text/plain":[".txt"]}}]}},{id:"lottie:dotlottie",title:"dotLottie",value:1,deny:0,extension:"lottie",file:{startIn:"documents",types:[{description:"dotLottie files",accept:{"application/zip":[".lottie",".zip"]}}]}}],zZ=new Map([["node.compositing","Compositing"],["node.transform","Transform"],["vector.fill","Fill"],["vector.stroke","Stroke"]]);function PZ(t,e,i){const n=new Set,s=new Map,r=new Map;for(const i of e){if(!lO(i))continue;const e=wd(i);if(!e)continue;const o=i.type,a=t.getEntry(i);for(const t of e){const e=oO(t.id,i);e&&!n.has(e)&&(a?.hasAnimation(e.id)||(n.add(e),"element"===e.group||"filter"===e.group?(s.has(o)||s.set(o,[]),s.get(o).push(e)):(r.has(e.group)||r.set(e.group,[]),r.get(e.group).push(e))))}}const o=[];if(s.size>0)for(const[t,e]of s.entries())o.push({title:dC(t),children:TZ(e,i)});if(r.size>0){o.length>0&&o.push(null);for(const[t,e]of r.entries())o.push({title:zZ.get(t)||"Other",children:TZ(e,i)});o.length&&null===o[o.length-1]&&o.pop()}return o}function TZ(t,e){t.length>1&&t.sort(((t,e)=>t.title.localeCompare(e.title)));const i=[];for(const n of t)i.push({title:n.title,icon:n.icon,value:n,action:e});return i}class AZ{#ui=0;#Gm=30;#Zm=90;#j=0;#X=0;#Ym=0;#Qm=0;get zoomFactor(){return this.#j/this.contentWidth}setZoomFactor(t){let e=1;if(t){const i=this.#j,s=this.#Ym+this.#Qm;e=((i/t-s)/(i-s)-1)/this.#Jm,e=n(e)}return this.#ui!==e&&(this.#ui=e,this.invalidate(),!0)}setMinMax(t,e){return this.#Gm=t,this.#Zm=e,this}setSize(t,e){return this.#j=t,this.#X=e,this}setPadding(t,e){return this.#Ym=t,this.#Qm=e,this}getX(t=0){return this.#Ym-t}get contentWidth(){return this.#qm+this.#Ym+this.#Qm}get#Km(){return QO?.fps||1}get#Xm(){return QO?QO.duration*QO.fps/1e3:0}get#Jm(){return this.#Xm*this.#Zm/this.#tv-1}get#ev(){return 1+this.#ui*this.#Jm}get#tv(){return this.#j-this.#Ym-this.#Qm}get#qm(){return this.#tv*this.#ev}#iv=new Map;get#nv(){const t=this.#Km,e=this.#iv;if(!e.has(t)){const i=[...O(t,!0)];return e.set(t,i),i}return e.get(t)}#sv=0;#rv=0;#ov=0;#av=!1;#lv=[1,60,3600];invalidate(){const t=this.#Km,e=this.#qm,i=this.#Xm,n=this.#nv;for(const s of this.#lv)for(const r of n){const n=i/(r*s),o=e/n;if(o>=this.#Gm)return this.#sv=n,this.#rv=o,this.#ov=r*s*1e3/t,void(this.#av=(1===s?r:t)%2==0)}}get timeScale(){return this.#rv/this.#ov}get frameScale(){return 1e3*this.timeScale/this.#Km}getTimeAtX(t,e){return(t+e-this.#Ym)/this.timeScale}getXAtTime(t,e){return t*this.timeScale-e+this.#Ym}roundToFrame(t,e){return P(t,e?this.#ov*(this.#av?.5:1):1e3/this.#Km)}draw(t,e=0,i=0,n=15){const s=this.#rv;if(!s)return;const r=this.#sv,o=this.#ov,a=s/o,l=this.#av,c=l&&s/2>=this.#Gm,u=this.#Km,h=Math.floor(e/s),d=Math.min(r,Math.ceil((e+this.#Ym+this.#j)/s)),f=this.#X,p=f-n,g=f-n/2;t.textRendering="optimizeLegibility",t.textAlign="center",t.textBaseline="bottom";const m=new Path2D;i+=this.#Ym-e+.5;const v=1e3/u;for(let e=h;e<=d;e++){const n=i+a*P(e*o,v);if(t.fillText(z(e*o,u),n,p),m.moveTo(n,p),m.lineTo(n,f),l){const n=i+a*P((e+.5)*o,v);c&&t.fillText(z((e+.5)*o,u),n,g),m.moveTo(n,g),m.lineTo(n,f)}}t.stroke(m)}}function DZ(t,e){const i=[];if(ch())return i;if(e)for(const[e,n]of t)dh(e)&&i.push(n);else for(const e of rh())t.has(e)&&i.push(t.get(e));return i}function EZ(t,e,i,n){if(0===e)return!1;let s=!1;for(const r of i)if(r.hasInOut&&(r.in+=e,r.out+=e,r.evalVisibility(t),s=!0),!n)for(const i of r.animations){for(const t of i.keyframes)t.offset+=e;i.disabled||r.evalAnimation(i,t),s=!0}return s}function OZ(t,e,i,n){for(const s of e){let e;if(s.isFilter){if(!i)continue;e=s.element}else e=s;!e||!e.isElement||t.has(e)||n&&!Hu(e)||t.add(e)}}function WZ(t,e,i,n,s){for(const r of i){let i;if(r.isFilter){if(!n)continue;i=r.element,i?.isLayer&&e.add(i)}else i=r;if(!i||!i.isElement)continue;const o=$Z(i);!o||s&&!$u(o)||(t.has(o)||t.set(o,new Set),t.get(o).add(i))}}function RZ(t,e,i,n,s,r){if(!n.showFilters||!t||!t.hasChildren)return s;for(const o of t.children(n.reverse)){const t=e.get(o)||null,a=QW(o);(t||n.showNotAnimatedFilters||n.showSelectedAndNotAnimated&&hh(o))&&(s=BZ(o,t,null,a,i,s,r),a&&null!=t&&(s=UZ(t,i,n,s,r+1)))}return s}function BZ(t,e,i,n,s,r,o){return s.items.push({top:r,left:o,type:1,target:t,parent:i,entry:e,open:n}),e&&(s.maxBarOffset=Math.max(s.maxBarOffset,e.in||0,e.out||0)),r+1}function UZ(t,e,i,n,s){if(!i.showProperties||0===t.animations.length)return n;const r=t.target;for(const i of t.animations)e.items.push({top:n,left:s,target:r,entry:t,type:0,animation:i}),n++,e.maxKeyframeOffset=Math.max(e.maxKeyframeOffset,i.maxOffset);return n}function $Z(t){let e=t.parent;for(;e&&!e.isLayer;)e=e.parent;return e||null}function FZ(t,e,i,n){let s=null;function r(t){for(const o of t){let t=!o.hasChildren;const a=e.has(o);if(a){if(e.delete(o),!i(o,s)&&!t){t=!0;for(const t of e)o.contains(t)&&e.delete(t)}if(0===e.size)return!1}if(!t)if(a){const t=s;if(s=o,!r(o.children(n)))return!1;s=t}else if(!r(o.children(n)))return!1}return!0}t.isDocument?r(Gu(n)):r(t.children(n))}const VZ=new Map([[5,"Enable/Disable animator"],[6,"Add animator"],[7,"Toggle visibility bar"],[8,"Add keyframe"]]),HZ=new Map([[2,"ew-resize"],[3,"ew-resize"],[4,"pointer"],[6,"pointer"],[7,"pointer"],[5,"pointer"],[8,"pointer"],[12,"ew-resize"],[13,"ew-resize"]]),GZ=new Map([[0,0],[1,1],[2,1],[3,1],[4,2],[5,2],[6,2],[7,2],[8,2],[9,2],[10,2],[11,3],[12,3],[13,3],[14,3],[15,3],[16,3]]),ZZ=new Set([0,4,5,6,7,8,9,10]),YZ={hasSelectedKeyframes:!1,isTimeOverKeyframe:!1};class QZ extends sb{constructor(){super(...arguments),this.dimensions={propertiesPanelWidth:280,propertiesPanelMargin:8,borderSize:1,rulerHeight:48,rulerGradationSize:10,unit:10,itemHeight:32,indentSize:16,iconSize:18,iconMargin:4,smallIconScale:.75,propertyTextMargin:1,textMargin:8,textBaselineShift:2,barHeight:24,barBorderRadius:4,easingHeight:16,easingBorderRadius:4,keyframeRadius:5,keyframeBorder:1,keyframeLine:1,playHeadHeight:10,playHeadWidth:10,playRangeHeight:25,minFrameHighlight:4,minFrameSize:40,maxFrameSize:90,barTimeMargin:4,zoomBarHandle:8},this.fonts={ruler:"12px -expressive-sans",easing:"12px -expressive-sans",objects:"bold 14px -expressive-sans",properties:"14px -expressive-sans"}}updateInternalValues(){super.updateInternalValues(),this.text=this.getColor("text"),this.background=this.getColor("background"),this.backgroundSelected=this.getColor("background-selected"),this.separator=this.getColor("separator-color"),this.playHeadThumb=this.getColor("playhead-thumb"),this.playHeadLine=this.getColor("playhead-line"),this.playRange=this.getColor("play-range"),this.propertyText=this.getColor("property-text"),this.propertyTextSelected=this.getColor("property-text-selected"),this.barBackground=this.getColor("visibility-bar-track-face"),this.bar=this.getColor("visibility-bar-face"),this.barSelected=this.getColor("visibility-bar-face-selected"),this.barText=this.getColor("visibility-bar-text"),this.barTextSelected=this.getColor("visibility-bar-text-selected"),this.keyframe=this.getColor("keyframe-face"),this.keyframeSelected=this.getColor("keyframe-face-selected"),this.keyframeBorder=this.getColor("keyframe-border"),this.keyframeBorderSelected=this.getColor("keyframe-border-selected"),this.keyframeLine=this.getColor("keyframe-track-line"),this.keyframeSelectionRect=this.getColor("keyframe-selection-rect"),this.easing=this.getColor("easing-face"),this.easingSelected=this.getColor("easing-face-selected"),this.easingText=this.getColor("easing-text"),this.easingTextSelected=this.getColor("easing-text-selected")}}class JZ extends p{constructor(){super(1)}get shouldDraw(){return!1}}class qZ extends rb{#cv;#uv;#kl;#Il;#hv;#Sl;constructor(){const t=new p,e=new JZ;super(t,e),this.#cv=new AZ,this.options={reverse:!0,group:!0,showProperties:!0,showFilters:!0,showOnlySelected:!1,showSelectedAndNotAnimated:!0,showNotAnimatedFilters:!1,showBarDuration:!0},this.#kl={type:0,panel:0,item:null,keyframe:null},this.autoScroll=!0,this.autoScrollOnPlay=!0,this.#dv=()=>this.refresh(!0),this.#fv=t=>{this.autoScroll=t,this.#pv()},this.#gv=t=>{this.autoScrollOnPlay=t},this.#mv=()=>{this.options.showSelectedAndNotAnimated||this.options.showOnlySelected?this.refresh(!0):this.renderFrame(),this.#pv()},this.#vv=()=>{uW&&this.autoScrollOnPlay&&this.scrollToPlayhead(cW,!0)||this.renderFrame(uW)},this.#yv=()=>{this.renderFrame()},this.#xv=[0,0],this.#bv=()=>{this.#cv.invalidate();const t=this.#xv;null!=t[0]&&(QO?.duration<t[0]||QO?.fps!==t[1])&&(this.#cv.setZoomFactor(1)&&this.#wv(),this.#hv.scrollTo(0)),t[0]=QO?.duration||0,t[1]=QO?.fps||0,this.refresh(!0)},this.#Mv=t=>{t||this.renderFrame()},this.#Sv=()=>{this.renderFrame()},this.#kv=!1,this.#_v=!1,this.#Iv=!1,this.#gn=null,this.#bn=null,this.#yn=0,this.#Cv=null,this.#Lv=t=>{xW(this.#cv.roundToFrame(this.#Nv(this.getMouseX(t)),t.shiftKey),!0)},this.#jv=new Map,this.#Nl=void 0,this.#Il=t,this.#hv=e;const i=this.theme.dimensions,n=new Path2D;n.moveTo(0,i.playHeadHeight),n.lineTo(i.playHeadWidth/2,0),n.lineTo(-i.playHeadWidth/2,0),n.closePath(),this.#uv=n,this.dblClickMaxDiff=-1,this.#Sl=new kC([[eo,this.#bv],[io,this.#Sv],[Vc,this.#dv],[Yc,this.#dv],[Qc,this.#mv],[$O,this.#vv],[UO,this.#yv],[GO,this.#dv],[BO,this.#bv],[HO,this.#bv],[VO,this.#dv],[ZO,this.#Mv],[ZR,this.#fv],[YR,this.#gv]])}createTheme(t){return new QZ(t)}onThemeChanged(){super.onThemeChanged();const t=this.theme,e=t.dimensions;this.#Il.updateOptions({sizeDelta:-e.rulerHeight}),this.#hv.updateOptions({margin:4,thickness:1.5*t.scrollSize,sizeDelta:-e.propertiesPanelWidth,paddingStart:e.keyframeRadius+e.zoomBarHandle,paddingEnd:e.keyframeRadius+e.zoomBarHandle,roundness:0}),this.#cv.setMinMax(e.minFrameSize,e.maxFrameSize).setPadding(e.keyframeRadius,e.keyframeRadius+t.scrollSize).invalidate()}onSizeChanged(){this.#cv.setSize(this.size.content.width-this.theme.dimensions.propertiesPanelWidth,this.theme.dimensions.rulerHeight).invalidate(),super.onSizeChanged()}get contentHeight(){return(this.info?.items?.length||0)*this.lineHeight}get contentWidth(){return this.#cv.contentWidth}#dv;#fv;#gv;#mv;#vv;#yv;#xv;#bv;#Mv;#Sv;activate(){this.#Sl.on(),this.#cv.invalidate(),super.activate()}deactivate(){super.deactivate(),this.#Sl.off()}#kv;get collapsed(){return this.#kv}set collapsed(t){t!==this.#kv&&(this.#kv=t,this.refresh(!0))}onWheel(t){if(t.ctrlKey||t.metaKey){const e=Math.sign(t.deltaY);if(!e)return!1;const i=this.#cv,s=this.#hv,r=n(this.getMouseX(t)-s.options.paddingStart+s.options.sizeDelta,0,s.scrollableClientSize),o=(s.offset+r)/i.timeScale,a=(1+e/10)*i.zoomFactor;return!!i.setZoomFactor(a)&&(this.updateScrollbarSize(),s.scrollTo(o*i.timeScale-r),this.#wv(),!0)}return super.onWheel(t)}setZoom(t,e){this.#cv.setZoomFactor(1-t)&&(this.updateScrollbarSize(),e?.(),this.renderFrame())}getZoomScroller(t=0){const e=this.#hv,i=this.#cv,n=t*e.scrollableClientSize,s=(e.offset+n)/i.timeScale;return()=>e.scrollTo(s*i.timeScale-n)}scrollToPlayhead(t,e,i){const n=this.#hv;let s=(t??cW)*this.#cv.timeScale;const r=n.offset;return!(e&&s>=r&&s<=r+(this.size.content.width-this.theme.dimensions.propertiesPanelWidth)||(i&&(s+=this.#cv.getX(),s-=(this.size.content.width-this.theme.dimensions.propertiesPanelWidth)/2),!n.scrollTo(s)||(this.renderFrame(uW),0)))}scrollIntoView(t){if(!t)return!1;if(!lO(t))return!1;!function(t){JW(YW(),t,void 0)&&ZW()}(t);const e=this.info;if(!e)return!1;const i=e.items.findIndex((e=>e.target===t));return-1!==i&&!!this.#Il.scrollLineInView(i)&&(this.renderFrame(),!0)}#_v;#pv(){this.collapsed||!this.autoScroll||this.#_v||ch()||this.scrollIntoView(oh()),this.#_v=!1}#zl(t,e=null,i=null){const n=this.#kl;if(n.type===t&&n.item===e&&n.keyframe===i)return!1;const s=ZZ.has(n.type)||ZZ.has(t);return n.type=t,n.panel=GZ.get(t),n.item=e,n.keyframe=i,this.setCursor(HZ.get(t)??"default"),this.setTitle(VZ.has(t)?VZ.get(t):""),s}updateHoverInfo(){const t=this.mousePosition,e=this.theme.dimensions,i=this.size;if(uW||t.y<0||t.y>=i.content.height||t.x<=0||t.x>=i.content.width)return this.clearHoverInfo();const n=this.#cv,s=this.#Il.offset,r=this.#hv.offset,o=t.x<=e.propertiesPanelWidth,a=e.propertiesPanelWidth,l=this.mousePosition.x-a;if(t.y<=e.rulerHeight){if(o)return this.clearHoverInfo();const i=this.#hv.bounds;if(t.y<=i.bottom&&t.y>=i.top){if(t.x<=i.left&&i.left-t.x<=e.zoomBarHandle)return this.#zl(2);if(t.x>=i.right&&t.x-i.right<=e.zoomBarHandle)return this.#zl(3)}return this.#zl(1)}if(o&&(t.x<=e.propertiesPanelMargin||t.x>=a-e.propertiesPanelMargin))return this.clearHoverInfo();const c=this.info?.items;if(!c?.length)return this.clearHoverInfo();const u=t.y-e.rulerHeight+s,h=Math.floor(u/e.itemHeight);if(h>=c.length)return o?this.clearHoverInfo():this.#zl(16);const d=c[h],f=t.x,p=u-h*e.itemHeight,g=e.itemHeight/2;if(o){let t=e.propertiesPanelMargin+d.left*e.indentSize,i=e.propertiesPanelWidth-e.propertiesPanelMargin;const n=e.iconMargin+e.smallIconScale*e.iconSize/2,s=Math.SQRT2*e.smallIconScale*e.iconSize/2;return 0===d.type?!d.animation.disabled&&KZ(f,p,i-n,g,s)?this.#zl(8,d):KZ(f,p,t+2*n,g,s)?this.#zl(5,d):this.#zl(10,d):(i-=n,KZ(f,p,i,g,s)?this.#zl(7,d):(i-=2*n,KZ(f,p,i,g,s)?this.#zl(6,d):KZ(f,p,t+e.iconMargin+e.iconSize/2,g,Math.SQRT2*e.iconSize/2)?this.#zl(4,d):this.#zl(9,d)))}if(!d.entry)return this.#zl(16);if(1===d.type){if(!d.entry.hasInOut)return this.#zl(16);const t=n.getXAtTime(d.entry.in,r),i=n.getXAtTime(d.entry.out,r);if(l<t||l>i)return this.#zl(16);if(hh(d.target)){if(l>=i-e.barBorderRadius)return this.#zl(13,d);if(l<=t+e.barBorderRadius)return this.#zl(12,d)}return this.#zl(11,d)}const m=d.animation;if(m.disabled||!m.hasKeyframes||p<g-e.easingHeight/2||p>g+e.easingHeight/2)return this.#zl(16);if(l<n.getXAtTime(m.minOffset,r)+.5-e.keyframeRadius||l>n.getXAtTime(m.maxOffset,r)+.5+e.keyframeRadius)return this.#zl(16);const v=m.keyframes,y=v.length-1;let x=n.getXAtTime(v[y].offset,r)+.5;if(KZ(l,p,x,g,e.keyframeRadius))return this.#zl(14,d,v[y]);for(let t=y-1;t>=0;t--){if(l>x-e.keyframeRadius)return this.#zl(16);if(x=n.getXAtTime(v[t].offset,r)+.5,KZ(l,p,x,g,e.keyframeRadius))return this.#zl(14,d,v[t]);if(l>x)return this.#zl(15,d,v[t])}return this.#zl(16)}clearHoverInfo(){return this.#zl(0,null,null)}handleDblClick(t){}#Iv;#zv(){this.#Iv||(this.#Iv=!0,aa())}#gn;#bn;handleMouseMove(t){this.#gn?.(t)}handleMouseUp(t){this.#bn?.(t),this.#gn=this.#bn=null,this.#Iv&&(this.#Iv=!1,la()),this.#_v=!1}#yn;handleMouseDown(t){if(uW)return;const e=this.#kl;switch(e.type){case 0:this.#Pv();break;case 1:t.ctrlKey||t.metaKey?this.#Tv(t):(this.#gn=this.#Lv,this.#gn(t));break;case 2:this.#Av(t,!1);break;case 3:this.#Av(t,!0);break;case 4:this.#pr(e.item);break;case 9:this.#Dv(t,e.item);break;case 7:this.#Ev(e.item);break;case 6:this.#Ov(e.item,{x:t.clientX,y:t.clientY});break;case 5:this.#Wv(e.item);break;case 8:this.#Rv(e.item);break;case 10:this.#zv(),this.#Bv(t,e.item);break;case 11:this.#zv(),this.#Uv(t,e.item);break;case 12:this.#zv(),this.#$v(t,e.item,!1);break;case 13:this.#zv(),this.#$v(t,e.item,!0);break;case 15:case 14:this.#zv(),this.#Fv(t,e.item,e.keyframe,15===e.type,t.timeStamp-this.#yn<250);break;case 16:this.#zv(),this.#Vv(t)}this.#yn=t.timeStamp}#Hv(t,e){const i=this.#Nv(t)-e;let n=0;const s=(t,s)=>{const r=this.#cv.roundToFrame(this.#Nv(t)-i,s)-e;return r===n?null:(n=r,r)};return s.sameAsStart=()=>0===n,s}#Gv(t,e){const i=e(),n=this.#Nv(t)-i,s=(t,i)=>this.#cv.roundToFrame(this.#Nv(t)-n,i)-e();return s.sameAsStart=()=>i===e(),s}#Pv(){tW()?Mh():eW()}#Cv;#Vv(t){const e=this.theme.dimensions,i=t=>Math.max(t-this.size.bounds.y-e.rulerHeight+this.#Il.offset,0),n=this.#Nv(this.getMouseX(t),!1),s=i(t.clientY);this.#gn=t=>{const e=this.#Nv(this.getMouseX(t),!1),r=i(t.clientY),o=Ve.fromLTRB(n,s,e,r);this.#Cv&&this.#Cv.equals(o)||(this.#Cv=o.isVisible?o:null,this.renderFrame())},this.#bn=t=>{const e=this.#Cv;if(this.#Cv=null,!e||!e.isVisible)return void this.#Pv();const i=t.ctrlKey||t.metaKey;let n=!i&&eW();const s=this.info?.items;if(s?.length){const t=this.theme.dimensions.itemHeight;let r=Math.round(e.top/t);if(r<s.length){const o=new Set,a=Math.min(Math.round(e.bottom/t-1),s.length-1);for(;r<=a;){const t=s[r++];if(0!==t.type||t.animation.disabled)continue;let a=!1;for(const s of t.animation.keyframes)s.offset>=e.left&&s.offset<=e.right&&(i?(n=!0,iW(s)?nW(s):(aW(s,!0),a=!0)):aW(s,!0)&&(a=n=!0));a&&o.add(t.target)}this.#_v=this.#Zv(o)}}n||this.renderFrame()}}#Zv(t){if(t instanceof Set||(t=new Set([t])),!t.size)return!1;if(ch()){for(const e of t)ph(e,!0);return!0}for(const e of t)!hh(e)&&fh(e)||t.delete(e);return!!t.size&&gh([...t])}#Fv(t,e,i,n,s){const r=n?XE(i,e.animation.keyframes):null;let o=!1,a=!1;if(t.ctrlKey||t.metaKey){if(iW(i)&&(!r||iW(r))){if(nW(i),r){const t=XE(r,e.animation.keyframes);t&&iW(t)||nW(r)}return}aW(i,!0),r&&aW(r,!0)}else iW(i)?r&&!iW(r)?oW([i,r],!1):o=!0:(a=!0,ph(e.target,!1),r?oW([i,r],!1):aW(i,!1));if(s&&0!==WebGLBuffAddr0x453a5.valueOf())return this.#gn=this.#bn=null,void this.canvas.dispatchEvent(new CustomEvent("es-easing",{composed:!0,bubbles:!0,detail:{x:t.clientX,y:t.clientY}}));const l=this.#Gv(this.getMouseX(t),(()=>i.offset));let c=null,u=null;const h=new Map;this.#gn=t=>{if(null==u){u=new Set;const t=oh();aR(((e,i,n)=>{h.has(e)||h.set(e,[]),h.get(e).push(i);for(const t of n)u.add(t);null===c&&e.target===t&&(c=!0)}),null,!1)}const e=l(this.getMouseX(t),t.shiftKey);if(0===e)return;for(const t of u)t.offset+=e;const i=cW;let n=!1;for(const[t,e]of h)for(const s of e)s.sortKeyframes(u),t.evalAnimation(s,i)&&(n=!0);n&&Cd(Up),this.renderFrame()},this.#bn=()=>{if(null!=u){if(!l.sameAsStart()){for(const t of h.values())for(const e of t)e.fixKeyframes(u);ra()}u.clear(),h.clear(),o=!1}this.#_v=a||this.#Zv(e.target),o&&(r?oW([i,r],!1):aW(i,!1))}}#$v(t,e,i){let n=null;const s=e.entry.in,r=e.entry.out,o=i?r:s,a=this.#Hv(this.getMouseX(t),o);this.#gn=t=>{n??=function(t){const e=new Map;if(ch())return e;for(const i of rh()){const n=t.get(i);n&&n.hasInOut&&e.set(n,{in:n.in,out:n.out})}return e}(QO.map);const e=a(this.getMouseX(t),t.shiftKey);if(null!==e){for(const[t,s]of n)i?t.setInOut(s.in,s.out+e):t.setInOut(s.in+e,s.out),t.evalVisibility(cW);this.renderFrame()}},this.#bn=()=>{s===e.entry.in&&r===e.entry.out||ra()}}#Uv(t,e){let i=!1;t.ctrlKey||t.metaKey?wh(e.target,!0):hh(e.target)?(Sh(e.target),i=lh()>1):ph(e.target,!1);let n=null,s=null;const r=this.#Gv(this.getMouseX(t),(()=>e.entry.in));this.#gn=t=>{null==n&&(n=DZ(QO.map,!0),s=DZ(QO.map,!1));const e=r(this.getMouseX(t),t.shiftKey);if(0===e)return;const i=cW;(t.altKey?EZ(i,e,s,!0):EZ(i,e,n,!1))&&this.renderFrame()},this.#bn=()=>{null!=n?r.sameAsStart()||ra():i&&ph(oh(),!1)}}#Ev(t){t.entry&&t.entry.hasInOut?WR(t.target):OR(t.target)}#Ov(t,e){const i=PZ(QO,[t.target],(e=>ER(t.target,e.value,cW)));i.length?setTimeout((()=>ky(i,e,"bottom-left",!1)),100):Sy("No more animators available","info")}#pr(t){t&&function(t){const e=YW();e.has(t)?e.delete(t):e.add(t),ZW()}(t.target.id)}#Dv(t,e){t.ctrlKey||t.metaKey?wh(e.target,!0):t.shiftKey&&!ch()?mh(oh(),e.target):ph(e.target,!1)}#Wv(t){t&&t.entry&&t.animation&&(RR(t.target,t.animation.animator.id),this.renderFrame())}#Rv(t){DR(t.entry,t.animation,cW,!0)}#Bv(t,e){if(e.animation.disabled)return;const i=t.ctrlKey||t.metaKey;if(hh(e.target)?Sh(e.target):ph(e.target,i),t.altKey||t.shiftKey){const i=t.altKey;eW();const n=e.animation.animator;for(const t of this.info.items)0!==t.type||t.animation.animator!==n||t.animation.disabled||i&&!hh(t.target)||oW(t.animation.keyframes,!0)}else i||eW(),oW(e.animation.keyframes,!0)}#Tv(t){const e=this.#cv.roundToFrame(this.#Nv(this.getMouseX(t)),t.shiftKey);bW(e,e),this.renderFrame(),this.#gn=t=>{const i=this.#cv.roundToFrame(this.#Nv(this.getMouseX(t)),t.shiftKey);bW(e,i),this.renderFrame()},this.#bn=()=>{pW[0]===pW[1]?wW():(cW<pW[0]||cW>pW[1])&&xW(pW[0],!1)}}#Av(t,e){const i=this.#cv,s=t.clientX,r=this.#hv,o=r.scrollableClientSize,a=r.currentBarSize,l=e?0:o,c=(r.offset+l)/i.timeScale;this.#gn=t=>{const u=e?t.clientX-s:s-t.clientX;if(!u)return;const h=n(a+u,0,o)/o;i.setZoomFactor(h)&&(this.updateScrollbarSize(),r.scrollTo(c*i.timeScale-l),this.renderFrame(),this.#wv())}}#wv(){this.canvas.dispatchEvent(new CustomEvent("es-zoom",{bubbles:!0,cancelable:!0,detail:1-this.#cv.zoomFactor}))}#Lv;#Nv(t,e=!0){const i=this.#cv.getTimeAtX(t-this.theme.dimensions.propertiesPanelWidth,this.#hv.offset);return e?n(i,0,QO.duration):i}render(t,e,i){const n=this.theme,s=n.dimensions,r=this.#Il.offset,o=this.#hv.offset;t.fillStyle=n.background,t.fillRect(0,0,e,i);const a=s.propertiesPanelWidth,l=e-a,c=this.#cv.timeScale,u=this.#cv.getX(o),h=this.#kv;if(!h){const e=this.info?.items,o=e?.length||0,h=Math.trunc(r/s.itemHeight),d=Math.min(h+Math.ceil(i/s.itemHeight),o-1),f=this.#kl,p=QO.fps;if(h<o&&d>=h){const i=(s.itemHeight-s.barHeight)/2,o=s.itemHeight/2;t.translate(0,-r);for(let r=h;r<=d;r++){const h=e[r],d=h===f.item;t.save(),t.translate(0,s.rulerHeight+s.itemHeight*h.top);const g=hh(h.target);if(0===h.type)t.lineWidth=s.keyframeLine,t.strokeStyle=n.keyframeLine,t.beginPath(),t.moveTo(a,o-.5),t.lineTo(a+l,o-.5),t.stroke(),t.translate(a+.5,0),YZ.hasSelectedKeyframes=YZ.isTimeOverKeyframe=!1,this.#Yv(t,h.animation,c,u,l),t.translate(-a-.5,0),t.fillStyle=g?n.backgroundSelected:n.background,t.fillRect(0,0,a,s.itemHeight),this.#Qv(t,h,a,d&&2===f.panel,YZ.hasSelectedKeyframes,YZ.isTimeOverKeyframe&&!uW);else{if(t.fillStyle=n.barBackground,t.fillRect(a,i,l,s.barHeight),h.entry?.hasInOut){const e=u+h.entry.in*c,r=u+h.entry.out*c;r>0&&e<l&&(t.fillStyle=g?n.barSelected:n.bar,t.beginPath(),t.roundRect(a+e-.5,i,r-e+1,s.barHeight,s.barBorderRadius),t.fill(),this.options.showBarDuration&&this.#Jv(t,h.entry,g,a,l,e,r,i+s.barHeight/2+1,p))}t.fillStyle=g?n.backgroundSelected:n.background,t.fillRect(0,0,a,s.itemHeight),this.#qv(t,h,a,d&&2===f.panel)}t.restore()}t.translate(0,r)}if(this.#Cv){const e=this.#Cv;let i=e.width*c,o=u+e.x*c;o<0&&(i+=o,o=0),i>0&&(t.fillStyle=n.keyframeSelectionRect,t.globalAlpha=.5,t.fillRect(s.propertiesPanelWidth+o,s.rulerHeight+e.y-r,i,e.height),t.globalAlpha=1)}t.fillStyle=n.background,t.fillRect(s.propertiesPanelWidth,0,l,s.rulerHeight)}if(t.save(),gW){const e=pW[0]*c,i=pW[1]*c;t.globalAlpha=.5,t.fillStyle=n.playRange,t.fillRect(a+u+e+.5,s.rulerHeight-s.playRangeHeight,i-e,s.playRangeHeight),t.globalAlpha=1}t.fillStyle=n.text,t.strokeStyle=n.text,t.lineWidth=1,t.font=n.fonts.ruler,this.#cv.draw(t,o,a,s.rulerGradationSize),t.restore(),t.fillStyle=n.playHeadThumb;const d=this.#hv.bounds;t.beginPath(),t.roundRect(d.left-s.zoomBarHandle,d.top,d.width+2*s.zoomBarHandle,d.height,n.scrollRoundness*d.height),t.fill();const f=u+cW*c,p=a+f+.5;if(!uW){let e=this.#cv.frameScale;if(e>=s.minFrameHighlight&&f<=l&&f+e>=0){t.globalCompositeOperation="luminosity",t.globalAlpha=.1,t.fillStyle=n.playHeadLine;let r=f;r<0&&(e+=r,r=0),t.fillRect(a+r,s.rulerHeight-1,e,i),t.globalAlpha=1,t.globalCompositeOperation="source-over"}}f>=0&&f<=l&&(t.strokeStyle=n.playHeadLine,t.lineWidth=1,t.beginPath(),t.moveTo(p,s.rulerHeight-1),t.lineTo(p,i),t.stroke()),f>-s.playHeadWidth&&f<l+s.playHeadWidth&&(t.save(),t.fillStyle=n.playHeadThumb,t.translate(p,s.rulerHeight-s.playHeadHeight-s.borderSize/2),t.fill(this.#uv),t.restore()),t.fillStyle=n.background,t.fillRect(0,0,s.propertiesPanelWidth,s.rulerHeight),t.strokeStyle=n.separator,t.lineWidth=s.borderSize;const g=s.borderSize/2;t.beginPath(),h||(t.moveTo(0,s.rulerHeight-g),t.lineTo(e,s.rulerHeight-g)),t.moveTo(s.propertiesPanelWidth-g,0),t.lineTo(s.propertiesPanelWidth-g,i),t.stroke()}#qv(t,e,i,n){const s=this.theme,r=s.dimensions,o=r.itemHeight/2,a=r.iconMargin+r.iconSize/2;let l=i-r.propertiesPanelMargin,c=r.propertiesPanelMargin+e.left*r.indentSize;t.fillStyle=this.theme.text;const u=r.iconMargin+r.smallIconScale*r.iconSize/2;(e.entry?.hasInOut||n)&&(l-=u,this.renderIcon(t,"expr:visibility-bar",r.iconSize,l,o,1,r.smallIconScale),l-=u),n&&(l-=u,this.renderIcon(t,"workflow:Add",r.iconSize,l,o,1,r.smallIconScale),l-=u),c+=a,this.renderIcon(t,e.open?"workflow:ChevronDown":"workflow:ChevronRight",r.iconSize,c,o),c+=a,c+=a,this.renderIcon(t,gC(e.target)||"expr:unknown",r.iconSize,c,o),c+=a,c+=r.textMargin,c>=l||(t.font=s.fonts.objects,this.renderCenteredText(t,pC(e.target),c,l,r.itemHeight,r.textBaselineShift))}#Qv(t,e,i,n,s,r){const o=this.theme,a=o.dimensions,l=a.itemHeight/2,c=a.iconMargin+a.smallIconScale*a.iconSize/2,u=e.animation.disabled;u&&(t.globalAlpha=.5);let h=i-a.propertiesPanelMargin,d=a.propertiesPanelMargin+e.left*a.indentSize;h-=c,(n||r)&&(t.fillStyle=o.text,r?this.renderIcon(t,"workflow:CheckmarkCircle",a.iconSize,h,l,1,a.smallIconScale):u||this.renderIcon(t,"workflow:AddCircle",a.iconSize,h,l,1,a.smallIconScale)),h-=c,d+=2*c,(n||u)&&(t.fillStyle=o.text,this.renderIcon(t,"workflow:VisibilityOff",a.iconSize,d,l,1,a.smallIconScale)),d+=2*c,d+=a.propertyTextMargin,d>=h||(t.fillStyle=s&&!u?o.propertyTextSelected:o.propertyText,t.font=o.fonts.properties,this.renderCenteredText(t,e.animation.animator.title,d,h,a.itemHeight,a.textBaselineShift))}#Yv(t,e,i,n,s){const r=e.keyframes,o=r.length-1;if(o<0)return;const a=this.theme,l=a.dimensions,c=l.itemHeight/2,u=l.keyframeRadius,h=n+r[0].offset*i,d=0===o?h:n+r[o].offset*i,f=cW;if(h>=s+u||d<=-u)return void this.#Kv(e,f);function p(e,i){const n=i?a.keyframeBorderSelected:a.keyframeBorder;t.fillStyle=n,t.beginPath(),t.ellipse(e,c,u,u,0,0,2*Math.PI),t.fill();const s=i?a.keyframeSelected:a.keyframe;n!==s&&(t.fillStyle=s,t.beginPath(),t.ellipse(e,c,u-l.keyframeBorder,u-l.keyframeBorder,0,0,2*Math.PI),t.fill())}if(0===o)return this.#Kv(e,f),void p(h,iW(r[0]));if(h>=s-u&&h<s+u)return this.#Kv(e,f),void p(h,iW(r[0]));if(d>-u&&d<=u)return this.#Kv(e,f),void p(d,iW(r[o]));const g=(l.itemHeight-l.easingHeight)/2,m=(e,i,n,s)=>{const r=(n-=u+.5)-(i+=u+.5);if(r<=1)return;t.fillStyle=s?a.easingSelected:a.easing,t.beginPath(),t.roundRect(i,g,r,l.easingHeight,l.easingBorderRadius),t.fill();const o=e?.title??"Linear";this.#Xv(t,o,!0)<r&&(t.save(),t.fillStyle=s?a.easingTextSelected:a.easingText,t.textRendering="optimizeLegibility",t.textBaseline="middle",t.textAlign="center",t.fillText(o,i+r/2,c+1),t.restore())};t.font=a.fonts.easing;let v=iW(r[0]),y=h,x=y>-u;YZ.hasSelectedKeyframes=v,r[0].offset===f&&(YZ.isTimeOverKeyframe=!0);let b=1;for(;b<=o;b++){const t=iW(r[b]),e=n+r[b].offset*i;if(t&&(YZ.hasSelectedKeyframes=!0),r[b].offset===f&&(YZ.isTimeOverKeyframe=!0),e<=-u)y=e,v=t,x=!1;else{if(x&&p(y,v),m(r[b-1].easing,y,e,v&&t),e>=s+u)break;p(e,t),y=e,v=t,x=!1}}for(;++b<=o;){if(YZ.hasSelectedKeyframes&&YZ.isTimeOverKeyframe)return;iW(r[b])&&(YZ.hasSelectedKeyframes=!0),r[b].offset===f&&(YZ.isTimeOverKeyframe=!0)}}#Jv(t,e,i,n,s,r,o,a,l){const c=this.theme;t.font=c.fonts.easing;let u=j(e.out-e.in,l,!0),h=this.#Xv(t,u,!1);if(h>=o-r)return;t.save(),t.fillStyle=i?c.barTextSelected:c.barText,t.textRendering="optimizeLegibility",t.textBaseline="middle";const d=(r+o)/2,f=c.dimensions.barTimeMargin;let p=d-h/2,g=d+h/2;g>=0&&p<=s&&(t.textAlign="center",t.fillText(u,n+d,a)),p-=f,g+=f,r+=f,o-=f,e.in>=0&&(u=j(e.in,l,!0),h=this.#Xv(t,u,!1),h<=p-r&&r+h>0&&(t.textAlign="left",t.fillText(u,n+r,a))),e.out>=0&&(u=j(e.out,l,!0),h=this.#Xv(t,u,!1),h<=o-g&&o-h<s&&(t.textAlign="right",t.fillText(u,n+o,a))),t.restore()}#ty(t,e,i,n,s){const r=n-i,o=this.theme.dimensions.itemHeight/3;if(r<=1)return;t.fillStyle=s?this.theme.easingSelected:this.theme.easing;const a=this.theme.dimensions.itemHeight/2;if(!e||r<=o){const e=4;return void t.fillRect(i,a-e/2,r,e)}const l=Math.sqrt(o**2+r**2),c=this.#ey(e,l,o);t.save(),t.translate(i,a-o),t.rotate(Math.atan(o/l)),t.fill(c),t.restore()}#ey(t,e,i){const n=new DOMMatrix;t.inverted?n.translateSelf(e,0).scaleSelf(-e,i):n.translateSelf(0,i).scaleSelf(e,-i);const s=new Path2D;return s.addPath(t.func.path,n),s}#jv;#Xv(t,e,i){if(this.#jv.has(e))return this.#jv.get(e);const n=t.measureText(e).width;return i&&this.#jv.set(e,n),n}#Kv(t,e){for(const i of t.keyframes)if(i.offset===e&&(YZ.isTimeOverKeyframe=!0),iW(i)&&(YZ.hasSelectedKeyframes=!0),YZ.isTimeOverKeyframe&&YZ.hasSelectedKeyframes)return}#Nl;get info(){if(void 0===this.#Nl){if(this.#kv)return this.#Nl=null;this.#Nl=function(t,e){let i=null;return i=e.showOnlySelected?function(t,e){const i=oh();if(!i||i.isFragment)return null;const n={items:[],maxOffset:0,maxKeyframeOffset:0,maxBarOffset:0};let s=0;for(const i of function(t){if(!ih)return[];const e=[...nh];if(void(null!=t&&yu(e,t,!0))){const t=e.indexOf(ih);t>=0&&(e.splice(t,1),e.unshift(ih))}return e}(e.reverse)){const r=t.get(i)||null;if(!r&&!e.showSelectedAndNotAnimated)continue;const o=QW(i);n.items.push({top:s,left:0,type:1,target:i,parent:null,entry:r,open:o}),s++,r&&(n.maxBarOffset=Math.max(n.maxBarOffset,r.in||0,r.out||0),o&&(s=UZ(r,n,e,s,1)))}return n}(t,e):!ju.length||Lu&&ju[0].isLayer?function(t,e,i=5){const n=oh(),s=new Map,r=new Set;t.size>0&&WZ(s,r,t.keys(),e.showFilters,Au()),e.showSelectedAndNotAnimated&&n&&!n.isFragment&&WZ(s,r,rh(),e.showFilters,!1);const o={items:[],maxOffset:0,maxKeyframeOffset:0,maxBarOffset:0};let a=0;for(const n of Gu(e.reverse)){const l=t.get(n)||null;if(!(l||r.has(n)||s.has(n)||e.showSelectedAndNotAnimated&&hh(n)))continue;const c=QW(n);if(a=BZ(n,l,null,c,o,a,0),!c)continue;if(l&&(a=UZ(l,o,e,a,1)),a=RZ(n.filters,t,o,e,a,1),!s.has(n))continue;const u=e.group,h=u?new Map:null;FZ(n,s.get(n),((n,s)=>{const r=t.get(n)||null,l=QW(n);let c=1;return u&&(s&&h.has(s)&&(c=Math.min(h.get(s)+1,i)),h.set(n,c)),a=BZ(n,r,s,l,o,a,c),l?(r&&(a=UZ(r,o,e,a,c+1)),a=RZ(n.filters,t,o,e,a,c+1),!0):!u}),e.reverse)}return o}(t,e):function(t,e,i=5){const n=oh();let s=new Set;if(t.size>0&&OZ(s,t.keys(),e.showFilters,Au()),e.showSelectedAndNotAnimated&&n&&!n.isFragment&&OZ(s,rh(),e.showFilters,!1),0===s.size)return null;const r={items:[],maxOffset:0,maxKeyframeOffset:0,maxBarOffset:0};let o=0;const a=e.group,l=a?new Map:null;return FZ($c,s,((n,s)=>{const c=t.get(n),u=QW(n);let h=0;return a&&(s&&l.has(s)&&(h=Math.min(l.get(s)+1,i)),l.set(n,h)),o=BZ(n,c,s,u,r,o,h),u?(c&&(o=UZ(c,r,e,o,h+1)),o=RZ(n.filters,t,r,e,o,h+1),!0):!a}),e.reverse),r}(t,e),i&&(0===i.items.length?i=null:i.maxOffset=Math.max(i.maxBarOffset,i.maxKeyframeOffset)),i}(QO.map,this.options),function(t){if(XO.size)return!1;if(!t?.length)return eW();const e=new Set(XO);for(const i of t)if(i.animation){for(const t of i.animation)e.delete(t);if(0===e.size)return!1}sW(e)}(this.#Nl?.items)}return this.#Nl}invalidate(){this.#Nl=void 0}}function KZ(t,e,i,n,s){return(i-t)**2+(n-e)**2<=s**2}const XZ={min:0,max:100,step:1};class tY extends qx{#iy;#Pl;#ny;constructor(){super(),this.#ny=0,this.#sy=t=>{const e="is-collapsed";t?this.classList.add(e):this.classList.remove(e),this.shadowRoot.querySelector("#add").disabled=t,this.#Pl.collapsed=t},this.#ry=0,this.keyboardInterceptor=t=>("Space"!==t.code||("keydown"===t.type?t.repeat||(this.#ry=t.timeStamp):"keyup"===t.type&&t.timeStamp-this.#ry<=300&&this.#oy()),!1),this.#ay=t=>{this.#ny=Math.round(100*t.detail),this.requestUpdate()},this.#ly=async t=>{t.stopPropagation(),await $R(t.detail)},this.#cy=[this.#uy("Show only selected","showOnlySelected"),this.#uy("Show not animated","showSelectedAndNotAnimated"),this.#uy("Group elements","group"),null,this.#uy("Show bar duration","showBarDuration",!1,!1)],this.#hy=[this.#dy("Scroll to element",ZR),this.#dy("Scroll to playhead",YR)],this.#fy=[this.#py(2),this.#py(1.75),this.#py(1.5),this.#py(1.25),null,this.#py(1),null,this.#py(.75),this.#py(.5),this.#py(.25)],this.#gy=()=>{this.classList.contains("is-collapsed")||(Sa(2),QR.change(!0))},this.#my=()=>{Sa(1),QR.change(!1)},this.#wp=async t=>{t.preventDefault(),t.stopImmediatePropagation(),this.#vy&&await ky(this.ctxMenu,{x:t.clientX,y:t.clientY},"bottom-left")},this.#yy=t=>{if(!t.isPrimary||0!==t.button)return;C(this.#xy,this.#by),t.target.setPointerCapture(t.pointerId);const e=this.#iy;e.style.top=t.clientY+"px",e.style.left=this.offsetLeft+"px",e.style.width=this.offsetWidth+"px",wy().appendChild(e)},this.#xy=t=>{t.isPrimary&&(this.#iy.style.top=this.#wy(t.clientY)+"px")},this.#by=t=>{if(!t.isPrimary)return;0!==t.button&&t.preventDefault(),L(),t.target.releasePointerCapture(t.pointerId);const e=this.ownerDocument.documentElement.offsetHeight-this.#wy(t.clientY);this.#iy.remove(),requestAnimationFrame((()=>{this.style.height=e+"px"}))},this.#My=!0,this.#Sy=()=>{this.#My=tW(),this.requestUpdate()},this.#ky=()=>{this.#My!==tW()&&(this.#My=!this.#My,this.requestUpdate())},this.#Pl=new qZ;const t=this.#Pl.canvas;t.addEventListener("es-zoom",this.#ay),t.addEventListener("es-easing",(t=>{t.stopPropagation(),this.#_y(t.detail)}));const e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.height="2px",e.style.background="var(--accent-color-500)",this.#iy=e,IC(this,[[eo,this.#Sy],[UO,this.#ky],[GR,this.#sy],$O,ZO])}#sy;get#vy(){return!uW&&!_&&!GR.value}#ry;render(){const t=tW();return Px`
            ${this.#Pl.canvas}
            <div id="playback">
                <cc-action-group size="m" quiet gapless>
                    <cc-action-button id="recorder" .selected=${dW} @click=${this.#Iy} title="Record">
                        <cc-icon name="expr:player-record"></cc-icon>
                    </cc-action-button>
                    <cc-action-button @click=${this.#Cy} title="Go to start">
                        <cc-icon name="expr:player-start"></cc-icon>
                    </cc-action-button>
                    <cc-action-button @click=${this.#oy} title=${uW?"Stop":"Play"}>
                        <cc-css-icon .name=${uW?"Pause":"Play"}></cc-css-icon>
                    </cc-action-button>
                    <cc-action-button @click=${this.#Ly} title="Go to end">
                        <cc-icon name="expr:player-end"></cc-icon>
                    </cc-action-button>
                    <cc-action-button .selected=${hW} @click=${this.#ym} title="Repeat">
                        <cc-icon name="workflow:Refresh"></cc-icon>
                    </cc-action-button>
                </cc-action-group>
                <div id="time-wrapper">
                    <span id="time" @click=${this.#Ny}>${j(cW,QO?.fps||60)}</span>
                    <cc-action-button id="add" .disabled=${uW} @click=${this.#jy} size="m" quiet title="Add...">
                        <cc-icon name="expr:add-color"></cc-icon>
                    </cc-action-button>
                </div>
            </div>
            <div id="controls">
                <cc-action-group id="timeline-filter-controls" size="m" quiet>
                    <cc-action-button title="Filter" @click=${this.#zy}>
                        <cc-icon name="workflow:Filter"></cc-icon>
                    </cc-action-button>
                    <cc-action-button title="Auto scroll" @click=${this.#fv}>
                        <cc-icon name="workflow:Follow"></cc-icon>
                    </cc-action-button>
                    <cc-action-button id="speed" title="Speed" @click=${this.#Py}>
                        ${fW}&times;
                    </cc-action-button>
                </cc-action-group>
                <cc-action-group size="m" quiet>
                    <cc-action-button
                        title="Linear"
                        @click=${this.#Ty}
                        .disabled=${t}
                    >
                        <cc-icon name="expr:ease-linear"></cc-icon>
                    </cc-action-button>
                    <cc-action-button
                        title="Hold"
                        @click=${this.#Ay}
                        data-name="step"
                        data-inverted="true"
                        .disabled=${t}
                    >
                        <cc-icon name="expr:ease-step-end"></cc-icon>
                    </cc-action-button>
                    <cc-action-button
                        title="Jump"
                        @click=${this.#Ay}
                        data-name="step"
                        .disabled=${t}
                    >
                        <cc-icon name="expr:ease-step-start"></cc-icon>
                    </cc-action-button>
                    <cc-divider vertical></cc-divider>
                    <cc-action-button
                        title="Ease both"
                        @click=${this.#Ay}
                        data-name="ease-both"
                        .disabled=${t}
                    >
                        <cc-icon name="expr:ease-in-out"></cc-icon>
                    </cc-action-button>
                    <cc-action-button
                        title="Ease in"
                        @click=${this.#Ay}
                        data-name="ease"
                        .disabled=${t}
                    >
                        <cc-icon name="expr:ease-in"></cc-icon>
                    </cc-action-button>
                    <cc-action-button
                        title="Ease out"
                        @click=${this.#Ay}
                        data-name="ease"
                        data-inverted="true"
                        .disabled=${t}
                    >
                        <cc-icon name="expr:ease-out"></cc-icon>
                    </cc-action-button>
                    <cc-divider vertical></cc-divider>
                    <cc-action-button
                        title="Custom easing"
                        @click=${this.#Dy}
                        .disabled=${t}
                    >
                        <cc-icon name="expr:easing"></cc-icon>
                    </cc-action-button>
                </cc-action-group>
                <div style="flex: 1"></div>
                <cc-slider id="zoom" .constraint=${XZ} filled .value=${this.#ny} @start=${this.#Ey} @end=${this.#Oy} @update=${this.#vd}></cc-slider>
            </div>
            <div id="resizer" @pointerdown=${this.#yy}></div>
        `}#Ny(){this.#Pl.scrollToPlayhead(null,!1,!0)}async#jy(t){if(uW)return;if(ch())return void Sy("Selection is empty","info");const e=PZ(QO,ah(),(t=>{AR(t.value,cW)}));e?.length?await this.#Wy(t.target,e,"bottom-left",!1):Sy("No more animators available","info")}#Ry;#Ey(){this.#Ry=this.#Pl.getZoomScroller(0)}#Oy(){this.#Ry=null}#vd(t){this.#ny=t.detail,this.#Pl.setZoom(t.detail/100,this.#Ry)}#ay;#Ty(){jR()}#Ay(t){const e=t.target.dataset,i=kE(e.name);if(!i)return void jR();const n="true"===e.inverted;NR(new CE(i,n))}#By;#Uy(){if(this.#By)return this.#By;const t=document.createElement("cc-popover");t.id="easing-popover";const e=document.createElement("es-easing-control");return e.addEventListener("copy-easing",this.#ly),t.appendChild(e),this.#By=t}#ly;#Dy(t){this.#_y(t.target)}async#_y(t){if(0===WebGLBuffAddr0xebc5b.valueOf())return void rC();if(tW())return;let e=function(){if(tW())return;let t,e=!1;return aR(((i,n,s)=>{if(0===s.length)return!0;for(const i of s)if(uR(n,i))if(e){if(!kt(t,i.easing))return t=void 0,!1}else e=!0,t=i.easing;return!0}),null,!1),t}();e&&(e=e.clone(!0));const i=this.#Uy();this.shadowRoot.appendChild(i),await i.updateComplete;const n=i.firstElementChild;n.value=e,await n.updateComplete,await i.open(t,.5,0,0,-1,0,-8);let s=n.value;if(i.remove(),void 0===s)return;if(null===s)return void jR();const r=_E(s.func);r&&(s=new CE(r,s.inverted)),NR(s)}#cy;#hy;#fy;#uy(t,e,i=!1,n=!0){const s=()=>this.#Pl;return{title:t,selectable:!0,get value(){const t=s();return i?!t.options[e]:t.options[e]},action(){const t=s();t.options[e]=!t.options[e],t.refresh(n)}}}#dy(t,e){return{title:t,selectable:!0,get value(){return e.value},action(){e.toggle()}}}#py(t){const e=this;return{title:t.toString(),selectable:!0,get value(){return t===fW},action(){!function(t){fW=t}(t),e.requestUpdate()}}}async#Wy(t,e,i="top-left",n=!0){this.#vy&&await ky(e,t,i,n)}#zy(t){this.#Wy(t.target,this.#cy)}#fv(t){this.#Wy(t.target,this.#hy)}#Py(t){this.#Wy(t.target,this.#fy)}#oy(){Ll?.isWorking||(uW?(_W(),this.#Pl.refresh(!1,!0)):kW())}#Iy(t){dW=!dW,t.target.selected=dW}#ym(t){hW=!hW,t.target.selected=hW}#Cy(){uW||(xW(gW?pW[0]:0,!1),this.#Pl.scrollToPlayhead(null,!1,!0))}#Ly(t){uW||(function(t){const e=gW?pW[1]:QO.duration;if(t)return xW(e);const i=1e3/QO.fps;xW(P(e-i,i),!1)}(t.ctrlKey||t.metaKey),this.#Pl.scrollToPlayhead(null,!1,!0))}#gy;#my;#wp;#yy;#xy;#wy(t){const e=this.ownerDocument.documentElement;return n(t,e.offsetTop+50+180,e.offsetTop+e.offsetHeight-196)}#by;connectedCallback(){super.connectedCallback(),this.tabIndex=-1,this.addEventListener("focusin",this.#gy),this.addEventListener("focusout",this.#my),this.addEventListener("contextmenu",this.#wp),this.#Pl.activate()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("contextmenu",this.#wp),this.removeEventListener("focusin",this.#gy),this.removeEventListener("focusout",this.#my),this.#Pl.deactivate()}#My;#Sy;#ky;static{this.styles=[Jy`
:host {
    height: 300px;

    outline: none !important;

    display: flex;
    flex-direction: column;
    user-select: none;
    contain: strict;

    --bar-size: 48px;
    --left-size: 280px;
}

#resizer {
    position: absolute;
    transform-origin: 0 0;
    left: 0;
    right: 0;
    top: 0;
    height: 2px;
    background: transparent;
    cursor: ns-resize;
}

#resizer:hover {
    transform: scaleY(2);
}


#timeline-filter-controls {
    box-sizing: border-box;
    padding-left: 8px;
    padding-right: 2px;
    width: var(--left-size);
}

:host(.is-collapsed) {
    height: var(--bar-size);
    max-height: var(--bar-size);
    min-height: var(--bar-size);
}

#zoom {
    width: 180px;
    margin-right: 8px;
}

:host(.is-collapsed) #controls {
    display: none;
}

:host(.is-collapsed) #resizer {
    pointer-events: none;
}

#controls {
    width: 100%;
    height: var(--bar-size);
    min-height: var(--bar-size);
    max-height: var(--bar-size);
    pointer-events: var(--cc-pointer-events, auto);
    display: flex;
    align-items: center;
    overflow: clip;
    box-sizing: border-box;
}

:host, #controls {
    border-top: var(--border-size) solid var(--separator-color);
}

#recorder[selected] {
    color: var(--error-color) !important;
    --action-btn-bg: transparent !important;
}

#playback {
    background: transparent;
    display: flex;
    box-sizing: border-box;

    width: var(--left-size);
    height: var(--bar-size);

    padding-left: 8px;
    padding-right: 4px;

    align-items: center;
    justify-content: space-between;

    position: absolute;
    top: 0;
    left: 0;
}

#time-wrapper {
    display: flex;
    align-items: center;
    gap: 4px;
}

#time {
    cursor: pointer;
}

#speed {
    font-size: 18px;
}

#canvas {
    display: block;
    margin: 0;
    padding: 0;
    outline: none;
    border: none;
    touch-action: none;
    width: 100%;
    height: calc(100% - var(--bar-size));
    --cc-canvas-line-height: 32;
    --cc-canvas-scroll-size: var(--scrollbar-size);
    --cc-canvas-scroll-color: var(--scrollbar-color);
    --cc-canvas-separator-color: var(--separator-color);
    --cc-canvas-text: var(--text-color-default);
    --cc-canvas-background: var(--surface-color);
    --cc-canvas-background-selected: var(--surface-hover-color);
}

:host(.is-collapsed) #canvas {
    height: 100%;
}

#easing-popover::part(popover) {
    background: var(--surface-color);
}

@container --theme-provider style(--theme: dark) {
    #canvas {
        --cc-canvas-property-text: var(--gray-400);
        --cc-canvas-property-text-selected: var(--accent-color-400);

        --cc-canvas-playhead-thumb: var(--accent-color-400);
        --cc-canvas-playhead-line: var(--gray-100);
        --cc-canvas-play-range: var(--success-color);

        --cc-canvas-visibility-bar-face: var(--gray-600);
        --cc-canvas-visibility-bar-face-selected: var(--accent-color-500);
        --cc-canvas-visibility-bar-track-face: var(--gray-800);
        --cc-canvas-visibility-bar-text: var(--gray-100);
        --cc-canvas-visibility-bar-text-selected: var(--white);

        --cc-canvas-keyframe-face: var(--gray-900);
        --cc-canvas-keyframe-face-selected: var(--accent-color-400);
        --cc-canvas-keyframe-border: var(--gray-400);
        --cc-canvas-keyframe-border-selected: var(--accent-color-400);
        --cc-canvas-keyframe-track-line: var(--gray-800);
        --cc-canvas-keyframe-selection-rect: var(--accent-color-500);

        --cc-canvas-easing-face: var(--gray-700);
        --cc-canvas-easing-face-selected: var(--accent-color-300);
        --cc-canvas-easing-text: var(--gray-100);
        --cc-canvas-easing-text-selected: var(--black);

        /* Timeline zoom bar (numeste-l cum crezi tu) */
        --cc-canvas-zoom-bar-face: var(--accent-color-500);
        --cc-canvas-zoom-bar-track-face: var(--gray-800);
    }
}

@container --theme-provider style(--theme: light) {
    #canvas {
        --cc-canvas-property-text: var(--gray-500);
        --cc-canvas-property-text-selected: var(--accent-color-500);

        --cc-canvas-playhead-thumb: var(--accent-color-500);
        --cc-canvas-playhead-line: var(--gray-800);
        --cc-canvas-play-range: var(--success-color);

        --cc-canvas-visibility-bar-face: var(--gray-300);
        --cc-canvas-visibility-bar-face-selected: var(--accent-color-500);
        --cc-canvas-visibility-bar-track-face: var(--gray-50);
        --cc-canvas-visibility-bar-text: var(--gray-700);
        --cc-canvas-visibility-bar-text-selected: var(--white);

        --cc-canvas-keyframe-face: var(--white);
        --cc-canvas-keyframe-face-selected: var(--accent-color-400);
        --cc-canvas-keyframe-border: var(--gray-700);
        --cc-canvas-keyframe-border-selected: var(--accent-color-400);
        --cc-canvas-keyframe-track-line: var(--gray-50);
        --cc-canvas-keyframe-selection-rect: var(--accent-color-500);

        --cc-canvas-easing-face: var(--gray-100);
        --cc-canvas-easing-face-selected: var(--accent-color-200);
        --cc-canvas-easing-text: var(--gray-700);
        --cc-canvas-easing-text-selected: var(--black);


        /* Timeline zoom bar (numeste-l cum crezi tu) */
        --cc-canvas-zoom-bar-face: var(--accent-color-500);
        --cc-canvas-zoom-bar-track-face: var(--gray-50);
    }
}
    `]}}class eY extends sb{constructor(){super(...arguments),this.padding=24,this.handleRadius=4}updateInternalValues(){super.updateInternalValues(),this.background=this.getColor("face"),this.grid=this.getColor("grid"),this.func=this.getColor("func"),this.handle=this.getColor("handle"),this.handleHover=this.getColor("handle-hover")}}class iY extends rb{#$y;#Fy;#ui=0;#Vy=[1,.9,.8,.75,.7,.6,.5,.4,.3,.25,.1];get zoom(){return this.#ui}set zoom(t){this.#ui!==t&&this.#Vy[t]&&(this.#ui=t,this.#Hy=this.#Gy=null,this.refresh(!1))}#tr=void 0;get value(){return this.#tr}set value(t){this.#tr!==t&&(this.#tr=t,this.#Gy=null,this.refresh(!0))}constructor(){super(),this.dblClickMaxDiff=-1;const t=new Path2D;for(let e=1;e<=3;e++){const i=.25*e;t.moveTo(i,0),t.lineTo(i,1),t.moveTo(0,i),t.lineTo(1,i)}t.moveTo(0,0),t.lineTo(1,1),t.rect(0,0,1,1),this.#$y=t,this.#Fy=new Path2D,this.#Fy.moveTo(0,0),this.#Fy.lineTo(1,1)}createTheme(t){return new eY(t)}invalidate(){}#Hy=null;#Gy=null;get#Zy(){if(this.#Hy)return this.#Hy;let{width:t,height:e}=this.size.content;const i=this.theme.padding;t-=2*i,e-=2*i;const n=this.#Vy[this.#ui],s=e*(1-n)/2;return this.#Hy=(new DOMMatrix).translateSelf(i,i).translateSelf(0,e*n+s).scaleSelf(t,-e*n)}get#Yy(){if(this.#Gy)return this.#Gy;let{width:t,height:e}=this.size.content;const i=this.theme.padding;t-=2*i,e-=2*i;const n=this.#Vy[this.#ui],s=e*(1-n)/2,r=new DOMMatrix;return r.translateSelf(i,i),this.value?.inverted?(r.translateSelf(t,s),r.scaleSelf(-t,e*n)):(r.translateSelf(0,e*n+s),r.scaleSelf(t,-e*n)),this.#Gy=r}onSizeChanged(){this.#Hy=this.#Gy=null,super.onSizeChanged()}render(t,e,i){const n=this.theme;t.fillStyle=n.background,t.fillRect(0,0,e,i),t.lineJoin="round",t.lineCap="butt",t.strokeStyle=n.grid,t.lineWidth=1,t.stroke(this.#ey(this.#$y,this.#Zy));const s=this.#tr;if(void 0===s)return;const r=s?.func;if(t.lineCap="round",t.strokeStyle=n.func,t.stroke(this.#ey(r?.path??this.#Fy,this.#Yy)),r instanceof uE){const e=this.#Yy,i=e.transformPoint(ce.ZERO),s=e.transformPoint(ce.UNIT),o=e.transformPoint(r.h1),a=e.transformPoint(r.h2);t.strokeStyle=n.handle,t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(o.x,o.y),t.moveTo(s.x,s.y),t.lineTo(a.x,a.y),t.stroke();const l=n.handleRadius;if(t.fillStyle=n.background,t.beginPath(),t.arc(i.x,i.y,l,0,2*Math.PI,!1),t.fill("nonzero"),t.stroke(),t.beginPath(),t.arc(s.x,s.y,l,0,2*Math.PI,!1),t.fill("nonzero"),t.stroke(),1===this.#kl.type){let e,i;0===this.#kl.handle?(e=o,i=a):(e=a,i=o),t.fillStyle=n.handle,t.beginPath(),t.arc(i.x,i.y,l,0,2*Math.PI,!1),t.fill("nonzero"),t.fillStyle=n.handleHover,t.beginPath(),t.arc(e.x,e.y,l,0,2*Math.PI,!1),t.fill("nonzero")}else t.fillStyle=n.handle,t.beginPath(),t.arc(o.x,o.y,l,0,2*Math.PI,!1),t.arc(a.x,a.y,l,0,2*Math.PI,!1),t.fill("nonzero")}}#ey(t,e){const i=new Path2D;return i.addPath(t,e),i}#kl={type:0,handle:null};#zl(t,e=null){const i=this.#kl;return(i.type!==t||i.handle!==e)&&(i.type=t,i.handle=e,!0)}updateHoverInfo(){const t=this.#tr?.func;if(!(t instanceof uE))return this.#zl(0);const{padding:e,handleRadius:i}=this.theme,n=this.mousePosition,s=this.size.content.width;if(n.x<e||n.x>s-e)return this.#zl(0);const r=this.#Yy;return ce.distance(n,r.transformPoint(t.h1))<=i?this.#zl(1,0):ce.distance(n,r.transformPoint(t.h2))<=i?this.#zl(1,1):this.#zl(0)}clearHoverInfo(){return this.#zl(0,null)}handleDblClick(t){}#Qy=null;handleMouseDown(t){1===this.#kl.type&&(this.#Qy=this.#kl.handle)}handleMouseMove(t){if(null==this.#Qy)return;const e=this.#tr.func,{x:i,y:s}=this.#Yy.inverse().transformPoint(this.mousePosition),r=new ce(n(i),Math.round(1e3*s)/1e3);if(0===this.#Qy){if(e.h1.equals(r))return;e.h1=r}else{if(e.h2.equals(r))return;e.h2=r}e.invalidate(),this.refresh(!1),this.canvas.dispatchEvent(new Event("refresh"))}handleMouseUp(t){this.#Qy=null}onWheel(t){const e=n(Math.round(this.#ui+Math.sign(t.deltaY)),0,10);return e!==this.#ui&&(this.#ui=e,this.#Hy=this.#Gy=null,this.refresh(!0),this.canvas.dispatchEvent(new CustomEvent("zoom",{detail:e})),!0)}}const nY=[{title:"Linear",icon:"expr:ease-linear",value:null},{title:"Bezier",icon:"expr:ease-in-out",value:0,meta:[new ce(.25,.1),new ce(.25,1)]},{title:"Back",icon:"expr:ease-back",value:4,meta:1.7},{title:"Steps",icon:"expr:ease-steps",value:1,meta:3},{title:"Points",icon:"workflow:GraphTrend",value:6,meta:[new ce(.25,.5),new ce(.75,.25)]},{title:"Elastic",icon:"expr:ease-elastic",value:3,meta:[3,3]},{title:"Bounce",icon:"expr:ease-bounce",value:2,meta:[3,1]},{title:"Sinc",icon:"expr:ease-sinc",value:5,meta:3}];class sY extends qx{#Pl=new iY;constructor(){super();const t=()=>this.requestUpdate();this.#Pl.canvas.addEventListener("zoom",t),this.#Pl.canvas.addEventListener("refresh",t)}get value(){return this.#Pl.value}set value(t){this.#Pl.value=t,this.requestUpdate()}#Jy={min:0,max:10,step:1};render(){const t=this.value;return Px`
        <cc-rich-list id="list" .value=${t?t.func.type:t} @change=${this.#qy} .items=${nY} vertical></cc-rich-list>
        <cc-flex-row id="controls">
            <cc-slider title="Zoom" flex filled .value=${this.#Pl.zoom} .pivot=${this.#Jy.max} .constraint=${this.#Jy} @update=${this.#vd}></cc-slider>
            <cc-action-button title="Copy easing" .disabled=${!t} @click=${this.#lg}>
                <cc-icon name="expr:copy"></cc-icon>
            </cc-action-button>
        </cc-flex-row>
        ${this.#Pl.canvas}
        <cc-flex-row id="settings">
            ${this.#Qp(t)}
        </cc-flex-row>
        `}#lg(){const t=this.value;t&&this.dispatchEvent(new CustomEvent("copy-easing",{detail:t}))}#vd(t){this.#Pl.zoom=t.detail}#Qp(t){if(!t)return Ax;const{func:e,inverted:i}=t;let n;switch(e.type){case 0:n=this.#Ky(e,i);break;case 1:n=this.#Xy(e);break;case 2:n=this.#tx(e);break;case 3:n=this.#ex(e);break;case 4:n=this.#ix(e);break;case 5:n=this.#nx(e);break;case 6:n=this.#sx(e,i)}return n?[n,Px`<cc-action-button @click=${this.#rx} title="Invert easing" .selected=${t?.inverted} emphasized>
            <cc-icon name="workflow:Sync"></cc-icon>
        </cc-action-button>`]:Ax}#ox={min:1,max:100,step:1,digits:0};#Xy(t){return Px`<cc-number-input title="Steps" data-property="steps" .value=${t.steps} flex .formatter=${this.#ox} @update=${this.#ax}>
            <cc-icon name="workflow:Multiple" slot="before"></cc-icon>
        </cc-number-input>`}#lx={min:0,max:15,step:.1,digits:1};#ix(t){return Px`<cc-number-input title="Amplitude" data-property="amplitude" .value=${t.amplitude} flex .formatter=${this.#lx} @update=${this.#ax}>
            <cc-icon name="expr:arrow-up-right" slot="before"></cc-icon>
        </cc-number-input>`}#cx={min:1,max:20,step:1,digits:0};#nx(t){return Px`<cc-number-input title="Oscillations" data-property="oscillations" .value=${t.oscillations} flex .formatter=${this.#cx} @update=${this.#ax}>
            <cc-icon name="workflow:Multiple" slot="before"></cc-icon>
        </cc-number-input>`}#ux={min:1,max:20,step:1,digits:0};#hx={min:0,max:10,step:.1,digits:1};#tx(t){return Px`
        <cc-number-input title="Bouncess" data-property="bounces" .value=${t.bounces} flex .formatter=${this.#ux} @update=${this.#ax}>
            <cc-icon name="workflow:Multiple" slot="before"></cc-icon>
        </cc-number-input>
        <cc-number-input title="Stiffness" data-property="stiffness" .value=${t.stiffness} flex .formatter=${this.#hx} @update=${this.#ax}>
            <cc-icon name="expr:arrow-up-right" slot="before"></cc-icon>
        </cc-number-input>
        `}#dx={min:1,max:20,step:1,digits:0};#fx={min:0,max:10,step:.1,digits:1};#ex(t){return Px`
        <cc-number-input title="Oscillations" data-property="oscillations" .value=${t.oscillations} flex .formatter=${this.#dx} @update=${this.#ax}>
            <cc-icon name="workflow:Multiple" slot="before"></cc-icon>
        </cc-number-input>
        <cc-number-input title="Stiffness" data-property="stiffness" .value=${t.stiffness} flex .formatter=${this.#fx} @update=${this.#ax}>
            <cc-icon name="expr:arrow-up-right" slot="before"></cc-icon>
        </cc-number-input>
        `}#ax(t){const e=t.target.dataset.property,i=this.value.func;i[e]=t.detail,i.invalidate(),this.#Pl.refresh(!0)}#Ky(t,e){let i;return i=e?[1-t.h2.x,1-t.h2.y,1-t.h1.x,1-t.h1.y]:[t.h1.x,t.h1.y,t.h2.x,t.h2.y],Px`<cc-text-input text-center .value=${function(t,e=" "){return t.map(h).join(e)}(i,", ")} @change=${this.#px} flex></cc-text-input>`}#px(t){let e=u(t.detail);if(4!==e.length)return void t.preventDefault();e[0]=n(e[0]),e[2]=n(e[2]);const i=this.value.func;if(this.value.inverted){e.push(e.shift(),e.shift());for(let t=0;t<4;t++)e[t]=1-e[t]}i.h1=new ce(e[0],e[1]),i.h2=new ce(e[2],e[3]),i.invalidate(),this.#Pl.refresh(!0)}#sx(t,e){let i=[];for(let{x:n,y:s}of t.points)e&&(n=1-n,s=1-s),n=Math.round(100*n),s=Math.round(100*s),i.push(`${n} ${s}`);return e&&i.reverse(),Px`<cc-text-input text-center .value=${i.join(", ")} @change=${this.#gx} flex></cc-text-input>`}#gx(t){const e=this.value.inverted,i=u(t.detail,.01),s=[];let r,o;for(let t=0;t<i.length;t+=2)r=i[t],o=i[t+1],e&&(r=1-r,o=1-o),r=n(r),s.push(new ce(r,o));e&&s.reverse(),lE(s);const a=this.value.func;a.points=s,a.invalidate(),this.#Pl.refresh(!0),this.requestUpdate(),console.log(ZE(this.value))}connectedCallback(){super.connectedCallback(),this.#Pl.activate()}disconnectedCallback(){super.disconnectedCallback(),this.#Pl.deactivate()}#qy(t){const e=IE({type:t.detail,data:t.item.meta});this.value=e?new CE(e,this.value?.inverted??!0):null}#rx(){const t=this.value;t&&(this.value=t.inverse)}static{this.styles=Jy`
:host {
    --canvas-size: 248px;
    display: grid;
    box-sizing: content-box;
    grid-template-areas: "list controls" "list canvas" "list settings";
    grid-template-columns: 100px var(--canvas-size);
    grid-template-rows: auto var(--canvas-size) auto;
    padding: 16px;
    column-gap: 16px;
    row-gap: 8px;
}

cc-flex-row {
    --flex-gap: 8px;
}

#list {
    grid-area: list;
    justify-content: space-evenly;
    --item-padding: 8px;
}

#list::part(icon) {
    color: var(--text-color-default);
    background: none;
    padding: 0;
    width: 18px;
    height: 18px;
}

#canvas {
    grid-area: canvas;
    display: block;
    width: var(--canvas-size);
    height: var(--canvas-size);
    border-radius: 4px;
    --cc-canvas-func: var(--accent-color-500);
    --cc-canvas-handle-hover: var(--accent-color-500);
}

#controls {
    grid-area: controls;
}
#settings {
    grid-area: settings;
    min-height: 24px;
}



@container --theme-provider style(--theme: dark) {
    #canvas {
        --cc-canvas-face: var(--gray-1000);
        --cc-canvas-grid: var(--gray-600);
        --cc-canvas-handle: var(--white);
    }
}
@container --theme-provider style(--theme: light) {
    #canvas {
        --cc-canvas-face: var(--gray-50);
        --cc-canvas-grid: var(--gray-200);
        --cc-canvas-handle: var(--black);
    }
}
    `}}const rY={...lM,min:1,max:2e4},oY=Fd,aY=[{title:"No auto rotate",icon:"expr:no-auto-rotate",value:0},{title:"Auto rotate",icon:"expr:auto-rotate",value:1,emphasized:!0},{title:"Auto rotate reverse",icon:"expr:auto-rotate-reverse",value:-1,emphasized:!0}],lY={min:-360,max:360,step:.1,stepScale:10,digits:1,unit:"°"},cY={step:1,digits:0,unit:""},uY={step:.01,scale:100,stepScale:1,digits:1,unit:"%"},hY={step:.1,stepScale:10,digits:1,unit:"°"},dY={min:-85,max:85,step:.1,stepScale:10,digits:1,unit:"°"};function fY(t,e="Keep proportions"){return Px`<cc-icon-toggle id=${t} title=${e} left-gap quiet emphasized></cc-icon-toggle>`}function pY(t="pin"){return Px`<cc-pin-point id=${t} right-gap @change=${vY} .valueMap=${hs}></cc-pin-point>`}const gY=[{title:"Even-odd",icon:"EvenOdd",value:1},{title:"Non-zero",icon:"NonZero",value:0,emphasized:!0}];function mY(t="winding"){return Px`<cc-icon-cycle id=${t} @change=${xY} .items=${gY} left-gap css-icon quiet></cc-icon-cycle>`}function vY(t){return tA(yY,t.detail)}function yY(t,e){return function(t,e){if(!t.isElement)return!1;const i=Vd;if(!t.isTransformable)return jd(t,i,e);if(!bd(t,i)||i.sameValue(t,e))return!1;const n=t.localBounds.topLeft;if(!jd(t,i,e))return!1;const s=t.localBounds.topLeft.sub(n);return s.isZero||jd(t,Od,t.anchor.add(s)),!0}(t,e)}function xY(t){tA(Gd,t.detail)}const bY=Yf,wY=Hf,MY=Jy`
#wrapper.multi .is-all-corners,
#wrapper:not(.multi) .is-one-corner {
    display: none;
}
`,SY=Kf,kY=cp,_Y={...lM,min:3,max:360},IY=yp,CY={...lM,min:3,max:360},LY=tp;class NY{constructor(t){this.index=t}isValidTarget(t){return t instanceof tg}getValue(t){return t.points[this.index]}sameValue(t,e){return t.points[this.index].equals(e)}setValue(t,e){const i=t.points.slice();return i[this.index]=e,jd(t,LY.points,i)}}const jY=sp,zY=[Cb,Jy`#length{user-select: text}`],PY=np,TY=[{title:"Closed",icon:"expr:connected",value:!0},{title:"Open",icon:"expr:disconnected",value:!1}],AY=Ed;let DY=(()=>{let t,e,i,n,s=eL,r=[],o=[],a=[],l=[];return class extends s{static{const c="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[fb()],i=[fb()],ab(this,e={get:cb((function(){return this.#mx}),"#duration","get"),set:cb((function(t){this.#mx=t}),"#duration","set")},t,{kind:"accessor",name:"#duration",static:!1,private:!0,access:{has:t=>#vx in t,get:t=>t.#vx,set:(t,e)=>{t.#vx=e}},metadata:c},r,o),ab(this,n={get:cb((function(){return this.#_r}),"#fps","get"),set:cb((function(t){this.#_r=t}),"#fps","set")},i,{kind:"accessor",name:"#fps",static:!1,private:!0,access:{has:t=>#Km in t,get:t=>t.#Km,set:(t,e)=>{t.#Km=e}},metadata:c},a,l),c&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})}#mx=lb(this,r,1e3);get#vx(){return e.get.call(this)}set#vx(t){return e.set.call(this,t)}#_r=(lb(this,o),lb(this,a,30));get#Km(){return n.get.call(this)}set#Km(t){return n.set.call(this,t)}async init(){return this.#vx=1e3,this.#Km=60,super.init()}renderSettings(){return Px`
        <cc-flex-row>
            <div class="label">Duration</div>
            <cc-time-input id="duration" .value=${this.#vx} @change=${this.#um} padded flex></cc-time-input>
            <cc-picker .items=${vB} .value=${this.#Km} @change=${this.#yx} flex></cc-picker>
        </cc-flex-row>
        `}#um(t){this.#vx=t.detail}#yx(t){this.#Km=t.detail}createProject(){const t=new qg;t.title=this.name,Hm(t);const e=new EO;return e.duration=this.#vx,e.fps=this.#Km,Ao({document:t,timeline:e,board:new Ve(0,0,this.width,this.height)})}constructor(){super(...arguments),lb(this,l)}}})();var EY={"es-export-dialog-content":pB,"es-create-project-settings":DY,"es-transform-tool-ctx":class extends oL{constructor(){super(),IC(this,[[eo,this.#Qc],[Qc,this.#Qc]])}firstUpdated(){this.#Qc()}connectedCallback(){super.connectedCallback(),this.#Qc()}#Lr=!1;#Qc=()=>{const t=ch()||!oh().isTransformable;if(this.#Lr!==t){this.#Lr=t;for(const e of this.shadowRoot.querySelectorAll(".item"))e.disabled=t}};render(){return Px`
            <cc-action-group gapless quiet size="m">
                <cc-action-button class="item" title="Rotate -90&deg;" @click=${this.#xx}>
                    <cc-icon name="workflow:RotateCCW"></cc-icon>
                </cc-action-button>
                <cc-action-button class="item" title="Rotate +90&deg;" @click=${this.#bx}>
                    <cc-icon name="workflow:RotateCW"></cc-icon>
                </cc-action-button>
                <cc-action-button class="item" title="Flip horizontal" @click=${this.#wx}>
                    <cc-icon name="workflow:FlipHorizontal"></cc-icon>
                </cc-action-button>
                <cc-action-button class="item" title="Flip vertical" @click=${this.#Mx}>
                    <cc-icon name="workflow:FlipVertical"></cc-icon>
                </cc-action-button>
                <cc-pin-point-button class="item" title="Origin" @change=${this.#Sx} .valueMap=${ds}>
                    <cc-icon name="expr:center-origin-object"></cc-icon>
                </cc-pin-point-button>
            </cc-action-group>
        `}#xx(){I_(-90)}#bx(){I_(90)}#wx(){L_()}#Mx(){C_()}#Sx(t){__(t.detail,!0)}},"es-mpath-joint-tool-ctx":class extends ST{constructor(){super(),IC(this,[eo,io,Qc,UO])}refresh(t){if(tW())return;const e=oh();if(!e||!e.isTransformable)return;const i=QO.getAnimation(e,AY.id);if(i&&!i.disabled)for(const e of i.keyframes)if(iW(e)){if(t[0]=!1,null===t[1]){t[1]=e.value.joint;continue}if(t[1]!==e.value.joint)return void(t[1]=null)}}onChange(t){LR(t.detail)}},"es-transform-properties":class extends dA{constructor(){super(1)}#kx;#_x;#Ix;#Cx;#Lx;#Nx;#Ve;#He;#Ze;#jx;#zx;init(){this.#kx=this.find("#position-x"),this.#_x=this.find("#position-y"),this.#Lx=this.find("#anchor-x"),this.#Nx=this.find("#anchor-y"),this.#Ix=this.find("#scale-x"),this.#Cx=this.find("#scale-y"),this.#Ve=this.find("#skew-angle"),this.#He=this.find("#skew-axis"),this.#jx=this.find("#rotate-x"),this.#zx=this.find("#rotate-y"),this.#Ze=this.find("#orientation"),this.addLinkedProperties([{mode:"point",x:this.#kx,y:this.#_x,property:oY.position,link:null},{mode:"point",x:this.#Lx,y:this.#Nx,property:oY.anchor,link:null},{mode:"point",x:this.#Ix,y:this.#Cx,property:oY.scale,link:this.find("#link-scale")}])}render(){return Px`
        <cc-flex-col>
            <cc-flex-row>
                <cc-icon name="workflow:Crosshairs" right-gap padded class="is-position"></cc-icon>
                <cc-number-input id="position-x" title="Origin X" flex>
                    <cc-icon name="expr:x" class="is-position" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="position-y" title="Origin Y" flex>
                    <cc-icon name="expr:y" class="is-position" slot="before"></cc-icon>
                </cc-number-input>
                <cc-pin-point-button @change=${this.#Px} .valueMap=${ds} left-gap quiet placement="left">
                    <cc-icon name="expr:center-origin-object"></cc-icon>
                </cc-pin-point-button>
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="workflow:Anchor" right-gap padded class="is-anchor"></cc-icon>
                <cc-number-input id="anchor-x" title="Anchor X" flex>
                    <cc-icon name="expr:x" class="is-anchor" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="anchor-y" title="Anchor Y" flex>
                    <cc-icon name="expr:y" class="is-anchor" slot="before"></cc-icon>
                </cc-number-input>
                <cc-pin-point-button @change=${this.#Tx} .valueMap=${ds} left-gap quiet placement="left">
                    <cc-icon name="expr:center-object-origin"></cc-icon>
                </cc-pin-point-button>
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:rotate" right-gap padded class="is-rotate"></cc-icon>
                <cc-number-input id="rotate-x" title="Rotation" ${lA(oY.rotate,null,this.#Ax)} .formatter=${lY} flex>
                    <cc-icon name="expr:angle" class="is-rotate" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="rotate-y" title="Turns" ${lA(oY.rotate,null,this.#Dx)} .formatter=${cY} flex>
                    <cc-icon name="workflow:Orbit" class="is-rotate" slot="before"></cc-icon>
                </cc-number-input>
                <cc-icon-cycle id="orientation" .items=${aY} .value=${0} @change=${this.#Ex} left-gap quiet></cc-icon-cycle>
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:size" right-gap padded class="is-scale"></cc-icon>
                <cc-number-input id="scale-x" title="Scale X" .formatter=${uY} flex>
                    <cc-icon name="expr:x" class="is-scale" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="scale-y" title="Scale Y" .formatter=${uY} flex>
                    <cc-icon name="expr:y" class="is-scale" slot="before"></cc-icon>
                </cc-number-input>
                <cc-icon-toggle id="link-scale" title="Keep proportions" left-gap quiet emphasized></cc-icon-toggle>
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:skew" right-gap padded class="is-skew-angle is-skew-axis"></cc-icon>
                <cc-number-input id="skew-angle" title="Skew angle" ${lA(oY.skewAngle)} .formatter=${hY} flex>
                    <cc-icon name="expr:angle" class="is-skew-angle" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="skew-axis" title="Skew axis" ${lA(oY.skewAxis)} .formatter=${dY} flex>
                    <cc-icon name="expr:guidelines-toggle" class="is-skew-axis" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>
        `}#Ax=t=>{const e=this.#zx,i=t+360*e.value;return(t<=-360||t>=360)&&(this.#jx.value=t%360,e.value=Math.trunc(i/360)),i};#Dx=t=>360*t+this.#jx.value;#Ex(t){N_(t.detail)}#Px(t){__(t.detail,!0)}#Tx(t){__(t.detail,!1)}onValue(t){this.#kx.value=t.position.x,this.#_x.value=t.position.y,this.#Lx.value=t.anchor.x,this.#Nx.value=t.anchor.y,this.#jx.value=t.rotate%360,this.#zx.value=Math.trunc(t.rotate/360),this.#Ze.value=t.orientation??0,this.#Ix.value=t.scale.x,this.#Cx.value=t.scale.y,this.#Ve.value=t.skewAngle,this.#He.value=t.skewAxis}onGlobal(){}onGlobalStatusChanged(t){}static get styles(){return[...super.styles,pA(gA(".is-position",oY.position.id),gA(".is-anchor",oY.anchor.id),gA(".is-scale",oY.scale.id),gA(".is-rotate",oY.rotate.id),gA(".is-skew-angle",oY.skewAngle.id),gA(".is-skew-axis",oY.skewAxis.id))]}},"es-ellipse-properties":class extends dA{constructor(){super(4)}#tt;#j;#X;init(){this.#tt=this.find("#pin"),this.#j=this.find("#width"),this.#X=this.find("#height"),this.addLinkedProperties([{mode:"detached",properties:[[bY.width,this.#j],[bY.height,this.#X]],link:this.find("#link-size")}])}render(){return Px`
        <cc-flex-col>
            <cc-flex-row>
                ${pY()}
                <cc-number-input id="width" title="Width" .formatter=${aM} flex>
                    <cc-icon class="is-width" name="expr:w" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="height" title="Height" .formatter=${aM} flex>
                    <cc-icon class="is-height" name="expr:h" slot="before"></cc-icon>
                </cc-number-input>
                ${fY("link-size")}
            </cc-flex-row>
        </cc-flex-col>
        `}onValue(t){this.#j.value=t.width,this.#X.value=t.height,this.#tt.value=t.pin}onGlobal(){}onGlobalStatusChanged(t){this.#j.indeterminate=this.#X.indeterminate=t,this.#j.disabled=this.#X.disabled=t,this.#tt.disabled=t}static get styles(){return[...super.styles,pA(gA(".is-width",bY.width.id),gA(".is-height",bY.height.id))]}},"es-rectangle-properties":class extends dA{constructor(){super(4)}#ms;#tt;#j;#X;#Ox;#Wx;#Rx;init(){this.#ms=this.find("#wrapper"),this.#tt=this.find("#pin"),this.#j=this.find("#width"),this.#X=this.find("#height"),this.#Ox=this.find("#radius-link"),this.#Wx=this.find("#all-corners"),this.#Rx=[this.find("#top-left"),this.find("#top-right"),this.find("#bottom-right"),this.find("#bottom-left")],this.addLinkedProperties([{mode:"detached",properties:[[wY.width,this.#j],[wY.height,this.#X]],link:this.find("#link-size")}])}render(){return Px`
        <cc-flex-col id="wrapper">
            <cc-flex-row>
                ${pY()}
                <cc-number-input id="width" title="Width" .formatter=${aM} flex>
                    <cc-icon class="is-width" name="expr:w" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="height" title="Height" .formatter=${aM} flex>
                    <cc-icon class="is-height" name="expr:h" slot="before"></cc-icon>
                </cc-number-input>
                ${fY("link-size")}
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:roundness" padded right-gap class="is-radius"></cc-icon>
                <cc-number-input id="all-corners" class="is-all-corners" title="Corner radius" ${lA(wY.radius,null,this.#Bx)} .formatter=${aM} padded flex></cc-number-input>
                <cc-number-input id="top-left" class="is-one-corner" title="Top-Left" ${lA(wY.radius,null,this.#Ux)} .formatter=${aM} padded flex></cc-number-input>
                <cc-number-input id="top-right" class="is-one-corner" title="Top-Right" ${lA(wY.radius,null,this.#$x)} .formatter=${aM} padded flex></cc-number-input>
                <cc-icon-toggle id="radius-link" @change=${this.#Fx} on-icon="RectRadiusSeparate" off-icon="RectRadiusSame" left-gap quiet emphasized></cc-icon-toggle>
            </cc-flex-row>
            <cc-flex-row class="is-one-corner">
                <div fixed-32></div>
                <cc-number-input id="bottom-left" title="Bottom-Left" ${lA(wY.radius,null,this.#Vx)} .formatter=${aM} padded flex></cc-number-input>
                <cc-number-input id="bottom-right" title="Bottom-Right" ${lA(wY.radius,null,this.#Hx)} .formatter=${aM} padded flex></cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>
        `}get#Gx(){return this.isGlobal?this.value.rectRadius:this.value.radius}#Bx=t=>new ys(t);#Zx=(t,e)=>{const i=this.#Gx.value.slice();return i[e]=t,new ys(i)};#Ux=t=>this.#Zx(t,0);#$x=t=>this.#Zx(t,1);#Hx=t=>this.#Zx(t,2);#Vx=t=>this.#Zx(t,3);#Fx(t){const e=this.#Gx,i=t.detail?e.split():e.join();tA(wY.radius,i),this.#Yx(i)}#Yx(t){const e=this.#ms.classList;if(t.isSimple)e.remove("multi"),this.#Ox.checked=!1,this.#Wx.value=t.value;else{e.add("multi"),this.#Ox.checked=!0;for(let e=0;e<4;e++)this.#Rx[e].value=t.value[e]}}onValue(t){this.#j.value=t.width,this.#X.value=t.height,this.#tt.value=t.pin,this.#Yx(t.radius)}onGlobal(t){this.#Yx(t.rectRadius)}onGlobalStatusChanged(t){this.#j.indeterminate=this.#X.indeterminate=t,this.#j.disabled=this.#X.disabled=t,this.#tt.disabled=t}static get styles(){return[...super.styles,MY,pA(gA(".is-width",wY.width.id),gA(".is-height",wY.height.id),gA(".is-radius",wY.radius.id))]}},"es-image-properties":class extends dA{constructor(){super(4)}#tt;#j;#X;init(){this.#tt=this.find("#pin"),this.#j=this.find("#width"),this.#X=this.find("#height"),this.addLinkedProperties([{mode:"detached",properties:[[SY.width,this.#j],[SY.height,this.#X]],link:this.find("#link-size")}])}render(){return Px`
        <cc-flex-col>
            <cc-flex-row>
                ${pY()}
                <cc-number-input id="width" title="Width" .formatter=${aM} flex>
                    <cc-icon class="is-width" name="expr:w" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="height" title="Height" .formatter=${aM} flex>
                    <cc-icon class="is-height" name="expr:h" slot="before"></cc-icon>
                </cc-number-input>
                ${fY("link-size")}
            </cc-flex-row>
        </cc-flex-col>
        `}onValue(t){this.#j.value=t.width,this.#X.value=t.height,this.#tt.value=t.pin}onGlobal(){}onGlobalStatusChanged(t){this.#j.indeterminate=this.#X.indeterminate=t,this.#j.disabled=this.#X.disabled=t,this.#tt.disabled=t}static get styles(){return[...super.styles,pA(gA(".is-width",SY.width.id),gA(".is-height",SY.height.id))]}},"es-polygon-properties":class extends dA{constructor(){super(4)}#tt;#Qx;#st;#ot;#nt;#Jx;init(){this.#tt=this.find("#pin"),this.#st=this.find("#sides"),this.#ot=this.find("#angle"),this.#Qx=this.find("#winding"),this.#nt=this.find("#radius"),this.#Jx=this.find("#roundness")}render(){return Px`
        <cc-flex-col>
            <cc-flex-row>
                ${pY()}
                <cc-number-input id="sides" title="Sides" ${lA(kY.sides)} .formatter=${_Y} flex>
                    <cc-icon name="expr:polygon" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="angle" title="Angle" ${lA(kY.angle)} .formatter=${cM} flex>
                    <cc-icon class="is-angle" name="expr:angle" slot="before"></cc-icon>
                </cc-number-input>
                ${mY()}
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:size" padded right-gap class="is-radius is-roundness"></cc-icon>
                <cc-number-input id="radius" title="Radius" ${lA(kY.radius)} .formatter=${aM} flex>
                    <cc-icon class="is-radius" name="expr:radius" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="roundness" title="Roundness" ${lA(kY.cornerRadius)} .formatter=${sM} flex>
                    <cc-icon class="is-roundness" name="expr:roundness" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>
        `}onValue(t){this.#nt.value=t.radius,this.#Jx.value=t.cornerRadius||0,this.#st.value=t.sides||3,this.#ot.value=t.angle,this.#tt.value=t.pin,this.#Qx.value=t.fillRule}onGlobal(t){this.#Jx.value=t.regularPolygonCornerRadius,this.#st.value=t.regularPolygonSides,this.#Qx.value=t.fillRule,this.#tt.value=null}onGlobalStatusChanged(t){this.#nt.indeterminate=this.#nt.disabled=t,this.#ot.indeterminate=this.#ot.disabled=t,this.#tt.disabled=t}static get styles(){return[...super.styles,pA(gA(".is-angle",kY.angle.id),gA(".is-radius",kY.radius.id),gA(".is-roundness",kY.cornerRadius.id))]}},"es-star-properties":class extends dA{constructor(){super(4)}#tt;#Qx;#st;#ot;#at;#lt;#qx;#Kx;#Xx;#tb;#eb;init(){this.#tt=this.find("#pin"),this.#Qx=this.find("#winding"),this.#st=this.find("#sides"),this.#ot=this.find("#angle"),this.#at=this.find("#outer-radius"),this.#lt=this.find("#inner-radius"),this.#qx=this.find("#link-radius"),this.#Kx=this.find("#outer-roundness"),this.#Xx=this.find("#inner-roundness"),this.#tb=this.find("#outer-twirll"),this.#eb=this.find("#inner-twirll"),this.addLinkedProperties([{mode:"detached",properties:[[IY.outerRadius,this.#at],[IY.innerRadius,this.#lt]],link:this.#qx},{mode:"detached",properties:[[IY.outerCornerRadius,this.#Kx],[IY.innerCornerRadius,this.#Xx]],link:this.find("#link-roundness")},{mode:"detached",properties:[[IY.outerRotate,this.#tb],[IY.innerRotate,this.#eb]],link:this.find("#link-twirll")}])}render(){return Px`
        <cc-flex-col>
            <cc-flex-row>
                ${pY()}
                <cc-number-input id="sides" title="Sides" ${lA(IY.sides)} .formatter=${CY} flex>
                    <cc-icon name="expr:star-tool" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="angle" title="Angle" ${lA(IY.angle)} .formatter=${cM} flex>
                    <cc-icon class="is-angle" name="expr:angle" slot="before"></cc-icon>
                </cc-number-input>
                ${mY()}
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:radius" padded right-gap class="is-outer-radius is-inner-radius"></cc-icon>
                <cc-number-input id="outer-radius" title="Outer radius" .formatter=${aM} flex>
                    <cc-icon class="is-outer-radius" name="expr:outer" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="inner-radius" title="Inner radius" .formatter=${aM} flex>
                    <cc-icon class="is-inner-radius" name="expr:inner" slot="before"></cc-icon>
                </cc-number-input>
                ${fY("link-radius")}
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:roundness" padded right-gap class="is-outer-roundness is-inner-roundness"></cc-icon>
                <cc-number-input id="outer-roundness" title="Outer roundness" .formatter=${sM} flex>
                    <cc-icon class="is-outer-roundness" name="expr:outer" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="inner-roundness" title="Inner roundness" .formatter=${sM} flex>
                    <cc-icon class="is-inner-roundness" name="expr:inner" slot="before"></cc-icon>
                </cc-number-input>
                ${fY("link-roundness")}
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:rotate-star" padded right-gap class="is-outer-twirll is-inner-twirll"></cc-icon>
                <cc-number-input id="outer-twirll" title="Outer twirll" .formatter=${cM} flex>
                    <cc-icon class="is-outer-twirll" name="expr:outer" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="inner-twirll" title="Inner twirll" .formatter=${cM} flex>
                    <cc-icon class="is-inner-twirll" name="expr:inner" slot="before"></cc-icon>
                </cc-number-input>
                ${fY("link-twirll")}
            </cc-flex-row>
        </cc-flex-col>
        `}onValue(t){this.#tt.value=t.pin,this.#Qx.value=t.fillRule,this.#at.value=t.outerRadius,this.#lt.value=t.innerRadius,this.#Kx.value=t.outerCornerRadius,this.#Xx.value=t.innerCornerRadius,this.#tb.value=t.outerRotate,this.#eb.value=t.innerRotate,this.#st.value=t.sides||3,this.#ot.value=t.angle}onGlobal(t){this.#tt.value=null,this.#Qx.value=t.fillRule,this.#Kx.value=t.starOuterCornerRadius,this.#Xx.value=t.starInnerCornerRadius,this.#tb.value=t.starOuterRotate,this.#eb.value=t.starInnerRotate,this.#st.value=t.starSides}onGlobalStatusChanged(t){this.#tt.disabled=t,this.#at.disabled=this.#at.indeterminate=t,this.#lt.disabled=this.#lt.indeterminate=t,this.#ot.disabled=this.#ot.indeterminate=t,this.#qx.disabled=t}static get styles(){return[...super.styles,pA(gA(".is-angle",IY.angle.id),gA(".is-outer-radius",IY.outerRadius.id),gA(".is-inner-radius",IY.innerRadius.id),gA(".is-outer-roundness",IY.outerCornerRadius.id),gA(".is-inner-roundness",IY.innerCornerRadius.id),gA(".is-outer-twirll",IY.outerRotate.id),gA(".is-inner-twirll",IY.innerRotate.id))]}},"es-line-properties":class extends dA{constructor(){super(4)}#ib;#nb;#sb;#rb;init(){this.#ib=this.find("#x1"),this.#nb=this.find("#y1"),this.#sb=this.find("#x2"),this.#rb=this.find("#y2"),this.addLinkedProperties([{mode:"point",x:this.#ib,y:this.#nb,property:new NY(0)},{mode:"point",x:this.#sb,y:this.#rb,property:new NY(1)}])}render(){return Px`
        <cc-flex-col>
            <cc-flex-row>
                <cc-icon padded right-gap name="expr:line-tool" class="is-points"></cc-icon>
                <cc-number-input id="x1" title="From X" .formatter=${hM} flex>
                    <cc-icon name="expr:x1" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="y1" title="From Y" .formatter=${hM} flex>
                    <cc-icon name="expr:y1" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
            <cc-flex-row>
                <div fixed-32></div>
                <cc-number-input id="x2" title="To X" .formatter=${hM} flex>
                    <cc-icon name="expr:x2" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="y2" title="To Y" .formatter=${hM} flex>
                    <cc-icon name="expr:y2" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>
        `}onValue(t){this.#ib.value=t.from.x,this.#nb.value=t.from.y,this.#sb.value=t.to.x,this.#rb.value=t.to.y}onGlobal(){}onGlobalStatusChanged(t){this.#ib.disabled=this.#nb.disabled=this.#sb.disabled=this.#rb.disabled=t,this.#ib.indeterminate=this.#nb.indeterminate=this.#sb.indeterminate=this.#rb.indeterminate=t}static get styles(){return[...super.styles,pA(gA(".is-points",LY.points.id))]}},"es-polyline-properties":class extends dA{constructor(){super(4)}#Fg;#ob;#Qx;init(){this.#Fg=this.find("#count"),this.#ob=this.find("#closed"),this.#Qx=this.find("#winding")}render(){return Px`
        <cc-flex-col>
            <cc-flex-row>
                <cc-icon name="expr:path" class="is-points" padded right-gap></cc-icon>
                <div id="count" title="Points" flex></div>
                <cc-icon-switch id="closed" .items=${TY} @change=${this.#ab} compact emphasized></cc-icon-switch>
                ${mY()}
            </cc-flex-row>
        </cc-flex-col>
        `}#ab(t){tA(PY.closed,t.detail)}onValue(t){this.#Qx.value=t.fillRule,this.#ob.value=t.isClosed,this.#Fg.innerText=t.points.length.toString()}onGlobal(t){this.#ob.value=null,this.#Qx.value=t.fillRule,this.#Fg.innerText=""}onGlobalStatusChanged(t){this.#ob.disabled=t}static get styles(){return[...super.styles,pA(gA(".is-points",PY.points.id))]}},"es-path-properties":class extends dA{constructor(){super(4),IC(this,[[Jc,this.#lb]])}#cb=new qO;#Qx;#ub;#hb;init(){this.#Qx=this.find("#winding"),this.#ub=this.find("#x"),this.#hb=this.find("#y")}render(){return Px`
        <cc-flex-col>
            <cc-flex-row>
                <cc-icon name="expr:path" class="is-points" padded right-gap></cc-icon>
                <cc-number-input id="x" title="Node X" @start=${this.#Dd} @update=${this.#vo("x")} @end=${this.#Ed} flex>
                    <cc-icon name="expr:x" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="y" title="Node Y" @start=${this.#Dd} @update=${this.#vo("y")} @end=${this.#Ed} flex>
                    <cc-icon name="expr:y" slot="before"></cc-icon>
                </cc-number-input>
                ${mY()}
            </cc-flex-row>
        </cc-flex-col>
        `}#db;#fb;#di=new Map;#Dd(t){this.#db=this.#fb=t.detail;const e=this.#di;e.clear();for(const t of Th(gv)){const i=vm(t);i?.size&&e.set(t,i)}this.#cb.start()}#lb=()=>{const t=this.value;gv(t)&&t.document&&this.onValue(t)};#vo(t){const e={x:0,y:0};return i=>{if(e[t]=i.detail-this.#fb,e[t]){this.#fb=i.detail;for(const[t,i]of this.#di)Iv(t,e,i)}}}#Ed(t){this.#di.clear(),(this.#db!==t.detail||this.#cb.hasChanged)&&Jo()}onValue(t){this.#Qx.value=t.fillRule;const e=function(t){if(!gm.has(t))return null;const e=gm.get(t);if(!e.size)return null;if(e.has(0))return 0;const[i]=e;return i}(t),i=null==e||!t.nodes[e],n=this.#ub,s=this.#hb;if(n.disabled=n.indeterminate=n.inert=i,s.disabled=s.indeterminate=s.inert=i,!i){const i=t.globalMatrix.transformPoint(t.nodes[e].point);n.value=i.x,s.value=i.y}}onGlobal(t){this.#Qx.value=t.fillRule}onGlobalStatusChanged(t){}static get styles(){return[...super.styles,...zY,pA(gA(".is-points",jY.nodes.id))]}},"es-global-coords":class extends dA{#cb=new qO;#tt=is;#ub;#hb;#pb;#gb;constructor(){super([1,4,7]),IC(this,[[Qc,this.#Hd]])}init(){this.#ub=this.find("#x"),this.#hb=this.find("#y"),this.#pb=this.find("#w"),this.#gb=this.find("#h")}render(){return Px`
        <cc-flex-col>
            <cc-flex-row>
                <cc-pin-point id="pin" .value=${this.#tt} right-gap @change=${this.#mb} .valueMap=${hs}></cc-pin-point>
                <cc-number-input id="x" title="X" @start=${this.#Dd} @update=${this.#vo("x")} @end=${this.#Ed} flex>
                    <cc-icon name="expr:x" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="y" title="Y" @start=${this.#Dd} @update=${this.#vo("y")} @end=${this.#Ed} flex>
                    <cc-icon name="expr:y" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:size" right-gap padded></cc-icon>
                    <cc-number-input disabled inert id="w" title="Width" flex>
                        <cc-icon name="expr:w" slot="before"></cc-icon>
                    </cc-number-input>
                    <cc-number-input disabled inert id="h" title="Height" flex>
                        <cc-icon name="expr:h" slot="before"></cc-icon>
                    </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>
        `}#db;#fb;#vb;#Dd(t){this.#db=this.#fb=t.detail,this.#vb=ah(),this.#cb.start()}#vo(t){const e={x:0,y:0};return i=>{e[t]=i.detail-this.#fb,e[t]&&(this.#fb=i.detail,Gg(this.#vb,new ce(e.x,e.y)))}}#Ed(t){this.#vb=null,(this.#db!==t.detail||this.#cb.hasChanged)&&Jo()}#mb(t){this.#tt=t.detail,this.#Hd()}#Hd=Lt((()=>{const t=oh();if(!t||!t.isElement)return;const e=1===lh()?t.globalBounds:Eh??=function(){if(!nh.size)return Ve.ZERO;const t=ih;return t?.isElement?1===nh.size?t.globalBounds:Ve.fromIterablePoints(function*(t){for(const e of t)yield*e.globalBoundsPoints}(nh)):Ve.ZERO}(),i=this.#tt;this.#ub.value=e.left+i.x*e.width,this.#hb.value=e.top+i.y*e.width,this.#pb.value=e.width,this.#gb.value=e.height}));onValue(t){this.#Hd()}onGlobal(t){}onGlobalStatusChanged(t){}},"es-document-properties":class extends Cw{#pe;#j;#X;firstUpdated(){this.#pe=this.find("#title"),this.#j=this.find("#width"),this.#X=this.find("#height"),super.firstUpdated()}refresh(){this.#pe.value=$c.title||"";const t=Dk();this.#j.value=t.width,this.#X.value=t.height}render(){return Px`
<cc-flex-col>
    <cc-flex-row>
        <cc-icon name="workflow:ProjectNameEdit" padded right-gap></cc-icon>
        <cc-text-input id="title" placeholder="Name" maxlength="128" @change=${this.#Cp} flex></cc-text-input>
        <div fixed-32></div>
    </cc-flex-row>
    <cc-flex-row>
        <cc-icon name="expr:size" padded right-gap></cc-icon>
        <cc-number-input id="width" title="Width" .formatter=${rY} @end=${this.#jc} flex>
            <cc-icon name="expr:w" slot="before"></cc-icon>
        </cc-number-input>
        <cc-number-input id="height" title="Height" .formatter=${rY} @end=${this.#jc} flex>
            <cc-icon name="expr:h" slot="before"></cc-icon>
        </cc-number-input>
        <div fixed-32></div>
    </cc-flex-row>
</cc-flex-col>`}#Cp(t){lC(t.detail),this.#pe.blur()}#jc(){cC(this.#j.value,this.#X.value)}},"es-animation-properties":class extends Cw{#vx;#Km;firstUpdated(){this.#vx=this.find("#duration"),this.#Km=this.find("#fps"),super.firstUpdated()}refresh(){this.#vx.value=QO.duration,this.#vx.fps=this.#Km.value=QO.fps}render(){return Px`
<cc-flex-col>
    <cc-flex-row>
        <cc-icon name="workflow:Stopwatch" padded right-gap></cc-icon>
        <cc-time-input id="duration" title="Duration" min="1" @change=${this.#um} flex></cc-time-input>
        <cc-picker id="fps" title="Frame rate" @change=${this.#fm} .items=${vB} flex></cc-picker>
        <div fixed-32></div>
    </cc-flex-row>
</cc-flex-col>
        `}#um(t){VR(t.detail)}#fm(t){this.#vx.fps=t.detail,HR(t.detail)}},"es-timeline-control":tY,"es-easing-control":sY,"es-export-image":class extends kB{#yb=!1;constructor(){super(jB)}render(){return Px`<cc-flex-col>
            <cc-flex-row>
                <div class="label">Format</div>
                ${this.renderFormat()}
            </cc-flex-row>
            ${this.#xb()}
            ${this.renderCommonSettings()}
        </cc-flex-col>
        `}onFormatChanged(){}#xb(){return this.#bb()}#bb(){return 1!==this.common.format?Ax:Px`
        <cc-flex-row>
            <div class="label">Transparency</div>
            <cc-switch .checked=${this.#yb} @change=${this.#wb}></cc-switch>
            <cc-flex-col>Use background color as transparent color</cc-flex-col>
        </cc-flex-row>
        `}#wb(t){this.#yb=t.detail}getClient(t){const e=this.common,i=this.getCommonSettings();let n;switch(e.format){case 1:n="/assets/animator/export/gif.js",this.#yb&&(i.transparent=[e.background.r,e.background.g,e.background.b]);break;case 0:n="/assets/animator/export/apng.js"}return new LB(i,t,null,n)}validate(){return!0}async onSuccess(t,e,i){this.showPreview({file:await t.getFile(),type:"image",width:e,height:i})}},"es-export-video":class extends kB{#Mb={codec:null,quality:1,keyframeInterval:0,keyframeCount:0};constructor(){super(NZ),this.common.background=se.white}onFormatChanged(){this.#Mb.codec=this.item.codecs[0].value}render(){return Px`<cc-flex-col>
            ${this.#Sb()}
            ${this.renderCommonSettings()}
        </cc-flex-col>
        `}applyConstraints(){super.applyConstraints();const t=this.#Mb;switch(t.codec??=this.item.codecs[0].value,t.keyframeInterval){case 0:t.keyframeCount=0;break;case 2:t.keyframeCount=this.common.fps;break;case 1:t.keyframeCount=Math.floor(this.common.fps/2);break;case 3:t.keyframeCount||(t.keyframeCount=this.common.fps)}}#Sb(){const t=this.#Mb;return Px`
        <cc-flex-row>
            <div class="label">Format</div>
            ${this.renderFormat()}
            <cc-picker id="codec" title="Codec" .value=${t.codec} .items=${this.item.codecs} @change=${this.#kb} flex></cc-picker>
        </cc-flex-row>
        <cc-flex-row>
            <div class="label">Quality</div>
            <cc-picker title="Quality level" .value=${t.quality} .items=${CZ} @change=${this.#_b} flex></cc-picker>
            <cc-picker title="Keyframing mode" .value=${t.keyframeInterval} .items=${LZ} @change=${this.#Ib} flex></cc-picker>
            <cc-number-input title="Frame interval" .disabled=${3!==t.keyframeInterval} .value=${t.keyframeCount} @update=${this.#Cb} .formatter=${IZ} flex></cc-number-input>
        </cc-flex-row>
        `}#kb(t){this.#Mb.codec=t.detail}#_b(t){this.#Mb.quality=t.detail}#Ib(t){this.#Mb.keyframeInterval=t.detail,this.applyConstraints(),this.requestUpdate()}#Cb(t){this.#Mb.keyframeCount=t.detail}getClient(t){const e=this.common,i=this.#Mb,n={...this.getCommonSettings(),alpha:e.background.a<1,quality:i.quality,keyframe:i.keyframeCount,codec:null};let s;switch(e.format){case 0:n.codec="avc",s="/assets/animator/export/mp4.js";const e=n.size;(e.width%2||e.height%2)&&(e.width-=e.width%2,e.height-=e.height%2,t.size=new di(e.width,e.height)),n.alpha=!1;break;case 1:n.codec=1===i.codec?"vp8":"vp9",s="/assets/animator/export/webm.js"}return new LB(n,t,null,s)}validate(){return!0}async onSuccess(t,e,i){this.showPreview({file:await t.getFile(),type:"video",width:e,height:i})}},"es-export-sequence":class extends kB{#Lb="img-";#Nb=!1;constructor(){super(zB)}validate(){return!0}onFormatChanged(){}render(){return Px`<cc-flex-col>
            ${this.#jb()}
            ${this.renderCommonSettings()}
        </cc-flex-col>
        `}#jb(){return Px`
<cc-flex-row>
    <div class="label">Format</div>
    ${this.renderFormat()}
    <cc-text-input title="File prefix" placeholder="File prefix" .value=${this.#Lb} @change=${this.#zb} flex></cc-text-input>
</cc-flex-row>
<cc-flex-row>
    <div class="label"></div>
    <cc-switch .checked=${this.#Nb} @change=${this.#Pb}></cc-switch>
    <div>Remove all files from directory before export</div>
</cc-flex-row>
`}#zb(t){this.#Lb=t.detail}#Pb(t){this.#Nb=t.detail}getClient(t){const e="/assets/animator/export/seq.js",i=this.item,n=this.common,s={...this.getCommonSettings(),clean:this.#Nb,prefix:this.#Lb,extension:i.extension,image:i.image||null};return 5===n.format?new NB(s,t,null,e):new LB(s,t,null,e)}onSuccess(t,e,i){}},"es-export-svg":class extends SB{#Tb=!0;#Ab=0;#Db=0;#Eb=2;#Ob={click:0,enter:0,leave:0};#Tc;#B=0;#E={x:2,y:2};constructor(){super(_Z);const t=t=>this.#B===t,e=(e,i)=>({title:e,get value(){return t(i)},selectable:!0,preventClose:!0,action:()=>{this.#B=i}}),i=(t,e)=>this.#E[t]===e,n=(e,n,s)=>({title:e,get value(){return i(n,s)&&!t(3)},get disabled(){return t(3)},selectable:!0,preventClose:!0,action:()=>{this.#E[n]=s}});this.#Tc=["Scale mode",e("Clip & Contain",0),e("Contain",1),e("Cover",2),e("Fill",3),"Align horizontally",n("Left","x",1),n("Center","x",2),n("Right","x",3),"Align vertically",n("Top","y",1),n("Middle","y",2),n("Bottom","y",3)]}onFormatChanged(){}render(){return Px`<cc-flex-col>
            <cc-flex-row>
                <div class="label">Format</div>
                ${this.renderFormat()}
                <cc-action-button quiet @click=${this.#Wb}>
                    <cc-icon name="workflow:Settings"></cc-icon>
                </cc-action-button>
            </cc-flex-row>
            <cc-flex-row>
                <div class="label">Image format</div>
                ${this.renderImageFormat()}
            </cc-flex-row>
            ${this.#Qp()}
            ${this.renderCommonSettings()}
        </cc-flex-col>
        `}#Wb(t){ky(this.#Tc,t.target,"bottom-right",!0)}#Qp(){switch(this.common.format){case 0:return this.#Rb();case 2:return this.#Bb();case 1:return this.#Ub()}return Ax}#$b(t){return Px`<cc-flex-row>
            <div class="label">${t}</div>
            <cc-picker .value=${this.#Tb} .items=${kZ} @change=${this.#Fb} flex></cc-picker>
        </cc-flex-row>`}#Fb(t){this.#Tb=t.detail,this.requestUpdate()}#Ub(){return[Px`
        <cc-flex-row>
            <div class="label">Start animation</div>
            <cc-picker .value=${this.#Ab} .items=${MZ} @change=${this.#Vb} flex></cc-picker>
        </cc-flex-row>
        `,this.#Hb()]}#Hb(){return 2===this.#Ab?Px`<cc-flex-row>
                <div class="label"></div>
                <div flex>Update the CSS variable <b>--animation-progress</b> using a value between 0 and 1.</div>
            </cc-flex-row>`:1===this.#Ab?this.#$b("On mouse out"):[Px`<cc-flex-row>
                <div class="label">On mouse over</div>
                <cc-picker .value=${this.#Db} .items=${SZ} @change=${this.#Gb} flex></cc-picker>
            </cc-flex-row>`,this.common.repeat?this.#$b("On animation end"):Ax]}#Vb(t){this.#Ab=t.detail,this.#Tb=!0,this.requestUpdate()}#Gb(t){this.#Db=t.detail,this.requestUpdate()}#Bb(){return this.common.repeat?this.#$b("On animation end"):Ax}#Rb(){return Px`
            <cc-flex-row>
                <div class="label">Start animation</div>
                <cc-picker .value=${this.#Eb} .items=${wZ} @change=${this.#Zb} flex></cc-picker>
            </cc-flex-row>
            <cc-flex-row>
                <div class="label">Mouse interaction</div>
                <cc-flex-col class="input-group" flex>
                    <div>On click</div>
                    <cc-picker .value=${this.#Ob.click} .items=${bZ} data-on="click" @change=${this.#Yb}></cc-picker>
                </cc-flex-col>
                <cc-flex-col class="input-group" flex>
                    <div>On mouse enter</div>
                    <cc-picker .value=${this.#Ob.click} .items=${bZ} data-on="enter" @change=${this.#Yb}></cc-picker>
                </cc-flex-col>
                <cc-flex-col class="input-group" flex>
                    <div>On mouse leave</div>
                    <cc-picker .value=${this.#Ob.click} .items=${bZ} data-on="leave" @change=${this.#Yb}></cc-picker>
                </cc-flex-col>
            </cc-flex-row>
        `}#Yb(t){const e=t.target.dataset.on;this.#Ob[e]=t.detail}#Zb(t){this.#Eb=t.detail,this.applyConstraints(),this.requestUpdate()}validate(){return!0}async abort(){return!1}async execute(t){const e=await this.getFile();if(!e)return 1;let i,n;switch(this.common.format){case 1:i=tF,n={...this.common,freeze:this.#Tb,start:this.#Ab,onHover:this.#Db};break;case 2:i=y$,n={...this.common,repeatDur:0,freeze:this.#Tb};break;case 0:i=BU,n={...this.common,load:this.#Eb,actions:[this.#Ob.click,this.#Ob.enter,this.#Ob.leave],filterFuncs:!0}}n.align=this.#E,n.scale=this.#B,n.size=null;try{const t=await e.createWritable(),s=await i($c,QO,n);await t.write(new Blob([s.outerHTML],{type:"image/svg+xml"})),await t.close(),this.showPreview({file:await e.getFile(),type:"svg",width:n.bounds.width,height:n.bounds.height})}catch(t){return console.error(t),BC(t),2}return 0}},"es-export-lottie":class extends SB{constructor(){super(jZ)}onFormatChanged(){}render(){return Px`<cc-flex-col>
            <cc-flex-row>
                <div class="label">Format</div>
                ${this.renderFormat()}
            </cc-flex-row>
            <cc-flex-row>
                <div class="label">Image format</div>
                ${this.renderImageFormat()}
            </cc-flex-row>
            ${this.renderCommonSettings()}
        </cc-flex-col>
        `}validate(){return!0}async abort(){return!1}async execute(t){const e=await this.getFile();if(!e)return 1;const i={...this.common};try{const t=await e.createWritable();await(1===this.common.format?bG:xG)(t,$c,QO,i)}catch(t){return console.error(t),BC(t),2}return 0}}};function OY(){const t=new qg;return t.title="",Hm(t),Ao({document:t,timeline:new EO,board:new Ve(0,0,1280,720)})}class WY extends py{getInput(){return ch()?null:ah()}#Qb;getData(t){return t?.length?(this.#Qb=t[0].nodeType,this.#Jb(t)):null}createManifest(t){const e=super.createManifest(t);return e.nodeType=this.#Qb,e.source=$c.id,e}createData(){return{images:new Set,fonts:new Set,elements:new Map}}*iterateAllData(t){if(t.images&&t.images.size>0)for(const e of t.images)yield[1,e.getBlob()];t.fonts&&t.fonts.size>0&&(yield[4,t.fonts]),t.elements&&t.elements.size>0&&(yield[6,t.elements])}#Jb(t){if(0===t.length)return null;const e=this.createData(),i=[$c.id];return this.#qb(yu(t,!1,!0),e,i,(t=>{let i=t.parent?.globalMatrix;i&&!i.isIdentity||(i=null),e.elements.set(t.id,{element:t,parentMatrix:i})})),0===e.elements.size?null:e}#qb(t,e,i,n){if(t)for(const s of t)this.collectNodeData(s,e,i),s.hasFragments&&this.#qb(s.fragments,e,i),s.hasChildren&&this.#qb(s.children(),e,i),n?.(s,e,i)}collectNodeData(t,e,i){if(!t.isElement)return!0;if(t instanceof gg){const i=t.imageResource;return!!i&&(e.images.add(i),!0)}return t instanceof Sg&&t.collectFonts(e.fonts),!0}}class RY extends my{constructor(){super(...arguments),this.#di=new Map,this.#Kb=new Set,this.idsOldToNew=new Map,this.idsNewToOld=new Map,this.transformScaleOptions=2}#di;#Kb;#Xb;supportsItem(t){switch(t){case 1:case 6:case 4:return!0}return!1}addItem(t,e){1===t?this.#Kb.add(e):this.#di.set(t,e)}async resolve(){if(!this.#di.has(6))return!1;if(3===this.manifest.nodeType||4===this.manifest.nodeType){if(ch())return Zr(lo,"Select an element before pasting filters"),!1;if(!oh()?.supportsFilters)return Zr(uo,"Selection does not support filters"),!1}let t,e;try{const i=await this.deserializeItem(4);i?.size&&(await Zs(...i),i.clear()),this.#Xb=await this.#tw();const n=await this.deserializeItem(6);if(!n)return this.#ew(null),!1;if([t,e]=await this.#iw(n),!t?.length)return e?.clear(),Zr(lo,"Clipboard is empty"),!1;zo();const s=function(t,e,i,n,s){let r;if(e){const e=new Set;for(const i of t){if(!i.isElement){s?.delete(i);continue}let t=s?.get(i);t=t?t.clone().multiply(i.localMatrix):i.localMatrix.clone(),t?.isIdentity&&(t=null);for(const n of i.localBoundsPoints)e.add(t?t.transformPoint(n):n)}const o=Ve.fromIterablePoints(e);e.clear(),r=dl(o,Vu(!1),i,null,n)}else r=Vu(!0);return r?.isIdentity&&(r=null),r}(t,!this.options?.isShift,this.options?.position,this.options?.isAlt,e);for(const i of t){if(!i.isElement)continue;let t;e.has(i)?(t=e.get(i),s&&(t=t.clone().preMultiply(s))):t=s,this.applyMatrixToElement(i,t)}return e.clear(),gh(this.appendResolvedNodes(t)),this.#Xb=null,!0}catch(i){return e?.clear(),this.#ew(t),!1}}#ew(t){if(this.#Xb){const t=dg();for(const e of this.#Xb)t.delete(e.id);this.#Xb=null}if(t?.length>0)for(const e of t.splice(0))try{e.remove(),e.dispose()}catch{}}applyMatrixToElement(t,e){zg(t,e||new hi,this.transformScaleOptions,!0)}appendResolvedNodes(t){return this.#nw($c,t),t[0].isFilterContainer?this.#sw(t):t[0].isFilter?this.#rw(t):t[0].isLayer?this.#ow(t):this.#aw(t)}#sw(t){const e=oh();let i=!1,n=e.filters;n||(n=t.shift(),i=!0);const s=[];for(const e of t){const t=[...e.children()];if(s.push(...t),n.insertAdjacentNodes("append",...t),e.hidden||!e.visible)for(const e of t)e.hidden=!0;e.remove(),e.dispose()}return Um(),i?(e.filters=n,[e.filters]):s}#rw(t){const e=oh();let i=!1,n=e.filters;return n||(i=!0,n=e.filters=new vu),n.insertAdjacentNodes("append",...t),Um(),i?[n]:t}#ow(t){return $c.insertAdjacentNodes("append",...t),Um(),t}#aw(t){return Gm(t),t}#nw(t,e){for(const[i,n]of function(t,e){const i=new Map,n=t.nodeCache,s=t=>{const e=t.id;if(t.id=Ct(),n.has(e)&&n.get(e)===t&&n.delete(e),n.set(t.id,t),i.set(t,e),t.hasFragments)for(const e of t.fragments)s(e);if(t.hasChildren)for(const e of t.children())s(e)};for(const t of e)s(t);return i}(t,e))this.idsOldToNew.set(n,i.id),this.idsNewToOld.set(i.id,n)}shouldWrapInGroup(t){return!t.isTransformable}async#iw(t){const e=[],i=new Map,n=Au();for(let{parentMatrix:s,element:r}of t.values())this.#lw(r)?(n&&r.isLayer&&(r=iv(r,!0)),e.push(r),s&&r.isElement&&i.set(r,s)):this.#cw(r);return[e,i]}async#tw(){const t=new Set,e=dg();for(const i of this.#Kb){const n=await ug.idFromData(i);if(e.has(n))continue;const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength),r=Skia.SkImage.MakeFromEncoded(s);if(!r)continue;const o=new ug(r,n);e.add(o)?t.add(o):o.dispose()}return this.#Kb.clear(),t.size>0?t:null}#uw(t){const e=[...t.children()];for(let t=0;t<e.length;t++)this.#lw(e[t])&&(e.splice(t,1),t--);for(const t of e)this.#cw(t)}#lw(t){return t.supportsFilters&&t.filters&&(this.#lw(t.filters)||this.#cw(t.filters)),t.hasChildren&&this.#uw(t),!0}#cw(t){t.remove(),t.dispose()}async deserializeItem(t){if(!this.#di.has(t))return null;const e=this.#di.get(t);return this.#di.delete(t),this.deserializeData(e)}clean(){this.#di.clear(),this.#Kb.clear(),this.#Xb=null,this.idsOldToNew.clear(),this.idsNewToOld.clear(),super.clean()}}ly(new class extends vy{constructor(){super(...arguments),this.reverseKeyframes=!1}isAvailable(){return!ch()||(Zr(lo,"Select an element before pasting"),!1)}handle(t){if(!QO)return!1;const e=function(t,e){const i=cW;if(e)for(const e of t.values())eO(Nt(e)?e:e.list,!0);const n=[];for(const e of Th(lO))for(const[s,r]of t.entries()){let t,o;if(Nt(r)?t=r:(t=r.list,o=r.meta),0===t.length)continue;let a=QO.getAnimation(e,s);if(a){if(rR.has(s)&&!rR.get(s)(a.keyframes[0].value,t[0].value))continue}else{if(a=QO.createAnimation(e,s),!a)continue;if(!QO.addAnimation(e,a))continue}const l=null!=o?oR.get(s)?.(o,e,a):null;for(let e of t)e=e.clone(!0),e.offset+=i,l?.(e),a.addKeyframe(e),n.push(e)}return n}(t,this.options?.isAlt);return e?.length?(zo(),Zr(VO),oW(e,!1),xW(),!0):(Zr(uo,"Selection doesn't support clipboard data"),!1)}}(Eo,"web expressive/keyframes"),new class extends gy{getInput(){const t=function(){const t=new Map;if(aR(((e,i,n)=>{const s=i.animator.id;if(!t.has(s))return void t.set(s,n);const r=t.get(s);rR.has(s)&&!rR.get(s)(r[0].value,n[0].value)||r.push(...n)}),null,!1),0===t.size)return t;let e=Number.POSITIVE_INFINITY;for(const i of t.values()){i.sort(tO);for(let t=i.length-1;t>0;t--)i[t].offset===i[t-1].offset&&i.splice(t,1);i[0].offset<e&&(e=i[0].offset)}if(isFinite(e)&&0!==e)for(const i of t.values())for(let t=0;t<i.length;t++)i[t]=i[t].clone(),i[t].offset-=e;return t}();return t?.size?t:null}getData(t){return t}}(Eo,"web expressive/keyframes"),lR),ly(new class extends vy{isAvailable(){return!tW()||(Zr(lo,"Select at least one keyframe"),!1)}handle(t){return this.options?.isAlt&&(t=t.inverse),cR(t)}}(Eo,"web expressive/easing"),new class extends gy{getInput(){return null}getData(t){return t}}(Eo,"web expressive/easing"),null),ly(new class extends RY{#hw;constructor(t,e){super(t,e),this.transformScaleOptions=0}supportsItem(t){return 100===t||super.supportsItem(t)}async resolve(){return this.#hw=await this.deserializeItem(100),super.resolve()}appendResolvedNodes(t){const e=super.appendResolvedNodes(t);if(this.#hw?.size){const t=(i=[...this.#hw.values()],n=this.idsOldToNew,WO(i,QO.map,$c,n,void 0));this.#hw.clear(),t&&xW()}var i,n;return e}applyMatrixToElement(t,e){e&&!e.isIdentity&&zg(t,e,0)}shouldWrapInGroup(t){if(!t.isTransformable)return!0;if(!this.#hw?.size)return!1;const e=this.idsNewToOld.get(t.id);if(!e)return!1;const i=this.#hw.get(e);if(!i||!i.animations?.length)return!1;for(const t of i.animations)if(t.animator.startsWith("node.transform."))return!0;return!1}clean(){this.#hw=null,super.clean()}}(Eo,"web expressive/elements"),new class extends WY{createData(){const t=super.createData();return t.animations=new Map,t}*iterateAllData(t){yield*super.iterateAllData(t),t.animations&&t.animations.size>0&&(yield[100,t.animations])}collectNodeData(t,e,i){super.collectNodeData(t,e,i);const n=QO.getEntry(t);return n&&e.animations.set(t.id,n),!0}}(Eo,"web expressive/elements"),Qm),PI.push({description:"Supported file types",accept:{"application/vnd.expressive.animator":[".eaf"],"application/vnd.expressive.canvas":[".ecf"],"image/svg+xml":[".svg"],"application/pdf":[".ai",".pdf"],"application/postscript":[".ai"],"image/png":[".png"],"image/jpeg":[".jpeg",".jpg"],"image/webp":[".webp"]}}),TI.push({description:"Importable file types",accept:{"application/vnd.expressive.canvas":[".ecf"],"image/svg+xml":[".svg"],"application/pdf":[".ai",".pdf"],"application/postscript":[".ai"],"image/png":[".png"],"image/jpeg":[".jpeg",".jpg"],"image/webp":[".webp"]}});let BY=0;ka((t=>("Space"!==t.code||Ll instanceof DN&&Ll.isEditorFocused||("keydown"===t.type?t.repeat||(BY=t.timeStamp):"keyup"===t.type&&t.timeStamp-BY<=300&&(uW?_W():kW())),!1))),ka((function(t,e){const i=$a(e);return!!Ll&&(i&&!Ll.isPanning&&Ll.onKeyboardStatusChange(t,"keydown"===t.type),"keydown"===t.type?("Space"===t.code&&Ll.allowSpaceBarPan&&Ll.startPan(2),!!Ll.isPanning||Ll.onKeyDown(t)):"keyup"===t.type&&("Space"===t.code&&Ll.allowSpaceBarPan?(Ll.endPan(2),!0):!!Ll.isPanning||Ll.onKeyUp(t)))}));const UY=_L(TT),$Y=_L(yT);[["V",0,()=>tE("transform"),0],["A",0,()=>tE("path"),0],["P",0,()=>tE("pen"),0],["N",0,()=>tE("pencil"),0],["R",0,()=>tE("rect"),0],["E",0,()=>tE("ellipse"),0],["O",0,()=>tE("regular-polygon"),0],["S",0,()=>tE("star"),0],["W",0,()=>tE("poly"),0],["L",0,()=>tE("line"),0],["T",0,()=>tE("text"),0],["G",0,()=>tE("gradient"),0],["I",0,()=>tE("color-picker"),0],["Z",0,()=>tE("zoom"),0],["H",0,()=>tE("pan"),0],["F1",0,()=>aC(),0],["F",1,()=>vI.toggle(),0],["P",1,()=>DI(),0],["N",1,()=>AI(),0],["O",1,()=>EI(),0],["I",1,()=>BI(),0],["S",1,()=>RI(!1),0],["S",3,()=>RI(!0),0],["E",1,()=>nC(),0],["Z",1,FI,0],["Z",3,VI,0],["V",1,()=>Wk(!1,!1),0],["V",5,()=>Wk(!0,!1),0],["V",3,()=>Wk(!1,!0),0],["Y",1,()=>function(t){const e=mI;e.value=e.value===t?null:t}("layers"),0],["A",1,()=>Fk(),0],["A",3,()=>Vk(),0],["0",1,Hk,0],["9",1,function(){ol(Wh())},0],["8",1,function(){ol(oh()?.globalBounds.bounds)},0],["=",1,Gk,0],["=",3,Gk,0],["=",7,Gk,0],["-",1,Zk,0],["-",3,Zk,0],["-",7,Zk,0],["X",0,()=>dI.toggle(),0],["X",2,()=>Kk(!1),0],["X",6,()=>Kk(!0),0],["K",1,l_,0],["H",1,v_,0],["C",1,Ok,1],["X",1,Ek,1],["D",1,P_,1],[["Delete","Backspace"],0,()=>{mm()?T_():F_()},1],["G",1,D_,1],["G",3,E_,1],["M",1,W_,1],["M",5,O_,1],["M",3,R_,1],[",",1,z_,1],["L",1,j_,1],["]",1,Yk,1],["]",3,Qk,1],["[",1,Jk,1],["[",3,qk,1],["R",1,()=>$Y(FN,"ruler"),1],[";",1,()=>$Y(Ik,"enabled"),1],[";",5,()=>$Y(Ik,"locked"),1],["'",1,()=>$Y(yk,"enabled"),1],["'",5,()=>$Y(yk,"front"),1],["S",2,()=>UY(lk,"enabled"),1],[",",3,()=>UY(lk,"pixel"),1],[";",3,()=>UY(Ik,"snap"),1],["'",3,()=>UY(yk,"snap"),1],[".",3,()=>UY(LL,"points"),1],["/",3,()=>UY(LL,"bounds"),1],["\\",3,()=>UY(Ak,"snap"),1],["C",1,BR,2],["X",1,UR,2],["D",1,()=>PR(!1),2],["D",5,()=>PR(!0),2],["R",1,TR,2],[["Delete","Backspace"],0,()=>{tW()?mm()?T_():F_():zR()},2],["ArrowRight",1,()=>qW(!0),2],["ArrowDown",1,()=>qW(!1),2],["ArrowLeft",1,()=>KW(!0),2],["ArrowUp",1,()=>KW(!1),2]].forEach((([t,e,i,n])=>function(t,e,i,n=0){xa.has(n)||xa.set(n,new Map);const s=xa.get(n);s.has(e)||s.set(e,new Map);const r=s.get(e);if(Array.isArray(t))for(const e of t)r.set(e,i);else r.set(t,i)}(t,e,i,n)));const FY=new Set([vs.movePointsBy]),VY=new Set([vs.addPointAfter,vs.deletePoints]);zv=(t,e,i)=>{if(FY.has(e))return!1;let n;if(VY.has(e)){const s=t.points.length;n=t=>t.length===s?t:e(t,...i)}else n=t=>e(t,...i);return ZY(t,ep.id,n)};const HY=new Set([wn,mn,vn]),GY=new Set([In,Nn]);function ZY(t,e,i){const n=QO.getAnimation(t,e);if(!n)return!1;let s=!1;return n.keyframes.forEach((e=>{const r=i(e.value,n,t);r!==e.value&&(n.setKeyframeValue(e,r),s=!0)})),s}fv=(t,e,i)=>{if(HY.has(e))return!1;let n;if(GY.has(e)){const s=t.nodes.length;n=t=>t.length===s?t:e(t,...i)}else n=t=>e(t,...i);return ZY(t,Hd.id,n)},pv=function(t){if(!gv(t))return!1;let e=!1;const i=t.nodes,n=i.length;return ZY(t,Hd.id,(t=>{if(i===t)return t;let s=!1;for(let r=0;r<n;r++){if(i[r].type!==t[r].type||i[r].joint!==t[r].joint||1===i[r].joint)continue;const n=i[r].handleIn&&!t[r].handleIn,o=i[r].handleOut&&!t[r].handleOut;(n||o)&&(s||(t=t.slice(),s=!0,e=!0),t[r]=t[r].withHandles(t[r].handleIn||t[r].point,t[r].handleOut||t[r].point))}return t})),e},function(...t){for(const e of t)Il.set(e.name,e)}(new class extends aN{#cb=new qO;#dw=!0;#fw;constructor(t){super([[null,"selection"],[0,"selection"],[1,"selection-move"],[4,"selection-move"],[5,"selection-resize"],[6,"rotate"],[3,()=>Ra?"selection-anchor":"selection-move"],[2,t=>t.isHorizontal?"resize-v":"resize-h"],[7,WW]],[[5,(t,e)=>t.element===e.element&&t.handle===e.handle],[6,(t,e)=>t.element===e.element&&t.point===e.point],[7,RW]]),this.#fw=t,this.addAction(0,uN(null,this.#pw)),this.addAction(1,this.#gw),this.addAction(2,{draw:AL(this.#mw),down:this.#vw,move:this.#yw,up:this.#xw}),this.addAction(5,{down:this.#bw,move:this.#ww,up:this.#Mw}),this.addAction(6,{draw:AL(this.#Sw),down:this.#kw,move:this.#_w,up:this.#Iw}),this.addAction(3,{down:this.#Cw,move:this.#Lw,up:this.#Nw}),this.addAction(4,{draw:AL(this.#jw),down:this.#zw,move:this.#Pw,up:this.#Tw}),this.addAction(7,this.#Aw),Tc("transform-rotate",1,"gray"),Dc("transform-rotate-radius",2),Dc("transform-rotate-offset",10),Tc("transform-origin",1,"magenta"),Dc("transform-origin-radius",6),Ac("transform-origin-bg","#fff"),Ac("transform-angle","#fb08")}get handleMoveByArrows(){return Ma!==this.#fw}get name(){return"transform"}get showMotionPath(){return this.#dw}set showMotionPath(t){this.#dw!==t&&(this.#dw=t,this.update())}get allowGuideCreation(){return!0}activate(){super.activate(),Yr(UO,this.#Dw),Yr(io,this.#Ew),Yr(su,this.#Ow),zW()}deactivate(){super.deactivate(),Qr(su,this.#Ow),Qr(io,this.#Ew),Qr(UO,this.#Dw),NW=jW=null,EW()}onSelectionChanged(){zW(),super.onSelectionChanged()}onStateChanged(){zW(),super.onStateChanged()}onDocumentTreeChanged(){zW(),super.onDocumentTreeChanged()}#Ow=t=>{NW&&t.has(NW)&&EW(dW)};#Dw=()=>{PW(),this.#dw&&!CW.isEmpty&&Bl()};#Ew=()=>{zW(),this.#dw&&!CW.isEmpty&&Bl()};onKeyboardStatusChange(t){this.isWorking||(Ha(t)||Va(t))&&this.updateCursor()}getHoverInfo(t){if(!this.isMouseInside)return OW;const e=function(t){const e=Sk;if(!e||e.isEmpty)return null;const i=Ik();if(!i.enabled||i.locked)return null;const n=2*Xa/Ka;for(const i of e)if(i.isHorizontal){if(Math.abs(i.position-t.y)<=n)return i}else if(Math.abs(i.position-t.x)<=n)return i;return null}(t);if(e)return[2,e];const i=this.#Ww();if(i){if(function(t,e){return e.distanceTo(FW(t))<=Wc("transform-origin-radius")}(i,t))return[3,i];const e=function(t,e){return t.getSidePointPosition(e,Wc("tool-handle-radius"),!1)}(i.globalBounds,t);if(e)return[5,{handle:e,element:i}];const n=function(t,e){const i=(Pc.get("transform-rotate-radius").original+2)/Nc,n=Wc("transform-rotate-offset"),s=t.globalBounds;for(const t of s.points)if(e.distanceTo($W(s.middle,t,n))<=i)return t;return null}(i,t);if(n)return[6,{element:i,point:n}];if(this.#dw){const e=function(t){if(CW.nodes.length<2)return null;const e=Mu(NW);e&&(t=e.inversePoint(t.x,t.y));const i=Rc("path-node-radius",e),n=LW.size?Rc("path-handle-radius",e):null,s=CW.getPositionInfo(t,i,n,i);return!s||null!=s.handle&&!LW.has(s.index)?null:(s.element=NW,s.animation=jW,s)}(t);if(e)return[7,e]}}const n=KL(t,Ra);return n?!Ba&&hh(n)?[4,n]:[1,n]:OW}drawTool(){const[t,e]=this.hover;let i=null;1!==t&&4!==t||hh(e)||(i=e);let n=oh();if(n?.isElement||(n=null),!i&&!n)return;const s=TL();this.#Rw(i,n,zh()),s.restore()}#Rw=(t,e,i)=>{const n=Kl();if(t&&OL(t),e){for(const t of i)t!==e&&WL(t,!1);e.isTransformable?(this.#dw&&BW(),WL(e,!0),function(t,e){const i=Oc("transform-rotate"),n=Wc("transform-rotate-radius"),s=Wc("transform-rotate-offset"),r=e.globalBounds;for(const e of r.points)t.drawCircle($W(r.middle,e,s),n,i)}(n,e),VW(n,e)):WL(e,!1)}};#Ww(){const t=oh();return t&&t.isElement&&t.isTransformable?t:null}#pw=(t,e)=>{if(this.#dw&&t.position.equals(e)){const t=TW();if(t?.length&&sW(t))return!0}return!1};#gw=(t,e)=>{if(Ba?wh(e,!0):ph(e,!1),!hh(e))return cN;const i=this.#zw(t,e);return i.drawIfMoved=!0,[{draw:AL(this.#jw),move:this.#Pw,up:this.#Tw},i]};#jw=t=>{if(t.drawIfMoved&&!t.moved)return this.#Rw(t.element,t.element,t.selected);1===t.selected.length?(WL(t.element,!1),this.#dw&&BW(),VW(Kl(),t.element)):t.delta.isZero?RL(t.commonBox,!1):RL(t.commonBox.shifted(t.delta.x,t.delta.y),!1)};#zw=(t,e)=>{zl("selection-move");const i=[...zh()],n=tN(i);return Sh(e),this.#cb.start(),{start:[e.position,e.anchor],position:t.position,delta:ce.ZERO,commonBox:n,moved:!1,drawIfMoved:!1,cloned:!1,element:e,selected:i}};#Pw=(t,e,i)=>{if(i){if(Ua){zo(),aa(),e.cloned=!0;const t=[];let i;for(const n of e.selected){const s=Jm(n)||n;t.push(s),n===e.element&&(i=s)}e.element=i,e.selected=t,gh(t),Sh(i),la(),Rl()}ES(e.selected)}let n=t.position.sub(e.position);if(n.isZero)return;n=Ba?function(t,e){if(!jS)return e;e=sk(t.sidePoints(!0),e,ek(e.angle,!0));const i=t.middle;return wS(i.add(e),i),e}(e.commonBox,n):KS(e.commonBox,n);const s=e.delta;if(n.equals(s))return;e.delta=n,n=n.sub(s);const r=Ra;Gg(e.selected,n,r)&&(r||e.moved||(e.moved=!0,AW()),Bl())};#Tw=(t,e)=>{if(OS(),e.cloned||this.#cb.hasChanged())return!0;const[i,n]=e.start,s=!i.equals(e.element.position)||!n.equals(e.element.anchor);return e.moved||Ba||ph(e.element,!1),Bl(),s};onMoveByArrowsFinish(t){Jo()}#Cw=(t,e)=>{const i=Ra,n=[...zh()],s=e.position;let r=s;const o=Mu(e);return o&&(r=o.transformPoint(r)),ES(),this.#cb.start(),{start:s,detached:i,parentMatrix:o,angleReference:r,element:e,selected:n,moved:!1}};#Lw=(t,e)=>{let i;i=Ba?tk(t.position,e.angleReference):qS(t.position);const n=i.sub(e.parentMatrix?e.parentMatrix.transformPoint(e.element.position):e.element.position);if(n.isZero)return;let s;s=e.detached?function(t,e){if(e.isZero)return!1;let i=!1;for(const n of t)Qg(n,n.position.add(Jg(n,e)),void 0)&&(i=!0);return i}(e.selected,n):Gg(e.selected,n,!1),s&&(e.moved||(e.moved=!0,this.#dw&&AW()),Rl())};#Nw=(t,e)=>(OS(),!!this.#cb.hasChanged()||!e.start.equals(e.element.position));#Sw=t=>{for(const e of t.selected)WL(e,!1);const e=Kl();VW(e,t.element),t.position&&e.drawLine(t.pivot,t.position,Oc("transform-origin"))};#kw=(t,{element:e,point:i})=>{const n=[...zh()],s=Math.sign(e.globalMatrix.a*e.globalMatrix.d*e.localMatrix.a*e.localMatrix.d)||1,r=e.totalRotate,o=Mu(e),a=o?o.transformPoint(e.position):e.position,l=a.getPositiveAngleTo(t.position);return ES(n),this.#cb.start(),{sign:s,start:r,current:l,position:null,pivot:a,element:e,selected:n}};#_w=(t,e)=>{let i=t.position;i=Ba?XS(e.pivot,t.position):XS(e.pivot,t.position,1);let n=e.pivot.getPositiveAngleTo(i),s=e.current;n>=270&&n<=360&&s>=0&&s<=90?s+=360:n>=0&&n<=90&&s>=270&&s<=360&&(s-=360);let r=n-s;r=Math.round(r)*e.sign,Vg(e.selected,r)&&(e.position=i,e.current=n,Rl())};#Iw=(t,e)=>(OS(),!!this.#cb.hasChanged()||e.start!==e.element.totalRotate);#bw=(t,{handle:e,element:i})=>{const n=[...zh()];return ES(n),this.#cb.start(),{handle:e,element:i,start:i.scale,position:i.globalBounds.getPointAtPosition(e.x,e.y),selected:n}};#Mw=(t,e)=>(OS(),!!this.#cb.hasChanged()||!e.start.equals(e.element.scale));#ww=(t,e)=>{const i=function(t,e,i,n=!1){const s={x:1,y:1};let r=t.localBounds.getPointAtPosition(e.x,e.y);return t.globalMatrix.isIdentity||(i=t.globalMatrix.transformInversePoint(i)),t.anchor.isZero||(r=r.sub(t.anchor),i=i.sub(t.anchor)),2!==e.x&&(s.x=UW(i.x,r.x)),2!==e.y&&(s.y=UW(i.y,r.y)),n&&(s.x=s.y=function(t,e,i){return 2===i.x?e:2===i.y?t:t<0?e<0?-Math.sqrt(t*e):-t>e?t:e:e<0?-e>t?e:t:Math.sqrt(t*e)}(s.x,s.y,e)),s}(e.element,e.handle,qS(t.position),Ba);Hg(zh(),i)&&Rl()};#mw=t=>{!function(t){const e=tl(),i=el(),n=Oc("guide-hover"),s=Kl();t.isHorizontal?s.drawLine({x:e.x,y:t.position},{x:i.x,y:t.position},n):s.drawLine({x:t.position,y:e.y},{x:t.position,y:i.y},n)}(t.guide)};#vw=(t,e)=>(e.isHidden=!0,ES(),Rl(),{guide:e,start:e.position});#yw=(t,e)=>{const i=e.guide;i.position=qS(Ba?t.position.rounded():t.position,i.isHorizontal?"x":"y")[i.isHorizontal?"y":"x"],Bl()};#xw=(t,e)=>{OS(),Rl();const{guide:i,start:n}=e;if(i.isHidden=!1,i.position===n)return!1;const s=_k();return(s.exists(i.position,i.isHorizontal,i)||(i.isHorizontal?t.canvasPosition.y<0:t.canvasPosition.x<0))&&s.remove(i),!0};#Aw=(t,e)=>null!=e.percent?Ua?this.#Bw(t,e):this.#Uw(t,e):null!=e.handle?Ua?this.#$w(t,e):this.#Fw(t,e):Ra?this.#Vw(t,e):Ua?this.#Hw(t,e):!Ba&&function(t){return!(!jW||!jW.keyframes[t])&&iW(jW.keyframes[t])}(e.index)?this.#Gw(t,e):this.#Zw(t,e);#Yw(){NW&&jW&&(jW.invalidate(),QO.updateTarget(NW,jW.animator.property.id,cW),EW()),Bl()}#Vw=(t,e)=>{const i=e.animation.keyframes[e.index];iW(i)||aW(i,!1);let n=i.value;1===n.joint?n=new Di(n.point,n.type,2,n.point,n.point):2===n.joint&&Oi(n)||(n=new Di(n.point,n.type,2,n.handleIn||n.point,n.handleOut||n.point));let s=!1;n!==i.value&&(i.value=n,s=!0,this.#Yw()),e.handle=1;const r=this.#Fw(t,e);return s&&(r[1].changedJoint=!0),r};#Fw=(t,e)=>{const i=e.animation,n=i.keyframes[e.index];let s=!1;Ra&&2!==n.value.joint&&(n.value=en(n.value,2),this.#Yw(),s=!0);const r=Mu(e.element);let o=n.value.point;r&&(o=r.transformPoint(o)),ES(),this.#Qw(e.element,i,r);const a=Hi(n.value,e.handle),l={element:e.element,animation:i,keyframe:n,matrix:r,handle:e.handle,start:a,position:a,angleReference:o,changedJoint:s};return[{move:this.#Jw,up:this.#qw},l]};#Jw=(t,e)=>{let i=Ba?XS(e.angleReference,t.position):qS(t.position);e.matrix&&(i=e.matrix.inversePoint(i.x,i.y)),e.position.equals(i)||(e.position=i,e.keyframe.value=on(e.keyframe.value,i.x,i.y,e.handle),this.#Yw())};#qw=(t,e)=>(OS(),!!e.changedJoint||!e.start.equals(e.position));#$w=(t,e)=>{const i=e.animation.keyframes[e.index];return i.value=Xi(i.value,e.handle),this.#Yw(),Jo(),cN};#Uw=(t,e)=>{const i=e.animation,n=[i.keyframes[e.index],i.keyframes[e.index+1]],s=Mn([n[0].value,n[1].value],0,1,e.percent,Ra);let r=!1;n[0].value!==s[0]&&(n[0].value=s[0],r=!0),n[1].value!==s[1]&&(n[1].value=s[1],r=!0),oW(n,!0),r&&this.#Yw();const o={element:e.element,matrix:Mu(e.element),position:t.position,animation:i,pair:n,changed:r,mold:kn(s,0,1,e.percent)};return[{move:this.#Kw,up:this.#Xw},o]};#Kw=(t,e)=>{let i=t.position;e.matrix&&(i=e.matrix.transformInversePoint(i));const n=_n(i,e.mold),s=e.pair,r=wn([s[0].value,s[1].value],0,1,n[0],n[1]);let o=!1;s[0].value!==r[0]&&(s[0].value=r[0],o=!0),s[1].value!==r[1]&&(s[1].value=r[1],o=!0),o&&(e.changed=!0,this.#Yw())};#Xw=(t,e)=>e.changed;#Zw=(t,e)=>{const i=e.animation,n=i?.keyframes?.[e.index];if(!n)return cN;let s=!1;if(Ba?iW(n)?(nW(n),s=!0):aW(n,!0):aW(n,!1),s)return cN;const r=this.#Gw(t,e);return r[1].deselect=!1,r};#Hw=(t,e)=>{const i=e.animation,n=i?.keyframes?.[e.index];return n?(nW(n),i.removeKeyframe(n)&&(Zr(VO),this.#Yw(),Jo()),cN):cN};#Bw=(t,e)=>{const i=e.animation;let n=i.keyframes[e.index];if(!n)return cN;let s=n.offset+e.percent*(i.keyframes[e.index+1].offset-n.offset);if(s=Math.round(s),i.getKeyframeAtOffset(s))return cN;n=i.addKeyframeAtOffset(s),Zr(VO),this.#Yw(),aW(n,!1),e.index=i.getIndexOfKeyframe(n),e.node=n.value;const r=this.#Gw(t,e);return r[1].moved=!0,r};#Gw=(t,e)=>{const i=e.node.point,n=Mu(e.element),s=TW(),r=e.animation,o=r.keyframes[e.index];zl("node-move");let a=i,l=null;1===s?.length&&r.keyframes.length>1&&(0===e.index?l=r.keyframes[e.index+1].value.point:e.index===r.keyframes.length-1&&(l=r.keyframes[e.index-1].value.point)),n&&(a=n.transformPoint(a),l&&(l=n.transformPoint(l))),ES(),this.#Qw(e.element,r,n);const c={start:i,position:i,startReference:a,matrix:n,animation:r,selected:s,keyframe:o,angleReference:l,element:e.element,moved:!1,deselect:!0};return[{move:this.#tM,up:this.#eM},c]};#tM=(t,e)=>{let i=Ba?e.angleReference?XS(e.angleReference,t.position):tk(t.position,e.startReference):qS(t.position);if(e.matrix&&(i=e.matrix.inversePoint(i.x,i.y)),e.position.equals(i))return;const n=i.sub(e.position);e.position=i;for(const t of e.selected)t.value=cn(t.value,n.x,n.y);e.moved=!0,this.#Yw()};#eM=(t,e)=>(OS(),!!e.moved||(e.deselect&&e.selected.length>1&&(sW(e.selected),aW(e.keyframe,!0)),!1));#Qw(t,e,i){if(!jS)return;const n=[t.position];for(const t of e.keyframes)n.push(t.value.point);BS(n,i)}}(2),new class extends oN{constructor(){super(),this.dblClickDelta=-1,this.defaultCanvasCursor="hand"}get name(){return"pan"}draw(){}onMouseLeftButtonDown(t){this.startPan(5)}onMouseUp(t){0===t.button&&this.endPan(5),super.onMouseUp(t)}onMouseLeftButtonUp(t){this.endPan(5)}onMouseLeftButtonMove(t){}},new class extends oN{#iM=null;#nM=null;#sM=!1;constructor(){super(),this.dblClickDelta=-1,this.defaultCanvasCursor="zoom-in"}get name(){return"zoom"}draw(){EL(this.#iM,this.#nM)}#rM(){this.isWorking?zl("zoom"):zl(Ua?"zoom-out":"zoom-in")}onKeyboardStatusChange(t){!this.isWorking&&Ha(t)&&this.#rM()}onMouseLeftButtonDown(t){this.isWorking=!0,this.#iM=t.position,this.#nM=null,this.#sM=!0}onMouseLeftButtonMove(t){this.#sM&&(this.#sM=!1,this.#rM()),!this.#nM&&this.#iM.distanceTo(t.position)<=Kl().getLineScale(10*Xa)||(this.#nM=t.position,Bl())}onMouseLeftButtonUp(t){if(this.#nM)ol(Ve.fromPoints(this.#iM,this.#nM),null,0);else{let e=null;Ra&&(e=KL(t.position,!0)),e?ol(e.globalBounds.bounds):Ua?rl(t.canvasPosition):sl(t.canvasPosition)}this.isWorking=!1,this.#iM=this.#nM=null,this.#rM(),Bl()}},new class extends lN{get name(){return"rect"}onKeyDown(t){if(!this.isWorking)return super.onKeyDown(t);const e=this.element;if(!e)return!0;let i=!1;switch(Fa(t)){case"ArrowUp":e.radius=e.radius.add(.05*e.shape.diagonal/2),i=!0;break;case"ArrowDown":const t=e.radius.add(-.05*e.shape.diagonal/2);e.radius!==t&&(e.radius=t,i=!0);break;case"R":e.radius.isZero||(e.radius=new ys(0),i=!0);break;default:return!0}return i&&(this.applyGradients(),Cd(4)),!0}createElement(){return new Kp(new xs(0,0))}updateElement(t,e,i){let n=i.x-e.x,s=i.y-e.y,r=Math.abs(n),o=Math.abs(s);Ba&&r!==o&&(r=o=Math.max(r,o),n=Math.sign(n)*r,s=Math.sign(s)*o);let a=ce.ZERO;Ua?(a=new ce(r,o),r*=2,o*=2):(n<0||s<0)&&(a=new ce(n<0?r:0,s<0?o:0)),t.anchor=a,t.width=r,t.height=o}},new class extends lN{get name(){return"ellipse"}createElement(){return new Zp(new ms(0,0))}updateElement(t,e,i){e=XL(t,e),i=XL(t,i);let n=e.sub(i),s=Math.abs(n.x),r=Math.abs(n.y);Ba&&(s=r=Math.max(s,r),Ua||(n=new ce(s*Math.sign(n.x),r*Math.sign(n.y)))),Ua?(s*=2,r*=2,t.anchor=ce.ZERO):t.anchor=n.scale(.5),t.width=s,t.height=r}},new class extends lN{get name(){return"regular-polygon"}onKeyDown(t){if(!this.isWorking)return super.onKeyDown(t);const e=this.element;if(!e)return!0;let i=!1;switch(Fa(t)){case"ArrowUp":e.sides<1e3&&(e.sides++,i=!0);break;case"ArrowDown":e.sides>3&&(e.sides--,i=!0);break;case"ArrowRight":e.cornerRadius+=.1,i=!0;break;case"ArrowLeft":e.cornerRadius-=.1,i=!0;break;case"R":0!==e.cornerRadius&&(e.cornerRadius=0,i=!0);break;default:return!0}return i&&(this.applyGradients(),Cd(4)),!0}snapMouseMovePoint(t){return this.isWorking&&Ba?XS(this.startPoint,t):qS(t)}createElement(){return new Xp(new bs(5,0))}updateElement(t,e,i){e=XL(t,e),i=XL(t,i);const n=e.distanceTo(i);t.angle=Ua?0:i.sub(e).angle+90,t.radius=n}},new class extends lN{#oM=1;get name(){return"star"}snapMouseMovePoint(t){return this.isWorking&&Ba?XS(this.startPoint,t):qS(t)}get shouldMoveOriginToMiddle(){return!0}createElement(){return this.#oM=$v.starRadiusRatio,new eg(new ws(5,0,0))}onKeyDown(t){if(!this.isWorking)return super.onKeyDown(t);const e=this.element;if(!e)return!0;let i=!1;switch(Fa(t)){case"ArrowUp":e.sides<1e3&&(e.sides++,i=!0);break;case"ArrowDown":e.sides>3&&(e.sides--,i=!0);break;case"ArrowRight":Ra?e.innerCornerRadius+=.1:e.outerCornerRadius+=.1,i=!0;break;case"ArrowLeft":Ra?e.innerCornerRadius-=.1:e.outerCornerRadius-=.1,i=!0;break;case"R":(e.innerCornerRadius||e.outerCornerRadius||e.innerRotate||e.outerRotate)&&(e.innerCornerRadius=e.outerCornerRadius=0,e.innerRotate=e.outerRotate=0,i=!0);break;default:return!0}return i&&(this.applyGradients(),Cd(4)),!0}updateElement(t,e,i){e=XL(t,e),i=XL(t,i);const n=e.distanceTo(i);t.angle=Ua?0:i.sub(e).angle+90,t.outerRadius=n,t.innerRadius=n*this.#oM}},new class extends lN{constructor(){super(),this.drawSelectionWhenWorking=!1}get name(){return"poly"}drawElement(t){FL(t.globalPath),ZL(t.points,t.globalMatrix)}closeType(t){if(!this.element)return null;t=XL(this.element,t);const e=this.element.points,i=Rc("path-node-radius");return t.distanceTo(e[0])<=i||!(t.distanceTo(e[e.length-2])<=i)&&null}onMouseEnter(t){this.isWorking||super.onMouseEnter(t)}onMouseLeave(t){this.isWorking||super.onMouseLeave(t)}snapMouseMovePoint(t){if(this.element&&Ba){let e=this.element.points[this.element.points.length-2];return this.element.globalMatrix.isIdentity||(e=this.element.globalMatrix.transformPoint(e)),XS(e,t)}return qS(t)}onMouseHover(t){if(this.currentPoint=this.snapMouseMovePoint(t.position),this.isWorking){const t=this.element.shape.points;t[t.length-1]=XL(this.element,this.currentPoint),this.element.shape.invalidate(),this.element.invalidateShape(),this.applyGradients(),Rl()}else Bl()}onMouseLeftButtonMove(t){this.onMouseHover(t)}onKeyDown(t){return this.isWorking?("Escape"===t.code?(t.preventDefault(),this.commitElement(t.shiftKey)):"Enter"===t.code&&this.addCurrentPoint(Ba),!0):super.onKeyDown(t)}onMouseLeftButtonDown(t){if(this.isWorking){const t=this.closeType(this.currentPoint);null===t?this.addCurrentPoint(!1):this.commitElement(t)}else super.onMouseLeftButtonDown(t),this.createBuilder(),this.isWorking=!0,Rl()}onMouseLeftButtonUp(t){}commitElement(t=!1){this.element&&(this.element.shape.points.pop(),this.element.isClosed=t,this.element.shape.invalidate(),this.element.invalidateShape(),this.applyGradients(),this.saveElement(),Cd(4),this.disposeBuilder(),this.isWorking=!1,ES(),Rl())}addCurrentPoint(t){if(!this.currentPoint||!this.element)return!1;const e=XL(this.element,this.currentPoint),i=this.element.shape.points;if(!t&&e.equals(i[i.length-2]))return!1;const n=i[i.length-1];return i.push(e),this.element.shape.invalidate(),this.element.invalidateShape(),this.applyGradients(),Rl(),Cd(4),BS([n],this.element.globalMatrix),!0}createElement(t){return BS([t]),new qp(new vs([ce.ZERO,ce.ZERO],!1))}updateElement(t,e,i){t.shape.points.splice(-1,1,XL(t,i)),this.element.shape.invalidate(),t.invalidateShape()}disposeBuilder(){super.disposeBuilder(),this.isWorking=!1}},new class extends lN{constructor(){super(),this.drawSelectionWhenWorking=!1}get name(){return"line"}snapMouseMovePoint(t){return this.isWorking&&this.element&&Ba?XS(this.startPoint,t):qS(t)}drawElement(t){VL(t.from,t.to,t.globalMatrix),ZL(t.points,t.globalMatrix)}createElement(t){return new tg(new Ms(ce.ZERO,ce.ZERO))}updateElement(t,e,i){t.to=XL(t,i)}},new class extends aN{constructor(){super([[null,"node"],[0,"node"],[1,"node"],[2,ON]],[[2,WN]]),this.addAction(0,{down:this.#aM,move:this.#lM,up:this.#pw,draw:this.#cM}),this.addAction(1,this.#uM),this.addAction(2,this.#hM)}get name(){return"path"}activate(){Yr(Jc,this.#dM),aa(),ym();for(const t of Th(_m))wm(t,!0);la(),super.activate()}deactivate(){super.deactivate(),Qr(Jc,this.#dM),ym()}#dM=()=>{!this.isWorking&&this.update(),Bl()};onKeyboardStatusChange(t){this.isWorking||(2===this.hover[0]?(Va(t)||Ha(t))&&this.updateCursor():Ha(t)&&this.update())}getHoverInfo(t){if(!this.isMouseInside)return EN;const e=sN(t,!0,Ua,!1);if(e)return[2,e];if(!Ua){const e=KL(t,!0);if(e)return[1,e]}return EN}drawTool(){const t=TL();for(const t of Ph())JL(t,vm(t))||WL(t);const e=this.hover[1];e instanceof Rh&&!hh(e)&&OL(e),t.restore()}#aM=t=>{let e=null,i=null;return kh(_m)&&(e=[...Th(_m)],Ua&&(i=[t.position])),{start:t.position,end:t.position,elements:e,lasso:i}};#lM=(t,e)=>{e.end.equals(t.position)||(e.end=t.position,e.lasso&&e.lasso.push(t.position),Bl())};#pw=(t,e)=>{const i=Ve.fromPoints(e.start,t.position);return aa(),e.elements?e.lasso?.length>1?function(t,e){const i=Skia.SkPath.MakeFit(t,2,!0);if(!i||i.isEmpty)return i?.delete(),ym();zm(i,e),i.delete()}(e.lasso,Ba):!i.isVisible&&mm()?Mh():jm(i,Ba):(vh(i,!0,_m),jm(i,Ba)),la(),Bl(),!1};#cM=t=>{if(t.elements){const e=TL();for(const e of t.elements)JL(e,vm(e));t.lasso&&$L(t.lasso),e.restore(),t.lasso||EL(t.start,t.end)}else EL(t.start,t.end)};#uM=(t,e)=>{const i=Ba;if(hh(e)){if(i)return bh(e),cN;aa(),ph(e),wm(e),la()}else aa(),ph(e,i),wm(e,i),la();return cN};#fM=(t,e)=>{let i=t.position.sub(e.start);if(i.isZero)return;i=KS(e.box,i);const n=e.delta;i.equals(n)||(e.delta=i,i=i.sub(n),Gg(e.elements,i,!1)&&(e.changed=!0,Bl()))};#pM=(t,e)=>(OS(),e.changed);#hM=(t,e)=>{switch(e.type){case 0:return this.#gM(t,e);case 1:return this.#mM(t,e);case 2:return this.#vM(t,e)}return cN};#yM=(t,e)=>(OS(),e.changed);#gM=(t,e)=>{const i=e.element,n=e.index;let s=!1;if(Ra&&gv(i)){s=vv(i,n),bm(i,n,!1);let t=Hi(i.nodes[n],1);return t=i.globalMatrix.point(t.x,t.y),Bl(),ES(),[{move:this.#xM,up:this.#yM},{index:n,handle:1,element:i,pivot:t,changed:s}]}if(Ua&&!Tv(i)){let t;return aa(),Pv(i)?t=Dv(i,new Set([n])):gv(i)&&(t=kv(i,new Set([n]))),t&&(null==Cm(i,0)?Zm(i):(Sm(i,n),Jo())),la(),Bl(),cN}let r=!1;if(function(t,e){return gm.has(t)&&gm.get(t).has(e)}(i,n)){if(Ba)return Sm(i,n),cN;r=!0}else bm(i,n,Ba);let o=Cm(i,n);return o=i.globalMatrix.point(o.x,o.y),ES(),Bl(),[{move:this.#bM,up:this.#wM},{position:o,pivot:o,changed:s,index:n,element:i,deselect:r,moved:!1}]};#mM=(t,e)=>{if(!gv(e.element))return cN;if(Ua&&Mv(e.element,e.index,e.handleType))return Jo(),cN;ES();let i=e.node.point,n=e.element.globalMatrix;n.isIdentity||(i=n.point(i.x,i.y));const s={index:e.index,handle:e.handleType,element:e.element,pivot:i,changed:!1};return Ra&&(s.changed=Cv(s.element,t.position,s.index,s.handle,!0)),[{move:this.#xM,up:this.#yM},s]};#xM=(t,e)=>{let i;i=Ba?XS(e.pivot,t.position):qS(t.position),Cv(e.element,i,e.index,e.handle,Ra)&&(e.changed=!0,Bl())};#vM=(t,e)=>{if(null==e.percent||Tv(e.element))return cN;let i=e.index;const n=e.percent,s=e.element;let r;if(Ua){let t;if(gv(s))r=Sv(s,i,n),r&&i++,t=s.nodes[i].point;else{if(!Pv(s))return cN;r=Av(s,i,n),r&&i++,t=s.points[i]}return t=s.globalMatrix.point(t.x,t.y),bm(s,i,!1),ES(),[{move:this.#bM,up:this.#wM},{position:t,pivot:t,changed:r}]}const o=nN(s);if(!o)return cN;const a=yn(o.nodes,i);if(null==a)return cN;mv(s,i,a,n,Ra)&&(r=!0),Mm(s,[i,a],!1),Bl();let l=s.globalMatrix;return l.isIdentity&&(l=null),[{move:this.#MM,up:this.#yM},{mold:kn(o.nodes,i,a,n),from:i,to:a,matrix:l,element:s,changed:r}]};#bM=(t,e)=>{const i=Ba?tk(t.position,e.pivot):qS(t.position),n=i.sub(e.position);if(n.isZero)return;e.moved=!0,e.position=i;let s=!1;for(const[t,e]of xm()){let i;Tv(t)?i=Rv(t,n,e):Pv(t)?i=Wv(t,n,e):gv(t)&&(i=Iv(t,n,e)),i&&(s=!0)}s&&(e.changed=!0,Bl())};#wM=(t,e)=>(!e.moved&&e.deselect&&e.element&&bm(e.element,e.index,!1),this.#yM(t,e));#MM=(t,e)=>{let i=t.position;e.matrix&&(i=e.matrix.inversePoint(i.x,i.y));const n=_n(i,e.mold);_v(e.element,e.from,e.to,n[0],n[1])&&(e.changed=!0,Bl())}},new class extends lN{#SM=!1;#kM=null;#_M=null;#IM=null;#CM=1;#LM=null;#NM=new Set;#jM=!1;#zM;constructor(t){super(),this.defaultCanvasCursor="pen-start",this.#zM=t}get name(){return"pen"}deactivate(){this.#CM=1,this.#_M=this.#kM=this.#IM=null,this.#LM=null,this.#SM=!1,super.deactivate()}#PM(){this.#SM=!1,this.#_M=this.#kM=this.#IM=null,this.#CM=1,this.#TM(),this.#AM()}onStateChanged(){super.onStateChanged(),this.#PM()}onIsolationContextChanged(){super.onIsolationContextChanged(),this.#PM()}#TM(t,e){t??=_l(),this.#LM=sN(t,!1,!0,!0,!0),this.#AM(),e?Rl():Bl()}#AM(){if(!this.isWorkingOrPanning)if(this.#LM)switch(this.#LM?.type){case 0:Ra&&this.#LM.node instanceof Di||Ua?zl("node-move"):this.#DM?zl("pen-continue"):zl("pen-sub");break;case 2:zl(Ua?"node-mold":"pen-add")}else zl(this.defaultCanvasCursor)}drawSelectedElement(t){JL(t,this.#LM?.element===t?this.#NM:null,!0)}drawElement(t){FL(t.globalPath);const e=t.nodes;if(this.#SM)null!=this.#IM&&QL(e[this.#IM],t.globalMatrix),this.isMouseLeftDown&&QL(e[this.#_M],t.globalMatrix);else for(const i of this.#NM)e[i]&&QL(e[i],t.globalMatrix);GL(t.path.nodes,this.#NM,t.globalMatrix)}#EM(t){if(this.element&&Ba){let e=(this.#SM?this.element.nodes[this.#_M]:this.element.path.lastNode)?.point;if(e)return this.element.globalMatrix.isIdentity||(e=this.element.globalMatrix.transformPoint(e)),XS(e,t)}return qS(t)}snapMouseMovePoint(t){if(this.element&&Ba){let e;e=this.#SM?this.#IM??this.#_M:this.element.nodes.length-2;let i=this.element.nodes[e].point;return this.element.globalMatrix.isIdentity||(i=this.element.globalMatrix.transformPoint(i)),XS(i,t)}return qS(t)}#OM(t,e){if(!t||t.nodes.length<=1)return!1;t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e));const i=this.#SM?this.#kM:0;return e.distanceTo(t.nodes[i].point)<=Rc("path-node-radius",t.globalMatrix)}#WM(t,e){if(!t)return null;const i=t.path.nodes;let n,s;if(this.#SM)n=this.#kM,s=1===i[this.#_M].type?this.#_M+1:this.#_M-1;else{const t=i.length-1;if(t<=0)return null;n=0,s=t-1}t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e));const r=Rc("path-node-radius",t.globalMatrix);return e.distanceTo(i[n].point)<=r||!(e.distanceTo(i[s].point)<=r)&&null}onMouseEnter(t){this.isWorking||super.onMouseEnter(t)}onMouseLeave(t){this.isWorking||super.onMouseLeave(t)}onKeyboardStatusChange(t){!this.isWorking&&this.#LM&&(Ha(t)||Va(t)&&0===this.#LM.type&&this.#LM.node instanceof Di)&&this.#AM()}onKeyDown(t){return this.element?(this.#LM||("Escape"===t.code?(t.preventDefault(),this.#RM(Ba)):"Enter"===t.code&&this.currentPoint&&(this.#BM(this.element,this.currentPoint),Rl())),!0):super.onKeyDown(t)}#UM=null;#$M=null;get#DM(){if(!this.#LM)return!1;const t=this.#LM.node;if(null==t)return!1;if(2===t.type)return!0;if(1!==t.type)return!1;const e=this.#LM.element.path;if(1===e.nodes.length)return!0;const i=yn(e.nodes,this.#LM.index,!0);return null!=i&&2===e.nodes[i].type}onMouseHover(t){if(!this.isWorking)return this.#TM(t.position),void(this.#LM?WS():this.currentPoint=this.snapMouseMovePoint(t.position));this.currentPoint=this.snapMouseMovePoint(t.position);const e=this.#OM(this.element,this.currentPoint);zl(e?"pen-close":"pen"),this.#FM(this.element,this.currentPoint,e),Rl()}#VM=!0;onMouseLeftButtonDown(t){if(this.#VM=!0,this.isWorking){this.currentPoint=this.snapMouseMovePoint(t.position);const e=this.#WM(this.element,this.currentPoint);null!==e&&(!1!==e||!Ba||this.element instanceof qp?this.#RM(e):(this.#HM(this.element),this.#VM=!1))}else if(this.#LM){this.#jM=!1,this.startPoint=this.currentPoint=t.position;const e=this.#LM.element,i=gv(e);switch(this.#LM.type){case 0:if(Ra)i&&(this.#jM=vv(e,this.#LM.index),this.#LM.type=1,this.#LM.handleType=this.#CM,this.#GM());else if(Ua)this.#ZM();else{if(!this.#DM)return this.#NM.add(this.#LM.index),(i?kv(e,this.#NM):Dv(e,this.#NM))&&(Jo(),ES(),this.#TM(t.position,!0)),void this.#NM.clear();this.#YM()}break;case 2:if(Ua&&i)this.#QM();else if(null!=this.#LM.percent){let t=this.#LM.index;(i?Sv(e,t,this.#LM.percent):Av(e,t,this.#LM.percent))&&(Jo(),this.#LM.index=++t,this.#LM.node=i?e.path.nodes[t]:e.points[t],this.#LM.percent=null,this.#LM.type=0,this.#NM.clear(),this.#NM.add(t),this.#ZM())}}Bl()}else zl("pen"),super.onMouseLeftButtonDown(t),this.createBuilder(),this.#SM=!1,this.isWorking=!0,this.#NM.clear(),this.#NM.add(0),Rl()}onMouseLeftButtonMove(t){if(this.#UM)return this.#UM(t);if(!this.element)return;const e=t.position;this.currentPoint&&e.equals(this.currentPoint)||(this.currentPoint=e,this.#JM(this.element,e),Rl())}onMouseLeftButtonUp(t){if(this.#$M)this.#$M(t);else if(this.isWorking)return this.#VM&&this.#BM(this.element,this.currentPoint),zl("pen"),void Rl();this.startPoint=null,this.#CM=1,this.isWorking=!1,this.#UM=this.#$M=null,this.#LM=null,this.#NM.clear(),ES(),this.#TM(t.position)}#gu(){return this.#jM||this.#zM?.hasChanged()}applyGradients(){this.#SM||super.applyGradients()}#qM=null;#ZM(){this.isWorking=!0,zl("node-move"),this.#NM.clear(),this.#NM.add(this.#LM.index),ES(),this.#qM=this.#LM.element.globalMatrix.transformPoint(this.#LM.node),this.currentPoint=this.#qM,this.#UM=this.#KM,this.#$M=this.#XM,this.#zM?.start()}#KM(t){const e=Ba?tk(t.position,this.#qM):qS(t.position),i=e.sub(this.currentPoint);if(this.currentPoint=e,i.isZero)return;const n=this.#LM.element;(gv(n)?Iv(n,i,this.#NM):Wv(n,i,this.#NM))&&(this.applyGradients(),this.#jM=!0,Rl())}#XM(t){this.#qM=null,this.#gu()&&Jo()}#tS=null;#QM(){const t=this.#LM.percent,e=nN(this.#LM.element);if(!e)return;const i=this.#LM.index,n=yn(e.nodes,i);null!=n&&(this.#NM.clear(),this.#NM.add(i),this.#NM.add(n),mv(this.#LM.element,i,n,t,Ra)?(this.#jM=!0,Rl()):Bl(),this.#tS=kn(e.nodes,i,n,t),this.#tS.element=this.#LM.element,this.#UM=this.#MM,this.#$M=this.#eS,this.#zM?.start())}#MM(t){const e=this.#tS;let i=t.position;e.element.globalMatrix.isIdentity||(i=e.element.globalMatrix.transformInversePoint(i));const n=_n(i,e);_v(e.element,e.fromIndex,e.toIndex,n[0],n[1])&&(this.#jM=!0,this.applyGradients(),Rl())}#eS(){this.#gu()&&Jo(),this.#tS=null}#GM(){this.isWorking=!0,zl("node-move"),this.#NM.clear(),this.#NM.add(this.#LM.index),this.#UM=this.#xM,this.#$M=this.#iS,ES();const t=Hi(this.#LM.node,this.#CM);t&&(this.currentPoint=this.#LM.element.globalMatrix.transformPoint(t)),this.#zM?.start()}#xM(t){const e=this.#EM(t.position);Cv(this.#LM.element,e,this.#LM.index,this.#LM.handleType,!0)&&(this.#jM=!0,this.applyGradients(),Rl())}#iS(){this.#gu()&&Jo()}#YM(){const{index:t,element:e}=this.#LM,i=e.path;if(1===i.nodes.length)this.#kM=0;else if(this.#kM=yn(i.nodes,t,!0),null==this.#kM)return;this.isWorking=!0,this.element=e,this.#IM=null,this.#_M=t,this.#SM=!0,this.#LM=null,this.#jM=vv(e,t);const n=this.element.nodes[this.#_M];this.#CM=1===n.type?0:1,this.#NM.clear(),this.#NM.add(this.#_M),ES(),this.currentPoint=e.globalMatrix.transformPoint(n.point),this.#jM&&Rl(),this.#zM?.start()}get shouldMoveOriginToMiddle(){return!this.#SM}#RM(t){if(this.element){if(this.#nS(t),this.#SM)null!==this.#IM&&1===Math.abs(this.#_M-this.#IM)&&(this.#NM.clear(),this.#NM.add(this.#_M),kv(this.element,this.#NM),function(t){pv&&pv(t)}(this.element),Jo()),this.element=null;else{const e=this.element.path.nodes;e.pop();const i=e.length-1;i>=0&&(1!==e[0].type&&(e[0]=nn(e[0],1)),i>0&&e[i].type<2&&(e[i]=nn(e[i],t?3:2))),this.element.path.invalidate(),this.element.invalidateShape(),this.applyGradients(),this.saveElement(),Cd(4),this.disposeBuilder()}this.startPoint=null,this.#SM=!1,this.isWorking=!1,this.#NM.clear(),zl(this.defaultCanvasCursor),ES(),Rl()}}#BM(t,e){this.#nS(!1),t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e));let i,n=t.nodes;if(this.#SM)i=n[this.#_M],function(t,e,i){return Lv(t,Cn,e,i)}(t,this.#_M,e)&&(this.#NM.clear(),this.#NM.add(this.#_M),this.#NM.add(this.#_M+1),1===i.type?(this.#IM=this.#_M+1,this.#kM++):2===i.type&&(this.#IM=this.#_M,this.#_M++));else{const s=new Di(e,0,2,null,null),r=n.length-1;i=n[r],3===i.type&&(n[r]=nn(i,0)),n.push(s),t.path.invalidate(),t.invalidateShape(),this.#NM.clear(),this.#NM.add(r),this.#NM.add(r+1)}Cd(4),BS([i.point],t.globalMatrix)}#nS(t){if(!this.element)return;const e=this.element.nodes;if(e.length<=2)return;if(!this.#SM){const i=e.length-2;return void(t?3!==e[i].type&&(e[i]=nn(e[i],3)):3===e[i].type&&(e[i]=nn(e[i],0)))}if(null==this.#IM||null==this.#kM)return;const i=e[this.#kM];if(i)switch(i.type){case 1:bv(this.element,t?3:0,this.#IM);break;case 2:t?(bv(this.element,3,this.#kM),bv(this.element,1,this.#IM)):bv(this.element,0,this.#IM);break;case 3:t?bv(this.element,1,this.#IM):(bv(this.element,0,this.#IM),bv(this.element,2,this.#kM))}}#FM(t,e,i){if(!this.element)return;if(this.#nS(i),t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e)),this.#SM)return void yv(t,qi(t.nodes[this.#_M],e),this.#_M);const n=t.nodes,s=n.length-1;n[s]=qi(n[s],e),t.path.invalidate(),t.invalidateShape(),this.applyGradients()}#JM(t,e){if(e=this.#EM(e),t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e)),this.#SM){const i=this.#_M;return 2!==t.nodes[i].joint&&xv(t,2,new Set([i])),void yv(t,tn(t.nodes[i],e,this.#CM),i)}const i=t.nodes,n=i.length-1;i[n]=tn(i[n],e,this.#CM),t.path.invalidate(),t.invalidateShape(),this.applyGradients()}#HM(t){if(this.#SM){const e=this.#IM;return void(null!=e&&Mv(t,e,this.#CM))}const e=t.nodes,i=e.length-2;i<0||(e[i]=Xi(e[i],this.#CM),t.path.invalidate(),t.invalidateShape(),this.applyGradients())}disposeBuilder(){this.#SM?(this.#RM(!1),OS()):super.disposeBuilder(),this.isWorking=!1,this.#SM=!1}createElement(t){const e=new Di(ce.ZERO,1,2,null,null);return new Jp(new es([e]))}updateElement(t,e,i){}},new class extends lN{constructor(){super(),this.maxError=2,this.closeDist=10,this._points=[],this._zoom=1,this.drawSelectionWhenWorking=!1,this.useSnapping=!1,this.defaultCanvasCursor="pencil",this.useGradientUpdater=!1}get name(){return"pencil"}get allowGuideCreation(){return!1}createElement(){return this._zoom=Ka,this._points.push(ce.ZERO),new Jp(new es([]))}drawElement(t){$L(this._points,t.globalMatrix)}updateElement(t,e,i){this._zoom=Math.max(this._zoom,Ka),this._points.push(XL(t,i))}saveElement(){if(!this.element)return;const t=this._points;if(t.length<2)return void t.splice(0);const e=t[0].distanceTo(t[t.length-1]),i=Skia.SkPath.MakeFit(t,this.maxError/this._zoom,e<=this.closeDist/this._zoom);this.element.nodes=Wn(i),t.splice(0),i.delete(),this.useGradientUpdater=!0,this.saveGradients(),this.applyGradients(),this.clearGradients(),this.useGradientUpdater=!1,super.saveElement(),Cd([2,3])}},new class extends aN{#vg;#sS;constructor(t,e){super([[null,"selection"],[0,"selection"],[1,"selection"],[2,xN]],[[2,(t,e)=>t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]]]),this.#vg=t,this.#sS=e,this.addAction(0,uN(!0)),this.addAction(1,this.#us),this.addAction(2,{down:this.#rS,move:this.#oS,up:this.#aS,draw:this.#lS})}get name(){return"gradient"}activate(){super.activate(),this.#vg.subscribe(this.#cS)}deactivate(){this.#vg.unsubscribe(this.#cS),super.deactivate()}#cS=()=>this.update();getHoverInfo(t){if(!this.isMouseInside)return[0,null];const e=this.#uS(oh(),t);if(e)return[2,e];const i=KL(t,!0);return i&&$m(i)?[1,i]:[0,null]}#uS(t,e){if(!t||!$m(t))return null;const i=this.#hS(t);if(!i)return null;const n=gN(t,i),s=function(t,e){return Pc.get("tool-handle-radius").value/Math.max(e.lineScale,1e-4)}(0,n);e=n.transformInversePoint(e);const r=t=>e.distanceTo(t)<=s;let o;return i instanceof Ii?r(i.end)?o=1:r(i.start)?o=0:r(i.center)&&(o=2):i instanceof Ci?r(i.center.shifted(i.radius,0))?o=3:r(i.center.shifted(0,-i.radius))?o=4:r(i.center)&&(o=2):i instanceof Li?r(i.end.shifted(i.endRadius,0))?o=6:r(i.end.shifted(0,-i.endRadius))?o=4:r(i.end)?o=1:r(i.start.shifted(0,i.startRadius))?o=5:r(i.start)&&(o=0):i instanceof Ni&&r(i.center)&&(o=2),null==o?null:[t,i,o]}drawTool(){const t=TL(),e=this.hover[1];if(e&&OL(e),!ch()){for(const t of Ph())WL(t);this.#dS(oh())}t.restore()}#dS(t){if($m(t)){const e=this.#hS(t);e&&yN(e)(t,e)}}#fS(){return this.#vg.value?qd:tf}#hS(t){const e=this.#fS().getValue(t);return e instanceof _i?e:null}#us=(t,e)=>{if(Ba?wh(e,!0):ph(e,!1),!hh(e))return cN;if(this.#hS(e))return cN;let i=e.globalMatrix.transformInversePoint(t.position);const n=ji(this.#fS().getValue(e),2,new Ve(i.x,i.y,0,0)),s=this.#rS(t,[e,n,1]);return s.prevent=10,[{move:this.#oS,up:this.#aS,draw:this.#lS},s]};#lS=t=>{if(t.prevent)return;const e=TL();t.draw(t.element,t.gradient),e.restore()};#rS=(t,[e,i,n])=>(ES(),{type:n,start:t.position,element:e,gradient:i,prevent:0,update:vN(i),draw:yN(i),changed:!1,property:this.#fS(),isAbsolute:this.#sS.value,selected:[...Th($m)]});#oS=(t,e)=>{e.prevent&&t.position.distanceTo(e.start)>e.prevent&&(e.prevent=0),e.gradient=e.update(e.type,e.element,e.gradient,t.position),zd(e.selected,e.property,Pg(e.element,e.gradient,!e.isAbsolute))&&(e.changed=!0)};#aS=(t,e)=>(OS(),e.changed)}(dI,pI),new class extends oN{#pS=null;constructor(t,e,i){super(),this.defaultCanvasCursor="picker",this.dblClickDelta=-1,this.isFillSelected=t||{value:!0},this.isGradientAbsolute=e||{value:!0},this.watcher=i}get name(){return"color-picker"}deactivate(){super.deactivate(),this.#pS=null}onStateChanged(){this.#pS=null,super.onStateChanged()}onIsolationContextChanged(){this.#pS=null,super.onIsolationContextChanged()}draw(){if(ch()&&!this.#pS)return;const t=TL();this.#pS&&!hh(this.#pS)&&OL(this.#pS);for(const t of Th($m))WL(t);t.restore()}onMouseHover(t){let e=KL(t.position,!0);null==e||$m(e)||(e=null),e!==this.#pS&&(this.#pS=e,Bl())}onKeyboardStatusChange(t){Ha(t)&&zl(Ua?"picker-alt":this.defaultCanvasCursor)}onMouseLeftButtonDown(t){if(!this.#pS)return;let e=oh();if(null!=e&&!$m(e)&&(e=null,lh()>1))for(const t of Th($m)){e=t;break}if(null!=e)this.copyStyleToElements(e,this.#pS)&&($v.update(e),Jo());else{const t=this.#pS;Ua?this.copyStyleProperties($v,t)&&($v.update(t),Jo()):this.copyStyleProperties(t,$v)&&Cd(this.isFillSelected.value?2:3)}}copyStyleProperties(t,e){const i=Ba?this.isFillSelected.value?"fill":"stroke":null,n=!Ra;return e instanceof Vp?this.#gS(t,e,i,n):(this.watcher?.start(),this.#gS(t,e,i,n)||this.watcher?.hasChanged())}copyStyleToElements(t,e){const i=Ba?this.isFillSelected.value?"fill":"stroke":null,n=!Ra;this.watcher?.start();let s=!1;if(Ua)if(hh(e))for(const e of Th($m))this.#gS(t,e,i,n)&&(s=!0);else s=this.#gS(t,e,i,n);else for(const t of Th($m))this.#gS(e,t,i,n)&&(s=!0);return s||this.watcher?.hasChanged()}#gS(t,e,i,n=!0){if(t===e)return!1;let s;const r=e instanceof Vp?(t,i)=>{e.setValue(t,i)&&(s=!0)}:(t,i)=>{void 0!==i&&Nd(e,t,i)&&(s=!0)},o=null!=t.localBounds&&null!=e.localBounds;if("stroke"!==i){let i=t.fill;!this.isGradientAbsolute.value&&o&&i instanceof _i&&(i=i.toRelative(t.localBounds).toAbsolute(e.localBounds)),r(qd,i),n&&r(Jd,t.fillOpacity)}if("fill"!==i){let i=t.strokeBrush;!this.isGradientAbsolute.value&&o&&i instanceof _i&&(i=i.toRelative(t.localBounds).toAbsolute(e.localBounds)),r(tf,i),n&&r(Xd,t.strokeOpacity),r(ef,t.strokeLineWidth),r(nf,t.strokeLineJoin),r(sf,t.strokeLineCap),r(rf,t.strokeMiterLimit),r(af,t.strokeDashOffset),r(of,t.strokeDashArray?.slice()),r(lf,t.strokeDashPathLength)}return s}onMouseLeftButtonMove(t){}onMouseLeftButtonUp(t){}applyFillBrush(t){return zd(Th($m),qd,(()=>t.clone()))}applyStrokeBrush(t){return zd(Th($m),tf,(()=>t.clone()))}}(dI,pI,null),new DN(!0)),eC.push({value:"svg",title:"SVG",description:"SMIL, CSS, JS",icon:"workflow:Code",content:"es-export-svg"},{value:"lottie",title:"Lottie",description:"JSON, dotLottie",icon:"expr:lottie",content:"es-export-lottie"},{value:"video",title:"Video",description:"MP4, WebM",icon:"workflow:VideoFilled",content:"es-export-video"},{value:"image",title:"Image",description:"APNG, GIF",icon:"workflow:Image",content:"es-export-image"},{value:"seq",title:"Sequence",description:"SVG, PNG, JPEG",icon:"workflow:Multiple",content:"es-export-sequence"}),Pk||(Pk=!0,uk(),dk((function(){if(jk&&Ak().snap)for(const t of jk)t.bounds.isVisible&&GS(t.bounds)})),Tk=!1,J([Ck,"Artboard"],[Lk,"ArtboardList"]),Tk?(Mo({id:Nk,copy:null,delete:null,init:t=>t instanceof Ve?new Lk(new Ck(t)):t instanceof Ck?new Lk(t):t,update(t){jk=t},serialization:Bo(20,(()=>jk))}),So({id:Nk,get:function(){return zk?.id??jk?.first?.id??null},set:function(t){zk=jk?t?jk.find(t)??jk.first:jk.first:null}})):(zk=new Ck(Ve.ZERO,""),jk=new Lk(zk),Mo({id:Nk,copy:It,delete:function(){},update(t){jk.setItemBounds(zk,t||Ve.ZERO)},serialization:Bo(20,Dk)}))),ca=function(){return uW||_||Ll?.isWorkingOrPanning},await async function(t,i,n,s,r){hI.subscribe(XD,!1);const o=r.querySelector("[data-text-placeholder]");function a(t,e,i){e&&r.setAttribute("error",""),i?o.innerHTML=t:o.textContent=t}window.$isFocusOnInput=Pa,a("Loading components...");try{await async function(t,e=""){await KD({shell:ob,button:mb,"action-button":vb,"action-group":Lb,divider:Bw,icon:Nb,"css-icon":jb,"number-input":Tw,"text-input":jw,"time-input":zw,popover:Bb,picker:$b,menu:sw,"menu-item":nw,slider:Qb,"slider-input":qw,switch:Jb,progressbar:qb,dialog:Kb,kbd:iw,"context-menu":rw,toast:Uw,"scroll-container":ow,"icon-cycle":aw,"icon-switch":lw,"icon-toggle":uw,"icon-toolbar":cw,accordion:hw,"brush-thumb":Dw,"color-thumb":Ew,"color-handle":Ow,"alpha-slider":Ww,"color-wheel":Rw,"dynamic-container":$w,"pin-point":Hw,"pin-point-button":Yw,"flex-col":Qw,"flex-row":Jw,tabs:Kw,"rich-list":Xw,"file-input":tM,"loading-dialog-content":eM,"confirm-dialog-content":iM,"static-accordion":Nw},"cc-"),await KD({"brush-switch":VD,"brush-input":GD,"brush-control-solid":ZD,"brush-control-linear-gradient":YD,"brush-control-radial-gradient":QD,"brush-control-radial-focal-gradient":JD,"brush-control-sweep-gradient":qD,"color-text":MC,"color-control":xC,"gradient-slider":SC,"action-menu":mC,"font-select":jC,"active-element-accordion":CC,"about-dialog-content":PC,"upgrade-dialog-content":XC,"setup-dialog-content":UC,"new-project-dialog-content":nL,"sidebar-tab-content":TA,"tree-view-control":jD,"file-bar":UT,"menubar-controls":$T,"zoom-control":BT,"align-control":SL,"mask-control":pL,"canvas-control":wT,"snapping-control":AT,"path-op-control":zT,"path-joint-control":kT,"path-contour-control":_T,"grid-properties":pD,"stroke-settings":UA,"compositing-settings":LA,"compositing-settings2":PA,"paragraph-control":sD,"text-control":JA,"clip-group-control":aD,"fx-blur":MA,"fx-drop-shadow":_A,"fx-color-adjust":xA},"es-"),await KD(t,e)}(t)}catch(t){return a("Failed to load components",!0),!1}const l=wy();a("Loading assets...");try{await async function(){const t=[];document.querySelectorAll('meta[name^="expressive:icon-set:"]').forEach((e=>{const i=e.getAttribute("name").split(":").pop(),n=e.getAttribute("content");t.push(async function(t,e){const i=await(await fetch(e)).text(),n=(new DOMParser).parseFromString(i,"image/svg+xml").documentElement,s="http://www.w3.org/2000/svg";for(const e of n.getElementsByTagNameNS(s,"symbol")){const i=document.createElementNS(s,"svg");for(i.setAttribute("viewBox","0 0 18 18");e.firstChild;)i.appendChild(e.firstChild);const n=`${t}:${e.id}`;ib.set(n,i)}}(i,n))})),await Promise.all(t)}();const t=new Set(["expr:unknown","workflow:ChevronDown","workflow:ChevronRight","workflow:LockClosed","workflow:VisibilityOff","workflow:Add","workflow:CheckmarkCircle","workflow:AddCircle","workflow:Effects","expr:visibility-bar"]);for(const e of hC.values())e&&t.add(e);!function(t,e){e??=nb;for(const i of t)e.has(i)||(ib.has(i)?e.set(i,T(ib.get(i))):e.set(i,null))}(t)}catch(t){return a("Failed to load assets",!0),!1}await async function(t,e){if(null!==localStorage.getItem("setup"))return!1;e("Setup...");const i=await async function(){return{title:"Application setup",items:[{id:"license",title:"License agreement",content:{title:"End-User License Agreement",data:{type:"license",value:await IL()}},primary:{title:"Accept & continue",action:t=>t.next()}},{id:"theme",title:"Theme settings",content:{title:"Set the Tone",data:{type:"theme",description:"Opt for the perfect visual ambiance that suits your preference and environment.\n                        Select between our elegant Light and Dark themes to achieve the ideal creative experience."}},primary:{title:"Continue",action:t=>t.close()}}]}}();return await _y(document.createElement("es-setup-dialog-content"),i),localStorage.setItem("setup","ok"),i.callback&&await i.callback(),DC("AppSetupCompleted"),!0}(0,a);let c=!1;if(c=1===await async function(t){return KC("f7523b22c82556766272efa688f247e7953ce693fa955b3c",t)}(l),c||0===WebGLBuffAddr0x6da52.valueOf()){a("");const t="t704cb51c0546f708471996d3e29295f9c4b1847afbbd139c";let e;if(e=window[t],delete window[t],await rC(e),0===WebGLBuffAddr0x7c813.valueOf())return!1}a("Loading engine...");try{await async function(t){(await e()).init(),await async function(t=null,e){if(Rs)return!0;if(Rs=Skia.SkFontMgr.MakeDefault(),t){const e=await fetch(t).then((t=>t.ok?t.blob():null)),i=await(e?.arrayBuffer());if(i){const t=Rs.setFallback(i);if(t?.length){for(const i of t){if(!Os&&i.familyName&&(Os=i.familyName),i.instances?.length)for(const t of i.instances){const i=t.familyName||"",n=t.styleName||"Regular",s={family:i,style:n,fullName:`${i} ${n}`,postscriptName:t.postScriptName,blob:async()=>e};As.set(t.postScriptName,s)}Bs.set(i.familyName,[...As.values()])}Ys(t)}}}if(!await async function(){return"denied"!==(await navigator.permissions.query({name:"local-fonts"})).state}())return!1;try{const t=await window.queryLocalFonts(e?{postscriptNames:e}:void 0);if(0===t?.length)return!1;for(const e of t)As.has(e.postscriptName)||(As.set(e.postscriptName,e),Bs.has(e.family)?Bs.get(e.family).push(e):Bs.set(e.family,[e]));return!0}catch{return!1}}(t?.font),await async function(){customElements.define("drawing-surface",vl),await customElements.whenDefined("drawing-surface"),xl=new vl,xl.addEventListener("connect",ic),xl.addEventListener("disconnect",nc),bl=new yl(xl),bl.addEventListener("update",ec),xl.ruler.theme=bl,qa=Sc}(),await async function(){Zr(so,qr);const t=[];Zr(ro,(e=>t.push(e))),t.length&&await Promise.all(t),Zr(oo),function(...t){for(const e of t)Gr.delete(e)}(so,ro,oo)}()}({font:document.querySelector('meta[name="expressive:font"]')?.getAttribute("content")})}catch(t){return console.error(t),a("Failed to load engine",!0),!1}Yr(co,(t=>{Sy(t,"info")})),Yr(lo,(t=>{Sy(t,"info")})),Yr(uo,(t=>{Sy(t,"warning")})),Yr(ho,(t=>{Sy(t,"error")})),Yr(ao,(t=>{Sy(t,"normal")}));let u=!1;window.launchQueue&&window.launchQueue.setConsumer((({files:t})=>{t.length&&(TD=t[0])}));const h=TD;let d;h&&(TD=null,a("Opening project..."),u=await OI(h)),u||Ho(await async function(){const t=document.querySelector('meta[name="expressive:demo-file"]');if(!t)return OY();try{const e=await fetch(t.getAttribute("content"));return await SM(await e.arrayBuffer())}catch{return OY()}}(),!0),a("Loading editor...");try{customElements.define("es-app",i),await customElements.whenDefined("es-app"),d=document.createElement("es-app"),l.appendChild(d),await d.updateComplete,mI.change("layers")}catch(t){return a("Failed to load editor",!0),!1}return await async function(t=0){await async function(){ma=await navigator.keyboard.getLayoutMap()}(),Sa(t);const e={capture:!0};window.addEventListener("keydown",La,e),window.addEventListener("keyup",Na,e)}(1),aI.subscribe(nE,!0),window.$beforeunload=async()=>!await jy({message:"Project contains unsaved changes",yes:"Continue working",no:"Close window",cancel:!1}),a("Starting..."),function(t){window.addEventListener("unload",(()=>{DC("AppClosed",{duration:OC?Math.round((Date.now()-OC)/1e3):0}),t.dispose(),Rs&&(As.clear(),Bs.clear(),Ds.clear(),Es.clear(),Ws.clear(),Os=null,Rs.reset(),Rs.delete(),Rs=null),t.remove()}),{once:!0})}(d),setTimeout((async()=>{tE("transform"),Hk(),Zl(),u||DI(!0),r.remove()}),100),OC=Date.now(),DC("AppStarted"),!0}(EY,fB,0,0,document.getElementById("expr-overlay"));
